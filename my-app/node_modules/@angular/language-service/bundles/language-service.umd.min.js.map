{"version":3,"sources":["packages/language-service/bundles/language-service.umd.js"],"names":["$deferred","$resolved","$provided","$reflect","defineMetadata","getOwnMetadata","$getModule","name","require","define","modules","cb","global","module","exports","provided","result","Object","assign","reflect-metadata","apply","this","map","fs","path","ts","extendStatics","setPrototypeOf","__proto__","Array","d","b","p","hasOwnProperty","__extends","__","constructor","prototype","create","__assign","t","s","i","n","arguments","length","call","__values","o","m","Symbol","iterator","next","value","done","__read","r","e","ar","push","error","__spread","concat","ViewEncapsulation","ChangeDetectionStrategy","createInject","makeMetadataFactory","token","createInjectionToken","desc","_desc","ngInjectableDef","undefined","createAttribute","attributeName","createContentChildren","selector","data","first","isViewQuery","descendants","createContentChild","createViewChildren","createViewChild","createDirective","dir","SecurityContext","MissingTranslationStrategy","createComponent","c","changeDetection","Default","createPipe","pure","createInput","bindingPropertyName","createOutput","createHostBinding","hostPropertyName","createHostListener","eventName","args","createNgModule","ngModule","createInjectable","injectable","createOptional","createSelf","createSkipSelf","createHost","Type","Function","props","factory","_i","values","ngMetadataName","isTypeOf","obj","DASH_CASE_REGEXP","splitAtColon","input","defaultValues","_splitAt","character","characterIndex","indexOf","slice","trim","visitValue","visitor","context","isArray","visitArray","isStrictStringMap","getPrototypeOf","STRING_MAP_PROTO","visitStringMap","visitPrimitive","visitOther","isDefined","val","noUndefined","ValueTransformer","arr","_this","keys","forEach","key","SyncAsync","isPromise","then","msg","Error","syntaxError","parseErrors","ERROR_SYNTAX_ERROR","ERROR_PARSE_ERRORS","escapeRegExp","replace","utf8Encode","str","encoded","index","codePoint","charCodeAt","low","String","fromCharCode","MAX_LENGTH_STRINGIFY","stringify","join","overriddenName","res","JSON","_a","toString","newLineIndex","substring","resolveForwardRef","type","Version","full","splits","split","major","minor","patch","ProviderAstType","TextAst","ngContentIndex","sourceSpan","visit","visitText","BoundTextAst","visitBoundText","AttrAst","visitAttr","BoundElementPropertyAst","securityContext","unit","isAnimation","PropertyBindingType","Animation","visitElementProperty","BoundEventAst","target","phase","handler","fullName","calcFullName","visitEvent","ReferenceAst","originalValue","visitReference","VariableAst","visitVariable","ElementAst","attrs","inputs","outputs","references","directives","providers","hasViewContainer","queryMatches","children","endSourceSpan","visitElement","EmbeddedTemplateAst","variables","visitEmbeddedTemplate","BoundDirectivePropertyAst","directiveName","templateName","visitDirectiveProperty","DirectiveAst","directive","hostProperties","hostEvents","contentQueryStartId","visitDirective","ProviderAst","multiProvider","eager","providerType","lifecycleHooks","isModule","NgContentAst","visitNgContent","NullTemplateVisitor","ast","RecursiveTemplateAstVisitor","_super","visitChildren","results","templateVisitAll","asts","astResult","CompilerConfig","_b","_c","defaultEncapsulation","_d","useJit","_e","jitDevMode","_f","missingTranslation","preserveWhitespaces","strictInjectionParameters","Emulated","preserveWhitespacesDefault","preserveWhitespacesOption","defaultSetting","StaticSymbol","filePath","members","assertNoMembers","StaticSymbolCache","cache","Map","get","declarationFile","set","HOST_REG_EXP","sanitizeIdentifier","CompileSummaryKind","_anonymousTypeIndex","identifierName","compileIdentifier","reference","ref","identifier","tokenName","tokenReference","CompileStylesheetMetadata","styles","styleUrls","moduleUrl","_normalizeArray","CompileTemplateMetadata","template","templateUrl","htmlAst","externalStylesheets","animations","ngContentSelectors","interpolation","isInline","encapsulation","flatten","list","reduce","flat","item","flatItem","toSummary","CompileDirectiveMetadata","isComponent","exportAs","hostListeners","hostAttributes","viewProviders","queries","guards","viewQueries","entryComponents","componentViewType","rendererType","componentFactory","isHost","host","matches","match","inputsMap","bindConfig","parts","outputsMap","summaryKind","Directive","CompilePipeMetadata","Pipe","CompileNgModuleMetadata","declaredDirectives","exportedDirectives","declaredPipes","exportedPipes","bootstrapComponents","importedModules","exportedModules","schemas","transitiveModule","id","NgModule","TransitiveCompileNgModuleMetadata","directivesSet","Set","exportedDirectivesSet","pipesSet","pipes","exportedPipesSet","modulesSet","entryComponentsSet","addProvider","provider","addDirective","has","add","addExportedDirective","addPipe","addExportedPipe","addModule","addEntryComponent","ec","componentType","ProviderMeta","useClass","useValue","useExisting","useFactory","deps","multi","dependencies","AstPath","path$$1","position","defineProperty","enumerable","configurable","parentOf","node","childOf","ctor","pop","Text","Expansion","switchValue","cases","switchValueSourceSpan","visitExpansion","ExpansionCase","expression","valueSourceSpan","expSourceSpan","visitExpansionCase","Attribute","valueSpan","visitAttribute","Element","startSourceSpan","Comment","visitComment","visitAll","nodes","RecursiveVisitor","findNode","class_1","span","spanOf","start","offset","end","assertArrayOfStrings","INTERPOLATION_BLACKLIST_REGEXPS","assertInterpolationSymbols","start_1","end_1","regexp","test","InterpolationConfig","fromArray","markers","DEFAULT_INTERPOLATION_CONFIG","StyleWithImports","style","isStyleUrlResolvable","url","schemeMatch","URL_WITH_SCHEMA_REGEXP","TagContentType","CSS_IMPORT_REGEXP","CSS_STRIPPABLE_COMMENT_REGEXP","splitNsName","elementName","colonIndex","isNgContainer","tagName","isNgContent","getNsPrefix","mergeNsAndName","prefix","localName","NAMED_ENTITIES","Aacute","aacute","Acirc","acirc","acute","AElig","aelig","Agrave","agrave","alefsym","Alpha","alpha","amp","and","ang","apos","Aring","aring","asymp","Atilde","atilde","Auml","auml","bdquo","Beta","beta","brvbar","bull","cap","Ccedil","ccedil","cedil","cent","Chi","chi","circ","clubs","cong","copy","crarr","cup","curren","dagger","Dagger","darr","dArr","deg","Delta","delta","diams","divide","Eacute","eacute","Ecirc","ecirc","Egrave","egrave","empty","emsp","ensp","Epsilon","epsilon","equiv","Eta","eta","ETH","eth","Euml","euml","euro","exist","fnof","forall","frac12","frac14","frac34","frasl","Gamma","gamma","ge","gt","harr","hArr","hearts","hellip","Iacute","iacute","Icirc","icirc","iexcl","Igrave","igrave","image","infin","int","Iota","iota","iquest","isin","Iuml","iuml","Kappa","kappa","Lambda","lambda","lang","laquo","larr","lArr","lceil","ldquo","le","lfloor","lowast","loz","lrm","lsaquo","lsquo","lt","macr","mdash","micro","middot","minus","Mu","mu","nabla","nbsp","ndash","ne","ni","not","notin","nsub","Ntilde","ntilde","Nu","nu","Oacute","oacute","Ocirc","ocirc","OElig","oelig","Ograve","ograve","oline","Omega","omega","Omicron","omicron","oplus","or","ordf","ordm","Oslash","oslash","Otilde","otilde","otimes","Ouml","ouml","para","permil","perp","Phi","phi","Pi","pi","piv","plusmn","pound","prime","Prime","prod","prop","Psi","psi","quot","radic","rang","raquo","rarr","rArr","rceil","rdquo","real","reg","rfloor","Rho","rho","rlm","rsaquo","rsquo","sbquo","Scaron","scaron","sdot","sect","shy","Sigma","sigma","sigmaf","sim","spades","sub","sube","sum","sup","sup1","sup2","sup3","supe","szlig","Tau","tau","there4","Theta","theta","thetasym","thinsp","THORN","thorn","tilde","times","trade","Uacute","uacute","uarr","uArr","Ucirc","ucirc","Ugrave","ugrave","uml","upsih","Upsilon","upsilon","Uuml","uuml","weierp","Xi","xi","Yacute","yacute","yen","yuml","Yuml","Zeta","zeta","zwj","zwnj","NGSP_UNICODE","PreparsedElementType","NG_CONTENT_SELECT_ATTR","LINK_ELEMENT","LINK_STYLE_REL_ATTR","LINK_STYLE_HREF_ATTR","LINK_STYLE_REL_VALUE","STYLE_ELEMENT","SCRIPT_ELEMENT","NG_NON_BINDABLE_ATTR","NG_PROJECT_AS","preparseElement","selectAttr","hrefAttr","relAttr","nonBindable","projectAs","attr","lcAttrName","toLowerCase","normalizeNgContentSelect","nodeName","OTHER","NG_CONTENT","STYLE","SCRIPT","STYLESHEET","PreparsedElement","DirectiveNormalizer","_resourceLoader","_urlResolver","_htmlParser","_config","_resourceLoaderCache","clearCache","clear","clearCacheFor","normalizedDirective","delete","stylesheet","_fetch","normalizeTemplate","prenormData","_preParseTemplate","preparsedTemplate","_normalizeTemplateMetadata","prenomData","resolve","_preparseLoadedTemplate","templateAbsUrl","interpolationConfig","rootNodesAndErrors","parse","templateSourceUrl","ngModuleType","compMeta","templateMeta","jitSourceUrl","errors","templateMetadataStyles","_normalizeStylesheet","TemplatePreparseVisitor","rootNodes","templateStyles","inlineStyleUrls","_loadMissingExternalStylesheets","_normalizeLoadedTemplateMetadata","stylesheets","_inlineStyles","styleUrl","None","targetStyles","loadedStylesheets","syncAsyncValues","filter","loadedStyle","some","Promise","all","_","allStyleUrls","allStyles","styleWithImports","extractStyleUrls","resolver","baseUrl","cssText","foundUrls","modifiedCssText","ngNonBindableStackCount","preparsedElement","textContent_1","child","QUERY_METADATA_IDENTIFIERS","DirectiveResolver","_reflector","isDirective","typeMetadata","annotations","isDirectiveMetadata","throwIfNotFound","metadata","findLast","propertyMetadata","propMetadata","_mergeWithPropertyMetadata","dm","directiveType","propName","a","output","hostBinding","startWith","hostListener","query","_merge","_extractPublicName","def","_dedupeBindings","bindings","names","publicNames","reversedResult","binding","name_1","reverse","mergedInputs","mergedOutputs","mergedHost","mergedQueries","moduleId","condition","TokenType","$EOF","$TAB","$LF","$VTAB","$FF","$CR","$SPACE","$DQ","$$","$SQ","$PLUS","$MINUS","$SLASH","$SEMICOLON","$EQ","$GT","$0","$9","$A","$F","$Z","$_","$a","$f","$n","$r","$t","$v","$z","$LBRACE","$NBSP","isWhitespace","code","isDigit","isAsciiLetter","Token","KEYWORDS","Lexer","tokenize","text","scanner","_Scanner","tokens","scanToken","newCharacterToken","Character","newOperatorToken","Operator","EOF","numValue","strValue","isCharacter","isNumber","Number","isString","isOperator","operater","isIdentifier","Identifier","isKeyword","Keyword","isKeywordLet","isKeywordAs","isKeywordNull","isKeywordUndefined","isKeywordTrue","isKeywordFalse","isKeywordThis","isError","toNumber","peek","advance","isIdentifierStart","scanIdentifier","scanNumber","scanCharacter","scanString","scanOperator","scanComplexOperator","one","twoCode","two","threeCode","three","isIdentifierPart","newKeywordToken","newIdentifierToken","simple","isExponentSign","newNumberToken","parseIntAutoRadix","parseInt","isNaN","parseFloat","quote","buffer","marker","unescapedCode","hex","unescape","last","newStringToken","message","newErrorToken","ParserError","errLocation","ctxLocation","ParseSpan","AST","Quote","uninterpretedExpression","location","visitQuote","EmptyExpr","ImplicitReceiver","visitImplicitReceiver","Chain","expressions","visitChain","Conditional","trueExp","falseExp","visitConditional","PropertyRead","receiver","visitPropertyRead","PropertyWrite","visitPropertyWrite","SafePropertyRead","visitSafePropertyRead","KeyedRead","visitKeyedRead","KeyedWrite","visitKeyedWrite","BindingPipe","exp","visitPipe","LiteralPrimitive","visitLiteralPrimitive","LiteralArray","visitLiteralArray","LiteralMap","visitLiteralMap","Interpolation","strings","visitInterpolation","Binary","operation","left","right","visitBinary","PrefixNot","visitPrefixNot","NonNullAssert","visitNonNullAssert","MethodCall","visitMethodCall","SafeMethodCall","visitSafeMethodCall","FunctionCall","visitFunctionCall","ASTWithSource","source","TemplateBinding","keyIsVar","NullAstVisitor","RecursiveAstVisitor","AstTransformer","AstMemoryEfficientTransformer","modified","original","visitAstChildren","SplitInterpolation","offsets","TemplateBindingParseResult","templateBindings","warnings","_createInterpolateRegExp","config","pattern","RegExp","ParseErrorLevel","Parser","_lexer","parseAction","_checkNoInterpolation","sourceToLex","_stripComments","_ParseAST","parseChain","parseBinding","_parseBindingAst","parseSimpleBinding","SimpleExpressionChecker","check","_reportError","_parseQuote","prefixSeparatorIndex","parseTemplateBindings","prefixToken","prefixTokens","unshift","parseInterpolation","splitInterpolation","expressionText","part","_findInterpolationErrorColumn","wrapLiteralPrimitive","_commentStart","outerQuote","char","nextChar","partInErrIdx","j","inputLength","rparensExpected","rbracketsExpected","rbracesExpected","inputIndex","optionalCharacter","peekKeywordLet","peekKeywordAs","expectCharacter","optionalOperator","op","expectOperator","operator","expectIdentifierOrKeyword","expectIdentifierOrKeywordOrString","exprs","expr","parsePipe","parseExpression","parseConditional","parseLogicalOr","yes","no","parseLogicalAnd","parseEquality","parseRelational","parseAdditive","parseMultiplicative","parsePrefix","parseCallChain","parsePrimary","parseAccessMemberOrMethodCall","parseCallArguments","elements","parseExpressionList","parseLiteralMap","literalValue","terminator","quoted","isSafe","positionals","expectTemplateBindingKey","operatorFound","rawKey","toUpperCase","name_2","letStart","letName","locationText","skip","ParseLocation","file","line","col","moveBy","content","len","ch","priorLine","substr","lastIndexOf","getContext","maxChars","maxLines","startOffset","endOffset","ctxChars","ctxLines","before","after","ParseSourceFile","ParseSourceSpan","details","TokenType$1","ParseError","level","ERROR","contextualMessage","ctx","Token$1","TokenError","errorMsg","tokenType","TokenizeResult","_CR_OR_CRLF_REGEXP","_unexpectedCharacterErrorMsg","charCode","_unknownEntityErrorMsg","entitySrc","_ControlFlowError","_Tokenizer","_file","_getTagDefinition","_tokenizeIcu","_interpolationConfig","_peek","_nextPeek","_index","_line","_column","_expansionCaseStack","_inInterpolation","_input","_length","_advance","_processCarriageReturns","_getLocation","_attemptCharCode","_consumeCdata","_consumeComment","_consumeDocType","_consumeTagClose","_consumeTagOpen","_tokenizeExpansionForm","_consumeText","_beginToken","_endToken","mergeTextTokens","srcTokens","dstTokens","lastDstToken","TEXT","isExpansionFormStart","_consumeExpansionFormStart","isExpansionCaseStart","_isInExpansionForm","_consumeExpansionCaseStart","_isInExpansionCase","_consumeExpansionCaseEnd","_consumeExpansionFormEnd","_getSpan","_currentTokenStart","_currentTokenType","_createError","_attemptCharCodeCaseInsensitive","compareCharCodeCaseInsensitive","code1","code2","toUpperCaseCharCode","_requireCharCode","_attemptStr","chars","initialPosition","_savePosition","_restorePosition","_attemptStrCaseInsensitive","_requireStr","_attemptCharCodeUntilFn","predicate","_requireCharCodeUntilFn","_attemptUntilChar","_readChar","decodeEntities","_decodeEntity","startPosition","isNamedEntityEnd","isHex","numberStart","isDigitEntityEnd","strNum","entity","_consumeRawText","firstCharOfEnd","attemptEndRest","tagCloseStart","textStart","ESCAPABLE_RAW_TEXT","RAW_TEXT","COMMENT_START","textToken","COMMENT_END","CDATA_START","CDATA_END","DOC_TYPE","_consumePrefixAndName","nameStart","nameOrPrefixStart","isNameEnd","lowercaseTagName","savedPos","_consumeTagOpenStart","isNotWhitespace","_consumeAttributeName","_consumeAttributeValue","_consumeTagOpenEnd","contentTokenType","contentType","_consumeRawTextWithTagClose","TAG_CLOSE","TAG_OPEN_START","ATTR_NAME","prefixAndName","ATTR_VALUE","quoteChar","valueStart","TAG_OPEN_END_VOID","TAG_OPEN_END","EXPANSION_FORM_START","_readUntil","EXPANSION_CASE_VALUE","EXPANSION_CASE_EXP_START","EXPANSION_CASE_EXP_END","EXPANSION_FORM_END","_isTextEnd","nbTokens","isAsciiHexDigit","isInterpolationStart","TreeError","ParseTreeResult","Parser$1","getTagDefinition","parseExpansionForms","tokensAndErrors","tokenizeExpansionForms","treeAndErrors","_TreeBuilder","build","_rootNodes","_errors","_elementStack","_consumeStartTag","_consumeEndTag","_closeVoidElement","_consumeExpansion","prev","_advanceIf","startToken","_addToParent","expCase","_parseExpansionCase","_collectExpansionExpTokens","parsedExp","expansionFormStack","lastOnStack","parent_1","_getParentElement","ignoreFirstLf","el","isVoid","startTagToken","_consumeAttr","_getElementFullName","selfClosing","tagDef","canSelfClose","_pushElement","_popElement","parentEl","isClosedByChild","_getParentElementSkippingContainers","parent","container","requireExtraParent","newParent","parentToAdd","_insertBeforeContainer","endTagToken","stackIndex","splice","closedByParent","attrName","valueToken","parentElement","implicitNamespacePrefix","stack","element","digest","sha1","utf8","words32","stringToWords32","endian","wordAt","Endian","Big","w","h0","h1","h2","h3","h4","rol32","fk","f","k","temp","add32","byteStringToHexString","byteAt","words32ToByteString","serializeNodes","serializerVisitor","meaning","decimalDigest","_SerializerIgnoreIcuExpVisitor","computeMsgId","fingerprint","hi","lo","him","lom","add64","ah","al","bh","add32to64","carry","l","rol64","count","byteStringToDecString","decimal","toThePower","addBigInt","numberTimesBigInt","_SerializerVisitor","visitContainer","visitIcu","icu","strCases","visitTagPlaceholder","ph","startName","closeName","visitPlaceholder","visitIcuPlaceholder","hash32","mix","Little","sub32","high","word","word32ToByteString","x","y","Math","max","tmpSum","num","product","bToThePower","Message","placeholders","placeholderToMessage","description","sources","startLine","startCol","endLine","endCol","Text$1","Container","Icu","TagPlaceholder","tag","Placeholder","IcuPlaceholder","CloneVisitor","expressionPlaceholder","RecurseVisitor","HtmlTagDefinition","closedByChildren","requiredParents","PARSABLE_DATA","currentParent","lcParent","TAG_DEFINITIONS","base","meta","area","embed","link","img","param","hr","br","track","wbr","thead","tbody","tfoot","tr","td","th","svg","math","li","dt","dd","rb","rt","rtc","rp","optgroup","option","pre","listing","script","title","textarea","_DEFAULT_TAG_DEFINITION","getHtmlTagDefinition","_VisitorMode","TAG_TO_PLACEHOLDER_NAMES","A","B","BR","EM","H1","H2","H3","H4","H5","H6","HR","I","LI","LINK","OL","P","Q","S","SMALL","SUB","SUP","TBODY","TD","TFOOT","TH","THEAD","TR","TT","U","UL","PlaceholderRegistry","_placeHolderNameCounts","_signatureToName","getStartTagPlaceholderName","signature","_hashTag","upperTag","baseName","_generateUniqueName","getCloseTagPlaceholderName","_hashClosingTag","getPlaceholderName","upperName","uniqueName","getUniquePlaceholder","sort","_expParser","_I18nVisitor","_expressionParser","toI18nMessage","_isIcu","_icuDepth","_placeholderRegistry","_placeholderToContent","_placeholderToMessage","i18nodes","startPhName","closePhName","attribute","_visitTextWithInterpolation","comment","i18nIcuCases","i18nIcu","caze","expPh","phName","icuCase","sDelimiter","eDelimiter","_CUSTOM_PH_EXP","lastStringIdx","I18nError","_I18N_COMMENT_PREFIX_REGEXP","MEANING_SEPARATOR","ID_SEPARATOR","i18nCommentsWarned","ExtractionResult","messages","_Visitor","_implicitTags","_implicitAttrs","extract","_init","Extract","_inI18nBlock","_messages","merge","translations","Merge","_translations","translatedNode","_mode","_mayBeAddBlockChildren","wasInIcu","_inIcu","_isInTranslatableSection","_addMessage","isOpening","_isOpeningComment","startsWith","isClosing","_isClosingComment","_inI18nNode","_depth","_blockStartDepth","_closeTranslatableSection","_blockChildren","_blockMeaningAndDesc","_translateMessage","console","warn","_openTranslatableSection","wasInI18nNode","wasInImplicitNode","_inImplicitNode","childNodes","translatedChildNodes","i18nAttr","_getI18nAttr","find","i18nMeta","isImplicit","isTopLevelImplicit","isTranslatable","visited","_visitAttributesOf","translatedAttrs","_translateAttributes","mode","_msgCountAtSectionStart","_createI18nMessage","createI18nMessageFactory","explicitAttrNameToValue","implicitAttrNames","msgMeta","_parseMessageMeta","attributes","i18nParsedMessageMeta","translatedAttributes","directChildren","startIndex","i18n","idIndex","descIndex","meaningAndDesc","_TAG_DEFINITION","XmlTagDefinition","getXmlTagDefinition","XmlParser","Serializer","createNameMapper","SimplePlaceholderMapper","mapName","internalToPublic","publicToNextId","publicToInternal","toPublicName","internalName","toInternalName","publicName","visitPlaceholderName","nextId","_visitor","visitTag","strAttrs","_serializeAttributes","strChildren","visitDeclaration","decl","visitDoctype","doctype","rootTag","dtd","serialize","Declaration","unescapedAttrs","escapeXml","Doctype","Tag","Text$2","unescapedValue","CR","ws","_ESCAPED_CHARS","entry","Xliff","write","locale","_WriteVisitor","transUnits","contextTags","contextGroupTag","purpose","context-type","transUnit","datatype","priority","from","body","source-language","xliff","version","xmlns","encoding","load","XliffParser","msgIdToHtml","i18nNodesByMsgId","converter","XmlToI18n","msgId","convert","i18nNodes","ctype","getCtypeForTag","equiv-text","startTagPh","closeTagPh","equivText","_locale","_unitMlString","_msgIdToHtml","xml","idAttr","_addError","innerText","localeAttr","expansion","expansionCase","xmlIcu","nameAttr","caseMap","Xliff2","_WriteVisitor$1","units","notes","category","segment","srcLang","Xliff2Parser","XmlToI18n$1","getTypeForTag","_nextPlaceholderId","disp","tagPc","equivStart","equivEnd","dispStart","dispEnd","idStr","versionAttr","version$$1","startAttr","endAttr","endId","Xmb","exampleVisitor","ExampleVisitor","_Visitor$2","rootNode","sourceTags","addDefaultExamples","digest$1","startEx","closeEx","exTag","exText","TypeModifier","Xtb","XtbParser","XmlToI18n$2","createLazyProperty","valueFn","xtb","_bundleDepth","langAttr","HtmlParser","TranslationBundle","_i18nNodesByMsgId","mapperFactory","missingTranslationStrategy","Warning","_i18nToHtml","I18nToHtmlVisitor","serializer","srcMsg","html","_digest","_mapperFactory","_missingTranslationStrategy","_console","_contextStack","_convertToText","_srcMsg","_mapper","mapper","I18NHtmlParser","translationsFormat","createSerializer","format","_translationBundle","parseResult","mergeTranslations","implicitTags","implicitAttrs","CORE","Identifiers","ANALYZE_FOR_ENTRY_COMPONENTS","moduleName","ElementRef","NgModuleRef","ViewContainerRef","ChangeDetectorRef","QueryList","TemplateRef","CodegenComponentFactoryResolver","ComponentFactoryResolver","ComponentFactory","ComponentRef","NgModuleFactory","createModuleFactory","moduleDef","moduleProviderDef","RegisterModuleFactoryFn","inject","INJECTOR","Injector","defineInjectable","LOCALE_ID","TRANSLATIONS_FORMAT","inlineInterpolate","interpolate","EMPTY_ARRAY","EMPTY_MAP","Renderer","viewDef","elementDef","anchorDef","textDef","directiveDef","providerDef","queryDef","pureArrayDef","pureObjectDef","purePipeDef","pipeDef","nodeValue","ngContentDef","unwrapValue","createRendererType2","RendererType2","ViewDefinition","createComponentFactory","createTokenForReference","createTokenForExternalReference","reflector","resolveExternalReference","BuiltinTypeName","Type$1","modifiers","hasModifier","modifier","BinaryOperator","BuiltinType","visitType","visitBuiltinType","MapType","ExpressionType","visitExpressionType","ArrayType","of","visitArrayType","valueType","visitMapType","INFERRED_TYPE","Dynamic","Inferred","BOOL_TYPE","Bool","nullSafeIsEquivalent","other","isEquivalent","areAllEquivalent","Int","BuiltinVar","Expression","ReadPropExpr","ReadKeyExpr","callMethod","params","InvokeMethodExpr","callFn","InvokeFunctionExpr","instantiate","InstantiateExpr","conditional","trueCase","falseCase","ConditionalExpr","equals","rhs","BinaryOperatorExpr","Equals","notEquals","NotEquals","identical","Identical","notIdentical","NotIdentical","Minus","plus","Plus","Divide","multiply","Multiply","modulo","Modulo","And","bitwiseAnd","parens","BitwiseAnd","Or","lower","Lower","lowerEquals","LowerEquals","bigger","Bigger","biggerEquals","BiggerEquals","isBlank","TYPED_NULL_EXPR","cast","CastExpr","toStmt","ExpressionStatement","BuiltinMethod","ReadVarExpr","builtin","isConstant","visitExpression","visitReadVarExpr","WriteVarExpr","visitWriteVarExpr","toDeclStmt","DeclareVarStmt","WriteKeyExpr","visitWriteKeyExpr","WritePropExpr","visitWritePropExpr","StmtModifier","method","visitInvokeMethodExpr","fn","visitInvokeFunctionExpr","classExpr","visitInstantiateExpr","LiteralExpr","visitLiteralExpr","ExternalExpr","typeParams","runtime","visitExternalExpr","visitConditionalExpr","NotExpr","visitNotExpr","AssertNotNull","visitAssertNotNullExpr","visitCastExpr","FunctionExpr","statements","visitFunctionExpr","DeclareFunctionStmt","lhs","visitBinaryOperatorExpr","visitReadPropExpr","visitReadKeyExpr","LiteralArrayExpr","entries","every","visitLiteralArrayExpr","LiteralMapEntry","LiteralMapExpr","visitLiteralMapExpr","CommaExpr","visitCommaExpr","This","Super","CatchError","CatchStack","Statement","stmt","visitStatement","visitDeclareVarStmt","visitDeclareFunctionStmt","visitExpressionStmt","ReturnStatement","visitReturnStmt","AbstractClassPart","ClassMethod","ClassField","initializer","ClassGetter","ClassStmt","fields","getters","constructorMethod","methods","visitDeclareClassStmt","IfStmt","visitIfStmt","TryCatchStmt","CommentStmt","multiline","visitCommentStmt","JSDocCommentStmt","tags","visitJSDocCommentStmt","serializeTags","e_1","out","tags_1","tags_1_1","tagToString","e_1_1","return","bodyStmts","catchStmts","visitTryCatchStmt","ThrowStmt","visitThrowStmt","AstTransformer$1","transformExpr","transformStmt","visitAllExpressions","visitAllStatements","mapType","getter","ctorMethod","stmts","RecursiveAstVisitor$1","variable","importExpr","literalArr","_ReadVarVisitor","varNames","_FindExternalReferencesVisitor","externalReferences","_ApplySourceSpanTransformer","_clone","clone","STRIP_SRC_FILE_SUFFIXES","GENERATED_FILE","JIT_SUMMARY_FILE","JIT_SUMMARY_NAME","ngfactoryFilePath","forceSourceFile","urlWithSuffix","splitTypescriptSuffix","normalizeGenFileSuffix","srcFileSuffix","stripGeneratedFileSuffix","endsWith","lastDot","LifecycleHooks","LOWERED_SYMBOL","LIFECYCLE_HOOKS_VALUES","OnInit","OnDestroy","DoCheck","OnChanges","AfterContentInit","AfterContentChecked","AfterViewInit","AfterViewChecked","_SELECTOR_REGEXP","CssSelector","classNames","notSelectors","_addResult","cssSel","cssSelector","current","inNot","lastIndex","exec","setElement","addClassName","addAttribute","isElementSelector","hasElementSelector","getMatchingElementTemplate","classAttr","getAttrs","klass","notSelector","SelectorMatcher","_elementMap","_elementPartialMap","_classMap","_classPartialMap","_attrValueMap","_attrValuePartialMap","_listContexts","createNotMatcher","notMatcher","addSelectables","cssSelectors","callbackCtxt","listContext","SelectorListContext","_addSelectable","matcher","selectable","SelectorContext","_addTerminal","_addPartial","className","terminalMap","terminalValuesMap","partialMap","partialValuesMap","terminalList","matchedCallback","alreadyMatched","_matchTerminal","_matchPartial","name_3","selectables","starSelectables","finalize","nestedSelector","selectors","cbContext","callback","CompileMetadataResolver","_ngModuleResolver","_directiveResolver","_pipeResolver","_summaryResolver","_schemaRegistry","_directiveNormalizer","_staticSymbolCache","_errorCollector","_nonNormalizedDirectiveCache","_directiveCache","_summaryCache","_pipeCache","_ngModuleCache","_ngModuleOfTypes","_shallowModuleCache","getReflector","dirMeta","_createProxyClass","baseType","delegate","proxyClass","setDelegate","getGeneratedClass","dirType","getComponentViewClass","viewClassName","compType","embeddedTemplateIndex","getHostComponentViewClass","hostViewClassName","getHostComponentType","HostClass","getRendererType","rendererTypeName","getComponentFactory","componentFactoryName","hostView","initComponentFactory","_loadSummary","kind","typeSummary","summary","resolveSummary","getHostComponentMetadata","hostViewType","hostType","diDeps","loadDirectiveMetadata","isSync","getNonNormalizedDirectiveMetadata","createDirectiveMetadata","templateMetadata","normalizedDirMeta","componentModuleUrl","annotation","componentStillLoadingError","error$$1","cacheEntry","nonNormalizedTemplateMetadata","changeDetectionStrategy","entryComponentMetadata","_getProvidersMetadata","stringifyType","flattenAndDedupeArray","_getEntryComponentMetadata","getDefaultComponentElementName","_getQueriesMetadata","_getTypeMetadata","getDirectiveMetadata","getDirectiveSummary","dirSummary","isPipe","isNgModule","getNgModuleSummary","moduleType","alreadyCollecting","moduleSummary","moduleMeta","getNgModuleMetadata","loadNgModuleDirectiveAndPipeMetadata","loading","promise","_loadPipeMetadata","getShallowModuleMetadata","compileMeta","ngModuleMeta","shallowAnnotations","rawExports","rawImports","imports","rawProviders","exportedNonModuleIdentifiers","importedType","importedModuleType","isValidType","_checkSelfImport","_getTypeDescriptor","importedModuleSummary","exportedType","exportedModuleSummary","_getIdentifierMetadata","_getTransitiveNgModuleMetadata","declarations","declaredType","declaredIdentifier","_addTypeToModule","exportedId","bootstrap","provide","oldModule","modulesByToken","modSummary","mod","comp","addedTokens","tokenRef","prevModules","moduleRef","isInjectable","tryAnnotations","ann","getInjectableSummary","Injectable","getInjectableMetadata","throwOnUnknownDeps","symbol","providedIn","_getDependenciesMetadata","getAllLifecycleHooks","hook","hasLifecycleHook","getHookName","_getFactoryMetadata","getPipeMetadata","pipeType","pipeMeta","getPipeSummary","pipeSummary","getOrLoadPipeMetadata","pipeAnnotation","typeOrFunc","hasUnknownDeps","dependenciesMetadata","parameters","isAttribute","isSelf","isSkipSelf","isOptional","paramEntry","_getTokenMetadata","depsTokens","dep","targetEntryComponents","debugInfo","compileProviders","providerIdx","providerMeta","_validateProvider","providersInfo","soFar","seenProvider","seenProviderIdx","_getEntryComponentsFromProvider","getProviderMetadata","components","collectedIdentifiers","extractIdentifiers","targetIdentifiers","_CompileValueConverter","_getInjectableTypeMetadata","compileDeps","compileTypeMetadata","compileFactoryMetadata","propertyName","_getQueryMetadata","_queryVarBindings","q","varName","read","otherType","tree","dedupeArray","array","flattenArray","ProviderError","ProviderViewContext","component","_getViewQueries","viewQueryId","_addQueryToTokenMap","queryId","ProviderElementContext","viewContext","_parent","_isViewRoot","_directiveAsts","refs","isTemplate","_sourceSpan","_transformedProviders","_seenProviders","_queriedTokens","transformedHasViewContainer","_attrs","attrAst","directivesMeta","directiveAst","_allProviders","_resolveProvidersFromDirectives","targetErrors","providersByToken","_resolveProviders","Component","PublicService","PrivateService","_contentQueries","_getContentQueries","contentQueryId","contentQueries","directiveIndex","_addQueryReadsTo","templateRefId","refAst","defaultQueryValue","_getOrCreateLocalProvider","afterElement","lazyProviders","eagerProviders","sortedProviderTypes","transformProviders","sortedDirectives","dir1","dir2","allMatches","defaultValue","queryReadTokens","_getQueriesFor","queryValue","currentEl","distance","requestingProviderType","resolvedProvider","Builtin","transformedProviderAst","transformedProviders","transformedUseValue","transformedUseExisting","transformedDeps","existingDiDep","_getDependency","_transformProvider","_transformProviderAst","_getLocalDependency","attrValue","isValue","currElement","currEager","prevElement","targetProvidersByToken","NgModuleResolver","SourceMapGenerator","sourcesContent","lines","lastCol0","hasMappings","addSource","addLine","addMapping","col0","sourceUrl","sourceLine0","sourceCol0","currentLine","toJSON","sourcesIndex","mappings","lastSourceIndex","lastSourceLine0","lastSourceCol0","segments","segAsStr","toBase64VLQ","sourceRoot","toJsComment","toBase64String","b64","i1","i2","i3","toBase64Digit","digit","B64_DIGITS","_SINGLE_QUOTE_ESCAPE_STRING_RE","_LEGAL_IDENTIFIER_RE","_INDENT_WITH","CATCH_ERROR_VAR$1","CATCH_STACK_VAR$1","_EmittedLine","indent","partsLength","srcSpans","AbstractEmitterVisitor","EmitterVisitorContext","_indent","_classes","_preambleLineCount","_lines","createRoot","println","lastPart","print","lineIsEmpty","_currentLine","lineLength","newLine","removeEmptyLastLine","incIndent","decIndent","pushClass","clazz","popClass","toSource","sourceLines","_createIndent","toSourceMapGenerator","genFilePath","startsAtLine","firstOffsetMapped","mapFirstOffsetIfNeeded","lineIdx","spans","spanIdx","sourceLine","sourceCol","setPreambleLineCount","column","emittedLine","columnsLeft","partIndex","_escapeDollarInStrings","hasElseCase","lineWasEmpty","getBuiltinMethodName","escapeIdentifier","opStr","visitAllObjects","separator","incrementedIndent","escapeDollar","alwaysQuote","_TsEmitterVisitor","referenceFilter","importFilter","typeExpression","importsWithPrefixes","reexports","defaultType","_visitIdentifier","Exported","as","Final","_printColonType","field","_visitClassField","_visitClassConstructor","_visitClassGetter","_visitClassMethod","Private","Static","_visitParams","typeStr","ConcatArray","SubscribeObservable","Bind","size","PipeResolver","metas","SECURITY_SCHEMA","registerContext","specs","specs_1","specs_1_1","HTML","URL","RESOURCE_URL","BOOLEAN","NUMBER","STRING","OBJECT","SCHEMA","_ATTR_TO_PROP","class","for","formaction","innerHtml","readonly","tabindex","DomElementSchemaRegistry","_schema","encodedType","strType","properties","superName","superType","property","hasProperty","schemaMetas","schema","hasElement","getMappedPropName","NONE","validateProperty","validateAttribute","allKnownElementNames","normalizeAnimationStyleProperty","dashCaseToCamelCase","normalizeAnimationStyleValue","camelCaseProp","userProvidedProp","strVal","_isPixelDimensionStyle","valAndSuffixMatch","ElementSchemaRegistry","SKIP_WS_TRIM_TAGS","WS_CHARS","NO_WS_REGEXP","WS_REPLACE_REGEXP","replaceNgsp","WhitespaceVisitor","hasPreserveWhitespacesAttr","PLURAL_CASES","expandNodes","expander","_Expander","ExpansionResult","isExpanded","BoundPropertyType","expanded","ExpansionError","_expandPluralForm","expansionResult","switchAttr","_expandDefaultForm","BoundProperty","isLiteral","LITERAL_ATTR","ANIMATION","BindingParser","_exprParser","_targetErrors","pipesByName","_usedPipes","pipe","getUsedPipes","createBoundHostProperties","boundProps_1","parsePropertyBinding","createDirectiveHostPropertyAsts","elementSelector","boundProps","createElementPropertyAst","createDirectiveHostEventAsts","targetEventAsts_1","parseEvent","sourceInfo","_reportExpressionParserErrors","_checkPipes","parseInlineTemplateBinding","targetMatchableAttrs","targetProps","targetVars","_parseTemplateBindings","_parsePropertyAst","parseLiteralAttr","bindingsResult","warning","WARNING","_isAnimationLabel","_parseAnimation","isAnimationProp","_parseBinding","parsePropertyInterpolation","DEFAULT","isHostBinding","boundProp","bindingType","boundPropertyName","securityContexts","_validatePropertyOrAttributeName","calcPossibleSecurityContexts","nsSeparatorIdx","Class","Style","Property","targetEvents","_parseAnimationEvent","_parseEvent","splitAtPeriod","_parseAction","errors_1","errors_1_1","collector","PipeCollector","pipeName","isAttr","report","registry","ctxs","elementNames","notElementNames","possibleElementNames","BIND_NAME_REGEXP","CLASS_ATTR","TEXT_CSS_SELECTOR","TemplateParseError","TemplateParseResult","templateAst","usedPipes","TemplateParser","transforms","tryParse","htmlParseResult","getInterpolationConfig","removeWhitespaces","htmlAstWithErrors","tryParseHtml","expandHtml","uniqDirectives","removeSummaryDuplicates","uniqPipes","providerViewContext","bindingParser","parseVisitor","TemplateParseVisitor","EMPTY_ELEMENT_CONTEXT","_assertNoReferenceDuplicationOnTemplate","transform","forced","expandedHtmlAst","existingReferences","_bindingParser","_schemas","selectorMatcher","directivesIndex","ngContentCount","findNgContentIndex","valueNoNgsp","queryStartIndex","matchableAttrs","elementOrDirectiveProps","elementOrDirectiveRefs","elementVars","events","templateElementOrDirectiveProps","templateMatchableAttrs","templateElementVars","hasInlineTemplates","isTemplateElement","isNgTemplate","templateBindingsSource","hasBinding","_parseAttr","normalizedName","_normalizeAttributeName","hasTemplateBinding","elementCssSelector","createElementCssSelector","_parseDirectives","directiveMetas","matchElement","boundDirectivePropNames","directiveAsts","_createDirectiveAsts","elementProps","_createElementPropertyAsts","providerContext","NON_BINDABLE_VISITOR","ElementContext","parsedElement","projectionSelector","_isEmptyTextNode","_assertAllEventsPublishedByDirectives","_assertNoComponentsNorElementBindingsOnTemplate","transformedDirectiveAsts","_assertElementExists","_assertOnlyOneComponent","ngContentIndex_1","templateQueryStartIndex","templateSelector","templateDirectiveMetas","templateBoundDirectivePropNames","templateDirectiveAsts","templateElementProps","templateProviderContext","targetRefs","srcSpan","bindParts","_parseVariable","_parseReference","_parseAssignmentEvent","ElementOrDirectiveRef","elementSourceSpan","targetReferences","targetBoundDirectivePropNames","matchedReferences","directiveProperties","_checkPropertiesInSchema","_createDirectivePropertyAsts","elOrDirRef","isReferenceToDirective","refToken","targetBoundDirectiveProps","boundPropsByName_1","prevValue","dirProp","isEmptyExpression","boundElementProps","_findComponentDirectives","_findComponentDirectiveNames","componentTypeNames","elName","allDirectiveEvents","event","NonBindableVisitor","attrNameAndValues","splitExportAs","_ngContentIndexMatcher","_wildcardNgContentIndex","wildcardNgContentIndex","ngContentIndices","elNameNoNs","attrNameNoNs","BindingForm","_Mode","items","_BuiltinAstConverter","_converterFactory","BuiltinFunctionCall","createPipeConverter","createLiteralArrayConverter","createLiteralMapConverter","KEY_CONTEXT","CORE$1","FixupExpression","resolved","fixup","shared","MapPlaceholderNames","Identifiers$1","NEW_METHOD","TRANSFORM_METHOD","PATCH_DEPS","createElement","elementEnd","elementProperty","elementAttribute","elementClassNamed","elementStyleNamed","containerCreate","containerEnd","directiveCreate","directiveInput","textCreateBound","bind","interpolation1","interpolation2","interpolation3","interpolation4","interpolation5","interpolation6","interpolation7","interpolation8","interpolationV","pureFunction0","pureFunction1","pureFunction2","pureFunction3","pureFunction4","pureFunction5","pureFunction6","pureFunction7","pureFunction8","pureFunctionV","pipeBind1","pipeBind2","pipeBind3","pipeBind4","pipeBindV","projection","projectionDef","refreshComponent","directiveLifeCycle","injectElementRef","injectTemplateRef","injectViewContainerRef","defineComponent","defineDirective","defineInjector","definePipe","queryRefresh","NgOnChangesFeature","listener","pureFunctionIdentifiers","getLiteralFactory","outputContext","literal$$1","constantPool","literalFactory","literalFactoryArguments","noop","parserSelectorToR3Selector","positive","parserSelectorToSimpleSelector","classes","negative","parserSelectorToNegativeSelector","BindingScope","declareLocalVarCallback","referenceNameIndex","declared","getLocal","nestedScope","declareCallback","freshReferenceName","ROOT_SCOPE","ValueConverter","outputCtx","allocateSlot","pipeSlots","slot","slotPseudoLocal","bindingId","pipeBinding","getConstLiteral","literalMap","ContentProjectionVisitor","projectionMap","selectorText","parseSelectorsToR3Selector","TS","ResolvedStaticSymbol","StaticSymbolResolver","staticSymbolCache","summaryResolver","errorRecorder","metadataCache","resolvedSymbols","resolvedFilePaths","importAs","symbolResourcePaths","symbolFromFile","knownFileNameToModuleNames","resolveSymbol","staticSymbol","_resolveSymbolMembers","_resolveSymbolFromSummary","_createSymbolsOf","getImportAs","useSummaries","baseSymbol","getStaticSymbol","baseImportAs","summarizedFileName","stripSummaryForJitFileSuffix","summarizedName","stripSummaryForJitNameSuffix","symbolName","summaryForJitFileName","fileName","summaryForJitName","getResourcePath","getTypeArity","isGeneratedFile","resolvedSymbol","unwrapResolvedMetadata","arity","getKnownModuleName","recordImportAs","sourceSymbol","targetSymbol","recordModuleNameForFileName","invalidateFile","symbols","symbols_1","symbols_1_1","ignoreErrorsFor","recorder","baseResolvedSymbol","baseMetadata","__symbolic","statics","hasDecorators","getModuleMetadata","metadataKey","decorators","getSymbolsOf","summarySymbols","metadataSymbols","e_2","_loop_1","moduleExport","export","exportSymbol","symName","unescapeIdentifier","resolvedModule","resolveModule","createExport","this_1","e_2_1","topLevelSymbolNames_1","origins_1","symbolMeta","origin","originFilePath","reportError","createResolvedSymbol","topLevelPath","topLevelSymbolNames","_originalFileMemo","isTsFile","isLibraryFile","getOriginalName","getOutputName","self","transformedMeta","ReferenceTransformer","functionParams","symbolic","oldLen","unwrappedTransformedMeta","moduleMetadata","moduleMetadatas","getMetadataFor","maxVersion_1","md","getSymbolByModule","containingFile","moduleNameToFileName","ToJsonSerializer","symbolResolver","srcFileName","indexBySymbol","reexportedBy","processedSummaryBySymbol","processedSummaries","unprocessedSymbolSummariesBySymbol","addSummary","unprocessedSummary","processedSummary","processValue","metadata_1","clone_1","isCall","isFunctionCall","isMethodCallOnVariable","declarationSymbol","isLoweredSymbol","ngModuleSummary","summary_1","json","summaries","reexportSymbol","__symbol","toSummaryFileName","flags","visitStaticSymbol","loadSummary","StubEmitFlags","FromJsonDeserializer","symbolCache","deserialize","libraryFileName","allImportAs","serializedSymbol","fromSummaryFileName","FORMATTED_MESSAGE","ANGULAR_CORE","HIDDEN_KEY","IGNORE","REFERENCE_SET","shouldIgnore","StaticReflector","knownMetadataClasses","knownMetadataFunctions","annotationCache","shallowAnnotationCache","propertyCache","parameterCache","methodCache","staticCache","conversionMap","resolvedExternalReferences","annotationForParentClassWithSummaryKind","initializeConversionMap","kc","_registerDecoratorOrConstructor","kf","_registerFunction","findSymbolDeclaration","declarationSymbol_1","refSymbol","findDeclaration","tryFindDeclaration","resolvedMetadata","originalRecorder","_annotations","simplify","classMetadata","getTypeMetadata","parentType","findParentType","parentAnnotations","ownAnnotations_1","requiredAnnotationTypes","requiredType","formatMetadataError","metadataError","parentPropMetadata_1","parentProp","members_1","parameters_1","ctorData","rawParameterTypes","parameterDecorators_1","rawParamType","nestedResult","paramType","trySimplify","_methodNames","methodNames","parentMethodNames_1","members_2","isMethod","_staticMembers","staticMembers","lcProperty","staticMembers_1","staticMembers_1_1","injectionToken","opaqueToken","ROUTES","lazy","scope","BindingScope$1","calling","simplifyInContext","depth","resolveReferenceValue","simplifyEagerly","simplifyNested","nestedContext","isMetadataError","summaryMsg","chain","errorSummary","REFERENCE_TO_NONEXPORTED_CLASS","VARIABLE_NOT_INITIALIZED","DESTRUCTURE_NOT_SUPPORTED","COULD_NOT_RESOLVE_TYPE","FUNCTION_CALL_NOT_SUPPORTED","REFERENCE_TO_LOCAL_SYMBOL","advise","isPrimitive","result_2","spreadArray","spreadArray_1","spreadArray_1_1","value_2","e_3_1","e_3","declarationValue","operand","indexTarget","member","selectContext","selectTarget","localValue","missing","argExpressions","arg","simplifyCall","functionSymbol","targetFunction","targetExpression","value_1","defaults","functionScope","result_1","oldScope","mapStringMap","simplifyLazily","reportingContext","METADATA_ERROR","LAMBDA_NOT_SUPPORTED","PopulatedScope","formattedError","formatChain","indentStr","half","floor","formatMetadataMessageChain","expandedMessage","typeName","messageAdvise","AotSummaryResolver","summaryCache","loadedFilePaths","isSourceFile","referringSrcFileName","referringLibFileName","rootSymbol","_loadSummaryFile","importedFilePath","hasSummary","summaryFilePath","summaryFileName","deserializeSummaries","JitSummaryResolver","_summaries","createOfflineCompileUrlResolver","UrlResolver","JitEmitterVisitor","_evalArgNames","_evalArgValues","_evalExportedVars","createReturnStmt","resultVar","getArgs","AbstractJsEmitterVisitor","fnExpr","currentClass","_ComponentIndex","UrlResolverImpl","_packagePrefix","resolvedUrl","_resolveUrl","_split","encodeURI","baseParts","Scheme","_joinAndCanonicalizePath","Port","Path","resolvedParts","_splitRe","uri","_removeDotSegments","leadingSlash","trailingSlash","up","pos","_buildFromEncodedParts","opt_scheme","opt_userInfo","opt_domain","opt_port","opt_path","opt_queryData","opt_fragment","UserInfo","Domain","QueryData","Fragment","BuiltinType$1","DiagnosticKind","ResourceLoader","TypeDiagnostic","AstType","getType","getDiagnostics","diagnostics","callable","reportWarning","normalize$$1","Undefined","Null","Other","nullable","getNonNullableType","leftType","rightType","leftRawKind","getTypeKind","rightRawKind","leftKind","operKind","Any","getBuiltinType","errorAst","Boolean","anyType","getTypeUnion","selectSignature","language","public","definition","signatures","types","indexed","argument","undefinedType","targetType","keyType","getArrayType","resolveMethodCall","getPipes","expType","expressionType","resolvePropertyRead","_anyType","_undefinedType","receiverType","isAny","receiverInfo","getDefinitionOf","info","templateOffset","refinedVariableType","templateElement","ngForDirective","ngForOfBinding","getElementType","getExpressionScope","includeEvent","getReferences","processReferences","getTypeSymbol","references_1","references_1_1","getVarDeclarations","tail","_loop_2","getTemplateContext","Unbound","getEventDeclaration","referenceTable","createSymbolTable","variableTable","eventsTable","mergeSymbolTable","ExpressionDiagnosticsVisitor","diagnoseExpression","attributeValueLocation","directiveSummary","spanOf$1","previousDirectiveSummary","hasTemplateReference","diDep","getExpressionDiagnostics","analyzer","offsetSpan","amount","toNumbers","compareNumbers","min","longestArray","comparisonResult","isPrivate","ModifierFlags","getCombinedModifierFlags","NodeFlags","isReferenceType","ObjectFlags","TypeFlags","objectFlags","Reference","TypeScriptSymbolQuery","program","checker","fetchPipes","typeCache","typeKindOf","StringLike","StringLiteral","NumberLike","Union","candidate","unionType","e_7_1","e_7","TypeParameter","getTsTypeOf","getBuiltinTypeFromTs","TypeWrapper","elementType","getTypeParameterOf","tsType","nonNullableType","pipesCache","typeSymbol","findClassSymbolInContext","contextType","getTemplateRefContextType","SymbolWrapper","MapSymbolTable","addAll","DeclaredSymbol","symbolTables","symbolTables_1","symbolTables_1_1","getSpanAt","spanAt","sourceFile","position_1","getPositionOfLineAndCharacter","forEachChild","findChild","SyntaxKind","LastToken","getStart","getEnd","getTypeOfSymbolAtLocation","getFromSymbolTable","constructorDeclaration","type_1","getTypeAtLocation","typeArguments","getTypeWrapper","typeCallable","getCallSignatures","signaturesOf","SignatureWrapper","getSymbol","definitionFromTsSymbol","SymbolTableWrapper","getProperties","SymbolFlags","Alias","getAliasedSymbol","getContainerOf","getFlags","ClassMember","parentDeclarationOf","e_6_1","e_6","isSymbolPrivate","valueDeclaration","_members","Interface","getDeclaredTypeOfSymbol","typeWrapper","_tsType","declaration","getParameters","getReturnType","SignatureResultOverride","resultType","toSymbolTableFactory","tsVersion","isVersionBetween","tsNumbers","e_4","symbols_2","symbols_2_1","e_4_1","toSymbolTable","symbolTable","toSymbols","table","own","_values","previous","symbols_3","symbols_3_1","e_5_1","e_5","PipesTable","PipeSymbol","INDEX_PATTERN","EmptyTable","instance","parameterType","classSymbol","findClassSymbol","findTransformMethodType","classType","getProperty","getSourceFile","indexVersion","dirname","getExportsOfModule","setParents","AsExpression","TrueKeyword","AnyKeyword","NullKeyword","numeric","NumericLiteral","NoSubstitutionTemplateLiteral","VoidExpression","ClassDeclaration","InterfaceDeclaration","SourceFile","METADATA_VERSION","isFunctionMetadata","isMetadataGlobalReferenceExpression","isMetadataSymbolicReferenceExpression","isMetadataModuleReferenceExpression","default","isMetadataError$1","spreadElementSyntaxKind","SpreadElement","SpreadElementExpression","isMethodCallOf","callExpression","memberName","PropertyAccessExpression","isCallOf","ident","recordMapEntry","nodeMap","isMetadataImportedSymbolReferenceExpression","isMetadataImportDefaultReference","everyNodeChild","isPrimitive$1","isDefined$1","getSourceFileOfNode","getLineAndCharacterOfPosition","errorSymbol","Evaluator","options","recordExport","nameOf","evaluateNode","received","getText","isFoldable","isFoldableWorker","folding","ObjectLiteralExpression","PropertyAssignment","ArrayLiteralExpression","CallExpression","arrayOrEmpty","arrayNode","arrayValue","FalseKeyword","TemplateHead","TemplateMiddle","TemplateTail","ParenthesizedExpression","BinaryExpression","binaryExpression","operatorToken","PlusToken","MinusToken","AsteriskToken","SlashToken","PercentToken","AmpersandAmpersandToken","BarBarToken","ElementAccessExpression","elementAccessExpression","argumentExpression","TemplateExpression","templateSpans","preferReference","recordEntry","substituteExpression","newEntry","isFoldableError","verboseInvalidExpression","resolveName","obj_1","quoted_1","ShorthandPropertyAssignment","assignment","propertyValue","isPropertyAssignment","quotedNames","arr_1","isMetadataSymbolicSpreadExpression","firstArgument","ArrowFunction","NewExpression","newExpression","newArgs","newTarget","propertyAccessExpression","expression_1","expression_2","TypeReference","typeReferenceNode","typeNameNode_1","typeReference","QualifiedName","qualifiedName","left_1","identifier_1","getReference","args_1","UnionType","UndefinedKeyword","StringKeyword","NumberKeyword","BooleanKeyword","TypeAssertionExpression","PrefixUnaryExpression","prefixUnaryExpression","TildeToken","ExclamationToken","operatorText","AmpersandToken","BarToken","CaretToken","EqualsEqualsToken","ExclamationEqualsToken","EqualsEqualsEqualsToken","ExclamationEqualsEqualsToken","LessThanToken","GreaterThanToken","LessThanEqualsToken","GreaterThanEqualsToken","LessThanLessThanToken","GreaterThanGreaterThanToken","GreaterThanGreaterThanGreaterThanToken","ConditionalExpression","conditionalExpression","thenExpression","whenTrue","elseExpression","whenFalse","FunctionExpression","TaggedTemplateExpression","templateExpression","literal","head","ClassExpression","createNodeArray","v","EmitFlags","Symbols","defineReference","_symbols","populateBuiltins","buildImports","stripQuotes","ImportEqualsDeclaration","importEqualsDeclaration","moduleReference","ExternalModuleReference","externalReference","from_1","ImportDeclaration","importDecl","importClause","moduleSpecifier","namedBindings","NamedImports","NamespaceImport","isStatic","MetadataCollector","getMetadata","strict","locals","composedSubstituter","evaluatorOptions","evaluator","errorSym","maybeGetSimpleFunction","functionDeclaration","functionName","functionBody","statement","returnStatement","func","namesOf","addNamesOf","bindingPattern","parameters_2","parameters_2_1","exportMap","ExportDeclaration","exportClause","spec","isExport","isDeclarationFile","Export","isExportedIdentifier","isExported","exportedIdentifierName","exportedName","classDeclaration","FunctionDeclaration","nameNode","classMetadataOf","getDecorators","decorator","objFromDecorator","decoratorNode","referenceFrom","isMetadataSymbolicSelectExpression","heritageClauses","hc","ExtendsKeyword","extends","typeParameters","recordMember","recordStaticMember","isConstructor","Constructor","MethodDeclaration","maybeFunc","methodDecorators","parameterDecoratorData","parametersData","hasDecoratorData","hasParameterData","parameters_1_1","parameter","parameterData","parameterDecorators","PropertyDeclaration","GetAccessor","SetAccessor","propertyDecorators","TypeAliasDeclaration","typeDeclaration","interfaceDeclaration","EnumDeclaration","enumDeclaration","enumValueHolder","enumName","nextDefaultValue","writtenMembers","enumValue","VariableStatement","variableStatement","variableDeclaration","varValue","exported","report_1","BindingElement","ObjectBindingPattern","ArrayBindingPattern","declarationList","validateMetadata","validateExpression","shouldReportNode","expandedMessage$1","validateFunction","oldLocals","isMetadataSymbolicExpression","indexExpression","ifExpression","getOwnPropertyNames","nodeStart","isClassMetadata","validateClass","classData","validateMember","isMethodMetadata","isConstructorMetadata","staticMember","DiagnosticKind$1","DTS$2","upgradeMetadataWithDtsData","oldMetadata","dtsFilePath","newMetadata","origins","dtsMetadata","getSourceFileMetadata","spanOf$3","isParseSourceSpan","inSpan","exclusive","offsetSpan$1","getSelectors","flatten$1","removeSuffix","suffix","uniqueByName","elements_1","elements_1_1","diagnosticInfoFromTemplateInfo","findTemplateAstAt","allowWidening","isNarrower","spanA","spanB","findAstAt","excludeEmpty","getExpressionCompletions","getExpressionSymbol","groups","onclick","ondblclick","onmousedown","onmouseup","onmouseover","onmousemove","onmouseout","onkeypress","onkeydown","onkeyup","onload","onunload","href","alt","media","nohref","usemap","src","onfocus","onblur","charset","declare","classid","codebase","codetype","archive","standby","cite","datetime","accept","shape","coords","action","enctype","onsubmit","onreset","accept-charset","valuetype","longdesc","width","disabled","onselect","accesskey","multiple","onchange","label","selected","checked","maxlength","rows","cols","height","border","frame","rules","cellspacing","cellpadding","datapagesize","align","charoff","valign","abbr","axis","headers","rowspan","colspan","profile","http-equiv","scheme","hreflang","rel","rev","ismap","defer","BIG","STRONG","DFN","CODE","SAMP","KBD","VAR","CITE","ABBR","ACRONYM","SPAN","BDO","BODY","ADDRESS","DIV","MAP","AREA","IMG","PARAM","PRE","BLOCKQUOTE","INS","DEL","DL","DT","DD","FORM","LABEL","INPUT","SELECT","OPTGROUP","OPTION","TEXTAREA","FIELDSET","LEGEND","BUTTON","TABLE","CAPTION","COLGROUP","COL","HEAD","TITLE","BASE","META","NOSCRIPT","defaultAttributes","SCHEMA$1","EVENT","BOOLEAN$1","NUMBER$1","STRING$1","OBJECT$1","SchemaInformation","typeParts","allKnownElements","eventsOf","propertiesOf","typeOf","_instance","hiddenHtmlElements","noscript","attributeCompletions","attributeCompletionsForElement","getAttributeInfosForElement","htmlAttributes","attributeNames","compose","indexes","indexes_1","indexes_1_1","group","fromHtml","htmlProperties","propertyNames","htmlEvents","eventNames","selectorMap","selectorAndAttributeNames","attrs_1","selectorAndAttr","hasTemplateReference$1","createElementCssSelector$1","templateAttr","foldAttrs","inputOutput","templates","duplicate","cloneAttr","expandedAttr","nameOfAttr","elementCompletions","htmlNames","voidElementAttributeCompletions","ExpressionVisitor","attributeValueCompletions","key_1","selectorInfo","selector_1","templateBindingResult","expressionParser","valueRelativePosition_1","keyCompletions","lowerName","equalLocation","directiveMetadata","contextTable","symbolsToCompletions","expressionPosition","completions","attributeValuePosition","locateSymbol","templatePosition","symbol_1","span_1","attributeValueSymbol_1","inEvent","findAttribute","expressionOffset","OverrideKindSymbol","findOutputBinding","fieldName","invertMap","findInputBinding","sym","kindOverride","createLanguageService","LanguageServiceImpl","getTemplateReferences","getTemplates","getTemplateDiagnostics","astProvider","getTemplateAst","expressionDiagnostics","getTemplateExpressionDiagnostics","templates_1","templates_1_1","getDeclarations","getAnalyzedModules","getDeclarationDiagnostics","declarationSpan","ngModuleByPipeOrDirective","ngModules","declarations_1","declarations_1_1","uniqueBySpan","getPipesAt","templateInfo","getTemplateAstAtPosition","getCompletionsAt","getTemplateCompletions","templatePosition_1","path_1","mostSpecific","astPosition_1","startTagSpan","dinfo","widerPath_1","widerVisitor","entityCompletions","found","re","getSourceText","interpolationCompletions","templatePath","getDefinitionAt","getDefinition","getHoverAt","getHover","hoverTextOf","getTemplateAt","contextFile","metadataResolver","rawHtmlParser","htmlParser","parser","htmlResult","analyzedModules","findSuitableDefaultModule","resultSize","module_1","moduleSize","removeMissing","opts","ChangeDetectionStrategy$1","ChangeDetectorStatus","Query","InjectionToken","ANNOTATIONS","PARAMETERS","PROP_METADATA","makeDecorator","parentClass","chainFn","typeFn","metaCtor","makeMetadataCtor","DecoratorFactory","annotationInstance","TypeDecorator","cls","annotationCls","makeParamDecorator","ParamDecoratorFactory","ParamDecorator","unusedKey","makePropDecorator","PropDecoratorFactory","decoratorInstance","PropDecorator","Type$2","isType","__window","window","__self","WorkerGlobalScope","__global","_global","_symbolIterator","getSymbolIterator","Symbol_1","scheduleMicroTask","Zone","looseIdentical","stringify$1","DELEGATE_CTOR","INHERITED_CLASS","INHERITED_CLASS_WITH_CTOR","ReflectionCapabilities","reflect","_reflect","isReflectionEnabled","_zipTypesAndAnnotations","paramTypes","paramAnnotations","_ownParameters","parentCtor","tsickleCtorParams","ctorParameters","paramTypes_1","ctorParam","paramAnnotations_1","convertTsickleDecoratorIntoMetadata","fill","getParentCtor","_ownAnnotations","ownAnnotations","_ownPropMetadata","propDecorators","propDecorators_1","propMetadata_1","ownPropMetadata","setter","importUri","resourceUri","resolveIdentifier","resolveEnum","enumIdentifier","decoratorInvocations","decoratorInvocation","parentProto","forwardRef","forwardRefFn","__forward_ref__","resolveForwardRef$1","Inject","Optional","Self","SkipSelf","SOURCE$1","_THROW_IF_NOT_FOUND","THROW_IF_NOT_FOUND","NullInjector","notFoundValue","StaticInjector","NULL","IDENT","EMPTY","CIRCULAR","MULTI_PROVIDER_FN","GET_PROPERTY_NAME$1","USE_VALUE$2","getClosureSafeProperty$1","objWithPropertyToExtract","NULL_INJECTOR","NEW_LINE","NO_NEW_LINE","records","_records","useNew","recursivelyProcessProviders","staticError","resolveProvider","computeDeps","providerDeps","multiProviderMixError","record","tryResolveToken","resolveToken","depRecords","depRecord","childRecord","tokenPath","formatError","charAt","_currentInjector","setCurrentInjector","injector","former","injectArgs","GET_PROPERTY_NAME","USE_VALUE$1","getClosureSafeProperty","EMPTY_ARRAY$1","convertInjectableProviderToFactory","deps_1","reflectionCapabilities","valueProvider_1","existingProvider_1","factoryProvider_1","classProvider_1","deps_2","deps_3","ViewEncapsulation$1","injectableType","ngInjectorDef","Version$1","VERSION$2","ERROR_DEBUG_CONTEXT","ERROR_ORIGINAL_ERROR","ERROR_LOGGER","getDebugContext","getOriginalError","defaultErrorLogger","ErrorHandler","handleError","originalError","_findOriginalError","_findContext","errorLogger","getErrorLogger","constructResolvingPath","findFirstClosedCycle","injectionError","constructResolvingMessage","errMsg","wrappedError","addKey","injectors","noAnnotationError","ii","ReflectiveKey","displayName","_globalKeyRegistry","numberOfKeys","KeyRegistry","_allKeys","newKey","Reflector","updateCapabilities","caps","ReflectiveDependency","optional","visibility","fromKey","_EMPTY_LIST","ResolvedReflectiveProvider_","resolvedFactories","resolvedFactory","ResolvedReflectiveFactory","resolveReflectiveProvider","resolveReflectiveFactory","factoryFn","resolvedDeps","_dependenciesFor","aliasInstance","constructDependencies","params_1","_extractToken","_createDependency","paramMetadata","UNDEFINED","ReflectiveInjector","resolveReflectiveProviders","resolvedProviderMap","mergeResolvedReflectiveProviders","normalizedProvidersMap","existing","_normalizeProviders","invalidProviderError","resolveAndCreate","ResolvedReflectiveProviders","fromResolvedProviders","ReflectiveInjector_","_providers","_constructionCounter","keyIds","objs","_getByKey","resolveAndCreateChild","createChildFromResolved","inj","resolveAndInstantiate","instantiateResolved","_instantiateProvider","getProviderAtIndex","outOfBoundsError","_new","_getMaxNumberOfObjects","cyclicDependencyError","_instantiate","ResolvedReflectiveFactory$$1","_getByReflectiveDependency","instantiationError","originalException","originalStack","INJECTOR_KEY","_getByKeySelf","_getByKeyDefault","_getObjByKeyId","keyId","_throwOrNull","noProviderError","inj_","_mapProviders","isFunction","_enable_super_gross_mode_that_will_cause_bad_things","useDeprecatedSynchronousErrorHandling","log","hostReportError","err","setTimeout","empty$1","closed","complete","isObject","tryCatchTarget","errorObject","tryCatcher","tryCatch","__extends$2","UnsubscriptionError","Subscription","unsubscribe","_parents","_subscriptions","_unsubscribe","hasErrors","remove","flattenUnsubscriptionErrors","teardown","subscription","_addParent","tmp","subscriptions","subscriptionIndex","errs","rxSubscriber","__extends$1","Subscriber","destinationOrNext","syncErrorValue","syncErrorThrown","syncErrorThrowable","isStopped","destination","isTrustedSubscriber","trustedSubscriber","SafeSubscriber","subscriber","_next","_error","_complete","_unsubscribeAndRecycle","_parentSubscriber","observerOrNext","_context","__tryOrSetError","__tryOrUnsub","wrappedComplete","observable","noop$1","Observable","subscribe","_isScalar","_subscribe","lift","observable$$1","sink","toSubscriber","nextOrObserver","_trySubscribe","promiseCtor","getPromiseCtor","reject","operations","pipeFromArray","fns","piped","toPromise","__extends$5","ObjectUnsubscribedError","__extends$6","SubjectSubscription","subject","observers","subscriberIndex","__extends$4","SubjectSubscriber","Subject","hasError","thrownError","AnonymousSubject","asObservable","__extends$7","refCount","refCountOperatorFunction","RefCountOperator$1","RefCountOperator","connectable","_refCount","refCounter","RefCountSubscriber$1","connection","connect","RefCountSubscriber","sharedConnection","_connection","__extends$3","connectableProto","ConnectableObservable","subjectFactory","_isComplete","getSubject","_subject","ConnectableSubscriber","connectableObservableDescriptor","writable","__extends$8","refCount$$1","__extends$12","BehaviorSubject","_value","getValue","Action","scheduler","work","schedule","state","delay","__extends$11","AsyncAction","pending","recycleAsyncId","requestAsyncId","setInterval","flush","clearInterval","execute","_execute","errored","errorValue","actions","__extends$10","QueueAction","Scheduler","SchedulerAction","now","Date","__extends$14","AsyncScheduler","active","scheduled","shift","__extends$13","queue","QueueScheduler","EMPTY$1","empty$2","emptyScheduled","isScheduler","subscribeToArray","dispatch","Notification","hasValue","observe","observer","do","toObservable","scalar","throwError","createNext","undefinedValueNotification","createError","createComplete","completeNotification","__extends$15","ObserveOnSubscriber","notification","scheduleMessage","ObserveOnMessage","__extends$9","ReplayEvent","ReplaySubject","bufferSize","windowTime","POSITIVE_INFINITY","_events","_infiniteTimeWindow","_bufferSize","_windowTime","nextInfiniteTimeWindow","nextTimeWindow","_getNow","_trimBufferThenGetEvents","eventsCount","spliceCount","time","__extends$16","nextHandle","AsyncSubject","hasNext","hasCompleted","tasksByHandle","__extends$17","AsapAction","handle","runIfPresent","__extends$18","asap","AsapScheduler","__extends$19","AnimationFrameAction","requestAnimationFrame","cancelAnimationFrame","__extends$20","__extends$21","AnimationFrameScheduler","VirtualAction","VirtualTimeScheduler","maxFrames","frameTimeFactor","sortActions","identity","__extends$22","__extends$23","ArgumentOutOfRangeError","EmptyError","__extends$24","__extends$25","TimeoutError","MapOperator","project","thisArg","MapSubscriber","__extends$27","OuterSubscriber","notifyNext","outerValue","innerValue","outerIndex","innerIndex","innerSub","notifyError","notifyComplete","__extends$28","InnerSubscriber","subscribeToPromise","getSymbolIterator$1","subscribeToIterable","iterable","iterator$$1","subscribeToObservable","obs","TypeError","isArrayLike","isPromise$1","subscribeTo","subscribeToResult","outerSubscriber","__extends$26","CombineLatestSubscriber","resultSelector","observables","toRespond","unused","_tryResultSelector","__extends$29","MergeMapOperator","concurrent","MergeMapSubscriber","_tryNext","_innerSub","ish","__extends$30","ForkJoinSubscriber","completed","haveValues","innerSubscription","_hasValue","__extends$31","__extends$32","RaceSubscriber","hasFirst","StaticIterator","ZipSubscriber","iterators","StaticArrayIterator","ZipBufferIterator","stillUnsubscribed","notifyInactive","checkIterators","shouldComplete","_tryresultSelector","nextResult","isComplete","__extends$33","__extends$34","AuditSubscriber","durationSelector","throttled","duration","clearThrottle","__extends$35","BufferSubscriber","closingNotifier","__extends$36","BufferCountSubscriber","BufferSkipCountSubscriber","startBufferEvery","buffers","Context","dispatchBufferTimeSpanOnly","prevContext","closeContext","openContext","closeAction","bufferTimeSpan","dispatchBufferCreation","bufferCreationInterval","dispatchBufferClose","BufferTimeSubscriber","maxBufferSize","contexts","timespanOnly","creationState","filledBufferContext","onBufferFull","__extends$37","__extends$38","BufferToggleSubscriber","openings","closingSelector","closeBuffer","openBuffer","trySubscribe","__extends$39","BufferWhenSubscriber","subscribing","closingSubscription","__extends$40","CatchSubscriber","caught","err2","__extends$41","CountSubscriber","_tryPredicate","__extends$42","DebounceSubscriber","durationSubscription","emitValue","dispatchNext$2","debouncedNext","DebounceTimeSubscriber","dueTime","debouncedSubscription","lastValue","clearDebounce","__extends$43","__extends$44","DefaultIfEmptySubscriber","isEmpty","DelayMessage","DelaySubscriber","delay_1","_schedule","scheduleNotification","__extends$45","SubscriptionDelaySubscriber","DelayWhenSubscriber","delayDurationSelector","delayNotifierSubscriptions","removeSubscription","tryComplete","delayNotifier","tryDelay","subscriptionIdx","notifierSubscription","SubscriptionDelayObservable","subscriptionDelay","sourceSubscribed","subscribeToSource","__extends$46","__extends$47","DeMaterializeSubscriber","__extends$48","DistinctSubscriber","keySelector","flushes","_useKeySelector","_finalizeNext","__extends$49","DistinctUntilChangedSubscriber","compare","hasKey","__extends$50","FilterSubscriber","__extends$51","TapSubscriber","_tapNext","_tapError","_tapComplete","__extends$52","TakeSubscriber","total","__extends$53","EverySubscriber","everyValueMatch","__extends$54","SwitchFirstSubscriber","hasSubscription","__extends$55","ExhaustMapSubscriber","tryNext","__extends$56","ExpandSubscriber","subscribeToProjection","__extends$57","FinallySubscriber","__extends$58","FindValueSubscriber","yieldIndex","GroupDurationSubscriber","GroupBySubscriber","subjectSelector","attemptedToUnsubscribe","_group","groupedObservable","GroupedObservable","removeGroup","groupSubject","refCountSubscription","InnerRefCountSubscription","__extends$59","__extends$60","IgnoreElementsSubscriber","__extends$61","IsEmptySubscriber","__extends$62","TakeLastSubscriber","ring","idx","__extends$63","MapToSubscriber","__extends$64","MaterializeSubscriber","__extends$65","ScanSubscriber","accumulator","_seed","hasSeed","seed","MergeScanSubscriber","acc","MulticastOperator","__extends$66","__extends$67","OnErrorResumeNextSubscriber","nextSources","subscribeToNextSource","__extends$68","PairwiseSubscriber","hasPrev","__extends$69","RepeatSubscriber","__extends$70","RepeatWhenSubscriber","notifier","sourceIsBeingSubscribedTo","retries","subscribeToRetries","retriesSubscription","notifications","__extends$71","RetrySubscriber","__extends$72","RetryWhenSubscriber","__extends$73","SampleSubscriber","dispatchNotification","period","SampleTimeSubscriber","__extends$74","SequenceEqualCompareToSubscriber","SequenceEqualSubscriber","compareTo","comparor","_oneComplete","emit","checkValues","areEqual","nextB","shareSubjectFactory","__extends$75","__extends$76","SingleSubscriber","seenValue","applySingleValue","singleValue","__extends$77","SkipSubscriber","__extends$78","SkipLastSubscriber","_skipCount","_count","_ring","skipCount","currentIndex","oldValue","__extends$79","SkipUntilSubscriber","__extends$80","SkipWhileSubscriber","skipping","tryCallPredicate","__extends$81","SubscribeOnObservable","delayTime","isNumeric","__extends$82","SwitchMapSubscriber","__extends$83","TakeUntilSubscriber","__extends$84","TakeWhileSubscriber","nextOrComplete","predicateResult","__extends$85","ThrottleSubscriber","_leading","_trailing","_sendValue","_throttled","send","throttle","tryDurationSelector","throttlingDone","dispatchNext$3","ThrottleTimeSubscriber","leading","trailing","_hasTrailingValue","_trailingValue","__extends$86","__extends$87","TimeoutWithSubscriber","absoluteTimeout","waitFor","withObservable","scheduleTimeout","dispatchTimeout","__extends$88","WindowSubscriber","openWindow","prevWindow","newWindow","__extends$89","WindowCountSubscriber","windowSize","startWindowEvery","windows","window_1","CountedSubject","_numberOfNextedValues","dispatchWindowTimeSpanOnly","windowTimeSpan","closeWindow","dispatchWindowCreation","windowCreationInterval","dispatchWindowClose","WindowTimeSubscriber","maxWindowSize","numberOfNextedValues","window_2","__extends$90","__extends$91","WindowToggleSubscriber","openSubscription","inner","__extends$92","unsubscribeClosingNotification","closingNotification","__read$12","isPromise$2","WithLatestFromSubscriber","__spread$12","_tryProject","APP_INITIALIZER","ApplicationInitStatus","appInits","initialized","donePromise","rej","runInitializers","asyncInitPromises","initResult","catch","APP_ID_RANDOM_PROVIDER","_appIdRandomProviderFactory","_randomChar","random","PLATFORM_ID","APP_BOOTSTRAP_LISTENER","Console","_throwError","trace","Compiler","compileModuleSync","compileModuleAsync","compileModuleAndAllComponentsSync","compileModuleAndAllComponentsAsync","CompilerFactory","_NullComponentFactoryResolver","resolveComponentFactory","noComponentFactoryError","ComponentFactoryBoundToModule","projectableNodes","rootSelectorOrNode","wtfEnabled","detectWTF","wtf","noopScope","arg0","arg1","wtfCreateScope","createScope","wtfLeave","leave","returnValue","leaveScope","EventEmitter","isAsync","__isAsync","generatorOrNext","schedulerFn","errorFn","completeFn","NgZone","enableLongStackTrace","hasPendingMicrotasks","hasPendingMacrotasks","isStable","onUnstable","onMicrotaskEmpty","onStable","onError","assertZonePatched","_nesting","_outer","_inner","fork","forkInnerZoneWithAngularBehavior","zone","isAngularZone","onInvokeTask","task","applyThis","applyArgs","onEnter","invokeTask","onLeave","onInvoke","invoke","onHasTask","hasTaskState","hasTask","change","microTask","checkStable","macroTask","onHandleError","runOutsideAngular","isInAngularZone","assertInAngularZone","assertNotInAngularZone","run","runTask","scheduleEventTask","EMPTY_PAYLOAD","noop$2","cancelTask","runGuarded","NoopNgZone","Testability","_ngZone","_pendingCount","_isZoneStable","_didWork","_callbacks","_watchAngularEvents","taskTrackingZone","_runCallbacksIfReady","increasePendingRequestCount","decreasePendingRequestCount","clearTimeout","timeoutId","doneCb","pending_1","getPendingTasks","updateCb","macroTasks","isPeriodic","creationLocation","xhr","addCallback","timeout","whenStable","getPendingRequestCount","findProviders","using","exactMatch","TestabilityRegistry","_applications","_testabilityGetter","addToWindow","registerApplication","testability","unregisterApplication","unregisterAllApplications","getTestability","elem","getAllTestabilities","getAllRootElements","findTestabilityInTree","findInAncestors","_NoopGetTestability","_devMode","isDevMode","PlatformRef","_injector","_modules","_destroyListeners","_destroyed","bootstrapModuleFactory","moduleFactory","ngZone","getNgZone","ngZoneOption","ngZoneInjector","exceptionHandler","onDestroy","_callAndReportToErrorHandler","errorHandler","initStatus","_moduleDoBootstrap","bootstrapModule","compilerOptions","compilerFactory","optionsReducer","createCompiler","appRef","ApplicationRef","_bootstrapComponents","ngDoBootstrap","destroy","dst","_zone","_exceptionHandler","_componentFactoryResolver","_initStatus","_bootstrapListeners","_views","_runningTick","_enforceNoNewChanges","_stable","componentTypes","tick","isCurrentlyStable","stableSub","unstableSub","mergeAll","mergeMap","isObservable","fromObservable","fromPromise","isIterable","fromIterable","mapOperation","share","multicast","subjectOrSubjectFactory","multicastOperatorFunction","componentOrFactory","compRef","_unloadComponent","nativeElement","_loadComponent","_tickScope","view","detectChanges","checkNoChanges","attachView","viewRef","attachToAppRef","detachView","detachFromAppRef","componentRef","ngOnDestroy","RendererStyleFlags2","RendererFactory2","Renderer2","dirty","_results","changes","init","toArray","reset","flatten$2","notifyOnChanges","setDirty","EventListener","EmbeddedViewRef","ViewRef","DebugNode","nativeNode","_debugContext","DebugElement","addChild","listeners","providerTokens","removeChild","childIndex","insertChildrenAfter","newChildren","siblingIndex","insertBefore","refChild","newChild","refIndex","queryAll","_queryElementChildren","queryAllNodes","_queryNodeChildren","triggerEventHandler","eventObj","parentNode","_nativeNodeToDebugNode","getDebugNode","indexDebugNode","devModeEqual","isListLikeIterableA","isListLikeIterable","isListLikeIterableB","areIterablesEqual","comparator","iterator1","iterator2","item1","item2","WrappedValue","wrapped","wrap","unwrap","isWrapped","SimpleChange","previousValue","currentValue","firstChange","isFirstChange","isJsObject","DefaultIterableDifferFactory","supports","trackByFn","DefaultIterableDiffer","trackByIdentity","_linkedRecords","_unlinkedRecords","_previousItHead","_itHead","_itTail","_additionsHead","_additionsTail","_movesHead","_movesTail","_removalsHead","_removalsTail","_identityChangesHead","_identityChangesTail","_trackByFn","forEachItem","forEachOperation","nextIt","nextRemove","addRemoveOffset","moveOffsets","getPreviousIndex","adjPreviousIndex","_nextRemoved","previousIndex","localMovePreviousIndex","localCurrentIndex","forEachPreviousItem","_nextPrevious","forEachAddedItem","_nextAdded","forEachMovedItem","_nextMoved","forEachRemovedItem","forEachIdentityChange","_nextIdentityChange","diff","collection","_reset","itemTrackBy","mayBeDirty","index_1","trackById","_verifyReinsertion","_addIdentityChange","_mismatch","iterateListLike","_truncate","isDirty","nextRecord","previousRecord","_prev","_remove","_moveAfter","_reinsertAfter","_addAfter","IterableChangeRecord_","reinsertRecord","_addToMoves","_addToRemovals","_unlink","prevRecord","_prevRemoved","_insertAfter","_DuplicateMap","put","toIndex","_prevDup","_nextDup","_DuplicateItemRecordList","_head","_tail","atOrAfterIndex","duplicates","recordList","moveOffset","MissingTranslationStrategy$1","DefaultKeyValueDifferFactory","DefaultKeyValueDiffer","_mapHead","_appendAfter","_previousMapHead","_changesHead","_changesTail","forEachChangedItem","_nextChanged","_forEach","_maybeAddToChanges","_getOrCreateRecordForKey","_insertBeforeOrAppend","record_1","KeyValueChangeRecord_","_addToAdditions","newValue","_addToChanges","IterableDiffers","factories","copied","extend","getTypeNameForDebugging","KeyValueDiffers","kv","keyValDiff","iterableDiff","defaultIterableDiffers","defaultKeyValueDiffers","createPlatformFactory","parentPlatformFactory","_iterableDiffersFactory","_keyValueDiffersFactory","_localeFactory","tagSet","merge$2","sets","sets_1","sets_1_1","ApplicationModule","SecurityContext$1","VOID_ELEMENTS","OPTIONAL_END_TAG_BLOCK_ELEMENTS","OPTIONAL_END_TAG_INLINE_ELEMENTS","OPTIONAL_END_TAG_ELEMENTS","Sanitizer","shiftInitState","priorInitState","newInitState","initState","initIndex","shouldCallLifecycleInitHook","asTextData","asElementData","asProviderData","asPureExpressionData","asQueryList","Services","setCurrentNode","createRootView","createEmbeddedView","createComponentView","createNgModuleRef","overrideProvider","overrideComponentView","clearOverrides","checkAndUpdateView","checkNoChangesView","destroyView","resolveDep","createDebugContext","handleEvent","updateDirectives","updateRenderer","dirtyParentQueries","expressionChangedAfterItHasBeenCheckedError","currValue","isFirstCheck","viewDebugError","_addDebugContext","logError","viewDestroyedError","NOOP","_tokenKeyCache","tokenKey","checkBinding","bindingIdx","oldValues","bindingIndex","checkAndUpdateBinding","checkBindingNoChanges","bindingName","nodeIndex","markParentViewsForCheck","currView","viewContainerParent","markParentViewsForCheckProjectedViews","endView","dispatchEvent","componentView","root","declaredViewContainer","parentNodeDef","viewParentEl","renderNode","renderElement","renderText","isComponentView","isEmbeddedView","splitDepsDsl","sourceName","getParentRenderElement","renderHost","renderParent","componentRendererType","Native","DEFINITION_CACHE","WeakMap","resolveDefinition","visitRootRenderNodes","nextSibling","renderer","visitSiblingRenderNodes","endIndex","nodeDef","visitRenderNode","childCount","visitProjectedRenderNodes","compView","hostElDef","projectedNodes","execRenderNodeAction","ngContent","rn","bindingFlags","embeddedViews","viewContainer","_embeddedViews","appendChild","NS_PREFIX_RE","splitNamespace","elDef","selectorOrNode","ns","createComment","selectRootElement","setAttribute","listenToElementOutputs","handleEventClosure","renderEventHandlerClosure","listenTarget","listenerView","disposable","listen","disposables","outputIndex","checkAndUpdateElementValue","elData","renderNode$$1","setElementAttribute","renderValue","sanitizer","sanitize","removeAttribute","setElementClass","addClass","removeClass","setElementStyle","setStyle","removeStyle","setElementProperty","setProperty","UNDEFINED_VALUE","InjectorRefTokenKey$1","INJECTORRefTokenKey$1","NgModuleRefTokenKey","resolveNgModuleDep","depDef","tokenKey_1","_def","providersByKey","providerInstance","_createProviderInstance$1","targetsModule","moduleTransitivelyPresent","isRoot","_createClass","depValues","_callFactory","detachEmbeddedView","elementData","viewIndex","removeFromArray","renderDetachView","renderAttachEmbeddedView","prevView","prevRenderNode","addToArray","EMPTY_CONTEXT","ComponentFactory_","viewDefFactory","_inputs","_outputs","inputsArr","outputsArr","componentNodeIndex","componentProvider","ComponentRef_","ViewRef_","_view","_viewRef","_component","_elDef","changeDetectorRef","Injector_","createViewContainerData","ViewContainerRef_","_data","attachToViewContainerRef","templateRef","insert","ngModuleRef","contextInjector","parentInjector","destroyed","viewRef_","attachEmbeddedView","parentView","attachProjectedView","vcElementData","dvcElementData","projectedViews","_projectedViews","markNodeAsProjectedTemplate","nodeFlags","childFlags","move","moveEmbeddedView","oldViewIndex","newViewIndex","viewData","detach","createChangeDetectorRef","_viewContainerRef","_appRef","rootRenderNodes","renderNodes","markForCheck","fs$$1","rendererFactory","begin","reattach","vcRef","createTemplateData","TemplateRef_","_parentView","createInjector$1","createRendererV1","RendererAdapter","namespaceAndName","createViewRoot","hostElement","createTemplateAnchor","createText","projectNodes","attachViewAfter","viewRootNodes","viewAllNodes","destroyNode","listenGlobal","attributeValue","setBindingDebugInfo","isAdd","styleName","styleValue","invokeElementMethod","methodName","setText","setValue","animate","NgModuleRef_","_moduleType","initNgModule","provDef","injectFlags","callNgModuleLifecycle","lifecycles","RendererV1TokenKey","Renderer2TokenKey","ElementRefTokenKey","ViewContainerRefTokenKey","TemplateRefTokenKey","ChangeDetectorRefTokenKey","InjectorRefTokenKey","INJECTORRefTokenKey","createProviderInstance","_createProviderInstance","createPipeInstance","createClass","createDirectiveInstance","eventHandlerClosure","allowPrivateServices","callFactory","ViewAction","NOT_FOUND_CHECK_ONLY_ELEMENT_INJECTOR","startView","tokenKey$$1","searchView","findCompView","providerDef_1","allProviders","publicProviders","providerData","updateProp","nonMinifiedName","callLifecycleHooksChildrenFirst","callProviderLifecycles","directChildFlags","callElementProvidersLifecycles","ngAfterContentInit","ngAfterContentChecked","ngAfterViewInit","ngAfterViewChecked","queryIds","nodeMatchedQueries","tplDef","filterId","checkAndUpdateQuery","queryList","directiveInstance","newValues","calcQueryValues","notify","boundValue","matchedQueries","getQueryValue","childMatchedQueries","embeddedView","dvc","projectedView","queryValueType","appendNgContent","_addInterpolationPart","anchorDef$$1","createView","initView","createViewNodes","compRenderer","createRenderer","outputCount","bindingCount","nodeData","compViewDef","execComponentViewsAction","CreateViewNodes","execQueriesAction","markProjectedViewsForCheck","execEmbeddedViewsAction","CheckNoChanges","CheckAndUpdate","callInit","checkAndUpdateNode","argStyle","v0","v1","v2","v3","v4","v5","v6","v7","v8","v9","checkAndUpdateNodeInline","checkAndUpdateElementInline","bindLen","changed","checkAndUpdateTextInline","checkAndUpdateDirectiveInline","ngOnChanges","ngOnInit","ngDoCheck","checkAndUpdatePureExpressionInline","checkAndUpdateNodeDynamic","checkAndUpdateElementDynamic","checkAndUpdateTextDynamic","checkAndUpdateDirectiveDynamic","checkAndUpdatePureExpressionDynamic","i_1","checkNoChangesNode","checkNoChangesNodeInline","checkNoChangesNodeDynamic","checkNoChangesQuery","Destroy","detachProjectedView","destroyViewNodes","callViewAction","viewState","execProjectedViewsAction","CheckNoChangesProjectedViews","CheckAndUpdateProjectedViews","queryFlags","staticDynamicQueryFlag","checkType","nodeCount","createProdRootView","elInjector","createRootData","debugCreateRootView","DebugRendererFactory2","defWithOverride","applyProviderOverridesToView","callWithDebugContext","DebugAction","debugCreateEmbeddedView","viewDef$$1","debugCreateComponentView","viewDefOverrides","debugCreateNgModuleRef","applyProviderOverridesToNgModule","calcHasOverrides","hasOverrides","hasDeprecatedOverrides","providerOverrides","override","deprecatedBehavior","providerOverridesWithScope","applyProviderOverrides","moduleSet_1","_currentAction","_currentView","_currentNodeIndex","debugOverrideProvider","debugOverrideComponentView","compFactory","getComponentViewDefinitionFactory","debugClearOverrides","elementIndicesWithOverwrittenProviders","findElementIndicesWithOverwrittenProviders","elIndicesWithOverwrittenProviders","lastElementDef","applyProviderOverridesToElement","elIndex","prodCheckAndUpdateNode","checkIndex","prodCheckNoChangesNode","debugCheckAndUpdateView","debugCheckNoChangesView","debugDestroyView","debugSetCurrentNode","debugHandleEvent","debugUpdateDirectives","nextDirectiveWithBinding","debugCheckDirectivesFn","debugCheckAndUpdateNode","debugCheckNoChangesNode","debugUpdateRenderer","nextRenderNodeWithBinding","debugCheckRenderNodeFn","givenValues","bindingValues","camelCaseToDashCase","CAMEL_CASE_REGEXP","normalizeDebugBindingValue","DebugContext_","elView","elOrCompView","childDef","collectReferences","findHostElement","logViewDef","logNodeIndex","renderNodeIndex","getRenderNodeIndex","currRenderNodeIndex","refName","oldAction","oldView","oldNodeIndex","isViewDebugError","viewWrappedDebugError","getCurrentDebugContext","RendererStyleFlags3","renderData","DebugRenderer2","whenRenderingDone","removeDebugNodeFromIndex","namespace","debugCtx","debugEl","debugChildEl","debugRefEl","oldChild","executeHooks","allHooks","checkHooks","creationMode","hooksToCall","callHooks","isProceduralRenderer","stringify$2","findNextRNodeSibling","stopNode","currentNode","pNextOrParent","findFirstRNode","currentSibling","getNextLNodeWithProjection","getNextOrParentSiblingNode","initialNode","nextNode","native","childContainerData","dynamicLContainerNode","views","createTextNode","addRemoveViewFromContainer","insertMode","beforeNode","setViewNext","getParentState","rootView","cleanUpView","removeListeners","cleanup","removeEventListener","executeOnDestroys","destroyHooks","tView","executePipeOnDestroys","pipeDestroyHooks","NgModuleFactory_","_ngModuleDefFactory","initServicesIfNeeded","services","createDebugServices","createProdServices","previousOrParentNode","isParent","tData","currentQueries","NG_HOST_SYMBOL","_CLEAN_PROMISE","_ROOT_DIRECTIVE_INDICES","currentView","checkNoChangesMode","enterView","newView","bindingStartIndex","leaveView","viewHooks","viewCheckHooks","lifecycleStage","refreshDirectives","executeInitAndContentHooks","firstTemplatePass","setHostBindings","hostBindings","refreshChildComponents","componentRefresh","defs","dirIndex","executeInitHooks","initHooks","contentHooks","contentCheckHooks","renderEmbeddedTemplate","viewNode","_isParent","_previousOrParentNode","rf","createLNode","isState","createLNodeObject","nodeInjector","tNode","createLView","viewId","dynamicViewCount","getOrCreateTView","ngPrivateData","createTView","directiveRegistry","pipeRegistry","currentMatches","refreshDynamicChildren","getRenderFlags","container_1","elementIndex","viewAttached","detectChangesInternal","getDirectiveInstance","instanceOrArray","hostNode","_getComponentHostLElementNode","_lViewNode","_setComponentContext","markViewDirty","scheduleTick","rootContext","res_1","clean","getRootView","lView","rootComponent","renderComponentOrTemplate","componentOrContext","_lContainerNode","_viewRefs","lContainer","notImplemented","lViewNode","adjustedIdx","_adjustIndex","insertView","containerNextNativeNode","newIndex","removeView","removeIndex","destroyViewTree","viewOrContainer","QueryList_","_valuesTree","flatten$3","ReflectorModuleModuleResolutionHost","getProgram","metadataCollector","directoryExists","directoryName","fileExists","getScriptSnapshot","readFile","snapshot","getLength","sf","cacheMetadata","ReflectorHost","serviceHost","metadataReaderCache","createMetadataReaderCache","hostAdapter","moduleResolutionCache","createModuleResolutionCache","getCurrentDirectory","modulePath","readMetadata","metadatas","readMetadataFile","metadataPath","metadataOrMetadatas","maxMetadata","basePath","resolveModuleName","resolvedFileName","DummyHtmlParser","DummyResourceLoader","TypeScriptServiceHost","tsService","_typeCache","modulesOutOfDate","fileVersions","setSite","service","validate","_resolver","moduleResolver","directiveResolver","pipeResolver","elementSchemaRegistry","resourceLoader","urlResolver","directiveNormalizer","collectError","ensureTemplateMap","templateReferences","getSourceFromNode","getScriptVersion","fileToComponent","getSourceFromType","updateAnalyzedModules","ensureAnalyzedModules","getScriptFileNames","files","analyzeNgModules","fileNames","staticSymbolResolver","mergeAnalyzedFiles","analyzedFiles","allNgModules","allPipesAndDirectives","af","symbolsMissingModule","_analyzeFilesIncludingNonProgramFiles","seenFiles","visitFile","analyzedFile","analyzeFile","injectables","exportsNonSourceFiles","isNgSymbol","isValueExportingNonSourceFile","Visitor","modMeta","getSourceFiles","version_1","visit_1","templateSource","visit_2","getDeclarationFromNode","_checker","getTypeChecker","lastProgram","_staticSymbolResolver","clearCaches","seen_1","collectedErrors","templateReference","getSourceFromDeclaration","queryCache","getClassMembersFromDeclaration","pipes_1","getSymbolQuery","getPipesTable","getTemplateClassDeclFromNode","stringOf","shrink$1","spanOf$4","getTemplateClassFromStaticSymbol","_reflectorHost","scriptFileNames","tsConfigPath","findTsConfig$1","existsSync","parentDir","genDir","getCompilationSettings","paths","errorMap","sourceFilePath","reflectorHost","currentToken","missingTemplate","callTarget","Decorator","getCollectedErrors","defaultSpan","spanAt$1","isFormattedError","errorToDiagnosticWithChain","convertChain","projectHostMap","VERSION$3","createLanguageServiceFromTypescript","ngHost","ngServer","VERSION","getExternalFiles","proxy","oldLS","languageService","tryCall","tryFilenameCall","ls","tryFilenameOneCall","tryFilenameTwoCall","p1","p2","tryFilenameThreeCall","p3","tryFilenameFourCall","p4","typescriptOnly","cleanupSemanticCache","getSyntacticDiagnostics","getSemanticDiagnostics","getCompilerOptionsDiagnostics","getSyntacticClassifications","getSemanticClassifications","getEncodedSyntacticClassifications","getEncodedSemanticClassifications","getCompletionsAtPosition","getCompletionEntryDetails","getCompletionEntrySymbol","getQuickInfoAtPosition","getNameOrDottedNameSpan","getBreakpointStatementAtPosition","getSignatureHelpItems","getRenameInfo","findRenameLocations","getDefinitionAtPosition","getTypeDefinitionAtPosition","getImplementationAtPosition","getReferencesAtPosition","findReferences","getDocumentHighlights","getOccurrencesAtPosition","getNavigateToItems","searchValue","maxResultCount","excludeDtsFiles","getNavigationBarItems","getNavigationTree","getOutliningSpans","getTodoComments","getBraceMatchingAtPosition","getIndentationAtPosition","getFormattingEditsForRange","getFormattingEditsForDocument","getFormattingEditsAfterKeystroke","getDocCommentTemplateAtPosition","isValidBraceCompletionAtPosition","getSpanOfEnclosingComment","getCodeFixesAtPosition","applyCodeActionCommand","getEmitOutput","dispose","getApplicableRefactors","getEditsForRefactor","getDefinitionAndBoundSpan","getCombinedCodeFix","fixId","formatOptions","tryOperation","attempting","projectService","logger","languageServiceHost","isGlobalCompletion","isMemberCompletion","isNewIdentifierLocation","results_1","results_1_1","sortText","kindModifiers","ours","displayParts","documentation","textSpan","file_1","diagnosticToDiagnostic","messageText","diagnosticMessageToDiagnosticMessageText","diagnosticChainToDiagnosticChain","DiagnosticCategory","ours_1","ours_1_1","loc","containerName","containerKind"],"mappings":"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A,kDACA,uIACA,yCACA,6EACA,wDACA,wBACA,gDACA,yBACA,2BACA,qCACA,mCACA,gGACA,wGACA,wBACA,0BACA,mDACA,sBACA,2CACA,8BACA,mHACA,+DACA,oHACA,iDACA,wDACA,0BACA,qNACA,2BACA,sDACA,iCACA,yBACA,oCACA,wBACA,+BACA,qCACA,wCACA,6BACA,+BACA,2BACA,mBACA,sBACA,8BACA,sBACA,4BACA,kCACA,0BACA,+BACA,gCACA,gCACA,6BACA,2BACA,sBACA,+CACA,+CACA,+CACA,+CACA,6BACA,sBACA,sBACA,0BACA,2BACA,uBACA,2BACA,iCACA,0BACA,qBACA,2BACA,qBACA,oCACA,wBACA,4BACA,2BACA,qCACA,oBACA,qBACA,mBACA,uBACA,2BACA,sBACA,8BACA,+BACA,qCACA,2BACA,mDACA,yBACA,2BACA,mBACA,8CACA,6BACA,qBACA,mCACA,kCACA,kCACA,oBACA,0BACA,8BACA,2BACA,wEACA,gFACA,yBACA,8BACA,sBAEAC,IACAC,MAAS,YACTC,IAAO,UACPC,WAAc,aACdC,UAAa,YACbC,SAAY,WACZC,SAAY,YAEZC,GAA0C,SAAU7rE,GAEpD,SAAS6rE,IACL,IAAIzyE,EAAQ4G,EAAO/M,KAAKzB,OAASA,KAqCjC,OApCA4H,EAAM0yE,WACNT,GAAO/xE,QAAQ,SAAUyyE,GACrB,IAAIxwE,KACAL,EAAKxH,EAAOq4E,EAAYpwE,MAAM,KAAM,GAAIqwE,EAAU9wE,EAAG,GACrD+wE,EADyE/wE,EAAG,GACjDS,MAAM,KACjC4E,EAAK7M,EAAOs4E,EAAQrwE,MAAM,KAAM,GAAuBuwE,EAAY3rE,EAAG,GAAtBA,EAAG,GAC7C5E,MAAM,KAAKrC,QAAQ,SAAU4uC,GAAO,OAAO9uC,EAAM0yE,QAAQ5jC,EAAI1qB,eAAiBjiB,IACxF,IAAI4wE,EAAYD,GAAa9yE,EAAM0yE,QAAQI,EAAU1uD,eACjD2uD,GACA/6E,OAAOiI,KAAK8yE,GAAW7yE,QAAQ,SAAUke,GAAQjc,EAAKic,GAAQ20D,EAAU30D,KAE5Ey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BACA,4BACA,0BACA,8BACA,yCACA,6BACA,0BACA,uDACA,wCACA,qCACA,uGACA,iGACA,sOACA,mDACA,sBACA,wCACA,6BACA,2JACA,oJACA,wbACA,+BACA,8BACA,6BACA,wIACA,yBACA,4HACA,8BACA,mDACA,2DACA,sCACA,kDACA,uIACA,yCACA,6EACA,wDACA,wBACA,gDACA,yBACA,2BACA,qCACA,mCACA,gGACA,wGACA,wBACA,0BACA,mDACA,sBACA,2CACA,8BACA,mHACA,+DACA,oHACA,iDACA,wDACA,0BACA,qNACA,2BACA,sDACA,iCACA,yBACA,oCACA,wBACA,+BACA,qCACA,wCACA,6BACA,+BACA,2BACA,mBACA,sBACA,8BACA,sBACA,4BACA,kCACA,0BACA,+BACA,gCACA,gCACA,6BACA,2BACA,sBACA,+CACA,+CACA,+CACA,+CACA,6BACA,sBACA,sBACA,0BACA,2BACA,uBACA,2BACA,iCACA,0BACA,qBACA,2BACA,qBACA,oCACA,wBACA,4BACA,2BACA,qCACA,oBACA,qBACA,mBACA,uBACA,2BACA,sBACA,8BACA,+BACA,qCACA,2BACA,mDACA,yBACA,2BACA,mBACA,8CACA,6BACA,qBACA,mCACA,kCACA,kCACA,oBACA,0BACA,8BACA,2BACA,wEACA,gFACA,yBACA,8BACA,sBAEAC,GAAQ,QACRC,GAAY,UACZC,GAAW,SACXC,GAAW,SACXC,GAAW,SACXC,GAAmC,WACnC,SAASA,IACL,IAAI7kH,EAAQ5H,KACZA,KAAK+6E,UACLoxC,GAASrkH,QAAQ,SAAUyyE,GACvB,IAAI3mE,EAAQ2mE,EAAYpwE,MAAM,KAC1BswE,EAAa7mE,EAAM,GAAGzJ,MAAM,KAC5BuiH,GAAa94G,EAAM,GAAK,KAAKzJ,MAAM,KAEnCJ,KADW2iH,EAAU,GAEhBviH,MAAM,KAAKrC,QAAQ,SAAU4uC,GAAO,OAAO9uC,EAAMmzE,OAAOrkC,EAAI1qB,eAAiBjiB,IACtF,IAAI2wE,EAAYgyC,EAAU,GACtB/xC,EAAYD,GAAa9yE,EAAMmzE,OAAOL,EAAU1u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","sourcesContent":["/**\n * @license Angular v6.0.0-rc.4\n * (c) 2010-2018 Google, Inc. https://angular.io/\n * License: MIT\n */\n\nvar $reflect = {defineMetadata: function() {}, getOwnMetadata: function(){}};\n((typeof global !== 'undefined' && global)||{})['Reflect'] = $reflect;\nvar $deferred, $resolved, $provided;\nfunction $getModule(name) { return $provided[name] || require(name); }\nfunction define(modules, cb) { $deferred = { modules: modules, cb: cb }; }\nmodule.exports = function(provided) {\n  if ($resolved) return $resolved;\n  var result = {};\n  $provided = Object.assign({'reflect-metadata': $reflect}, provided || {}, { exports: result });\n  $deferred.cb.apply(this, $deferred.modules.map($getModule));\n  $resolved = result;\n  return result;\n}\n\ndefine(['exports', 'fs', 'path', 'typescript'], function (exports, fs, path, ts) { 'use strict';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = Object.setPrototypeOf ||\r\n    ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n    function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n\r\nfunction __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nvar __assign = Object.assign || function __assign(t) {\r\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n        s = arguments[i];\r\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n    }\r\n    return t;\r\n};\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nfunction __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nfunction __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nfunction __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar createInject = makeMetadataFactory('Inject', function (token) { return ({ token: token }); });\nvar createInjectionToken = makeMetadataFactory('InjectionToken', function (desc) { return ({ _desc: desc, ngInjectableDef: undefined }); });\nvar createAttribute = makeMetadataFactory('Attribute', function (attributeName) { return ({ attributeName: attributeName }); });\nvar createContentChildren = makeMetadataFactory('ContentChildren', function (selector, data) {\n    if (data === void 0) { data = {}; }\n    return (__assign({ selector: selector, first: false, isViewQuery: false, descendants: false }, data));\n});\nvar createContentChild = makeMetadataFactory('ContentChild', function (selector, data) {\n    if (data === void 0) { data = {}; }\n    return (__assign({ selector: selector, first: true, isViewQuery: false, descendants: true }, data));\n});\nvar createViewChildren = makeMetadataFactory('ViewChildren', function (selector, data) {\n    if (data === void 0) { data = {}; }\n    return (__assign({ selector: selector, first: false, isViewQuery: true, descendants: true }, data));\n});\nvar createViewChild = makeMetadataFactory('ViewChild', function (selector, data) {\n    return (__assign({ selector: selector, first: true, isViewQuery: true, descendants: true }, data));\n});\nvar createDirective = makeMetadataFactory('Directive', function (dir) {\n    if (dir === void 0) { dir = {}; }\n    return dir;\n});\nvar ViewEncapsulation;\n(function (ViewEncapsulation) {\n    ViewEncapsulation[ViewEncapsulation[\"Emulated\"] = 0] = \"Emulated\";\n    ViewEncapsulation[ViewEncapsulation[\"Native\"] = 1] = \"Native\";\n    ViewEncapsulation[ViewEncapsulation[\"None\"] = 2] = \"None\";\n})(ViewEncapsulation || (ViewEncapsulation = {}));\nvar ChangeDetectionStrategy;\n(function (ChangeDetectionStrategy) {\n    ChangeDetectionStrategy[ChangeDetectionStrategy[\"OnPush\"] = 0] = \"OnPush\";\n    ChangeDetectionStrategy[ChangeDetectionStrategy[\"Default\"] = 1] = \"Default\";\n})(ChangeDetectionStrategy || (ChangeDetectionStrategy = {}));\nvar createComponent = makeMetadataFactory('Component', function (c) {\n    if (c === void 0) { c = {}; }\n    return (__assign({ changeDetection: ChangeDetectionStrategy.Default }, c));\n});\nvar createPipe = makeMetadataFactory('Pipe', function (p) { return (__assign({ pure: true }, p)); });\nvar createInput = makeMetadataFactory('Input', function (bindingPropertyName) { return ({ bindingPropertyName: bindingPropertyName }); });\nvar createOutput = makeMetadataFactory('Output', function (bindingPropertyName) { return ({ bindingPropertyName: bindingPropertyName }); });\nvar createHostBinding = makeMetadataFactory('HostBinding', function (hostPropertyName) { return ({ hostPropertyName: hostPropertyName }); });\nvar createHostListener = makeMetadataFactory('HostListener', function (eventName, args) { return ({ eventName: eventName, args: args }); });\nvar createNgModule = makeMetadataFactory('NgModule', function (ngModule) { return ngModule; });\nvar createInjectable = makeMetadataFactory('Injectable', function (injectable) {\n    if (injectable === void 0) { injectable = {}; }\n    return injectable;\n});\nvar CUSTOM_ELEMENTS_SCHEMA = {\n    name: 'custom-elements'\n};\nvar NO_ERRORS_SCHEMA = {\n    name: 'no-errors-schema'\n};\nvar createOptional = makeMetadataFactory('Optional');\nvar createSelf = makeMetadataFactory('Self');\nvar createSkipSelf = makeMetadataFactory('SkipSelf');\nvar createHost = makeMetadataFactory('Host');\nvar Type = Function;\nvar SecurityContext;\n(function (SecurityContext) {\n    SecurityContext[SecurityContext[\"NONE\"] = 0] = \"NONE\";\n    SecurityContext[SecurityContext[\"HTML\"] = 1] = \"HTML\";\n    SecurityContext[SecurityContext[\"STYLE\"] = 2] = \"STYLE\";\n    SecurityContext[SecurityContext[\"SCRIPT\"] = 3] = \"SCRIPT\";\n    SecurityContext[SecurityContext[\"URL\"] = 4] = \"URL\";\n    SecurityContext[SecurityContext[\"RESOURCE_URL\"] = 5] = \"RESOURCE_URL\";\n})(SecurityContext || (SecurityContext = {}));\nvar MissingTranslationStrategy;\n(function (MissingTranslationStrategy) {\n    MissingTranslationStrategy[MissingTranslationStrategy[\"Error\"] = 0] = \"Error\";\n    MissingTranslationStrategy[MissingTranslationStrategy[\"Warning\"] = 1] = \"Warning\";\n    MissingTranslationStrategy[MissingTranslationStrategy[\"Ignore\"] = 2] = \"Ignore\";\n})(MissingTranslationStrategy || (MissingTranslationStrategy = {}));\nfunction makeMetadataFactory(name, props) {\n    var factory = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        var values = props ? props.apply(void 0, __spread(args)) : {};\n        return __assign({ ngMetadataName: name }, values);\n    };\n    factory.isTypeOf = function (obj) { return obj && obj.ngMetadataName === name; };\n    factory.ngMetadataName = name;\n    return factory;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar DASH_CASE_REGEXP = /-+([a-z0-9])/g;\nfunction dashCaseToCamelCase(input) {\n    return input.replace(DASH_CASE_REGEXP, function () {\n        var m = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            m[_i] = arguments[_i];\n        }\n        return m[1].toUpperCase();\n    });\n}\nfunction splitAtColon(input, defaultValues) {\n    return _splitAt(input, ':', defaultValues);\n}\nfunction splitAtPeriod(input, defaultValues) {\n    return _splitAt(input, '.', defaultValues);\n}\nfunction _splitAt(input, character, defaultValues) {\n    var characterIndex = input.indexOf(character);\n    if (characterIndex == -1)\n        return defaultValues;\n    return [input.slice(0, characterIndex).trim(), input.slice(characterIndex + 1).trim()];\n}\nfunction visitValue(value, visitor, context) {\n    if (Array.isArray(value)) {\n        return visitor.visitArray(value, context);\n    }\n    if (isStrictStringMap(value)) {\n        return visitor.visitStringMap(value, context);\n    }\n    if (value == null || typeof value == 'string' || typeof value == 'number' ||\n        typeof value == 'boolean') {\n        return visitor.visitPrimitive(value, context);\n    }\n    return visitor.visitOther(value, context);\n}\nfunction isDefined(val) {\n    return val !== null && val !== undefined;\n}\nfunction noUndefined(val) {\n    return val === undefined ? null : val;\n}\nvar ValueTransformer = /** @class */ (function () {\n    function ValueTransformer() {\n    }\n    ValueTransformer.prototype.visitArray = function (arr, context) {\n        var _this = this;\n        return arr.map(function (value) { return visitValue(value, _this, context); });\n    };\n    ValueTransformer.prototype.visitStringMap = function (map, context) {\n        var _this = this;\n        var result = {};\n        Object.keys(map).forEach(function (key) { result[key] = visitValue(map[key], _this, context); });\n        return result;\n    };\n    ValueTransformer.prototype.visitPrimitive = function (value, context) { return value; };\n    ValueTransformer.prototype.visitOther = function (value, context) { return value; };\n    return ValueTransformer;\n}());\nvar SyncAsync = {\n    assertSync: function (value) {\n        if (isPromise(value)) {\n            throw new Error(\"Illegal state: value cannot be a promise\");\n        }\n        return value;\n    },\n    then: function (value, cb) { return isPromise(value) ? value.then(cb) : cb(value); },\n    all: function (syncAsyncValues) {\n        return syncAsyncValues.some(isPromise) ? Promise.all(syncAsyncValues) : syncAsyncValues;\n    }\n};\nfunction error(msg) {\n    throw new Error(\"Internal Error: \" + msg);\n}\nfunction syntaxError(msg, parseErrors) {\n    var error = Error(msg);\n    error[ERROR_SYNTAX_ERROR] = true;\n    if (parseErrors)\n        error[ERROR_PARSE_ERRORS] = parseErrors;\n    return error;\n}\nvar ERROR_SYNTAX_ERROR = 'ngSyntaxError';\nvar ERROR_PARSE_ERRORS = 'ngParseErrors';\n\n\n// Escape characters that have a special meaning in Regular Expressions\nfunction escapeRegExp(s) {\n    return s.replace(/([.*+?^=!:${}()|[\\]\\/\\\\])/g, '\\\\$1');\n}\nvar STRING_MAP_PROTO = Object.getPrototypeOf({});\nfunction isStrictStringMap(obj) {\n    return typeof obj === 'object' && obj !== null && Object.getPrototypeOf(obj) === STRING_MAP_PROTO;\n}\nfunction utf8Encode(str) {\n    var encoded = '';\n    for (var index = 0; index < str.length; index++) {\n        var codePoint = str.charCodeAt(index);\n        // decode surrogate\n        // see https://mathiasbynens.be/notes/javascript-encoding#surrogate-formulae\n        if (codePoint >= 0xd800 && codePoint <= 0xdbff && str.length > (index + 1)) {\n            var low = str.charCodeAt(index + 1);\n            if (low >= 0xdc00 && low <= 0xdfff) {\n                index++;\n                codePoint = ((codePoint - 0xd800) << 10) + low - 0xdc00 + 0x10000;\n            }\n        }\n        if (codePoint <= 0x7f) {\n            encoded += String.fromCharCode(codePoint);\n        }\n        else if (codePoint <= 0x7ff) {\n            encoded += String.fromCharCode(((codePoint >> 6) & 0x1F) | 0xc0, (codePoint & 0x3f) | 0x80);\n        }\n        else if (codePoint <= 0xffff) {\n            encoded += String.fromCharCode((codePoint >> 12) | 0xe0, ((codePoint >> 6) & 0x3f) | 0x80, (codePoint & 0x3f) | 0x80);\n        }\n        else if (codePoint <= 0x1fffff) {\n            encoded += String.fromCharCode(((codePoint >> 18) & 0x07) | 0xf0, ((codePoint >> 12) & 0x3f) | 0x80, ((codePoint >> 6) & 0x3f) | 0x80, (codePoint & 0x3f) | 0x80);\n        }\n    }\n    return encoded;\n}\nvar MAX_LENGTH_STRINGIFY = 100;\nfunction stringify(token) {\n    if (typeof token === 'string') {\n        return token;\n    }\n    if (token instanceof Array) {\n        return '[' + token.map(stringify).join(', ') + ']';\n    }\n    if (token == null) {\n        return '' + token;\n    }\n    if (token.overriddenName) {\n        return \"\" + token.overriddenName;\n    }\n    if (token.name) {\n        return \"\" + token.name;\n    }\n    var res;\n    try {\n        res = JSON.stringify(token);\n    }\n    catch (_a) {\n        res = token.toString();\n    }\n    if (res == null) {\n        return '' + res;\n    }\n    var newLineIndex = res.indexOf('\\n');\n    if (0 < newLineIndex) {\n        res = res.substring(0, newLineIndex);\n    }\n    if (MAX_LENGTH_STRINGIFY < res.length) {\n        res = res.substring(0, MAX_LENGTH_STRINGIFY) + '...';\n    }\n    return res;\n}\n/**\n * Lazily retrieves the reference value from a forwardRef.\n */\nfunction resolveForwardRef(type) {\n    if (typeof type === 'function' && type.hasOwnProperty('__forward_ref__')) {\n        return type();\n    }\n    else {\n        return type;\n    }\n}\n/**\n * Determine if the argument is shaped like a Promise\n */\nfunction isPromise(obj) {\n    // allow any Promise/A+ compliant thenable.\n    // It's up to the caller to ensure that obj.then conforms to the spec\n    return !!obj && typeof obj.then === 'function';\n}\nvar Version = /** @class */ (function () {\n    function Version(full) {\n        this.full = full;\n        var splits = full.split('.');\n        this.major = splits[0];\n        this.minor = splits[1];\n        this.patch = splits.slice(2).join('.');\n    }\n    return Version;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * @module\n * @description\n * Entry point for all public APIs of the common package.\n */\n/**\n *\n */\nvar VERSION = new Version('6.0.0-rc.4');\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * A segment of text within the template.\n */\nvar TextAst = /** @class */ (function () {\n    function TextAst(value, ngContentIndex, sourceSpan) {\n        this.value = value;\n        this.ngContentIndex = ngContentIndex;\n        this.sourceSpan = sourceSpan;\n    }\n    TextAst.prototype.visit = function (visitor, context) { return visitor.visitText(this, context); };\n    return TextAst;\n}());\n/**\n * A bound expression within the text of a template.\n */\nvar BoundTextAst = /** @class */ (function () {\n    function BoundTextAst(value, ngContentIndex, sourceSpan) {\n        this.value = value;\n        this.ngContentIndex = ngContentIndex;\n        this.sourceSpan = sourceSpan;\n    }\n    BoundTextAst.prototype.visit = function (visitor, context) {\n        return visitor.visitBoundText(this, context);\n    };\n    return BoundTextAst;\n}());\n/**\n * A plain attribute on an element.\n */\nvar AttrAst = /** @class */ (function () {\n    function AttrAst(name, value, sourceSpan) {\n        this.name = name;\n        this.value = value;\n        this.sourceSpan = sourceSpan;\n    }\n    AttrAst.prototype.visit = function (visitor, context) { return visitor.visitAttr(this, context); };\n    return AttrAst;\n}());\n/**\n * A binding for an element property (e.g. `[property]=\"expression\"`) or an animation trigger (e.g.\n * `[@trigger]=\"stateExp\"`)\n */\nvar BoundElementPropertyAst = /** @class */ (function () {\n    function BoundElementPropertyAst(name, type, securityContext, value, unit, sourceSpan) {\n        this.name = name;\n        this.type = type;\n        this.securityContext = securityContext;\n        this.value = value;\n        this.unit = unit;\n        this.sourceSpan = sourceSpan;\n        this.isAnimation = this.type === PropertyBindingType.Animation;\n    }\n    BoundElementPropertyAst.prototype.visit = function (visitor, context) {\n        return visitor.visitElementProperty(this, context);\n    };\n    return BoundElementPropertyAst;\n}());\n/**\n * A binding for an element event (e.g. `(event)=\"handler()\"`) or an animation trigger event (e.g.\n * `(@trigger.phase)=\"callback($event)\"`).\n */\nvar BoundEventAst = /** @class */ (function () {\n    function BoundEventAst(name, target, phase, handler, sourceSpan) {\n        this.name = name;\n        this.target = target;\n        this.phase = phase;\n        this.handler = handler;\n        this.sourceSpan = sourceSpan;\n        this.fullName = BoundEventAst.calcFullName(this.name, this.target, this.phase);\n        this.isAnimation = !!this.phase;\n    }\n    BoundEventAst.calcFullName = function (name, target, phase) {\n        if (target) {\n            return target + \":\" + name;\n        }\n        else if (phase) {\n            return \"@\" + name + \".\" + phase;\n        }\n        else {\n            return name;\n        }\n    };\n    BoundEventAst.prototype.visit = function (visitor, context) {\n        return visitor.visitEvent(this, context);\n    };\n    return BoundEventAst;\n}());\n/**\n * A reference declaration on an element (e.g. `let someName=\"expression\"`).\n */\nvar ReferenceAst = /** @class */ (function () {\n    function ReferenceAst(name, value, originalValue, sourceSpan) {\n        this.name = name;\n        this.value = value;\n        this.originalValue = originalValue;\n        this.sourceSpan = sourceSpan;\n    }\n    ReferenceAst.prototype.visit = function (visitor, context) {\n        return visitor.visitReference(this, context);\n    };\n    return ReferenceAst;\n}());\n/**\n * A variable declaration on a <ng-template> (e.g. `var-someName=\"someLocalName\"`).\n */\nvar VariableAst = /** @class */ (function () {\n    function VariableAst(name, value, sourceSpan) {\n        this.name = name;\n        this.value = value;\n        this.sourceSpan = sourceSpan;\n    }\n    VariableAst.prototype.visit = function (visitor, context) {\n        return visitor.visitVariable(this, context);\n    };\n    return VariableAst;\n}());\n/**\n * An element declaration in a template.\n */\nvar ElementAst = /** @class */ (function () {\n    function ElementAst(name, attrs, inputs, outputs, references, directives, providers, hasViewContainer, queryMatches, children, ngContentIndex, sourceSpan, endSourceSpan) {\n        this.name = name;\n        this.attrs = attrs;\n        this.inputs = inputs;\n        this.outputs = outputs;\n        this.references = references;\n        this.directives = directives;\n        this.providers = providers;\n        this.hasViewContainer = hasViewContainer;\n        this.queryMatches = queryMatches;\n        this.children = children;\n        this.ngContentIndex = ngContentIndex;\n        this.sourceSpan = sourceSpan;\n        this.endSourceSpan = endSourceSpan;\n    }\n    ElementAst.prototype.visit = function (visitor, context) {\n        return visitor.visitElement(this, context);\n    };\n    return ElementAst;\n}());\n/**\n * A `<ng-template>` element included in an Angular template.\n */\nvar EmbeddedTemplateAst = /** @class */ (function () {\n    function EmbeddedTemplateAst(attrs, outputs, references, variables, directives, providers, hasViewContainer, queryMatches, children, ngContentIndex, sourceSpan) {\n        this.attrs = attrs;\n        this.outputs = outputs;\n        this.references = references;\n        this.variables = variables;\n        this.directives = directives;\n        this.providers = providers;\n        this.hasViewContainer = hasViewContainer;\n        this.queryMatches = queryMatches;\n        this.children = children;\n        this.ngContentIndex = ngContentIndex;\n        this.sourceSpan = sourceSpan;\n    }\n    EmbeddedTemplateAst.prototype.visit = function (visitor, context) {\n        return visitor.visitEmbeddedTemplate(this, context);\n    };\n    return EmbeddedTemplateAst;\n}());\n/**\n * A directive property with a bound value (e.g. `*ngIf=\"condition\").\n */\nvar BoundDirectivePropertyAst = /** @class */ (function () {\n    function BoundDirectivePropertyAst(directiveName, templateName, value, sourceSpan) {\n        this.directiveName = directiveName;\n        this.templateName = templateName;\n        this.value = value;\n        this.sourceSpan = sourceSpan;\n    }\n    BoundDirectivePropertyAst.prototype.visit = function (visitor, context) {\n        return visitor.visitDirectiveProperty(this, context);\n    };\n    return BoundDirectivePropertyAst;\n}());\n/**\n * A directive declared on an element.\n */\nvar DirectiveAst = /** @class */ (function () {\n    function DirectiveAst(directive, inputs, hostProperties, hostEvents, contentQueryStartId, sourceSpan) {\n        this.directive = directive;\n        this.inputs = inputs;\n        this.hostProperties = hostProperties;\n        this.hostEvents = hostEvents;\n        this.contentQueryStartId = contentQueryStartId;\n        this.sourceSpan = sourceSpan;\n    }\n    DirectiveAst.prototype.visit = function (visitor, context) {\n        return visitor.visitDirective(this, context);\n    };\n    return DirectiveAst;\n}());\n/**\n * A provider declared on an element\n */\nvar ProviderAst = /** @class */ (function () {\n    function ProviderAst(token, multiProvider, eager, providers, providerType, lifecycleHooks, sourceSpan, isModule) {\n        this.token = token;\n        this.multiProvider = multiProvider;\n        this.eager = eager;\n        this.providers = providers;\n        this.providerType = providerType;\n        this.lifecycleHooks = lifecycleHooks;\n        this.sourceSpan = sourceSpan;\n        this.isModule = isModule;\n    }\n    ProviderAst.prototype.visit = function (visitor, context) {\n        // No visit method in the visitor for now...\n        return null;\n    };\n    return ProviderAst;\n}());\nvar ProviderAstType;\n(function (ProviderAstType) {\n    ProviderAstType[ProviderAstType[\"PublicService\"] = 0] = \"PublicService\";\n    ProviderAstType[ProviderAstType[\"PrivateService\"] = 1] = \"PrivateService\";\n    ProviderAstType[ProviderAstType[\"Component\"] = 2] = \"Component\";\n    ProviderAstType[ProviderAstType[\"Directive\"] = 3] = \"Directive\";\n    ProviderAstType[ProviderAstType[\"Builtin\"] = 4] = \"Builtin\";\n})(ProviderAstType || (ProviderAstType = {}));\n/**\n * Position where content is to be projected (instance of `<ng-content>` in a template).\n */\nvar NgContentAst = /** @class */ (function () {\n    function NgContentAst(index, ngContentIndex, sourceSpan) {\n        this.index = index;\n        this.ngContentIndex = ngContentIndex;\n        this.sourceSpan = sourceSpan;\n    }\n    NgContentAst.prototype.visit = function (visitor, context) {\n        return visitor.visitNgContent(this, context);\n    };\n    return NgContentAst;\n}());\n/**\n * Enumeration of types of property bindings.\n */\nvar PropertyBindingType;\n(function (PropertyBindingType) {\n    /**\n     * A normal binding to a property (e.g. `[property]=\"expression\"`).\n     */\n    PropertyBindingType[PropertyBindingType[\"Property\"] = 0] = \"Property\";\n    /**\n     * A binding to an element attribute (e.g. `[attr.name]=\"expression\"`).\n     */\n    PropertyBindingType[PropertyBindingType[\"Attribute\"] = 1] = \"Attribute\";\n    /**\n     * A binding to a CSS class (e.g. `[class.name]=\"condition\"`).\n     */\n    PropertyBindingType[PropertyBindingType[\"Class\"] = 2] = \"Class\";\n    /**\n     * A binding to a style rule (e.g. `[style.rule]=\"expression\"`).\n     */\n    PropertyBindingType[PropertyBindingType[\"Style\"] = 3] = \"Style\";\n    /**\n     * A binding to an animation reference (e.g. `[animate.key]=\"expression\"`).\n     */\n    PropertyBindingType[PropertyBindingType[\"Animation\"] = 4] = \"Animation\";\n})(PropertyBindingType || (PropertyBindingType = {}));\n/**\n * A visitor that accepts each node but doesn't do anything. It is intended to be used\n * as the base class for a visitor that is only interested in a subset of the node types.\n */\nvar NullTemplateVisitor = /** @class */ (function () {\n    function NullTemplateVisitor() {\n    }\n    NullTemplateVisitor.prototype.visitNgContent = function (ast, context) { };\n    NullTemplateVisitor.prototype.visitEmbeddedTemplate = function (ast, context) { };\n    NullTemplateVisitor.prototype.visitElement = function (ast, context) { };\n    NullTemplateVisitor.prototype.visitReference = function (ast, context) { };\n    NullTemplateVisitor.prototype.visitVariable = function (ast, context) { };\n    NullTemplateVisitor.prototype.visitEvent = function (ast, context) { };\n    NullTemplateVisitor.prototype.visitElementProperty = function (ast, context) { };\n    NullTemplateVisitor.prototype.visitAttr = function (ast, context) { };\n    NullTemplateVisitor.prototype.visitBoundText = function (ast, context) { };\n    NullTemplateVisitor.prototype.visitText = function (ast, context) { };\n    NullTemplateVisitor.prototype.visitDirective = function (ast, context) { };\n    NullTemplateVisitor.prototype.visitDirectiveProperty = function (ast, context) { };\n    return NullTemplateVisitor;\n}());\n/**\n * Base class that can be used to build a visitor that visits each node\n * in an template ast recursively.\n */\nvar RecursiveTemplateAstVisitor = /** @class */ (function (_super) {\n    __extends(RecursiveTemplateAstVisitor, _super);\n    function RecursiveTemplateAstVisitor() {\n        return _super.call(this) || this;\n    }\n    // Nodes with children\n    RecursiveTemplateAstVisitor.prototype.visitEmbeddedTemplate = function (ast, context) {\n        return this.visitChildren(context, function (visit) {\n            visit(ast.attrs);\n            visit(ast.references);\n            visit(ast.variables);\n            visit(ast.directives);\n            visit(ast.providers);\n            visit(ast.children);\n        });\n    };\n    RecursiveTemplateAstVisitor.prototype.visitElement = function (ast, context) {\n        return this.visitChildren(context, function (visit) {\n            visit(ast.attrs);\n            visit(ast.inputs);\n            visit(ast.outputs);\n            visit(ast.references);\n            visit(ast.directives);\n            visit(ast.providers);\n            visit(ast.children);\n        });\n    };\n    RecursiveTemplateAstVisitor.prototype.visitDirective = function (ast, context) {\n        return this.visitChildren(context, function (visit) {\n            visit(ast.inputs);\n            visit(ast.hostProperties);\n            visit(ast.hostEvents);\n        });\n    };\n    RecursiveTemplateAstVisitor.prototype.visitChildren = function (context, cb) {\n        var results = [];\n        var t = this;\n        function visit(children) {\n            if (children && children.length)\n                results.push(templateVisitAll(t, children, context));\n        }\n        cb(visit);\n        return [].concat.apply([], results);\n    };\n    return RecursiveTemplateAstVisitor;\n}(NullTemplateVisitor));\n/**\n * Visit every node in a list of {@link TemplateAst}s with the given {@link TemplateAstVisitor}.\n */\nfunction templateVisitAll(visitor, asts, context) {\n    if (context === void 0) { context = null; }\n    var result = [];\n    var visit = visitor.visit ?\n        function (ast) { return visitor.visit(ast, context) || ast.visit(visitor, context); } :\n        function (ast) { return ast.visit(visitor, context); };\n    asts.forEach(function (ast) {\n        var astResult = visit(ast);\n        if (astResult) {\n            result.push(astResult);\n        }\n    });\n    return result;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar CompilerConfig = /** @class */ (function () {\n    function CompilerConfig(_a) {\n        var _b = _a === void 0 ? {} : _a, _c = _b.defaultEncapsulation, defaultEncapsulation = _c === void 0 ? ViewEncapsulation.Emulated : _c, _d = _b.useJit, useJit = _d === void 0 ? true : _d, _e = _b.jitDevMode, jitDevMode = _e === void 0 ? false : _e, _f = _b.missingTranslation, missingTranslation = _f === void 0 ? null : _f, preserveWhitespaces = _b.preserveWhitespaces, strictInjectionParameters = _b.strictInjectionParameters;\n        this.defaultEncapsulation = defaultEncapsulation;\n        this.useJit = !!useJit;\n        this.jitDevMode = !!jitDevMode;\n        this.missingTranslation = missingTranslation;\n        this.preserveWhitespaces = preserveWhitespacesDefault(noUndefined(preserveWhitespaces));\n        this.strictInjectionParameters = strictInjectionParameters === true;\n    }\n    return CompilerConfig;\n}());\nfunction preserveWhitespacesDefault(preserveWhitespacesOption, defaultSetting) {\n    if (defaultSetting === void 0) { defaultSetting = false; }\n    return preserveWhitespacesOption === null ? defaultSetting : preserveWhitespacesOption;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * A token representing the a reference to a static type.\n *\n * This token is unique for a filePath and name and can be used as a hash table key.\n */\nvar StaticSymbol = /** @class */ (function () {\n    function StaticSymbol(filePath, name, members) {\n        this.filePath = filePath;\n        this.name = name;\n        this.members = members;\n    }\n    StaticSymbol.prototype.assertNoMembers = function () {\n        if (this.members.length) {\n            throw new Error(\"Illegal state: symbol without members expected, but got \" + JSON.stringify(this) + \".\");\n        }\n    };\n    return StaticSymbol;\n}());\n/**\n * A cache of static symbol used by the StaticReflector to return the same symbol for the\n * same symbol values.\n */\nvar StaticSymbolCache = /** @class */ (function () {\n    function StaticSymbolCache() {\n        this.cache = new Map();\n    }\n    StaticSymbolCache.prototype.get = function (declarationFile, name, members) {\n        members = members || [];\n        var memberSuffix = members.length ? \".\" + members.join('.') : '';\n        var key = \"\\\"\" + declarationFile + \"\\\".\" + name + memberSuffix;\n        var result = this.cache.get(key);\n        if (!result) {\n            result = new StaticSymbol(declarationFile, name, members);\n            this.cache.set(key, result);\n        }\n        return result;\n    };\n    return StaticSymbolCache;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n// group 0: \"[prop] or (event) or @trigger\"\n// group 1: \"prop\" from \"[prop]\"\n// group 2: \"event\" from \"(event)\"\n// group 3: \"@trigger\" from \"@trigger\"\nvar HOST_REG_EXP = /^(?:(?:\\[([^\\]]+)\\])|(?:\\(([^\\)]+)\\)))|(\\@[-\\w]+)$/;\nfunction sanitizeIdentifier(name) {\n    return name.replace(/\\W/g, '_');\n}\nvar _anonymousTypeIndex = 0;\nfunction identifierName(compileIdentifier) {\n    if (!compileIdentifier || !compileIdentifier.reference) {\n        return null;\n    }\n    var ref = compileIdentifier.reference;\n    if (ref instanceof StaticSymbol) {\n        return ref.name;\n    }\n    if (ref['__anonymousType']) {\n        return ref['__anonymousType'];\n    }\n    var identifier = stringify(ref);\n    if (identifier.indexOf('(') >= 0) {\n        // case: anonymous functions!\n        identifier = \"anonymous_\" + _anonymousTypeIndex++;\n        ref['__anonymousType'] = identifier;\n    }\n    else {\n        identifier = sanitizeIdentifier(identifier);\n    }\n    return identifier;\n}\n\nfunction viewClassName(compType, embeddedTemplateIndex) {\n    return \"View_\" + identifierName({ reference: compType }) + \"_\" + embeddedTemplateIndex;\n}\nfunction rendererTypeName(compType) {\n    return \"RenderType_\" + identifierName({ reference: compType });\n}\nfunction hostViewClassName(compType) {\n    return \"HostView_\" + identifierName({ reference: compType });\n}\nfunction componentFactoryName(compType) {\n    return identifierName({ reference: compType }) + \"NgFactory\";\n}\nvar CompileSummaryKind;\n(function (CompileSummaryKind) {\n    CompileSummaryKind[CompileSummaryKind[\"Pipe\"] = 0] = \"Pipe\";\n    CompileSummaryKind[CompileSummaryKind[\"Directive\"] = 1] = \"Directive\";\n    CompileSummaryKind[CompileSummaryKind[\"NgModule\"] = 2] = \"NgModule\";\n    CompileSummaryKind[CompileSummaryKind[\"Injectable\"] = 3] = \"Injectable\";\n})(CompileSummaryKind || (CompileSummaryKind = {}));\nfunction tokenName(token) {\n    return token.value != null ? sanitizeIdentifier(token.value) : identifierName(token.identifier);\n}\nfunction tokenReference(token) {\n    if (token.identifier != null) {\n        return token.identifier.reference;\n    }\n    else {\n        return token.value;\n    }\n}\n/**\n * Metadata about a stylesheet\n */\nvar CompileStylesheetMetadata = /** @class */ (function () {\n    function CompileStylesheetMetadata(_a) {\n        var _b = _a === void 0 ? {} : _a, moduleUrl = _b.moduleUrl, styles = _b.styles, styleUrls = _b.styleUrls;\n        this.moduleUrl = moduleUrl || null;\n        this.styles = _normalizeArray(styles);\n        this.styleUrls = _normalizeArray(styleUrls);\n    }\n    return CompileStylesheetMetadata;\n}());\n/**\n * Metadata regarding compilation of a template.\n */\nvar CompileTemplateMetadata = /** @class */ (function () {\n    function CompileTemplateMetadata(_a) {\n        var encapsulation = _a.encapsulation, template = _a.template, templateUrl = _a.templateUrl, htmlAst = _a.htmlAst, styles = _a.styles, styleUrls = _a.styleUrls, externalStylesheets = _a.externalStylesheets, animations = _a.animations, ngContentSelectors = _a.ngContentSelectors, interpolation = _a.interpolation, isInline = _a.isInline, preserveWhitespaces = _a.preserveWhitespaces;\n        this.encapsulation = encapsulation;\n        this.template = template;\n        this.templateUrl = templateUrl;\n        this.htmlAst = htmlAst;\n        this.styles = _normalizeArray(styles);\n        this.styleUrls = _normalizeArray(styleUrls);\n        this.externalStylesheets = _normalizeArray(externalStylesheets);\n        this.animations = animations ? flatten(animations) : [];\n        this.ngContentSelectors = ngContentSelectors || [];\n        if (interpolation && interpolation.length != 2) {\n            throw new Error(\"'interpolation' should have a start and an end symbol.\");\n        }\n        this.interpolation = interpolation;\n        this.isInline = isInline;\n        this.preserveWhitespaces = preserveWhitespaces;\n    }\n    CompileTemplateMetadata.prototype.toSummary = function () {\n        return {\n            ngContentSelectors: this.ngContentSelectors,\n            encapsulation: this.encapsulation,\n        };\n    };\n    return CompileTemplateMetadata;\n}());\n/**\n * Metadata regarding compilation of a directive.\n */\nvar CompileDirectiveMetadata = /** @class */ (function () {\n    function CompileDirectiveMetadata(_a) {\n        var isHost = _a.isHost, type = _a.type, isComponent = _a.isComponent, selector = _a.selector, exportAs = _a.exportAs, changeDetection = _a.changeDetection, inputs = _a.inputs, outputs = _a.outputs, hostListeners = _a.hostListeners, hostProperties = _a.hostProperties, hostAttributes = _a.hostAttributes, providers = _a.providers, viewProviders = _a.viewProviders, queries = _a.queries, guards = _a.guards, viewQueries = _a.viewQueries, entryComponents = _a.entryComponents, template = _a.template, componentViewType = _a.componentViewType, rendererType = _a.rendererType, componentFactory = _a.componentFactory;\n        this.isHost = !!isHost;\n        this.type = type;\n        this.isComponent = isComponent;\n        this.selector = selector;\n        this.exportAs = exportAs;\n        this.changeDetection = changeDetection;\n        this.inputs = inputs;\n        this.outputs = outputs;\n        this.hostListeners = hostListeners;\n        this.hostProperties = hostProperties;\n        this.hostAttributes = hostAttributes;\n        this.providers = _normalizeArray(providers);\n        this.viewProviders = _normalizeArray(viewProviders);\n        this.queries = _normalizeArray(queries);\n        this.guards = guards;\n        this.viewQueries = _normalizeArray(viewQueries);\n        this.entryComponents = _normalizeArray(entryComponents);\n        this.template = template;\n        this.componentViewType = componentViewType;\n        this.rendererType = rendererType;\n        this.componentFactory = componentFactory;\n    }\n    CompileDirectiveMetadata.create = function (_a) {\n        var isHost = _a.isHost, type = _a.type, isComponent = _a.isComponent, selector = _a.selector, exportAs = _a.exportAs, changeDetection = _a.changeDetection, inputs = _a.inputs, outputs = _a.outputs, host = _a.host, providers = _a.providers, viewProviders = _a.viewProviders, queries = _a.queries, guards = _a.guards, viewQueries = _a.viewQueries, entryComponents = _a.entryComponents, template = _a.template, componentViewType = _a.componentViewType, rendererType = _a.rendererType, componentFactory = _a.componentFactory;\n        var hostListeners = {};\n        var hostProperties = {};\n        var hostAttributes = {};\n        if (host != null) {\n            Object.keys(host).forEach(function (key) {\n                var value = host[key];\n                var matches = key.match(HOST_REG_EXP);\n                if (matches === null) {\n                    hostAttributes[key] = value;\n                }\n                else if (matches[1] != null) {\n                    hostProperties[matches[1]] = value;\n                }\n                else if (matches[2] != null) {\n                    hostListeners[matches[2]] = value;\n                }\n            });\n        }\n        var inputsMap = {};\n        if (inputs != null) {\n            inputs.forEach(function (bindConfig) {\n                // canonical syntax: `dirProp: elProp`\n                // if there is no `:`, use dirProp = elProp\n                var parts = splitAtColon(bindConfig, [bindConfig, bindConfig]);\n                inputsMap[parts[0]] = parts[1];\n            });\n        }\n        var outputsMap = {};\n        if (outputs != null) {\n            outputs.forEach(function (bindConfig) {\n                // canonical syntax: `dirProp: elProp`\n                // if there is no `:`, use dirProp = elProp\n                var parts = splitAtColon(bindConfig, [bindConfig, bindConfig]);\n                outputsMap[parts[0]] = parts[1];\n            });\n        }\n        return new CompileDirectiveMetadata({\n            isHost: isHost,\n            type: type,\n            isComponent: !!isComponent, selector: selector, exportAs: exportAs, changeDetection: changeDetection,\n            inputs: inputsMap,\n            outputs: outputsMap,\n            hostListeners: hostListeners,\n            hostProperties: hostProperties,\n            hostAttributes: hostAttributes,\n            providers: providers,\n            viewProviders: viewProviders,\n            queries: queries,\n            guards: guards,\n            viewQueries: viewQueries,\n            entryComponents: entryComponents,\n            template: template,\n            componentViewType: componentViewType,\n            rendererType: rendererType,\n            componentFactory: componentFactory,\n        });\n    };\n    CompileDirectiveMetadata.prototype.toSummary = function () {\n        return {\n            summaryKind: CompileSummaryKind.Directive,\n            type: this.type,\n            isComponent: this.isComponent,\n            selector: this.selector,\n            exportAs: this.exportAs,\n            inputs: this.inputs,\n            outputs: this.outputs,\n            hostListeners: this.hostListeners,\n            hostProperties: this.hostProperties,\n            hostAttributes: this.hostAttributes,\n            providers: this.providers,\n            viewProviders: this.viewProviders,\n            queries: this.queries,\n            guards: this.guards,\n            viewQueries: this.viewQueries,\n            entryComponents: this.entryComponents,\n            changeDetection: this.changeDetection,\n            template: this.template && this.template.toSummary(),\n            componentViewType: this.componentViewType,\n            rendererType: this.rendererType,\n            componentFactory: this.componentFactory\n        };\n    };\n    return CompileDirectiveMetadata;\n}());\nvar CompilePipeMetadata = /** @class */ (function () {\n    function CompilePipeMetadata(_a) {\n        var type = _a.type, name = _a.name, pure = _a.pure;\n        this.type = type;\n        this.name = name;\n        this.pure = !!pure;\n    }\n    CompilePipeMetadata.prototype.toSummary = function () {\n        return {\n            summaryKind: CompileSummaryKind.Pipe,\n            type: this.type,\n            name: this.name,\n            pure: this.pure\n        };\n    };\n    return CompilePipeMetadata;\n}());\n/**\n * Metadata regarding compilation of a module.\n */\nvar CompileNgModuleMetadata = /** @class */ (function () {\n    function CompileNgModuleMetadata(_a) {\n        var type = _a.type, providers = _a.providers, declaredDirectives = _a.declaredDirectives, exportedDirectives = _a.exportedDirectives, declaredPipes = _a.declaredPipes, exportedPipes = _a.exportedPipes, entryComponents = _a.entryComponents, bootstrapComponents = _a.bootstrapComponents, importedModules = _a.importedModules, exportedModules = _a.exportedModules, schemas = _a.schemas, transitiveModule = _a.transitiveModule, id = _a.id;\n        this.type = type || null;\n        this.declaredDirectives = _normalizeArray(declaredDirectives);\n        this.exportedDirectives = _normalizeArray(exportedDirectives);\n        this.declaredPipes = _normalizeArray(declaredPipes);\n        this.exportedPipes = _normalizeArray(exportedPipes);\n        this.providers = _normalizeArray(providers);\n        this.entryComponents = _normalizeArray(entryComponents);\n        this.bootstrapComponents = _normalizeArray(bootstrapComponents);\n        this.importedModules = _normalizeArray(importedModules);\n        this.exportedModules = _normalizeArray(exportedModules);\n        this.schemas = _normalizeArray(schemas);\n        this.id = id || null;\n        this.transitiveModule = transitiveModule || null;\n    }\n    CompileNgModuleMetadata.prototype.toSummary = function () {\n        var module = this.transitiveModule;\n        return {\n            summaryKind: CompileSummaryKind.NgModule,\n            type: this.type,\n            entryComponents: module.entryComponents,\n            providers: module.providers,\n            modules: module.modules,\n            exportedDirectives: module.exportedDirectives,\n            exportedPipes: module.exportedPipes\n        };\n    };\n    return CompileNgModuleMetadata;\n}());\nvar TransitiveCompileNgModuleMetadata = /** @class */ (function () {\n    function TransitiveCompileNgModuleMetadata() {\n        this.directivesSet = new Set();\n        this.directives = [];\n        this.exportedDirectivesSet = new Set();\n        this.exportedDirectives = [];\n        this.pipesSet = new Set();\n        this.pipes = [];\n        this.exportedPipesSet = new Set();\n        this.exportedPipes = [];\n        this.modulesSet = new Set();\n        this.modules = [];\n        this.entryComponentsSet = new Set();\n        this.entryComponents = [];\n        this.providers = [];\n    }\n    TransitiveCompileNgModuleMetadata.prototype.addProvider = function (provider, module) {\n        this.providers.push({ provider: provider, module: module });\n    };\n    TransitiveCompileNgModuleMetadata.prototype.addDirective = function (id) {\n        if (!this.directivesSet.has(id.reference)) {\n            this.directivesSet.add(id.reference);\n            this.directives.push(id);\n        }\n    };\n    TransitiveCompileNgModuleMetadata.prototype.addExportedDirective = function (id) {\n        if (!this.exportedDirectivesSet.has(id.reference)) {\n            this.exportedDirectivesSet.add(id.reference);\n            this.exportedDirectives.push(id);\n        }\n    };\n    TransitiveCompileNgModuleMetadata.prototype.addPipe = function (id) {\n        if (!this.pipesSet.has(id.reference)) {\n            this.pipesSet.add(id.reference);\n            this.pipes.push(id);\n        }\n    };\n    TransitiveCompileNgModuleMetadata.prototype.addExportedPipe = function (id) {\n        if (!this.exportedPipesSet.has(id.reference)) {\n            this.exportedPipesSet.add(id.reference);\n            this.exportedPipes.push(id);\n        }\n    };\n    TransitiveCompileNgModuleMetadata.prototype.addModule = function (id) {\n        if (!this.modulesSet.has(id.reference)) {\n            this.modulesSet.add(id.reference);\n            this.modules.push(id);\n        }\n    };\n    TransitiveCompileNgModuleMetadata.prototype.addEntryComponent = function (ec) {\n        if (!this.entryComponentsSet.has(ec.componentType)) {\n            this.entryComponentsSet.add(ec.componentType);\n            this.entryComponents.push(ec);\n        }\n    };\n    return TransitiveCompileNgModuleMetadata;\n}());\nfunction _normalizeArray(obj) {\n    return obj || [];\n}\nvar ProviderMeta = /** @class */ (function () {\n    function ProviderMeta(token, _a) {\n        var useClass = _a.useClass, useValue = _a.useValue, useExisting = _a.useExisting, useFactory = _a.useFactory, deps = _a.deps, multi = _a.multi;\n        this.token = token;\n        this.useClass = useClass || null;\n        this.useValue = useValue;\n        this.useExisting = useExisting;\n        this.useFactory = useFactory || null;\n        this.dependencies = deps || null;\n        this.multi = !!multi;\n    }\n    return ProviderMeta;\n}());\nfunction flatten(list) {\n    return list.reduce(function (flat, item) {\n        var flatItem = Array.isArray(item) ? flatten(item) : item;\n        return flat.concat(flatItem);\n    }, []);\n}\nfunction jitSourceUrl(url) {\n    // Note: We need 3 \"/\" so that ng shows up as a separate domain\n    // in the chrome dev tools.\n    return url.replace(/(\\w+:\\/\\/[\\w:-]+)?(\\/+)?/, 'ng:///');\n}\nfunction templateSourceUrl(ngModuleType, compMeta, templateMeta) {\n    var url;\n    if (templateMeta.isInline) {\n        if (compMeta.type.reference instanceof StaticSymbol) {\n            // Note: a .ts file might contain multiple components with inline templates,\n            // so we need to give them unique urls, as these will be used for sourcemaps.\n            url = compMeta.type.reference.filePath + \".\" + compMeta.type.reference.name + \".html\";\n        }\n        else {\n            url = identifierName(ngModuleType) + \"/\" + identifierName(compMeta.type) + \".html\";\n        }\n    }\n    else {\n        url = templateMeta.templateUrl;\n    }\n    return compMeta.type.reference instanceof StaticSymbol ? url : jitSourceUrl(url);\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * A path is an ordered set of elements. Typically a path is to  a\n * particular offset in a source file. The head of the list is the top\n * most node. The tail is the node that contains the offset directly.\n *\n * For example, the expression `a + b + c` might have an ast that looks\n * like:\n *     +\n *    / \\\n *   a   +\n *      / \\\n *     b   c\n *\n * The path to the node at offset 9 would be `['+' at 1-10, '+' at 7-10,\n * 'c' at 9-10]` and the path the node at offset 1 would be\n * `['+' at 1-10, 'a' at 1-2]`.\n */\nvar AstPath = /** @class */ (function () {\n    function AstPath(path$$1, position) {\n        if (position === void 0) { position = -1; }\n        this.path = path$$1;\n        this.position = position;\n    }\n    Object.defineProperty(AstPath.prototype, \"empty\", {\n        get: function () { return !this.path || !this.path.length; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(AstPath.prototype, \"head\", {\n        get: function () { return this.path[0]; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(AstPath.prototype, \"tail\", {\n        get: function () { return this.path[this.path.length - 1]; },\n        enumerable: true,\n        configurable: true\n    });\n    AstPath.prototype.parentOf = function (node) {\n        return node && this.path[this.path.indexOf(node) - 1];\n    };\n    AstPath.prototype.childOf = function (node) { return this.path[this.path.indexOf(node) + 1]; };\n    AstPath.prototype.first = function (ctor) {\n        for (var i = this.path.length - 1; i >= 0; i--) {\n            var item = this.path[i];\n            if (item instanceof ctor)\n                return item;\n        }\n    };\n    AstPath.prototype.push = function (node) { this.path.push(node); };\n    AstPath.prototype.pop = function () { return this.path.pop(); };\n    return AstPath;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar Text = /** @class */ (function () {\n    function Text(value, sourceSpan) {\n        this.value = value;\n        this.sourceSpan = sourceSpan;\n    }\n    Text.prototype.visit = function (visitor, context) { return visitor.visitText(this, context); };\n    return Text;\n}());\nvar Expansion = /** @class */ (function () {\n    function Expansion(switchValue, type, cases, sourceSpan, switchValueSourceSpan) {\n        this.switchValue = switchValue;\n        this.type = type;\n        this.cases = cases;\n        this.sourceSpan = sourceSpan;\n        this.switchValueSourceSpan = switchValueSourceSpan;\n    }\n    Expansion.prototype.visit = function (visitor, context) { return visitor.visitExpansion(this, context); };\n    return Expansion;\n}());\nvar ExpansionCase = /** @class */ (function () {\n    function ExpansionCase(value, expression, sourceSpan, valueSourceSpan, expSourceSpan) {\n        this.value = value;\n        this.expression = expression;\n        this.sourceSpan = sourceSpan;\n        this.valueSourceSpan = valueSourceSpan;\n        this.expSourceSpan = expSourceSpan;\n    }\n    ExpansionCase.prototype.visit = function (visitor, context) { return visitor.visitExpansionCase(this, context); };\n    return ExpansionCase;\n}());\nvar Attribute = /** @class */ (function () {\n    function Attribute(name, value, sourceSpan, valueSpan) {\n        this.name = name;\n        this.value = value;\n        this.sourceSpan = sourceSpan;\n        this.valueSpan = valueSpan;\n    }\n    Attribute.prototype.visit = function (visitor, context) { return visitor.visitAttribute(this, context); };\n    return Attribute;\n}());\nvar Element = /** @class */ (function () {\n    function Element(name, attrs, children, sourceSpan, startSourceSpan, endSourceSpan) {\n        if (startSourceSpan === void 0) { startSourceSpan = null; }\n        if (endSourceSpan === void 0) { endSourceSpan = null; }\n        this.name = name;\n        this.attrs = attrs;\n        this.children = children;\n        this.sourceSpan = sourceSpan;\n        this.startSourceSpan = startSourceSpan;\n        this.endSourceSpan = endSourceSpan;\n    }\n    Element.prototype.visit = function (visitor, context) { return visitor.visitElement(this, context); };\n    return Element;\n}());\nvar Comment = /** @class */ (function () {\n    function Comment(value, sourceSpan) {\n        this.value = value;\n        this.sourceSpan = sourceSpan;\n    }\n    Comment.prototype.visit = function (visitor, context) { return visitor.visitComment(this, context); };\n    return Comment;\n}());\nfunction visitAll(visitor, nodes, context) {\n    if (context === void 0) { context = null; }\n    var result = [];\n    var visit = visitor.visit ?\n        function (ast) { return visitor.visit(ast, context) || ast.visit(visitor, context); } :\n        function (ast) { return ast.visit(visitor, context); };\n    nodes.forEach(function (ast) {\n        var astResult = visit(ast);\n        if (astResult) {\n            result.push(astResult);\n        }\n    });\n    return result;\n}\nvar RecursiveVisitor = /** @class */ (function () {\n    function RecursiveVisitor() {\n    }\n    RecursiveVisitor.prototype.visitElement = function (ast, context) {\n        this.visitChildren(context, function (visit) {\n            visit(ast.attrs);\n            visit(ast.children);\n        });\n    };\n    RecursiveVisitor.prototype.visitAttribute = function (ast, context) { };\n    RecursiveVisitor.prototype.visitText = function (ast, context) { };\n    RecursiveVisitor.prototype.visitComment = function (ast, context) { };\n    RecursiveVisitor.prototype.visitExpansion = function (ast, context) {\n        return this.visitChildren(context, function (visit) { visit(ast.cases); });\n    };\n    RecursiveVisitor.prototype.visitExpansionCase = function (ast, context) { };\n    RecursiveVisitor.prototype.visitChildren = function (context, cb) {\n        var results = [];\n        var t = this;\n        function visit(children) {\n            if (children)\n                results.push(visitAll(t, children, context));\n        }\n        cb(visit);\n        return [].concat.apply([], results);\n    };\n    return RecursiveVisitor;\n}());\nfunction spanOf(ast) {\n    var start = ast.sourceSpan.start.offset;\n    var end = ast.sourceSpan.end.offset;\n    if (ast instanceof Element) {\n        if (ast.endSourceSpan) {\n            end = ast.endSourceSpan.end.offset;\n        }\n        else if (ast.children && ast.children.length) {\n            end = spanOf(ast.children[ast.children.length - 1]).end;\n        }\n    }\n    return { start: start, end: end };\n}\nfunction findNode(nodes, position) {\n    var path$$1 = [];\n    var visitor = new /** @class */ (function (_super) {\n        __extends(class_1, _super);\n        function class_1() {\n            return _super !== null && _super.apply(this, arguments) || this;\n        }\n        class_1.prototype.visit = function (ast, context) {\n            var span = spanOf(ast);\n            if (span.start <= position && position < span.end) {\n                path$$1.push(ast);\n            }\n            else {\n                // Returning a value here will result in the children being skipped.\n                return true;\n            }\n        };\n        return class_1;\n    }(RecursiveVisitor));\n    visitAll(visitor, nodes);\n    return new AstPath(path$$1, position);\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nfunction assertArrayOfStrings(identifier, value) {\n    if (value == null) {\n        return;\n    }\n    if (!Array.isArray(value)) {\n        throw new Error(\"Expected '\" + identifier + \"' to be an array of strings.\");\n    }\n    for (var i = 0; i < value.length; i += 1) {\n        if (typeof value[i] !== 'string') {\n            throw new Error(\"Expected '\" + identifier + \"' to be an array of strings.\");\n        }\n    }\n}\nvar INTERPOLATION_BLACKLIST_REGEXPS = [\n    /^\\s*$/,\n    /[<>]/,\n    /^[{}]$/,\n    /&(#|[a-z])/i,\n    /^\\/\\//,\n];\nfunction assertInterpolationSymbols(identifier, value) {\n    if (value != null && !(Array.isArray(value) && value.length == 2)) {\n        throw new Error(\"Expected '\" + identifier + \"' to be an array, [start, end].\");\n    }\n    else if (value != null) {\n        var start_1 = value[0];\n        var end_1 = value[1];\n        // black list checking\n        INTERPOLATION_BLACKLIST_REGEXPS.forEach(function (regexp) {\n            if (regexp.test(start_1) || regexp.test(end_1)) {\n                throw new Error(\"['\" + start_1 + \"', '\" + end_1 + \"'] contains unusable interpolation symbol.\");\n            }\n        });\n    }\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar InterpolationConfig = /** @class */ (function () {\n    function InterpolationConfig(start, end) {\n        this.start = start;\n        this.end = end;\n    }\n    InterpolationConfig.fromArray = function (markers) {\n        if (!markers) {\n            return DEFAULT_INTERPOLATION_CONFIG;\n        }\n        assertInterpolationSymbols('interpolation', markers);\n        return new InterpolationConfig(markers[0], markers[1]);\n    };\n    return InterpolationConfig;\n}());\nvar DEFAULT_INTERPOLATION_CONFIG = new InterpolationConfig('{{', '}}');\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar StyleWithImports = /** @class */ (function () {\n    function StyleWithImports(style, styleUrls) {\n        this.style = style;\n        this.styleUrls = styleUrls;\n    }\n    return StyleWithImports;\n}());\nfunction isStyleUrlResolvable(url) {\n    if (url == null || url.length === 0 || url[0] == '/')\n        return false;\n    var schemeMatch = url.match(URL_WITH_SCHEMA_REGEXP);\n    return schemeMatch === null || schemeMatch[1] == 'package' || schemeMatch[1] == 'asset';\n}\n/**\n * Rewrites stylesheets by resolving and removing the @import urls that\n * are either relative or don't have a `package:` scheme\n */\nfunction extractStyleUrls(resolver, baseUrl, cssText) {\n    var foundUrls = [];\n    var modifiedCssText = cssText.replace(CSS_STRIPPABLE_COMMENT_REGEXP, '')\n        .replace(CSS_IMPORT_REGEXP, function () {\n        var m = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            m[_i] = arguments[_i];\n        }\n        var url = m[1] || m[2];\n        if (!isStyleUrlResolvable(url)) {\n            // Do not attempt to resolve non-package absolute URLs with URI\n            // scheme\n            return m[0];\n        }\n        foundUrls.push(resolver.resolve(baseUrl, url));\n        return '';\n    });\n    return new StyleWithImports(modifiedCssText, foundUrls);\n}\nvar CSS_IMPORT_REGEXP = /@import\\s+(?:url\\()?\\s*(?:(?:['\"]([^'\"]*))|([^;\\)\\s]*))[^;]*;?/g;\nvar CSS_STRIPPABLE_COMMENT_REGEXP = /\\/\\*(?!#\\s*(?:sourceURL|sourceMappingURL)=)[\\s\\S]+?\\*\\//g;\nvar URL_WITH_SCHEMA_REGEXP = /^([^:/?#]+):/;\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar TagContentType;\n(function (TagContentType) {\n    TagContentType[TagContentType[\"RAW_TEXT\"] = 0] = \"RAW_TEXT\";\n    TagContentType[TagContentType[\"ESCAPABLE_RAW_TEXT\"] = 1] = \"ESCAPABLE_RAW_TEXT\";\n    TagContentType[TagContentType[\"PARSABLE_DATA\"] = 2] = \"PARSABLE_DATA\";\n})(TagContentType || (TagContentType = {}));\nfunction splitNsName(elementName) {\n    if (elementName[0] != ':') {\n        return [null, elementName];\n    }\n    var colonIndex = elementName.indexOf(':', 1);\n    if (colonIndex == -1) {\n        throw new Error(\"Unsupported format \\\"\" + elementName + \"\\\" expecting \\\":namespace:name\\\"\");\n    }\n    return [elementName.slice(1, colonIndex), elementName.slice(colonIndex + 1)];\n}\n// `<ng-container>` tags work the same regardless the namespace\nfunction isNgContainer(tagName) {\n    return splitNsName(tagName)[1] === 'ng-container';\n}\n// `<ng-content>` tags work the same regardless the namespace\nfunction isNgContent(tagName) {\n    return splitNsName(tagName)[1] === 'ng-content';\n}\n// `<ng-template>` tags work the same regardless the namespace\nfunction isNgTemplate(tagName) {\n    return splitNsName(tagName)[1] === 'ng-template';\n}\nfunction getNsPrefix(fullName) {\n    return fullName === null ? null : splitNsName(fullName)[0];\n}\nfunction mergeNsAndName(prefix, localName) {\n    return prefix ? \":\" + prefix + \":\" + localName : localName;\n}\n// see http://www.w3.org/TR/html51/syntax.html#named-character-references\n// see https://html.spec.whatwg.org/multipage/entities.json\n// This list is not exhaustive to keep the compiler footprint low.\n// The `&#123;` / `&#x1ab;` syntax should be used when the named character reference does not\n// exist.\nvar NAMED_ENTITIES = {\n    'Aacute': '\\u00C1',\n    'aacute': '\\u00E1',\n    'Acirc': '\\u00C2',\n    'acirc': '\\u00E2',\n    'acute': '\\u00B4',\n    'AElig': '\\u00C6',\n    'aelig': '\\u00E6',\n    'Agrave': '\\u00C0',\n    'agrave': '\\u00E0',\n    'alefsym': '\\u2135',\n    'Alpha': '\\u0391',\n    'alpha': '\\u03B1',\n    'amp': '&',\n    'and': '\\u2227',\n    'ang': '\\u2220',\n    'apos': '\\u0027',\n    'Aring': '\\u00C5',\n    'aring': '\\u00E5',\n    'asymp': '\\u2248',\n    'Atilde': '\\u00C3',\n    'atilde': '\\u00E3',\n    'Auml': '\\u00C4',\n    'auml': '\\u00E4',\n    'bdquo': '\\u201E',\n    'Beta': '\\u0392',\n    'beta': '\\u03B2',\n    'brvbar': '\\u00A6',\n    'bull': '\\u2022',\n    'cap': '\\u2229',\n    'Ccedil': '\\u00C7',\n    'ccedil': '\\u00E7',\n    'cedil': '\\u00B8',\n    'cent': '\\u00A2',\n    'Chi': '\\u03A7',\n    'chi': '\\u03C7',\n    'circ': '\\u02C6',\n    'clubs': '\\u2663',\n    'cong': '\\u2245',\n    'copy': '\\u00A9',\n    'crarr': '\\u21B5',\n    'cup': '\\u222A',\n    'curren': '\\u00A4',\n    'dagger': '\\u2020',\n    'Dagger': '\\u2021',\n    'darr': '\\u2193',\n    'dArr': '\\u21D3',\n    'deg': '\\u00B0',\n    'Delta': '\\u0394',\n    'delta': '\\u03B4',\n    'diams': '\\u2666',\n    'divide': '\\u00F7',\n    'Eacute': '\\u00C9',\n    'eacute': '\\u00E9',\n    'Ecirc': '\\u00CA',\n    'ecirc': '\\u00EA',\n    'Egrave': '\\u00C8',\n    'egrave': '\\u00E8',\n    'empty': '\\u2205',\n    'emsp': '\\u2003',\n    'ensp': '\\u2002',\n    'Epsilon': '\\u0395',\n    'epsilon': '\\u03B5',\n    'equiv': '\\u2261',\n    'Eta': '\\u0397',\n    'eta': '\\u03B7',\n    'ETH': '\\u00D0',\n    'eth': '\\u00F0',\n    'Euml': '\\u00CB',\n    'euml': '\\u00EB',\n    'euro': '\\u20AC',\n    'exist': '\\u2203',\n    'fnof': '\\u0192',\n    'forall': '\\u2200',\n    'frac12': '\\u00BD',\n    'frac14': '\\u00BC',\n    'frac34': '\\u00BE',\n    'frasl': '\\u2044',\n    'Gamma': '\\u0393',\n    'gamma': '\\u03B3',\n    'ge': '\\u2265',\n    'gt': '>',\n    'harr': '\\u2194',\n    'hArr': '\\u21D4',\n    'hearts': '\\u2665',\n    'hellip': '\\u2026',\n    'Iacute': '\\u00CD',\n    'iacute': '\\u00ED',\n    'Icirc': '\\u00CE',\n    'icirc': '\\u00EE',\n    'iexcl': '\\u00A1',\n    'Igrave': '\\u00CC',\n    'igrave': '\\u00EC',\n    'image': '\\u2111',\n    'infin': '\\u221E',\n    'int': '\\u222B',\n    'Iota': '\\u0399',\n    'iota': '\\u03B9',\n    'iquest': '\\u00BF',\n    'isin': '\\u2208',\n    'Iuml': '\\u00CF',\n    'iuml': '\\u00EF',\n    'Kappa': '\\u039A',\n    'kappa': '\\u03BA',\n    'Lambda': '\\u039B',\n    'lambda': '\\u03BB',\n    'lang': '\\u27E8',\n    'laquo': '\\u00AB',\n    'larr': '\\u2190',\n    'lArr': '\\u21D0',\n    'lceil': '\\u2308',\n    'ldquo': '\\u201C',\n    'le': '\\u2264',\n    'lfloor': '\\u230A',\n    'lowast': '\\u2217',\n    'loz': '\\u25CA',\n    'lrm': '\\u200E',\n    'lsaquo': '\\u2039',\n    'lsquo': '\\u2018',\n    'lt': '<',\n    'macr': '\\u00AF',\n    'mdash': '\\u2014',\n    'micro': '\\u00B5',\n    'middot': '\\u00B7',\n    'minus': '\\u2212',\n    'Mu': '\\u039C',\n    'mu': '\\u03BC',\n    'nabla': '\\u2207',\n    'nbsp': '\\u00A0',\n    'ndash': '\\u2013',\n    'ne': '\\u2260',\n    'ni': '\\u220B',\n    'not': '\\u00AC',\n    'notin': '\\u2209',\n    'nsub': '\\u2284',\n    'Ntilde': '\\u00D1',\n    'ntilde': '\\u00F1',\n    'Nu': '\\u039D',\n    'nu': '\\u03BD',\n    'Oacute': '\\u00D3',\n    'oacute': '\\u00F3',\n    'Ocirc': '\\u00D4',\n    'ocirc': '\\u00F4',\n    'OElig': '\\u0152',\n    'oelig': '\\u0153',\n    'Ograve': '\\u00D2',\n    'ograve': '\\u00F2',\n    'oline': '\\u203E',\n    'Omega': '\\u03A9',\n    'omega': '\\u03C9',\n    'Omicron': '\\u039F',\n    'omicron': '\\u03BF',\n    'oplus': '\\u2295',\n    'or': '\\u2228',\n    'ordf': '\\u00AA',\n    'ordm': '\\u00BA',\n    'Oslash': '\\u00D8',\n    'oslash': '\\u00F8',\n    'Otilde': '\\u00D5',\n    'otilde': '\\u00F5',\n    'otimes': '\\u2297',\n    'Ouml': '\\u00D6',\n    'ouml': '\\u00F6',\n    'para': '\\u00B6',\n    'permil': '\\u2030',\n    'perp': '\\u22A5',\n    'Phi': '\\u03A6',\n    'phi': '\\u03C6',\n    'Pi': '\\u03A0',\n    'pi': '\\u03C0',\n    'piv': '\\u03D6',\n    'plusmn': '\\u00B1',\n    'pound': '\\u00A3',\n    'prime': '\\u2032',\n    'Prime': '\\u2033',\n    'prod': '\\u220F',\n    'prop': '\\u221D',\n    'Psi': '\\u03A8',\n    'psi': '\\u03C8',\n    'quot': '\\u0022',\n    'radic': '\\u221A',\n    'rang': '\\u27E9',\n    'raquo': '\\u00BB',\n    'rarr': '\\u2192',\n    'rArr': '\\u21D2',\n    'rceil': '\\u2309',\n    'rdquo': '\\u201D',\n    'real': '\\u211C',\n    'reg': '\\u00AE',\n    'rfloor': '\\u230B',\n    'Rho': '\\u03A1',\n    'rho': '\\u03C1',\n    'rlm': '\\u200F',\n    'rsaquo': '\\u203A',\n    'rsquo': '\\u2019',\n    'sbquo': '\\u201A',\n    'Scaron': '\\u0160',\n    'scaron': '\\u0161',\n    'sdot': '\\u22C5',\n    'sect': '\\u00A7',\n    'shy': '\\u00AD',\n    'Sigma': '\\u03A3',\n    'sigma': '\\u03C3',\n    'sigmaf': '\\u03C2',\n    'sim': '\\u223C',\n    'spades': '\\u2660',\n    'sub': '\\u2282',\n    'sube': '\\u2286',\n    'sum': '\\u2211',\n    'sup': '\\u2283',\n    'sup1': '\\u00B9',\n    'sup2': '\\u00B2',\n    'sup3': '\\u00B3',\n    'supe': '\\u2287',\n    'szlig': '\\u00DF',\n    'Tau': '\\u03A4',\n    'tau': '\\u03C4',\n    'there4': '\\u2234',\n    'Theta': '\\u0398',\n    'theta': '\\u03B8',\n    'thetasym': '\\u03D1',\n    'thinsp': '\\u2009',\n    'THORN': '\\u00DE',\n    'thorn': '\\u00FE',\n    'tilde': '\\u02DC',\n    'times': '\\u00D7',\n    'trade': '\\u2122',\n    'Uacute': '\\u00DA',\n    'uacute': '\\u00FA',\n    'uarr': '\\u2191',\n    'uArr': '\\u21D1',\n    'Ucirc': '\\u00DB',\n    'ucirc': '\\u00FB',\n    'Ugrave': '\\u00D9',\n    'ugrave': '\\u00F9',\n    'uml': '\\u00A8',\n    'upsih': '\\u03D2',\n    'Upsilon': '\\u03A5',\n    'upsilon': '\\u03C5',\n    'Uuml': '\\u00DC',\n    'uuml': '\\u00FC',\n    'weierp': '\\u2118',\n    'Xi': '\\u039E',\n    'xi': '\\u03BE',\n    'Yacute': '\\u00DD',\n    'yacute': '\\u00FD',\n    'yen': '\\u00A5',\n    'yuml': '\\u00FF',\n    'Yuml': '\\u0178',\n    'Zeta': '\\u0396',\n    'zeta': '\\u03B6',\n    'zwj': '\\u200D',\n    'zwnj': '\\u200C',\n};\n// The &ngsp; pseudo-entity is denoting a space. see:\n// https://github.com/dart-lang/angular/blob/0bb611387d29d65b5af7f9d2515ab571fd3fbee4/_tests/test/compiler/preserve_whitespace_test.dart\nvar NGSP_UNICODE = '\\uE500';\nNAMED_ENTITIES['ngsp'] = NGSP_UNICODE;\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar NG_CONTENT_SELECT_ATTR = 'select';\nvar LINK_ELEMENT = 'link';\nvar LINK_STYLE_REL_ATTR = 'rel';\nvar LINK_STYLE_HREF_ATTR = 'href';\nvar LINK_STYLE_REL_VALUE = 'stylesheet';\nvar STYLE_ELEMENT = 'style';\nvar SCRIPT_ELEMENT = 'script';\nvar NG_NON_BINDABLE_ATTR = 'ngNonBindable';\nvar NG_PROJECT_AS = 'ngProjectAs';\nfunction preparseElement(ast) {\n    var selectAttr = null;\n    var hrefAttr = null;\n    var relAttr = null;\n    var nonBindable = false;\n    var projectAs = null;\n    ast.attrs.forEach(function (attr) {\n        var lcAttrName = attr.name.toLowerCase();\n        if (lcAttrName == NG_CONTENT_SELECT_ATTR) {\n            selectAttr = attr.value;\n        }\n        else if (lcAttrName == LINK_STYLE_HREF_ATTR) {\n            hrefAttr = attr.value;\n        }\n        else if (lcAttrName == LINK_STYLE_REL_ATTR) {\n            relAttr = attr.value;\n        }\n        else if (attr.name == NG_NON_BINDABLE_ATTR) {\n            nonBindable = true;\n        }\n        else if (attr.name == NG_PROJECT_AS) {\n            if (attr.value.length > 0) {\n                projectAs = attr.value;\n            }\n        }\n    });\n    selectAttr = normalizeNgContentSelect(selectAttr);\n    var nodeName = ast.name.toLowerCase();\n    var type = PreparsedElementType.OTHER;\n    if (isNgContent(nodeName)) {\n        type = PreparsedElementType.NG_CONTENT;\n    }\n    else if (nodeName == STYLE_ELEMENT) {\n        type = PreparsedElementType.STYLE;\n    }\n    else if (nodeName == SCRIPT_ELEMENT) {\n        type = PreparsedElementType.SCRIPT;\n    }\n    else if (nodeName == LINK_ELEMENT && relAttr == LINK_STYLE_REL_VALUE) {\n        type = PreparsedElementType.STYLESHEET;\n    }\n    return new PreparsedElement(type, selectAttr, hrefAttr, nonBindable, projectAs);\n}\nvar PreparsedElementType;\n(function (PreparsedElementType) {\n    PreparsedElementType[PreparsedElementType[\"NG_CONTENT\"] = 0] = \"NG_CONTENT\";\n    PreparsedElementType[PreparsedElementType[\"STYLE\"] = 1] = \"STYLE\";\n    PreparsedElementType[PreparsedElementType[\"STYLESHEET\"] = 2] = \"STYLESHEET\";\n    PreparsedElementType[PreparsedElementType[\"SCRIPT\"] = 3] = \"SCRIPT\";\n    PreparsedElementType[PreparsedElementType[\"OTHER\"] = 4] = \"OTHER\";\n})(PreparsedElementType || (PreparsedElementType = {}));\nvar PreparsedElement = /** @class */ (function () {\n    function PreparsedElement(type, selectAttr, hrefAttr, nonBindable, projectAs) {\n        this.type = type;\n        this.selectAttr = selectAttr;\n        this.hrefAttr = hrefAttr;\n        this.nonBindable = nonBindable;\n        this.projectAs = projectAs;\n    }\n    return PreparsedElement;\n}());\nfunction normalizeNgContentSelect(selectAttr) {\n    if (selectAttr === null || selectAttr.length === 0) {\n        return '*';\n    }\n    return selectAttr;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar DirectiveNormalizer = /** @class */ (function () {\n    function DirectiveNormalizer(_resourceLoader, _urlResolver, _htmlParser, _config) {\n        this._resourceLoader = _resourceLoader;\n        this._urlResolver = _urlResolver;\n        this._htmlParser = _htmlParser;\n        this._config = _config;\n        this._resourceLoaderCache = new Map();\n    }\n    DirectiveNormalizer.prototype.clearCache = function () { this._resourceLoaderCache.clear(); };\n    DirectiveNormalizer.prototype.clearCacheFor = function (normalizedDirective) {\n        var _this = this;\n        if (!normalizedDirective.isComponent) {\n            return;\n        }\n        var template = normalizedDirective.template;\n        this._resourceLoaderCache.delete(template.templateUrl);\n        template.externalStylesheets.forEach(function (stylesheet) { _this._resourceLoaderCache.delete(stylesheet.moduleUrl); });\n    };\n    DirectiveNormalizer.prototype._fetch = function (url) {\n        var result = this._resourceLoaderCache.get(url);\n        if (!result) {\n            result = this._resourceLoader.get(url);\n            this._resourceLoaderCache.set(url, result);\n        }\n        return result;\n    };\n    DirectiveNormalizer.prototype.normalizeTemplate = function (prenormData) {\n        var _this = this;\n        if (isDefined(prenormData.template)) {\n            if (isDefined(prenormData.templateUrl)) {\n                throw syntaxError(\"'\" + stringify(prenormData.componentType) + \"' component cannot define both template and templateUrl\");\n            }\n            if (typeof prenormData.template !== 'string') {\n                throw syntaxError(\"The template specified for component \" + stringify(prenormData.componentType) + \" is not a string\");\n            }\n        }\n        else if (isDefined(prenormData.templateUrl)) {\n            if (typeof prenormData.templateUrl !== 'string') {\n                throw syntaxError(\"The templateUrl specified for component \" + stringify(prenormData.componentType) + \" is not a string\");\n            }\n        }\n        else {\n            throw syntaxError(\"No template specified for component \" + stringify(prenormData.componentType));\n        }\n        if (isDefined(prenormData.preserveWhitespaces) &&\n            typeof prenormData.preserveWhitespaces !== 'boolean') {\n            throw syntaxError(\"The preserveWhitespaces option for component \" + stringify(prenormData.componentType) + \" must be a boolean\");\n        }\n        return SyncAsync.then(this._preParseTemplate(prenormData), function (preparsedTemplate) { return _this._normalizeTemplateMetadata(prenormData, preparsedTemplate); });\n    };\n    DirectiveNormalizer.prototype._preParseTemplate = function (prenomData) {\n        var _this = this;\n        var template;\n        var templateUrl;\n        if (prenomData.template != null) {\n            template = prenomData.template;\n            templateUrl = prenomData.moduleUrl;\n        }\n        else {\n            templateUrl = this._urlResolver.resolve(prenomData.moduleUrl, prenomData.templateUrl);\n            template = this._fetch(templateUrl);\n        }\n        return SyncAsync.then(template, function (template) { return _this._preparseLoadedTemplate(prenomData, template, templateUrl); });\n    };\n    DirectiveNormalizer.prototype._preparseLoadedTemplate = function (prenormData, template, templateAbsUrl) {\n        var isInline = !!prenormData.template;\n        var interpolationConfig = InterpolationConfig.fromArray(prenormData.interpolation);\n        var rootNodesAndErrors = this._htmlParser.parse(template, templateSourceUrl({ reference: prenormData.ngModuleType }, { type: { reference: prenormData.componentType } }, { isInline: isInline, templateUrl: templateAbsUrl }), true, interpolationConfig);\n        if (rootNodesAndErrors.errors.length > 0) {\n            var errorString = rootNodesAndErrors.errors.join('\\n');\n            throw syntaxError(\"Template parse errors:\\n\" + errorString);\n        }\n        var templateMetadataStyles = this._normalizeStylesheet(new CompileStylesheetMetadata({ styles: prenormData.styles, moduleUrl: prenormData.moduleUrl }));\n        var visitor = new TemplatePreparseVisitor();\n        visitAll(visitor, rootNodesAndErrors.rootNodes);\n        var templateStyles = this._normalizeStylesheet(new CompileStylesheetMetadata({ styles: visitor.styles, styleUrls: visitor.styleUrls, moduleUrl: templateAbsUrl }));\n        var styles = templateMetadataStyles.styles.concat(templateStyles.styles);\n        var inlineStyleUrls = templateMetadataStyles.styleUrls.concat(templateStyles.styleUrls);\n        var styleUrls = this\n            ._normalizeStylesheet(new CompileStylesheetMetadata({ styleUrls: prenormData.styleUrls, moduleUrl: prenormData.moduleUrl }))\n            .styleUrls;\n        return {\n            template: template,\n            templateUrl: templateAbsUrl, isInline: isInline,\n            htmlAst: rootNodesAndErrors, styles: styles, inlineStyleUrls: inlineStyleUrls, styleUrls: styleUrls,\n            ngContentSelectors: visitor.ngContentSelectors,\n        };\n    };\n    DirectiveNormalizer.prototype._normalizeTemplateMetadata = function (prenormData, preparsedTemplate) {\n        var _this = this;\n        return SyncAsync.then(this._loadMissingExternalStylesheets(preparsedTemplate.styleUrls.concat(preparsedTemplate.inlineStyleUrls)), function (externalStylesheets) { return _this._normalizeLoadedTemplateMetadata(prenormData, preparsedTemplate, externalStylesheets); });\n    };\n    DirectiveNormalizer.prototype._normalizeLoadedTemplateMetadata = function (prenormData, preparsedTemplate, stylesheets) {\n        // Algorithm:\n        // - produce exactly 1 entry per original styleUrl in\n        // CompileTemplateMetadata.externalStylesheets with all styles inlined\n        // - inline all styles that are referenced by the template into CompileTemplateMetadata.styles.\n        // Reason: be able to determine how many stylesheets there are even without loading\n        // the template nor the stylesheets, so we can create a stub for TypeScript always synchronously\n        // (as resource loading may be async)\n        var _this = this;\n        var styles = __spread(preparsedTemplate.styles);\n        this._inlineStyles(preparsedTemplate.inlineStyleUrls, stylesheets, styles);\n        var styleUrls = preparsedTemplate.styleUrls;\n        var externalStylesheets = styleUrls.map(function (styleUrl) {\n            var stylesheet = stylesheets.get(styleUrl);\n            var styles = __spread(stylesheet.styles);\n            _this._inlineStyles(stylesheet.styleUrls, stylesheets, styles);\n            return new CompileStylesheetMetadata({ moduleUrl: styleUrl, styles: styles });\n        });\n        var encapsulation = prenormData.encapsulation;\n        if (encapsulation == null) {\n            encapsulation = this._config.defaultEncapsulation;\n        }\n        if (encapsulation === ViewEncapsulation.Emulated && styles.length === 0 &&\n            styleUrls.length === 0) {\n            encapsulation = ViewEncapsulation.None;\n        }\n        return new CompileTemplateMetadata({\n            encapsulation: encapsulation,\n            template: preparsedTemplate.template,\n            templateUrl: preparsedTemplate.templateUrl,\n            htmlAst: preparsedTemplate.htmlAst, styles: styles, styleUrls: styleUrls,\n            ngContentSelectors: preparsedTemplate.ngContentSelectors,\n            animations: prenormData.animations,\n            interpolation: prenormData.interpolation,\n            isInline: preparsedTemplate.isInline, externalStylesheets: externalStylesheets,\n            preserveWhitespaces: preserveWhitespacesDefault(prenormData.preserveWhitespaces, this._config.preserveWhitespaces),\n        });\n    };\n    DirectiveNormalizer.prototype._inlineStyles = function (styleUrls, stylesheets, targetStyles) {\n        var _this = this;\n        styleUrls.forEach(function (styleUrl) {\n            var stylesheet = stylesheets.get(styleUrl);\n            stylesheet.styles.forEach(function (style) { return targetStyles.push(style); });\n            _this._inlineStyles(stylesheet.styleUrls, stylesheets, targetStyles);\n        });\n    };\n    DirectiveNormalizer.prototype._loadMissingExternalStylesheets = function (styleUrls, loadedStylesheets) {\n        var _this = this;\n        if (loadedStylesheets === void 0) { loadedStylesheets = new Map(); }\n        return SyncAsync.then(SyncAsync.all(styleUrls.filter(function (styleUrl) { return !loadedStylesheets.has(styleUrl); })\n            .map(function (styleUrl) { return SyncAsync.then(_this._fetch(styleUrl), function (loadedStyle) {\n            var stylesheet = _this._normalizeStylesheet(new CompileStylesheetMetadata({ styles: [loadedStyle], moduleUrl: styleUrl }));\n            loadedStylesheets.set(styleUrl, stylesheet);\n            return _this._loadMissingExternalStylesheets(stylesheet.styleUrls, loadedStylesheets);\n        }); })), function (_) { return loadedStylesheets; });\n    };\n    DirectiveNormalizer.prototype._normalizeStylesheet = function (stylesheet) {\n        var _this = this;\n        var moduleUrl = stylesheet.moduleUrl;\n        var allStyleUrls = stylesheet.styleUrls.filter(isStyleUrlResolvable)\n            .map(function (url) { return _this._urlResolver.resolve(moduleUrl, url); });\n        var allStyles = stylesheet.styles.map(function (style) {\n            var styleWithImports = extractStyleUrls(_this._urlResolver, moduleUrl, style);\n            allStyleUrls.push.apply(allStyleUrls, __spread(styleWithImports.styleUrls));\n            return styleWithImports.style;\n        });\n        return new CompileStylesheetMetadata({ styles: allStyles, styleUrls: allStyleUrls, moduleUrl: moduleUrl });\n    };\n    return DirectiveNormalizer;\n}());\nvar TemplatePreparseVisitor = /** @class */ (function () {\n    function TemplatePreparseVisitor() {\n        this.ngContentSelectors = [];\n        this.styles = [];\n        this.styleUrls = [];\n        this.ngNonBindableStackCount = 0;\n    }\n    TemplatePreparseVisitor.prototype.visitElement = function (ast, context) {\n        var preparsedElement = preparseElement(ast);\n        switch (preparsedElement.type) {\n            case PreparsedElementType.NG_CONTENT:\n                if (this.ngNonBindableStackCount === 0) {\n                    this.ngContentSelectors.push(preparsedElement.selectAttr);\n                }\n                break;\n            case PreparsedElementType.STYLE:\n                var textContent_1 = '';\n                ast.children.forEach(function (child) {\n                    if (child instanceof Text) {\n                        textContent_1 += child.value;\n                    }\n                });\n                this.styles.push(textContent_1);\n                break;\n            case PreparsedElementType.STYLESHEET:\n                this.styleUrls.push(preparsedElement.hrefAttr);\n                break;\n            default:\n                break;\n        }\n        if (preparsedElement.nonBindable) {\n            this.ngNonBindableStackCount++;\n        }\n        visitAll(this, ast.children);\n        if (preparsedElement.nonBindable) {\n            this.ngNonBindableStackCount--;\n        }\n        return null;\n    };\n    TemplatePreparseVisitor.prototype.visitExpansion = function (ast, context) { visitAll(this, ast.cases); };\n    TemplatePreparseVisitor.prototype.visitExpansionCase = function (ast, context) {\n        visitAll(this, ast.expression);\n    };\n    TemplatePreparseVisitor.prototype.visitComment = function (ast, context) { return null; };\n    TemplatePreparseVisitor.prototype.visitAttribute = function (ast, context) { return null; };\n    TemplatePreparseVisitor.prototype.visitText = function (ast, context) { return null; };\n    return TemplatePreparseVisitor;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar QUERY_METADATA_IDENTIFIERS = [\n    createViewChild,\n    createViewChildren,\n    createContentChild,\n    createContentChildren,\n];\n/*\n * Resolve a `Type` for {@link Directive}.\n *\n * This interface can be overridden by the application developer to create custom behavior.\n *\n * See {@link Compiler}\n */\nvar DirectiveResolver = /** @class */ (function () {\n    function DirectiveResolver(_reflector) {\n        this._reflector = _reflector;\n    }\n    DirectiveResolver.prototype.isDirective = function (type) {\n        var typeMetadata = this._reflector.annotations(resolveForwardRef(type));\n        return typeMetadata && typeMetadata.some(isDirectiveMetadata);\n    };\n    DirectiveResolver.prototype.resolve = function (type, throwIfNotFound) {\n        if (throwIfNotFound === void 0) { throwIfNotFound = true; }\n        var typeMetadata = this._reflector.annotations(resolveForwardRef(type));\n        if (typeMetadata) {\n            var metadata = findLast(typeMetadata, isDirectiveMetadata);\n            if (metadata) {\n                var propertyMetadata = this._reflector.propMetadata(type);\n                var guards = this._reflector.guards(type);\n                return this._mergeWithPropertyMetadata(metadata, propertyMetadata, guards, type);\n            }\n        }\n        if (throwIfNotFound) {\n            throw new Error(\"No Directive annotation found on \" + stringify(type));\n        }\n        return null;\n    };\n    DirectiveResolver.prototype._mergeWithPropertyMetadata = function (dm, propertyMetadata, guards, directiveType) {\n        var inputs = [];\n        var outputs = [];\n        var host = {};\n        var queries = {};\n        Object.keys(propertyMetadata).forEach(function (propName) {\n            var input = findLast(propertyMetadata[propName], function (a) { return createInput.isTypeOf(a); });\n            if (input) {\n                if (input.bindingPropertyName) {\n                    inputs.push(propName + \": \" + input.bindingPropertyName);\n                }\n                else {\n                    inputs.push(propName);\n                }\n            }\n            var output = findLast(propertyMetadata[propName], function (a) { return createOutput.isTypeOf(a); });\n            if (output) {\n                if (output.bindingPropertyName) {\n                    outputs.push(propName + \": \" + output.bindingPropertyName);\n                }\n                else {\n                    outputs.push(propName);\n                }\n            }\n            var hostBindings = propertyMetadata[propName].filter(function (a) { return createHostBinding.isTypeOf(a); });\n            hostBindings.forEach(function (hostBinding) {\n                if (hostBinding.hostPropertyName) {\n                    var startWith = hostBinding.hostPropertyName[0];\n                    if (startWith === '(') {\n                        throw new Error(\"@HostBinding can not bind to events. Use @HostListener instead.\");\n                    }\n                    else if (startWith === '[') {\n                        throw new Error(\"@HostBinding parameter should be a property name, 'class.<name>', or 'attr.<name>'.\");\n                    }\n                    host[\"[\" + hostBinding.hostPropertyName + \"]\"] = propName;\n                }\n                else {\n                    host[\"[\" + propName + \"]\"] = propName;\n                }\n            });\n            var hostListeners = propertyMetadata[propName].filter(function (a) { return createHostListener.isTypeOf(a); });\n            hostListeners.forEach(function (hostListener) {\n                var args = hostListener.args || [];\n                host[\"(\" + hostListener.eventName + \")\"] = propName + \"(\" + args.join(',') + \")\";\n            });\n            var query = findLast(propertyMetadata[propName], function (a) { return QUERY_METADATA_IDENTIFIERS.some(function (i) { return i.isTypeOf(a); }); });\n            if (query) {\n                queries[propName] = query;\n            }\n        });\n        return this._merge(dm, inputs, outputs, host, queries, guards, directiveType);\n    };\n    DirectiveResolver.prototype._extractPublicName = function (def) { return splitAtColon(def, [null, def])[1].trim(); };\n    DirectiveResolver.prototype._dedupeBindings = function (bindings) {\n        var names = new Set();\n        var publicNames = new Set();\n        var reversedResult = [];\n        // go last to first to allow later entries to overwrite previous entries\n        for (var i = bindings.length - 1; i >= 0; i--) {\n            var binding = bindings[i];\n            var name_1 = this._extractPublicName(binding);\n            publicNames.add(name_1);\n            if (!names.has(name_1)) {\n                names.add(name_1);\n                reversedResult.push(binding);\n            }\n        }\n        return reversedResult.reverse();\n    };\n    DirectiveResolver.prototype._merge = function (directive, inputs, outputs, host, queries, guards, directiveType) {\n        var mergedInputs = this._dedupeBindings(directive.inputs ? directive.inputs.concat(inputs) : inputs);\n        var mergedOutputs = this._dedupeBindings(directive.outputs ? directive.outputs.concat(outputs) : outputs);\n        var mergedHost = directive.host ? __assign({}, directive.host, host) : host;\n        var mergedQueries = directive.queries ? __assign({}, directive.queries, queries) : queries;\n        if (createComponent.isTypeOf(directive)) {\n            var comp = directive;\n            return createComponent({\n                selector: comp.selector,\n                inputs: mergedInputs,\n                outputs: mergedOutputs,\n                host: mergedHost,\n                exportAs: comp.exportAs,\n                moduleId: comp.moduleId,\n                queries: mergedQueries,\n                changeDetection: comp.changeDetection,\n                providers: comp.providers,\n                viewProviders: comp.viewProviders,\n                entryComponents: comp.entryComponents,\n                template: comp.template,\n                templateUrl: comp.templateUrl,\n                styles: comp.styles,\n                styleUrls: comp.styleUrls,\n                encapsulation: comp.encapsulation,\n                animations: comp.animations,\n                interpolation: comp.interpolation,\n                preserveWhitespaces: directive.preserveWhitespaces,\n            });\n        }\n        else {\n            return createDirective({\n                selector: directive.selector,\n                inputs: mergedInputs,\n                outputs: mergedOutputs,\n                host: mergedHost,\n                exportAs: directive.exportAs,\n                queries: mergedQueries,\n                providers: directive.providers, guards: guards\n            });\n        }\n    };\n    return DirectiveResolver;\n}());\nfunction isDirectiveMetadata(type) {\n    return createDirective.isTypeOf(type) || createComponent.isTypeOf(type);\n}\nfunction findLast(arr, condition) {\n    for (var i = arr.length - 1; i >= 0; i--) {\n        if (condition(arr[i])) {\n            return arr[i];\n        }\n    }\n    return null;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar $EOF = 0;\nvar $TAB = 9;\nvar $LF = 10;\nvar $VTAB = 11;\nvar $FF = 12;\nvar $CR = 13;\nvar $SPACE = 32;\nvar $BANG = 33;\nvar $DQ = 34;\nvar $HASH = 35;\nvar $$ = 36;\nvar $PERCENT = 37;\nvar $AMPERSAND = 38;\nvar $SQ = 39;\nvar $LPAREN = 40;\nvar $RPAREN = 41;\nvar $STAR = 42;\nvar $PLUS = 43;\nvar $COMMA = 44;\nvar $MINUS = 45;\nvar $PERIOD = 46;\nvar $SLASH = 47;\nvar $COLON = 58;\nvar $SEMICOLON = 59;\nvar $LT = 60;\nvar $EQ = 61;\nvar $GT = 62;\nvar $QUESTION = 63;\nvar $0 = 48;\nvar $9 = 57;\nvar $A = 65;\nvar $E = 69;\nvar $F = 70;\nvar $X = 88;\nvar $Z = 90;\nvar $LBRACKET = 91;\nvar $BACKSLASH = 92;\nvar $RBRACKET = 93;\nvar $CARET = 94;\nvar $_ = 95;\nvar $a = 97;\nvar $e = 101;\nvar $f = 102;\nvar $n = 110;\nvar $r = 114;\nvar $t = 116;\nvar $u = 117;\nvar $v = 118;\nvar $x = 120;\nvar $z = 122;\nvar $LBRACE = 123;\nvar $BAR = 124;\nvar $RBRACE = 125;\nvar $NBSP = 160;\n\n\n\nvar $BT = 96;\nfunction isWhitespace(code) {\n    return (code >= $TAB && code <= $SPACE) || (code == $NBSP);\n}\nfunction isDigit(code) {\n    return $0 <= code && code <= $9;\n}\nfunction isAsciiLetter(code) {\n    return code >= $a && code <= $z || code >= $A && code <= $Z;\n}\nfunction isAsciiHexDigit(code) {\n    return code >= $a && code <= $f || code >= $A && code <= $F || isDigit(code);\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar TokenType;\n(function (TokenType) {\n    TokenType[TokenType[\"Character\"] = 0] = \"Character\";\n    TokenType[TokenType[\"Identifier\"] = 1] = \"Identifier\";\n    TokenType[TokenType[\"Keyword\"] = 2] = \"Keyword\";\n    TokenType[TokenType[\"String\"] = 3] = \"String\";\n    TokenType[TokenType[\"Operator\"] = 4] = \"Operator\";\n    TokenType[TokenType[\"Number\"] = 5] = \"Number\";\n    TokenType[TokenType[\"Error\"] = 6] = \"Error\";\n})(TokenType || (TokenType = {}));\nvar KEYWORDS = ['var', 'let', 'as', 'null', 'undefined', 'true', 'false', 'if', 'else', 'this'];\nvar Lexer = /** @class */ (function () {\n    function Lexer() {\n    }\n    Lexer.prototype.tokenize = function (text) {\n        var scanner = new _Scanner(text);\n        var tokens = [];\n        var token = scanner.scanToken();\n        while (token != null) {\n            tokens.push(token);\n            token = scanner.scanToken();\n        }\n        return tokens;\n    };\n    return Lexer;\n}());\nvar Token = /** @class */ (function () {\n    function Token(index, type, numValue, strValue) {\n        this.index = index;\n        this.type = type;\n        this.numValue = numValue;\n        this.strValue = strValue;\n    }\n    Token.prototype.isCharacter = function (code) {\n        return this.type == TokenType.Character && this.numValue == code;\n    };\n    Token.prototype.isNumber = function () { return this.type == TokenType.Number; };\n    Token.prototype.isString = function () { return this.type == TokenType.String; };\n    Token.prototype.isOperator = function (operater) {\n        return this.type == TokenType.Operator && this.strValue == operater;\n    };\n    Token.prototype.isIdentifier = function () { return this.type == TokenType.Identifier; };\n    Token.prototype.isKeyword = function () { return this.type == TokenType.Keyword; };\n    Token.prototype.isKeywordLet = function () { return this.type == TokenType.Keyword && this.strValue == 'let'; };\n    Token.prototype.isKeywordAs = function () { return this.type == TokenType.Keyword && this.strValue == 'as'; };\n    Token.prototype.isKeywordNull = function () { return this.type == TokenType.Keyword && this.strValue == 'null'; };\n    Token.prototype.isKeywordUndefined = function () {\n        return this.type == TokenType.Keyword && this.strValue == 'undefined';\n    };\n    Token.prototype.isKeywordTrue = function () { return this.type == TokenType.Keyword && this.strValue == 'true'; };\n    Token.prototype.isKeywordFalse = function () { return this.type == TokenType.Keyword && this.strValue == 'false'; };\n    Token.prototype.isKeywordThis = function () { return this.type == TokenType.Keyword && this.strValue == 'this'; };\n    Token.prototype.isError = function () { return this.type == TokenType.Error; };\n    Token.prototype.toNumber = function () { return this.type == TokenType.Number ? this.numValue : -1; };\n    Token.prototype.toString = function () {\n        switch (this.type) {\n            case TokenType.Character:\n            case TokenType.Identifier:\n            case TokenType.Keyword:\n            case TokenType.Operator:\n            case TokenType.String:\n            case TokenType.Error:\n                return this.strValue;\n            case TokenType.Number:\n                return this.numValue.toString();\n            default:\n                return null;\n        }\n    };\n    return Token;\n}());\nfunction newCharacterToken(index, code) {\n    return new Token(index, TokenType.Character, code, String.fromCharCode(code));\n}\nfunction newIdentifierToken(index, text) {\n    return new Token(index, TokenType.Identifier, 0, text);\n}\nfunction newKeywordToken(index, text) {\n    return new Token(index, TokenType.Keyword, 0, text);\n}\nfunction newOperatorToken(index, text) {\n    return new Token(index, TokenType.Operator, 0, text);\n}\nfunction newStringToken(index, text) {\n    return new Token(index, TokenType.String, 0, text);\n}\nfunction newNumberToken(index, n) {\n    return new Token(index, TokenType.Number, n, '');\n}\nfunction newErrorToken(index, message) {\n    return new Token(index, TokenType.Error, 0, message);\n}\nvar EOF = new Token(-1, TokenType.Character, 0, '');\nvar _Scanner = /** @class */ (function () {\n    function _Scanner(input) {\n        this.input = input;\n        this.peek = 0;\n        this.index = -1;\n        this.length = input.length;\n        this.advance();\n    }\n    _Scanner.prototype.advance = function () {\n        this.peek = ++this.index >= this.length ? $EOF : this.input.charCodeAt(this.index);\n    };\n    _Scanner.prototype.scanToken = function () {\n        var input = this.input, length = this.length;\n        var peek = this.peek, index = this.index;\n        // Skip whitespace.\n        while (peek <= $SPACE) {\n            if (++index >= length) {\n                peek = $EOF;\n                break;\n            }\n            else {\n                peek = input.charCodeAt(index);\n            }\n        }\n        this.peek = peek;\n        this.index = index;\n        if (index >= length) {\n            return null;\n        }\n        // Handle identifiers and numbers.\n        if (isIdentifierStart(peek))\n            return this.scanIdentifier();\n        if (isDigit(peek))\n            return this.scanNumber(index);\n        var start = index;\n        switch (peek) {\n            case $PERIOD:\n                this.advance();\n                return isDigit(this.peek) ? this.scanNumber(start) :\n                    newCharacterToken(start, $PERIOD);\n            case $LPAREN:\n            case $RPAREN:\n            case $LBRACE:\n            case $RBRACE:\n            case $LBRACKET:\n            case $RBRACKET:\n            case $COMMA:\n            case $COLON:\n            case $SEMICOLON:\n                return this.scanCharacter(start, peek);\n            case $SQ:\n            case $DQ:\n                return this.scanString();\n            case $HASH:\n            case $PLUS:\n            case $MINUS:\n            case $STAR:\n            case $SLASH:\n            case $PERCENT:\n            case $CARET:\n                return this.scanOperator(start, String.fromCharCode(peek));\n            case $QUESTION:\n                return this.scanComplexOperator(start, '?', $PERIOD, '.');\n            case $LT:\n            case $GT:\n                return this.scanComplexOperator(start, String.fromCharCode(peek), $EQ, '=');\n            case $BANG:\n            case $EQ:\n                return this.scanComplexOperator(start, String.fromCharCode(peek), $EQ, '=', $EQ, '=');\n            case $AMPERSAND:\n                return this.scanComplexOperator(start, '&', $AMPERSAND, '&');\n            case $BAR:\n                return this.scanComplexOperator(start, '|', $BAR, '|');\n            case $NBSP:\n                while (isWhitespace(this.peek))\n                    this.advance();\n                return this.scanToken();\n        }\n        this.advance();\n        return this.error(\"Unexpected character [\" + String.fromCharCode(peek) + \"]\", 0);\n    };\n    _Scanner.prototype.scanCharacter = function (start, code) {\n        this.advance();\n        return newCharacterToken(start, code);\n    };\n    _Scanner.prototype.scanOperator = function (start, str) {\n        this.advance();\n        return newOperatorToken(start, str);\n    };\n    /**\n     * Tokenize a 2/3 char long operator\n     *\n     * @param start start index in the expression\n     * @param one first symbol (always part of the operator)\n     * @param twoCode code point for the second symbol\n     * @param two second symbol (part of the operator when the second code point matches)\n     * @param threeCode code point for the third symbol\n     * @param three third symbol (part of the operator when provided and matches source expression)\n     */\n    _Scanner.prototype.scanComplexOperator = function (start, one, twoCode, two, threeCode, three) {\n        this.advance();\n        var str = one;\n        if (this.peek == twoCode) {\n            this.advance();\n            str += two;\n        }\n        if (threeCode != null && this.peek == threeCode) {\n            this.advance();\n            str += three;\n        }\n        return newOperatorToken(start, str);\n    };\n    _Scanner.prototype.scanIdentifier = function () {\n        var start = this.index;\n        this.advance();\n        while (isIdentifierPart(this.peek))\n            this.advance();\n        var str = this.input.substring(start, this.index);\n        return KEYWORDS.indexOf(str) > -1 ? newKeywordToken(start, str) :\n            newIdentifierToken(start, str);\n    };\n    _Scanner.prototype.scanNumber = function (start) {\n        var simple = (this.index === start);\n        this.advance(); // Skip initial digit.\n        while (true) {\n            if (isDigit(this.peek)) {\n                // Do nothing.\n            }\n            else if (this.peek == $PERIOD) {\n                simple = false;\n            }\n            else if (isExponentStart(this.peek)) {\n                this.advance();\n                if (isExponentSign(this.peek))\n                    this.advance();\n                if (!isDigit(this.peek))\n                    return this.error('Invalid exponent', -1);\n                simple = false;\n            }\n            else {\n                break;\n            }\n            this.advance();\n        }\n        var str = this.input.substring(start, this.index);\n        var value = simple ? parseIntAutoRadix(str) : parseFloat(str);\n        return newNumberToken(start, value);\n    };\n    _Scanner.prototype.scanString = function () {\n        var start = this.index;\n        var quote = this.peek;\n        this.advance(); // Skip initial quote.\n        var buffer = '';\n        var marker = this.index;\n        var input = this.input;\n        while (this.peek != quote) {\n            if (this.peek == $BACKSLASH) {\n                buffer += input.substring(marker, this.index);\n                this.advance();\n                var unescapedCode = void 0;\n                // Workaround for TS2.1-introduced type strictness\n                this.peek = this.peek;\n                if (this.peek == $u) {\n                    // 4 character hex code for unicode character.\n                    var hex = input.substring(this.index + 1, this.index + 5);\n                    if (/^[0-9a-f]+$/i.test(hex)) {\n                        unescapedCode = parseInt(hex, 16);\n                    }\n                    else {\n                        return this.error(\"Invalid unicode escape [\\\\u\" + hex + \"]\", 0);\n                    }\n                    for (var i = 0; i < 5; i++) {\n                        this.advance();\n                    }\n                }\n                else {\n                    unescapedCode = unescape(this.peek);\n                    this.advance();\n                }\n                buffer += String.fromCharCode(unescapedCode);\n                marker = this.index;\n            }\n            else if (this.peek == $EOF) {\n                return this.error('Unterminated quote', 0);\n            }\n            else {\n                this.advance();\n            }\n        }\n        var last = input.substring(marker, this.index);\n        this.advance(); // Skip terminating quote.\n        return newStringToken(start, buffer + last);\n    };\n    _Scanner.prototype.error = function (message, offset) {\n        var position = this.index + offset;\n        return newErrorToken(position, \"Lexer Error: \" + message + \" at column \" + position + \" in expression [\" + this.input + \"]\");\n    };\n    return _Scanner;\n}());\nfunction isIdentifierStart(code) {\n    return ($a <= code && code <= $z) || ($A <= code && code <= $Z) ||\n        (code == $_) || (code == $$);\n}\nfunction isIdentifier(input) {\n    if (input.length == 0)\n        return false;\n    var scanner = new _Scanner(input);\n    if (!isIdentifierStart(scanner.peek))\n        return false;\n    scanner.advance();\n    while (scanner.peek !== $EOF) {\n        if (!isIdentifierPart(scanner.peek))\n            return false;\n        scanner.advance();\n    }\n    return true;\n}\nfunction isIdentifierPart(code) {\n    return isAsciiLetter(code) || isDigit(code) || (code == $_) ||\n        (code == $$);\n}\nfunction isExponentStart(code) {\n    return code == $e || code == $E;\n}\nfunction isExponentSign(code) {\n    return code == $MINUS || code == $PLUS;\n}\nfunction isQuote(code) {\n    return code === $SQ || code === $DQ || code === $BT;\n}\nfunction unescape(code) {\n    switch (code) {\n        case $n:\n            return $LF;\n        case $f:\n            return $FF;\n        case $r:\n            return $CR;\n        case $t:\n            return $TAB;\n        case $v:\n            return $VTAB;\n        default:\n            return code;\n    }\n}\nfunction parseIntAutoRadix(text) {\n    var result = parseInt(text);\n    if (isNaN(result)) {\n        throw new Error('Invalid integer literal when parsing ' + text);\n    }\n    return result;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar ParserError = /** @class */ (function () {\n    function ParserError(message, input, errLocation, ctxLocation) {\n        this.input = input;\n        this.errLocation = errLocation;\n        this.ctxLocation = ctxLocation;\n        this.message = \"Parser Error: \" + message + \" \" + errLocation + \" [\" + input + \"] in \" + ctxLocation;\n    }\n    return ParserError;\n}());\nvar ParseSpan = /** @class */ (function () {\n    function ParseSpan(start, end) {\n        this.start = start;\n        this.end = end;\n    }\n    return ParseSpan;\n}());\nvar AST = /** @class */ (function () {\n    function AST(span) {\n        this.span = span;\n    }\n    AST.prototype.visit = function (visitor, context) {\n        if (context === void 0) { context = null; }\n        return null;\n    };\n    AST.prototype.toString = function () { return 'AST'; };\n    return AST;\n}());\n/**\n * Represents a quoted expression of the form:\n *\n * quote = prefix `:` uninterpretedExpression\n * prefix = identifier\n * uninterpretedExpression = arbitrary string\n *\n * A quoted expression is meant to be pre-processed by an AST transformer that\n * converts it into another AST that no longer contains quoted expressions.\n * It is meant to allow third-party developers to extend Angular template\n * expression language. The `uninterpretedExpression` part of the quote is\n * therefore not interpreted by the Angular's own expression parser.\n */\nvar Quote = /** @class */ (function (_super) {\n    __extends(Quote, _super);\n    function Quote(span, prefix, uninterpretedExpression, location) {\n        var _this = _super.call(this, span) || this;\n        _this.prefix = prefix;\n        _this.uninterpretedExpression = uninterpretedExpression;\n        _this.location = location;\n        return _this;\n    }\n    Quote.prototype.visit = function (visitor, context) {\n        if (context === void 0) { context = null; }\n        return visitor.visitQuote(this, context);\n    };\n    Quote.prototype.toString = function () { return 'Quote'; };\n    return Quote;\n}(AST));\nvar EmptyExpr = /** @class */ (function (_super) {\n    __extends(EmptyExpr, _super);\n    function EmptyExpr() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    EmptyExpr.prototype.visit = function (visitor, context) {\n        if (context === void 0) { context = null; }\n        // do nothing\n    };\n    return EmptyExpr;\n}(AST));\nvar ImplicitReceiver = /** @class */ (function (_super) {\n    __extends(ImplicitReceiver, _super);\n    function ImplicitReceiver() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ImplicitReceiver.prototype.visit = function (visitor, context) {\n        if (context === void 0) { context = null; }\n        return visitor.visitImplicitReceiver(this, context);\n    };\n    return ImplicitReceiver;\n}(AST));\n/**\n * Multiple expressions separated by a semicolon.\n */\nvar Chain = /** @class */ (function (_super) {\n    __extends(Chain, _super);\n    function Chain(span, expressions) {\n        var _this = _super.call(this, span) || this;\n        _this.expressions = expressions;\n        return _this;\n    }\n    Chain.prototype.visit = function (visitor, context) {\n        if (context === void 0) { context = null; }\n        return visitor.visitChain(this, context);\n    };\n    return Chain;\n}(AST));\nvar Conditional = /** @class */ (function (_super) {\n    __extends(Conditional, _super);\n    function Conditional(span, condition, trueExp, falseExp) {\n        var _this = _super.call(this, span) || this;\n        _this.condition = condition;\n        _this.trueExp = trueExp;\n        _this.falseExp = falseExp;\n        return _this;\n    }\n    Conditional.prototype.visit = function (visitor, context) {\n        if (context === void 0) { context = null; }\n        return visitor.visitConditional(this, context);\n    };\n    return Conditional;\n}(AST));\nvar PropertyRead = /** @class */ (function (_super) {\n    __extends(PropertyRead, _super);\n    function PropertyRead(span, receiver, name) {\n        var _this = _super.call(this, span) || this;\n        _this.receiver = receiver;\n        _this.name = name;\n        return _this;\n    }\n    PropertyRead.prototype.visit = function (visitor, context) {\n        if (context === void 0) { context = null; }\n        return visitor.visitPropertyRead(this, context);\n    };\n    return PropertyRead;\n}(AST));\nvar PropertyWrite = /** @class */ (function (_super) {\n    __extends(PropertyWrite, _super);\n    function PropertyWrite(span, receiver, name, value) {\n        var _this = _super.call(this, span) || this;\n        _this.receiver = receiver;\n        _this.name = name;\n        _this.value = value;\n        return _this;\n    }\n    PropertyWrite.prototype.visit = function (visitor, context) {\n        if (context === void 0) { context = null; }\n        return visitor.visitPropertyWrite(this, context);\n    };\n    return PropertyWrite;\n}(AST));\nvar SafePropertyRead = /** @class */ (function (_super) {\n    __extends(SafePropertyRead, _super);\n    function SafePropertyRead(span, receiver, name) {\n        var _this = _super.call(this, span) || this;\n        _this.receiver = receiver;\n        _this.name = name;\n        return _this;\n    }\n    SafePropertyRead.prototype.visit = function (visitor, context) {\n        if (context === void 0) { context = null; }\n        return visitor.visitSafePropertyRead(this, context);\n    };\n    return SafePropertyRead;\n}(AST));\nvar KeyedRead = /** @class */ (function (_super) {\n    __extends(KeyedRead, _super);\n    function KeyedRead(span, obj, key) {\n        var _this = _super.call(this, span) || this;\n        _this.obj = obj;\n        _this.key = key;\n        return _this;\n    }\n    KeyedRead.prototype.visit = function (visitor, context) {\n        if (context === void 0) { context = null; }\n        return visitor.visitKeyedRead(this, context);\n    };\n    return KeyedRead;\n}(AST));\nvar KeyedWrite = /** @class */ (function (_super) {\n    __extends(KeyedWrite, _super);\n    function KeyedWrite(span, obj, key, value) {\n        var _this = _super.call(this, span) || this;\n        _this.obj = obj;\n        _this.key = key;\n        _this.value = value;\n        return _this;\n    }\n    KeyedWrite.prototype.visit = function (visitor, context) {\n        if (context === void 0) { context = null; }\n        return visitor.visitKeyedWrite(this, context);\n    };\n    return KeyedWrite;\n}(AST));\nvar BindingPipe = /** @class */ (function (_super) {\n    __extends(BindingPipe, _super);\n    function BindingPipe(span, exp, name, args) {\n        var _this = _super.call(this, span) || this;\n        _this.exp = exp;\n        _this.name = name;\n        _this.args = args;\n        return _this;\n    }\n    BindingPipe.prototype.visit = function (visitor, context) {\n        if (context === void 0) { context = null; }\n        return visitor.visitPipe(this, context);\n    };\n    return BindingPipe;\n}(AST));\nvar LiteralPrimitive = /** @class */ (function (_super) {\n    __extends(LiteralPrimitive, _super);\n    function LiteralPrimitive(span, value) {\n        var _this = _super.call(this, span) || this;\n        _this.value = value;\n        return _this;\n    }\n    LiteralPrimitive.prototype.visit = function (visitor, context) {\n        if (context === void 0) { context = null; }\n        return visitor.visitLiteralPrimitive(this, context);\n    };\n    return LiteralPrimitive;\n}(AST));\nvar LiteralArray = /** @class */ (function (_super) {\n    __extends(LiteralArray, _super);\n    function LiteralArray(span, expressions) {\n        var _this = _super.call(this, span) || this;\n        _this.expressions = expressions;\n        return _this;\n    }\n    LiteralArray.prototype.visit = function (visitor, context) {\n        if (context === void 0) { context = null; }\n        return visitor.visitLiteralArray(this, context);\n    };\n    return LiteralArray;\n}(AST));\nvar LiteralMap = /** @class */ (function (_super) {\n    __extends(LiteralMap, _super);\n    function LiteralMap(span, keys, values) {\n        var _this = _super.call(this, span) || this;\n        _this.keys = keys;\n        _this.values = values;\n        return _this;\n    }\n    LiteralMap.prototype.visit = function (visitor, context) {\n        if (context === void 0) { context = null; }\n        return visitor.visitLiteralMap(this, context);\n    };\n    return LiteralMap;\n}(AST));\nvar Interpolation = /** @class */ (function (_super) {\n    __extends(Interpolation, _super);\n    function Interpolation(span, strings, expressions) {\n        var _this = _super.call(this, span) || this;\n        _this.strings = strings;\n        _this.expressions = expressions;\n        return _this;\n    }\n    Interpolation.prototype.visit = function (visitor, context) {\n        if (context === void 0) { context = null; }\n        return visitor.visitInterpolation(this, context);\n    };\n    return Interpolation;\n}(AST));\nvar Binary = /** @class */ (function (_super) {\n    __extends(Binary, _super);\n    function Binary(span, operation, left, right) {\n        var _this = _super.call(this, span) || this;\n        _this.operation = operation;\n        _this.left = left;\n        _this.right = right;\n        return _this;\n    }\n    Binary.prototype.visit = function (visitor, context) {\n        if (context === void 0) { context = null; }\n        return visitor.visitBinary(this, context);\n    };\n    return Binary;\n}(AST));\nvar PrefixNot = /** @class */ (function (_super) {\n    __extends(PrefixNot, _super);\n    function PrefixNot(span, expression) {\n        var _this = _super.call(this, span) || this;\n        _this.expression = expression;\n        return _this;\n    }\n    PrefixNot.prototype.visit = function (visitor, context) {\n        if (context === void 0) { context = null; }\n        return visitor.visitPrefixNot(this, context);\n    };\n    return PrefixNot;\n}(AST));\nvar NonNullAssert = /** @class */ (function (_super) {\n    __extends(NonNullAssert, _super);\n    function NonNullAssert(span, expression) {\n        var _this = _super.call(this, span) || this;\n        _this.expression = expression;\n        return _this;\n    }\n    NonNullAssert.prototype.visit = function (visitor, context) {\n        if (context === void 0) { context = null; }\n        return visitor.visitNonNullAssert(this, context);\n    };\n    return NonNullAssert;\n}(AST));\nvar MethodCall = /** @class */ (function (_super) {\n    __extends(MethodCall, _super);\n    function MethodCall(span, receiver, name, args) {\n        var _this = _super.call(this, span) || this;\n        _this.receiver = receiver;\n        _this.name = name;\n        _this.args = args;\n        return _this;\n    }\n    MethodCall.prototype.visit = function (visitor, context) {\n        if (context === void 0) { context = null; }\n        return visitor.visitMethodCall(this, context);\n    };\n    return MethodCall;\n}(AST));\nvar SafeMethodCall = /** @class */ (function (_super) {\n    __extends(SafeMethodCall, _super);\n    function SafeMethodCall(span, receiver, name, args) {\n        var _this = _super.call(this, span) || this;\n        _this.receiver = receiver;\n        _this.name = name;\n        _this.args = args;\n        return _this;\n    }\n    SafeMethodCall.prototype.visit = function (visitor, context) {\n        if (context === void 0) { context = null; }\n        return visitor.visitSafeMethodCall(this, context);\n    };\n    return SafeMethodCall;\n}(AST));\nvar FunctionCall = /** @class */ (function (_super) {\n    __extends(FunctionCall, _super);\n    function FunctionCall(span, target, args) {\n        var _this = _super.call(this, span) || this;\n        _this.target = target;\n        _this.args = args;\n        return _this;\n    }\n    FunctionCall.prototype.visit = function (visitor, context) {\n        if (context === void 0) { context = null; }\n        return visitor.visitFunctionCall(this, context);\n    };\n    return FunctionCall;\n}(AST));\nvar ASTWithSource = /** @class */ (function (_super) {\n    __extends(ASTWithSource, _super);\n    function ASTWithSource(ast, source, location, errors) {\n        var _this = _super.call(this, new ParseSpan(0, source == null ? 0 : source.length)) || this;\n        _this.ast = ast;\n        _this.source = source;\n        _this.location = location;\n        _this.errors = errors;\n        return _this;\n    }\n    ASTWithSource.prototype.visit = function (visitor, context) {\n        if (context === void 0) { context = null; }\n        return this.ast.visit(visitor, context);\n    };\n    ASTWithSource.prototype.toString = function () { return this.source + \" in \" + this.location; };\n    return ASTWithSource;\n}(AST));\nvar TemplateBinding = /** @class */ (function () {\n    function TemplateBinding(span, key, keyIsVar, name, expression) {\n        this.span = span;\n        this.key = key;\n        this.keyIsVar = keyIsVar;\n        this.name = name;\n        this.expression = expression;\n    }\n    return TemplateBinding;\n}());\nvar NullAstVisitor = /** @class */ (function () {\n    function NullAstVisitor() {\n    }\n    NullAstVisitor.prototype.visitBinary = function (ast, context) { };\n    NullAstVisitor.prototype.visitChain = function (ast, context) { };\n    NullAstVisitor.prototype.visitConditional = function (ast, context) { };\n    NullAstVisitor.prototype.visitFunctionCall = function (ast, context) { };\n    NullAstVisitor.prototype.visitImplicitReceiver = function (ast, context) { };\n    NullAstVisitor.prototype.visitInterpolation = function (ast, context) { };\n    NullAstVisitor.prototype.visitKeyedRead = function (ast, context) { };\n    NullAstVisitor.prototype.visitKeyedWrite = function (ast, context) { };\n    NullAstVisitor.prototype.visitLiteralArray = function (ast, context) { };\n    NullAstVisitor.prototype.visitLiteralMap = function (ast, context) { };\n    NullAstVisitor.prototype.visitLiteralPrimitive = function (ast, context) { };\n    NullAstVisitor.prototype.visitMethodCall = function (ast, context) { };\n    NullAstVisitor.prototype.visitPipe = function (ast, context) { };\n    NullAstVisitor.prototype.visitPrefixNot = function (ast, context) { };\n    NullAstVisitor.prototype.visitNonNullAssert = function (ast, context) { };\n    NullAstVisitor.prototype.visitPropertyRead = function (ast, context) { };\n    NullAstVisitor.prototype.visitPropertyWrite = function (ast, context) { };\n    NullAstVisitor.prototype.visitQuote = function (ast, context) { };\n    NullAstVisitor.prototype.visitSafeMethodCall = function (ast, context) { };\n    NullAstVisitor.prototype.visitSafePropertyRead = function (ast, context) { };\n    return NullAstVisitor;\n}());\nvar RecursiveAstVisitor = /** @class */ (function () {\n    function RecursiveAstVisitor() {\n    }\n    RecursiveAstVisitor.prototype.visitBinary = function (ast, context) {\n        ast.left.visit(this);\n        ast.right.visit(this);\n        return null;\n    };\n    RecursiveAstVisitor.prototype.visitChain = function (ast, context) { return this.visitAll(ast.expressions, context); };\n    RecursiveAstVisitor.prototype.visitConditional = function (ast, context) {\n        ast.condition.visit(this);\n        ast.trueExp.visit(this);\n        ast.falseExp.visit(this);\n        return null;\n    };\n    RecursiveAstVisitor.prototype.visitPipe = function (ast, context) {\n        ast.exp.visit(this);\n        this.visitAll(ast.args, context);\n        return null;\n    };\n    RecursiveAstVisitor.prototype.visitFunctionCall = function (ast, context) {\n        ast.target.visit(this);\n        this.visitAll(ast.args, context);\n        return null;\n    };\n    RecursiveAstVisitor.prototype.visitImplicitReceiver = function (ast, context) { return null; };\n    RecursiveAstVisitor.prototype.visitInterpolation = function (ast, context) {\n        return this.visitAll(ast.expressions, context);\n    };\n    RecursiveAstVisitor.prototype.visitKeyedRead = function (ast, context) {\n        ast.obj.visit(this);\n        ast.key.visit(this);\n        return null;\n    };\n    RecursiveAstVisitor.prototype.visitKeyedWrite = function (ast, context) {\n        ast.obj.visit(this);\n        ast.key.visit(this);\n        ast.value.visit(this);\n        return null;\n    };\n    RecursiveAstVisitor.prototype.visitLiteralArray = function (ast, context) {\n        return this.visitAll(ast.expressions, context);\n    };\n    RecursiveAstVisitor.prototype.visitLiteralMap = function (ast, context) { return this.visitAll(ast.values, context); };\n    RecursiveAstVisitor.prototype.visitLiteralPrimitive = function (ast, context) { return null; };\n    RecursiveAstVisitor.prototype.visitMethodCall = function (ast, context) {\n        ast.receiver.visit(this);\n        return this.visitAll(ast.args, context);\n    };\n    RecursiveAstVisitor.prototype.visitPrefixNot = function (ast, context) {\n        ast.expression.visit(this);\n        return null;\n    };\n    RecursiveAstVisitor.prototype.visitNonNullAssert = function (ast, context) {\n        ast.expression.visit(this);\n        return null;\n    };\n    RecursiveAstVisitor.prototype.visitPropertyRead = function (ast, context) {\n        ast.receiver.visit(this);\n        return null;\n    };\n    RecursiveAstVisitor.prototype.visitPropertyWrite = function (ast, context) {\n        ast.receiver.visit(this);\n        ast.value.visit(this);\n        return null;\n    };\n    RecursiveAstVisitor.prototype.visitSafePropertyRead = function (ast, context) {\n        ast.receiver.visit(this);\n        return null;\n    };\n    RecursiveAstVisitor.prototype.visitSafeMethodCall = function (ast, context) {\n        ast.receiver.visit(this);\n        return this.visitAll(ast.args, context);\n    };\n    RecursiveAstVisitor.prototype.visitAll = function (asts, context) {\n        var _this = this;\n        asts.forEach(function (ast) { return ast.visit(_this, context); });\n        return null;\n    };\n    RecursiveAstVisitor.prototype.visitQuote = function (ast, context) { return null; };\n    return RecursiveAstVisitor;\n}());\nvar AstTransformer = /** @class */ (function () {\n    function AstTransformer() {\n    }\n    AstTransformer.prototype.visitImplicitReceiver = function (ast, context) { return ast; };\n    AstTransformer.prototype.visitInterpolation = function (ast, context) {\n        return new Interpolation(ast.span, ast.strings, this.visitAll(ast.expressions));\n    };\n    AstTransformer.prototype.visitLiteralPrimitive = function (ast, context) {\n        return new LiteralPrimitive(ast.span, ast.value);\n    };\n    AstTransformer.prototype.visitPropertyRead = function (ast, context) {\n        return new PropertyRead(ast.span, ast.receiver.visit(this), ast.name);\n    };\n    AstTransformer.prototype.visitPropertyWrite = function (ast, context) {\n        return new PropertyWrite(ast.span, ast.receiver.visit(this), ast.name, ast.value.visit(this));\n    };\n    AstTransformer.prototype.visitSafePropertyRead = function (ast, context) {\n        return new SafePropertyRead(ast.span, ast.receiver.visit(this), ast.name);\n    };\n    AstTransformer.prototype.visitMethodCall = function (ast, context) {\n        return new MethodCall(ast.span, ast.receiver.visit(this), ast.name, this.visitAll(ast.args));\n    };\n    AstTransformer.prototype.visitSafeMethodCall = function (ast, context) {\n        return new SafeMethodCall(ast.span, ast.receiver.visit(this), ast.name, this.visitAll(ast.args));\n    };\n    AstTransformer.prototype.visitFunctionCall = function (ast, context) {\n        return new FunctionCall(ast.span, ast.target.visit(this), this.visitAll(ast.args));\n    };\n    AstTransformer.prototype.visitLiteralArray = function (ast, context) {\n        return new LiteralArray(ast.span, this.visitAll(ast.expressions));\n    };\n    AstTransformer.prototype.visitLiteralMap = function (ast, context) {\n        return new LiteralMap(ast.span, ast.keys, this.visitAll(ast.values));\n    };\n    AstTransformer.prototype.visitBinary = function (ast, context) {\n        return new Binary(ast.span, ast.operation, ast.left.visit(this), ast.right.visit(this));\n    };\n    AstTransformer.prototype.visitPrefixNot = function (ast, context) {\n        return new PrefixNot(ast.span, ast.expression.visit(this));\n    };\n    AstTransformer.prototype.visitNonNullAssert = function (ast, context) {\n        return new NonNullAssert(ast.span, ast.expression.visit(this));\n    };\n    AstTransformer.prototype.visitConditional = function (ast, context) {\n        return new Conditional(ast.span, ast.condition.visit(this), ast.trueExp.visit(this), ast.falseExp.visit(this));\n    };\n    AstTransformer.prototype.visitPipe = function (ast, context) {\n        return new BindingPipe(ast.span, ast.exp.visit(this), ast.name, this.visitAll(ast.args));\n    };\n    AstTransformer.prototype.visitKeyedRead = function (ast, context) {\n        return new KeyedRead(ast.span, ast.obj.visit(this), ast.key.visit(this));\n    };\n    AstTransformer.prototype.visitKeyedWrite = function (ast, context) {\n        return new KeyedWrite(ast.span, ast.obj.visit(this), ast.key.visit(this), ast.value.visit(this));\n    };\n    AstTransformer.prototype.visitAll = function (asts) {\n        var res = new Array(asts.length);\n        for (var i = 0; i < asts.length; ++i) {\n            res[i] = asts[i].visit(this);\n        }\n        return res;\n    };\n    AstTransformer.prototype.visitChain = function (ast, context) {\n        return new Chain(ast.span, this.visitAll(ast.expressions));\n    };\n    AstTransformer.prototype.visitQuote = function (ast, context) {\n        return new Quote(ast.span, ast.prefix, ast.uninterpretedExpression, ast.location);\n    };\n    return AstTransformer;\n}());\n// A transformer that only creates new nodes if the transformer makes a change or\n// a change is made a child node.\nvar AstMemoryEfficientTransformer = /** @class */ (function () {\n    function AstMemoryEfficientTransformer() {\n    }\n    AstMemoryEfficientTransformer.prototype.visitImplicitReceiver = function (ast, context) { return ast; };\n    AstMemoryEfficientTransformer.prototype.visitInterpolation = function (ast, context) {\n        var expressions = this.visitAll(ast.expressions);\n        if (expressions !== ast.expressions)\n            return new Interpolation(ast.span, ast.strings, expressions);\n        return ast;\n    };\n    AstMemoryEfficientTransformer.prototype.visitLiteralPrimitive = function (ast, context) { return ast; };\n    AstMemoryEfficientTransformer.prototype.visitPropertyRead = function (ast, context) {\n        var receiver = ast.receiver.visit(this);\n        if (receiver !== ast.receiver) {\n            return new PropertyRead(ast.span, receiver, ast.name);\n        }\n        return ast;\n    };\n    AstMemoryEfficientTransformer.prototype.visitPropertyWrite = function (ast, context) {\n        var receiver = ast.receiver.visit(this);\n        var value = ast.value.visit(this);\n        if (receiver !== ast.receiver || value !== ast.value) {\n            return new PropertyWrite(ast.span, receiver, ast.name, value);\n        }\n        return ast;\n    };\n    AstMemoryEfficientTransformer.prototype.visitSafePropertyRead = function (ast, context) {\n        var receiver = ast.receiver.visit(this);\n        if (receiver !== ast.receiver) {\n            return new SafePropertyRead(ast.span, receiver, ast.name);\n        }\n        return ast;\n    };\n    AstMemoryEfficientTransformer.prototype.visitMethodCall = function (ast, context) {\n        var receiver = ast.receiver.visit(this);\n        if (receiver !== ast.receiver) {\n            return new MethodCall(ast.span, receiver, ast.name, this.visitAll(ast.args));\n        }\n        return ast;\n    };\n    AstMemoryEfficientTransformer.prototype.visitSafeMethodCall = function (ast, context) {\n        var receiver = ast.receiver.visit(this);\n        var args = this.visitAll(ast.args);\n        if (receiver !== ast.receiver || args !== ast.args) {\n            return new SafeMethodCall(ast.span, receiver, ast.name, args);\n        }\n        return ast;\n    };\n    AstMemoryEfficientTransformer.prototype.visitFunctionCall = function (ast, context) {\n        var target = ast.target && ast.target.visit(this);\n        var args = this.visitAll(ast.args);\n        if (target !== ast.target || args !== ast.args) {\n            return new FunctionCall(ast.span, target, args);\n        }\n        return ast;\n    };\n    AstMemoryEfficientTransformer.prototype.visitLiteralArray = function (ast, context) {\n        var expressions = this.visitAll(ast.expressions);\n        if (expressions !== ast.expressions) {\n            return new LiteralArray(ast.span, expressions);\n        }\n        return ast;\n    };\n    AstMemoryEfficientTransformer.prototype.visitLiteralMap = function (ast, context) {\n        var values = this.visitAll(ast.values);\n        if (values !== ast.values) {\n            return new LiteralMap(ast.span, ast.keys, values);\n        }\n        return ast;\n    };\n    AstMemoryEfficientTransformer.prototype.visitBinary = function (ast, context) {\n        var left = ast.left.visit(this);\n        var right = ast.right.visit(this);\n        if (left !== ast.left || right !== ast.right) {\n            return new Binary(ast.span, ast.operation, left, right);\n        }\n        return ast;\n    };\n    AstMemoryEfficientTransformer.prototype.visitPrefixNot = function (ast, context) {\n        var expression = ast.expression.visit(this);\n        if (expression !== ast.expression) {\n            return new PrefixNot(ast.span, expression);\n        }\n        return ast;\n    };\n    AstMemoryEfficientTransformer.prototype.visitNonNullAssert = function (ast, context) {\n        var expression = ast.expression.visit(this);\n        if (expression !== ast.expression) {\n            return new NonNullAssert(ast.span, expression);\n        }\n        return ast;\n    };\n    AstMemoryEfficientTransformer.prototype.visitConditional = function (ast, context) {\n        var condition = ast.condition.visit(this);\n        var trueExp = ast.trueExp.visit(this);\n        var falseExp = ast.falseExp.visit(this);\n        if (condition !== ast.condition || trueExp !== ast.trueExp || falseExp !== falseExp) {\n            return new Conditional(ast.span, condition, trueExp, falseExp);\n        }\n        return ast;\n    };\n    AstMemoryEfficientTransformer.prototype.visitPipe = function (ast, context) {\n        var exp = ast.exp.visit(this);\n        var args = this.visitAll(ast.args);\n        if (exp !== ast.exp || args !== ast.args) {\n            return new BindingPipe(ast.span, exp, ast.name, args);\n        }\n        return ast;\n    };\n    AstMemoryEfficientTransformer.prototype.visitKeyedRead = function (ast, context) {\n        var obj = ast.obj.visit(this);\n        var key = ast.key.visit(this);\n        if (obj !== ast.obj || key !== ast.key) {\n            return new KeyedRead(ast.span, obj, key);\n        }\n        return ast;\n    };\n    AstMemoryEfficientTransformer.prototype.visitKeyedWrite = function (ast, context) {\n        var obj = ast.obj.visit(this);\n        var key = ast.key.visit(this);\n        var value = ast.value.visit(this);\n        if (obj !== ast.obj || key !== ast.key || value !== ast.value) {\n            return new KeyedWrite(ast.span, obj, key, value);\n        }\n        return ast;\n    };\n    AstMemoryEfficientTransformer.prototype.visitAll = function (asts) {\n        var res = new Array(asts.length);\n        var modified = false;\n        for (var i = 0; i < asts.length; ++i) {\n            var original = asts[i];\n            var value = original.visit(this);\n            res[i] = value;\n            modified = modified || value !== original;\n        }\n        return modified ? res : asts;\n    };\n    AstMemoryEfficientTransformer.prototype.visitChain = function (ast, context) {\n        var expressions = this.visitAll(ast.expressions);\n        if (expressions !== ast.expressions) {\n            return new Chain(ast.span, expressions);\n        }\n        return ast;\n    };\n    AstMemoryEfficientTransformer.prototype.visitQuote = function (ast, context) { return ast; };\n    return AstMemoryEfficientTransformer;\n}());\nfunction visitAstChildren(ast, visitor, context) {\n    function visit(ast) {\n        visitor.visit && visitor.visit(ast, context) || ast.visit(visitor, context);\n    }\n    function visitAll(asts) { asts.forEach(visit); }\n    ast.visit({\n        visitBinary: function (ast) {\n            visit(ast.left);\n            visit(ast.right);\n        },\n        visitChain: function (ast) { visitAll(ast.expressions); },\n        visitConditional: function (ast) {\n            visit(ast.condition);\n            visit(ast.trueExp);\n            visit(ast.falseExp);\n        },\n        visitFunctionCall: function (ast) {\n            if (ast.target) {\n                visit(ast.target);\n            }\n            visitAll(ast.args);\n        },\n        visitImplicitReceiver: function (ast) { },\n        visitInterpolation: function (ast) { visitAll(ast.expressions); },\n        visitKeyedRead: function (ast) {\n            visit(ast.obj);\n            visit(ast.key);\n        },\n        visitKeyedWrite: function (ast) {\n            visit(ast.obj);\n            visit(ast.key);\n            visit(ast.obj);\n        },\n        visitLiteralArray: function (ast) { visitAll(ast.expressions); },\n        visitLiteralMap: function (ast) { },\n        visitLiteralPrimitive: function (ast) { },\n        visitMethodCall: function (ast) {\n            visit(ast.receiver);\n            visitAll(ast.args);\n        },\n        visitPipe: function (ast) {\n            visit(ast.exp);\n            visitAll(ast.args);\n        },\n        visitPrefixNot: function (ast) { visit(ast.expression); },\n        visitNonNullAssert: function (ast) { visit(ast.expression); },\n        visitPropertyRead: function (ast) { visit(ast.receiver); },\n        visitPropertyWrite: function (ast) {\n            visit(ast.receiver);\n            visit(ast.value);\n        },\n        visitQuote: function (ast) { },\n        visitSafeMethodCall: function (ast) {\n            visit(ast.receiver);\n            visitAll(ast.args);\n        },\n        visitSafePropertyRead: function (ast) { visit(ast.receiver); },\n    });\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar SplitInterpolation = /** @class */ (function () {\n    function SplitInterpolation(strings, expressions, offsets) {\n        this.strings = strings;\n        this.expressions = expressions;\n        this.offsets = offsets;\n    }\n    return SplitInterpolation;\n}());\nvar TemplateBindingParseResult = /** @class */ (function () {\n    function TemplateBindingParseResult(templateBindings, warnings, errors) {\n        this.templateBindings = templateBindings;\n        this.warnings = warnings;\n        this.errors = errors;\n    }\n    return TemplateBindingParseResult;\n}());\nfunction _createInterpolateRegExp(config) {\n    var pattern = escapeRegExp(config.start) + '([\\\\s\\\\S]*?)' + escapeRegExp(config.end);\n    return new RegExp(pattern, 'g');\n}\nvar Parser = /** @class */ (function () {\n    function Parser(_lexer) {\n        this._lexer = _lexer;\n        this.errors = [];\n    }\n    Parser.prototype.parseAction = function (input, location, interpolationConfig) {\n        if (interpolationConfig === void 0) { interpolationConfig = DEFAULT_INTERPOLATION_CONFIG; }\n        this._checkNoInterpolation(input, location, interpolationConfig);\n        var sourceToLex = this._stripComments(input);\n        var tokens = this._lexer.tokenize(this._stripComments(input));\n        var ast = new _ParseAST(input, location, tokens, sourceToLex.length, true, this.errors, input.length - sourceToLex.length)\n            .parseChain();\n        return new ASTWithSource(ast, input, location, this.errors);\n    };\n    Parser.prototype.parseBinding = function (input, location, interpolationConfig) {\n        if (interpolationConfig === void 0) { interpolationConfig = DEFAULT_INTERPOLATION_CONFIG; }\n        var ast = this._parseBindingAst(input, location, interpolationConfig);\n        return new ASTWithSource(ast, input, location, this.errors);\n    };\n    Parser.prototype.parseSimpleBinding = function (input, location, interpolationConfig) {\n        if (interpolationConfig === void 0) { interpolationConfig = DEFAULT_INTERPOLATION_CONFIG; }\n        var ast = this._parseBindingAst(input, location, interpolationConfig);\n        var errors = SimpleExpressionChecker.check(ast);\n        if (errors.length > 0) {\n            this._reportError(\"Host binding expression cannot contain \" + errors.join(' '), input, location);\n        }\n        return new ASTWithSource(ast, input, location, this.errors);\n    };\n    Parser.prototype._reportError = function (message, input, errLocation, ctxLocation) {\n        this.errors.push(new ParserError(message, input, errLocation, ctxLocation));\n    };\n    Parser.prototype._parseBindingAst = function (input, location, interpolationConfig) {\n        // Quotes expressions use 3rd-party expression language. We don't want to use\n        // our lexer or parser for that, so we check for that ahead of time.\n        var quote = this._parseQuote(input, location);\n        if (quote != null) {\n            return quote;\n        }\n        this._checkNoInterpolation(input, location, interpolationConfig);\n        var sourceToLex = this._stripComments(input);\n        var tokens = this._lexer.tokenize(sourceToLex);\n        return new _ParseAST(input, location, tokens, sourceToLex.length, false, this.errors, input.length - sourceToLex.length)\n            .parseChain();\n    };\n    Parser.prototype._parseQuote = function (input, location) {\n        if (input == null)\n            return null;\n        var prefixSeparatorIndex = input.indexOf(':');\n        if (prefixSeparatorIndex == -1)\n            return null;\n        var prefix = input.substring(0, prefixSeparatorIndex).trim();\n        if (!isIdentifier(prefix))\n            return null;\n        var uninterpretedExpression = input.substring(prefixSeparatorIndex + 1);\n        return new Quote(new ParseSpan(0, input.length), prefix, uninterpretedExpression, location);\n    };\n    Parser.prototype.parseTemplateBindings = function (prefixToken, input, location) {\n        var tokens = this._lexer.tokenize(input);\n        if (prefixToken) {\n            // Prefix the tokens with the tokens from prefixToken but have them take no space (0 index).\n            var prefixTokens = this._lexer.tokenize(prefixToken).map(function (t) {\n                t.index = 0;\n                return t;\n            });\n            tokens.unshift.apply(tokens, __spread(prefixTokens));\n        }\n        return new _ParseAST(input, location, tokens, input.length, false, this.errors, 0)\n            .parseTemplateBindings();\n    };\n    Parser.prototype.parseInterpolation = function (input, location, interpolationConfig) {\n        if (interpolationConfig === void 0) { interpolationConfig = DEFAULT_INTERPOLATION_CONFIG; }\n        var split = this.splitInterpolation(input, location, interpolationConfig);\n        if (split == null)\n            return null;\n        var expressions = [];\n        for (var i = 0; i < split.expressions.length; ++i) {\n            var expressionText = split.expressions[i];\n            var sourceToLex = this._stripComments(expressionText);\n            var tokens = this._lexer.tokenize(sourceToLex);\n            var ast = new _ParseAST(input, location, tokens, sourceToLex.length, false, this.errors, split.offsets[i] + (expressionText.length - sourceToLex.length))\n                .parseChain();\n            expressions.push(ast);\n        }\n        return new ASTWithSource(new Interpolation(new ParseSpan(0, input == null ? 0 : input.length), split.strings, expressions), input, location, this.errors);\n    };\n    Parser.prototype.splitInterpolation = function (input, location, interpolationConfig) {\n        if (interpolationConfig === void 0) { interpolationConfig = DEFAULT_INTERPOLATION_CONFIG; }\n        var regexp = _createInterpolateRegExp(interpolationConfig);\n        var parts = input.split(regexp);\n        if (parts.length <= 1) {\n            return null;\n        }\n        var strings = [];\n        var expressions = [];\n        var offsets = [];\n        var offset = 0;\n        for (var i = 0; i < parts.length; i++) {\n            var part = parts[i];\n            if (i % 2 === 0) {\n                // fixed string\n                strings.push(part);\n                offset += part.length;\n            }\n            else if (part.trim().length > 0) {\n                offset += interpolationConfig.start.length;\n                expressions.push(part);\n                offsets.push(offset);\n                offset += part.length + interpolationConfig.end.length;\n            }\n            else {\n                this._reportError('Blank expressions are not allowed in interpolated strings', input, \"at column \" + this._findInterpolationErrorColumn(parts, i, interpolationConfig) + \" in\", location);\n                expressions.push('$implict');\n                offsets.push(offset);\n            }\n        }\n        return new SplitInterpolation(strings, expressions, offsets);\n    };\n    Parser.prototype.wrapLiteralPrimitive = function (input, location) {\n        return new ASTWithSource(new LiteralPrimitive(new ParseSpan(0, input == null ? 0 : input.length), input), input, location, this.errors);\n    };\n    Parser.prototype._stripComments = function (input) {\n        var i = this._commentStart(input);\n        return i != null ? input.substring(0, i).trim() : input;\n    };\n    Parser.prototype._commentStart = function (input) {\n        var outerQuote = null;\n        for (var i = 0; i < input.length - 1; i++) {\n            var char = input.charCodeAt(i);\n            var nextChar = input.charCodeAt(i + 1);\n            if (char === $SLASH && nextChar == $SLASH && outerQuote == null)\n                return i;\n            if (outerQuote === char) {\n                outerQuote = null;\n            }\n            else if (outerQuote == null && isQuote(char)) {\n                outerQuote = char;\n            }\n        }\n        return null;\n    };\n    Parser.prototype._checkNoInterpolation = function (input, location, interpolationConfig) {\n        var regexp = _createInterpolateRegExp(interpolationConfig);\n        var parts = input.split(regexp);\n        if (parts.length > 1) {\n            this._reportError(\"Got interpolation (\" + interpolationConfig.start + interpolationConfig.end + \") where expression was expected\", input, \"at column \" + this._findInterpolationErrorColumn(parts, 1, interpolationConfig) + \" in\", location);\n        }\n    };\n    Parser.prototype._findInterpolationErrorColumn = function (parts, partInErrIdx, interpolationConfig) {\n        var errLocation = '';\n        for (var j = 0; j < partInErrIdx; j++) {\n            errLocation += j % 2 === 0 ?\n                parts[j] :\n                \"\" + interpolationConfig.start + parts[j] + interpolationConfig.end;\n        }\n        return errLocation.length;\n    };\n    return Parser;\n}());\nvar _ParseAST = /** @class */ (function () {\n    function _ParseAST(input, location, tokens, inputLength, parseAction, errors, offset) {\n        this.input = input;\n        this.location = location;\n        this.tokens = tokens;\n        this.inputLength = inputLength;\n        this.parseAction = parseAction;\n        this.errors = errors;\n        this.offset = offset;\n        this.rparensExpected = 0;\n        this.rbracketsExpected = 0;\n        this.rbracesExpected = 0;\n        this.index = 0;\n    }\n    _ParseAST.prototype.peek = function (offset) {\n        var i = this.index + offset;\n        return i < this.tokens.length ? this.tokens[i] : EOF;\n    };\n    Object.defineProperty(_ParseAST.prototype, \"next\", {\n        get: function () { return this.peek(0); },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(_ParseAST.prototype, \"inputIndex\", {\n        get: function () {\n            return (this.index < this.tokens.length) ? this.next.index + this.offset :\n                this.inputLength + this.offset;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    _ParseAST.prototype.span = function (start) { return new ParseSpan(start, this.inputIndex); };\n    _ParseAST.prototype.advance = function () { this.index++; };\n    _ParseAST.prototype.optionalCharacter = function (code) {\n        if (this.next.isCharacter(code)) {\n            this.advance();\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    _ParseAST.prototype.peekKeywordLet = function () { return this.next.isKeywordLet(); };\n    _ParseAST.prototype.peekKeywordAs = function () { return this.next.isKeywordAs(); };\n    _ParseAST.prototype.expectCharacter = function (code) {\n        if (this.optionalCharacter(code))\n            return;\n        this.error(\"Missing expected \" + String.fromCharCode(code));\n    };\n    _ParseAST.prototype.optionalOperator = function (op) {\n        if (this.next.isOperator(op)) {\n            this.advance();\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    _ParseAST.prototype.expectOperator = function (operator) {\n        if (this.optionalOperator(operator))\n            return;\n        this.error(\"Missing expected operator \" + operator);\n    };\n    _ParseAST.prototype.expectIdentifierOrKeyword = function () {\n        var n = this.next;\n        if (!n.isIdentifier() && !n.isKeyword()) {\n            this.error(\"Unexpected token \" + n + \", expected identifier or keyword\");\n            return '';\n        }\n        this.advance();\n        return n.toString();\n    };\n    _ParseAST.prototype.expectIdentifierOrKeywordOrString = function () {\n        var n = this.next;\n        if (!n.isIdentifier() && !n.isKeyword() && !n.isString()) {\n            this.error(\"Unexpected token \" + n + \", expected identifier, keyword, or string\");\n            return '';\n        }\n        this.advance();\n        return n.toString();\n    };\n    _ParseAST.prototype.parseChain = function () {\n        var exprs = [];\n        var start = this.inputIndex;\n        while (this.index < this.tokens.length) {\n            var expr = this.parsePipe();\n            exprs.push(expr);\n            if (this.optionalCharacter($SEMICOLON)) {\n                if (!this.parseAction) {\n                    this.error('Binding expression cannot contain chained expression');\n                }\n                while (this.optionalCharacter($SEMICOLON)) {\n                } // read all semicolons\n            }\n            else if (this.index < this.tokens.length) {\n                this.error(\"Unexpected token '\" + this.next + \"'\");\n            }\n        }\n        if (exprs.length == 0)\n            return new EmptyExpr(this.span(start));\n        if (exprs.length == 1)\n            return exprs[0];\n        return new Chain(this.span(start), exprs);\n    };\n    _ParseAST.prototype.parsePipe = function () {\n        var result = this.parseExpression();\n        if (this.optionalOperator('|')) {\n            if (this.parseAction) {\n                this.error('Cannot have a pipe in an action expression');\n            }\n            do {\n                var name_1 = this.expectIdentifierOrKeyword();\n                var args = [];\n                while (this.optionalCharacter($COLON)) {\n                    args.push(this.parseExpression());\n                }\n                result = new BindingPipe(this.span(result.span.start), result, name_1, args);\n            } while (this.optionalOperator('|'));\n        }\n        return result;\n    };\n    _ParseAST.prototype.parseExpression = function () { return this.parseConditional(); };\n    _ParseAST.prototype.parseConditional = function () {\n        var start = this.inputIndex;\n        var result = this.parseLogicalOr();\n        if (this.optionalOperator('?')) {\n            var yes = this.parsePipe();\n            var no = void 0;\n            if (!this.optionalCharacter($COLON)) {\n                var end = this.inputIndex;\n                var expression = this.input.substring(start, end);\n                this.error(\"Conditional expression \" + expression + \" requires all 3 expressions\");\n                no = new EmptyExpr(this.span(start));\n            }\n            else {\n                no = this.parsePipe();\n            }\n            return new Conditional(this.span(start), result, yes, no);\n        }\n        else {\n            return result;\n        }\n    };\n    _ParseAST.prototype.parseLogicalOr = function () {\n        // '||'\n        var result = this.parseLogicalAnd();\n        while (this.optionalOperator('||')) {\n            var right = this.parseLogicalAnd();\n            result = new Binary(this.span(result.span.start), '||', result, right);\n        }\n        return result;\n    };\n    _ParseAST.prototype.parseLogicalAnd = function () {\n        // '&&'\n        var result = this.parseEquality();\n        while (this.optionalOperator('&&')) {\n            var right = this.parseEquality();\n            result = new Binary(this.span(result.span.start), '&&', result, right);\n        }\n        return result;\n    };\n    _ParseAST.prototype.parseEquality = function () {\n        // '==','!=','===','!=='\n        var result = this.parseRelational();\n        while (this.next.type == TokenType.Operator) {\n            var operator = this.next.strValue;\n            switch (operator) {\n                case '==':\n                case '===':\n                case '!=':\n                case '!==':\n                    this.advance();\n                    var right = this.parseRelational();\n                    result = new Binary(this.span(result.span.start), operator, result, right);\n                    continue;\n            }\n            break;\n        }\n        return result;\n    };\n    _ParseAST.prototype.parseRelational = function () {\n        // '<', '>', '<=', '>='\n        var result = this.parseAdditive();\n        while (this.next.type == TokenType.Operator) {\n            var operator = this.next.strValue;\n            switch (operator) {\n                case '<':\n                case '>':\n                case '<=':\n                case '>=':\n                    this.advance();\n                    var right = this.parseAdditive();\n                    result = new Binary(this.span(result.span.start), operator, result, right);\n                    continue;\n            }\n            break;\n        }\n        return result;\n    };\n    _ParseAST.prototype.parseAdditive = function () {\n        // '+', '-'\n        var result = this.parseMultiplicative();\n        while (this.next.type == TokenType.Operator) {\n            var operator = this.next.strValue;\n            switch (operator) {\n                case '+':\n                case '-':\n                    this.advance();\n                    var right = this.parseMultiplicative();\n                    result = new Binary(this.span(result.span.start), operator, result, right);\n                    continue;\n            }\n            break;\n        }\n        return result;\n    };\n    _ParseAST.prototype.parseMultiplicative = function () {\n        // '*', '%', '/'\n        var result = this.parsePrefix();\n        while (this.next.type == TokenType.Operator) {\n            var operator = this.next.strValue;\n            switch (operator) {\n                case '*':\n                case '%':\n                case '/':\n                    this.advance();\n                    var right = this.parsePrefix();\n                    result = new Binary(this.span(result.span.start), operator, result, right);\n                    continue;\n            }\n            break;\n        }\n        return result;\n    };\n    _ParseAST.prototype.parsePrefix = function () {\n        if (this.next.type == TokenType.Operator) {\n            var start = this.inputIndex;\n            var operator = this.next.strValue;\n            var result = void 0;\n            switch (operator) {\n                case '+':\n                    this.advance();\n                    result = this.parsePrefix();\n                    return new Binary(this.span(start), '-', result, new LiteralPrimitive(new ParseSpan(start, start), 0));\n                case '-':\n                    this.advance();\n                    result = this.parsePrefix();\n                    return new Binary(this.span(start), operator, new LiteralPrimitive(new ParseSpan(start, start), 0), result);\n                case '!':\n                    this.advance();\n                    result = this.parsePrefix();\n                    return new PrefixNot(this.span(start), result);\n            }\n        }\n        return this.parseCallChain();\n    };\n    _ParseAST.prototype.parseCallChain = function () {\n        var result = this.parsePrimary();\n        while (true) {\n            if (this.optionalCharacter($PERIOD)) {\n                result = this.parseAccessMemberOrMethodCall(result, false);\n            }\n            else if (this.optionalOperator('?.')) {\n                result = this.parseAccessMemberOrMethodCall(result, true);\n            }\n            else if (this.optionalCharacter($LBRACKET)) {\n                this.rbracketsExpected++;\n                var key = this.parsePipe();\n                this.rbracketsExpected--;\n                this.expectCharacter($RBRACKET);\n                if (this.optionalOperator('=')) {\n                    var value = this.parseConditional();\n                    result = new KeyedWrite(this.span(result.span.start), result, key, value);\n                }\n                else {\n                    result = new KeyedRead(this.span(result.span.start), result, key);\n                }\n            }\n            else if (this.optionalCharacter($LPAREN)) {\n                this.rparensExpected++;\n                var args = this.parseCallArguments();\n                this.rparensExpected--;\n                this.expectCharacter($RPAREN);\n                result = new FunctionCall(this.span(result.span.start), result, args);\n            }\n            else if (this.optionalOperator('!')) {\n                result = new NonNullAssert(this.span(result.span.start), result);\n            }\n            else {\n                return result;\n            }\n        }\n    };\n    _ParseAST.prototype.parsePrimary = function () {\n        var start = this.inputIndex;\n        if (this.optionalCharacter($LPAREN)) {\n            this.rparensExpected++;\n            var result = this.parsePipe();\n            this.rparensExpected--;\n            this.expectCharacter($RPAREN);\n            return result;\n        }\n        else if (this.next.isKeywordNull()) {\n            this.advance();\n            return new LiteralPrimitive(this.span(start), null);\n        }\n        else if (this.next.isKeywordUndefined()) {\n            this.advance();\n            return new LiteralPrimitive(this.span(start), void 0);\n        }\n        else if (this.next.isKeywordTrue()) {\n            this.advance();\n            return new LiteralPrimitive(this.span(start), true);\n        }\n        else if (this.next.isKeywordFalse()) {\n            this.advance();\n            return new LiteralPrimitive(this.span(start), false);\n        }\n        else if (this.next.isKeywordThis()) {\n            this.advance();\n            return new ImplicitReceiver(this.span(start));\n        }\n        else if (this.optionalCharacter($LBRACKET)) {\n            this.rbracketsExpected++;\n            var elements = this.parseExpressionList($RBRACKET);\n            this.rbracketsExpected--;\n            this.expectCharacter($RBRACKET);\n            return new LiteralArray(this.span(start), elements);\n        }\n        else if (this.next.isCharacter($LBRACE)) {\n            return this.parseLiteralMap();\n        }\n        else if (this.next.isIdentifier()) {\n            return this.parseAccessMemberOrMethodCall(new ImplicitReceiver(this.span(start)), false);\n        }\n        else if (this.next.isNumber()) {\n            var value = this.next.toNumber();\n            this.advance();\n            return new LiteralPrimitive(this.span(start), value);\n        }\n        else if (this.next.isString()) {\n            var literalValue = this.next.toString();\n            this.advance();\n            return new LiteralPrimitive(this.span(start), literalValue);\n        }\n        else if (this.index >= this.tokens.length) {\n            this.error(\"Unexpected end of expression: \" + this.input);\n            return new EmptyExpr(this.span(start));\n        }\n        else {\n            this.error(\"Unexpected token \" + this.next);\n            return new EmptyExpr(this.span(start));\n        }\n    };\n    _ParseAST.prototype.parseExpressionList = function (terminator) {\n        var result = [];\n        if (!this.next.isCharacter(terminator)) {\n            do {\n                result.push(this.parsePipe());\n            } while (this.optionalCharacter($COMMA));\n        }\n        return result;\n    };\n    _ParseAST.prototype.parseLiteralMap = function () {\n        var keys = [];\n        var values = [];\n        var start = this.inputIndex;\n        this.expectCharacter($LBRACE);\n        if (!this.optionalCharacter($RBRACE)) {\n            this.rbracesExpected++;\n            do {\n                var quoted = this.next.isString();\n                var key = this.expectIdentifierOrKeywordOrString();\n                keys.push({ key: key, quoted: quoted });\n                this.expectCharacter($COLON);\n                values.push(this.parsePipe());\n            } while (this.optionalCharacter($COMMA));\n            this.rbracesExpected--;\n            this.expectCharacter($RBRACE);\n        }\n        return new LiteralMap(this.span(start), keys, values);\n    };\n    _ParseAST.prototype.parseAccessMemberOrMethodCall = function (receiver, isSafe) {\n        if (isSafe === void 0) { isSafe = false; }\n        var start = receiver.span.start;\n        var id = this.expectIdentifierOrKeyword();\n        if (this.optionalCharacter($LPAREN)) {\n            this.rparensExpected++;\n            var args = this.parseCallArguments();\n            this.expectCharacter($RPAREN);\n            this.rparensExpected--;\n            var span = this.span(start);\n            return isSafe ? new SafeMethodCall(span, receiver, id, args) :\n                new MethodCall(span, receiver, id, args);\n        }\n        else {\n            if (isSafe) {\n                if (this.optionalOperator('=')) {\n                    this.error('The \\'?.\\' operator cannot be used in the assignment');\n                    return new EmptyExpr(this.span(start));\n                }\n                else {\n                    return new SafePropertyRead(this.span(start), receiver, id);\n                }\n            }\n            else {\n                if (this.optionalOperator('=')) {\n                    if (!this.parseAction) {\n                        this.error('Bindings cannot contain assignments');\n                        return new EmptyExpr(this.span(start));\n                    }\n                    var value = this.parseConditional();\n                    return new PropertyWrite(this.span(start), receiver, id, value);\n                }\n                else {\n                    return new PropertyRead(this.span(start), receiver, id);\n                }\n            }\n        }\n    };\n    _ParseAST.prototype.parseCallArguments = function () {\n        if (this.next.isCharacter($RPAREN))\n            return [];\n        var positionals = [];\n        do {\n            positionals.push(this.parsePipe());\n        } while (this.optionalCharacter($COMMA));\n        return positionals;\n    };\n    /**\n     * An identifier, a keyword, a string with an optional `-` in between.\n     */\n    _ParseAST.prototype.expectTemplateBindingKey = function () {\n        var result = '';\n        var operatorFound = false;\n        do {\n            result += this.expectIdentifierOrKeywordOrString();\n            operatorFound = this.optionalOperator('-');\n            if (operatorFound) {\n                result += '-';\n            }\n        } while (operatorFound);\n        return result.toString();\n    };\n    _ParseAST.prototype.parseTemplateBindings = function () {\n        var bindings = [];\n        var prefix = null;\n        var warnings = [];\n        while (this.index < this.tokens.length) {\n            var start = this.inputIndex;\n            var keyIsVar = this.peekKeywordLet();\n            if (keyIsVar) {\n                this.advance();\n            }\n            var rawKey = this.expectTemplateBindingKey();\n            var key = rawKey;\n            if (!keyIsVar) {\n                if (prefix == null) {\n                    prefix = key;\n                }\n                else {\n                    key = prefix + key[0].toUpperCase() + key.substring(1);\n                }\n            }\n            this.optionalCharacter($COLON);\n            var name_2 = null;\n            var expression = null;\n            if (keyIsVar) {\n                if (this.optionalOperator('=')) {\n                    name_2 = this.expectTemplateBindingKey();\n                }\n                else {\n                    name_2 = '\\$implicit';\n                }\n            }\n            else if (this.peekKeywordAs()) {\n                var letStart = this.inputIndex;\n                this.advance(); // consume `as`\n                name_2 = rawKey;\n                key = this.expectTemplateBindingKey(); // read local var name\n                keyIsVar = true;\n            }\n            else if (this.next !== EOF && !this.peekKeywordLet()) {\n                var start_1 = this.inputIndex;\n                var ast = this.parsePipe();\n                var source = this.input.substring(start_1 - this.offset, this.inputIndex - this.offset);\n                expression = new ASTWithSource(ast, source, this.location, this.errors);\n            }\n            bindings.push(new TemplateBinding(this.span(start), key, keyIsVar, name_2, expression));\n            if (this.peekKeywordAs() && !keyIsVar) {\n                var letStart = this.inputIndex;\n                this.advance(); // consume `as`\n                var letName = this.expectTemplateBindingKey(); // read local var name\n                bindings.push(new TemplateBinding(this.span(letStart), letName, true, key, null));\n            }\n            if (!this.optionalCharacter($SEMICOLON)) {\n                this.optionalCharacter($COMMA);\n            }\n        }\n        return new TemplateBindingParseResult(bindings, warnings, this.errors);\n    };\n    _ParseAST.prototype.error = function (message, index) {\n        if (index === void 0) { index = null; }\n        this.errors.push(new ParserError(message, this.input, this.locationText(index), this.location));\n        this.skip();\n    };\n    _ParseAST.prototype.locationText = function (index) {\n        if (index === void 0) { index = null; }\n        if (index == null)\n            index = this.index;\n        return (index < this.tokens.length) ? \"at column \" + (this.tokens[index].index + 1) + \" in\" :\n            \"at the end of the expression\";\n    };\n    // Error recovery should skip tokens until it encounters a recovery point. skip() treats\n    // the end of input and a ';' as unconditionally a recovery point. It also treats ')',\n    // '}' and ']' as conditional recovery points if one of calling productions is expecting\n    // one of these symbols. This allows skip() to recover from errors such as '(a.) + 1' allowing\n    // more of the AST to be retained (it doesn't skip any tokens as the ')' is retained because\n    // of the '(' begins an '(' <expr> ')' production). The recovery points of grouping symbols\n    // must be conditional as they must be skipped if none of the calling productions are not\n    // expecting the closing token else we will never make progress in the case of an\n    // extraneous group closing symbol (such as a stray ')'). This is not the case for ';' because\n    // parseChain() is always the root production and it expects a ';'.\n    // If a production expects one of these token it increments the corresponding nesting count,\n    // and then decrements it just prior to checking if the token is in the input.\n    _ParseAST.prototype.skip = function () {\n        var n = this.next;\n        while (this.index < this.tokens.length && !n.isCharacter($SEMICOLON) &&\n            (this.rparensExpected <= 0 || !n.isCharacter($RPAREN)) &&\n            (this.rbracesExpected <= 0 || !n.isCharacter($RBRACE)) &&\n            (this.rbracketsExpected <= 0 || !n.isCharacter($RBRACKET))) {\n            if (this.next.isError()) {\n                this.errors.push(new ParserError(this.next.toString(), this.input, this.locationText(), this.location));\n            }\n            this.advance();\n            n = this.next;\n        }\n    };\n    return _ParseAST;\n}());\nvar SimpleExpressionChecker = /** @class */ (function () {\n    function SimpleExpressionChecker() {\n        this.errors = [];\n    }\n    SimpleExpressionChecker.check = function (ast) {\n        var s = new SimpleExpressionChecker();\n        ast.visit(s);\n        return s.errors;\n    };\n    SimpleExpressionChecker.prototype.visitImplicitReceiver = function (ast, context) { };\n    SimpleExpressionChecker.prototype.visitInterpolation = function (ast, context) { };\n    SimpleExpressionChecker.prototype.visitLiteralPrimitive = function (ast, context) { };\n    SimpleExpressionChecker.prototype.visitPropertyRead = function (ast, context) { };\n    SimpleExpressionChecker.prototype.visitPropertyWrite = function (ast, context) { };\n    SimpleExpressionChecker.prototype.visitSafePropertyRead = function (ast, context) { };\n    SimpleExpressionChecker.prototype.visitMethodCall = function (ast, context) { };\n    SimpleExpressionChecker.prototype.visitSafeMethodCall = function (ast, context) { };\n    SimpleExpressionChecker.prototype.visitFunctionCall = function (ast, context) { };\n    SimpleExpressionChecker.prototype.visitLiteralArray = function (ast, context) { this.visitAll(ast.expressions); };\n    SimpleExpressionChecker.prototype.visitLiteralMap = function (ast, context) { this.visitAll(ast.values); };\n    SimpleExpressionChecker.prototype.visitBinary = function (ast, context) { };\n    SimpleExpressionChecker.prototype.visitPrefixNot = function (ast, context) { };\n    SimpleExpressionChecker.prototype.visitNonNullAssert = function (ast, context) { };\n    SimpleExpressionChecker.prototype.visitConditional = function (ast, context) { };\n    SimpleExpressionChecker.prototype.visitPipe = function (ast, context) { this.errors.push('pipes'); };\n    SimpleExpressionChecker.prototype.visitKeyedRead = function (ast, context) { };\n    SimpleExpressionChecker.prototype.visitKeyedWrite = function (ast, context) { };\n    SimpleExpressionChecker.prototype.visitAll = function (asts) {\n        var _this = this;\n        return asts.map(function (node) { return node.visit(_this); });\n    };\n    SimpleExpressionChecker.prototype.visitChain = function (ast, context) { };\n    SimpleExpressionChecker.prototype.visitQuote = function (ast, context) { };\n    return SimpleExpressionChecker;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar ParseLocation = /** @class */ (function () {\n    function ParseLocation(file, offset, line, col) {\n        this.file = file;\n        this.offset = offset;\n        this.line = line;\n        this.col = col;\n    }\n    ParseLocation.prototype.toString = function () {\n        return this.offset != null ? this.file.url + \"@\" + this.line + \":\" + this.col : this.file.url;\n    };\n    ParseLocation.prototype.moveBy = function (delta) {\n        var source = this.file.content;\n        var len = source.length;\n        var offset = this.offset;\n        var line = this.line;\n        var col = this.col;\n        while (offset > 0 && delta < 0) {\n            offset--;\n            delta++;\n            var ch = source.charCodeAt(offset);\n            if (ch == $LF) {\n                line--;\n                var priorLine = source.substr(0, offset - 1).lastIndexOf(String.fromCharCode($LF));\n                col = priorLine > 0 ? offset - priorLine : offset;\n            }\n            else {\n                col--;\n            }\n        }\n        while (offset < len && delta > 0) {\n            var ch = source.charCodeAt(offset);\n            offset++;\n            delta--;\n            if (ch == $LF) {\n                line++;\n                col = 0;\n            }\n            else {\n                col++;\n            }\n        }\n        return new ParseLocation(this.file, offset, line, col);\n    };\n    // Return the source around the location\n    // Up to `maxChars` or `maxLines` on each side of the location\n    ParseLocation.prototype.getContext = function (maxChars, maxLines) {\n        var content = this.file.content;\n        var startOffset = this.offset;\n        if (startOffset != null) {\n            if (startOffset > content.length - 1) {\n                startOffset = content.length - 1;\n            }\n            var endOffset = startOffset;\n            var ctxChars = 0;\n            var ctxLines = 0;\n            while (ctxChars < maxChars && startOffset > 0) {\n                startOffset--;\n                ctxChars++;\n                if (content[startOffset] == '\\n') {\n                    if (++ctxLines == maxLines) {\n                        break;\n                    }\n                }\n            }\n            ctxChars = 0;\n            ctxLines = 0;\n            while (ctxChars < maxChars && endOffset < content.length - 1) {\n                endOffset++;\n                ctxChars++;\n                if (content[endOffset] == '\\n') {\n                    if (++ctxLines == maxLines) {\n                        break;\n                    }\n                }\n            }\n            return {\n                before: content.substring(startOffset, this.offset),\n                after: content.substring(this.offset, endOffset + 1),\n            };\n        }\n        return null;\n    };\n    return ParseLocation;\n}());\nvar ParseSourceFile = /** @class */ (function () {\n    function ParseSourceFile(content, url) {\n        this.content = content;\n        this.url = url;\n    }\n    return ParseSourceFile;\n}());\nvar ParseSourceSpan = /** @class */ (function () {\n    function ParseSourceSpan(start, end, details) {\n        if (details === void 0) { details = null; }\n        this.start = start;\n        this.end = end;\n        this.details = details;\n    }\n    ParseSourceSpan.prototype.toString = function () {\n        return this.start.file.content.substring(this.start.offset, this.end.offset);\n    };\n    return ParseSourceSpan;\n}());\nvar ParseErrorLevel;\n(function (ParseErrorLevel) {\n    ParseErrorLevel[ParseErrorLevel[\"WARNING\"] = 0] = \"WARNING\";\n    ParseErrorLevel[ParseErrorLevel[\"ERROR\"] = 1] = \"ERROR\";\n})(ParseErrorLevel || (ParseErrorLevel = {}));\nvar ParseError = /** @class */ (function () {\n    function ParseError(span, msg, level) {\n        if (level === void 0) { level = ParseErrorLevel.ERROR; }\n        this.span = span;\n        this.msg = msg;\n        this.level = level;\n    }\n    ParseError.prototype.contextualMessage = function () {\n        var ctx = this.span.start.getContext(100, 3);\n        return ctx ? this.msg + \" (\\\"\" + ctx.before + \"[\" + ParseErrorLevel[this.level] + \" ->]\" + ctx.after + \"\\\")\" :\n            this.msg;\n    };\n    ParseError.prototype.toString = function () {\n        var details = this.span.details ? \", \" + this.span.details : '';\n        return this.contextualMessage() + \": \" + this.span.start + details;\n    };\n    return ParseError;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar TokenType$1;\n(function (TokenType) {\n    TokenType[TokenType[\"TAG_OPEN_START\"] = 0] = \"TAG_OPEN_START\";\n    TokenType[TokenType[\"TAG_OPEN_END\"] = 1] = \"TAG_OPEN_END\";\n    TokenType[TokenType[\"TAG_OPEN_END_VOID\"] = 2] = \"TAG_OPEN_END_VOID\";\n    TokenType[TokenType[\"TAG_CLOSE\"] = 3] = \"TAG_CLOSE\";\n    TokenType[TokenType[\"TEXT\"] = 4] = \"TEXT\";\n    TokenType[TokenType[\"ESCAPABLE_RAW_TEXT\"] = 5] = \"ESCAPABLE_RAW_TEXT\";\n    TokenType[TokenType[\"RAW_TEXT\"] = 6] = \"RAW_TEXT\";\n    TokenType[TokenType[\"COMMENT_START\"] = 7] = \"COMMENT_START\";\n    TokenType[TokenType[\"COMMENT_END\"] = 8] = \"COMMENT_END\";\n    TokenType[TokenType[\"CDATA_START\"] = 9] = \"CDATA_START\";\n    TokenType[TokenType[\"CDATA_END\"] = 10] = \"CDATA_END\";\n    TokenType[TokenType[\"ATTR_NAME\"] = 11] = \"ATTR_NAME\";\n    TokenType[TokenType[\"ATTR_VALUE\"] = 12] = \"ATTR_VALUE\";\n    TokenType[TokenType[\"DOC_TYPE\"] = 13] = \"DOC_TYPE\";\n    TokenType[TokenType[\"EXPANSION_FORM_START\"] = 14] = \"EXPANSION_FORM_START\";\n    TokenType[TokenType[\"EXPANSION_CASE_VALUE\"] = 15] = \"EXPANSION_CASE_VALUE\";\n    TokenType[TokenType[\"EXPANSION_CASE_EXP_START\"] = 16] = \"EXPANSION_CASE_EXP_START\";\n    TokenType[TokenType[\"EXPANSION_CASE_EXP_END\"] = 17] = \"EXPANSION_CASE_EXP_END\";\n    TokenType[TokenType[\"EXPANSION_FORM_END\"] = 18] = \"EXPANSION_FORM_END\";\n    TokenType[TokenType[\"EOF\"] = 19] = \"EOF\";\n})(TokenType$1 || (TokenType$1 = {}));\nvar Token$1 = /** @class */ (function () {\n    function Token(type, parts, sourceSpan) {\n        this.type = type;\n        this.parts = parts;\n        this.sourceSpan = sourceSpan;\n    }\n    return Token;\n}());\nvar TokenError = /** @class */ (function (_super) {\n    __extends(TokenError, _super);\n    function TokenError(errorMsg, tokenType, span) {\n        var _this = _super.call(this, span, errorMsg) || this;\n        _this.tokenType = tokenType;\n        return _this;\n    }\n    return TokenError;\n}(ParseError));\nvar TokenizeResult = /** @class */ (function () {\n    function TokenizeResult(tokens, errors) {\n        this.tokens = tokens;\n        this.errors = errors;\n    }\n    return TokenizeResult;\n}());\nfunction tokenize(source, url, getTagDefinition, tokenizeExpansionForms, interpolationConfig) {\n    if (tokenizeExpansionForms === void 0) { tokenizeExpansionForms = false; }\n    if (interpolationConfig === void 0) { interpolationConfig = DEFAULT_INTERPOLATION_CONFIG; }\n    return new _Tokenizer(new ParseSourceFile(source, url), getTagDefinition, tokenizeExpansionForms, interpolationConfig)\n        .tokenize();\n}\nvar _CR_OR_CRLF_REGEXP = /\\r\\n?/g;\nfunction _unexpectedCharacterErrorMsg(charCode) {\n    var char = charCode === $EOF ? 'EOF' : String.fromCharCode(charCode);\n    return \"Unexpected character \\\"\" + char + \"\\\"\";\n}\nfunction _unknownEntityErrorMsg(entitySrc) {\n    return \"Unknown entity \\\"\" + entitySrc + \"\\\" - use the \\\"&#<decimal>;\\\" or  \\\"&#x<hex>;\\\" syntax\";\n}\nvar _ControlFlowError = /** @class */ (function () {\n    function _ControlFlowError(error) {\n        this.error = error;\n    }\n    return _ControlFlowError;\n}());\n// See http://www.w3.org/TR/html51/syntax.html#writing\nvar _Tokenizer = /** @class */ (function () {\n    /**\n     * @param _file The html source\n     * @param _getTagDefinition\n     * @param _tokenizeIcu Whether to tokenize ICU messages (considered as text nodes when false)\n     * @param _interpolationConfig\n     */\n    function _Tokenizer(_file, _getTagDefinition, _tokenizeIcu, _interpolationConfig) {\n        if (_interpolationConfig === void 0) { _interpolationConfig = DEFAULT_INTERPOLATION_CONFIG; }\n        this._file = _file;\n        this._getTagDefinition = _getTagDefinition;\n        this._tokenizeIcu = _tokenizeIcu;\n        this._interpolationConfig = _interpolationConfig;\n        // Note: this is always lowercase!\n        this._peek = -1;\n        this._nextPeek = -1;\n        this._index = -1;\n        this._line = 0;\n        this._column = -1;\n        this._expansionCaseStack = [];\n        this._inInterpolation = false;\n        this.tokens = [];\n        this.errors = [];\n        this._input = _file.content;\n        this._length = _file.content.length;\n        this._advance();\n    }\n    _Tokenizer.prototype._processCarriageReturns = function (content) {\n        // http://www.w3.org/TR/html5/syntax.html#preprocessing-the-input-stream\n        // In order to keep the original position in the source, we can not\n        // pre-process it.\n        // Instead CRs are processed right before instantiating the tokens.\n        return content.replace(_CR_OR_CRLF_REGEXP, '\\n');\n    };\n    _Tokenizer.prototype.tokenize = function () {\n        while (this._peek !== $EOF) {\n            var start = this._getLocation();\n            try {\n                if (this._attemptCharCode($LT)) {\n                    if (this._attemptCharCode($BANG)) {\n                        if (this._attemptCharCode($LBRACKET)) {\n                            this._consumeCdata(start);\n                        }\n                        else if (this._attemptCharCode($MINUS)) {\n                            this._consumeComment(start);\n                        }\n                        else {\n                            this._consumeDocType(start);\n                        }\n                    }\n                    else if (this._attemptCharCode($SLASH)) {\n                        this._consumeTagClose(start);\n                    }\n                    else {\n                        this._consumeTagOpen(start);\n                    }\n                }\n                else if (!(this._tokenizeIcu && this._tokenizeExpansionForm())) {\n                    this._consumeText();\n                }\n            }\n            catch (e) {\n                if (e instanceof _ControlFlowError) {\n                    this.errors.push(e.error);\n                }\n                else {\n                    throw e;\n                }\n            }\n        }\n        this._beginToken(TokenType$1.EOF);\n        this._endToken([]);\n        return new TokenizeResult(mergeTextTokens(this.tokens), this.errors);\n    };\n    /**\n     * @returns whether an ICU token has been created\n     * @internal\n     */\n    _Tokenizer.prototype._tokenizeExpansionForm = function () {\n        if (isExpansionFormStart(this._input, this._index, this._interpolationConfig)) {\n            this._consumeExpansionFormStart();\n            return true;\n        }\n        if (isExpansionCaseStart(this._peek) && this._isInExpansionForm()) {\n            this._consumeExpansionCaseStart();\n            return true;\n        }\n        if (this._peek === $RBRACE) {\n            if (this._isInExpansionCase()) {\n                this._consumeExpansionCaseEnd();\n                return true;\n            }\n            if (this._isInExpansionForm()) {\n                this._consumeExpansionFormEnd();\n                return true;\n            }\n        }\n        return false;\n    };\n    _Tokenizer.prototype._getLocation = function () {\n        return new ParseLocation(this._file, this._index, this._line, this._column);\n    };\n    _Tokenizer.prototype._getSpan = function (start, end) {\n        if (start === void 0) { start = this._getLocation(); }\n        if (end === void 0) { end = this._getLocation(); }\n        return new ParseSourceSpan(start, end);\n    };\n    _Tokenizer.prototype._beginToken = function (type, start) {\n        if (start === void 0) { start = this._getLocation(); }\n        this._currentTokenStart = start;\n        this._currentTokenType = type;\n    };\n    _Tokenizer.prototype._endToken = function (parts, end) {\n        if (end === void 0) { end = this._getLocation(); }\n        var token = new Token$1(this._currentTokenType, parts, new ParseSourceSpan(this._currentTokenStart, end));\n        this.tokens.push(token);\n        this._currentTokenStart = null;\n        this._currentTokenType = null;\n        return token;\n    };\n    _Tokenizer.prototype._createError = function (msg, span) {\n        if (this._isInExpansionForm()) {\n            msg += \" (Do you have an unescaped \\\"{\\\" in your template? Use \\\"{{ '{' }}\\\") to escape it.)\";\n        }\n        var error = new TokenError(msg, this._currentTokenType, span);\n        this._currentTokenStart = null;\n        this._currentTokenType = null;\n        return new _ControlFlowError(error);\n    };\n    _Tokenizer.prototype._advance = function () {\n        if (this._index >= this._length) {\n            throw this._createError(_unexpectedCharacterErrorMsg($EOF), this._getSpan());\n        }\n        if (this._peek === $LF) {\n            this._line++;\n            this._column = 0;\n        }\n        else if (this._peek !== $LF && this._peek !== $CR) {\n            this._column++;\n        }\n        this._index++;\n        this._peek = this._index >= this._length ? $EOF : this._input.charCodeAt(this._index);\n        this._nextPeek =\n            this._index + 1 >= this._length ? $EOF : this._input.charCodeAt(this._index + 1);\n    };\n    _Tokenizer.prototype._attemptCharCode = function (charCode) {\n        if (this._peek === charCode) {\n            this._advance();\n            return true;\n        }\n        return false;\n    };\n    _Tokenizer.prototype._attemptCharCodeCaseInsensitive = function (charCode) {\n        if (compareCharCodeCaseInsensitive(this._peek, charCode)) {\n            this._advance();\n            return true;\n        }\n        return false;\n    };\n    _Tokenizer.prototype._requireCharCode = function (charCode) {\n        var location = this._getLocation();\n        if (!this._attemptCharCode(charCode)) {\n            throw this._createError(_unexpectedCharacterErrorMsg(this._peek), this._getSpan(location, location));\n        }\n    };\n    _Tokenizer.prototype._attemptStr = function (chars) {\n        var len = chars.length;\n        if (this._index + len > this._length) {\n            return false;\n        }\n        var initialPosition = this._savePosition();\n        for (var i = 0; i < len; i++) {\n            if (!this._attemptCharCode(chars.charCodeAt(i))) {\n                // If attempting to parse the string fails, we want to reset the parser\n                // to where it was before the attempt\n                this._restorePosition(initialPosition);\n                return false;\n            }\n        }\n        return true;\n    };\n    _Tokenizer.prototype._attemptStrCaseInsensitive = function (chars) {\n        for (var i = 0; i < chars.length; i++) {\n            if (!this._attemptCharCodeCaseInsensitive(chars.charCodeAt(i))) {\n                return false;\n            }\n        }\n        return true;\n    };\n    _Tokenizer.prototype._requireStr = function (chars) {\n        var location = this._getLocation();\n        if (!this._attemptStr(chars)) {\n            throw this._createError(_unexpectedCharacterErrorMsg(this._peek), this._getSpan(location));\n        }\n    };\n    _Tokenizer.prototype._attemptCharCodeUntilFn = function (predicate) {\n        while (!predicate(this._peek)) {\n            this._advance();\n        }\n    };\n    _Tokenizer.prototype._requireCharCodeUntilFn = function (predicate, len) {\n        var start = this._getLocation();\n        this._attemptCharCodeUntilFn(predicate);\n        if (this._index - start.offset < len) {\n            throw this._createError(_unexpectedCharacterErrorMsg(this._peek), this._getSpan(start, start));\n        }\n    };\n    _Tokenizer.prototype._attemptUntilChar = function (char) {\n        while (this._peek !== char) {\n            this._advance();\n        }\n    };\n    _Tokenizer.prototype._readChar = function (decodeEntities) {\n        if (decodeEntities && this._peek === $AMPERSAND) {\n            return this._decodeEntity();\n        }\n        else {\n            var index = this._index;\n            this._advance();\n            return this._input[index];\n        }\n    };\n    _Tokenizer.prototype._decodeEntity = function () {\n        var start = this._getLocation();\n        this._advance();\n        if (this._attemptCharCode($HASH)) {\n            var isHex = this._attemptCharCode($x) || this._attemptCharCode($X);\n            var numberStart = this._getLocation().offset;\n            this._attemptCharCodeUntilFn(isDigitEntityEnd);\n            if (this._peek != $SEMICOLON) {\n                throw this._createError(_unexpectedCharacterErrorMsg(this._peek), this._getSpan());\n            }\n            this._advance();\n            var strNum = this._input.substring(numberStart, this._index - 1);\n            try {\n                var charCode = parseInt(strNum, isHex ? 16 : 10);\n                return String.fromCharCode(charCode);\n            }\n            catch (e) {\n                var entity = this._input.substring(start.offset + 1, this._index - 1);\n                throw this._createError(_unknownEntityErrorMsg(entity), this._getSpan(start));\n            }\n        }\n        else {\n            var startPosition = this._savePosition();\n            this._attemptCharCodeUntilFn(isNamedEntityEnd);\n            if (this._peek != $SEMICOLON) {\n                this._restorePosition(startPosition);\n                return '&';\n            }\n            this._advance();\n            var name_1 = this._input.substring(start.offset + 1, this._index - 1);\n            var char = NAMED_ENTITIES[name_1];\n            if (!char) {\n                throw this._createError(_unknownEntityErrorMsg(name_1), this._getSpan(start));\n            }\n            return char;\n        }\n    };\n    _Tokenizer.prototype._consumeRawText = function (decodeEntities, firstCharOfEnd, attemptEndRest) {\n        var tagCloseStart;\n        var textStart = this._getLocation();\n        this._beginToken(decodeEntities ? TokenType$1.ESCAPABLE_RAW_TEXT : TokenType$1.RAW_TEXT, textStart);\n        var parts = [];\n        while (true) {\n            tagCloseStart = this._getLocation();\n            if (this._attemptCharCode(firstCharOfEnd) && attemptEndRest()) {\n                break;\n            }\n            if (this._index > tagCloseStart.offset) {\n                // add the characters consumed by the previous if statement to the output\n                parts.push(this._input.substring(tagCloseStart.offset, this._index));\n            }\n            while (this._peek !== firstCharOfEnd) {\n                parts.push(this._readChar(decodeEntities));\n            }\n        }\n        return this._endToken([this._processCarriageReturns(parts.join(''))], tagCloseStart);\n    };\n    _Tokenizer.prototype._consumeComment = function (start) {\n        var _this = this;\n        this._beginToken(TokenType$1.COMMENT_START, start);\n        this._requireCharCode($MINUS);\n        this._endToken([]);\n        var textToken = this._consumeRawText(false, $MINUS, function () { return _this._attemptStr('->'); });\n        this._beginToken(TokenType$1.COMMENT_END, textToken.sourceSpan.end);\n        this._endToken([]);\n    };\n    _Tokenizer.prototype._consumeCdata = function (start) {\n        var _this = this;\n        this._beginToken(TokenType$1.CDATA_START, start);\n        this._requireStr('CDATA[');\n        this._endToken([]);\n        var textToken = this._consumeRawText(false, $RBRACKET, function () { return _this._attemptStr(']>'); });\n        this._beginToken(TokenType$1.CDATA_END, textToken.sourceSpan.end);\n        this._endToken([]);\n    };\n    _Tokenizer.prototype._consumeDocType = function (start) {\n        this._beginToken(TokenType$1.DOC_TYPE, start);\n        this._attemptUntilChar($GT);\n        this._advance();\n        this._endToken([this._input.substring(start.offset + 2, this._index - 1)]);\n    };\n    _Tokenizer.prototype._consumePrefixAndName = function () {\n        var nameOrPrefixStart = this._index;\n        var prefix = null;\n        while (this._peek !== $COLON && !isPrefixEnd(this._peek)) {\n            this._advance();\n        }\n        var nameStart;\n        if (this._peek === $COLON) {\n            this._advance();\n            prefix = this._input.substring(nameOrPrefixStart, this._index - 1);\n            nameStart = this._index;\n        }\n        else {\n            nameStart = nameOrPrefixStart;\n        }\n        this._requireCharCodeUntilFn(isNameEnd, this._index === nameStart ? 1 : 0);\n        var name = this._input.substring(nameStart, this._index);\n        return [prefix, name];\n    };\n    _Tokenizer.prototype._consumeTagOpen = function (start) {\n        var savedPos = this._savePosition();\n        var tagName;\n        var lowercaseTagName;\n        try {\n            if (!isAsciiLetter(this._peek)) {\n                throw this._createError(_unexpectedCharacterErrorMsg(this._peek), this._getSpan());\n            }\n            var nameStart = this._index;\n            this._consumeTagOpenStart(start);\n            tagName = this._input.substring(nameStart, this._index);\n            lowercaseTagName = tagName.toLowerCase();\n            this._attemptCharCodeUntilFn(isNotWhitespace);\n            while (this._peek !== $SLASH && this._peek !== $GT) {\n                this._consumeAttributeName();\n                this._attemptCharCodeUntilFn(isNotWhitespace);\n                if (this._attemptCharCode($EQ)) {\n                    this._attemptCharCodeUntilFn(isNotWhitespace);\n                    this._consumeAttributeValue();\n                }\n                this._attemptCharCodeUntilFn(isNotWhitespace);\n            }\n            this._consumeTagOpenEnd();\n        }\n        catch (e) {\n            if (e instanceof _ControlFlowError) {\n                // When the start tag is invalid, assume we want a \"<\"\n                this._restorePosition(savedPos);\n                // Back to back text tokens are merged at the end\n                this._beginToken(TokenType$1.TEXT, start);\n                this._endToken(['<']);\n                return;\n            }\n            throw e;\n        }\n        var contentTokenType = this._getTagDefinition(tagName).contentType;\n        if (contentTokenType === TagContentType.RAW_TEXT) {\n            this._consumeRawTextWithTagClose(lowercaseTagName, false);\n        }\n        else if (contentTokenType === TagContentType.ESCAPABLE_RAW_TEXT) {\n            this._consumeRawTextWithTagClose(lowercaseTagName, true);\n        }\n    };\n    _Tokenizer.prototype._consumeRawTextWithTagClose = function (lowercaseTagName, decodeEntities) {\n        var _this = this;\n        var textToken = this._consumeRawText(decodeEntities, $LT, function () {\n            if (!_this._attemptCharCode($SLASH))\n                return false;\n            _this._attemptCharCodeUntilFn(isNotWhitespace);\n            if (!_this._attemptStrCaseInsensitive(lowercaseTagName))\n                return false;\n            _this._attemptCharCodeUntilFn(isNotWhitespace);\n            return _this._attemptCharCode($GT);\n        });\n        this._beginToken(TokenType$1.TAG_CLOSE, textToken.sourceSpan.end);\n        this._endToken([null, lowercaseTagName]);\n    };\n    _Tokenizer.prototype._consumeTagOpenStart = function (start) {\n        this._beginToken(TokenType$1.TAG_OPEN_START, start);\n        var parts = this._consumePrefixAndName();\n        this._endToken(parts);\n    };\n    _Tokenizer.prototype._consumeAttributeName = function () {\n        this._beginToken(TokenType$1.ATTR_NAME);\n        var prefixAndName = this._consumePrefixAndName();\n        this._endToken(prefixAndName);\n    };\n    _Tokenizer.prototype._consumeAttributeValue = function () {\n        this._beginToken(TokenType$1.ATTR_VALUE);\n        var value;\n        if (this._peek === $SQ || this._peek === $DQ) {\n            var quoteChar = this._peek;\n            this._advance();\n            var parts = [];\n            while (this._peek !== quoteChar) {\n                parts.push(this._readChar(true));\n            }\n            value = parts.join('');\n            this._advance();\n        }\n        else {\n            var valueStart = this._index;\n            this._requireCharCodeUntilFn(isNameEnd, 1);\n            value = this._input.substring(valueStart, this._index);\n        }\n        this._endToken([this._processCarriageReturns(value)]);\n    };\n    _Tokenizer.prototype._consumeTagOpenEnd = function () {\n        var tokenType = this._attemptCharCode($SLASH) ? TokenType$1.TAG_OPEN_END_VOID : TokenType$1.TAG_OPEN_END;\n        this._beginToken(tokenType);\n        this._requireCharCode($GT);\n        this._endToken([]);\n    };\n    _Tokenizer.prototype._consumeTagClose = function (start) {\n        this._beginToken(TokenType$1.TAG_CLOSE, start);\n        this._attemptCharCodeUntilFn(isNotWhitespace);\n        var prefixAndName = this._consumePrefixAndName();\n        this._attemptCharCodeUntilFn(isNotWhitespace);\n        this._requireCharCode($GT);\n        this._endToken(prefixAndName);\n    };\n    _Tokenizer.prototype._consumeExpansionFormStart = function () {\n        this._beginToken(TokenType$1.EXPANSION_FORM_START, this._getLocation());\n        this._requireCharCode($LBRACE);\n        this._endToken([]);\n        this._expansionCaseStack.push(TokenType$1.EXPANSION_FORM_START);\n        this._beginToken(TokenType$1.RAW_TEXT, this._getLocation());\n        var condition = this._readUntil($COMMA);\n        this._endToken([condition], this._getLocation());\n        this._requireCharCode($COMMA);\n        this._attemptCharCodeUntilFn(isNotWhitespace);\n        this._beginToken(TokenType$1.RAW_TEXT, this._getLocation());\n        var type = this._readUntil($COMMA);\n        this._endToken([type], this._getLocation());\n        this._requireCharCode($COMMA);\n        this._attemptCharCodeUntilFn(isNotWhitespace);\n    };\n    _Tokenizer.prototype._consumeExpansionCaseStart = function () {\n        this._beginToken(TokenType$1.EXPANSION_CASE_VALUE, this._getLocation());\n        var value = this._readUntil($LBRACE).trim();\n        this._endToken([value], this._getLocation());\n        this._attemptCharCodeUntilFn(isNotWhitespace);\n        this._beginToken(TokenType$1.EXPANSION_CASE_EXP_START, this._getLocation());\n        this._requireCharCode($LBRACE);\n        this._endToken([], this._getLocation());\n        this._attemptCharCodeUntilFn(isNotWhitespace);\n        this._expansionCaseStack.push(TokenType$1.EXPANSION_CASE_EXP_START);\n    };\n    _Tokenizer.prototype._consumeExpansionCaseEnd = function () {\n        this._beginToken(TokenType$1.EXPANSION_CASE_EXP_END, this._getLocation());\n        this._requireCharCode($RBRACE);\n        this._endToken([], this._getLocation());\n        this._attemptCharCodeUntilFn(isNotWhitespace);\n        this._expansionCaseStack.pop();\n    };\n    _Tokenizer.prototype._consumeExpansionFormEnd = function () {\n        this._beginToken(TokenType$1.EXPANSION_FORM_END, this._getLocation());\n        this._requireCharCode($RBRACE);\n        this._endToken([]);\n        this._expansionCaseStack.pop();\n    };\n    _Tokenizer.prototype._consumeText = function () {\n        var start = this._getLocation();\n        this._beginToken(TokenType$1.TEXT, start);\n        var parts = [];\n        do {\n            if (this._interpolationConfig && this._attemptStr(this._interpolationConfig.start)) {\n                parts.push(this._interpolationConfig.start);\n                this._inInterpolation = true;\n            }\n            else if (this._interpolationConfig && this._inInterpolation &&\n                this._attemptStr(this._interpolationConfig.end)) {\n                parts.push(this._interpolationConfig.end);\n                this._inInterpolation = false;\n            }\n            else {\n                parts.push(this._readChar(true));\n            }\n        } while (!this._isTextEnd());\n        this._endToken([this._processCarriageReturns(parts.join(''))]);\n    };\n    _Tokenizer.prototype._isTextEnd = function () {\n        if (this._peek === $LT || this._peek === $EOF) {\n            return true;\n        }\n        if (this._tokenizeIcu && !this._inInterpolation) {\n            if (isExpansionFormStart(this._input, this._index, this._interpolationConfig)) {\n                // start of an expansion form\n                return true;\n            }\n            if (this._peek === $RBRACE && this._isInExpansionCase()) {\n                // end of and expansion case\n                return true;\n            }\n        }\n        return false;\n    };\n    _Tokenizer.prototype._savePosition = function () {\n        return [this._peek, this._index, this._column, this._line, this.tokens.length];\n    };\n    _Tokenizer.prototype._readUntil = function (char) {\n        var start = this._index;\n        this._attemptUntilChar(char);\n        return this._input.substring(start, this._index);\n    };\n    _Tokenizer.prototype._restorePosition = function (position) {\n        this._peek = position[0];\n        this._index = position[1];\n        this._column = position[2];\n        this._line = position[3];\n        var nbTokens = position[4];\n        if (nbTokens < this.tokens.length) {\n            // remove any extra tokens\n            this.tokens = this.tokens.slice(0, nbTokens);\n        }\n    };\n    _Tokenizer.prototype._isInExpansionCase = function () {\n        return this._expansionCaseStack.length > 0 &&\n            this._expansionCaseStack[this._expansionCaseStack.length - 1] ===\n                TokenType$1.EXPANSION_CASE_EXP_START;\n    };\n    _Tokenizer.prototype._isInExpansionForm = function () {\n        return this._expansionCaseStack.length > 0 &&\n            this._expansionCaseStack[this._expansionCaseStack.length - 1] ===\n                TokenType$1.EXPANSION_FORM_START;\n    };\n    return _Tokenizer;\n}());\nfunction isNotWhitespace(code) {\n    return !isWhitespace(code) || code === $EOF;\n}\nfunction isNameEnd(code) {\n    return isWhitespace(code) || code === $GT || code === $SLASH ||\n        code === $SQ || code === $DQ || code === $EQ;\n}\nfunction isPrefixEnd(code) {\n    return (code < $a || $z < code) && (code < $A || $Z < code) &&\n        (code < $0 || code > $9);\n}\nfunction isDigitEntityEnd(code) {\n    return code == $SEMICOLON || code == $EOF || !isAsciiHexDigit(code);\n}\nfunction isNamedEntityEnd(code) {\n    return code == $SEMICOLON || code == $EOF || !isAsciiLetter(code);\n}\nfunction isExpansionFormStart(input, offset, interpolationConfig) {\n    var isInterpolationStart = interpolationConfig ? input.indexOf(interpolationConfig.start, offset) == offset : false;\n    return input.charCodeAt(offset) == $LBRACE && !isInterpolationStart;\n}\nfunction isExpansionCaseStart(peek) {\n    return peek === $EQ || isAsciiLetter(peek) || isDigit(peek);\n}\nfunction compareCharCodeCaseInsensitive(code1, code2) {\n    return toUpperCaseCharCode(code1) == toUpperCaseCharCode(code2);\n}\nfunction toUpperCaseCharCode(code) {\n    return code >= $a && code <= $z ? code - $a + $A : code;\n}\nfunction mergeTextTokens(srcTokens) {\n    var dstTokens = [];\n    var lastDstToken = undefined;\n    for (var i = 0; i < srcTokens.length; i++) {\n        var token = srcTokens[i];\n        if (lastDstToken && lastDstToken.type == TokenType$1.TEXT && token.type == TokenType$1.TEXT) {\n            lastDstToken.parts[0] += token.parts[0];\n            lastDstToken.sourceSpan.end = token.sourceSpan.end;\n        }\n        else {\n            lastDstToken = token;\n            dstTokens.push(lastDstToken);\n        }\n    }\n    return dstTokens;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar TreeError = /** @class */ (function (_super) {\n    __extends(TreeError, _super);\n    function TreeError(elementName, span, msg) {\n        var _this = _super.call(this, span, msg) || this;\n        _this.elementName = elementName;\n        return _this;\n    }\n    TreeError.create = function (elementName, span, msg) {\n        return new TreeError(elementName, span, msg);\n    };\n    return TreeError;\n}(ParseError));\nvar ParseTreeResult = /** @class */ (function () {\n    function ParseTreeResult(rootNodes, errors) {\n        this.rootNodes = rootNodes;\n        this.errors = errors;\n    }\n    return ParseTreeResult;\n}());\nvar Parser$1 = /** @class */ (function () {\n    function Parser(getTagDefinition) {\n        this.getTagDefinition = getTagDefinition;\n    }\n    Parser.prototype.parse = function (source, url, parseExpansionForms, interpolationConfig) {\n        if (parseExpansionForms === void 0) { parseExpansionForms = false; }\n        if (interpolationConfig === void 0) { interpolationConfig = DEFAULT_INTERPOLATION_CONFIG; }\n        var tokensAndErrors = tokenize(source, url, this.getTagDefinition, parseExpansionForms, interpolationConfig);\n        var treeAndErrors = new _TreeBuilder(tokensAndErrors.tokens, this.getTagDefinition).build();\n        return new ParseTreeResult(treeAndErrors.rootNodes, tokensAndErrors.errors.concat(treeAndErrors.errors));\n    };\n    return Parser;\n}());\nvar _TreeBuilder = /** @class */ (function () {\n    function _TreeBuilder(tokens, getTagDefinition) {\n        this.tokens = tokens;\n        this.getTagDefinition = getTagDefinition;\n        this._index = -1;\n        this._rootNodes = [];\n        this._errors = [];\n        this._elementStack = [];\n        this._advance();\n    }\n    _TreeBuilder.prototype.build = function () {\n        while (this._peek.type !== TokenType$1.EOF) {\n            if (this._peek.type === TokenType$1.TAG_OPEN_START) {\n                this._consumeStartTag(this._advance());\n            }\n            else if (this._peek.type === TokenType$1.TAG_CLOSE) {\n                this._consumeEndTag(this._advance());\n            }\n            else if (this._peek.type === TokenType$1.CDATA_START) {\n                this._closeVoidElement();\n                this._consumeCdata(this._advance());\n            }\n            else if (this._peek.type === TokenType$1.COMMENT_START) {\n                this._closeVoidElement();\n                this._consumeComment(this._advance());\n            }\n            else if (this._peek.type === TokenType$1.TEXT || this._peek.type === TokenType$1.RAW_TEXT ||\n                this._peek.type === TokenType$1.ESCAPABLE_RAW_TEXT) {\n                this._closeVoidElement();\n                this._consumeText(this._advance());\n            }\n            else if (this._peek.type === TokenType$1.EXPANSION_FORM_START) {\n                this._consumeExpansion(this._advance());\n            }\n            else {\n                // Skip all other tokens...\n                this._advance();\n            }\n        }\n        return new ParseTreeResult(this._rootNodes, this._errors);\n    };\n    _TreeBuilder.prototype._advance = function () {\n        var prev = this._peek;\n        if (this._index < this.tokens.length - 1) {\n            // Note: there is always an EOF token at the end\n            this._index++;\n        }\n        this._peek = this.tokens[this._index];\n        return prev;\n    };\n    _TreeBuilder.prototype._advanceIf = function (type) {\n        if (this._peek.type === type) {\n            return this._advance();\n        }\n        return null;\n    };\n    _TreeBuilder.prototype._consumeCdata = function (startToken) {\n        this._consumeText(this._advance());\n        this._advanceIf(TokenType$1.CDATA_END);\n    };\n    _TreeBuilder.prototype._consumeComment = function (token) {\n        var text = this._advanceIf(TokenType$1.RAW_TEXT);\n        this._advanceIf(TokenType$1.COMMENT_END);\n        var value = text != null ? text.parts[0].trim() : null;\n        this._addToParent(new Comment(value, token.sourceSpan));\n    };\n    _TreeBuilder.prototype._consumeExpansion = function (token) {\n        var switchValue = this._advance();\n        var type = this._advance();\n        var cases = [];\n        // read =\n        while (this._peek.type === TokenType$1.EXPANSION_CASE_VALUE) {\n            var expCase = this._parseExpansionCase();\n            if (!expCase)\n                return; // error\n            cases.push(expCase);\n        }\n        // read the final }\n        if (this._peek.type !== TokenType$1.EXPANSION_FORM_END) {\n            this._errors.push(TreeError.create(null, this._peek.sourceSpan, \"Invalid ICU message. Missing '}'.\"));\n            return;\n        }\n        var sourceSpan = new ParseSourceSpan(token.sourceSpan.start, this._peek.sourceSpan.end);\n        this._addToParent(new Expansion(switchValue.parts[0], type.parts[0], cases, sourceSpan, switchValue.sourceSpan));\n        this._advance();\n    };\n    _TreeBuilder.prototype._parseExpansionCase = function () {\n        var value = this._advance();\n        // read {\n        if (this._peek.type !== TokenType$1.EXPANSION_CASE_EXP_START) {\n            this._errors.push(TreeError.create(null, this._peek.sourceSpan, \"Invalid ICU message. Missing '{'.\"));\n            return null;\n        }\n        // read until }\n        var start = this._advance();\n        var exp = this._collectExpansionExpTokens(start);\n        if (!exp)\n            return null;\n        var end = this._advance();\n        exp.push(new Token$1(TokenType$1.EOF, [], end.sourceSpan));\n        // parse everything in between { and }\n        var parsedExp = new _TreeBuilder(exp, this.getTagDefinition).build();\n        if (parsedExp.errors.length > 0) {\n            this._errors = this._errors.concat(parsedExp.errors);\n            return null;\n        }\n        var sourceSpan = new ParseSourceSpan(value.sourceSpan.start, end.sourceSpan.end);\n        var expSourceSpan = new ParseSourceSpan(start.sourceSpan.start, end.sourceSpan.end);\n        return new ExpansionCase(value.parts[0], parsedExp.rootNodes, sourceSpan, value.sourceSpan, expSourceSpan);\n    };\n    _TreeBuilder.prototype._collectExpansionExpTokens = function (start) {\n        var exp = [];\n        var expansionFormStack = [TokenType$1.EXPANSION_CASE_EXP_START];\n        while (true) {\n            if (this._peek.type === TokenType$1.EXPANSION_FORM_START ||\n                this._peek.type === TokenType$1.EXPANSION_CASE_EXP_START) {\n                expansionFormStack.push(this._peek.type);\n            }\n            if (this._peek.type === TokenType$1.EXPANSION_CASE_EXP_END) {\n                if (lastOnStack(expansionFormStack, TokenType$1.EXPANSION_CASE_EXP_START)) {\n                    expansionFormStack.pop();\n                    if (expansionFormStack.length == 0)\n                        return exp;\n                }\n                else {\n                    this._errors.push(TreeError.create(null, start.sourceSpan, \"Invalid ICU message. Missing '}'.\"));\n                    return null;\n                }\n            }\n            if (this._peek.type === TokenType$1.EXPANSION_FORM_END) {\n                if (lastOnStack(expansionFormStack, TokenType$1.EXPANSION_FORM_START)) {\n                    expansionFormStack.pop();\n                }\n                else {\n                    this._errors.push(TreeError.create(null, start.sourceSpan, \"Invalid ICU message. Missing '}'.\"));\n                    return null;\n                }\n            }\n            if (this._peek.type === TokenType$1.EOF) {\n                this._errors.push(TreeError.create(null, start.sourceSpan, \"Invalid ICU message. Missing '}'.\"));\n                return null;\n            }\n            exp.push(this._advance());\n        }\n    };\n    _TreeBuilder.prototype._consumeText = function (token) {\n        var text = token.parts[0];\n        if (text.length > 0 && text[0] == '\\n') {\n            var parent_1 = this._getParentElement();\n            if (parent_1 != null && parent_1.children.length == 0 &&\n                this.getTagDefinition(parent_1.name).ignoreFirstLf) {\n                text = text.substring(1);\n            }\n        }\n        if (text.length > 0) {\n            this._addToParent(new Text(text, token.sourceSpan));\n        }\n    };\n    _TreeBuilder.prototype._closeVoidElement = function () {\n        var el = this._getParentElement();\n        if (el && this.getTagDefinition(el.name).isVoid) {\n            this._elementStack.pop();\n        }\n    };\n    _TreeBuilder.prototype._consumeStartTag = function (startTagToken) {\n        var prefix = startTagToken.parts[0];\n        var name = startTagToken.parts[1];\n        var attrs = [];\n        while (this._peek.type === TokenType$1.ATTR_NAME) {\n            attrs.push(this._consumeAttr(this._advance()));\n        }\n        var fullName = this._getElementFullName(prefix, name, this._getParentElement());\n        var selfClosing = false;\n        // Note: There could have been a tokenizer error\n        // so that we don't get a token for the end tag...\n        if (this._peek.type === TokenType$1.TAG_OPEN_END_VOID) {\n            this._advance();\n            selfClosing = true;\n            var tagDef = this.getTagDefinition(fullName);\n            if (!(tagDef.canSelfClose || getNsPrefix(fullName) !== null || tagDef.isVoid)) {\n                this._errors.push(TreeError.create(fullName, startTagToken.sourceSpan, \"Only void and foreign elements can be self closed \\\"\" + startTagToken.parts[1] + \"\\\"\"));\n            }\n        }\n        else if (this._peek.type === TokenType$1.TAG_OPEN_END) {\n            this._advance();\n            selfClosing = false;\n        }\n        var end = this._peek.sourceSpan.start;\n        var span = new ParseSourceSpan(startTagToken.sourceSpan.start, end);\n        var el = new Element(fullName, attrs, [], span, span, undefined);\n        this._pushElement(el);\n        if (selfClosing) {\n            this._popElement(fullName);\n            el.endSourceSpan = span;\n        }\n    };\n    _TreeBuilder.prototype._pushElement = function (el) {\n        var parentEl = this._getParentElement();\n        if (parentEl && this.getTagDefinition(parentEl.name).isClosedByChild(el.name)) {\n            this._elementStack.pop();\n        }\n        var tagDef = this.getTagDefinition(el.name);\n        var _a = this._getParentElementSkippingContainers(), parent = _a.parent, container = _a.container;\n        if (parent && tagDef.requireExtraParent(parent.name)) {\n            var newParent = new Element(tagDef.parentToAdd, [], [], el.sourceSpan, el.startSourceSpan, el.endSourceSpan);\n            this._insertBeforeContainer(parent, container, newParent);\n        }\n        this._addToParent(el);\n        this._elementStack.push(el);\n    };\n    _TreeBuilder.prototype._consumeEndTag = function (endTagToken) {\n        var fullName = this._getElementFullName(endTagToken.parts[0], endTagToken.parts[1], this._getParentElement());\n        if (this._getParentElement()) {\n            this._getParentElement().endSourceSpan = endTagToken.sourceSpan;\n        }\n        if (this.getTagDefinition(fullName).isVoid) {\n            this._errors.push(TreeError.create(fullName, endTagToken.sourceSpan, \"Void elements do not have end tags \\\"\" + endTagToken.parts[1] + \"\\\"\"));\n        }\n        else if (!this._popElement(fullName)) {\n            var errMsg = \"Unexpected closing tag \\\"\" + fullName + \"\\\". It may happen when the tag has already been closed by another tag. For more info see https://www.w3.org/TR/html5/syntax.html#closing-elements-that-have-implied-end-tags\";\n            this._errors.push(TreeError.create(fullName, endTagToken.sourceSpan, errMsg));\n        }\n    };\n    _TreeBuilder.prototype._popElement = function (fullName) {\n        for (var stackIndex = this._elementStack.length - 1; stackIndex >= 0; stackIndex--) {\n            var el = this._elementStack[stackIndex];\n            if (el.name == fullName) {\n                this._elementStack.splice(stackIndex, this._elementStack.length - stackIndex);\n                return true;\n            }\n            if (!this.getTagDefinition(el.name).closedByParent) {\n                return false;\n            }\n        }\n        return false;\n    };\n    _TreeBuilder.prototype._consumeAttr = function (attrName) {\n        var fullName = mergeNsAndName(attrName.parts[0], attrName.parts[1]);\n        var end = attrName.sourceSpan.end;\n        var value = '';\n        var valueSpan = undefined;\n        if (this._peek.type === TokenType$1.ATTR_VALUE) {\n            var valueToken = this._advance();\n            value = valueToken.parts[0];\n            end = valueToken.sourceSpan.end;\n            valueSpan = valueToken.sourceSpan;\n        }\n        return new Attribute(fullName, value, new ParseSourceSpan(attrName.sourceSpan.start, end), valueSpan);\n    };\n    _TreeBuilder.prototype._getParentElement = function () {\n        return this._elementStack.length > 0 ? this._elementStack[this._elementStack.length - 1] : null;\n    };\n    /**\n     * Returns the parent in the DOM and the container.\n     *\n     * `<ng-container>` elements are skipped as they are not rendered as DOM element.\n     */\n    _TreeBuilder.prototype._getParentElementSkippingContainers = function () {\n        var container = null;\n        for (var i = this._elementStack.length - 1; i >= 0; i--) {\n            if (!isNgContainer(this._elementStack[i].name)) {\n                return { parent: this._elementStack[i], container: container };\n            }\n            container = this._elementStack[i];\n        }\n        return { parent: null, container: container };\n    };\n    _TreeBuilder.prototype._addToParent = function (node) {\n        var parent = this._getParentElement();\n        if (parent != null) {\n            parent.children.push(node);\n        }\n        else {\n            this._rootNodes.push(node);\n        }\n    };\n    /**\n     * Insert a node between the parent and the container.\n     * When no container is given, the node is appended as a child of the parent.\n     * Also updates the element stack accordingly.\n     *\n     * @internal\n     */\n    _TreeBuilder.prototype._insertBeforeContainer = function (parent, container, node) {\n        if (!container) {\n            this._addToParent(node);\n            this._elementStack.push(node);\n        }\n        else {\n            if (parent) {\n                // replace the container with the new node in the children\n                var index = parent.children.indexOf(container);\n                parent.children[index] = node;\n            }\n            else {\n                this._rootNodes.push(node);\n            }\n            node.children.push(container);\n            this._elementStack.splice(this._elementStack.indexOf(container), 0, node);\n        }\n    };\n    _TreeBuilder.prototype._getElementFullName = function (prefix, localName, parentElement) {\n        if (prefix == null) {\n            prefix = this.getTagDefinition(localName).implicitNamespacePrefix;\n            if (prefix == null && parentElement != null) {\n                prefix = getNsPrefix(parentElement.name);\n            }\n        }\n        return mergeNsAndName(prefix, localName);\n    };\n    return _TreeBuilder;\n}());\nfunction lastOnStack(stack, element) {\n    return stack.length > 0 && stack[stack.length - 1] === element;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nfunction digest(message) {\n    return message.id || sha1(serializeNodes(message.nodes).join('') + (\"[\" + message.meaning + \"]\"));\n}\nfunction decimalDigest(message) {\n    if (message.id) {\n        return message.id;\n    }\n    var visitor = new _SerializerIgnoreIcuExpVisitor();\n    var parts = message.nodes.map(function (a) { return a.visit(visitor, null); });\n    return computeMsgId(parts.join(''), message.meaning);\n}\n/**\n * Serialize the i18n ast to something xml-like in order to generate an UID.\n *\n * The visitor is also used in the i18n parser tests\n *\n * @internal\n */\nvar _SerializerVisitor = /** @class */ (function () {\n    function _SerializerVisitor() {\n    }\n    _SerializerVisitor.prototype.visitText = function (text, context) { return text.value; };\n    _SerializerVisitor.prototype.visitContainer = function (container, context) {\n        var _this = this;\n        return \"[\" + container.children.map(function (child) { return child.visit(_this); }).join(', ') + \"]\";\n    };\n    _SerializerVisitor.prototype.visitIcu = function (icu, context) {\n        var _this = this;\n        var strCases = Object.keys(icu.cases).map(function (k) { return k + \" {\" + icu.cases[k].visit(_this) + \"}\"; });\n        return \"{\" + icu.expression + \", \" + icu.type + \", \" + strCases.join(', ') + \"}\";\n    };\n    _SerializerVisitor.prototype.visitTagPlaceholder = function (ph, context) {\n        var _this = this;\n        return ph.isVoid ?\n            \"<ph tag name=\\\"\" + ph.startName + \"\\\"/>\" :\n            \"<ph tag name=\\\"\" + ph.startName + \"\\\">\" + ph.children.map(function (child) { return child.visit(_this); }).join(', ') + \"</ph name=\\\"\" + ph.closeName + \"\\\">\";\n    };\n    _SerializerVisitor.prototype.visitPlaceholder = function (ph, context) {\n        return ph.value ? \"<ph name=\\\"\" + ph.name + \"\\\">\" + ph.value + \"</ph>\" : \"<ph name=\\\"\" + ph.name + \"\\\"/>\";\n    };\n    _SerializerVisitor.prototype.visitIcuPlaceholder = function (ph, context) {\n        return \"<ph icu name=\\\"\" + ph.name + \"\\\">\" + ph.value.visit(this) + \"</ph>\";\n    };\n    return _SerializerVisitor;\n}());\nvar serializerVisitor = new _SerializerVisitor();\nfunction serializeNodes(nodes) {\n    return nodes.map(function (a) { return a.visit(serializerVisitor, null); });\n}\n/**\n * Serialize the i18n ast to something xml-like in order to generate an UID.\n *\n * Ignore the ICU expressions so that message IDs stays identical if only the expression changes.\n *\n * @internal\n */\nvar _SerializerIgnoreIcuExpVisitor = /** @class */ (function (_super) {\n    __extends(_SerializerIgnoreIcuExpVisitor, _super);\n    function _SerializerIgnoreIcuExpVisitor() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    _SerializerIgnoreIcuExpVisitor.prototype.visitIcu = function (icu, context) {\n        var _this = this;\n        var strCases = Object.keys(icu.cases).map(function (k) { return k + \" {\" + icu.cases[k].visit(_this) + \"}\"; });\n        // Do not take the expression into account\n        return \"{\" + icu.type + \", \" + strCases.join(', ') + \"}\";\n    };\n    return _SerializerIgnoreIcuExpVisitor;\n}(_SerializerVisitor));\n/**\n * Compute the SHA1 of the given string\n *\n * see http://csrc.nist.gov/publications/fips/fips180-4/fips-180-4.pdf\n *\n * WARNING: this function has not been designed not tested with security in mind.\n *          DO NOT USE IT IN A SECURITY SENSITIVE CONTEXT.\n */\nfunction sha1(str) {\n    var utf8 = utf8Encode(str);\n    var words32 = stringToWords32(utf8, Endian.Big);\n    var len = utf8.length * 8;\n    var w = new Array(80);\n    var _a = __read([0x67452301, 0xefcdab89, 0x98badcfe, 0x10325476, 0xc3d2e1f0], 5), a = _a[0], b = _a[1], c = _a[2], d = _a[3], e = _a[4];\n    words32[len >> 5] |= 0x80 << (24 - len % 32);\n    words32[((len + 64 >> 9) << 4) + 15] = len;\n    for (var i = 0; i < words32.length; i += 16) {\n        var _b = __read([a, b, c, d, e], 5), h0 = _b[0], h1 = _b[1], h2 = _b[2], h3 = _b[3], h4 = _b[4];\n        for (var j = 0; j < 80; j++) {\n            if (j < 16) {\n                w[j] = words32[i + j];\n            }\n            else {\n                w[j] = rol32(w[j - 3] ^ w[j - 8] ^ w[j - 14] ^ w[j - 16], 1);\n            }\n            var _c = __read(fk(j, b, c, d), 2), f = _c[0], k = _c[1];\n            var temp = [rol32(a, 5), f, e, k, w[j]].reduce(add32);\n            _d = __read([d, c, rol32(b, 30), a, temp], 5), e = _d[0], d = _d[1], c = _d[2], b = _d[3], a = _d[4];\n        }\n        _e = __read([add32(a, h0), add32(b, h1), add32(c, h2), add32(d, h3), add32(e, h4)], 5), a = _e[0], b = _e[1], c = _e[2], d = _e[3], e = _e[4];\n    }\n    return byteStringToHexString(words32ToByteString([a, b, c, d, e]));\n    var _d, _e;\n}\nfunction fk(index, b, c, d) {\n    if (index < 20) {\n        return [(b & c) | (~b & d), 0x5a827999];\n    }\n    if (index < 40) {\n        return [b ^ c ^ d, 0x6ed9eba1];\n    }\n    if (index < 60) {\n        return [(b & c) | (b & d) | (c & d), 0x8f1bbcdc];\n    }\n    return [b ^ c ^ d, 0xca62c1d6];\n}\n/**\n * Compute the fingerprint of the given string\n *\n * The output is 64 bit number encoded as a decimal string\n *\n * based on:\n * https://github.com/google/closure-compiler/blob/master/src/com/google/javascript/jscomp/GoogleJsMessageIdGenerator.java\n */\nfunction fingerprint(str) {\n    var utf8 = utf8Encode(str);\n    var _a = __read([hash32(utf8, 0), hash32(utf8, 102072)], 2), hi = _a[0], lo = _a[1];\n    if (hi == 0 && (lo == 0 || lo == 1)) {\n        hi = hi ^ 0x130f9bef;\n        lo = lo ^ -0x6b5f56d8;\n    }\n    return [hi, lo];\n}\nfunction computeMsgId(msg, meaning) {\n    var _a = __read(fingerprint(msg), 2), hi = _a[0], lo = _a[1];\n    if (meaning) {\n        var _b = __read(fingerprint(meaning), 2), him = _b[0], lom = _b[1];\n        _c = __read(add64(rol64([hi, lo], 1), [him, lom]), 2), hi = _c[0], lo = _c[1];\n    }\n    return byteStringToDecString(words32ToByteString([hi & 0x7fffffff, lo]));\n    var _c;\n}\nfunction hash32(str, c) {\n    var _a = __read([0x9e3779b9, 0x9e3779b9], 2), a = _a[0], b = _a[1];\n    var i;\n    var len = str.length;\n    for (i = 0; i + 12 <= len; i += 12) {\n        a = add32(a, wordAt(str, i, Endian.Little));\n        b = add32(b, wordAt(str, i + 4, Endian.Little));\n        c = add32(c, wordAt(str, i + 8, Endian.Little));\n        _b = __read(mix([a, b, c]), 3), a = _b[0], b = _b[1], c = _b[2];\n    }\n    a = add32(a, wordAt(str, i, Endian.Little));\n    b = add32(b, wordAt(str, i + 4, Endian.Little));\n    // the first byte of c is reserved for the length\n    c = add32(c, len);\n    c = add32(c, wordAt(str, i + 8, Endian.Little) << 8);\n    return mix([a, b, c])[2];\n    var _b;\n}\n// clang-format off\nfunction mix(_a) {\n    var _b = __read(_a, 3), a = _b[0], b = _b[1], c = _b[2];\n    a = sub32(a, b);\n    a = sub32(a, c);\n    a ^= c >>> 13;\n    b = sub32(b, c);\n    b = sub32(b, a);\n    b ^= a << 8;\n    c = sub32(c, a);\n    c = sub32(c, b);\n    c ^= b >>> 13;\n    a = sub32(a, b);\n    a = sub32(a, c);\n    a ^= c >>> 12;\n    b = sub32(b, c);\n    b = sub32(b, a);\n    b ^= a << 16;\n    c = sub32(c, a);\n    c = sub32(c, b);\n    c ^= b >>> 5;\n    a = sub32(a, b);\n    a = sub32(a, c);\n    a ^= c >>> 3;\n    b = sub32(b, c);\n    b = sub32(b, a);\n    b ^= a << 10;\n    c = sub32(c, a);\n    c = sub32(c, b);\n    c ^= b >>> 15;\n    return [a, b, c];\n}\n// clang-format on\n// Utils\nvar Endian;\n(function (Endian) {\n    Endian[Endian[\"Little\"] = 0] = \"Little\";\n    Endian[Endian[\"Big\"] = 1] = \"Big\";\n})(Endian || (Endian = {}));\nfunction add32(a, b) {\n    return add32to64(a, b)[1];\n}\nfunction add32to64(a, b) {\n    var low = (a & 0xffff) + (b & 0xffff);\n    var high = (a >>> 16) + (b >>> 16) + (low >>> 16);\n    return [high >>> 16, (high << 16) | (low & 0xffff)];\n}\nfunction add64(_a, _b) {\n    var _c = __read(_a, 2), ah = _c[0], al = _c[1];\n    var _d = __read(_b, 2), bh = _d[0], bl = _d[1];\n    var _e = __read(add32to64(al, bl), 2), carry = _e[0], l = _e[1];\n    var h = add32(add32(ah, bh), carry);\n    return [h, l];\n}\nfunction sub32(a, b) {\n    var low = (a & 0xffff) - (b & 0xffff);\n    var high = (a >> 16) - (b >> 16) + (low >> 16);\n    return (high << 16) | (low & 0xffff);\n}\n// Rotate a 32b number left `count` position\nfunction rol32(a, count) {\n    return (a << count) | (a >>> (32 - count));\n}\n// Rotate a 64b number left `count` position\nfunction rol64(_a, count) {\n    var _b = __read(_a, 2), hi = _b[0], lo = _b[1];\n    var h = (hi << count) | (lo >>> (32 - count));\n    var l = (lo << count) | (hi >>> (32 - count));\n    return [h, l];\n}\nfunction stringToWords32(str, endian) {\n    var words32 = Array((str.length + 3) >>> 2);\n    for (var i = 0; i < words32.length; i++) {\n        words32[i] = wordAt(str, i * 4, endian);\n    }\n    return words32;\n}\nfunction byteAt(str, index) {\n    return index >= str.length ? 0 : str.charCodeAt(index) & 0xff;\n}\nfunction wordAt(str, index, endian) {\n    var word = 0;\n    if (endian === Endian.Big) {\n        for (var i = 0; i < 4; i++) {\n            word += byteAt(str, index + i) << (24 - 8 * i);\n        }\n    }\n    else {\n        for (var i = 0; i < 4; i++) {\n            word += byteAt(str, index + i) << 8 * i;\n        }\n    }\n    return word;\n}\nfunction words32ToByteString(words32) {\n    return words32.reduce(function (str, word) { return str + word32ToByteString(word); }, '');\n}\nfunction word32ToByteString(word) {\n    var str = '';\n    for (var i = 0; i < 4; i++) {\n        str += String.fromCharCode((word >>> 8 * (3 - i)) & 0xff);\n    }\n    return str;\n}\nfunction byteStringToHexString(str) {\n    var hex = '';\n    for (var i = 0; i < str.length; i++) {\n        var b = byteAt(str, i);\n        hex += (b >>> 4).toString(16) + (b & 0x0f).toString(16);\n    }\n    return hex.toLowerCase();\n}\n// based on http://www.danvk.org/hex2dec.html (JS can not handle more than 56b)\nfunction byteStringToDecString(str) {\n    var decimal = '';\n    var toThePower = '1';\n    for (var i = str.length - 1; i >= 0; i--) {\n        decimal = addBigInt(decimal, numberTimesBigInt(byteAt(str, i), toThePower));\n        toThePower = numberTimesBigInt(256, toThePower);\n    }\n    return decimal.split('').reverse().join('');\n}\n// x and y decimal, lowest significant digit first\nfunction addBigInt(x, y) {\n    var sum = '';\n    var len = Math.max(x.length, y.length);\n    for (var i = 0, carry = 0; i < len || carry; i++) {\n        var tmpSum = carry + +(x[i] || 0) + +(y[i] || 0);\n        if (tmpSum >= 10) {\n            carry = 1;\n            sum += tmpSum - 10;\n        }\n        else {\n            carry = 0;\n            sum += tmpSum;\n        }\n    }\n    return sum;\n}\nfunction numberTimesBigInt(num, b) {\n    var product = '';\n    var bToThePower = b;\n    for (; num !== 0; num = num >>> 1) {\n        if (num & 1)\n            product = addBigInt(product, bToThePower);\n        bToThePower = addBigInt(bToThePower, bToThePower);\n    }\n    return product;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar Message = /** @class */ (function () {\n    /**\n     * @param nodes message AST\n     * @param placeholders maps placeholder names to static content\n     * @param placeholderToMessage maps placeholder names to messages (used for nested ICU messages)\n     * @param meaning\n     * @param description\n     * @param id\n     */\n    function Message(nodes, placeholders, placeholderToMessage, meaning, description, id) {\n        this.nodes = nodes;\n        this.placeholders = placeholders;\n        this.placeholderToMessage = placeholderToMessage;\n        this.meaning = meaning;\n        this.description = description;\n        this.id = id;\n        if (nodes.length) {\n            this.sources = [{\n                    filePath: nodes[0].sourceSpan.start.file.url,\n                    startLine: nodes[0].sourceSpan.start.line + 1,\n                    startCol: nodes[0].sourceSpan.start.col + 1,\n                    endLine: nodes[nodes.length - 1].sourceSpan.end.line + 1,\n                    endCol: nodes[0].sourceSpan.start.col + 1\n                }];\n        }\n        else {\n            this.sources = [];\n        }\n    }\n    return Message;\n}());\nvar Text$1 = /** @class */ (function () {\n    function Text(value, sourceSpan) {\n        this.value = value;\n        this.sourceSpan = sourceSpan;\n    }\n    Text.prototype.visit = function (visitor, context) { return visitor.visitText(this, context); };\n    return Text;\n}());\n// TODO(vicb): do we really need this node (vs an array) ?\nvar Container = /** @class */ (function () {\n    function Container(children, sourceSpan) {\n        this.children = children;\n        this.sourceSpan = sourceSpan;\n    }\n    Container.prototype.visit = function (visitor, context) { return visitor.visitContainer(this, context); };\n    return Container;\n}());\nvar Icu = /** @class */ (function () {\n    function Icu(expression, type, cases, sourceSpan) {\n        this.expression = expression;\n        this.type = type;\n        this.cases = cases;\n        this.sourceSpan = sourceSpan;\n    }\n    Icu.prototype.visit = function (visitor, context) { return visitor.visitIcu(this, context); };\n    return Icu;\n}());\nvar TagPlaceholder = /** @class */ (function () {\n    function TagPlaceholder(tag, attrs, startName, closeName, children, isVoid, sourceSpan) {\n        this.tag = tag;\n        this.attrs = attrs;\n        this.startName = startName;\n        this.closeName = closeName;\n        this.children = children;\n        this.isVoid = isVoid;\n        this.sourceSpan = sourceSpan;\n    }\n    TagPlaceholder.prototype.visit = function (visitor, context) { return visitor.visitTagPlaceholder(this, context); };\n    return TagPlaceholder;\n}());\nvar Placeholder = /** @class */ (function () {\n    function Placeholder(value, name, sourceSpan) {\n        this.value = value;\n        this.name = name;\n        this.sourceSpan = sourceSpan;\n    }\n    Placeholder.prototype.visit = function (visitor, context) { return visitor.visitPlaceholder(this, context); };\n    return Placeholder;\n}());\nvar IcuPlaceholder = /** @class */ (function () {\n    function IcuPlaceholder(value, name, sourceSpan) {\n        this.value = value;\n        this.name = name;\n        this.sourceSpan = sourceSpan;\n    }\n    IcuPlaceholder.prototype.visit = function (visitor, context) { return visitor.visitIcuPlaceholder(this, context); };\n    return IcuPlaceholder;\n}());\n// Clone the AST\nvar CloneVisitor = /** @class */ (function () {\n    function CloneVisitor() {\n    }\n    CloneVisitor.prototype.visitText = function (text, context) { return new Text$1(text.value, text.sourceSpan); };\n    CloneVisitor.prototype.visitContainer = function (container, context) {\n        var _this = this;\n        var children = container.children.map(function (n) { return n.visit(_this, context); });\n        return new Container(children, container.sourceSpan);\n    };\n    CloneVisitor.prototype.visitIcu = function (icu, context) {\n        var _this = this;\n        var cases = {};\n        Object.keys(icu.cases).forEach(function (key) { return cases[key] = icu.cases[key].visit(_this, context); });\n        var msg = new Icu(icu.expression, icu.type, cases, icu.sourceSpan);\n        msg.expressionPlaceholder = icu.expressionPlaceholder;\n        return msg;\n    };\n    CloneVisitor.prototype.visitTagPlaceholder = function (ph, context) {\n        var _this = this;\n        var children = ph.children.map(function (n) { return n.visit(_this, context); });\n        return new TagPlaceholder(ph.tag, ph.attrs, ph.startName, ph.closeName, children, ph.isVoid, ph.sourceSpan);\n    };\n    CloneVisitor.prototype.visitPlaceholder = function (ph, context) {\n        return new Placeholder(ph.value, ph.name, ph.sourceSpan);\n    };\n    CloneVisitor.prototype.visitIcuPlaceholder = function (ph, context) {\n        return new IcuPlaceholder(ph.value, ph.name, ph.sourceSpan);\n    };\n    return CloneVisitor;\n}());\n// Visit all the nodes recursively\nvar RecurseVisitor = /** @class */ (function () {\n    function RecurseVisitor() {\n    }\n    RecurseVisitor.prototype.visitText = function (text, context) { };\n    RecurseVisitor.prototype.visitContainer = function (container, context) {\n        var _this = this;\n        container.children.forEach(function (child) { return child.visit(_this); });\n    };\n    RecurseVisitor.prototype.visitIcu = function (icu, context) {\n        var _this = this;\n        Object.keys(icu.cases).forEach(function (k) { icu.cases[k].visit(_this); });\n    };\n    RecurseVisitor.prototype.visitTagPlaceholder = function (ph, context) {\n        var _this = this;\n        ph.children.forEach(function (child) { return child.visit(_this); });\n    };\n    RecurseVisitor.prototype.visitPlaceholder = function (ph, context) { };\n    RecurseVisitor.prototype.visitIcuPlaceholder = function (ph, context) { };\n    return RecurseVisitor;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar HtmlTagDefinition = /** @class */ (function () {\n    function HtmlTagDefinition(_a) {\n        var _b = _a === void 0 ? {} : _a, closedByChildren = _b.closedByChildren, requiredParents = _b.requiredParents, implicitNamespacePrefix = _b.implicitNamespacePrefix, _c = _b.contentType, contentType = _c === void 0 ? TagContentType.PARSABLE_DATA : _c, _d = _b.closedByParent, closedByParent = _d === void 0 ? false : _d, _e = _b.isVoid, isVoid = _e === void 0 ? false : _e, _f = _b.ignoreFirstLf, ignoreFirstLf = _f === void 0 ? false : _f;\n        var _this = this;\n        this.closedByChildren = {};\n        this.closedByParent = false;\n        this.canSelfClose = false;\n        if (closedByChildren && closedByChildren.length > 0) {\n            closedByChildren.forEach(function (tagName) { return _this.closedByChildren[tagName] = true; });\n        }\n        this.isVoid = isVoid;\n        this.closedByParent = closedByParent || isVoid;\n        if (requiredParents && requiredParents.length > 0) {\n            this.requiredParents = {};\n            // The first parent is the list is automatically when none of the listed parents are present\n            this.parentToAdd = requiredParents[0];\n            requiredParents.forEach(function (tagName) { return _this.requiredParents[tagName] = true; });\n        }\n        this.implicitNamespacePrefix = implicitNamespacePrefix || null;\n        this.contentType = contentType;\n        this.ignoreFirstLf = ignoreFirstLf;\n    }\n    HtmlTagDefinition.prototype.requireExtraParent = function (currentParent) {\n        if (!this.requiredParents) {\n            return false;\n        }\n        if (!currentParent) {\n            return true;\n        }\n        var lcParent = currentParent.toLowerCase();\n        var isParentTemplate = lcParent === 'template' || currentParent === 'ng-template';\n        return !isParentTemplate && this.requiredParents[lcParent] != true;\n    };\n    HtmlTagDefinition.prototype.isClosedByChild = function (name) {\n        return this.isVoid || name.toLowerCase() in this.closedByChildren;\n    };\n    return HtmlTagDefinition;\n}());\n// see http://www.w3.org/TR/html51/syntax.html#optional-tags\n// This implementation does not fully conform to the HTML5 spec.\nvar TAG_DEFINITIONS = {\n    'base': new HtmlTagDefinition({ isVoid: true }),\n    'meta': new HtmlTagDefinition({ isVoid: true }),\n    'area': new HtmlTagDefinition({ isVoid: true }),\n    'embed': new HtmlTagDefinition({ isVoid: true }),\n    'link': new HtmlTagDefinition({ isVoid: true }),\n    'img': new HtmlTagDefinition({ isVoid: true }),\n    'input': new HtmlTagDefinition({ isVoid: true }),\n    'param': new HtmlTagDefinition({ isVoid: true }),\n    'hr': new HtmlTagDefinition({ isVoid: true }),\n    'br': new HtmlTagDefinition({ isVoid: true }),\n    'source': new HtmlTagDefinition({ isVoid: true }),\n    'track': new HtmlTagDefinition({ isVoid: true }),\n    'wbr': new HtmlTagDefinition({ isVoid: true }),\n    'p': new HtmlTagDefinition({\n        closedByChildren: [\n            'address', 'article', 'aside', 'blockquote', 'div', 'dl', 'fieldset', 'footer', 'form',\n            'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'header', 'hgroup', 'hr',\n            'main', 'nav', 'ol', 'p', 'pre', 'section', 'table', 'ul'\n        ],\n        closedByParent: true\n    }),\n    'thead': new HtmlTagDefinition({ closedByChildren: ['tbody', 'tfoot'] }),\n    'tbody': new HtmlTagDefinition({ closedByChildren: ['tbody', 'tfoot'], closedByParent: true }),\n    'tfoot': new HtmlTagDefinition({ closedByChildren: ['tbody'], closedByParent: true }),\n    'tr': new HtmlTagDefinition({\n        closedByChildren: ['tr'],\n        requiredParents: ['tbody', 'tfoot', 'thead'],\n        closedByParent: true\n    }),\n    'td': new HtmlTagDefinition({ closedByChildren: ['td', 'th'], closedByParent: true }),\n    'th': new HtmlTagDefinition({ closedByChildren: ['td', 'th'], closedByParent: true }),\n    'col': new HtmlTagDefinition({ requiredParents: ['colgroup'], isVoid: true }),\n    'svg': new HtmlTagDefinition({ implicitNamespacePrefix: 'svg' }),\n    'math': new HtmlTagDefinition({ implicitNamespacePrefix: 'math' }),\n    'li': new HtmlTagDefinition({ closedByChildren: ['li'], closedByParent: true }),\n    'dt': new HtmlTagDefinition({ closedByChildren: ['dt', 'dd'] }),\n    'dd': new HtmlTagDefinition({ closedByChildren: ['dt', 'dd'], closedByParent: true }),\n    'rb': new HtmlTagDefinition({ closedByChildren: ['rb', 'rt', 'rtc', 'rp'], closedByParent: true }),\n    'rt': new HtmlTagDefinition({ closedByChildren: ['rb', 'rt', 'rtc', 'rp'], closedByParent: true }),\n    'rtc': new HtmlTagDefinition({ closedByChildren: ['rb', 'rtc', 'rp'], closedByParent: true }),\n    'rp': new HtmlTagDefinition({ closedByChildren: ['rb', 'rt', 'rtc', 'rp'], closedByParent: true }),\n    'optgroup': new HtmlTagDefinition({ closedByChildren: ['optgroup'], closedByParent: true }),\n    'option': new HtmlTagDefinition({ closedByChildren: ['option', 'optgroup'], closedByParent: true }),\n    'pre': new HtmlTagDefinition({ ignoreFirstLf: true }),\n    'listing': new HtmlTagDefinition({ ignoreFirstLf: true }),\n    'style': new HtmlTagDefinition({ contentType: TagContentType.RAW_TEXT }),\n    'script': new HtmlTagDefinition({ contentType: TagContentType.RAW_TEXT }),\n    'title': new HtmlTagDefinition({ contentType: TagContentType.ESCAPABLE_RAW_TEXT }),\n    'textarea': new HtmlTagDefinition({ contentType: TagContentType.ESCAPABLE_RAW_TEXT, ignoreFirstLf: true }),\n};\nvar _DEFAULT_TAG_DEFINITION = new HtmlTagDefinition();\nfunction getHtmlTagDefinition(tagName) {\n    return TAG_DEFINITIONS[tagName.toLowerCase()] || _DEFAULT_TAG_DEFINITION;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar TAG_TO_PLACEHOLDER_NAMES = {\n    'A': 'LINK',\n    'B': 'BOLD_TEXT',\n    'BR': 'LINE_BREAK',\n    'EM': 'EMPHASISED_TEXT',\n    'H1': 'HEADING_LEVEL1',\n    'H2': 'HEADING_LEVEL2',\n    'H3': 'HEADING_LEVEL3',\n    'H4': 'HEADING_LEVEL4',\n    'H5': 'HEADING_LEVEL5',\n    'H6': 'HEADING_LEVEL6',\n    'HR': 'HORIZONTAL_RULE',\n    'I': 'ITALIC_TEXT',\n    'LI': 'LIST_ITEM',\n    'LINK': 'MEDIA_LINK',\n    'OL': 'ORDERED_LIST',\n    'P': 'PARAGRAPH',\n    'Q': 'QUOTATION',\n    'S': 'STRIKETHROUGH_TEXT',\n    'SMALL': 'SMALL_TEXT',\n    'SUB': 'SUBSTRIPT',\n    'SUP': 'SUPERSCRIPT',\n    'TBODY': 'TABLE_BODY',\n    'TD': 'TABLE_CELL',\n    'TFOOT': 'TABLE_FOOTER',\n    'TH': 'TABLE_HEADER_CELL',\n    'THEAD': 'TABLE_HEADER',\n    'TR': 'TABLE_ROW',\n    'TT': 'MONOSPACED_TEXT',\n    'U': 'UNDERLINED_TEXT',\n    'UL': 'UNORDERED_LIST',\n};\n/**\n * Creates unique names for placeholder with different content.\n *\n * Returns the same placeholder name when the content is identical.\n */\nvar PlaceholderRegistry = /** @class */ (function () {\n    function PlaceholderRegistry() {\n        // Count the occurrence of the base name top generate a unique name\n        this._placeHolderNameCounts = {};\n        // Maps signature to placeholder names\n        this._signatureToName = {};\n    }\n    PlaceholderRegistry.prototype.getStartTagPlaceholderName = function (tag, attrs, isVoid) {\n        var signature = this._hashTag(tag, attrs, isVoid);\n        if (this._signatureToName[signature]) {\n            return this._signatureToName[signature];\n        }\n        var upperTag = tag.toUpperCase();\n        var baseName = TAG_TO_PLACEHOLDER_NAMES[upperTag] || \"TAG_\" + upperTag;\n        var name = this._generateUniqueName(isVoid ? baseName : \"START_\" + baseName);\n        this._signatureToName[signature] = name;\n        return name;\n    };\n    PlaceholderRegistry.prototype.getCloseTagPlaceholderName = function (tag) {\n        var signature = this._hashClosingTag(tag);\n        if (this._signatureToName[signature]) {\n            return this._signatureToName[signature];\n        }\n        var upperTag = tag.toUpperCase();\n        var baseName = TAG_TO_PLACEHOLDER_NAMES[upperTag] || \"TAG_\" + upperTag;\n        var name = this._generateUniqueName(\"CLOSE_\" + baseName);\n        this._signatureToName[signature] = name;\n        return name;\n    };\n    PlaceholderRegistry.prototype.getPlaceholderName = function (name, content) {\n        var upperName = name.toUpperCase();\n        var signature = \"PH: \" + upperName + \"=\" + content;\n        if (this._signatureToName[signature]) {\n            return this._signatureToName[signature];\n        }\n        var uniqueName = this._generateUniqueName(upperName);\n        this._signatureToName[signature] = uniqueName;\n        return uniqueName;\n    };\n    PlaceholderRegistry.prototype.getUniquePlaceholder = function (name) {\n        return this._generateUniqueName(name.toUpperCase());\n    };\n    // Generate a hash for a tag - does not take attribute order into account\n    PlaceholderRegistry.prototype._hashTag = function (tag, attrs, isVoid) {\n        var start = \"<\" + tag;\n        var strAttrs = Object.keys(attrs).sort().map(function (name) { return \" \" + name + \"=\" + attrs[name]; }).join('');\n        var end = isVoid ? '/>' : \"></\" + tag + \">\";\n        return start + strAttrs + end;\n    };\n    PlaceholderRegistry.prototype._hashClosingTag = function (tag) { return this._hashTag(\"/\" + tag, {}, false); };\n    PlaceholderRegistry.prototype._generateUniqueName = function (base) {\n        var seen = this._placeHolderNameCounts.hasOwnProperty(base);\n        if (!seen) {\n            this._placeHolderNameCounts[base] = 1;\n            return base;\n        }\n        var id = this._placeHolderNameCounts[base];\n        this._placeHolderNameCounts[base] = id + 1;\n        return base + \"_\" + id;\n    };\n    return PlaceholderRegistry;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar _expParser = new Parser(new Lexer());\n/**\n * Returns a function converting html nodes to an i18n Message given an interpolationConfig\n */\nfunction createI18nMessageFactory(interpolationConfig) {\n    var visitor = new _I18nVisitor(_expParser, interpolationConfig);\n    return function (nodes, meaning, description, id) {\n        return visitor.toI18nMessage(nodes, meaning, description, id);\n    };\n}\nvar _I18nVisitor = /** @class */ (function () {\n    function _I18nVisitor(_expressionParser, _interpolationConfig) {\n        this._expressionParser = _expressionParser;\n        this._interpolationConfig = _interpolationConfig;\n    }\n    _I18nVisitor.prototype.toI18nMessage = function (nodes, meaning, description, id) {\n        this._isIcu = nodes.length == 1 && nodes[0] instanceof Expansion;\n        this._icuDepth = 0;\n        this._placeholderRegistry = new PlaceholderRegistry();\n        this._placeholderToContent = {};\n        this._placeholderToMessage = {};\n        var i18nodes = visitAll(this, nodes, {});\n        return new Message(i18nodes, this._placeholderToContent, this._placeholderToMessage, meaning, description, id);\n    };\n    _I18nVisitor.prototype.visitElement = function (el, context) {\n        var children = visitAll(this, el.children);\n        var attrs = {};\n        el.attrs.forEach(function (attr) {\n            // Do not visit the attributes, translatable ones are top-level ASTs\n            attrs[attr.name] = attr.value;\n        });\n        var isVoid = getHtmlTagDefinition(el.name).isVoid;\n        var startPhName = this._placeholderRegistry.getStartTagPlaceholderName(el.name, attrs, isVoid);\n        this._placeholderToContent[startPhName] = el.sourceSpan.toString();\n        var closePhName = '';\n        if (!isVoid) {\n            closePhName = this._placeholderRegistry.getCloseTagPlaceholderName(el.name);\n            this._placeholderToContent[closePhName] = \"</\" + el.name + \">\";\n        }\n        return new TagPlaceholder(el.name, attrs, startPhName, closePhName, children, isVoid, el.sourceSpan);\n    };\n    _I18nVisitor.prototype.visitAttribute = function (attribute, context) {\n        return this._visitTextWithInterpolation(attribute.value, attribute.sourceSpan);\n    };\n    _I18nVisitor.prototype.visitText = function (text, context) {\n        return this._visitTextWithInterpolation(text.value, text.sourceSpan);\n    };\n    _I18nVisitor.prototype.visitComment = function (comment, context) { return null; };\n    _I18nVisitor.prototype.visitExpansion = function (icu, context) {\n        var _this = this;\n        this._icuDepth++;\n        var i18nIcuCases = {};\n        var i18nIcu = new Icu(icu.switchValue, icu.type, i18nIcuCases, icu.sourceSpan);\n        icu.cases.forEach(function (caze) {\n            i18nIcuCases[caze.value] = new Container(caze.expression.map(function (node) { return node.visit(_this, {}); }), caze.expSourceSpan);\n        });\n        this._icuDepth--;\n        if (this._isIcu || this._icuDepth > 0) {\n            // Returns an ICU node when:\n            // - the message (vs a part of the message) is an ICU message, or\n            // - the ICU message is nested.\n            var expPh = this._placeholderRegistry.getUniquePlaceholder(\"VAR_\" + icu.type);\n            i18nIcu.expressionPlaceholder = expPh;\n            this._placeholderToContent[expPh] = icu.switchValue;\n            return i18nIcu;\n        }\n        // Else returns a placeholder\n        // ICU placeholders should not be replaced with their original content but with the their\n        // translations. We need to create a new visitor (they are not re-entrant) to compute the\n        // message id.\n        // TODO(vicb): add a html.Node -> i18n.Message cache to avoid having to re-create the msg\n        var phName = this._placeholderRegistry.getPlaceholderName('ICU', icu.sourceSpan.toString());\n        var visitor = new _I18nVisitor(this._expressionParser, this._interpolationConfig);\n        this._placeholderToMessage[phName] = visitor.toI18nMessage([icu], '', '', '');\n        return new IcuPlaceholder(i18nIcu, phName, icu.sourceSpan);\n    };\n    _I18nVisitor.prototype.visitExpansionCase = function (icuCase, context) {\n        throw new Error('Unreachable code');\n    };\n    _I18nVisitor.prototype._visitTextWithInterpolation = function (text, sourceSpan) {\n        var splitInterpolation = this._expressionParser.splitInterpolation(text, sourceSpan.start.toString(), this._interpolationConfig);\n        if (!splitInterpolation) {\n            // No expression, return a single text\n            return new Text$1(text, sourceSpan);\n        }\n        // Return a group of text + expressions\n        var nodes = [];\n        var container = new Container(nodes, sourceSpan);\n        var _a = this._interpolationConfig, sDelimiter = _a.start, eDelimiter = _a.end;\n        for (var i = 0; i < splitInterpolation.strings.length - 1; i++) {\n            var expression = splitInterpolation.expressions[i];\n            var baseName = _extractPlaceholderName(expression) || 'INTERPOLATION';\n            var phName = this._placeholderRegistry.getPlaceholderName(baseName, expression);\n            if (splitInterpolation.strings[i].length) {\n                // No need to add empty strings\n                nodes.push(new Text$1(splitInterpolation.strings[i], sourceSpan));\n            }\n            nodes.push(new Placeholder(expression, phName, sourceSpan));\n            this._placeholderToContent[phName] = sDelimiter + expression + eDelimiter;\n        }\n        // The last index contains no expression\n        var lastStringIdx = splitInterpolation.strings.length - 1;\n        if (splitInterpolation.strings[lastStringIdx].length) {\n            nodes.push(new Text$1(splitInterpolation.strings[lastStringIdx], sourceSpan));\n        }\n        return container;\n    };\n    return _I18nVisitor;\n}());\nvar _CUSTOM_PH_EXP = /\\/\\/[\\s\\S]*i18n[\\s\\S]*\\([\\s\\S]*ph[\\s\\S]*=[\\s\\S]*(\"|')([\\s\\S]*?)\\1[\\s\\S]*\\)/g;\nfunction _extractPlaceholderName(input) {\n    return input.split(_CUSTOM_PH_EXP)[2];\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * An i18n error.\n */\nvar I18nError = /** @class */ (function (_super) {\n    __extends(I18nError, _super);\n    function I18nError(span, msg) {\n        return _super.call(this, span, msg) || this;\n    }\n    return I18nError;\n}(ParseError));\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar _I18N_ATTR = 'i18n';\nvar _I18N_ATTR_PREFIX = 'i18n-';\nvar _I18N_COMMENT_PREFIX_REGEXP = /^i18n:?/;\nvar MEANING_SEPARATOR = '|';\nvar ID_SEPARATOR = '@@';\nvar i18nCommentsWarned = false;\n/**\n * Extract translatable messages from an html AST\n */\n\nfunction mergeTranslations(nodes, translations, interpolationConfig, implicitTags, implicitAttrs) {\n    var visitor = new _Visitor(implicitTags, implicitAttrs);\n    return visitor.merge(nodes, translations, interpolationConfig);\n}\nvar ExtractionResult = /** @class */ (function () {\n    function ExtractionResult(messages, errors) {\n        this.messages = messages;\n        this.errors = errors;\n    }\n    return ExtractionResult;\n}());\nvar _VisitorMode;\n(function (_VisitorMode) {\n    _VisitorMode[_VisitorMode[\"Extract\"] = 0] = \"Extract\";\n    _VisitorMode[_VisitorMode[\"Merge\"] = 1] = \"Merge\";\n})(_VisitorMode || (_VisitorMode = {}));\n/**\n * This Visitor is used:\n * 1. to extract all the translatable strings from an html AST (see `extract()`),\n * 2. to replace the translatable strings with the actual translations (see `merge()`)\n *\n * @internal\n */\nvar _Visitor = /** @class */ (function () {\n    function _Visitor(_implicitTags, _implicitAttrs) {\n        this._implicitTags = _implicitTags;\n        this._implicitAttrs = _implicitAttrs;\n    }\n    /**\n     * Extracts the messages from the tree\n     */\n    _Visitor.prototype.extract = function (nodes, interpolationConfig) {\n        var _this = this;\n        this._init(_VisitorMode.Extract, interpolationConfig);\n        nodes.forEach(function (node) { return node.visit(_this, null); });\n        if (this._inI18nBlock) {\n            this._reportError(nodes[nodes.length - 1], 'Unclosed block');\n        }\n        return new ExtractionResult(this._messages, this._errors);\n    };\n    /**\n     * Returns a tree where all translatable nodes are translated\n     */\n    _Visitor.prototype.merge = function (nodes, translations, interpolationConfig) {\n        this._init(_VisitorMode.Merge, interpolationConfig);\n        this._translations = translations;\n        // Construct a single fake root element\n        var wrapper = new Element('wrapper', [], nodes, undefined, undefined, undefined);\n        var translatedNode = wrapper.visit(this, null);\n        if (this._inI18nBlock) {\n            this._reportError(nodes[nodes.length - 1], 'Unclosed block');\n        }\n        return new ParseTreeResult(translatedNode.children, this._errors);\n    };\n    _Visitor.prototype.visitExpansionCase = function (icuCase, context) {\n        // Parse cases for translatable html attributes\n        var expression = visitAll(this, icuCase.expression, context);\n        if (this._mode === _VisitorMode.Merge) {\n            return new ExpansionCase(icuCase.value, expression, icuCase.sourceSpan, icuCase.valueSourceSpan, icuCase.expSourceSpan);\n        }\n    };\n    _Visitor.prototype.visitExpansion = function (icu, context) {\n        this._mayBeAddBlockChildren(icu);\n        var wasInIcu = this._inIcu;\n        if (!this._inIcu) {\n            // nested ICU messages should not be extracted but top-level translated as a whole\n            if (this._isInTranslatableSection) {\n                this._addMessage([icu]);\n            }\n            this._inIcu = true;\n        }\n        var cases = visitAll(this, icu.cases, context);\n        if (this._mode === _VisitorMode.Merge) {\n            icu = new Expansion(icu.switchValue, icu.type, cases, icu.sourceSpan, icu.switchValueSourceSpan);\n        }\n        this._inIcu = wasInIcu;\n        return icu;\n    };\n    _Visitor.prototype.visitComment = function (comment, context) {\n        var isOpening = _isOpeningComment(comment);\n        if (isOpening && this._isInTranslatableSection) {\n            this._reportError(comment, 'Could not start a block inside a translatable section');\n            return;\n        }\n        var isClosing = _isClosingComment(comment);\n        if (isClosing && !this._inI18nBlock) {\n            this._reportError(comment, 'Trying to close an unopened block');\n            return;\n        }\n        if (!this._inI18nNode && !this._inIcu) {\n            if (!this._inI18nBlock) {\n                if (isOpening) {\n                    // deprecated from v5 you should use <ng-container i18n> instead of i18n comments\n                    if (!i18nCommentsWarned && console && console.warn) {\n                        i18nCommentsWarned = true;\n                        var details = comment.sourceSpan.details ? \", \" + comment.sourceSpan.details : '';\n                        // TODO(ocombe): use a log service once there is a public one available\n                        console.warn(\"I18n comments are deprecated, use an <ng-container> element instead (\" + comment.sourceSpan.start + details + \")\");\n                    }\n                    this._inI18nBlock = true;\n                    this._blockStartDepth = this._depth;\n                    this._blockChildren = [];\n                    this._blockMeaningAndDesc =\n                        comment.value.replace(_I18N_COMMENT_PREFIX_REGEXP, '').trim();\n                    this._openTranslatableSection(comment);\n                }\n            }\n            else {\n                if (isClosing) {\n                    if (this._depth == this._blockStartDepth) {\n                        this._closeTranslatableSection(comment, this._blockChildren);\n                        this._inI18nBlock = false;\n                        var message = this._addMessage(this._blockChildren, this._blockMeaningAndDesc);\n                        // merge attributes in sections\n                        var nodes = this._translateMessage(comment, message);\n                        return visitAll(this, nodes);\n                    }\n                    else {\n                        this._reportError(comment, 'I18N blocks should not cross element boundaries');\n                        return;\n                    }\n                }\n            }\n        }\n    };\n    _Visitor.prototype.visitText = function (text, context) {\n        if (this._isInTranslatableSection) {\n            this._mayBeAddBlockChildren(text);\n        }\n        return text;\n    };\n    _Visitor.prototype.visitElement = function (el, context) {\n        var _this = this;\n        this._mayBeAddBlockChildren(el);\n        this._depth++;\n        var wasInI18nNode = this._inI18nNode;\n        var wasInImplicitNode = this._inImplicitNode;\n        var childNodes = [];\n        var translatedChildNodes = undefined;\n        // Extract:\n        // - top level nodes with the (implicit) \"i18n\" attribute if not already in a section\n        // - ICU messages\n        var i18nAttr = _getI18nAttr(el);\n        var i18nMeta = i18nAttr ? i18nAttr.value : '';\n        var isImplicit = this._implicitTags.some(function (tag) { return el.name === tag; }) && !this._inIcu &&\n            !this._isInTranslatableSection;\n        var isTopLevelImplicit = !wasInImplicitNode && isImplicit;\n        this._inImplicitNode = wasInImplicitNode || isImplicit;\n        if (!this._isInTranslatableSection && !this._inIcu) {\n            if (i18nAttr || isTopLevelImplicit) {\n                this._inI18nNode = true;\n                var message = this._addMessage(el.children, i18nMeta);\n                translatedChildNodes = this._translateMessage(el, message);\n            }\n            if (this._mode == _VisitorMode.Extract) {\n                var isTranslatable = i18nAttr || isTopLevelImplicit;\n                if (isTranslatable)\n                    this._openTranslatableSection(el);\n                visitAll(this, el.children);\n                if (isTranslatable)\n                    this._closeTranslatableSection(el, el.children);\n            }\n        }\n        else {\n            if (i18nAttr || isTopLevelImplicit) {\n                this._reportError(el, 'Could not mark an element as translatable inside a translatable section');\n            }\n            if (this._mode == _VisitorMode.Extract) {\n                // Descend into child nodes for extraction\n                visitAll(this, el.children);\n            }\n        }\n        if (this._mode === _VisitorMode.Merge) {\n            var visitNodes = translatedChildNodes || el.children;\n            visitNodes.forEach(function (child) {\n                var visited = child.visit(_this, context);\n                if (visited && !_this._isInTranslatableSection) {\n                    // Do not add the children from translatable sections (= i18n blocks here)\n                    // They will be added later in this loop when the block closes (i.e. on `<!-- /i18n -->`)\n                    childNodes = childNodes.concat(visited);\n                }\n            });\n        }\n        this._visitAttributesOf(el);\n        this._depth--;\n        this._inI18nNode = wasInI18nNode;\n        this._inImplicitNode = wasInImplicitNode;\n        if (this._mode === _VisitorMode.Merge) {\n            var translatedAttrs = this._translateAttributes(el);\n            return new Element(el.name, translatedAttrs, childNodes, el.sourceSpan, el.startSourceSpan, el.endSourceSpan);\n        }\n        return null;\n    };\n    _Visitor.prototype.visitAttribute = function (attribute, context) {\n        throw new Error('unreachable code');\n    };\n    _Visitor.prototype._init = function (mode, interpolationConfig) {\n        this._mode = mode;\n        this._inI18nBlock = false;\n        this._inI18nNode = false;\n        this._depth = 0;\n        this._inIcu = false;\n        this._msgCountAtSectionStart = undefined;\n        this._errors = [];\n        this._messages = [];\n        this._inImplicitNode = false;\n        this._createI18nMessage = createI18nMessageFactory(interpolationConfig);\n    };\n    // looks for translatable attributes\n    _Visitor.prototype._visitAttributesOf = function (el) {\n        var _this = this;\n        var explicitAttrNameToValue = {};\n        var implicitAttrNames = this._implicitAttrs[el.name] || [];\n        el.attrs.filter(function (attr) { return attr.name.startsWith(_I18N_ATTR_PREFIX); })\n            .forEach(function (attr) { return explicitAttrNameToValue[attr.name.slice(_I18N_ATTR_PREFIX.length)] =\n            attr.value; });\n        el.attrs.forEach(function (attr) {\n            if (attr.name in explicitAttrNameToValue) {\n                _this._addMessage([attr], explicitAttrNameToValue[attr.name]);\n            }\n            else if (implicitAttrNames.some(function (name) { return attr.name === name; })) {\n                _this._addMessage([attr]);\n            }\n        });\n    };\n    // add a translatable message\n    _Visitor.prototype._addMessage = function (ast, msgMeta) {\n        if (ast.length == 0 ||\n            ast.length == 1 && ast[0] instanceof Attribute && !ast[0].value) {\n            // Do not create empty messages\n            return null;\n        }\n        var _a = _parseMessageMeta(msgMeta), meaning = _a.meaning, description = _a.description, id = _a.id;\n        var message = this._createI18nMessage(ast, meaning, description, id);\n        this._messages.push(message);\n        return message;\n    };\n    // Translates the given message given the `TranslationBundle`\n    // This is used for translating elements / blocks - see `_translateAttributes` for attributes\n    // no-op when called in extraction mode (returns [])\n    _Visitor.prototype._translateMessage = function (el, message) {\n        if (message && this._mode === _VisitorMode.Merge) {\n            var nodes = this._translations.get(message);\n            if (nodes) {\n                return nodes;\n            }\n            this._reportError(el, \"Translation unavailable for message id=\\\"\" + this._translations.digest(message) + \"\\\"\");\n        }\n        return [];\n    };\n    // translate the attributes of an element and remove i18n specific attributes\n    _Visitor.prototype._translateAttributes = function (el) {\n        var _this = this;\n        var attributes = el.attrs;\n        var i18nParsedMessageMeta = {};\n        attributes.forEach(function (attr) {\n            if (attr.name.startsWith(_I18N_ATTR_PREFIX)) {\n                i18nParsedMessageMeta[attr.name.slice(_I18N_ATTR_PREFIX.length)] =\n                    _parseMessageMeta(attr.value);\n            }\n        });\n        var translatedAttributes = [];\n        attributes.forEach(function (attr) {\n            if (attr.name === _I18N_ATTR || attr.name.startsWith(_I18N_ATTR_PREFIX)) {\n                // strip i18n specific attributes\n                return;\n            }\n            if (attr.value && attr.value != '' && i18nParsedMessageMeta.hasOwnProperty(attr.name)) {\n                var _a = i18nParsedMessageMeta[attr.name], meaning = _a.meaning, description = _a.description, id = _a.id;\n                var message = _this._createI18nMessage([attr], meaning, description, id);\n                var nodes = _this._translations.get(message);\n                if (nodes) {\n                    if (nodes.length == 0) {\n                        translatedAttributes.push(new Attribute(attr.name, '', attr.sourceSpan));\n                    }\n                    else if (nodes[0] instanceof Text) {\n                        var value = nodes[0].value;\n                        translatedAttributes.push(new Attribute(attr.name, value, attr.sourceSpan));\n                    }\n                    else {\n                        _this._reportError(el, \"Unexpected translation for attribute \\\"\" + attr.name + \"\\\" (id=\\\"\" + (id || _this._translations.digest(message)) + \"\\\")\");\n                    }\n                }\n                else {\n                    _this._reportError(el, \"Translation unavailable for attribute \\\"\" + attr.name + \"\\\" (id=\\\"\" + (id || _this._translations.digest(message)) + \"\\\")\");\n                }\n            }\n            else {\n                translatedAttributes.push(attr);\n            }\n        });\n        return translatedAttributes;\n    };\n    /**\n     * Add the node as a child of the block when:\n     * - we are in a block,\n     * - we are not inside a ICU message (those are handled separately),\n     * - the node is a \"direct child\" of the block\n     */\n    _Visitor.prototype._mayBeAddBlockChildren = function (node) {\n        if (this._inI18nBlock && !this._inIcu && this._depth == this._blockStartDepth) {\n            this._blockChildren.push(node);\n        }\n    };\n    /**\n     * Marks the start of a section, see `_closeTranslatableSection`\n     */\n    _Visitor.prototype._openTranslatableSection = function (node) {\n        if (this._isInTranslatableSection) {\n            this._reportError(node, 'Unexpected section start');\n        }\n        else {\n            this._msgCountAtSectionStart = this._messages.length;\n        }\n    };\n    Object.defineProperty(_Visitor.prototype, \"_isInTranslatableSection\", {\n        /**\n         * A translatable section could be:\n         * - the content of translatable element,\n         * - nodes between `<!-- i18n -->` and `<!-- /i18n -->` comments\n         */\n        get: function () {\n            return this._msgCountAtSectionStart !== void 0;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * Terminates a section.\n     *\n     * If a section has only one significant children (comments not significant) then we should not\n     * keep the message from this children:\n     *\n     * `<p i18n=\"meaning|description\">{ICU message}</p>` would produce two messages:\n     * - one for the <p> content with meaning and description,\n     * - another one for the ICU message.\n     *\n     * In this case the last message is discarded as it contains less information (the AST is\n     * otherwise identical).\n     *\n     * Note that we should still keep messages extracted from attributes inside the section (ie in the\n     * ICU message here)\n     */\n    _Visitor.prototype._closeTranslatableSection = function (node, directChildren) {\n        if (!this._isInTranslatableSection) {\n            this._reportError(node, 'Unexpected section end');\n            return;\n        }\n        var startIndex = this._msgCountAtSectionStart;\n        var significantChildren = directChildren.reduce(function (count, node) { return count + (node instanceof Comment ? 0 : 1); }, 0);\n        if (significantChildren == 1) {\n            for (var i = this._messages.length - 1; i >= startIndex; i--) {\n                var ast = this._messages[i].nodes;\n                if (!(ast.length == 1 && ast[0] instanceof Text$1)) {\n                    this._messages.splice(i, 1);\n                    break;\n                }\n            }\n        }\n        this._msgCountAtSectionStart = undefined;\n    };\n    _Visitor.prototype._reportError = function (node, msg) {\n        this._errors.push(new I18nError(node.sourceSpan, msg));\n    };\n    return _Visitor;\n}());\nfunction _isOpeningComment(n) {\n    return !!(n instanceof Comment && n.value && n.value.startsWith('i18n'));\n}\nfunction _isClosingComment(n) {\n    return !!(n instanceof Comment && n.value && n.value === '/i18n');\n}\nfunction _getI18nAttr(p) {\n    return p.attrs.find(function (attr) { return attr.name === _I18N_ATTR; }) || null;\n}\nfunction _parseMessageMeta(i18n) {\n    if (!i18n)\n        return { meaning: '', description: '', id: '' };\n    var idIndex = i18n.indexOf(ID_SEPARATOR);\n    var descIndex = i18n.indexOf(MEANING_SEPARATOR);\n    var _a = __read((idIndex > -1) ? [i18n.slice(0, idIndex), i18n.slice(idIndex + 2)] : [i18n, ''], 2), meaningAndDesc = _a[0], id = _a[1];\n    var _b = __read((descIndex > -1) ?\n        [meaningAndDesc.slice(0, descIndex), meaningAndDesc.slice(descIndex + 1)] :\n        ['', meaningAndDesc], 2), meaning = _b[0], description = _b[1];\n    return { meaning: meaning, description: description, id: id };\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar XmlTagDefinition = /** @class */ (function () {\n    function XmlTagDefinition() {\n        this.closedByParent = false;\n        this.contentType = TagContentType.PARSABLE_DATA;\n        this.isVoid = false;\n        this.ignoreFirstLf = false;\n        this.canSelfClose = true;\n    }\n    XmlTagDefinition.prototype.requireExtraParent = function (currentParent) { return false; };\n    XmlTagDefinition.prototype.isClosedByChild = function (name) { return false; };\n    return XmlTagDefinition;\n}());\nvar _TAG_DEFINITION = new XmlTagDefinition();\nfunction getXmlTagDefinition(tagName) {\n    return _TAG_DEFINITION;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar XmlParser = /** @class */ (function (_super) {\n    __extends(XmlParser, _super);\n    function XmlParser() {\n        return _super.call(this, getXmlTagDefinition) || this;\n    }\n    XmlParser.prototype.parse = function (source, url, parseExpansionForms) {\n        if (parseExpansionForms === void 0) { parseExpansionForms = false; }\n        return _super.prototype.parse.call(this, source, url, parseExpansionForms);\n    };\n    return XmlParser;\n}(Parser$1));\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar Serializer = /** @class */ (function () {\n    function Serializer() {\n    }\n    // Creates a name mapper, see `PlaceholderMapper`\n    // Returning `null` means that no name mapping is used.\n    Serializer.prototype.createNameMapper = function (message) { return null; };\n    return Serializer;\n}());\n/**\n * A simple mapper that take a function to transform an internal name to a public name\n */\nvar SimplePlaceholderMapper = /** @class */ (function (_super) {\n    __extends(SimplePlaceholderMapper, _super);\n    // create a mapping from the message\n    function SimplePlaceholderMapper(message, mapName) {\n        var _this = _super.call(this) || this;\n        _this.mapName = mapName;\n        _this.internalToPublic = {};\n        _this.publicToNextId = {};\n        _this.publicToInternal = {};\n        message.nodes.forEach(function (node) { return node.visit(_this); });\n        return _this;\n    }\n    SimplePlaceholderMapper.prototype.toPublicName = function (internalName) {\n        return this.internalToPublic.hasOwnProperty(internalName) ?\n            this.internalToPublic[internalName] :\n            null;\n    };\n    SimplePlaceholderMapper.prototype.toInternalName = function (publicName) {\n        return this.publicToInternal.hasOwnProperty(publicName) ? this.publicToInternal[publicName] :\n            null;\n    };\n    SimplePlaceholderMapper.prototype.visitText = function (text, context) { return null; };\n    SimplePlaceholderMapper.prototype.visitTagPlaceholder = function (ph, context) {\n        this.visitPlaceholderName(ph.startName);\n        _super.prototype.visitTagPlaceholder.call(this, ph, context);\n        this.visitPlaceholderName(ph.closeName);\n    };\n    SimplePlaceholderMapper.prototype.visitPlaceholder = function (ph, context) { this.visitPlaceholderName(ph.name); };\n    SimplePlaceholderMapper.prototype.visitIcuPlaceholder = function (ph, context) {\n        this.visitPlaceholderName(ph.name);\n    };\n    // XMB placeholders could only contains A-Z, 0-9 and _\n    SimplePlaceholderMapper.prototype.visitPlaceholderName = function (internalName) {\n        if (!internalName || this.internalToPublic.hasOwnProperty(internalName)) {\n            return;\n        }\n        var publicName = this.mapName(internalName);\n        if (this.publicToInternal.hasOwnProperty(publicName)) {\n            // Create a new XMB when it has already been used\n            var nextId = this.publicToNextId[publicName];\n            this.publicToNextId[publicName] = nextId + 1;\n            publicName = publicName + \"_\" + nextId;\n        }\n        else {\n            this.publicToNextId[publicName] = 1;\n        }\n        this.internalToPublic[internalName] = publicName;\n        this.publicToInternal[publicName] = internalName;\n    };\n    return SimplePlaceholderMapper;\n}(RecurseVisitor));\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar _Visitor$1 = /** @class */ (function () {\n    function _Visitor() {\n    }\n    _Visitor.prototype.visitTag = function (tag) {\n        var _this = this;\n        var strAttrs = this._serializeAttributes(tag.attrs);\n        if (tag.children.length == 0) {\n            return \"<\" + tag.name + strAttrs + \"/>\";\n        }\n        var strChildren = tag.children.map(function (node) { return node.visit(_this); });\n        return \"<\" + tag.name + strAttrs + \">\" + strChildren.join('') + \"</\" + tag.name + \">\";\n    };\n    _Visitor.prototype.visitText = function (text) { return text.value; };\n    _Visitor.prototype.visitDeclaration = function (decl) {\n        return \"<?xml\" + this._serializeAttributes(decl.attrs) + \" ?>\";\n    };\n    _Visitor.prototype._serializeAttributes = function (attrs) {\n        var strAttrs = Object.keys(attrs).map(function (name) { return name + \"=\\\"\" + attrs[name] + \"\\\"\"; }).join(' ');\n        return strAttrs.length > 0 ? ' ' + strAttrs : '';\n    };\n    _Visitor.prototype.visitDoctype = function (doctype) {\n        return \"<!DOCTYPE \" + doctype.rootTag + \" [\\n\" + doctype.dtd + \"\\n]>\";\n    };\n    return _Visitor;\n}());\nvar _visitor = new _Visitor$1();\nfunction serialize(nodes) {\n    return nodes.map(function (node) { return node.visit(_visitor); }).join('');\n}\nvar Declaration = /** @class */ (function () {\n    function Declaration(unescapedAttrs) {\n        var _this = this;\n        this.attrs = {};\n        Object.keys(unescapedAttrs).forEach(function (k) {\n            _this.attrs[k] = escapeXml(unescapedAttrs[k]);\n        });\n    }\n    Declaration.prototype.visit = function (visitor) { return visitor.visitDeclaration(this); };\n    return Declaration;\n}());\nvar Doctype = /** @class */ (function () {\n    function Doctype(rootTag, dtd) {\n        this.rootTag = rootTag;\n        this.dtd = dtd;\n    }\n    Doctype.prototype.visit = function (visitor) { return visitor.visitDoctype(this); };\n    return Doctype;\n}());\nvar Tag = /** @class */ (function () {\n    function Tag(name, unescapedAttrs, children) {\n        if (unescapedAttrs === void 0) { unescapedAttrs = {}; }\n        if (children === void 0) { children = []; }\n        var _this = this;\n        this.name = name;\n        this.children = children;\n        this.attrs = {};\n        Object.keys(unescapedAttrs).forEach(function (k) {\n            _this.attrs[k] = escapeXml(unescapedAttrs[k]);\n        });\n    }\n    Tag.prototype.visit = function (visitor) { return visitor.visitTag(this); };\n    return Tag;\n}());\nvar Text$2 = /** @class */ (function () {\n    function Text(unescapedValue) {\n        this.value = escapeXml(unescapedValue);\n    }\n    Text.prototype.visit = function (visitor) { return visitor.visitText(this); };\n    return Text;\n}());\nvar CR = /** @class */ (function (_super) {\n    __extends(CR, _super);\n    function CR(ws) {\n        if (ws === void 0) { ws = 0; }\n        return _super.call(this, \"\\n\" + new Array(ws + 1).join(' ')) || this;\n    }\n    return CR;\n}(Text$2));\nvar _ESCAPED_CHARS = [\n    [/&/g, '&amp;'],\n    [/\"/g, '&quot;'],\n    [/'/g, '&apos;'],\n    [/</g, '&lt;'],\n    [/>/g, '&gt;'],\n];\n// Escape `_ESCAPED_CHARS` characters in the given text with encoded entities\nfunction escapeXml(text) {\n    return _ESCAPED_CHARS.reduce(function (text, entry) { return text.replace(entry[0], entry[1]); }, text);\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar _VERSION = '1.2';\nvar _XMLNS = 'urn:oasis:names:tc:xliff:document:1.2';\n// TODO(vicb): make this a param (s/_/-/)\nvar _DEFAULT_SOURCE_LANG = 'en';\nvar _PLACEHOLDER_TAG = 'x';\nvar _MARKER_TAG = 'mrk';\nvar _FILE_TAG = 'file';\nvar _SOURCE_TAG = 'source';\nvar _SEGMENT_SOURCE_TAG = 'seg-source';\nvar _TARGET_TAG = 'target';\nvar _UNIT_TAG = 'trans-unit';\nvar _CONTEXT_GROUP_TAG = 'context-group';\nvar _CONTEXT_TAG = 'context';\n// http://docs.oasis-open.org/xliff/v1.2/os/xliff-core.html\n// http://docs.oasis-open.org/xliff/v1.2/xliff-profile-html/xliff-profile-html-1.2.html\nvar Xliff = /** @class */ (function (_super) {\n    __extends(Xliff, _super);\n    function Xliff() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Xliff.prototype.write = function (messages, locale) {\n        var visitor = new _WriteVisitor();\n        var transUnits = [];\n        messages.forEach(function (message) {\n            var contextTags = [];\n            message.sources.forEach(function (source) {\n                var contextGroupTag = new Tag(_CONTEXT_GROUP_TAG, { purpose: 'location' });\n                contextGroupTag.children.push(new CR(10), new Tag(_CONTEXT_TAG, { 'context-type': 'sourcefile' }, [new Text$2(source.filePath)]), new CR(10), new Tag(_CONTEXT_TAG, { 'context-type': 'linenumber' }, [new Text$2(\"\" + source.startLine)]), new CR(8));\n                contextTags.push(new CR(8), contextGroupTag);\n            });\n            var transUnit = new Tag(_UNIT_TAG, { id: message.id, datatype: 'html' });\n            (_a = transUnit.children).push.apply(_a, __spread([new CR(8), new Tag(_SOURCE_TAG, {}, visitor.serialize(message.nodes))], contextTags));\n            if (message.description) {\n                transUnit.children.push(new CR(8), new Tag('note', { priority: '1', from: 'description' }, [new Text$2(message.description)]));\n            }\n            if (message.meaning) {\n                transUnit.children.push(new CR(8), new Tag('note', { priority: '1', from: 'meaning' }, [new Text$2(message.meaning)]));\n            }\n            transUnit.children.push(new CR(6));\n            transUnits.push(new CR(6), transUnit);\n            var _a;\n        });\n        var body = new Tag('body', {}, __spread(transUnits, [new CR(4)]));\n        var file = new Tag('file', {\n            'source-language': locale || _DEFAULT_SOURCE_LANG,\n            datatype: 'plaintext',\n            original: 'ng2.template',\n        }, [new CR(4), body, new CR(2)]);\n        var xliff = new Tag('xliff', { version: _VERSION, xmlns: _XMLNS }, [new CR(2), file, new CR()]);\n        return serialize([\n            new Declaration({ version: '1.0', encoding: 'UTF-8' }), new CR(), xliff, new CR()\n        ]);\n    };\n    Xliff.prototype.load = function (content, url) {\n        // xliff to xml nodes\n        var xliffParser = new XliffParser();\n        var _a = xliffParser.parse(content, url), locale = _a.locale, msgIdToHtml = _a.msgIdToHtml, errors = _a.errors;\n        // xml nodes to i18n nodes\n        var i18nNodesByMsgId = {};\n        var converter = new XmlToI18n();\n        Object.keys(msgIdToHtml).forEach(function (msgId) {\n            var _a = converter.convert(msgIdToHtml[msgId], url), i18nNodes = _a.i18nNodes, e = _a.errors;\n            errors.push.apply(errors, __spread(e));\n            i18nNodesByMsgId[msgId] = i18nNodes;\n        });\n        if (errors.length) {\n            throw new Error(\"xliff parse errors:\\n\" + errors.join('\\n'));\n        }\n        return { locale: locale, i18nNodesByMsgId: i18nNodesByMsgId };\n    };\n    Xliff.prototype.digest = function (message) { return digest(message); };\n    return Xliff;\n}(Serializer));\nvar _WriteVisitor = /** @class */ (function () {\n    function _WriteVisitor() {\n    }\n    _WriteVisitor.prototype.visitText = function (text, context) { return [new Text$2(text.value)]; };\n    _WriteVisitor.prototype.visitContainer = function (container, context) {\n        var _this = this;\n        var nodes = [];\n        container.children.forEach(function (node) { return nodes.push.apply(nodes, __spread(node.visit(_this))); });\n        return nodes;\n    };\n    _WriteVisitor.prototype.visitIcu = function (icu, context) {\n        var _this = this;\n        var nodes = [new Text$2(\"{\" + icu.expressionPlaceholder + \", \" + icu.type + \", \")];\n        Object.keys(icu.cases).forEach(function (c) {\n            nodes.push.apply(nodes, __spread([new Text$2(c + \" {\")], icu.cases[c].visit(_this), [new Text$2(\"} \")]));\n        });\n        nodes.push(new Text$2(\"}\"));\n        return nodes;\n    };\n    _WriteVisitor.prototype.visitTagPlaceholder = function (ph, context) {\n        var ctype = getCtypeForTag(ph.tag);\n        if (ph.isVoid) {\n            // void tags have no children nor closing tags\n            return [new Tag(_PLACEHOLDER_TAG, { id: ph.startName, ctype: ctype, 'equiv-text': \"<\" + ph.tag + \"/>\" })];\n        }\n        var startTagPh = new Tag(_PLACEHOLDER_TAG, { id: ph.startName, ctype: ctype, 'equiv-text': \"<\" + ph.tag + \">\" });\n        var closeTagPh = new Tag(_PLACEHOLDER_TAG, { id: ph.closeName, ctype: ctype, 'equiv-text': \"</\" + ph.tag + \">\" });\n        return __spread([startTagPh], this.serialize(ph.children), [closeTagPh]);\n    };\n    _WriteVisitor.prototype.visitPlaceholder = function (ph, context) {\n        return [new Tag(_PLACEHOLDER_TAG, { id: ph.name, 'equiv-text': \"{{\" + ph.value + \"}}\" })];\n    };\n    _WriteVisitor.prototype.visitIcuPlaceholder = function (ph, context) {\n        var equivText = \"{\" + ph.value.expression + \", \" + ph.value.type + \", \" + Object.keys(ph.value.cases).map(function (value) { return value + ' {...}'; }).join(' ') + \"}\";\n        return [new Tag(_PLACEHOLDER_TAG, { id: ph.name, 'equiv-text': equivText })];\n    };\n    _WriteVisitor.prototype.serialize = function (nodes) {\n        var _this = this;\n        return [].concat.apply([], __spread(nodes.map(function (node) { return node.visit(_this); })));\n    };\n    return _WriteVisitor;\n}());\n// TODO(vicb): add error management (structure)\n// Extract messages as xml nodes from the xliff file\nvar XliffParser = /** @class */ (function () {\n    function XliffParser() {\n        this._locale = null;\n    }\n    XliffParser.prototype.parse = function (xliff, url) {\n        this._unitMlString = null;\n        this._msgIdToHtml = {};\n        var xml = new XmlParser().parse(xliff, url, false);\n        this._errors = xml.errors;\n        visitAll(this, xml.rootNodes, null);\n        return {\n            msgIdToHtml: this._msgIdToHtml,\n            errors: this._errors,\n            locale: this._locale,\n        };\n    };\n    XliffParser.prototype.visitElement = function (element, context) {\n        switch (element.name) {\n            case _UNIT_TAG:\n                this._unitMlString = null;\n                var idAttr = element.attrs.find(function (attr) { return attr.name === 'id'; });\n                if (!idAttr) {\n                    this._addError(element, \"<\" + _UNIT_TAG + \"> misses the \\\"id\\\" attribute\");\n                }\n                else {\n                    var id = idAttr.value;\n                    if (this._msgIdToHtml.hasOwnProperty(id)) {\n                        this._addError(element, \"Duplicated translations for msg \" + id);\n                    }\n                    else {\n                        visitAll(this, element.children, null);\n                        if (typeof this._unitMlString === 'string') {\n                            this._msgIdToHtml[id] = this._unitMlString;\n                        }\n                        else {\n                            this._addError(element, \"Message \" + id + \" misses a translation\");\n                        }\n                    }\n                }\n                break;\n            // ignore those tags\n            case _SOURCE_TAG:\n            case _SEGMENT_SOURCE_TAG:\n                break;\n            case _TARGET_TAG:\n                var innerTextStart = element.startSourceSpan.end.offset;\n                var innerTextEnd = element.endSourceSpan.start.offset;\n                var content = element.startSourceSpan.start.file.content;\n                var innerText = content.slice(innerTextStart, innerTextEnd);\n                this._unitMlString = innerText;\n                break;\n            case _FILE_TAG:\n                var localeAttr = element.attrs.find(function (attr) { return attr.name === 'target-language'; });\n                if (localeAttr) {\n                    this._locale = localeAttr.value;\n                }\n                visitAll(this, element.children, null);\n                break;\n            default:\n                // TODO(vicb): assert file structure, xliff version\n                // For now only recurse on unhandled nodes\n                visitAll(this, element.children, null);\n        }\n    };\n    XliffParser.prototype.visitAttribute = function (attribute, context) { };\n    XliffParser.prototype.visitText = function (text, context) { };\n    XliffParser.prototype.visitComment = function (comment, context) { };\n    XliffParser.prototype.visitExpansion = function (expansion, context) { };\n    XliffParser.prototype.visitExpansionCase = function (expansionCase, context) { };\n    XliffParser.prototype._addError = function (node, message) {\n        this._errors.push(new I18nError(node.sourceSpan, message));\n    };\n    return XliffParser;\n}());\n// Convert ml nodes (xliff syntax) to i18n nodes\nvar XmlToI18n = /** @class */ (function () {\n    function XmlToI18n() {\n    }\n    XmlToI18n.prototype.convert = function (message, url) {\n        var xmlIcu = new XmlParser().parse(message, url, true);\n        this._errors = xmlIcu.errors;\n        var i18nNodes = this._errors.length > 0 || xmlIcu.rootNodes.length == 0 ?\n            [] : [].concat.apply([], __spread(visitAll(this, xmlIcu.rootNodes)));\n        return {\n            i18nNodes: i18nNodes,\n            errors: this._errors,\n        };\n    };\n    XmlToI18n.prototype.visitText = function (text, context) { return new Text$1(text.value, text.sourceSpan); };\n    XmlToI18n.prototype.visitElement = function (el, context) {\n        if (el.name === _PLACEHOLDER_TAG) {\n            var nameAttr = el.attrs.find(function (attr) { return attr.name === 'id'; });\n            if (nameAttr) {\n                return new Placeholder('', nameAttr.value, el.sourceSpan);\n            }\n            this._addError(el, \"<\" + _PLACEHOLDER_TAG + \"> misses the \\\"id\\\" attribute\");\n            return null;\n        }\n        if (el.name === _MARKER_TAG) {\n            return [].concat.apply([], __spread(visitAll(this, el.children)));\n        }\n        this._addError(el, \"Unexpected tag\");\n        return null;\n    };\n    XmlToI18n.prototype.visitExpansion = function (icu, context) {\n        var caseMap = {};\n        visitAll(this, icu.cases).forEach(function (c) {\n            caseMap[c.value] = new Container(c.nodes, icu.sourceSpan);\n        });\n        return new Icu(icu.switchValue, icu.type, caseMap, icu.sourceSpan);\n    };\n    XmlToI18n.prototype.visitExpansionCase = function (icuCase, context) {\n        return {\n            value: icuCase.value,\n            nodes: visitAll(this, icuCase.expression),\n        };\n    };\n    XmlToI18n.prototype.visitComment = function (comment, context) { };\n    XmlToI18n.prototype.visitAttribute = function (attribute, context) { };\n    XmlToI18n.prototype._addError = function (node, message) {\n        this._errors.push(new I18nError(node.sourceSpan, message));\n    };\n    return XmlToI18n;\n}());\nfunction getCtypeForTag(tag) {\n    switch (tag.toLowerCase()) {\n        case 'br':\n            return 'lb';\n        case 'img':\n            return 'image';\n        default:\n            return \"x-\" + tag;\n    }\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar _VERSION$1 = '2.0';\nvar _XMLNS$1 = 'urn:oasis:names:tc:xliff:document:2.0';\n// TODO(vicb): make this a param (s/_/-/)\nvar _DEFAULT_SOURCE_LANG$1 = 'en';\nvar _PLACEHOLDER_TAG$1 = 'ph';\nvar _PLACEHOLDER_SPANNING_TAG = 'pc';\nvar _MARKER_TAG$1 = 'mrk';\nvar _XLIFF_TAG = 'xliff';\nvar _SOURCE_TAG$1 = 'source';\nvar _TARGET_TAG$1 = 'target';\nvar _UNIT_TAG$1 = 'unit';\n// http://docs.oasis-open.org/xliff/xliff-core/v2.0/os/xliff-core-v2.0-os.html\nvar Xliff2 = /** @class */ (function (_super) {\n    __extends(Xliff2, _super);\n    function Xliff2() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Xliff2.prototype.write = function (messages, locale) {\n        var visitor = new _WriteVisitor$1();\n        var units = [];\n        messages.forEach(function (message) {\n            var unit = new Tag(_UNIT_TAG$1, { id: message.id });\n            var notes = new Tag('notes');\n            if (message.description || message.meaning) {\n                if (message.description) {\n                    notes.children.push(new CR(8), new Tag('note', { category: 'description' }, [new Text$2(message.description)]));\n                }\n                if (message.meaning) {\n                    notes.children.push(new CR(8), new Tag('note', { category: 'meaning' }, [new Text$2(message.meaning)]));\n                }\n            }\n            message.sources.forEach(function (source) {\n                notes.children.push(new CR(8), new Tag('note', { category: 'location' }, [\n                    new Text$2(source.filePath + \":\" + source.startLine + (source.endLine !== source.startLine ? ',' + source.endLine : ''))\n                ]));\n            });\n            notes.children.push(new CR(6));\n            unit.children.push(new CR(6), notes);\n            var segment = new Tag('segment');\n            segment.children.push(new CR(8), new Tag(_SOURCE_TAG$1, {}, visitor.serialize(message.nodes)), new CR(6));\n            unit.children.push(new CR(6), segment, new CR(4));\n            units.push(new CR(4), unit);\n        });\n        var file = new Tag('file', { 'original': 'ng.template', id: 'ngi18n' }, __spread(units, [new CR(2)]));\n        var xliff = new Tag(_XLIFF_TAG, { version: _VERSION$1, xmlns: _XMLNS$1, srcLang: locale || _DEFAULT_SOURCE_LANG$1 }, [new CR(2), file, new CR()]);\n        return serialize([\n            new Declaration({ version: '1.0', encoding: 'UTF-8' }), new CR(), xliff, new CR()\n        ]);\n    };\n    Xliff2.prototype.load = function (content, url) {\n        // xliff to xml nodes\n        var xliff2Parser = new Xliff2Parser();\n        var _a = xliff2Parser.parse(content, url), locale = _a.locale, msgIdToHtml = _a.msgIdToHtml, errors = _a.errors;\n        // xml nodes to i18n nodes\n        var i18nNodesByMsgId = {};\n        var converter = new XmlToI18n$1();\n        Object.keys(msgIdToHtml).forEach(function (msgId) {\n            var _a = converter.convert(msgIdToHtml[msgId], url), i18nNodes = _a.i18nNodes, e = _a.errors;\n            errors.push.apply(errors, __spread(e));\n            i18nNodesByMsgId[msgId] = i18nNodes;\n        });\n        if (errors.length) {\n            throw new Error(\"xliff2 parse errors:\\n\" + errors.join('\\n'));\n        }\n        return { locale: locale, i18nNodesByMsgId: i18nNodesByMsgId };\n    };\n    Xliff2.prototype.digest = function (message) { return decimalDigest(message); };\n    return Xliff2;\n}(Serializer));\nvar _WriteVisitor$1 = /** @class */ (function () {\n    function _WriteVisitor() {\n    }\n    _WriteVisitor.prototype.visitText = function (text, context) { return [new Text$2(text.value)]; };\n    _WriteVisitor.prototype.visitContainer = function (container, context) {\n        var _this = this;\n        var nodes = [];\n        container.children.forEach(function (node) { return nodes.push.apply(nodes, __spread(node.visit(_this))); });\n        return nodes;\n    };\n    _WriteVisitor.prototype.visitIcu = function (icu, context) {\n        var _this = this;\n        var nodes = [new Text$2(\"{\" + icu.expressionPlaceholder + \", \" + icu.type + \", \")];\n        Object.keys(icu.cases).forEach(function (c) {\n            nodes.push.apply(nodes, __spread([new Text$2(c + \" {\")], icu.cases[c].visit(_this), [new Text$2(\"} \")]));\n        });\n        nodes.push(new Text$2(\"}\"));\n        return nodes;\n    };\n    _WriteVisitor.prototype.visitTagPlaceholder = function (ph, context) {\n        var _this = this;\n        var type = getTypeForTag(ph.tag);\n        if (ph.isVoid) {\n            var tagPh = new Tag(_PLACEHOLDER_TAG$1, {\n                id: (this._nextPlaceholderId++).toString(),\n                equiv: ph.startName,\n                type: type,\n                disp: \"<\" + ph.tag + \"/>\",\n            });\n            return [tagPh];\n        }\n        var tagPc = new Tag(_PLACEHOLDER_SPANNING_TAG, {\n            id: (this._nextPlaceholderId++).toString(),\n            equivStart: ph.startName,\n            equivEnd: ph.closeName,\n            type: type,\n            dispStart: \"<\" + ph.tag + \">\",\n            dispEnd: \"</\" + ph.tag + \">\",\n        });\n        var nodes = [].concat.apply([], __spread(ph.children.map(function (node) { return node.visit(_this); })));\n        if (nodes.length) {\n            nodes.forEach(function (node) { return tagPc.children.push(node); });\n        }\n        else {\n            tagPc.children.push(new Text$2(''));\n        }\n        return [tagPc];\n    };\n    _WriteVisitor.prototype.visitPlaceholder = function (ph, context) {\n        var idStr = (this._nextPlaceholderId++).toString();\n        return [new Tag(_PLACEHOLDER_TAG$1, {\n                id: idStr,\n                equiv: ph.name,\n                disp: \"{{\" + ph.value + \"}}\",\n            })];\n    };\n    _WriteVisitor.prototype.visitIcuPlaceholder = function (ph, context) {\n        var cases = Object.keys(ph.value.cases).map(function (value) { return value + ' {...}'; }).join(' ');\n        var idStr = (this._nextPlaceholderId++).toString();\n        return [new Tag(_PLACEHOLDER_TAG$1, { id: idStr, equiv: ph.name, disp: \"{\" + ph.value.expression + \", \" + ph.value.type + \", \" + cases + \"}\" })];\n    };\n    _WriteVisitor.prototype.serialize = function (nodes) {\n        var _this = this;\n        this._nextPlaceholderId = 0;\n        return [].concat.apply([], __spread(nodes.map(function (node) { return node.visit(_this); })));\n    };\n    return _WriteVisitor;\n}());\n// Extract messages as xml nodes from the xliff file\nvar Xliff2Parser = /** @class */ (function () {\n    function Xliff2Parser() {\n        this._locale = null;\n    }\n    Xliff2Parser.prototype.parse = function (xliff, url) {\n        this._unitMlString = null;\n        this._msgIdToHtml = {};\n        var xml = new XmlParser().parse(xliff, url, false);\n        this._errors = xml.errors;\n        visitAll(this, xml.rootNodes, null);\n        return {\n            msgIdToHtml: this._msgIdToHtml,\n            errors: this._errors,\n            locale: this._locale,\n        };\n    };\n    Xliff2Parser.prototype.visitElement = function (element, context) {\n        switch (element.name) {\n            case _UNIT_TAG$1:\n                this._unitMlString = null;\n                var idAttr = element.attrs.find(function (attr) { return attr.name === 'id'; });\n                if (!idAttr) {\n                    this._addError(element, \"<\" + _UNIT_TAG$1 + \"> misses the \\\"id\\\" attribute\");\n                }\n                else {\n                    var id = idAttr.value;\n                    if (this._msgIdToHtml.hasOwnProperty(id)) {\n                        this._addError(element, \"Duplicated translations for msg \" + id);\n                    }\n                    else {\n                        visitAll(this, element.children, null);\n                        if (typeof this._unitMlString === 'string') {\n                            this._msgIdToHtml[id] = this._unitMlString;\n                        }\n                        else {\n                            this._addError(element, \"Message \" + id + \" misses a translation\");\n                        }\n                    }\n                }\n                break;\n            case _SOURCE_TAG$1:\n                // ignore source message\n                break;\n            case _TARGET_TAG$1:\n                var innerTextStart = element.startSourceSpan.end.offset;\n                var innerTextEnd = element.endSourceSpan.start.offset;\n                var content = element.startSourceSpan.start.file.content;\n                var innerText = content.slice(innerTextStart, innerTextEnd);\n                this._unitMlString = innerText;\n                break;\n            case _XLIFF_TAG:\n                var localeAttr = element.attrs.find(function (attr) { return attr.name === 'trgLang'; });\n                if (localeAttr) {\n                    this._locale = localeAttr.value;\n                }\n                var versionAttr = element.attrs.find(function (attr) { return attr.name === 'version'; });\n                if (versionAttr) {\n                    var version$$1 = versionAttr.value;\n                    if (version$$1 !== '2.0') {\n                        this._addError(element, \"The XLIFF file version \" + version$$1 + \" is not compatible with XLIFF 2.0 serializer\");\n                    }\n                    else {\n                        visitAll(this, element.children, null);\n                    }\n                }\n                break;\n            default:\n                visitAll(this, element.children, null);\n        }\n    };\n    Xliff2Parser.prototype.visitAttribute = function (attribute, context) { };\n    Xliff2Parser.prototype.visitText = function (text, context) { };\n    Xliff2Parser.prototype.visitComment = function (comment, context) { };\n    Xliff2Parser.prototype.visitExpansion = function (expansion, context) { };\n    Xliff2Parser.prototype.visitExpansionCase = function (expansionCase, context) { };\n    Xliff2Parser.prototype._addError = function (node, message) {\n        this._errors.push(new I18nError(node.sourceSpan, message));\n    };\n    return Xliff2Parser;\n}());\n// Convert ml nodes (xliff syntax) to i18n nodes\nvar XmlToI18n$1 = /** @class */ (function () {\n    function XmlToI18n() {\n    }\n    XmlToI18n.prototype.convert = function (message, url) {\n        var xmlIcu = new XmlParser().parse(message, url, true);\n        this._errors = xmlIcu.errors;\n        var i18nNodes = this._errors.length > 0 || xmlIcu.rootNodes.length == 0 ?\n            [] : [].concat.apply([], __spread(visitAll(this, xmlIcu.rootNodes)));\n        return {\n            i18nNodes: i18nNodes,\n            errors: this._errors,\n        };\n    };\n    XmlToI18n.prototype.visitText = function (text, context) { return new Text$1(text.value, text.sourceSpan); };\n    XmlToI18n.prototype.visitElement = function (el, context) {\n        var _this = this;\n        switch (el.name) {\n            case _PLACEHOLDER_TAG$1:\n                var nameAttr = el.attrs.find(function (attr) { return attr.name === 'equiv'; });\n                if (nameAttr) {\n                    return [new Placeholder('', nameAttr.value, el.sourceSpan)];\n                }\n                this._addError(el, \"<\" + _PLACEHOLDER_TAG$1 + \"> misses the \\\"equiv\\\" attribute\");\n                break;\n            case _PLACEHOLDER_SPANNING_TAG:\n                var startAttr = el.attrs.find(function (attr) { return attr.name === 'equivStart'; });\n                var endAttr = el.attrs.find(function (attr) { return attr.name === 'equivEnd'; });\n                if (!startAttr) {\n                    this._addError(el, \"<\" + _PLACEHOLDER_TAG$1 + \"> misses the \\\"equivStart\\\" attribute\");\n                }\n                else if (!endAttr) {\n                    this._addError(el, \"<\" + _PLACEHOLDER_TAG$1 + \"> misses the \\\"equivEnd\\\" attribute\");\n                }\n                else {\n                    var startId = startAttr.value;\n                    var endId = endAttr.value;\n                    var nodes = [];\n                    return nodes.concat.apply(nodes, __spread([new Placeholder('', startId, el.sourceSpan)], el.children.map(function (node) { return node.visit(_this, null); }), [new Placeholder('', endId, el.sourceSpan)]));\n                }\n                break;\n            case _MARKER_TAG$1:\n                return [].concat.apply([], __spread(visitAll(this, el.children)));\n            default:\n                this._addError(el, \"Unexpected tag\");\n        }\n        return null;\n    };\n    XmlToI18n.prototype.visitExpansion = function (icu, context) {\n        var caseMap = {};\n        visitAll(this, icu.cases).forEach(function (c) {\n            caseMap[c.value] = new Container(c.nodes, icu.sourceSpan);\n        });\n        return new Icu(icu.switchValue, icu.type, caseMap, icu.sourceSpan);\n    };\n    XmlToI18n.prototype.visitExpansionCase = function (icuCase, context) {\n        return {\n            value: icuCase.value,\n            nodes: [].concat.apply([], __spread(visitAll(this, icuCase.expression))),\n        };\n    };\n    XmlToI18n.prototype.visitComment = function (comment, context) { };\n    XmlToI18n.prototype.visitAttribute = function (attribute, context) { };\n    XmlToI18n.prototype._addError = function (node, message) {\n        this._errors.push(new I18nError(node.sourceSpan, message));\n    };\n    return XmlToI18n;\n}());\nfunction getTypeForTag(tag) {\n    switch (tag.toLowerCase()) {\n        case 'br':\n        case 'b':\n        case 'i':\n        case 'u':\n            return 'fmt';\n        case 'img':\n            return 'image';\n        case 'a':\n            return 'link';\n        default:\n            return 'other';\n    }\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar _MESSAGES_TAG = 'messagebundle';\nvar _MESSAGE_TAG = 'msg';\nvar _PLACEHOLDER_TAG$2 = 'ph';\nvar _EXEMPLE_TAG = 'ex';\nvar _SOURCE_TAG$2 = 'source';\nvar _DOCTYPE = \"<!ELEMENT messagebundle (msg)*>\\n<!ATTLIST messagebundle class CDATA #IMPLIED>\\n\\n<!ELEMENT msg (#PCDATA|ph|source)*>\\n<!ATTLIST msg id CDATA #IMPLIED>\\n<!ATTLIST msg seq CDATA #IMPLIED>\\n<!ATTLIST msg name CDATA #IMPLIED>\\n<!ATTLIST msg desc CDATA #IMPLIED>\\n<!ATTLIST msg meaning CDATA #IMPLIED>\\n<!ATTLIST msg obsolete (obsolete) #IMPLIED>\\n<!ATTLIST msg xml:space (default|preserve) \\\"default\\\">\\n<!ATTLIST msg is_hidden CDATA #IMPLIED>\\n\\n<!ELEMENT source (#PCDATA)>\\n\\n<!ELEMENT ph (#PCDATA|ex)*>\\n<!ATTLIST ph name CDATA #REQUIRED>\\n\\n<!ELEMENT ex (#PCDATA)>\";\nvar Xmb = /** @class */ (function (_super) {\n    __extends(Xmb, _super);\n    function Xmb() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Xmb.prototype.write = function (messages, locale) {\n        var exampleVisitor = new ExampleVisitor();\n        var visitor = new _Visitor$2();\n        var rootNode = new Tag(_MESSAGES_TAG);\n        messages.forEach(function (message) {\n            var attrs = { id: message.id };\n            if (message.description) {\n                attrs['desc'] = message.description;\n            }\n            if (message.meaning) {\n                attrs['meaning'] = message.meaning;\n            }\n            var sourceTags = [];\n            message.sources.forEach(function (source) {\n                sourceTags.push(new Tag(_SOURCE_TAG$2, {}, [\n                    new Text$2(source.filePath + \":\" + source.startLine + (source.endLine !== source.startLine ? ',' + source.endLine : ''))\n                ]));\n            });\n            rootNode.children.push(new CR(2), new Tag(_MESSAGE_TAG, attrs, __spread(sourceTags, visitor.serialize(message.nodes))));\n        });\n        rootNode.children.push(new CR());\n        return serialize([\n            new Declaration({ version: '1.0', encoding: 'UTF-8' }),\n            new CR(),\n            new Doctype(_MESSAGES_TAG, _DOCTYPE),\n            new CR(),\n            exampleVisitor.addDefaultExamples(rootNode),\n            new CR(),\n        ]);\n    };\n    Xmb.prototype.load = function (content, url) {\n        throw new Error('Unsupported');\n    };\n    Xmb.prototype.digest = function (message) { return digest$1(message); };\n    Xmb.prototype.createNameMapper = function (message) {\n        return new SimplePlaceholderMapper(message, toPublicName);\n    };\n    return Xmb;\n}(Serializer));\nvar _Visitor$2 = /** @class */ (function () {\n    function _Visitor() {\n    }\n    _Visitor.prototype.visitText = function (text, context) { return [new Text$2(text.value)]; };\n    _Visitor.prototype.visitContainer = function (container, context) {\n        var _this = this;\n        var nodes = [];\n        container.children.forEach(function (node) { return nodes.push.apply(nodes, __spread(node.visit(_this))); });\n        return nodes;\n    };\n    _Visitor.prototype.visitIcu = function (icu, context) {\n        var _this = this;\n        var nodes = [new Text$2(\"{\" + icu.expressionPlaceholder + \", \" + icu.type + \", \")];\n        Object.keys(icu.cases).forEach(function (c) {\n            nodes.push.apply(nodes, __spread([new Text$2(c + \" {\")], icu.cases[c].visit(_this), [new Text$2(\"} \")]));\n        });\n        nodes.push(new Text$2(\"}\"));\n        return nodes;\n    };\n    _Visitor.prototype.visitTagPlaceholder = function (ph, context) {\n        var startEx = new Tag(_EXEMPLE_TAG, {}, [new Text$2(\"<\" + ph.tag + \">\")]);\n        var startTagPh = new Tag(_PLACEHOLDER_TAG$2, { name: ph.startName }, [startEx]);\n        if (ph.isVoid) {\n            // void tags have no children nor closing tags\n            return [startTagPh];\n        }\n        var closeEx = new Tag(_EXEMPLE_TAG, {}, [new Text$2(\"</\" + ph.tag + \">\")]);\n        var closeTagPh = new Tag(_PLACEHOLDER_TAG$2, { name: ph.closeName }, [closeEx]);\n        return __spread([startTagPh], this.serialize(ph.children), [closeTagPh]);\n    };\n    _Visitor.prototype.visitPlaceholder = function (ph, context) {\n        var exTag = new Tag(_EXEMPLE_TAG, {}, [new Text$2(\"{{\" + ph.value + \"}}\")]);\n        return [new Tag(_PLACEHOLDER_TAG$2, { name: ph.name }, [exTag])];\n    };\n    _Visitor.prototype.visitIcuPlaceholder = function (ph, context) {\n        var exTag = new Tag(_EXEMPLE_TAG, {}, [\n            new Text$2(\"{\" + ph.value.expression + \", \" + ph.value.type + \", \" + Object.keys(ph.value.cases).map(function (value) { return value + ' {...}'; }).join(' ') + \"}\")\n        ]);\n        return [new Tag(_PLACEHOLDER_TAG$2, { name: ph.name }, [exTag])];\n    };\n    _Visitor.prototype.serialize = function (nodes) {\n        var _this = this;\n        return [].concat.apply([], __spread(nodes.map(function (node) { return node.visit(_this); })));\n    };\n    return _Visitor;\n}());\nfunction digest$1(message) {\n    return decimalDigest(message);\n}\n// TC requires at least one non-empty example on placeholders\nvar ExampleVisitor = /** @class */ (function () {\n    function ExampleVisitor() {\n    }\n    ExampleVisitor.prototype.addDefaultExamples = function (node) {\n        node.visit(this);\n        return node;\n    };\n    ExampleVisitor.prototype.visitTag = function (tag) {\n        var _this = this;\n        if (tag.name === _PLACEHOLDER_TAG$2) {\n            if (!tag.children || tag.children.length == 0) {\n                var exText = new Text$2(tag.attrs['name'] || '...');\n                tag.children = [new Tag(_EXEMPLE_TAG, {}, [exText])];\n            }\n        }\n        else if (tag.children) {\n            tag.children.forEach(function (node) { return node.visit(_this); });\n        }\n    };\n    ExampleVisitor.prototype.visitText = function (text) { };\n    ExampleVisitor.prototype.visitDeclaration = function (decl) { };\n    ExampleVisitor.prototype.visitDoctype = function (doctype) { };\n    return ExampleVisitor;\n}());\n// XMB/XTB placeholders can only contain A-Z, 0-9 and _\nfunction toPublicName(internalName) {\n    return internalName.toUpperCase().replace(/[^A-Z0-9_]/g, '_');\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar _TRANSLATIONS_TAG = 'translationbundle';\nvar _TRANSLATION_TAG = 'translation';\nvar _PLACEHOLDER_TAG$3 = 'ph';\nvar Xtb = /** @class */ (function (_super) {\n    __extends(Xtb, _super);\n    function Xtb() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Xtb.prototype.write = function (messages, locale) { throw new Error('Unsupported'); };\n    Xtb.prototype.load = function (content, url) {\n        // xtb to xml nodes\n        var xtbParser = new XtbParser();\n        var _a = xtbParser.parse(content, url), locale = _a.locale, msgIdToHtml = _a.msgIdToHtml, errors = _a.errors;\n        // xml nodes to i18n nodes\n        var i18nNodesByMsgId = {};\n        var converter = new XmlToI18n$2();\n        // Because we should be able to load xtb files that rely on features not supported by angular,\n        // we need to delay the conversion of html to i18n nodes so that non angular messages are not\n        // converted\n        Object.keys(msgIdToHtml).forEach(function (msgId) {\n            var valueFn = function () {\n                var _a = converter.convert(msgIdToHtml[msgId], url), i18nNodes = _a.i18nNodes, errors = _a.errors;\n                if (errors.length) {\n                    throw new Error(\"xtb parse errors:\\n\" + errors.join('\\n'));\n                }\n                return i18nNodes;\n            };\n            createLazyProperty(i18nNodesByMsgId, msgId, valueFn);\n        });\n        if (errors.length) {\n            throw new Error(\"xtb parse errors:\\n\" + errors.join('\\n'));\n        }\n        return { locale: locale, i18nNodesByMsgId: i18nNodesByMsgId };\n    };\n    Xtb.prototype.digest = function (message) { return digest$1(message); };\n    Xtb.prototype.createNameMapper = function (message) {\n        return new SimplePlaceholderMapper(message, toPublicName);\n    };\n    return Xtb;\n}(Serializer));\nfunction createLazyProperty(messages, id, valueFn) {\n    Object.defineProperty(messages, id, {\n        configurable: true,\n        enumerable: true,\n        get: function () {\n            var value = valueFn();\n            Object.defineProperty(messages, id, { enumerable: true, value: value });\n            return value;\n        },\n        set: function (_) { throw new Error('Could not overwrite an XTB translation'); },\n    });\n}\n// Extract messages as xml nodes from the xtb file\nvar XtbParser = /** @class */ (function () {\n    function XtbParser() {\n        this._locale = null;\n    }\n    XtbParser.prototype.parse = function (xtb, url) {\n        this._bundleDepth = 0;\n        this._msgIdToHtml = {};\n        // We can not parse the ICU messages at this point as some messages might not originate\n        // from Angular that could not be lex'd.\n        var xml = new XmlParser().parse(xtb, url, false);\n        this._errors = xml.errors;\n        visitAll(this, xml.rootNodes);\n        return {\n            msgIdToHtml: this._msgIdToHtml,\n            errors: this._errors,\n            locale: this._locale,\n        };\n    };\n    XtbParser.prototype.visitElement = function (element, context) {\n        switch (element.name) {\n            case _TRANSLATIONS_TAG:\n                this._bundleDepth++;\n                if (this._bundleDepth > 1) {\n                    this._addError(element, \"<\" + _TRANSLATIONS_TAG + \"> elements can not be nested\");\n                }\n                var langAttr = element.attrs.find(function (attr) { return attr.name === 'lang'; });\n                if (langAttr) {\n                    this._locale = langAttr.value;\n                }\n                visitAll(this, element.children, null);\n                this._bundleDepth--;\n                break;\n            case _TRANSLATION_TAG:\n                var idAttr = element.attrs.find(function (attr) { return attr.name === 'id'; });\n                if (!idAttr) {\n                    this._addError(element, \"<\" + _TRANSLATION_TAG + \"> misses the \\\"id\\\" attribute\");\n                }\n                else {\n                    var id = idAttr.value;\n                    if (this._msgIdToHtml.hasOwnProperty(id)) {\n                        this._addError(element, \"Duplicated translations for msg \" + id);\n                    }\n                    else {\n                        var innerTextStart = element.startSourceSpan.end.offset;\n                        var innerTextEnd = element.endSourceSpan.start.offset;\n                        var content = element.startSourceSpan.start.file.content;\n                        var innerText = content.slice(innerTextStart, innerTextEnd);\n                        this._msgIdToHtml[id] = innerText;\n                    }\n                }\n                break;\n            default:\n                this._addError(element, 'Unexpected tag');\n        }\n    };\n    XtbParser.prototype.visitAttribute = function (attribute, context) { };\n    XtbParser.prototype.visitText = function (text, context) { };\n    XtbParser.prototype.visitComment = function (comment, context) { };\n    XtbParser.prototype.visitExpansion = function (expansion, context) { };\n    XtbParser.prototype.visitExpansionCase = function (expansionCase, context) { };\n    XtbParser.prototype._addError = function (node, message) {\n        this._errors.push(new I18nError(node.sourceSpan, message));\n    };\n    return XtbParser;\n}());\n// Convert ml nodes (xtb syntax) to i18n nodes\nvar XmlToI18n$2 = /** @class */ (function () {\n    function XmlToI18n() {\n    }\n    XmlToI18n.prototype.convert = function (message, url) {\n        var xmlIcu = new XmlParser().parse(message, url, true);\n        this._errors = xmlIcu.errors;\n        var i18nNodes = this._errors.length > 0 || xmlIcu.rootNodes.length == 0 ?\n            [] :\n            visitAll(this, xmlIcu.rootNodes);\n        return {\n            i18nNodes: i18nNodes,\n            errors: this._errors,\n        };\n    };\n    XmlToI18n.prototype.visitText = function (text, context) { return new Text$1(text.value, text.sourceSpan); };\n    XmlToI18n.prototype.visitExpansion = function (icu, context) {\n        var caseMap = {};\n        visitAll(this, icu.cases).forEach(function (c) {\n            caseMap[c.value] = new Container(c.nodes, icu.sourceSpan);\n        });\n        return new Icu(icu.switchValue, icu.type, caseMap, icu.sourceSpan);\n    };\n    XmlToI18n.prototype.visitExpansionCase = function (icuCase, context) {\n        return {\n            value: icuCase.value,\n            nodes: visitAll(this, icuCase.expression),\n        };\n    };\n    XmlToI18n.prototype.visitElement = function (el, context) {\n        if (el.name === _PLACEHOLDER_TAG$3) {\n            var nameAttr = el.attrs.find(function (attr) { return attr.name === 'name'; });\n            if (nameAttr) {\n                return new Placeholder('', nameAttr.value, el.sourceSpan);\n            }\n            this._addError(el, \"<\" + _PLACEHOLDER_TAG$3 + \"> misses the \\\"name\\\" attribute\");\n        }\n        else {\n            this._addError(el, \"Unexpected tag\");\n        }\n        return null;\n    };\n    XmlToI18n.prototype.visitComment = function (comment, context) { };\n    XmlToI18n.prototype.visitAttribute = function (attribute, context) { };\n    XmlToI18n.prototype._addError = function (node, message) {\n        this._errors.push(new I18nError(node.sourceSpan, message));\n    };\n    return XmlToI18n;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar HtmlParser = /** @class */ (function (_super) {\n    __extends(HtmlParser, _super);\n    function HtmlParser() {\n        return _super.call(this, getHtmlTagDefinition) || this;\n    }\n    HtmlParser.prototype.parse = function (source, url, parseExpansionForms, interpolationConfig) {\n        if (parseExpansionForms === void 0) { parseExpansionForms = false; }\n        if (interpolationConfig === void 0) { interpolationConfig = DEFAULT_INTERPOLATION_CONFIG; }\n        return _super.prototype.parse.call(this, source, url, parseExpansionForms, interpolationConfig);\n    };\n    return HtmlParser;\n}(Parser$1));\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * A container for translated messages\n */\nvar TranslationBundle = /** @class */ (function () {\n    function TranslationBundle(_i18nNodesByMsgId, locale, digest, mapperFactory, missingTranslationStrategy, console) {\n        if (_i18nNodesByMsgId === void 0) { _i18nNodesByMsgId = {}; }\n        if (missingTranslationStrategy === void 0) { missingTranslationStrategy = MissingTranslationStrategy.Warning; }\n        this._i18nNodesByMsgId = _i18nNodesByMsgId;\n        this.digest = digest;\n        this.mapperFactory = mapperFactory;\n        this._i18nToHtml = new I18nToHtmlVisitor(_i18nNodesByMsgId, locale, digest, mapperFactory, missingTranslationStrategy, console);\n    }\n    // Creates a `TranslationBundle` by parsing the given `content` with the `serializer`.\n    TranslationBundle.load = function (content, url, serializer, missingTranslationStrategy, console) {\n        var _a = serializer.load(content, url), locale = _a.locale, i18nNodesByMsgId = _a.i18nNodesByMsgId;\n        var digestFn = function (m) { return serializer.digest(m); };\n        var mapperFactory = function (m) { return serializer.createNameMapper(m); };\n        return new TranslationBundle(i18nNodesByMsgId, locale, digestFn, mapperFactory, missingTranslationStrategy, console);\n    };\n    // Returns the translation as HTML nodes from the given source message.\n    TranslationBundle.prototype.get = function (srcMsg) {\n        var html = this._i18nToHtml.convert(srcMsg);\n        if (html.errors.length) {\n            throw new Error(html.errors.join('\\n'));\n        }\n        return html.nodes;\n    };\n    TranslationBundle.prototype.has = function (srcMsg) { return this.digest(srcMsg) in this._i18nNodesByMsgId; };\n    return TranslationBundle;\n}());\nvar I18nToHtmlVisitor = /** @class */ (function () {\n    function I18nToHtmlVisitor(_i18nNodesByMsgId, _locale, _digest, _mapperFactory, _missingTranslationStrategy, _console) {\n        if (_i18nNodesByMsgId === void 0) { _i18nNodesByMsgId = {}; }\n        this._i18nNodesByMsgId = _i18nNodesByMsgId;\n        this._locale = _locale;\n        this._digest = _digest;\n        this._mapperFactory = _mapperFactory;\n        this._missingTranslationStrategy = _missingTranslationStrategy;\n        this._console = _console;\n        this._contextStack = [];\n        this._errors = [];\n    }\n    I18nToHtmlVisitor.prototype.convert = function (srcMsg) {\n        this._contextStack.length = 0;\n        this._errors.length = 0;\n        // i18n to text\n        var text = this._convertToText(srcMsg);\n        // text to html\n        var url = srcMsg.nodes[0].sourceSpan.start.file.url;\n        var html = new HtmlParser().parse(text, url, true);\n        return {\n            nodes: html.rootNodes,\n            errors: __spread(this._errors, html.errors),\n        };\n    };\n    I18nToHtmlVisitor.prototype.visitText = function (text, context) {\n        // `convert()` uses an `HtmlParser` to return `html.Node`s\n        // we should then make sure that any special characters are escaped\n        return escapeXml(text.value);\n    };\n    I18nToHtmlVisitor.prototype.visitContainer = function (container, context) {\n        var _this = this;\n        return container.children.map(function (n) { return n.visit(_this); }).join('');\n    };\n    I18nToHtmlVisitor.prototype.visitIcu = function (icu, context) {\n        var _this = this;\n        var cases = Object.keys(icu.cases).map(function (k) { return k + \" {\" + icu.cases[k].visit(_this) + \"}\"; });\n        // TODO(vicb): Once all format switch to using expression placeholders\n        // we should throw when the placeholder is not in the source message\n        var exp = this._srcMsg.placeholders.hasOwnProperty(icu.expression) ?\n            this._srcMsg.placeholders[icu.expression] :\n            icu.expression;\n        return \"{\" + exp + \", \" + icu.type + \", \" + cases.join(' ') + \"}\";\n    };\n    I18nToHtmlVisitor.prototype.visitPlaceholder = function (ph, context) {\n        var phName = this._mapper(ph.name);\n        if (this._srcMsg.placeholders.hasOwnProperty(phName)) {\n            return this._srcMsg.placeholders[phName];\n        }\n        if (this._srcMsg.placeholderToMessage.hasOwnProperty(phName)) {\n            return this._convertToText(this._srcMsg.placeholderToMessage[phName]);\n        }\n        this._addError(ph, \"Unknown placeholder \\\"\" + ph.name + \"\\\"\");\n        return '';\n    };\n    // Loaded message contains only placeholders (vs tag and icu placeholders).\n    // However when a translation can not be found, we need to serialize the source message\n    // which can contain tag placeholders\n    I18nToHtmlVisitor.prototype.visitTagPlaceholder = function (ph, context) {\n        var _this = this;\n        var tag = \"\" + ph.tag;\n        var attrs = Object.keys(ph.attrs).map(function (name) { return name + \"=\\\"\" + ph.attrs[name] + \"\\\"\"; }).join(' ');\n        if (ph.isVoid) {\n            return \"<\" + tag + \" \" + attrs + \"/>\";\n        }\n        var children = ph.children.map(function (c) { return c.visit(_this); }).join('');\n        return \"<\" + tag + \" \" + attrs + \">\" + children + \"</\" + tag + \">\";\n    };\n    // Loaded message contains only placeholders (vs tag and icu placeholders).\n    // However when a translation can not be found, we need to serialize the source message\n    // which can contain tag placeholders\n    I18nToHtmlVisitor.prototype.visitIcuPlaceholder = function (ph, context) {\n        // An ICU placeholder references the source message to be serialized\n        return this._convertToText(this._srcMsg.placeholderToMessage[ph.name]);\n    };\n    /**\n     * Convert a source message to a translated text string:\n     * - text nodes are replaced with their translation,\n     * - placeholders are replaced with their content,\n     * - ICU nodes are converted to ICU expressions.\n     */\n    I18nToHtmlVisitor.prototype._convertToText = function (srcMsg) {\n        var _this = this;\n        var id = this._digest(srcMsg);\n        var mapper = this._mapperFactory ? this._mapperFactory(srcMsg) : null;\n        var nodes;\n        this._contextStack.push({ msg: this._srcMsg, mapper: this._mapper });\n        this._srcMsg = srcMsg;\n        if (this._i18nNodesByMsgId.hasOwnProperty(id)) {\n            // When there is a translation use its nodes as the source\n            // And create a mapper to convert serialized placeholder names to internal names\n            nodes = this._i18nNodesByMsgId[id];\n            this._mapper = function (name) { return mapper ? mapper.toInternalName(name) : name; };\n        }\n        else {\n            // When no translation has been found\n            // - report an error / a warning / nothing,\n            // - use the nodes from the original message\n            // - placeholders are already internal and need no mapper\n            if (this._missingTranslationStrategy === MissingTranslationStrategy.Error) {\n                var ctx = this._locale ? \" for locale \\\"\" + this._locale + \"\\\"\" : '';\n                this._addError(srcMsg.nodes[0], \"Missing translation for message \\\"\" + id + \"\\\"\" + ctx);\n            }\n            else if (this._console &&\n                this._missingTranslationStrategy === MissingTranslationStrategy.Warning) {\n                var ctx = this._locale ? \" for locale \\\"\" + this._locale + \"\\\"\" : '';\n                this._console.warn(\"Missing translation for message \\\"\" + id + \"\\\"\" + ctx);\n            }\n            nodes = srcMsg.nodes;\n            this._mapper = function (name) { return name; };\n        }\n        var text = nodes.map(function (node) { return node.visit(_this); }).join('');\n        var context = this._contextStack.pop();\n        this._srcMsg = context.msg;\n        this._mapper = context.mapper;\n        return text;\n    };\n    I18nToHtmlVisitor.prototype._addError = function (el, msg) {\n        this._errors.push(new I18nError(el.sourceSpan, msg));\n    };\n    return I18nToHtmlVisitor;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar I18NHtmlParser = /** @class */ (function () {\n    function I18NHtmlParser(_htmlParser, translations, translationsFormat, missingTranslation, console) {\n        if (missingTranslation === void 0) { missingTranslation = MissingTranslationStrategy.Warning; }\n        this._htmlParser = _htmlParser;\n        if (translations) {\n            var serializer = createSerializer(translationsFormat);\n            this._translationBundle =\n                TranslationBundle.load(translations, 'i18n', serializer, missingTranslation, console);\n        }\n        else {\n            this._translationBundle =\n                new TranslationBundle({}, null, digest, undefined, missingTranslation, console);\n        }\n    }\n    I18NHtmlParser.prototype.parse = function (source, url, parseExpansionForms, interpolationConfig) {\n        if (parseExpansionForms === void 0) { parseExpansionForms = false; }\n        if (interpolationConfig === void 0) { interpolationConfig = DEFAULT_INTERPOLATION_CONFIG; }\n        var parseResult = this._htmlParser.parse(source, url, parseExpansionForms, interpolationConfig);\n        if (parseResult.errors.length) {\n            return new ParseTreeResult(parseResult.rootNodes, parseResult.errors);\n        }\n        return mergeTranslations(parseResult.rootNodes, this._translationBundle, interpolationConfig, [], {});\n    };\n    return I18NHtmlParser;\n}());\nfunction createSerializer(format) {\n    format = (format || 'xlf').toLowerCase();\n    switch (format) {\n        case 'xmb':\n            return new Xmb();\n        case 'xtb':\n            return new Xtb();\n        case 'xliff2':\n        case 'xlf2':\n            return new Xliff2();\n        case 'xliff':\n        case 'xlf':\n        default:\n            return new Xliff();\n    }\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar CORE = '@angular/core';\nvar Identifiers = /** @class */ (function () {\n    function Identifiers() {\n    }\n    Identifiers.ANALYZE_FOR_ENTRY_COMPONENTS = {\n        name: 'ANALYZE_FOR_ENTRY_COMPONENTS',\n        moduleName: CORE,\n    };\n    Identifiers.ElementRef = { name: 'ElementRef', moduleName: CORE };\n    Identifiers.NgModuleRef = { name: 'NgModuleRef', moduleName: CORE };\n    Identifiers.ViewContainerRef = { name: 'ViewContainerRef', moduleName: CORE };\n    Identifiers.ChangeDetectorRef = {\n        name: 'ChangeDetectorRef',\n        moduleName: CORE,\n    };\n    Identifiers.QueryList = { name: 'QueryList', moduleName: CORE };\n    Identifiers.TemplateRef = { name: 'TemplateRef', moduleName: CORE };\n    Identifiers.CodegenComponentFactoryResolver = {\n        name: 'CodegenComponentFactoryResolver',\n        moduleName: CORE,\n    };\n    Identifiers.ComponentFactoryResolver = {\n        name: 'ComponentFactoryResolver',\n        moduleName: CORE,\n    };\n    Identifiers.ComponentFactory = { name: 'ComponentFactory', moduleName: CORE };\n    Identifiers.ComponentRef = { name: 'ComponentRef', moduleName: CORE };\n    Identifiers.NgModuleFactory = { name: 'NgModuleFactory', moduleName: CORE };\n    Identifiers.createModuleFactory = {\n        name: 'cmf',\n        moduleName: CORE,\n    };\n    Identifiers.moduleDef = {\n        name: 'mod',\n        moduleName: CORE,\n    };\n    Identifiers.moduleProviderDef = {\n        name: 'mpd',\n        moduleName: CORE,\n    };\n    Identifiers.RegisterModuleFactoryFn = {\n        name: 'registerModuleFactory',\n        moduleName: CORE,\n    };\n    Identifiers.inject = { name: 'inject', moduleName: CORE };\n    Identifiers.INJECTOR = { name: 'INJECTOR', moduleName: CORE };\n    Identifiers.Injector = { name: 'Injector', moduleName: CORE };\n    Identifiers.defineInjectable = { name: 'defineInjectable', moduleName: CORE };\n    Identifiers.ViewEncapsulation = {\n        name: 'ViewEncapsulation',\n        moduleName: CORE,\n    };\n    Identifiers.ChangeDetectionStrategy = {\n        name: 'ChangeDetectionStrategy',\n        moduleName: CORE,\n    };\n    Identifiers.SecurityContext = {\n        name: 'SecurityContext',\n        moduleName: CORE,\n    };\n    Identifiers.LOCALE_ID = { name: 'LOCALE_ID', moduleName: CORE };\n    Identifiers.TRANSLATIONS_FORMAT = {\n        name: 'TRANSLATIONS_FORMAT',\n        moduleName: CORE,\n    };\n    Identifiers.inlineInterpolate = {\n        name: 'inlineInterpolate',\n        moduleName: CORE,\n    };\n    Identifiers.interpolate = { name: 'interpolate', moduleName: CORE };\n    Identifiers.EMPTY_ARRAY = { name: 'EMPTY_ARRAY', moduleName: CORE };\n    Identifiers.EMPTY_MAP = { name: 'EMPTY_MAP', moduleName: CORE };\n    Identifiers.Renderer = { name: 'Renderer', moduleName: CORE };\n    Identifiers.viewDef = { name: 'vid', moduleName: CORE };\n    Identifiers.elementDef = { name: 'eld', moduleName: CORE };\n    Identifiers.anchorDef = { name: 'and', moduleName: CORE };\n    Identifiers.textDef = { name: 'ted', moduleName: CORE };\n    Identifiers.directiveDef = { name: 'did', moduleName: CORE };\n    Identifiers.providerDef = { name: 'prd', moduleName: CORE };\n    Identifiers.queryDef = { name: 'qud', moduleName: CORE };\n    Identifiers.pureArrayDef = { name: 'pad', moduleName: CORE };\n    Identifiers.pureObjectDef = { name: 'pod', moduleName: CORE };\n    Identifiers.purePipeDef = { name: 'ppd', moduleName: CORE };\n    Identifiers.pipeDef = { name: 'pid', moduleName: CORE };\n    Identifiers.nodeValue = { name: 'nov', moduleName: CORE };\n    Identifiers.ngContentDef = { name: 'ncd', moduleName: CORE };\n    Identifiers.unwrapValue = { name: 'unv', moduleName: CORE };\n    Identifiers.createRendererType2 = { name: 'crt', moduleName: CORE };\n    // type only\n    Identifiers.RendererType2 = {\n        name: 'RendererType2',\n        moduleName: CORE,\n    };\n    // type only\n    Identifiers.ViewDefinition = {\n        name: 'ViewDefinition',\n        moduleName: CORE,\n    };\n    Identifiers.createComponentFactory = { name: 'ccf', moduleName: CORE };\n    return Identifiers;\n}());\nfunction createTokenForReference(reference) {\n    return { identifier: { reference: reference } };\n}\nfunction createTokenForExternalReference(reflector, reference) {\n    return createTokenForReference(reflector.resolveExternalReference(reference));\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n//// Types\nvar TypeModifier;\n(function (TypeModifier) {\n    TypeModifier[TypeModifier[\"Const\"] = 0] = \"Const\";\n})(TypeModifier || (TypeModifier = {}));\nvar Type$1 = /** @class */ (function () {\n    function Type(modifiers) {\n        if (modifiers === void 0) { modifiers = null; }\n        this.modifiers = modifiers;\n        if (!modifiers) {\n            this.modifiers = [];\n        }\n    }\n    Type.prototype.hasModifier = function (modifier) { return this.modifiers.indexOf(modifier) !== -1; };\n    return Type;\n}());\nvar BuiltinTypeName;\n(function (BuiltinTypeName) {\n    BuiltinTypeName[BuiltinTypeName[\"Dynamic\"] = 0] = \"Dynamic\";\n    BuiltinTypeName[BuiltinTypeName[\"Bool\"] = 1] = \"Bool\";\n    BuiltinTypeName[BuiltinTypeName[\"String\"] = 2] = \"String\";\n    BuiltinTypeName[BuiltinTypeName[\"Int\"] = 3] = \"Int\";\n    BuiltinTypeName[BuiltinTypeName[\"Number\"] = 4] = \"Number\";\n    BuiltinTypeName[BuiltinTypeName[\"Function\"] = 5] = \"Function\";\n    BuiltinTypeName[BuiltinTypeName[\"Inferred\"] = 6] = \"Inferred\";\n})(BuiltinTypeName || (BuiltinTypeName = {}));\nvar BuiltinType = /** @class */ (function (_super) {\n    __extends(BuiltinType, _super);\n    function BuiltinType(name, modifiers) {\n        if (modifiers === void 0) { modifiers = null; }\n        var _this = _super.call(this, modifiers) || this;\n        _this.name = name;\n        return _this;\n    }\n    BuiltinType.prototype.visitType = function (visitor, context) {\n        return visitor.visitBuiltinType(this, context);\n    };\n    return BuiltinType;\n}(Type$1));\nvar ExpressionType = /** @class */ (function (_super) {\n    __extends(ExpressionType, _super);\n    function ExpressionType(value, modifiers) {\n        if (modifiers === void 0) { modifiers = null; }\n        var _this = _super.call(this, modifiers) || this;\n        _this.value = value;\n        return _this;\n    }\n    ExpressionType.prototype.visitType = function (visitor, context) {\n        return visitor.visitExpressionType(this, context);\n    };\n    return ExpressionType;\n}(Type$1));\nvar ArrayType = /** @class */ (function (_super) {\n    __extends(ArrayType, _super);\n    function ArrayType(of, modifiers) {\n        if (modifiers === void 0) { modifiers = null; }\n        var _this = _super.call(this, modifiers) || this;\n        _this.of = of;\n        return _this;\n    }\n    ArrayType.prototype.visitType = function (visitor, context) {\n        return visitor.visitArrayType(this, context);\n    };\n    return ArrayType;\n}(Type$1));\nvar MapType = /** @class */ (function (_super) {\n    __extends(MapType, _super);\n    function MapType(valueType, modifiers) {\n        if (modifiers === void 0) { modifiers = null; }\n        var _this = _super.call(this, modifiers) || this;\n        _this.valueType = valueType || null;\n        return _this;\n    }\n    MapType.prototype.visitType = function (visitor, context) { return visitor.visitMapType(this, context); };\n    return MapType;\n}(Type$1));\nvar DYNAMIC_TYPE = new BuiltinType(BuiltinTypeName.Dynamic);\nvar INFERRED_TYPE = new BuiltinType(BuiltinTypeName.Inferred);\nvar BOOL_TYPE = new BuiltinType(BuiltinTypeName.Bool);\nvar INT_TYPE = new BuiltinType(BuiltinTypeName.Int);\nvar NUMBER_TYPE = new BuiltinType(BuiltinTypeName.Number);\nvar STRING_TYPE = new BuiltinType(BuiltinTypeName.String);\nvar FUNCTION_TYPE = new BuiltinType(BuiltinTypeName.Function);\n///// Expressions\nvar BinaryOperator;\n(function (BinaryOperator) {\n    BinaryOperator[BinaryOperator[\"Equals\"] = 0] = \"Equals\";\n    BinaryOperator[BinaryOperator[\"NotEquals\"] = 1] = \"NotEquals\";\n    BinaryOperator[BinaryOperator[\"Identical\"] = 2] = \"Identical\";\n    BinaryOperator[BinaryOperator[\"NotIdentical\"] = 3] = \"NotIdentical\";\n    BinaryOperator[BinaryOperator[\"Minus\"] = 4] = \"Minus\";\n    BinaryOperator[BinaryOperator[\"Plus\"] = 5] = \"Plus\";\n    BinaryOperator[BinaryOperator[\"Divide\"] = 6] = \"Divide\";\n    BinaryOperator[BinaryOperator[\"Multiply\"] = 7] = \"Multiply\";\n    BinaryOperator[BinaryOperator[\"Modulo\"] = 8] = \"Modulo\";\n    BinaryOperator[BinaryOperator[\"And\"] = 9] = \"And\";\n    BinaryOperator[BinaryOperator[\"Or\"] = 10] = \"Or\";\n    BinaryOperator[BinaryOperator[\"BitwiseAnd\"] = 11] = \"BitwiseAnd\";\n    BinaryOperator[BinaryOperator[\"Lower\"] = 12] = \"Lower\";\n    BinaryOperator[BinaryOperator[\"LowerEquals\"] = 13] = \"LowerEquals\";\n    BinaryOperator[BinaryOperator[\"Bigger\"] = 14] = \"Bigger\";\n    BinaryOperator[BinaryOperator[\"BiggerEquals\"] = 15] = \"BiggerEquals\";\n})(BinaryOperator || (BinaryOperator = {}));\nfunction nullSafeIsEquivalent(base, other) {\n    if (base == null || other == null) {\n        return base == other;\n    }\n    return base.isEquivalent(other);\n}\nfunction areAllEquivalent(base, other) {\n    var len = base.length;\n    if (len !== other.length) {\n        return false;\n    }\n    for (var i = 0; i < len; i++) {\n        if (!base[i].isEquivalent(other[i])) {\n            return false;\n        }\n    }\n    return true;\n}\nvar Expression = /** @class */ (function () {\n    function Expression(type, sourceSpan) {\n        this.type = type || null;\n        this.sourceSpan = sourceSpan || null;\n    }\n    Expression.prototype.prop = function (name, sourceSpan) {\n        return new ReadPropExpr(this, name, null, sourceSpan);\n    };\n    Expression.prototype.key = function (index, type, sourceSpan) {\n        return new ReadKeyExpr(this, index, type, sourceSpan);\n    };\n    Expression.prototype.callMethod = function (name, params, sourceSpan) {\n        return new InvokeMethodExpr(this, name, params, null, sourceSpan);\n    };\n    Expression.prototype.callFn = function (params, sourceSpan) {\n        return new InvokeFunctionExpr(this, params, null, sourceSpan);\n    };\n    Expression.prototype.instantiate = function (params, type, sourceSpan) {\n        return new InstantiateExpr(this, params, type, sourceSpan);\n    };\n    Expression.prototype.conditional = function (trueCase, falseCase, sourceSpan) {\n        if (falseCase === void 0) { falseCase = null; }\n        return new ConditionalExpr(this, trueCase, falseCase, null, sourceSpan);\n    };\n    Expression.prototype.equals = function (rhs, sourceSpan) {\n        return new BinaryOperatorExpr(BinaryOperator.Equals, this, rhs, null, sourceSpan);\n    };\n    Expression.prototype.notEquals = function (rhs, sourceSpan) {\n        return new BinaryOperatorExpr(BinaryOperator.NotEquals, this, rhs, null, sourceSpan);\n    };\n    Expression.prototype.identical = function (rhs, sourceSpan) {\n        return new BinaryOperatorExpr(BinaryOperator.Identical, this, rhs, null, sourceSpan);\n    };\n    Expression.prototype.notIdentical = function (rhs, sourceSpan) {\n        return new BinaryOperatorExpr(BinaryOperator.NotIdentical, this, rhs, null, sourceSpan);\n    };\n    Expression.prototype.minus = function (rhs, sourceSpan) {\n        return new BinaryOperatorExpr(BinaryOperator.Minus, this, rhs, null, sourceSpan);\n    };\n    Expression.prototype.plus = function (rhs, sourceSpan) {\n        return new BinaryOperatorExpr(BinaryOperator.Plus, this, rhs, null, sourceSpan);\n    };\n    Expression.prototype.divide = function (rhs, sourceSpan) {\n        return new BinaryOperatorExpr(BinaryOperator.Divide, this, rhs, null, sourceSpan);\n    };\n    Expression.prototype.multiply = function (rhs, sourceSpan) {\n        return new BinaryOperatorExpr(BinaryOperator.Multiply, this, rhs, null, sourceSpan);\n    };\n    Expression.prototype.modulo = function (rhs, sourceSpan) {\n        return new BinaryOperatorExpr(BinaryOperator.Modulo, this, rhs, null, sourceSpan);\n    };\n    Expression.prototype.and = function (rhs, sourceSpan) {\n        return new BinaryOperatorExpr(BinaryOperator.And, this, rhs, null, sourceSpan);\n    };\n    Expression.prototype.bitwiseAnd = function (rhs, sourceSpan, parens) {\n        if (parens === void 0) { parens = true; }\n        return new BinaryOperatorExpr(BinaryOperator.BitwiseAnd, this, rhs, null, sourceSpan, parens);\n    };\n    Expression.prototype.or = function (rhs, sourceSpan) {\n        return new BinaryOperatorExpr(BinaryOperator.Or, this, rhs, null, sourceSpan);\n    };\n    Expression.prototype.lower = function (rhs, sourceSpan) {\n        return new BinaryOperatorExpr(BinaryOperator.Lower, this, rhs, null, sourceSpan);\n    };\n    Expression.prototype.lowerEquals = function (rhs, sourceSpan) {\n        return new BinaryOperatorExpr(BinaryOperator.LowerEquals, this, rhs, null, sourceSpan);\n    };\n    Expression.prototype.bigger = function (rhs, sourceSpan) {\n        return new BinaryOperatorExpr(BinaryOperator.Bigger, this, rhs, null, sourceSpan);\n    };\n    Expression.prototype.biggerEquals = function (rhs, sourceSpan) {\n        return new BinaryOperatorExpr(BinaryOperator.BiggerEquals, this, rhs, null, sourceSpan);\n    };\n    Expression.prototype.isBlank = function (sourceSpan) {\n        // Note: We use equals by purpose here to compare to null and undefined in JS.\n        // We use the typed null to allow strictNullChecks to narrow types.\n        return this.equals(TYPED_NULL_EXPR, sourceSpan);\n    };\n    Expression.prototype.cast = function (type, sourceSpan) {\n        return new CastExpr(this, type, sourceSpan);\n    };\n    Expression.prototype.toStmt = function () { return new ExpressionStatement(this, null); };\n    return Expression;\n}());\nvar BuiltinVar;\n(function (BuiltinVar) {\n    BuiltinVar[BuiltinVar[\"This\"] = 0] = \"This\";\n    BuiltinVar[BuiltinVar[\"Super\"] = 1] = \"Super\";\n    BuiltinVar[BuiltinVar[\"CatchError\"] = 2] = \"CatchError\";\n    BuiltinVar[BuiltinVar[\"CatchStack\"] = 3] = \"CatchStack\";\n})(BuiltinVar || (BuiltinVar = {}));\nvar ReadVarExpr = /** @class */ (function (_super) {\n    __extends(ReadVarExpr, _super);\n    function ReadVarExpr(name, type, sourceSpan) {\n        var _this = _super.call(this, type, sourceSpan) || this;\n        if (typeof name === 'string') {\n            _this.name = name;\n            _this.builtin = null;\n        }\n        else {\n            _this.name = null;\n            _this.builtin = name;\n        }\n        return _this;\n    }\n    ReadVarExpr.prototype.isEquivalent = function (e) {\n        return e instanceof ReadVarExpr && this.name === e.name && this.builtin === e.builtin;\n    };\n    ReadVarExpr.prototype.isConstant = function () { return false; };\n    ReadVarExpr.prototype.visitExpression = function (visitor, context) {\n        return visitor.visitReadVarExpr(this, context);\n    };\n    ReadVarExpr.prototype.set = function (value) {\n        if (!this.name) {\n            throw new Error(\"Built in variable \" + this.builtin + \" can not be assigned to.\");\n        }\n        return new WriteVarExpr(this.name, value, null, this.sourceSpan);\n    };\n    return ReadVarExpr;\n}(Expression));\nvar WriteVarExpr = /** @class */ (function (_super) {\n    __extends(WriteVarExpr, _super);\n    function WriteVarExpr(name, value, type, sourceSpan) {\n        var _this = _super.call(this, type || value.type, sourceSpan) || this;\n        _this.name = name;\n        _this.value = value;\n        return _this;\n    }\n    WriteVarExpr.prototype.isEquivalent = function (e) {\n        return e instanceof WriteVarExpr && this.name === e.name && this.value.isEquivalent(e.value);\n    };\n    WriteVarExpr.prototype.isConstant = function () { return false; };\n    WriteVarExpr.prototype.visitExpression = function (visitor, context) {\n        return visitor.visitWriteVarExpr(this, context);\n    };\n    WriteVarExpr.prototype.toDeclStmt = function (type, modifiers) {\n        return new DeclareVarStmt(this.name, this.value, type, modifiers, this.sourceSpan);\n    };\n    return WriteVarExpr;\n}(Expression));\nvar WriteKeyExpr = /** @class */ (function (_super) {\n    __extends(WriteKeyExpr, _super);\n    function WriteKeyExpr(receiver, index, value, type, sourceSpan) {\n        var _this = _super.call(this, type || value.type, sourceSpan) || this;\n        _this.receiver = receiver;\n        _this.index = index;\n        _this.value = value;\n        return _this;\n    }\n    WriteKeyExpr.prototype.isEquivalent = function (e) {\n        return e instanceof WriteKeyExpr && this.receiver.isEquivalent(e.receiver) &&\n            this.index.isEquivalent(e.index) && this.value.isEquivalent(e.value);\n    };\n    WriteKeyExpr.prototype.isConstant = function () { return false; };\n    WriteKeyExpr.prototype.visitExpression = function (visitor, context) {\n        return visitor.visitWriteKeyExpr(this, context);\n    };\n    return WriteKeyExpr;\n}(Expression));\nvar WritePropExpr = /** @class */ (function (_super) {\n    __extends(WritePropExpr, _super);\n    function WritePropExpr(receiver, name, value, type, sourceSpan) {\n        var _this = _super.call(this, type || value.type, sourceSpan) || this;\n        _this.receiver = receiver;\n        _this.name = name;\n        _this.value = value;\n        return _this;\n    }\n    WritePropExpr.prototype.isEquivalent = function (e) {\n        return e instanceof WritePropExpr && this.receiver.isEquivalent(e.receiver) &&\n            this.name === e.name && this.value.isEquivalent(e.value);\n    };\n    WritePropExpr.prototype.isConstant = function () { return false; };\n    WritePropExpr.prototype.visitExpression = function (visitor, context) {\n        return visitor.visitWritePropExpr(this, context);\n    };\n    return WritePropExpr;\n}(Expression));\nvar BuiltinMethod;\n(function (BuiltinMethod) {\n    BuiltinMethod[BuiltinMethod[\"ConcatArray\"] = 0] = \"ConcatArray\";\n    BuiltinMethod[BuiltinMethod[\"SubscribeObservable\"] = 1] = \"SubscribeObservable\";\n    BuiltinMethod[BuiltinMethod[\"Bind\"] = 2] = \"Bind\";\n})(BuiltinMethod || (BuiltinMethod = {}));\nvar InvokeMethodExpr = /** @class */ (function (_super) {\n    __extends(InvokeMethodExpr, _super);\n    function InvokeMethodExpr(receiver, method, args, type, sourceSpan) {\n        var _this = _super.call(this, type, sourceSpan) || this;\n        _this.receiver = receiver;\n        _this.args = args;\n        if (typeof method === 'string') {\n            _this.name = method;\n            _this.builtin = null;\n        }\n        else {\n            _this.name = null;\n            _this.builtin = method;\n        }\n        return _this;\n    }\n    InvokeMethodExpr.prototype.isEquivalent = function (e) {\n        return e instanceof InvokeMethodExpr && this.receiver.isEquivalent(e.receiver) &&\n            this.name === e.name && this.builtin === e.builtin && areAllEquivalent(this.args, e.args);\n    };\n    InvokeMethodExpr.prototype.isConstant = function () { return false; };\n    InvokeMethodExpr.prototype.visitExpression = function (visitor, context) {\n        return visitor.visitInvokeMethodExpr(this, context);\n    };\n    return InvokeMethodExpr;\n}(Expression));\nvar InvokeFunctionExpr = /** @class */ (function (_super) {\n    __extends(InvokeFunctionExpr, _super);\n    function InvokeFunctionExpr(fn, args, type, sourceSpan) {\n        var _this = _super.call(this, type, sourceSpan) || this;\n        _this.fn = fn;\n        _this.args = args;\n        return _this;\n    }\n    InvokeFunctionExpr.prototype.isEquivalent = function (e) {\n        return e instanceof InvokeFunctionExpr && this.fn.isEquivalent(e.fn) &&\n            areAllEquivalent(this.args, e.args);\n    };\n    InvokeFunctionExpr.prototype.isConstant = function () { return false; };\n    InvokeFunctionExpr.prototype.visitExpression = function (visitor, context) {\n        return visitor.visitInvokeFunctionExpr(this, context);\n    };\n    return InvokeFunctionExpr;\n}(Expression));\nvar InstantiateExpr = /** @class */ (function (_super) {\n    __extends(InstantiateExpr, _super);\n    function InstantiateExpr(classExpr, args, type, sourceSpan) {\n        var _this = _super.call(this, type, sourceSpan) || this;\n        _this.classExpr = classExpr;\n        _this.args = args;\n        return _this;\n    }\n    InstantiateExpr.prototype.isEquivalent = function (e) {\n        return e instanceof InstantiateExpr && this.classExpr.isEquivalent(e.classExpr) &&\n            areAllEquivalent(this.args, e.args);\n    };\n    InstantiateExpr.prototype.isConstant = function () { return false; };\n    InstantiateExpr.prototype.visitExpression = function (visitor, context) {\n        return visitor.visitInstantiateExpr(this, context);\n    };\n    return InstantiateExpr;\n}(Expression));\nvar LiteralExpr = /** @class */ (function (_super) {\n    __extends(LiteralExpr, _super);\n    function LiteralExpr(value, type, sourceSpan) {\n        var _this = _super.call(this, type, sourceSpan) || this;\n        _this.value = value;\n        return _this;\n    }\n    LiteralExpr.prototype.isEquivalent = function (e) {\n        return e instanceof LiteralExpr && this.value === e.value;\n    };\n    LiteralExpr.prototype.isConstant = function () { return true; };\n    LiteralExpr.prototype.visitExpression = function (visitor, context) {\n        return visitor.visitLiteralExpr(this, context);\n    };\n    return LiteralExpr;\n}(Expression));\nvar ExternalExpr = /** @class */ (function (_super) {\n    __extends(ExternalExpr, _super);\n    function ExternalExpr(value, type, typeParams, sourceSpan) {\n        if (typeParams === void 0) { typeParams = null; }\n        var _this = _super.call(this, type, sourceSpan) || this;\n        _this.value = value;\n        _this.typeParams = typeParams;\n        return _this;\n    }\n    ExternalExpr.prototype.isEquivalent = function (e) {\n        return e instanceof ExternalExpr && this.value.name === e.value.name &&\n            this.value.moduleName === e.value.moduleName && this.value.runtime === e.value.runtime;\n    };\n    ExternalExpr.prototype.isConstant = function () { return false; };\n    ExternalExpr.prototype.visitExpression = function (visitor, context) {\n        return visitor.visitExternalExpr(this, context);\n    };\n    return ExternalExpr;\n}(Expression));\nvar ConditionalExpr = /** @class */ (function (_super) {\n    __extends(ConditionalExpr, _super);\n    function ConditionalExpr(condition, trueCase, falseCase, type, sourceSpan) {\n        if (falseCase === void 0) { falseCase = null; }\n        var _this = _super.call(this, type || trueCase.type, sourceSpan) || this;\n        _this.condition = condition;\n        _this.falseCase = falseCase;\n        _this.trueCase = trueCase;\n        return _this;\n    }\n    ConditionalExpr.prototype.isEquivalent = function (e) {\n        return e instanceof ConditionalExpr && this.condition.isEquivalent(e.condition) &&\n            this.trueCase.isEquivalent(e.trueCase) && nullSafeIsEquivalent(this.falseCase, e.falseCase);\n    };\n    ConditionalExpr.prototype.isConstant = function () { return false; };\n    ConditionalExpr.prototype.visitExpression = function (visitor, context) {\n        return visitor.visitConditionalExpr(this, context);\n    };\n    return ConditionalExpr;\n}(Expression));\nvar NotExpr = /** @class */ (function (_super) {\n    __extends(NotExpr, _super);\n    function NotExpr(condition, sourceSpan) {\n        var _this = _super.call(this, BOOL_TYPE, sourceSpan) || this;\n        _this.condition = condition;\n        return _this;\n    }\n    NotExpr.prototype.isEquivalent = function (e) {\n        return e instanceof NotExpr && this.condition.isEquivalent(e.condition);\n    };\n    NotExpr.prototype.isConstant = function () { return false; };\n    NotExpr.prototype.visitExpression = function (visitor, context) {\n        return visitor.visitNotExpr(this, context);\n    };\n    return NotExpr;\n}(Expression));\nvar AssertNotNull = /** @class */ (function (_super) {\n    __extends(AssertNotNull, _super);\n    function AssertNotNull(condition, sourceSpan) {\n        var _this = _super.call(this, condition.type, sourceSpan) || this;\n        _this.condition = condition;\n        return _this;\n    }\n    AssertNotNull.prototype.isEquivalent = function (e) {\n        return e instanceof AssertNotNull && this.condition.isEquivalent(e.condition);\n    };\n    AssertNotNull.prototype.isConstant = function () { return false; };\n    AssertNotNull.prototype.visitExpression = function (visitor, context) {\n        return visitor.visitAssertNotNullExpr(this, context);\n    };\n    return AssertNotNull;\n}(Expression));\nvar CastExpr = /** @class */ (function (_super) {\n    __extends(CastExpr, _super);\n    function CastExpr(value, type, sourceSpan) {\n        var _this = _super.call(this, type, sourceSpan) || this;\n        _this.value = value;\n        return _this;\n    }\n    CastExpr.prototype.isEquivalent = function (e) {\n        return e instanceof CastExpr && this.value.isEquivalent(e.value);\n    };\n    CastExpr.prototype.isConstant = function () { return false; };\n    CastExpr.prototype.visitExpression = function (visitor, context) {\n        return visitor.visitCastExpr(this, context);\n    };\n    return CastExpr;\n}(Expression));\nvar FunctionExpr = /** @class */ (function (_super) {\n    __extends(FunctionExpr, _super);\n    function FunctionExpr(params, statements, type, sourceSpan, name) {\n        var _this = _super.call(this, type, sourceSpan) || this;\n        _this.params = params;\n        _this.statements = statements;\n        _this.name = name;\n        return _this;\n    }\n    FunctionExpr.prototype.isEquivalent = function (e) {\n        return e instanceof FunctionExpr && areAllEquivalent(this.params, e.params) &&\n            areAllEquivalent(this.statements, e.statements);\n    };\n    FunctionExpr.prototype.isConstant = function () { return false; };\n    FunctionExpr.prototype.visitExpression = function (visitor, context) {\n        return visitor.visitFunctionExpr(this, context);\n    };\n    FunctionExpr.prototype.toDeclStmt = function (name, modifiers) {\n        if (modifiers === void 0) { modifiers = null; }\n        return new DeclareFunctionStmt(name, this.params, this.statements, this.type, modifiers, this.sourceSpan);\n    };\n    return FunctionExpr;\n}(Expression));\nvar BinaryOperatorExpr = /** @class */ (function (_super) {\n    __extends(BinaryOperatorExpr, _super);\n    function BinaryOperatorExpr(operator, lhs, rhs, type, sourceSpan, parens) {\n        if (parens === void 0) { parens = true; }\n        var _this = _super.call(this, type || lhs.type, sourceSpan) || this;\n        _this.operator = operator;\n        _this.rhs = rhs;\n        _this.parens = parens;\n        _this.lhs = lhs;\n        return _this;\n    }\n    BinaryOperatorExpr.prototype.isEquivalent = function (e) {\n        return e instanceof BinaryOperatorExpr && this.operator === e.operator &&\n            this.lhs.isEquivalent(e.lhs) && this.rhs.isEquivalent(e.rhs);\n    };\n    BinaryOperatorExpr.prototype.isConstant = function () { return false; };\n    BinaryOperatorExpr.prototype.visitExpression = function (visitor, context) {\n        return visitor.visitBinaryOperatorExpr(this, context);\n    };\n    return BinaryOperatorExpr;\n}(Expression));\nvar ReadPropExpr = /** @class */ (function (_super) {\n    __extends(ReadPropExpr, _super);\n    function ReadPropExpr(receiver, name, type, sourceSpan) {\n        var _this = _super.call(this, type, sourceSpan) || this;\n        _this.receiver = receiver;\n        _this.name = name;\n        return _this;\n    }\n    ReadPropExpr.prototype.isEquivalent = function (e) {\n        return e instanceof ReadPropExpr && this.receiver.isEquivalent(e.receiver) &&\n            this.name === e.name;\n    };\n    ReadPropExpr.prototype.isConstant = function () { return false; };\n    ReadPropExpr.prototype.visitExpression = function (visitor, context) {\n        return visitor.visitReadPropExpr(this, context);\n    };\n    ReadPropExpr.prototype.set = function (value) {\n        return new WritePropExpr(this.receiver, this.name, value, null, this.sourceSpan);\n    };\n    return ReadPropExpr;\n}(Expression));\nvar ReadKeyExpr = /** @class */ (function (_super) {\n    __extends(ReadKeyExpr, _super);\n    function ReadKeyExpr(receiver, index, type, sourceSpan) {\n        var _this = _super.call(this, type, sourceSpan) || this;\n        _this.receiver = receiver;\n        _this.index = index;\n        return _this;\n    }\n    ReadKeyExpr.prototype.isEquivalent = function (e) {\n        return e instanceof ReadKeyExpr && this.receiver.isEquivalent(e.receiver) &&\n            this.index.isEquivalent(e.index);\n    };\n    ReadKeyExpr.prototype.isConstant = function () { return false; };\n    ReadKeyExpr.prototype.visitExpression = function (visitor, context) {\n        return visitor.visitReadKeyExpr(this, context);\n    };\n    ReadKeyExpr.prototype.set = function (value) {\n        return new WriteKeyExpr(this.receiver, this.index, value, null, this.sourceSpan);\n    };\n    return ReadKeyExpr;\n}(Expression));\nvar LiteralArrayExpr = /** @class */ (function (_super) {\n    __extends(LiteralArrayExpr, _super);\n    function LiteralArrayExpr(entries, type, sourceSpan) {\n        var _this = _super.call(this, type, sourceSpan) || this;\n        _this.entries = entries;\n        return _this;\n    }\n    LiteralArrayExpr.prototype.isConstant = function () { return this.entries.every(function (e) { return e.isConstant(); }); };\n    LiteralArrayExpr.prototype.isEquivalent = function (e) {\n        return e instanceof LiteralArrayExpr && areAllEquivalent(this.entries, e.entries);\n    };\n    LiteralArrayExpr.prototype.visitExpression = function (visitor, context) {\n        return visitor.visitLiteralArrayExpr(this, context);\n    };\n    return LiteralArrayExpr;\n}(Expression));\nvar LiteralMapEntry = /** @class */ (function () {\n    function LiteralMapEntry(key, value, quoted) {\n        this.key = key;\n        this.value = value;\n        this.quoted = quoted;\n    }\n    LiteralMapEntry.prototype.isEquivalent = function (e) {\n        return this.key === e.key && this.value.isEquivalent(e.value);\n    };\n    return LiteralMapEntry;\n}());\nvar LiteralMapExpr = /** @class */ (function (_super) {\n    __extends(LiteralMapExpr, _super);\n    function LiteralMapExpr(entries, type, sourceSpan) {\n        var _this = _super.call(this, type, sourceSpan) || this;\n        _this.entries = entries;\n        _this.valueType = null;\n        if (type) {\n            _this.valueType = type.valueType;\n        }\n        return _this;\n    }\n    LiteralMapExpr.prototype.isEquivalent = function (e) {\n        return e instanceof LiteralMapExpr && areAllEquivalent(this.entries, e.entries);\n    };\n    LiteralMapExpr.prototype.isConstant = function () { return this.entries.every(function (e) { return e.value.isConstant(); }); };\n    LiteralMapExpr.prototype.visitExpression = function (visitor, context) {\n        return visitor.visitLiteralMapExpr(this, context);\n    };\n    return LiteralMapExpr;\n}(Expression));\nvar CommaExpr = /** @class */ (function (_super) {\n    __extends(CommaExpr, _super);\n    function CommaExpr(parts, sourceSpan) {\n        var _this = _super.call(this, parts[parts.length - 1].type, sourceSpan) || this;\n        _this.parts = parts;\n        return _this;\n    }\n    CommaExpr.prototype.isEquivalent = function (e) {\n        return e instanceof CommaExpr && areAllEquivalent(this.parts, e.parts);\n    };\n    CommaExpr.prototype.isConstant = function () { return false; };\n    CommaExpr.prototype.visitExpression = function (visitor, context) {\n        return visitor.visitCommaExpr(this, context);\n    };\n    return CommaExpr;\n}(Expression));\nvar THIS_EXPR = new ReadVarExpr(BuiltinVar.This, null, null);\nvar SUPER_EXPR = new ReadVarExpr(BuiltinVar.Super, null, null);\nvar CATCH_ERROR_VAR = new ReadVarExpr(BuiltinVar.CatchError, null, null);\nvar CATCH_STACK_VAR = new ReadVarExpr(BuiltinVar.CatchStack, null, null);\nvar NULL_EXPR = new LiteralExpr(null, null, null);\nvar TYPED_NULL_EXPR = new LiteralExpr(null, INFERRED_TYPE, null);\n//// Statements\nvar StmtModifier;\n(function (StmtModifier) {\n    StmtModifier[StmtModifier[\"Final\"] = 0] = \"Final\";\n    StmtModifier[StmtModifier[\"Private\"] = 1] = \"Private\";\n    StmtModifier[StmtModifier[\"Exported\"] = 2] = \"Exported\";\n    StmtModifier[StmtModifier[\"Static\"] = 3] = \"Static\";\n})(StmtModifier || (StmtModifier = {}));\nvar Statement = /** @class */ (function () {\n    function Statement(modifiers, sourceSpan) {\n        this.modifiers = modifiers || [];\n        this.sourceSpan = sourceSpan || null;\n    }\n    Statement.prototype.hasModifier = function (modifier) { return this.modifiers.indexOf(modifier) !== -1; };\n    return Statement;\n}());\nvar DeclareVarStmt = /** @class */ (function (_super) {\n    __extends(DeclareVarStmt, _super);\n    function DeclareVarStmt(name, value, type, modifiers, sourceSpan) {\n        if (modifiers === void 0) { modifiers = null; }\n        var _this = _super.call(this, modifiers, sourceSpan) || this;\n        _this.name = name;\n        _this.value = value;\n        _this.type = type || (value && value.type) || null;\n        return _this;\n    }\n    DeclareVarStmt.prototype.isEquivalent = function (stmt) {\n        return stmt instanceof DeclareVarStmt && this.name === stmt.name &&\n            (this.value ? !!stmt.value && this.value.isEquivalent(stmt.value) : !stmt.value);\n    };\n    DeclareVarStmt.prototype.visitStatement = function (visitor, context) {\n        return visitor.visitDeclareVarStmt(this, context);\n    };\n    return DeclareVarStmt;\n}(Statement));\nvar DeclareFunctionStmt = /** @class */ (function (_super) {\n    __extends(DeclareFunctionStmt, _super);\n    function DeclareFunctionStmt(name, params, statements, type, modifiers, sourceSpan) {\n        if (modifiers === void 0) { modifiers = null; }\n        var _this = _super.call(this, modifiers, sourceSpan) || this;\n        _this.name = name;\n        _this.params = params;\n        _this.statements = statements;\n        _this.type = type || null;\n        return _this;\n    }\n    DeclareFunctionStmt.prototype.isEquivalent = function (stmt) {\n        return stmt instanceof DeclareFunctionStmt && areAllEquivalent(this.params, stmt.params) &&\n            areAllEquivalent(this.statements, stmt.statements);\n    };\n    DeclareFunctionStmt.prototype.visitStatement = function (visitor, context) {\n        return visitor.visitDeclareFunctionStmt(this, context);\n    };\n    return DeclareFunctionStmt;\n}(Statement));\nvar ExpressionStatement = /** @class */ (function (_super) {\n    __extends(ExpressionStatement, _super);\n    function ExpressionStatement(expr, sourceSpan) {\n        var _this = _super.call(this, null, sourceSpan) || this;\n        _this.expr = expr;\n        return _this;\n    }\n    ExpressionStatement.prototype.isEquivalent = function (stmt) {\n        return stmt instanceof ExpressionStatement && this.expr.isEquivalent(stmt.expr);\n    };\n    ExpressionStatement.prototype.visitStatement = function (visitor, context) {\n        return visitor.visitExpressionStmt(this, context);\n    };\n    return ExpressionStatement;\n}(Statement));\nvar ReturnStatement = /** @class */ (function (_super) {\n    __extends(ReturnStatement, _super);\n    function ReturnStatement(value, sourceSpan) {\n        var _this = _super.call(this, null, sourceSpan) || this;\n        _this.value = value;\n        return _this;\n    }\n    ReturnStatement.prototype.isEquivalent = function (stmt) {\n        return stmt instanceof ReturnStatement && this.value.isEquivalent(stmt.value);\n    };\n    ReturnStatement.prototype.visitStatement = function (visitor, context) {\n        return visitor.visitReturnStmt(this, context);\n    };\n    return ReturnStatement;\n}(Statement));\nvar AbstractClassPart = /** @class */ (function () {\n    function AbstractClassPart(type, modifiers) {\n        this.modifiers = modifiers;\n        if (!modifiers) {\n            this.modifiers = [];\n        }\n        this.type = type || null;\n    }\n    AbstractClassPart.prototype.hasModifier = function (modifier) { return this.modifiers.indexOf(modifier) !== -1; };\n    return AbstractClassPart;\n}());\nvar ClassField = /** @class */ (function (_super) {\n    __extends(ClassField, _super);\n    function ClassField(name, type, modifiers, initializer) {\n        if (modifiers === void 0) { modifiers = null; }\n        var _this = _super.call(this, type, modifiers) || this;\n        _this.name = name;\n        _this.initializer = initializer;\n        return _this;\n    }\n    ClassField.prototype.isEquivalent = function (f) { return this.name === f.name; };\n    return ClassField;\n}(AbstractClassPart));\nvar ClassMethod = /** @class */ (function (_super) {\n    __extends(ClassMethod, _super);\n    function ClassMethod(name, params, body, type, modifiers) {\n        if (modifiers === void 0) { modifiers = null; }\n        var _this = _super.call(this, type, modifiers) || this;\n        _this.name = name;\n        _this.params = params;\n        _this.body = body;\n        return _this;\n    }\n    ClassMethod.prototype.isEquivalent = function (m) {\n        return this.name === m.name && areAllEquivalent(this.body, m.body);\n    };\n    return ClassMethod;\n}(AbstractClassPart));\nvar ClassGetter = /** @class */ (function (_super) {\n    __extends(ClassGetter, _super);\n    function ClassGetter(name, body, type, modifiers) {\n        if (modifiers === void 0) { modifiers = null; }\n        var _this = _super.call(this, type, modifiers) || this;\n        _this.name = name;\n        _this.body = body;\n        return _this;\n    }\n    ClassGetter.prototype.isEquivalent = function (m) {\n        return this.name === m.name && areAllEquivalent(this.body, m.body);\n    };\n    return ClassGetter;\n}(AbstractClassPart));\nvar ClassStmt = /** @class */ (function (_super) {\n    __extends(ClassStmt, _super);\n    function ClassStmt(name, parent, fields, getters, constructorMethod, methods, modifiers, sourceSpan) {\n        if (modifiers === void 0) { modifiers = null; }\n        var _this = _super.call(this, modifiers, sourceSpan) || this;\n        _this.name = name;\n        _this.parent = parent;\n        _this.fields = fields;\n        _this.getters = getters;\n        _this.constructorMethod = constructorMethod;\n        _this.methods = methods;\n        return _this;\n    }\n    ClassStmt.prototype.isEquivalent = function (stmt) {\n        return stmt instanceof ClassStmt && this.name === stmt.name &&\n            nullSafeIsEquivalent(this.parent, stmt.parent) &&\n            areAllEquivalent(this.fields, stmt.fields) &&\n            areAllEquivalent(this.getters, stmt.getters) &&\n            this.constructorMethod.isEquivalent(stmt.constructorMethod) &&\n            areAllEquivalent(this.methods, stmt.methods);\n    };\n    ClassStmt.prototype.visitStatement = function (visitor, context) {\n        return visitor.visitDeclareClassStmt(this, context);\n    };\n    return ClassStmt;\n}(Statement));\nvar IfStmt = /** @class */ (function (_super) {\n    __extends(IfStmt, _super);\n    function IfStmt(condition, trueCase, falseCase, sourceSpan) {\n        if (falseCase === void 0) { falseCase = []; }\n        var _this = _super.call(this, null, sourceSpan) || this;\n        _this.condition = condition;\n        _this.trueCase = trueCase;\n        _this.falseCase = falseCase;\n        return _this;\n    }\n    IfStmt.prototype.isEquivalent = function (stmt) {\n        return stmt instanceof IfStmt && this.condition.isEquivalent(stmt.condition) &&\n            areAllEquivalent(this.trueCase, stmt.trueCase) &&\n            areAllEquivalent(this.falseCase, stmt.falseCase);\n    };\n    IfStmt.prototype.visitStatement = function (visitor, context) {\n        return visitor.visitIfStmt(this, context);\n    };\n    return IfStmt;\n}(Statement));\nvar CommentStmt = /** @class */ (function (_super) {\n    __extends(CommentStmt, _super);\n    function CommentStmt(comment, multiline, sourceSpan) {\n        if (multiline === void 0) { multiline = false; }\n        var _this = _super.call(this, null, sourceSpan) || this;\n        _this.comment = comment;\n        _this.multiline = multiline;\n        return _this;\n    }\n    CommentStmt.prototype.isEquivalent = function (stmt) { return stmt instanceof CommentStmt; };\n    CommentStmt.prototype.visitStatement = function (visitor, context) {\n        return visitor.visitCommentStmt(this, context);\n    };\n    return CommentStmt;\n}(Statement));\nvar JSDocCommentStmt = /** @class */ (function (_super) {\n    __extends(JSDocCommentStmt, _super);\n    function JSDocCommentStmt(tags, sourceSpan) {\n        if (tags === void 0) { tags = []; }\n        var _this = _super.call(this, null, sourceSpan) || this;\n        _this.tags = tags;\n        return _this;\n    }\n    JSDocCommentStmt.prototype.isEquivalent = function (stmt) {\n        return stmt instanceof JSDocCommentStmt && this.toString() === stmt.toString();\n    };\n    JSDocCommentStmt.prototype.visitStatement = function (visitor, context) {\n        return visitor.visitJSDocCommentStmt(this, context);\n    };\n    JSDocCommentStmt.prototype.toString = function () { return serializeTags(this.tags); };\n    return JSDocCommentStmt;\n}(Statement));\nvar TryCatchStmt = /** @class */ (function (_super) {\n    __extends(TryCatchStmt, _super);\n    function TryCatchStmt(bodyStmts, catchStmts, sourceSpan) {\n        var _this = _super.call(this, null, sourceSpan) || this;\n        _this.bodyStmts = bodyStmts;\n        _this.catchStmts = catchStmts;\n        return _this;\n    }\n    TryCatchStmt.prototype.isEquivalent = function (stmt) {\n        return stmt instanceof TryCatchStmt && areAllEquivalent(this.bodyStmts, stmt.bodyStmts) &&\n            areAllEquivalent(this.catchStmts, stmt.catchStmts);\n    };\n    TryCatchStmt.prototype.visitStatement = function (visitor, context) {\n        return visitor.visitTryCatchStmt(this, context);\n    };\n    return TryCatchStmt;\n}(Statement));\nvar ThrowStmt = /** @class */ (function (_super) {\n    __extends(ThrowStmt, _super);\n    function ThrowStmt(error, sourceSpan) {\n        var _this = _super.call(this, null, sourceSpan) || this;\n        _this.error = error;\n        return _this;\n    }\n    ThrowStmt.prototype.isEquivalent = function (stmt) {\n        return stmt instanceof TryCatchStmt && this.error.isEquivalent(stmt.error);\n    };\n    ThrowStmt.prototype.visitStatement = function (visitor, context) {\n        return visitor.visitThrowStmt(this, context);\n    };\n    return ThrowStmt;\n}(Statement));\nvar AstTransformer$1 = /** @class */ (function () {\n    function AstTransformer() {\n    }\n    AstTransformer.prototype.transformExpr = function (expr, context) { return expr; };\n    AstTransformer.prototype.transformStmt = function (stmt, context) { return stmt; };\n    AstTransformer.prototype.visitReadVarExpr = function (ast, context) { return this.transformExpr(ast, context); };\n    AstTransformer.prototype.visitWriteVarExpr = function (expr, context) {\n        return this.transformExpr(new WriteVarExpr(expr.name, expr.value.visitExpression(this, context), expr.type, expr.sourceSpan), context);\n    };\n    AstTransformer.prototype.visitWriteKeyExpr = function (expr, context) {\n        return this.transformExpr(new WriteKeyExpr(expr.receiver.visitExpression(this, context), expr.index.visitExpression(this, context), expr.value.visitExpression(this, context), expr.type, expr.sourceSpan), context);\n    };\n    AstTransformer.prototype.visitWritePropExpr = function (expr, context) {\n        return this.transformExpr(new WritePropExpr(expr.receiver.visitExpression(this, context), expr.name, expr.value.visitExpression(this, context), expr.type, expr.sourceSpan), context);\n    };\n    AstTransformer.prototype.visitInvokeMethodExpr = function (ast, context) {\n        var method = ast.builtin || ast.name;\n        return this.transformExpr(new InvokeMethodExpr(ast.receiver.visitExpression(this, context), method, this.visitAllExpressions(ast.args, context), ast.type, ast.sourceSpan), context);\n    };\n    AstTransformer.prototype.visitInvokeFunctionExpr = function (ast, context) {\n        return this.transformExpr(new InvokeFunctionExpr(ast.fn.visitExpression(this, context), this.visitAllExpressions(ast.args, context), ast.type, ast.sourceSpan), context);\n    };\n    AstTransformer.prototype.visitInstantiateExpr = function (ast, context) {\n        return this.transformExpr(new InstantiateExpr(ast.classExpr.visitExpression(this, context), this.visitAllExpressions(ast.args, context), ast.type, ast.sourceSpan), context);\n    };\n    AstTransformer.prototype.visitLiteralExpr = function (ast, context) { return this.transformExpr(ast, context); };\n    AstTransformer.prototype.visitExternalExpr = function (ast, context) {\n        return this.transformExpr(ast, context);\n    };\n    AstTransformer.prototype.visitConditionalExpr = function (ast, context) {\n        return this.transformExpr(new ConditionalExpr(ast.condition.visitExpression(this, context), ast.trueCase.visitExpression(this, context), ast.falseCase.visitExpression(this, context), ast.type, ast.sourceSpan), context);\n    };\n    AstTransformer.prototype.visitNotExpr = function (ast, context) {\n        return this.transformExpr(new NotExpr(ast.condition.visitExpression(this, context), ast.sourceSpan), context);\n    };\n    AstTransformer.prototype.visitAssertNotNullExpr = function (ast, context) {\n        return this.transformExpr(new AssertNotNull(ast.condition.visitExpression(this, context), ast.sourceSpan), context);\n    };\n    AstTransformer.prototype.visitCastExpr = function (ast, context) {\n        return this.transformExpr(new CastExpr(ast.value.visitExpression(this, context), ast.type, ast.sourceSpan), context);\n    };\n    AstTransformer.prototype.visitFunctionExpr = function (ast, context) {\n        return this.transformExpr(new FunctionExpr(ast.params, this.visitAllStatements(ast.statements, context), ast.type, ast.sourceSpan), context);\n    };\n    AstTransformer.prototype.visitBinaryOperatorExpr = function (ast, context) {\n        return this.transformExpr(new BinaryOperatorExpr(ast.operator, ast.lhs.visitExpression(this, context), ast.rhs.visitExpression(this, context), ast.type, ast.sourceSpan), context);\n    };\n    AstTransformer.prototype.visitReadPropExpr = function (ast, context) {\n        return this.transformExpr(new ReadPropExpr(ast.receiver.visitExpression(this, context), ast.name, ast.type, ast.sourceSpan), context);\n    };\n    AstTransformer.prototype.visitReadKeyExpr = function (ast, context) {\n        return this.transformExpr(new ReadKeyExpr(ast.receiver.visitExpression(this, context), ast.index.visitExpression(this, context), ast.type, ast.sourceSpan), context);\n    };\n    AstTransformer.prototype.visitLiteralArrayExpr = function (ast, context) {\n        return this.transformExpr(new LiteralArrayExpr(this.visitAllExpressions(ast.entries, context), ast.type, ast.sourceSpan), context);\n    };\n    AstTransformer.prototype.visitLiteralMapExpr = function (ast, context) {\n        var _this = this;\n        var entries = ast.entries.map(function (entry) { return new LiteralMapEntry(entry.key, entry.value.visitExpression(_this, context), entry.quoted); });\n        var mapType = new MapType(ast.valueType, null);\n        return this.transformExpr(new LiteralMapExpr(entries, mapType, ast.sourceSpan), context);\n    };\n    AstTransformer.prototype.visitCommaExpr = function (ast, context) {\n        return this.transformExpr(new CommaExpr(this.visitAllExpressions(ast.parts, context), ast.sourceSpan), context);\n    };\n    AstTransformer.prototype.visitAllExpressions = function (exprs, context) {\n        var _this = this;\n        return exprs.map(function (expr) { return expr.visitExpression(_this, context); });\n    };\n    AstTransformer.prototype.visitDeclareVarStmt = function (stmt, context) {\n        var value = stmt.value && stmt.value.visitExpression(this, context);\n        return this.transformStmt(new DeclareVarStmt(stmt.name, value, stmt.type, stmt.modifiers, stmt.sourceSpan), context);\n    };\n    AstTransformer.prototype.visitDeclareFunctionStmt = function (stmt, context) {\n        return this.transformStmt(new DeclareFunctionStmt(stmt.name, stmt.params, this.visitAllStatements(stmt.statements, context), stmt.type, stmt.modifiers, stmt.sourceSpan), context);\n    };\n    AstTransformer.prototype.visitExpressionStmt = function (stmt, context) {\n        return this.transformStmt(new ExpressionStatement(stmt.expr.visitExpression(this, context), stmt.sourceSpan), context);\n    };\n    AstTransformer.prototype.visitReturnStmt = function (stmt, context) {\n        return this.transformStmt(new ReturnStatement(stmt.value.visitExpression(this, context), stmt.sourceSpan), context);\n    };\n    AstTransformer.prototype.visitDeclareClassStmt = function (stmt, context) {\n        var _this = this;\n        var parent = stmt.parent.visitExpression(this, context);\n        var getters = stmt.getters.map(function (getter) { return new ClassGetter(getter.name, _this.visitAllStatements(getter.body, context), getter.type, getter.modifiers); });\n        var ctorMethod = stmt.constructorMethod &&\n            new ClassMethod(stmt.constructorMethod.name, stmt.constructorMethod.params, this.visitAllStatements(stmt.constructorMethod.body, context), stmt.constructorMethod.type, stmt.constructorMethod.modifiers);\n        var methods = stmt.methods.map(function (method) { return new ClassMethod(method.name, method.params, _this.visitAllStatements(method.body, context), method.type, method.modifiers); });\n        return this.transformStmt(new ClassStmt(stmt.name, parent, stmt.fields, getters, ctorMethod, methods, stmt.modifiers, stmt.sourceSpan), context);\n    };\n    AstTransformer.prototype.visitIfStmt = function (stmt, context) {\n        return this.transformStmt(new IfStmt(stmt.condition.visitExpression(this, context), this.visitAllStatements(stmt.trueCase, context), this.visitAllStatements(stmt.falseCase, context), stmt.sourceSpan), context);\n    };\n    AstTransformer.prototype.visitTryCatchStmt = function (stmt, context) {\n        return this.transformStmt(new TryCatchStmt(this.visitAllStatements(stmt.bodyStmts, context), this.visitAllStatements(stmt.catchStmts, context), stmt.sourceSpan), context);\n    };\n    AstTransformer.prototype.visitThrowStmt = function (stmt, context) {\n        return this.transformStmt(new ThrowStmt(stmt.error.visitExpression(this, context), stmt.sourceSpan), context);\n    };\n    AstTransformer.prototype.visitCommentStmt = function (stmt, context) {\n        return this.transformStmt(stmt, context);\n    };\n    AstTransformer.prototype.visitJSDocCommentStmt = function (stmt, context) {\n        return this.transformStmt(stmt, context);\n    };\n    AstTransformer.prototype.visitAllStatements = function (stmts, context) {\n        var _this = this;\n        return stmts.map(function (stmt) { return stmt.visitStatement(_this, context); });\n    };\n    return AstTransformer;\n}());\nvar RecursiveAstVisitor$1 = /** @class */ (function () {\n    function RecursiveAstVisitor() {\n    }\n    RecursiveAstVisitor.prototype.visitType = function (ast, context) { return ast; };\n    RecursiveAstVisitor.prototype.visitExpression = function (ast, context) {\n        if (ast.type) {\n            ast.type.visitType(this, context);\n        }\n        return ast;\n    };\n    RecursiveAstVisitor.prototype.visitBuiltinType = function (type, context) { return this.visitType(type, context); };\n    RecursiveAstVisitor.prototype.visitExpressionType = function (type, context) {\n        type.value.visitExpression(this, context);\n        return this.visitType(type, context);\n    };\n    RecursiveAstVisitor.prototype.visitArrayType = function (type, context) { return this.visitType(type, context); };\n    RecursiveAstVisitor.prototype.visitMapType = function (type, context) { return this.visitType(type, context); };\n    RecursiveAstVisitor.prototype.visitReadVarExpr = function (ast, context) {\n        return this.visitExpression(ast, context);\n    };\n    RecursiveAstVisitor.prototype.visitWriteVarExpr = function (ast, context) {\n        ast.value.visitExpression(this, context);\n        return this.visitExpression(ast, context);\n    };\n    RecursiveAstVisitor.prototype.visitWriteKeyExpr = function (ast, context) {\n        ast.receiver.visitExpression(this, context);\n        ast.index.visitExpression(this, context);\n        ast.value.visitExpression(this, context);\n        return this.visitExpression(ast, context);\n    };\n    RecursiveAstVisitor.prototype.visitWritePropExpr = function (ast, context) {\n        ast.receiver.visitExpression(this, context);\n        ast.value.visitExpression(this, context);\n        return this.visitExpression(ast, context);\n    };\n    RecursiveAstVisitor.prototype.visitInvokeMethodExpr = function (ast, context) {\n        ast.receiver.visitExpression(this, context);\n        this.visitAllExpressions(ast.args, context);\n        return this.visitExpression(ast, context);\n    };\n    RecursiveAstVisitor.prototype.visitInvokeFunctionExpr = function (ast, context) {\n        ast.fn.visitExpression(this, context);\n        this.visitAllExpressions(ast.args, context);\n        return this.visitExpression(ast, context);\n    };\n    RecursiveAstVisitor.prototype.visitInstantiateExpr = function (ast, context) {\n        ast.classExpr.visitExpression(this, context);\n        this.visitAllExpressions(ast.args, context);\n        return this.visitExpression(ast, context);\n    };\n    RecursiveAstVisitor.prototype.visitLiteralExpr = function (ast, context) {\n        return this.visitExpression(ast, context);\n    };\n    RecursiveAstVisitor.prototype.visitExternalExpr = function (ast, context) {\n        var _this = this;\n        if (ast.typeParams) {\n            ast.typeParams.forEach(function (type) { return type.visitType(_this, context); });\n        }\n        return this.visitExpression(ast, context);\n    };\n    RecursiveAstVisitor.prototype.visitConditionalExpr = function (ast, context) {\n        ast.condition.visitExpression(this, context);\n        ast.trueCase.visitExpression(this, context);\n        ast.falseCase.visitExpression(this, context);\n        return this.visitExpression(ast, context);\n    };\n    RecursiveAstVisitor.prototype.visitNotExpr = function (ast, context) {\n        ast.condition.visitExpression(this, context);\n        return this.visitExpression(ast, context);\n    };\n    RecursiveAstVisitor.prototype.visitAssertNotNullExpr = function (ast, context) {\n        ast.condition.visitExpression(this, context);\n        return this.visitExpression(ast, context);\n    };\n    RecursiveAstVisitor.prototype.visitCastExpr = function (ast, context) {\n        ast.value.visitExpression(this, context);\n        return this.visitExpression(ast, context);\n    };\n    RecursiveAstVisitor.prototype.visitFunctionExpr = function (ast, context) {\n        this.visitAllStatements(ast.statements, context);\n        return this.visitExpression(ast, context);\n    };\n    RecursiveAstVisitor.prototype.visitBinaryOperatorExpr = function (ast, context) {\n        ast.lhs.visitExpression(this, context);\n        ast.rhs.visitExpression(this, context);\n        return this.visitExpression(ast, context);\n    };\n    RecursiveAstVisitor.prototype.visitReadPropExpr = function (ast, context) {\n        ast.receiver.visitExpression(this, context);\n        return this.visitExpression(ast, context);\n    };\n    RecursiveAstVisitor.prototype.visitReadKeyExpr = function (ast, context) {\n        ast.receiver.visitExpression(this, context);\n        ast.index.visitExpression(this, context);\n        return this.visitExpression(ast, context);\n    };\n    RecursiveAstVisitor.prototype.visitLiteralArrayExpr = function (ast, context) {\n        this.visitAllExpressions(ast.entries, context);\n        return this.visitExpression(ast, context);\n    };\n    RecursiveAstVisitor.prototype.visitLiteralMapExpr = function (ast, context) {\n        var _this = this;\n        ast.entries.forEach(function (entry) { return entry.value.visitExpression(_this, context); });\n        return this.visitExpression(ast, context);\n    };\n    RecursiveAstVisitor.prototype.visitCommaExpr = function (ast, context) {\n        this.visitAllExpressions(ast.parts, context);\n        return this.visitExpression(ast, context);\n    };\n    RecursiveAstVisitor.prototype.visitAllExpressions = function (exprs, context) {\n        var _this = this;\n        exprs.forEach(function (expr) { return expr.visitExpression(_this, context); });\n    };\n    RecursiveAstVisitor.prototype.visitDeclareVarStmt = function (stmt, context) {\n        if (stmt.value) {\n            stmt.value.visitExpression(this, context);\n        }\n        if (stmt.type) {\n            stmt.type.visitType(this, context);\n        }\n        return stmt;\n    };\n    RecursiveAstVisitor.prototype.visitDeclareFunctionStmt = function (stmt, context) {\n        this.visitAllStatements(stmt.statements, context);\n        if (stmt.type) {\n            stmt.type.visitType(this, context);\n        }\n        return stmt;\n    };\n    RecursiveAstVisitor.prototype.visitExpressionStmt = function (stmt, context) {\n        stmt.expr.visitExpression(this, context);\n        return stmt;\n    };\n    RecursiveAstVisitor.prototype.visitReturnStmt = function (stmt, context) {\n        stmt.value.visitExpression(this, context);\n        return stmt;\n    };\n    RecursiveAstVisitor.prototype.visitDeclareClassStmt = function (stmt, context) {\n        var _this = this;\n        stmt.parent.visitExpression(this, context);\n        stmt.getters.forEach(function (getter) { return _this.visitAllStatements(getter.body, context); });\n        if (stmt.constructorMethod) {\n            this.visitAllStatements(stmt.constructorMethod.body, context);\n        }\n        stmt.methods.forEach(function (method) { return _this.visitAllStatements(method.body, context); });\n        return stmt;\n    };\n    RecursiveAstVisitor.prototype.visitIfStmt = function (stmt, context) {\n        stmt.condition.visitExpression(this, context);\n        this.visitAllStatements(stmt.trueCase, context);\n        this.visitAllStatements(stmt.falseCase, context);\n        return stmt;\n    };\n    RecursiveAstVisitor.prototype.visitTryCatchStmt = function (stmt, context) {\n        this.visitAllStatements(stmt.bodyStmts, context);\n        this.visitAllStatements(stmt.catchStmts, context);\n        return stmt;\n    };\n    RecursiveAstVisitor.prototype.visitThrowStmt = function (stmt, context) {\n        stmt.error.visitExpression(this, context);\n        return stmt;\n    };\n    RecursiveAstVisitor.prototype.visitCommentStmt = function (stmt, context) { return stmt; };\n    RecursiveAstVisitor.prototype.visitJSDocCommentStmt = function (stmt, context) { return stmt; };\n    RecursiveAstVisitor.prototype.visitAllStatements = function (stmts, context) {\n        var _this = this;\n        stmts.forEach(function (stmt) { return stmt.visitStatement(_this, context); });\n    };\n    return RecursiveAstVisitor;\n}());\n\nvar _ReadVarVisitor = /** @class */ (function (_super) {\n    __extends(_ReadVarVisitor, _super);\n    function _ReadVarVisitor() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.varNames = new Set();\n        return _this;\n    }\n    _ReadVarVisitor.prototype.visitDeclareFunctionStmt = function (stmt, context) {\n        // Don't descend into nested functions\n        return stmt;\n    };\n    _ReadVarVisitor.prototype.visitDeclareClassStmt = function (stmt, context) {\n        // Don't descend into nested classes\n        return stmt;\n    };\n    _ReadVarVisitor.prototype.visitReadVarExpr = function (ast, context) {\n        if (ast.name) {\n            this.varNames.add(ast.name);\n        }\n        return null;\n    };\n    return _ReadVarVisitor;\n}(RecursiveAstVisitor$1));\n\nvar _FindExternalReferencesVisitor = /** @class */ (function (_super) {\n    __extends(_FindExternalReferencesVisitor, _super);\n    function _FindExternalReferencesVisitor() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.externalReferences = [];\n        return _this;\n    }\n    _FindExternalReferencesVisitor.prototype.visitExternalExpr = function (e, context) {\n        this.externalReferences.push(e.value);\n        return _super.prototype.visitExternalExpr.call(this, e, context);\n    };\n    return _FindExternalReferencesVisitor;\n}(RecursiveAstVisitor$1));\n\n\nvar _ApplySourceSpanTransformer = /** @class */ (function (_super) {\n    __extends(_ApplySourceSpanTransformer, _super);\n    function _ApplySourceSpanTransformer(sourceSpan) {\n        var _this = _super.call(this) || this;\n        _this.sourceSpan = sourceSpan;\n        return _this;\n    }\n    _ApplySourceSpanTransformer.prototype._clone = function (obj) {\n        var clone = Object.create(obj.constructor.prototype);\n        for (var prop in obj) {\n            clone[prop] = obj[prop];\n        }\n        return clone;\n    };\n    _ApplySourceSpanTransformer.prototype.transformExpr = function (expr, context) {\n        if (!expr.sourceSpan) {\n            expr = this._clone(expr);\n            expr.sourceSpan = this.sourceSpan;\n        }\n        return expr;\n    };\n    _ApplySourceSpanTransformer.prototype.transformStmt = function (stmt, context) {\n        if (!stmt.sourceSpan) {\n            stmt = this._clone(stmt);\n            stmt.sourceSpan = this.sourceSpan;\n        }\n        return stmt;\n    };\n    return _ApplySourceSpanTransformer;\n}(AstTransformer$1));\nfunction variable(name, type, sourceSpan) {\n    return new ReadVarExpr(name, type, sourceSpan);\n}\nfunction importExpr(id, typeParams, sourceSpan) {\n    if (typeParams === void 0) { typeParams = null; }\n    return new ExternalExpr(id, null, typeParams, sourceSpan);\n}\n\n\nfunction literalArr(values, type, sourceSpan) {\n    return new LiteralArrayExpr(values, type, sourceSpan);\n}\nfunction literalMap(values, type) {\n    if (type === void 0) { type = null; }\n    return new LiteralMapExpr(values.map(function (e) { return new LiteralMapEntry(e.key, e.value, e.quoted); }), type, null);\n}\n\n\n\n\n\n\n/*\n * Serializes a `Tag` into a string.\n * Returns a string like \" @foo {bar} baz\" (note the leading whitespace before `@foo`).\n */\nfunction tagToString(tag) {\n    var out = '';\n    if (tag.tagName) {\n        out += \" @\" + tag.tagName;\n    }\n    if (tag.text) {\n        if (tag.text.match(/\\/\\*|\\*\\//)) {\n            throw new Error('JSDoc text cannot contain \"/*\" and \"*/\"');\n        }\n        out += ' ' + tag.text.replace(/@/g, '\\\\@');\n    }\n    return out;\n}\nfunction serializeTags(tags) {\n    if (tags.length === 0)\n        return '';\n    var out = '*\\n';\n    try {\n        for (var tags_1 = __values(tags), tags_1_1 = tags_1.next(); !tags_1_1.done; tags_1_1 = tags_1.next()) {\n            var tag = tags_1_1.value;\n            out += ' *';\n            // If the tagToString is multi-line, insert \" * \" prefixes on subsequent lines.\n            out += tagToString(tag).replace(/\\n/g, '\\n * ');\n            out += '\\n';\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (tags_1_1 && !tags_1_1.done && (_a = tags_1.return)) _a.call(tags_1);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n    out += ' ';\n    return out;\n    var e_1, _a;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar STRIP_SRC_FILE_SUFFIXES = /(\\.ts|\\.d\\.ts|\\.js|\\.jsx|\\.tsx)$/;\nvar GENERATED_FILE = /\\.ngfactory\\.|\\.ngsummary\\./;\nvar JIT_SUMMARY_FILE = /\\.ngsummary\\./;\nvar JIT_SUMMARY_NAME = /NgSummary$/;\nfunction ngfactoryFilePath(filePath, forceSourceFile) {\n    if (forceSourceFile === void 0) { forceSourceFile = false; }\n    var urlWithSuffix = splitTypescriptSuffix(filePath, forceSourceFile);\n    return urlWithSuffix[0] + \".ngfactory\" + normalizeGenFileSuffix(urlWithSuffix[1]);\n}\nfunction stripGeneratedFileSuffix(filePath) {\n    return filePath.replace(GENERATED_FILE, '.');\n}\nfunction isGeneratedFile(filePath) {\n    return GENERATED_FILE.test(filePath);\n}\nfunction splitTypescriptSuffix(path$$1, forceSourceFile) {\n    if (forceSourceFile === void 0) { forceSourceFile = false; }\n    if (path$$1.endsWith('.d.ts')) {\n        return [path$$1.slice(0, -5), forceSourceFile ? '.ts' : '.d.ts'];\n    }\n    var lastDot = path$$1.lastIndexOf('.');\n    if (lastDot !== -1) {\n        return [path$$1.substring(0, lastDot), path$$1.substring(lastDot)];\n    }\n    return [path$$1, ''];\n}\nfunction normalizeGenFileSuffix(srcFileSuffix) {\n    return srcFileSuffix === '.tsx' ? '.ts' : srcFileSuffix;\n}\nfunction summaryFileName(fileName) {\n    var fileNameWithoutSuffix = fileName.replace(STRIP_SRC_FILE_SUFFIXES, '');\n    return fileNameWithoutSuffix + \".ngsummary.json\";\n}\nfunction summaryForJitFileName(fileName, forceSourceFile) {\n    if (forceSourceFile === void 0) { forceSourceFile = false; }\n    var urlWithSuffix = splitTypescriptSuffix(stripGeneratedFileSuffix(fileName), forceSourceFile);\n    return urlWithSuffix[0] + \".ngsummary\" + urlWithSuffix[1];\n}\nfunction stripSummaryForJitFileSuffix(filePath) {\n    return filePath.replace(JIT_SUMMARY_FILE, '.');\n}\nfunction summaryForJitName(symbolName) {\n    return symbolName + \"NgSummary\";\n}\nfunction stripSummaryForJitNameSuffix(symbolName) {\n    return symbolName.replace(JIT_SUMMARY_NAME, '');\n}\nvar LOWERED_SYMBOL = /\\u0275\\d+/;\nfunction isLoweredSymbol(name) {\n    return LOWERED_SYMBOL.test(name);\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar LifecycleHooks;\n(function (LifecycleHooks) {\n    LifecycleHooks[LifecycleHooks[\"OnInit\"] = 0] = \"OnInit\";\n    LifecycleHooks[LifecycleHooks[\"OnDestroy\"] = 1] = \"OnDestroy\";\n    LifecycleHooks[LifecycleHooks[\"DoCheck\"] = 2] = \"DoCheck\";\n    LifecycleHooks[LifecycleHooks[\"OnChanges\"] = 3] = \"OnChanges\";\n    LifecycleHooks[LifecycleHooks[\"AfterContentInit\"] = 4] = \"AfterContentInit\";\n    LifecycleHooks[LifecycleHooks[\"AfterContentChecked\"] = 5] = \"AfterContentChecked\";\n    LifecycleHooks[LifecycleHooks[\"AfterViewInit\"] = 6] = \"AfterViewInit\";\n    LifecycleHooks[LifecycleHooks[\"AfterViewChecked\"] = 7] = \"AfterViewChecked\";\n})(LifecycleHooks || (LifecycleHooks = {}));\nvar LIFECYCLE_HOOKS_VALUES = [\n    LifecycleHooks.OnInit, LifecycleHooks.OnDestroy, LifecycleHooks.DoCheck, LifecycleHooks.OnChanges,\n    LifecycleHooks.AfterContentInit, LifecycleHooks.AfterContentChecked, LifecycleHooks.AfterViewInit,\n    LifecycleHooks.AfterViewChecked\n];\nfunction hasLifecycleHook(reflector, hook, token) {\n    return reflector.hasLifecycleHook(token, getHookName(hook));\n}\nfunction getAllLifecycleHooks(reflector, token) {\n    return LIFECYCLE_HOOKS_VALUES.filter(function (hook) { return hasLifecycleHook(reflector, hook, token); });\n}\nfunction getHookName(hook) {\n    switch (hook) {\n        case LifecycleHooks.OnInit:\n            return 'ngOnInit';\n        case LifecycleHooks.OnDestroy:\n            return 'ngOnDestroy';\n        case LifecycleHooks.DoCheck:\n            return 'ngDoCheck';\n        case LifecycleHooks.OnChanges:\n            return 'ngOnChanges';\n        case LifecycleHooks.AfterContentInit:\n            return 'ngAfterContentInit';\n        case LifecycleHooks.AfterContentChecked:\n            return 'ngAfterContentChecked';\n        case LifecycleHooks.AfterViewInit:\n            return 'ngAfterViewInit';\n        case LifecycleHooks.AfterViewChecked:\n            return 'ngAfterViewChecked';\n    }\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar _SELECTOR_REGEXP = new RegExp('(\\\\:not\\\\()|' + //\":not(\"\n    '([-\\\\w]+)|' + // \"tag\"\n    '(?:\\\\.([-\\\\w]+))|' + // \".class\"\n    // \"-\" should appear first in the regexp below as FF31 parses \"[.-\\w]\" as a range\n    '(?:\\\\[([-.\\\\w*]+)(?:=([\\\"\\']?)([^\\\\]\\\"\\']*)\\\\5)?\\\\])|' + // \"[name]\", \"[name=value]\",\n    // \"[name=\"value\"]\",\n    // \"[name='value']\"\n    '(\\\\))|' + // \")\"\n    '(\\\\s*,\\\\s*)', // \",\"\n'g');\n/**\n * A css selector contains an element name,\n * css classes and attribute/value pairs with the purpose\n * of selecting subsets out of them.\n */\nvar CssSelector = /** @class */ (function () {\n    function CssSelector() {\n        this.element = null;\n        this.classNames = [];\n        /**\n         * The selectors are encoded in pairs where:\n         * - even locations are attribute names\n         * - odd locations are attribute values.\n         *\n         * Example:\n         * Selector: `[key1=value1][key2]` would parse to:\n         * ```\n         * ['key1', 'value1', 'key2', '']\n         * ```\n         */\n        this.attrs = [];\n        this.notSelectors = [];\n    }\n    CssSelector.parse = function (selector) {\n        var results = [];\n        var _addResult = function (res, cssSel) {\n            if (cssSel.notSelectors.length > 0 && !cssSel.element && cssSel.classNames.length == 0 &&\n                cssSel.attrs.length == 0) {\n                cssSel.element = '*';\n            }\n            res.push(cssSel);\n        };\n        var cssSelector = new CssSelector();\n        var match;\n        var current = cssSelector;\n        var inNot = false;\n        _SELECTOR_REGEXP.lastIndex = 0;\n        while (match = _SELECTOR_REGEXP.exec(selector)) {\n            if (match[1]) {\n                if (inNot) {\n                    throw new Error('Nesting :not is not allowed in a selector');\n                }\n                inNot = true;\n                current = new CssSelector();\n                cssSelector.notSelectors.push(current);\n            }\n            if (match[2]) {\n                current.setElement(match[2]);\n            }\n            if (match[3]) {\n                current.addClassName(match[3]);\n            }\n            if (match[4]) {\n                current.addAttribute(match[4], match[6]);\n            }\n            if (match[7]) {\n                inNot = false;\n                current = cssSelector;\n            }\n            if (match[8]) {\n                if (inNot) {\n                    throw new Error('Multiple selectors in :not are not supported');\n                }\n                _addResult(results, cssSelector);\n                cssSelector = current = new CssSelector();\n            }\n        }\n        _addResult(results, cssSelector);\n        return results;\n    };\n    CssSelector.prototype.isElementSelector = function () {\n        return this.hasElementSelector() && this.classNames.length == 0 && this.attrs.length == 0 &&\n            this.notSelectors.length === 0;\n    };\n    CssSelector.prototype.hasElementSelector = function () { return !!this.element; };\n    CssSelector.prototype.setElement = function (element) {\n        if (element === void 0) { element = null; }\n        this.element = element;\n    };\n    /** Gets a template string for an element that matches the selector. */\n    CssSelector.prototype.getMatchingElementTemplate = function () {\n        var tagName = this.element || 'div';\n        var classAttr = this.classNames.length > 0 ? \" class=\\\"\" + this.classNames.join(' ') + \"\\\"\" : '';\n        var attrs = '';\n        for (var i = 0; i < this.attrs.length; i += 2) {\n            var attrName = this.attrs[i];\n            var attrValue = this.attrs[i + 1] !== '' ? \"=\\\"\" + this.attrs[i + 1] + \"\\\"\" : '';\n            attrs += \" \" + attrName + attrValue;\n        }\n        return getHtmlTagDefinition(tagName).isVoid ? \"<\" + tagName + classAttr + attrs + \"/>\" :\n            \"<\" + tagName + classAttr + attrs + \"></\" + tagName + \">\";\n    };\n    CssSelector.prototype.getAttrs = function () {\n        var result = [];\n        if (this.classNames.length > 0) {\n            result.push('class', this.classNames.join(' '));\n        }\n        return result.concat(this.attrs);\n    };\n    CssSelector.prototype.addAttribute = function (name, value) {\n        if (value === void 0) { value = ''; }\n        this.attrs.push(name, value && value.toLowerCase() || '');\n    };\n    CssSelector.prototype.addClassName = function (name) { this.classNames.push(name.toLowerCase()); };\n    CssSelector.prototype.toString = function () {\n        var res = this.element || '';\n        if (this.classNames) {\n            this.classNames.forEach(function (klass) { return res += \".\" + klass; });\n        }\n        if (this.attrs) {\n            for (var i = 0; i < this.attrs.length; i += 2) {\n                var name_1 = this.attrs[i];\n                var value = this.attrs[i + 1];\n                res += \"[\" + name_1 + (value ? '=' + value : '') + \"]\";\n            }\n        }\n        this.notSelectors.forEach(function (notSelector) { return res += \":not(\" + notSelector + \")\"; });\n        return res;\n    };\n    return CssSelector;\n}());\n/**\n * Reads a list of CssSelectors and allows to calculate which ones\n * are contained in a given CssSelector.\n */\nvar SelectorMatcher = /** @class */ (function () {\n    function SelectorMatcher() {\n        this._elementMap = new Map();\n        this._elementPartialMap = new Map();\n        this._classMap = new Map();\n        this._classPartialMap = new Map();\n        this._attrValueMap = new Map();\n        this._attrValuePartialMap = new Map();\n        this._listContexts = [];\n    }\n    SelectorMatcher.createNotMatcher = function (notSelectors) {\n        var notMatcher = new SelectorMatcher();\n        notMatcher.addSelectables(notSelectors, null);\n        return notMatcher;\n    };\n    SelectorMatcher.prototype.addSelectables = function (cssSelectors, callbackCtxt) {\n        var listContext = null;\n        if (cssSelectors.length > 1) {\n            listContext = new SelectorListContext(cssSelectors);\n            this._listContexts.push(listContext);\n        }\n        for (var i = 0; i < cssSelectors.length; i++) {\n            this._addSelectable(cssSelectors[i], callbackCtxt, listContext);\n        }\n    };\n    /**\n     * Add an object that can be found later on by calling `match`.\n     * @param cssSelector A css selector\n     * @param callbackCtxt An opaque object that will be given to the callback of the `match` function\n     */\n    SelectorMatcher.prototype._addSelectable = function (cssSelector, callbackCtxt, listContext) {\n        var matcher = this;\n        var element = cssSelector.element;\n        var classNames = cssSelector.classNames;\n        var attrs = cssSelector.attrs;\n        var selectable = new SelectorContext(cssSelector, callbackCtxt, listContext);\n        if (element) {\n            var isTerminal = attrs.length === 0 && classNames.length === 0;\n            if (isTerminal) {\n                this._addTerminal(matcher._elementMap, element, selectable);\n            }\n            else {\n                matcher = this._addPartial(matcher._elementPartialMap, element);\n            }\n        }\n        if (classNames) {\n            for (var i = 0; i < classNames.length; i++) {\n                var isTerminal = attrs.length === 0 && i === classNames.length - 1;\n                var className = classNames[i];\n                if (isTerminal) {\n                    this._addTerminal(matcher._classMap, className, selectable);\n                }\n                else {\n                    matcher = this._addPartial(matcher._classPartialMap, className);\n                }\n            }\n        }\n        if (attrs) {\n            for (var i = 0; i < attrs.length; i += 2) {\n                var isTerminal = i === attrs.length - 2;\n                var name_2 = attrs[i];\n                var value = attrs[i + 1];\n                if (isTerminal) {\n                    var terminalMap = matcher._attrValueMap;\n                    var terminalValuesMap = terminalMap.get(name_2);\n                    if (!terminalValuesMap) {\n                        terminalValuesMap = new Map();\n                        terminalMap.set(name_2, terminalValuesMap);\n                    }\n                    this._addTerminal(terminalValuesMap, value, selectable);\n                }\n                else {\n                    var partialMap = matcher._attrValuePartialMap;\n                    var partialValuesMap = partialMap.get(name_2);\n                    if (!partialValuesMap) {\n                        partialValuesMap = new Map();\n                        partialMap.set(name_2, partialValuesMap);\n                    }\n                    matcher = this._addPartial(partialValuesMap, value);\n                }\n            }\n        }\n    };\n    SelectorMatcher.prototype._addTerminal = function (map, name, selectable) {\n        var terminalList = map.get(name);\n        if (!terminalList) {\n            terminalList = [];\n            map.set(name, terminalList);\n        }\n        terminalList.push(selectable);\n    };\n    SelectorMatcher.prototype._addPartial = function (map, name) {\n        var matcher = map.get(name);\n        if (!matcher) {\n            matcher = new SelectorMatcher();\n            map.set(name, matcher);\n        }\n        return matcher;\n    };\n    /**\n     * Find the objects that have been added via `addSelectable`\n     * whose css selector is contained in the given css selector.\n     * @param cssSelector A css selector\n     * @param matchedCallback This callback will be called with the object handed into `addSelectable`\n     * @return boolean true if a match was found\n    */\n    SelectorMatcher.prototype.match = function (cssSelector, matchedCallback) {\n        var result = false;\n        var element = cssSelector.element;\n        var classNames = cssSelector.classNames;\n        var attrs = cssSelector.attrs;\n        for (var i = 0; i < this._listContexts.length; i++) {\n            this._listContexts[i].alreadyMatched = false;\n        }\n        result = this._matchTerminal(this._elementMap, element, cssSelector, matchedCallback) || result;\n        result = this._matchPartial(this._elementPartialMap, element, cssSelector, matchedCallback) ||\n            result;\n        if (classNames) {\n            for (var i = 0; i < classNames.length; i++) {\n                var className = classNames[i];\n                result =\n                    this._matchTerminal(this._classMap, className, cssSelector, matchedCallback) || result;\n                result =\n                    this._matchPartial(this._classPartialMap, className, cssSelector, matchedCallback) ||\n                        result;\n            }\n        }\n        if (attrs) {\n            for (var i = 0; i < attrs.length; i += 2) {\n                var name_3 = attrs[i];\n                var value = attrs[i + 1];\n                var terminalValuesMap = this._attrValueMap.get(name_3);\n                if (value) {\n                    result =\n                        this._matchTerminal(terminalValuesMap, '', cssSelector, matchedCallback) || result;\n                }\n                result =\n                    this._matchTerminal(terminalValuesMap, value, cssSelector, matchedCallback) || result;\n                var partialValuesMap = this._attrValuePartialMap.get(name_3);\n                if (value) {\n                    result = this._matchPartial(partialValuesMap, '', cssSelector, matchedCallback) || result;\n                }\n                result =\n                    this._matchPartial(partialValuesMap, value, cssSelector, matchedCallback) || result;\n            }\n        }\n        return result;\n    };\n    /** @internal */\n    SelectorMatcher.prototype._matchTerminal = function (map, name, cssSelector, matchedCallback) {\n        if (!map || typeof name !== 'string') {\n            return false;\n        }\n        var selectables = map.get(name) || [];\n        var starSelectables = map.get('*');\n        if (starSelectables) {\n            selectables = selectables.concat(starSelectables);\n        }\n        if (selectables.length === 0) {\n            return false;\n        }\n        var selectable;\n        var result = false;\n        for (var i = 0; i < selectables.length; i++) {\n            selectable = selectables[i];\n            result = selectable.finalize(cssSelector, matchedCallback) || result;\n        }\n        return result;\n    };\n    /** @internal */\n    SelectorMatcher.prototype._matchPartial = function (map, name, cssSelector, matchedCallback) {\n        if (!map || typeof name !== 'string') {\n            return false;\n        }\n        var nestedSelector = map.get(name);\n        if (!nestedSelector) {\n            return false;\n        }\n        // TODO(perf): get rid of recursion and measure again\n        // TODO(perf): don't pass the whole selector into the recursion,\n        // but only the not processed parts\n        return nestedSelector.match(cssSelector, matchedCallback);\n    };\n    return SelectorMatcher;\n}());\nvar SelectorListContext = /** @class */ (function () {\n    function SelectorListContext(selectors) {\n        this.selectors = selectors;\n        this.alreadyMatched = false;\n    }\n    return SelectorListContext;\n}());\n// Store context to pass back selector and context when a selector is matched\nvar SelectorContext = /** @class */ (function () {\n    function SelectorContext(selector, cbContext, listContext) {\n        this.selector = selector;\n        this.cbContext = cbContext;\n        this.listContext = listContext;\n        this.notSelectors = selector.notSelectors;\n    }\n    SelectorContext.prototype.finalize = function (cssSelector, callback) {\n        var result = true;\n        if (this.notSelectors.length > 0 && (!this.listContext || !this.listContext.alreadyMatched)) {\n            var notMatcher = SelectorMatcher.createNotMatcher(this.notSelectors);\n            result = !notMatcher.match(cssSelector, null);\n        }\n        if (result && callback && (!this.listContext || !this.listContext.alreadyMatched)) {\n            if (this.listContext) {\n                this.listContext.alreadyMatched = true;\n            }\n            callback(this.selector, this.cbContext);\n        }\n        return result;\n    };\n    return SelectorContext;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar ERROR_COMPONENT_TYPE = 'ngComponentType';\n// Design notes:\n// - don't lazily create metadata:\n//   For some metadata, we need to do async work sometimes,\n//   so the user has to kick off this loading.\n//   But we want to report errors even when the async work is\n//   not required to check that the user would have been able\n//   to wait correctly.\nvar CompileMetadataResolver = /** @class */ (function () {\n    function CompileMetadataResolver(_config, _htmlParser, _ngModuleResolver, _directiveResolver, _pipeResolver, _summaryResolver, _schemaRegistry, _directiveNormalizer, _console, _staticSymbolCache, _reflector, _errorCollector) {\n        this._config = _config;\n        this._htmlParser = _htmlParser;\n        this._ngModuleResolver = _ngModuleResolver;\n        this._directiveResolver = _directiveResolver;\n        this._pipeResolver = _pipeResolver;\n        this._summaryResolver = _summaryResolver;\n        this._schemaRegistry = _schemaRegistry;\n        this._directiveNormalizer = _directiveNormalizer;\n        this._console = _console;\n        this._staticSymbolCache = _staticSymbolCache;\n        this._reflector = _reflector;\n        this._errorCollector = _errorCollector;\n        this._nonNormalizedDirectiveCache = new Map();\n        this._directiveCache = new Map();\n        this._summaryCache = new Map();\n        this._pipeCache = new Map();\n        this._ngModuleCache = new Map();\n        this._ngModuleOfTypes = new Map();\n        this._shallowModuleCache = new Map();\n    }\n    CompileMetadataResolver.prototype.getReflector = function () { return this._reflector; };\n    CompileMetadataResolver.prototype.clearCacheFor = function (type) {\n        var dirMeta = this._directiveCache.get(type);\n        this._directiveCache.delete(type);\n        this._nonNormalizedDirectiveCache.delete(type);\n        this._summaryCache.delete(type);\n        this._pipeCache.delete(type);\n        this._ngModuleOfTypes.delete(type);\n        // Clear all of the NgModule as they contain transitive information!\n        this._ngModuleCache.clear();\n        if (dirMeta) {\n            this._directiveNormalizer.clearCacheFor(dirMeta);\n        }\n    };\n    CompileMetadataResolver.prototype.clearCache = function () {\n        this._directiveCache.clear();\n        this._nonNormalizedDirectiveCache.clear();\n        this._summaryCache.clear();\n        this._pipeCache.clear();\n        this._ngModuleCache.clear();\n        this._ngModuleOfTypes.clear();\n        this._directiveNormalizer.clearCache();\n    };\n    CompileMetadataResolver.prototype._createProxyClass = function (baseType, name) {\n        var delegate = null;\n        var proxyClass = function () {\n            if (!delegate) {\n                throw new Error(\"Illegal state: Class \" + name + \" for type \" + stringify(baseType) + \" is not compiled yet!\");\n            }\n            return delegate.apply(this, arguments);\n        };\n        proxyClass.setDelegate = function (d) {\n            delegate = d;\n            proxyClass.prototype = d.prototype;\n        };\n        // Make stringify work correctly\n        proxyClass.overriddenName = name;\n        return proxyClass;\n    };\n    CompileMetadataResolver.prototype.getGeneratedClass = function (dirType, name) {\n        if (dirType instanceof StaticSymbol) {\n            return this._staticSymbolCache.get(ngfactoryFilePath(dirType.filePath), name);\n        }\n        else {\n            return this._createProxyClass(dirType, name);\n        }\n    };\n    CompileMetadataResolver.prototype.getComponentViewClass = function (dirType) {\n        return this.getGeneratedClass(dirType, viewClassName(dirType, 0));\n    };\n    CompileMetadataResolver.prototype.getHostComponentViewClass = function (dirType) {\n        return this.getGeneratedClass(dirType, hostViewClassName(dirType));\n    };\n    CompileMetadataResolver.prototype.getHostComponentType = function (dirType) {\n        var name = identifierName({ reference: dirType }) + \"_Host\";\n        if (dirType instanceof StaticSymbol) {\n            return this._staticSymbolCache.get(dirType.filePath, name);\n        }\n        else {\n            var HostClass = function HostClass() { };\n            HostClass.overriddenName = name;\n            return HostClass;\n        }\n    };\n    CompileMetadataResolver.prototype.getRendererType = function (dirType) {\n        if (dirType instanceof StaticSymbol) {\n            return this._staticSymbolCache.get(ngfactoryFilePath(dirType.filePath), rendererTypeName(dirType));\n        }\n        else {\n            // returning an object as proxy,\n            // that we fill later during runtime compilation.\n            return {};\n        }\n    };\n    CompileMetadataResolver.prototype.getComponentFactory = function (selector, dirType, inputs, outputs) {\n        if (dirType instanceof StaticSymbol) {\n            return this._staticSymbolCache.get(ngfactoryFilePath(dirType.filePath), componentFactoryName(dirType));\n        }\n        else {\n            var hostView = this.getHostComponentViewClass(dirType);\n            // Note: ngContentSelectors will be filled later once the template is\n            // loaded.\n            var createComponentFactory = this._reflector.resolveExternalReference(Identifiers.createComponentFactory);\n            return createComponentFactory(selector, dirType, hostView, inputs, outputs, []);\n        }\n    };\n    CompileMetadataResolver.prototype.initComponentFactory = function (factory, ngContentSelectors) {\n        if (!(factory instanceof StaticSymbol)) {\n            (_a = factory.ngContentSelectors).push.apply(_a, __spread(ngContentSelectors));\n        }\n        var _a;\n    };\n    CompileMetadataResolver.prototype._loadSummary = function (type, kind) {\n        var typeSummary = this._summaryCache.get(type);\n        if (!typeSummary) {\n            var summary = this._summaryResolver.resolveSummary(type);\n            typeSummary = summary ? summary.type : null;\n            this._summaryCache.set(type, typeSummary || null);\n        }\n        return typeSummary && typeSummary.summaryKind === kind ? typeSummary : null;\n    };\n    CompileMetadataResolver.prototype.getHostComponentMetadata = function (compMeta, hostViewType) {\n        var hostType = this.getHostComponentType(compMeta.type.reference);\n        if (!hostViewType) {\n            hostViewType = this.getHostComponentViewClass(hostType);\n        }\n        // Note: ! is ok here as this method should only be called with normalized directive\n        // metadata, which always fills in the selector.\n        var template = CssSelector.parse(compMeta.selector)[0].getMatchingElementTemplate();\n        var templateUrl = '';\n        var htmlAst = this._htmlParser.parse(template, templateUrl);\n        return CompileDirectiveMetadata.create({\n            isHost: true,\n            type: { reference: hostType, diDeps: [], lifecycleHooks: [] },\n            template: new CompileTemplateMetadata({\n                encapsulation: ViewEncapsulation.None,\n                template: template,\n                templateUrl: templateUrl,\n                htmlAst: htmlAst,\n                styles: [],\n                styleUrls: [],\n                ngContentSelectors: [],\n                animations: [],\n                isInline: true,\n                externalStylesheets: [],\n                interpolation: null,\n                preserveWhitespaces: false,\n            }),\n            exportAs: null,\n            changeDetection: ChangeDetectionStrategy.Default,\n            inputs: [],\n            outputs: [],\n            host: {},\n            isComponent: true,\n            selector: '*',\n            providers: [],\n            viewProviders: [],\n            queries: [],\n            guards: {},\n            viewQueries: [],\n            componentViewType: hostViewType,\n            rendererType: { id: '__Host__', encapsulation: ViewEncapsulation.None, styles: [], data: {} },\n            entryComponents: [],\n            componentFactory: null\n        });\n    };\n    CompileMetadataResolver.prototype.loadDirectiveMetadata = function (ngModuleType, directiveType, isSync) {\n        var _this = this;\n        if (this._directiveCache.has(directiveType)) {\n            return null;\n        }\n        directiveType = resolveForwardRef(directiveType);\n        var _a = this.getNonNormalizedDirectiveMetadata(directiveType), annotation = _a.annotation, metadata = _a.metadata;\n        var createDirectiveMetadata = function (templateMetadata) {\n            var normalizedDirMeta = new CompileDirectiveMetadata({\n                isHost: false,\n                type: metadata.type,\n                isComponent: metadata.isComponent,\n                selector: metadata.selector,\n                exportAs: metadata.exportAs,\n                changeDetection: metadata.changeDetection,\n                inputs: metadata.inputs,\n                outputs: metadata.outputs,\n                hostListeners: metadata.hostListeners,\n                hostProperties: metadata.hostProperties,\n                hostAttributes: metadata.hostAttributes,\n                providers: metadata.providers,\n                viewProviders: metadata.viewProviders,\n                queries: metadata.queries,\n                guards: metadata.guards,\n                viewQueries: metadata.viewQueries,\n                entryComponents: metadata.entryComponents,\n                componentViewType: metadata.componentViewType,\n                rendererType: metadata.rendererType,\n                componentFactory: metadata.componentFactory,\n                template: templateMetadata\n            });\n            if (templateMetadata) {\n                _this.initComponentFactory(metadata.componentFactory, templateMetadata.ngContentSelectors);\n            }\n            _this._directiveCache.set(directiveType, normalizedDirMeta);\n            _this._summaryCache.set(directiveType, normalizedDirMeta.toSummary());\n            return null;\n        };\n        if (metadata.isComponent) {\n            var template = metadata.template;\n            var templateMeta = this._directiveNormalizer.normalizeTemplate({\n                ngModuleType: ngModuleType,\n                componentType: directiveType,\n                moduleUrl: this._reflector.componentModuleUrl(directiveType, annotation),\n                encapsulation: template.encapsulation,\n                template: template.template,\n                templateUrl: template.templateUrl,\n                styles: template.styles,\n                styleUrls: template.styleUrls,\n                animations: template.animations,\n                interpolation: template.interpolation,\n                preserveWhitespaces: template.preserveWhitespaces\n            });\n            if (isPromise(templateMeta) && isSync) {\n                this._reportError(componentStillLoadingError(directiveType), directiveType);\n                return null;\n            }\n            return SyncAsync.then(templateMeta, createDirectiveMetadata);\n        }\n        else {\n            // directive\n            createDirectiveMetadata(null);\n            return null;\n        }\n    };\n    CompileMetadataResolver.prototype.getNonNormalizedDirectiveMetadata = function (directiveType) {\n        var _this = this;\n        directiveType = resolveForwardRef(directiveType);\n        if (!directiveType) {\n            return null;\n        }\n        var cacheEntry = this._nonNormalizedDirectiveCache.get(directiveType);\n        if (cacheEntry) {\n            return cacheEntry;\n        }\n        var dirMeta = this._directiveResolver.resolve(directiveType, false);\n        if (!dirMeta) {\n            return null;\n        }\n        var nonNormalizedTemplateMetadata = undefined;\n        if (createComponent.isTypeOf(dirMeta)) {\n            // component\n            var compMeta = dirMeta;\n            assertArrayOfStrings('styles', compMeta.styles);\n            assertArrayOfStrings('styleUrls', compMeta.styleUrls);\n            assertInterpolationSymbols('interpolation', compMeta.interpolation);\n            var animations = compMeta.animations;\n            nonNormalizedTemplateMetadata = new CompileTemplateMetadata({\n                encapsulation: noUndefined(compMeta.encapsulation),\n                template: noUndefined(compMeta.template),\n                templateUrl: noUndefined(compMeta.templateUrl),\n                htmlAst: null,\n                styles: compMeta.styles || [],\n                styleUrls: compMeta.styleUrls || [],\n                animations: animations || [],\n                interpolation: noUndefined(compMeta.interpolation),\n                isInline: !!compMeta.template,\n                externalStylesheets: [],\n                ngContentSelectors: [],\n                preserveWhitespaces: noUndefined(dirMeta.preserveWhitespaces),\n            });\n        }\n        var changeDetectionStrategy = null;\n        var viewProviders = [];\n        var entryComponentMetadata = [];\n        var selector = dirMeta.selector;\n        if (createComponent.isTypeOf(dirMeta)) {\n            // Component\n            var compMeta = dirMeta;\n            changeDetectionStrategy = compMeta.changeDetection;\n            if (compMeta.viewProviders) {\n                viewProviders = this._getProvidersMetadata(compMeta.viewProviders, entryComponentMetadata, \"viewProviders for \\\"\" + stringifyType(directiveType) + \"\\\"\", [], directiveType);\n            }\n            if (compMeta.entryComponents) {\n                entryComponentMetadata = flattenAndDedupeArray(compMeta.entryComponents)\n                    .map(function (type) { return _this._getEntryComponentMetadata(type); })\n                    .concat(entryComponentMetadata);\n            }\n            if (!selector) {\n                selector = this._schemaRegistry.getDefaultComponentElementName();\n            }\n        }\n        else {\n            // Directive\n            if (!selector) {\n                this._reportError(syntaxError(\"Directive \" + stringifyType(directiveType) + \" has no selector, please add it!\"), directiveType);\n                selector = 'error';\n            }\n        }\n        var providers = [];\n        if (dirMeta.providers != null) {\n            providers = this._getProvidersMetadata(dirMeta.providers, entryComponentMetadata, \"providers for \\\"\" + stringifyType(directiveType) + \"\\\"\", [], directiveType);\n        }\n        var queries = [];\n        var viewQueries = [];\n        if (dirMeta.queries != null) {\n            queries = this._getQueriesMetadata(dirMeta.queries, false, directiveType);\n            viewQueries = this._getQueriesMetadata(dirMeta.queries, true, directiveType);\n        }\n        var metadata = CompileDirectiveMetadata.create({\n            isHost: false,\n            selector: selector,\n            exportAs: noUndefined(dirMeta.exportAs),\n            isComponent: !!nonNormalizedTemplateMetadata,\n            type: this._getTypeMetadata(directiveType),\n            template: nonNormalizedTemplateMetadata,\n            changeDetection: changeDetectionStrategy,\n            inputs: dirMeta.inputs || [],\n            outputs: dirMeta.outputs || [],\n            host: dirMeta.host || {},\n            providers: providers || [],\n            viewProviders: viewProviders || [],\n            queries: queries || [],\n            guards: dirMeta.guards || {},\n            viewQueries: viewQueries || [],\n            entryComponents: entryComponentMetadata,\n            componentViewType: nonNormalizedTemplateMetadata ? this.getComponentViewClass(directiveType) :\n                null,\n            rendererType: nonNormalizedTemplateMetadata ? this.getRendererType(directiveType) : null,\n            componentFactory: null\n        });\n        if (nonNormalizedTemplateMetadata) {\n            metadata.componentFactory =\n                this.getComponentFactory(selector, directiveType, metadata.inputs, metadata.outputs);\n        }\n        cacheEntry = { metadata: metadata, annotation: dirMeta };\n        this._nonNormalizedDirectiveCache.set(directiveType, cacheEntry);\n        return cacheEntry;\n    };\n    /**\n     * Gets the metadata for the given directive.\n     * This assumes `loadNgModuleDirectiveAndPipeMetadata` has been called first.\n     */\n    CompileMetadataResolver.prototype.getDirectiveMetadata = function (directiveType) {\n        var dirMeta = this._directiveCache.get(directiveType);\n        if (!dirMeta) {\n            this._reportError(syntaxError(\"Illegal state: getDirectiveMetadata can only be called after loadNgModuleDirectiveAndPipeMetadata for a module that declares it. Directive \" + stringifyType(directiveType) + \".\"), directiveType);\n        }\n        return dirMeta;\n    };\n    CompileMetadataResolver.prototype.getDirectiveSummary = function (dirType) {\n        var dirSummary = this._loadSummary(dirType, CompileSummaryKind.Directive);\n        if (!dirSummary) {\n            this._reportError(syntaxError(\"Illegal state: Could not load the summary for directive \" + stringifyType(dirType) + \".\"), dirType);\n        }\n        return dirSummary;\n    };\n    CompileMetadataResolver.prototype.isDirective = function (type) {\n        return !!this._loadSummary(type, CompileSummaryKind.Directive) ||\n            this._directiveResolver.isDirective(type);\n    };\n    CompileMetadataResolver.prototype.isPipe = function (type) {\n        return !!this._loadSummary(type, CompileSummaryKind.Pipe) ||\n            this._pipeResolver.isPipe(type);\n    };\n    CompileMetadataResolver.prototype.isNgModule = function (type) {\n        return !!this._loadSummary(type, CompileSummaryKind.NgModule) ||\n            this._ngModuleResolver.isNgModule(type);\n    };\n    CompileMetadataResolver.prototype.getNgModuleSummary = function (moduleType, alreadyCollecting) {\n        if (alreadyCollecting === void 0) { alreadyCollecting = null; }\n        var moduleSummary = this._loadSummary(moduleType, CompileSummaryKind.NgModule);\n        if (!moduleSummary) {\n            var moduleMeta = this.getNgModuleMetadata(moduleType, false, alreadyCollecting);\n            moduleSummary = moduleMeta ? moduleMeta.toSummary() : null;\n            if (moduleSummary) {\n                this._summaryCache.set(moduleType, moduleSummary);\n            }\n        }\n        return moduleSummary;\n    };\n    /**\n     * Loads the declared directives and pipes of an NgModule.\n     */\n    CompileMetadataResolver.prototype.loadNgModuleDirectiveAndPipeMetadata = function (moduleType, isSync, throwIfNotFound) {\n        var _this = this;\n        if (throwIfNotFound === void 0) { throwIfNotFound = true; }\n        var ngModule = this.getNgModuleMetadata(moduleType, throwIfNotFound);\n        var loading = [];\n        if (ngModule) {\n            ngModule.declaredDirectives.forEach(function (id) {\n                var promise = _this.loadDirectiveMetadata(moduleType, id.reference, isSync);\n                if (promise) {\n                    loading.push(promise);\n                }\n            });\n            ngModule.declaredPipes.forEach(function (id) { return _this._loadPipeMetadata(id.reference); });\n        }\n        return Promise.all(loading);\n    };\n    CompileMetadataResolver.prototype.getShallowModuleMetadata = function (moduleType) {\n        var compileMeta = this._shallowModuleCache.get(moduleType);\n        if (compileMeta) {\n            return compileMeta;\n        }\n        var ngModuleMeta = findLast(this._reflector.shallowAnnotations(moduleType), createNgModule.isTypeOf);\n        compileMeta = {\n            type: this._getTypeMetadata(moduleType),\n            rawExports: ngModuleMeta.exports,\n            rawImports: ngModuleMeta.imports,\n            rawProviders: ngModuleMeta.providers,\n        };\n        this._shallowModuleCache.set(moduleType, compileMeta);\n        return compileMeta;\n    };\n    CompileMetadataResolver.prototype.getNgModuleMetadata = function (moduleType, throwIfNotFound, alreadyCollecting) {\n        var _this = this;\n        if (throwIfNotFound === void 0) { throwIfNotFound = true; }\n        if (alreadyCollecting === void 0) { alreadyCollecting = null; }\n        moduleType = resolveForwardRef(moduleType);\n        var compileMeta = this._ngModuleCache.get(moduleType);\n        if (compileMeta) {\n            return compileMeta;\n        }\n        var meta = this._ngModuleResolver.resolve(moduleType, throwIfNotFound);\n        if (!meta) {\n            return null;\n        }\n        var declaredDirectives = [];\n        var exportedNonModuleIdentifiers = [];\n        var declaredPipes = [];\n        var importedModules = [];\n        var exportedModules = [];\n        var providers = [];\n        var entryComponents = [];\n        var bootstrapComponents = [];\n        var schemas = [];\n        if (meta.imports) {\n            flattenAndDedupeArray(meta.imports).forEach(function (importedType) {\n                var importedModuleType = undefined;\n                if (isValidType(importedType)) {\n                    importedModuleType = importedType;\n                }\n                else if (importedType && importedType.ngModule) {\n                    var moduleWithProviders = importedType;\n                    importedModuleType = moduleWithProviders.ngModule;\n                    if (moduleWithProviders.providers) {\n                        providers.push.apply(providers, __spread(_this._getProvidersMetadata(moduleWithProviders.providers, entryComponents, \"provider for the NgModule '\" + stringifyType(importedModuleType) + \"'\", [], importedType)));\n                    }\n                }\n                if (importedModuleType) {\n                    if (_this._checkSelfImport(moduleType, importedModuleType))\n                        return;\n                    if (!alreadyCollecting)\n                        alreadyCollecting = new Set();\n                    if (alreadyCollecting.has(importedModuleType)) {\n                        _this._reportError(syntaxError(_this._getTypeDescriptor(importedModuleType) + \" '\" + stringifyType(importedType) + \"' is imported recursively by the module '\" + stringifyType(moduleType) + \"'.\"), moduleType);\n                        return;\n                    }\n                    alreadyCollecting.add(importedModuleType);\n                    var importedModuleSummary = _this.getNgModuleSummary(importedModuleType, alreadyCollecting);\n                    alreadyCollecting.delete(importedModuleType);\n                    if (!importedModuleSummary) {\n                        _this._reportError(syntaxError(\"Unexpected \" + _this._getTypeDescriptor(importedType) + \" '\" + stringifyType(importedType) + \"' imported by the module '\" + stringifyType(moduleType) + \"'. Please add a @NgModule annotation.\"), moduleType);\n                        return;\n                    }\n                    importedModules.push(importedModuleSummary);\n                }\n                else {\n                    _this._reportError(syntaxError(\"Unexpected value '\" + stringifyType(importedType) + \"' imported by the module '\" + stringifyType(moduleType) + \"'\"), moduleType);\n                    return;\n                }\n            });\n        }\n        if (meta.exports) {\n            flattenAndDedupeArray(meta.exports).forEach(function (exportedType) {\n                if (!isValidType(exportedType)) {\n                    _this._reportError(syntaxError(\"Unexpected value '\" + stringifyType(exportedType) + \"' exported by the module '\" + stringifyType(moduleType) + \"'\"), moduleType);\n                    return;\n                }\n                if (!alreadyCollecting)\n                    alreadyCollecting = new Set();\n                if (alreadyCollecting.has(exportedType)) {\n                    _this._reportError(syntaxError(_this._getTypeDescriptor(exportedType) + \" '\" + stringify(exportedType) + \"' is exported recursively by the module '\" + stringifyType(moduleType) + \"'\"), moduleType);\n                    return;\n                }\n                alreadyCollecting.add(exportedType);\n                var exportedModuleSummary = _this.getNgModuleSummary(exportedType, alreadyCollecting);\n                alreadyCollecting.delete(exportedType);\n                if (exportedModuleSummary) {\n                    exportedModules.push(exportedModuleSummary);\n                }\n                else {\n                    exportedNonModuleIdentifiers.push(_this._getIdentifierMetadata(exportedType));\n                }\n            });\n        }\n        // Note: This will be modified later, so we rely on\n        // getting a new instance every time!\n        var transitiveModule = this._getTransitiveNgModuleMetadata(importedModules, exportedModules);\n        if (meta.declarations) {\n            flattenAndDedupeArray(meta.declarations).forEach(function (declaredType) {\n                if (!isValidType(declaredType)) {\n                    _this._reportError(syntaxError(\"Unexpected value '\" + stringifyType(declaredType) + \"' declared by the module '\" + stringifyType(moduleType) + \"'\"), moduleType);\n                    return;\n                }\n                var declaredIdentifier = _this._getIdentifierMetadata(declaredType);\n                if (_this.isDirective(declaredType)) {\n                    transitiveModule.addDirective(declaredIdentifier);\n                    declaredDirectives.push(declaredIdentifier);\n                    _this._addTypeToModule(declaredType, moduleType);\n                }\n                else if (_this.isPipe(declaredType)) {\n                    transitiveModule.addPipe(declaredIdentifier);\n                    transitiveModule.pipes.push(declaredIdentifier);\n                    declaredPipes.push(declaredIdentifier);\n                    _this._addTypeToModule(declaredType, moduleType);\n                }\n                else {\n                    _this._reportError(syntaxError(\"Unexpected \" + _this._getTypeDescriptor(declaredType) + \" '\" + stringifyType(declaredType) + \"' declared by the module '\" + stringifyType(moduleType) + \"'. Please add a @Pipe/@Directive/@Component annotation.\"), moduleType);\n                    return;\n                }\n            });\n        }\n        var exportedDirectives = [];\n        var exportedPipes = [];\n        exportedNonModuleIdentifiers.forEach(function (exportedId) {\n            if (transitiveModule.directivesSet.has(exportedId.reference)) {\n                exportedDirectives.push(exportedId);\n                transitiveModule.addExportedDirective(exportedId);\n            }\n            else if (transitiveModule.pipesSet.has(exportedId.reference)) {\n                exportedPipes.push(exportedId);\n                transitiveModule.addExportedPipe(exportedId);\n            }\n            else {\n                _this._reportError(syntaxError(\"Can't export \" + _this._getTypeDescriptor(exportedId.reference) + \" \" + stringifyType(exportedId.reference) + \" from \" + stringifyType(moduleType) + \" as it was neither declared nor imported!\"), moduleType);\n                return;\n            }\n        });\n        // The providers of the module have to go last\n        // so that they overwrite any other provider we already added.\n        if (meta.providers) {\n            providers.push.apply(providers, __spread(this._getProvidersMetadata(meta.providers, entryComponents, \"provider for the NgModule '\" + stringifyType(moduleType) + \"'\", [], moduleType)));\n        }\n        if (meta.entryComponents) {\n            entryComponents.push.apply(entryComponents, __spread(flattenAndDedupeArray(meta.entryComponents)\n                .map(function (type) { return _this._getEntryComponentMetadata(type); })));\n        }\n        if (meta.bootstrap) {\n            flattenAndDedupeArray(meta.bootstrap).forEach(function (type) {\n                if (!isValidType(type)) {\n                    _this._reportError(syntaxError(\"Unexpected value '\" + stringifyType(type) + \"' used in the bootstrap property of module '\" + stringifyType(moduleType) + \"'\"), moduleType);\n                    return;\n                }\n                bootstrapComponents.push(_this._getIdentifierMetadata(type));\n            });\n        }\n        entryComponents.push.apply(entryComponents, __spread(bootstrapComponents.map(function (type) { return _this._getEntryComponentMetadata(type.reference); })));\n        if (meta.schemas) {\n            schemas.push.apply(schemas, __spread(flattenAndDedupeArray(meta.schemas)));\n        }\n        compileMeta = new CompileNgModuleMetadata({\n            type: this._getTypeMetadata(moduleType),\n            providers: providers,\n            entryComponents: entryComponents,\n            bootstrapComponents: bootstrapComponents,\n            schemas: schemas,\n            declaredDirectives: declaredDirectives,\n            exportedDirectives: exportedDirectives,\n            declaredPipes: declaredPipes,\n            exportedPipes: exportedPipes,\n            importedModules: importedModules,\n            exportedModules: exportedModules,\n            transitiveModule: transitiveModule,\n            id: meta.id || null,\n        });\n        entryComponents.forEach(function (id) { return transitiveModule.addEntryComponent(id); });\n        providers.forEach(function (provider) { return transitiveModule.addProvider(provider, compileMeta.type); });\n        transitiveModule.addModule(compileMeta.type);\n        this._ngModuleCache.set(moduleType, compileMeta);\n        return compileMeta;\n    };\n    CompileMetadataResolver.prototype._checkSelfImport = function (moduleType, importedModuleType) {\n        if (moduleType === importedModuleType) {\n            this._reportError(syntaxError(\"'\" + stringifyType(moduleType) + \"' module can't import itself\"), moduleType);\n            return true;\n        }\n        return false;\n    };\n    CompileMetadataResolver.prototype._getTypeDescriptor = function (type) {\n        if (isValidType(type)) {\n            if (this.isDirective(type)) {\n                return 'directive';\n            }\n            if (this.isPipe(type)) {\n                return 'pipe';\n            }\n            if (this.isNgModule(type)) {\n                return 'module';\n            }\n        }\n        if (type.provide) {\n            return 'provider';\n        }\n        return 'value';\n    };\n    CompileMetadataResolver.prototype._addTypeToModule = function (type, moduleType) {\n        var oldModule = this._ngModuleOfTypes.get(type);\n        if (oldModule && oldModule !== moduleType) {\n            this._reportError(syntaxError(\"Type \" + stringifyType(type) + \" is part of the declarations of 2 modules: \" + stringifyType(oldModule) + \" and \" + stringifyType(moduleType) + \"! \" +\n                (\"Please consider moving \" + stringifyType(type) + \" to a higher module that imports \" + stringifyType(oldModule) + \" and \" + stringifyType(moduleType) + \". \") +\n                (\"You can also create a new NgModule that exports and includes \" + stringifyType(type) + \" then import that NgModule in \" + stringifyType(oldModule) + \" and \" + stringifyType(moduleType) + \".\")), moduleType);\n            return;\n        }\n        this._ngModuleOfTypes.set(type, moduleType);\n    };\n    CompileMetadataResolver.prototype._getTransitiveNgModuleMetadata = function (importedModules, exportedModules) {\n        // collect `providers` / `entryComponents` from all imported and all exported modules\n        var result = new TransitiveCompileNgModuleMetadata();\n        var modulesByToken = new Map();\n        importedModules.concat(exportedModules).forEach(function (modSummary) {\n            modSummary.modules.forEach(function (mod) { return result.addModule(mod); });\n            modSummary.entryComponents.forEach(function (comp) { return result.addEntryComponent(comp); });\n            var addedTokens = new Set();\n            modSummary.providers.forEach(function (entry) {\n                var tokenRef = tokenReference(entry.provider.token);\n                var prevModules = modulesByToken.get(tokenRef);\n                if (!prevModules) {\n                    prevModules = new Set();\n                    modulesByToken.set(tokenRef, prevModules);\n                }\n                var moduleRef = entry.module.reference;\n                // Note: the providers of one module may still contain multiple providers\n                // per token (e.g. for multi providers), and we need to preserve these.\n                if (addedTokens.has(tokenRef) || !prevModules.has(moduleRef)) {\n                    prevModules.add(moduleRef);\n                    addedTokens.add(tokenRef);\n                    result.addProvider(entry.provider, entry.module);\n                }\n            });\n        });\n        exportedModules.forEach(function (modSummary) {\n            modSummary.exportedDirectives.forEach(function (id) { return result.addExportedDirective(id); });\n            modSummary.exportedPipes.forEach(function (id) { return result.addExportedPipe(id); });\n        });\n        importedModules.forEach(function (modSummary) {\n            modSummary.exportedDirectives.forEach(function (id) { return result.addDirective(id); });\n            modSummary.exportedPipes.forEach(function (id) { return result.addPipe(id); });\n        });\n        return result;\n    };\n    CompileMetadataResolver.prototype._getIdentifierMetadata = function (type) {\n        type = resolveForwardRef(type);\n        return { reference: type };\n    };\n    CompileMetadataResolver.prototype.isInjectable = function (type) {\n        var annotations = this._reflector.tryAnnotations(type);\n        return annotations.some(function (ann) { return createInjectable.isTypeOf(ann); });\n    };\n    CompileMetadataResolver.prototype.getInjectableSummary = function (type) {\n        return {\n            summaryKind: CompileSummaryKind.Injectable,\n            type: this._getTypeMetadata(type, null, false)\n        };\n    };\n    CompileMetadataResolver.prototype.getInjectableMetadata = function (type, dependencies, throwOnUnknownDeps) {\n        if (dependencies === void 0) { dependencies = null; }\n        if (throwOnUnknownDeps === void 0) { throwOnUnknownDeps = true; }\n        var typeSummary = this._loadSummary(type, CompileSummaryKind.Injectable);\n        var typeMetadata = typeSummary ?\n            typeSummary.type :\n            this._getTypeMetadata(type, dependencies, throwOnUnknownDeps);\n        var annotations = this._reflector.annotations(type).filter(function (ann) { return createInjectable.isTypeOf(ann); });\n        if (annotations.length === 0) {\n            return null;\n        }\n        var meta = annotations[annotations.length - 1];\n        return {\n            symbol: type,\n            type: typeMetadata,\n            providedIn: meta.providedIn,\n            useValue: meta.useValue,\n            useClass: meta.useClass,\n            useExisting: meta.useExisting,\n            useFactory: meta.useFactory,\n            deps: meta.deps,\n        };\n    };\n    CompileMetadataResolver.prototype._getTypeMetadata = function (type, dependencies, throwOnUnknownDeps) {\n        if (dependencies === void 0) { dependencies = null; }\n        if (throwOnUnknownDeps === void 0) { throwOnUnknownDeps = true; }\n        var identifier = this._getIdentifierMetadata(type);\n        return {\n            reference: identifier.reference,\n            diDeps: this._getDependenciesMetadata(identifier.reference, dependencies, throwOnUnknownDeps),\n            lifecycleHooks: getAllLifecycleHooks(this._reflector, identifier.reference),\n        };\n    };\n    CompileMetadataResolver.prototype._getFactoryMetadata = function (factory, dependencies) {\n        if (dependencies === void 0) { dependencies = null; }\n        factory = resolveForwardRef(factory);\n        return { reference: factory, diDeps: this._getDependenciesMetadata(factory, dependencies) };\n    };\n    /**\n     * Gets the metadata for the given pipe.\n     * This assumes `loadNgModuleDirectiveAndPipeMetadata` has been called first.\n     */\n    CompileMetadataResolver.prototype.getPipeMetadata = function (pipeType) {\n        var pipeMeta = this._pipeCache.get(pipeType);\n        if (!pipeMeta) {\n            this._reportError(syntaxError(\"Illegal state: getPipeMetadata can only be called after loadNgModuleDirectiveAndPipeMetadata for a module that declares it. Pipe \" + stringifyType(pipeType) + \".\"), pipeType);\n        }\n        return pipeMeta || null;\n    };\n    CompileMetadataResolver.prototype.getPipeSummary = function (pipeType) {\n        var pipeSummary = this._loadSummary(pipeType, CompileSummaryKind.Pipe);\n        if (!pipeSummary) {\n            this._reportError(syntaxError(\"Illegal state: Could not load the summary for pipe \" + stringifyType(pipeType) + \".\"), pipeType);\n        }\n        return pipeSummary;\n    };\n    CompileMetadataResolver.prototype.getOrLoadPipeMetadata = function (pipeType) {\n        var pipeMeta = this._pipeCache.get(pipeType);\n        if (!pipeMeta) {\n            pipeMeta = this._loadPipeMetadata(pipeType);\n        }\n        return pipeMeta;\n    };\n    CompileMetadataResolver.prototype._loadPipeMetadata = function (pipeType) {\n        pipeType = resolveForwardRef(pipeType);\n        var pipeAnnotation = this._pipeResolver.resolve(pipeType);\n        var pipeMeta = new CompilePipeMetadata({\n            type: this._getTypeMetadata(pipeType),\n            name: pipeAnnotation.name,\n            pure: !!pipeAnnotation.pure\n        });\n        this._pipeCache.set(pipeType, pipeMeta);\n        this._summaryCache.set(pipeType, pipeMeta.toSummary());\n        return pipeMeta;\n    };\n    CompileMetadataResolver.prototype._getDependenciesMetadata = function (typeOrFunc, dependencies, throwOnUnknownDeps) {\n        var _this = this;\n        if (throwOnUnknownDeps === void 0) { throwOnUnknownDeps = true; }\n        var hasUnknownDeps = false;\n        var params = dependencies || this._reflector.parameters(typeOrFunc) || [];\n        var dependenciesMetadata = params.map(function (param) {\n            var isAttribute = false;\n            var isHost = false;\n            var isSelf = false;\n            var isSkipSelf = false;\n            var isOptional = false;\n            var token = null;\n            if (Array.isArray(param)) {\n                param.forEach(function (paramEntry) {\n                    if (createHost.isTypeOf(paramEntry)) {\n                        isHost = true;\n                    }\n                    else if (createSelf.isTypeOf(paramEntry)) {\n                        isSelf = true;\n                    }\n                    else if (createSkipSelf.isTypeOf(paramEntry)) {\n                        isSkipSelf = true;\n                    }\n                    else if (createOptional.isTypeOf(paramEntry)) {\n                        isOptional = true;\n                    }\n                    else if (createAttribute.isTypeOf(paramEntry)) {\n                        isAttribute = true;\n                        token = paramEntry.attributeName;\n                    }\n                    else if (createInject.isTypeOf(paramEntry)) {\n                        token = paramEntry.token;\n                    }\n                    else if (createInjectionToken.isTypeOf(paramEntry) || paramEntry instanceof StaticSymbol) {\n                        token = paramEntry;\n                    }\n                    else if (isValidType(paramEntry) && token == null) {\n                        token = paramEntry;\n                    }\n                });\n            }\n            else {\n                token = param;\n            }\n            if (token == null) {\n                hasUnknownDeps = true;\n                return null;\n            }\n            return {\n                isAttribute: isAttribute,\n                isHost: isHost,\n                isSelf: isSelf,\n                isSkipSelf: isSkipSelf,\n                isOptional: isOptional,\n                token: _this._getTokenMetadata(token)\n            };\n        });\n        if (hasUnknownDeps) {\n            var depsTokens = dependenciesMetadata.map(function (dep) { return dep ? stringifyType(dep.token) : '?'; }).join(', ');\n            var message = \"Can't resolve all parameters for \" + stringifyType(typeOrFunc) + \": (\" + depsTokens + \").\";\n            if (throwOnUnknownDeps || this._config.strictInjectionParameters) {\n                this._reportError(syntaxError(message), typeOrFunc);\n            }\n            else {\n                this._console.warn(\"Warning: \" + message + \" This will become an error in Angular v6.x\");\n            }\n        }\n        return dependenciesMetadata;\n    };\n    CompileMetadataResolver.prototype._getTokenMetadata = function (token) {\n        token = resolveForwardRef(token);\n        var compileToken;\n        if (typeof token === 'string') {\n            compileToken = { value: token };\n        }\n        else {\n            compileToken = { identifier: { reference: token } };\n        }\n        return compileToken;\n    };\n    CompileMetadataResolver.prototype._getProvidersMetadata = function (providers, targetEntryComponents, debugInfo, compileProviders, type) {\n        var _this = this;\n        if (compileProviders === void 0) { compileProviders = []; }\n        providers.forEach(function (provider, providerIdx) {\n            if (Array.isArray(provider)) {\n                _this._getProvidersMetadata(provider, targetEntryComponents, debugInfo, compileProviders);\n            }\n            else {\n                provider = resolveForwardRef(provider);\n                var providerMeta = undefined;\n                if (provider && typeof provider === 'object' && provider.hasOwnProperty('provide')) {\n                    _this._validateProvider(provider);\n                    providerMeta = new ProviderMeta(provider.provide, provider);\n                }\n                else if (isValidType(provider)) {\n                    providerMeta = new ProviderMeta(provider, { useClass: provider });\n                }\n                else if (provider === void 0) {\n                    _this._reportError(syntaxError(\"Encountered undefined provider! Usually this means you have a circular dependencies (might be caused by using 'barrel' index.ts files.\"));\n                    return;\n                }\n                else {\n                    var providersInfo = providers.reduce(function (soFar, seenProvider, seenProviderIdx) {\n                        if (seenProviderIdx < providerIdx) {\n                            soFar.push(\"\" + stringifyType(seenProvider));\n                        }\n                        else if (seenProviderIdx == providerIdx) {\n                            soFar.push(\"?\" + stringifyType(seenProvider) + \"?\");\n                        }\n                        else if (seenProviderIdx == providerIdx + 1) {\n                            soFar.push('...');\n                        }\n                        return soFar;\n                    }, [])\n                        .join(', ');\n                    _this._reportError(syntaxError(\"Invalid \" + (debugInfo ? debugInfo : 'provider') + \" - only instances of Provider and Type are allowed, got: [\" + providersInfo + \"]\"), type);\n                    return;\n                }\n                if (providerMeta.token ===\n                    _this._reflector.resolveExternalReference(Identifiers.ANALYZE_FOR_ENTRY_COMPONENTS)) {\n                    targetEntryComponents.push.apply(targetEntryComponents, __spread(_this._getEntryComponentsFromProvider(providerMeta, type)));\n                }\n                else {\n                    compileProviders.push(_this.getProviderMetadata(providerMeta));\n                }\n            }\n        });\n        return compileProviders;\n    };\n    CompileMetadataResolver.prototype._validateProvider = function (provider) {\n        if (provider.hasOwnProperty('useClass') && provider.useClass == null) {\n            this._reportError(syntaxError(\"Invalid provider for \" + stringifyType(provider.provide) + \". useClass cannot be \" + provider.useClass + \".\\n           Usually it happens when:\\n           1. There's a circular dependency (might be caused by using index.ts (barrel) files).\\n           2. Class was used before it was declared. Use forwardRef in this case.\"));\n        }\n    };\n    CompileMetadataResolver.prototype._getEntryComponentsFromProvider = function (provider, type) {\n        var _this = this;\n        var components = [];\n        var collectedIdentifiers = [];\n        if (provider.useFactory || provider.useExisting || provider.useClass) {\n            this._reportError(syntaxError(\"The ANALYZE_FOR_ENTRY_COMPONENTS token only supports useValue!\"), type);\n            return [];\n        }\n        if (!provider.multi) {\n            this._reportError(syntaxError(\"The ANALYZE_FOR_ENTRY_COMPONENTS token only supports 'multi = true'!\"), type);\n            return [];\n        }\n        extractIdentifiers(provider.useValue, collectedIdentifiers);\n        collectedIdentifiers.forEach(function (identifier) {\n            var entry = _this._getEntryComponentMetadata(identifier.reference, false);\n            if (entry) {\n                components.push(entry);\n            }\n        });\n        return components;\n    };\n    CompileMetadataResolver.prototype._getEntryComponentMetadata = function (dirType, throwIfNotFound) {\n        if (throwIfNotFound === void 0) { throwIfNotFound = true; }\n        var dirMeta = this.getNonNormalizedDirectiveMetadata(dirType);\n        if (dirMeta && dirMeta.metadata.isComponent) {\n            return { componentType: dirType, componentFactory: dirMeta.metadata.componentFactory };\n        }\n        var dirSummary = this._loadSummary(dirType, CompileSummaryKind.Directive);\n        if (dirSummary && dirSummary.isComponent) {\n            return { componentType: dirType, componentFactory: dirSummary.componentFactory };\n        }\n        if (throwIfNotFound) {\n            throw syntaxError(dirType.name + \" cannot be used as an entry component.\");\n        }\n        return null;\n    };\n    CompileMetadataResolver.prototype._getInjectableTypeMetadata = function (type, dependencies) {\n        if (dependencies === void 0) { dependencies = null; }\n        var typeSummary = this._loadSummary(type, CompileSummaryKind.Injectable);\n        if (typeSummary) {\n            return typeSummary.type;\n        }\n        return this._getTypeMetadata(type, dependencies);\n    };\n    CompileMetadataResolver.prototype.getProviderMetadata = function (provider) {\n        var compileDeps = undefined;\n        var compileTypeMetadata = null;\n        var compileFactoryMetadata = null;\n        var token = this._getTokenMetadata(provider.token);\n        if (provider.useClass) {\n            compileTypeMetadata =\n                this._getInjectableTypeMetadata(provider.useClass, provider.dependencies);\n            compileDeps = compileTypeMetadata.diDeps;\n            if (provider.token === provider.useClass) {\n                // use the compileTypeMetadata as it contains information about lifecycleHooks...\n                token = { identifier: compileTypeMetadata };\n            }\n        }\n        else if (provider.useFactory) {\n            compileFactoryMetadata = this._getFactoryMetadata(provider.useFactory, provider.dependencies);\n            compileDeps = compileFactoryMetadata.diDeps;\n        }\n        return {\n            token: token,\n            useClass: compileTypeMetadata,\n            useValue: provider.useValue,\n            useFactory: compileFactoryMetadata,\n            useExisting: provider.useExisting ? this._getTokenMetadata(provider.useExisting) : undefined,\n            deps: compileDeps,\n            multi: provider.multi\n        };\n    };\n    CompileMetadataResolver.prototype._getQueriesMetadata = function (queries, isViewQuery, directiveType) {\n        var _this = this;\n        var res = [];\n        Object.keys(queries).forEach(function (propertyName) {\n            var query = queries[propertyName];\n            if (query.isViewQuery === isViewQuery) {\n                res.push(_this._getQueryMetadata(query, propertyName, directiveType));\n            }\n        });\n        return res;\n    };\n    CompileMetadataResolver.prototype._queryVarBindings = function (selector) { return selector.split(/\\s*,\\s*/); };\n    CompileMetadataResolver.prototype._getQueryMetadata = function (q, propertyName, typeOrFunc) {\n        var _this = this;\n        var selectors;\n        if (typeof q.selector === 'string') {\n            selectors =\n                this._queryVarBindings(q.selector).map(function (varName) { return _this._getTokenMetadata(varName); });\n        }\n        else {\n            if (!q.selector) {\n                this._reportError(syntaxError(\"Can't construct a query for the property \\\"\" + propertyName + \"\\\" of \\\"\" + stringifyType(typeOrFunc) + \"\\\" since the query selector wasn't defined.\"), typeOrFunc);\n                selectors = [];\n            }\n            else {\n                selectors = [this._getTokenMetadata(q.selector)];\n            }\n        }\n        return {\n            selectors: selectors,\n            first: q.first,\n            descendants: q.descendants, propertyName: propertyName,\n            read: q.read ? this._getTokenMetadata(q.read) : null\n        };\n    };\n    CompileMetadataResolver.prototype._reportError = function (error$$1, type, otherType) {\n        if (this._errorCollector) {\n            this._errorCollector(error$$1, type);\n            if (otherType) {\n                this._errorCollector(error$$1, otherType);\n            }\n        }\n        else {\n            throw error$$1;\n        }\n    };\n    return CompileMetadataResolver;\n}());\nfunction flattenArray(tree, out) {\n    if (out === void 0) { out = []; }\n    if (tree) {\n        for (var i = 0; i < tree.length; i++) {\n            var item = resolveForwardRef(tree[i]);\n            if (Array.isArray(item)) {\n                flattenArray(item, out);\n            }\n            else {\n                out.push(item);\n            }\n        }\n    }\n    return out;\n}\nfunction dedupeArray(array) {\n    if (array) {\n        return Array.from(new Set(array));\n    }\n    return [];\n}\nfunction flattenAndDedupeArray(tree) {\n    return dedupeArray(flattenArray(tree));\n}\nfunction isValidType(value) {\n    return (value instanceof StaticSymbol) || (value instanceof Type);\n}\nfunction extractIdentifiers(value, targetIdentifiers) {\n    visitValue(value, new _CompileValueConverter(), targetIdentifiers);\n}\nvar _CompileValueConverter = /** @class */ (function (_super) {\n    __extends(_CompileValueConverter, _super);\n    function _CompileValueConverter() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    _CompileValueConverter.prototype.visitOther = function (value, targetIdentifiers) {\n        targetIdentifiers.push({ reference: value });\n    };\n    return _CompileValueConverter;\n}(ValueTransformer));\nfunction stringifyType(type) {\n    if (type instanceof StaticSymbol) {\n        return type.name + \" in \" + type.filePath;\n    }\n    else {\n        return stringify(type);\n    }\n}\n/**\n * Indicates that a component is still being loaded in a synchronous compile.\n */\nfunction componentStillLoadingError(compType) {\n    var error$$1 = Error(\"Can't compile synchronously as \" + stringify(compType) + \" is still being loaded!\");\n    error$$1[ERROR_COMPONENT_TYPE] = compType;\n    return error$$1;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar ProviderError = /** @class */ (function (_super) {\n    __extends(ProviderError, _super);\n    function ProviderError(message, span) {\n        return _super.call(this, span, message) || this;\n    }\n    return ProviderError;\n}(ParseError));\nvar ProviderViewContext = /** @class */ (function () {\n    function ProviderViewContext(reflector, component) {\n        var _this = this;\n        this.reflector = reflector;\n        this.component = component;\n        this.errors = [];\n        this.viewQueries = _getViewQueries(component);\n        this.viewProviders = new Map();\n        component.viewProviders.forEach(function (provider) {\n            if (_this.viewProviders.get(tokenReference(provider.token)) == null) {\n                _this.viewProviders.set(tokenReference(provider.token), true);\n            }\n        });\n    }\n    return ProviderViewContext;\n}());\nvar ProviderElementContext = /** @class */ (function () {\n    function ProviderElementContext(viewContext, _parent, _isViewRoot, _directiveAsts, attrs, refs, isTemplate, contentQueryStartId, _sourceSpan) {\n        var _this = this;\n        this.viewContext = viewContext;\n        this._parent = _parent;\n        this._isViewRoot = _isViewRoot;\n        this._directiveAsts = _directiveAsts;\n        this._sourceSpan = _sourceSpan;\n        this._transformedProviders = new Map();\n        this._seenProviders = new Map();\n        this._queriedTokens = new Map();\n        this.transformedHasViewContainer = false;\n        this._attrs = {};\n        attrs.forEach(function (attrAst) { return _this._attrs[attrAst.name] = attrAst.value; });\n        var directivesMeta = _directiveAsts.map(function (directiveAst) { return directiveAst.directive; });\n        this._allProviders =\n            _resolveProvidersFromDirectives(directivesMeta, _sourceSpan, viewContext.errors);\n        this._contentQueries = _getContentQueries(contentQueryStartId, directivesMeta);\n        Array.from(this._allProviders.values()).forEach(function (provider) {\n            _this._addQueryReadsTo(provider.token, provider.token, _this._queriedTokens);\n        });\n        if (isTemplate) {\n            var templateRefId = createTokenForExternalReference(this.viewContext.reflector, Identifiers.TemplateRef);\n            this._addQueryReadsTo(templateRefId, templateRefId, this._queriedTokens);\n        }\n        refs.forEach(function (refAst) {\n            var defaultQueryValue = refAst.value ||\n                createTokenForExternalReference(_this.viewContext.reflector, Identifiers.ElementRef);\n            _this._addQueryReadsTo({ value: refAst.name }, defaultQueryValue, _this._queriedTokens);\n        });\n        if (this._queriedTokens.get(this.viewContext.reflector.resolveExternalReference(Identifiers.ViewContainerRef))) {\n            this.transformedHasViewContainer = true;\n        }\n        // create the providers that we know are eager first\n        Array.from(this._allProviders.values()).forEach(function (provider) {\n            var eager = provider.eager || _this._queriedTokens.get(tokenReference(provider.token));\n            if (eager) {\n                _this._getOrCreateLocalProvider(provider.providerType, provider.token, true);\n            }\n        });\n    }\n    ProviderElementContext.prototype.afterElement = function () {\n        var _this = this;\n        // collect lazy providers\n        Array.from(this._allProviders.values()).forEach(function (provider) {\n            _this._getOrCreateLocalProvider(provider.providerType, provider.token, false);\n        });\n    };\n    Object.defineProperty(ProviderElementContext.prototype, \"transformProviders\", {\n        get: function () {\n            // Note: Maps keep their insertion order.\n            var lazyProviders = [];\n            var eagerProviders = [];\n            this._transformedProviders.forEach(function (provider) {\n                if (provider.eager) {\n                    eagerProviders.push(provider);\n                }\n                else {\n                    lazyProviders.push(provider);\n                }\n            });\n            return lazyProviders.concat(eagerProviders);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ProviderElementContext.prototype, \"transformedDirectiveAsts\", {\n        get: function () {\n            var sortedProviderTypes = this.transformProviders.map(function (provider) { return provider.token.identifier; });\n            var sortedDirectives = this._directiveAsts.slice();\n            sortedDirectives.sort(function (dir1, dir2) { return sortedProviderTypes.indexOf(dir1.directive.type) -\n                sortedProviderTypes.indexOf(dir2.directive.type); });\n            return sortedDirectives;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ProviderElementContext.prototype, \"queryMatches\", {\n        get: function () {\n            var allMatches = [];\n            this._queriedTokens.forEach(function (matches) { allMatches.push.apply(allMatches, __spread(matches)); });\n            return allMatches;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    ProviderElementContext.prototype._addQueryReadsTo = function (token, defaultValue, queryReadTokens) {\n        this._getQueriesFor(token).forEach(function (query) {\n            var queryValue = query.meta.read || defaultValue;\n            var tokenRef = tokenReference(queryValue);\n            var queryMatches = queryReadTokens.get(tokenRef);\n            if (!queryMatches) {\n                queryMatches = [];\n                queryReadTokens.set(tokenRef, queryMatches);\n            }\n            queryMatches.push({ queryId: query.queryId, value: queryValue });\n        });\n    };\n    ProviderElementContext.prototype._getQueriesFor = function (token) {\n        var result = [];\n        var currentEl = this;\n        var distance = 0;\n        var queries;\n        while (currentEl !== null) {\n            queries = currentEl._contentQueries.get(tokenReference(token));\n            if (queries) {\n                result.push.apply(result, __spread(queries.filter(function (query) { return query.meta.descendants || distance <= 1; })));\n            }\n            if (currentEl._directiveAsts.length > 0) {\n                distance++;\n            }\n            currentEl = currentEl._parent;\n        }\n        queries = this.viewContext.viewQueries.get(tokenReference(token));\n        if (queries) {\n            result.push.apply(result, __spread(queries));\n        }\n        return result;\n    };\n    ProviderElementContext.prototype._getOrCreateLocalProvider = function (requestingProviderType, token, eager) {\n        var _this = this;\n        var resolvedProvider = this._allProviders.get(tokenReference(token));\n        if (!resolvedProvider || ((requestingProviderType === ProviderAstType.Directive ||\n            requestingProviderType === ProviderAstType.PublicService) &&\n            resolvedProvider.providerType === ProviderAstType.PrivateService) ||\n            ((requestingProviderType === ProviderAstType.PrivateService ||\n                requestingProviderType === ProviderAstType.PublicService) &&\n                resolvedProvider.providerType === ProviderAstType.Builtin)) {\n            return null;\n        }\n        var transformedProviderAst = this._transformedProviders.get(tokenReference(token));\n        if (transformedProviderAst) {\n            return transformedProviderAst;\n        }\n        if (this._seenProviders.get(tokenReference(token)) != null) {\n            this.viewContext.errors.push(new ProviderError(\"Cannot instantiate cyclic dependency! \" + tokenName(token), this._sourceSpan));\n            return null;\n        }\n        this._seenProviders.set(tokenReference(token), true);\n        var transformedProviders = resolvedProvider.providers.map(function (provider) {\n            var transformedUseValue = provider.useValue;\n            var transformedUseExisting = provider.useExisting;\n            var transformedDeps = undefined;\n            if (provider.useExisting != null) {\n                var existingDiDep = _this._getDependency(resolvedProvider.providerType, { token: provider.useExisting }, eager);\n                if (existingDiDep.token != null) {\n                    transformedUseExisting = existingDiDep.token;\n                }\n                else {\n                    transformedUseExisting = null;\n                    transformedUseValue = existingDiDep.value;\n                }\n            }\n            else if (provider.useFactory) {\n                var deps = provider.deps || provider.useFactory.diDeps;\n                transformedDeps =\n                    deps.map(function (dep) { return _this._getDependency(resolvedProvider.providerType, dep, eager); });\n            }\n            else if (provider.useClass) {\n                var deps = provider.deps || provider.useClass.diDeps;\n                transformedDeps =\n                    deps.map(function (dep) { return _this._getDependency(resolvedProvider.providerType, dep, eager); });\n            }\n            return _transformProvider(provider, {\n                useExisting: transformedUseExisting,\n                useValue: transformedUseValue,\n                deps: transformedDeps\n            });\n        });\n        transformedProviderAst =\n            _transformProviderAst(resolvedProvider, { eager: eager, providers: transformedProviders });\n        this._transformedProviders.set(tokenReference(token), transformedProviderAst);\n        return transformedProviderAst;\n    };\n    ProviderElementContext.prototype._getLocalDependency = function (requestingProviderType, dep, eager) {\n        if (eager === void 0) { eager = false; }\n        if (dep.isAttribute) {\n            var attrValue = this._attrs[dep.token.value];\n            return { isValue: true, value: attrValue == null ? null : attrValue };\n        }\n        if (dep.token != null) {\n            // access builtints\n            if ((requestingProviderType === ProviderAstType.Directive ||\n                requestingProviderType === ProviderAstType.Component)) {\n                if (tokenReference(dep.token) ===\n                    this.viewContext.reflector.resolveExternalReference(Identifiers.Renderer) ||\n                    tokenReference(dep.token) ===\n                        this.viewContext.reflector.resolveExternalReference(Identifiers.ElementRef) ||\n                    tokenReference(dep.token) ===\n                        this.viewContext.reflector.resolveExternalReference(Identifiers.ChangeDetectorRef) ||\n                    tokenReference(dep.token) ===\n                        this.viewContext.reflector.resolveExternalReference(Identifiers.TemplateRef)) {\n                    return dep;\n                }\n                if (tokenReference(dep.token) ===\n                    this.viewContext.reflector.resolveExternalReference(Identifiers.ViewContainerRef)) {\n                    this.transformedHasViewContainer = true;\n                }\n            }\n            // access the injector\n            if (tokenReference(dep.token) ===\n                this.viewContext.reflector.resolveExternalReference(Identifiers.Injector)) {\n                return dep;\n            }\n            // access providers\n            if (this._getOrCreateLocalProvider(requestingProviderType, dep.token, eager) != null) {\n                return dep;\n            }\n        }\n        return null;\n    };\n    ProviderElementContext.prototype._getDependency = function (requestingProviderType, dep, eager) {\n        if (eager === void 0) { eager = false; }\n        var currElement = this;\n        var currEager = eager;\n        var result = null;\n        if (!dep.isSkipSelf) {\n            result = this._getLocalDependency(requestingProviderType, dep, eager);\n        }\n        if (dep.isSelf) {\n            if (!result && dep.isOptional) {\n                result = { isValue: true, value: null };\n            }\n        }\n        else {\n            // check parent elements\n            while (!result && currElement._parent) {\n                var prevElement = currElement;\n                currElement = currElement._parent;\n                if (prevElement._isViewRoot) {\n                    currEager = false;\n                }\n                result = currElement._getLocalDependency(ProviderAstType.PublicService, dep, currEager);\n            }\n            // check @Host restriction\n            if (!result) {\n                if (!dep.isHost || this.viewContext.component.isHost ||\n                    this.viewContext.component.type.reference === tokenReference(dep.token) ||\n                    this.viewContext.viewProviders.get(tokenReference(dep.token)) != null) {\n                    result = dep;\n                }\n                else {\n                    result = dep.isOptional ? { isValue: true, value: null } : null;\n                }\n            }\n        }\n        if (!result) {\n            this.viewContext.errors.push(new ProviderError(\"No provider for \" + tokenName(dep.token), this._sourceSpan));\n        }\n        return result;\n    };\n    return ProviderElementContext;\n}());\nfunction _transformProvider(provider, _a) {\n    var useExisting = _a.useExisting, useValue = _a.useValue, deps = _a.deps;\n    return {\n        token: provider.token,\n        useClass: provider.useClass,\n        useExisting: useExisting,\n        useFactory: provider.useFactory,\n        useValue: useValue,\n        deps: deps,\n        multi: provider.multi\n    };\n}\nfunction _transformProviderAst(provider, _a) {\n    var eager = _a.eager, providers = _a.providers;\n    return new ProviderAst(provider.token, provider.multiProvider, provider.eager || eager, providers, provider.providerType, provider.lifecycleHooks, provider.sourceSpan, provider.isModule);\n}\nfunction _resolveProvidersFromDirectives(directives, sourceSpan, targetErrors) {\n    var providersByToken = new Map();\n    directives.forEach(function (directive) {\n        var dirProvider = { token: { identifier: directive.type }, useClass: directive.type };\n        _resolveProviders([dirProvider], directive.isComponent ? ProviderAstType.Component : ProviderAstType.Directive, true, sourceSpan, targetErrors, providersByToken, /* isModule */ false);\n    });\n    // Note: directives need to be able to overwrite providers of a component!\n    var directivesWithComponentFirst = directives.filter(function (dir) { return dir.isComponent; }).concat(directives.filter(function (dir) { return !dir.isComponent; }));\n    directivesWithComponentFirst.forEach(function (directive) {\n        _resolveProviders(directive.providers, ProviderAstType.PublicService, false, sourceSpan, targetErrors, providersByToken, /* isModule */ false);\n        _resolveProviders(directive.viewProviders, ProviderAstType.PrivateService, false, sourceSpan, targetErrors, providersByToken, /* isModule */ false);\n    });\n    return providersByToken;\n}\nfunction _resolveProviders(providers, providerType, eager, sourceSpan, targetErrors, targetProvidersByToken, isModule) {\n    providers.forEach(function (provider) {\n        var resolvedProvider = targetProvidersByToken.get(tokenReference(provider.token));\n        if (resolvedProvider != null && !!resolvedProvider.multiProvider !== !!provider.multi) {\n            targetErrors.push(new ProviderError(\"Mixing multi and non multi provider is not possible for token \" + tokenName(resolvedProvider.token), sourceSpan));\n        }\n        if (!resolvedProvider) {\n            var lifecycleHooks = provider.token.identifier &&\n                provider.token.identifier.lifecycleHooks ?\n                provider.token.identifier.lifecycleHooks :\n                [];\n            var isUseValue = !(provider.useClass || provider.useExisting || provider.useFactory);\n            resolvedProvider = new ProviderAst(provider.token, !!provider.multi, eager || isUseValue, [provider], providerType, lifecycleHooks, sourceSpan, isModule);\n            targetProvidersByToken.set(tokenReference(provider.token), resolvedProvider);\n        }\n        else {\n            if (!provider.multi) {\n                resolvedProvider.providers.length = 0;\n            }\n            resolvedProvider.providers.push(provider);\n        }\n    });\n}\nfunction _getViewQueries(component) {\n    // Note: queries start with id 1 so we can use the number in a Bloom filter!\n    var viewQueryId = 1;\n    var viewQueries = new Map();\n    if (component.viewQueries) {\n        component.viewQueries.forEach(function (query) { return _addQueryToTokenMap(viewQueries, { meta: query, queryId: viewQueryId++ }); });\n    }\n    return viewQueries;\n}\nfunction _getContentQueries(contentQueryStartId, directives) {\n    var contentQueryId = contentQueryStartId;\n    var contentQueries = new Map();\n    directives.forEach(function (directive, directiveIndex) {\n        if (directive.queries) {\n            directive.queries.forEach(function (query) { return _addQueryToTokenMap(contentQueries, { meta: query, queryId: contentQueryId++ }); });\n        }\n    });\n    return contentQueries;\n}\nfunction _addQueryToTokenMap(map, query) {\n    query.meta.selectors.forEach(function (token) {\n        var entry = map.get(tokenReference(token));\n        if (!entry) {\n            entry = [];\n            map.set(tokenReference(token), entry);\n        }\n        entry.push(query);\n    });\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar LOG_VAR = variable('_l');\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Resolves types to {@link NgModule}.\n */\nvar NgModuleResolver = /** @class */ (function () {\n    function NgModuleResolver(_reflector) {\n        this._reflector = _reflector;\n    }\n    NgModuleResolver.prototype.isNgModule = function (type) { return this._reflector.annotations(type).some(createNgModule.isTypeOf); };\n    NgModuleResolver.prototype.resolve = function (type, throwIfNotFound) {\n        if (throwIfNotFound === void 0) { throwIfNotFound = true; }\n        var ngModuleMeta = findLast(this._reflector.annotations(type), createNgModule.isTypeOf);\n        if (ngModuleMeta) {\n            return ngModuleMeta;\n        }\n        else {\n            if (throwIfNotFound) {\n                throw new Error(\"No NgModule metadata found for '\" + stringify(type) + \"'.\");\n            }\n            return null;\n        }\n    };\n    return NgModuleResolver;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n// https://docs.google.com/document/d/1U1RGAehQwRypUTovF1KRlpiOFze0b-_2gc6fAH0KY0k/edit\nvar VERSION$1 = 3;\nvar JS_B64_PREFIX = '# sourceMappingURL=data:application/json;base64,';\nvar SourceMapGenerator = /** @class */ (function () {\n    function SourceMapGenerator(file) {\n        if (file === void 0) { file = null; }\n        this.file = file;\n        this.sourcesContent = new Map();\n        this.lines = [];\n        this.lastCol0 = 0;\n        this.hasMappings = false;\n    }\n    // The content is `null` when the content is expected to be loaded using the URL\n    SourceMapGenerator.prototype.addSource = function (url, content) {\n        if (content === void 0) { content = null; }\n        if (!this.sourcesContent.has(url)) {\n            this.sourcesContent.set(url, content);\n        }\n        return this;\n    };\n    SourceMapGenerator.prototype.addLine = function () {\n        this.lines.push([]);\n        this.lastCol0 = 0;\n        return this;\n    };\n    SourceMapGenerator.prototype.addMapping = function (col0, sourceUrl, sourceLine0, sourceCol0) {\n        if (!this.currentLine) {\n            throw new Error(\"A line must be added before mappings can be added\");\n        }\n        if (sourceUrl != null && !this.sourcesContent.has(sourceUrl)) {\n            throw new Error(\"Unknown source file \\\"\" + sourceUrl + \"\\\"\");\n        }\n        if (col0 == null) {\n            throw new Error(\"The column in the generated code must be provided\");\n        }\n        if (col0 < this.lastCol0) {\n            throw new Error(\"Mapping should be added in output order\");\n        }\n        if (sourceUrl && (sourceLine0 == null || sourceCol0 == null)) {\n            throw new Error(\"The source location must be provided when a source url is provided\");\n        }\n        this.hasMappings = true;\n        this.lastCol0 = col0;\n        this.currentLine.push({ col0: col0, sourceUrl: sourceUrl, sourceLine0: sourceLine0, sourceCol0: sourceCol0 });\n        return this;\n    };\n    Object.defineProperty(SourceMapGenerator.prototype, \"currentLine\", {\n        get: function () { return this.lines.slice(-1)[0]; },\n        enumerable: true,\n        configurable: true\n    });\n    SourceMapGenerator.prototype.toJSON = function () {\n        var _this = this;\n        if (!this.hasMappings) {\n            return null;\n        }\n        var sourcesIndex = new Map();\n        var sources = [];\n        var sourcesContent = [];\n        Array.from(this.sourcesContent.keys()).forEach(function (url, i) {\n            sourcesIndex.set(url, i);\n            sources.push(url);\n            sourcesContent.push(_this.sourcesContent.get(url) || null);\n        });\n        var mappings = '';\n        var lastCol0 = 0;\n        var lastSourceIndex = 0;\n        var lastSourceLine0 = 0;\n        var lastSourceCol0 = 0;\n        this.lines.forEach(function (segments) {\n            lastCol0 = 0;\n            mappings += segments\n                .map(function (segment) {\n                // zero-based starting column of the line in the generated code\n                var segAsStr = toBase64VLQ(segment.col0 - lastCol0);\n                lastCol0 = segment.col0;\n                if (segment.sourceUrl != null) {\n                    // zero-based index into the sources list\n                    segAsStr +=\n                        toBase64VLQ(sourcesIndex.get(segment.sourceUrl) - lastSourceIndex);\n                    lastSourceIndex = sourcesIndex.get(segment.sourceUrl);\n                    // the zero-based starting line in the original source\n                    segAsStr += toBase64VLQ(segment.sourceLine0 - lastSourceLine0);\n                    lastSourceLine0 = segment.sourceLine0;\n                    // the zero-based starting column in the original source\n                    segAsStr += toBase64VLQ(segment.sourceCol0 - lastSourceCol0);\n                    lastSourceCol0 = segment.sourceCol0;\n                }\n                return segAsStr;\n            })\n                .join(',');\n            mappings += ';';\n        });\n        mappings = mappings.slice(0, -1);\n        return {\n            'file': this.file || '',\n            'version': VERSION$1,\n            'sourceRoot': '',\n            'sources': sources,\n            'sourcesContent': sourcesContent,\n            'mappings': mappings,\n        };\n    };\n    SourceMapGenerator.prototype.toJsComment = function () {\n        return this.hasMappings ? '//' + JS_B64_PREFIX + toBase64String(JSON.stringify(this, null, 0)) :\n            '';\n    };\n    return SourceMapGenerator;\n}());\nfunction toBase64String(value) {\n    var b64 = '';\n    value = utf8Encode(value);\n    for (var i = 0; i < value.length;) {\n        var i1 = value.charCodeAt(i++);\n        var i2 = value.charCodeAt(i++);\n        var i3 = value.charCodeAt(i++);\n        b64 += toBase64Digit(i1 >> 2);\n        b64 += toBase64Digit(((i1 & 3) << 4) | (isNaN(i2) ? 0 : i2 >> 4));\n        b64 += isNaN(i2) ? '=' : toBase64Digit(((i2 & 15) << 2) | (i3 >> 6));\n        b64 += isNaN(i2) || isNaN(i3) ? '=' : toBase64Digit(i3 & 63);\n    }\n    return b64;\n}\nfunction toBase64VLQ(value) {\n    value = value < 0 ? ((-value) << 1) + 1 : value << 1;\n    var out = '';\n    do {\n        var digit = value & 31;\n        value = value >> 5;\n        if (value > 0) {\n            digit = digit | 32;\n        }\n        out += toBase64Digit(digit);\n    } while (value > 0);\n    return out;\n}\nvar B64_DIGITS = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\nfunction toBase64Digit(value) {\n    if (value < 0 || value >= 64) {\n        throw new Error(\"Can only encode value in the range [0, 63]\");\n    }\n    return B64_DIGITS[value];\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar _SINGLE_QUOTE_ESCAPE_STRING_RE = /'|\\\\|\\n|\\r|\\$/g;\nvar _LEGAL_IDENTIFIER_RE = /^[$A-Z_][0-9A-Z_$]*$/i;\nvar _INDENT_WITH = '  ';\nvar CATCH_ERROR_VAR$1 = variable('error', null, null);\nvar CATCH_STACK_VAR$1 = variable('stack', null, null);\nvar _EmittedLine = /** @class */ (function () {\n    function _EmittedLine(indent) {\n        this.indent = indent;\n        this.partsLength = 0;\n        this.parts = [];\n        this.srcSpans = [];\n    }\n    return _EmittedLine;\n}());\nvar EmitterVisitorContext = /** @class */ (function () {\n    function EmitterVisitorContext(_indent) {\n        this._indent = _indent;\n        this._classes = [];\n        this._preambleLineCount = 0;\n        this._lines = [new _EmittedLine(_indent)];\n    }\n    EmitterVisitorContext.createRoot = function () { return new EmitterVisitorContext(0); };\n    Object.defineProperty(EmitterVisitorContext.prototype, \"_currentLine\", {\n        get: function () { return this._lines[this._lines.length - 1]; },\n        enumerable: true,\n        configurable: true\n    });\n    EmitterVisitorContext.prototype.println = function (from, lastPart) {\n        if (lastPart === void 0) { lastPart = ''; }\n        this.print(from || null, lastPart, true);\n    };\n    EmitterVisitorContext.prototype.lineIsEmpty = function () { return this._currentLine.parts.length === 0; };\n    EmitterVisitorContext.prototype.lineLength = function () {\n        return this._currentLine.indent * _INDENT_WITH.length + this._currentLine.partsLength;\n    };\n    EmitterVisitorContext.prototype.print = function (from, part, newLine) {\n        if (newLine === void 0) { newLine = false; }\n        if (part.length > 0) {\n            this._currentLine.parts.push(part);\n            this._currentLine.partsLength += part.length;\n            this._currentLine.srcSpans.push(from && from.sourceSpan || null);\n        }\n        if (newLine) {\n            this._lines.push(new _EmittedLine(this._indent));\n        }\n    };\n    EmitterVisitorContext.prototype.removeEmptyLastLine = function () {\n        if (this.lineIsEmpty()) {\n            this._lines.pop();\n        }\n    };\n    EmitterVisitorContext.prototype.incIndent = function () {\n        this._indent++;\n        if (this.lineIsEmpty()) {\n            this._currentLine.indent = this._indent;\n        }\n    };\n    EmitterVisitorContext.prototype.decIndent = function () {\n        this._indent--;\n        if (this.lineIsEmpty()) {\n            this._currentLine.indent = this._indent;\n        }\n    };\n    EmitterVisitorContext.prototype.pushClass = function (clazz) { this._classes.push(clazz); };\n    EmitterVisitorContext.prototype.popClass = function () { return this._classes.pop(); };\n    Object.defineProperty(EmitterVisitorContext.prototype, \"currentClass\", {\n        get: function () {\n            return this._classes.length > 0 ? this._classes[this._classes.length - 1] : null;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    EmitterVisitorContext.prototype.toSource = function () {\n        return this.sourceLines\n            .map(function (l) { return l.parts.length > 0 ? _createIndent(l.indent) + l.parts.join('') : ''; })\n            .join('\\n');\n    };\n    EmitterVisitorContext.prototype.toSourceMapGenerator = function (genFilePath, startsAtLine) {\n        if (startsAtLine === void 0) { startsAtLine = 0; }\n        var map = new SourceMapGenerator(genFilePath);\n        var firstOffsetMapped = false;\n        var mapFirstOffsetIfNeeded = function () {\n            if (!firstOffsetMapped) {\n                // Add a single space so that tools won't try to load the file from disk.\n                // Note: We are using virtual urls like `ng:///`, so we have to\n                // provide a content here.\n                map.addSource(genFilePath, ' ').addMapping(0, genFilePath, 0, 0);\n                firstOffsetMapped = true;\n            }\n        };\n        for (var i = 0; i < startsAtLine; i++) {\n            map.addLine();\n            mapFirstOffsetIfNeeded();\n        }\n        this.sourceLines.forEach(function (line, lineIdx) {\n            map.addLine();\n            var spans = line.srcSpans;\n            var parts = line.parts;\n            var col0 = line.indent * _INDENT_WITH.length;\n            var spanIdx = 0;\n            // skip leading parts without source spans\n            while (spanIdx < spans.length && !spans[spanIdx]) {\n                col0 += parts[spanIdx].length;\n                spanIdx++;\n            }\n            if (spanIdx < spans.length && lineIdx === 0 && col0 === 0) {\n                firstOffsetMapped = true;\n            }\n            else {\n                mapFirstOffsetIfNeeded();\n            }\n            while (spanIdx < spans.length) {\n                var span = spans[spanIdx];\n                var source = span.start.file;\n                var sourceLine = span.start.line;\n                var sourceCol = span.start.col;\n                map.addSource(source.url, source.content)\n                    .addMapping(col0, source.url, sourceLine, sourceCol);\n                col0 += parts[spanIdx].length;\n                spanIdx++;\n                // assign parts without span or the same span to the previous segment\n                while (spanIdx < spans.length && (span === spans[spanIdx] || !spans[spanIdx])) {\n                    col0 += parts[spanIdx].length;\n                    spanIdx++;\n                }\n            }\n        });\n        return map;\n    };\n    EmitterVisitorContext.prototype.setPreambleLineCount = function (count) { return this._preambleLineCount = count; };\n    EmitterVisitorContext.prototype.spanOf = function (line, column) {\n        var emittedLine = this._lines[line - this._preambleLineCount];\n        if (emittedLine) {\n            var columnsLeft = column - _createIndent(emittedLine.indent).length;\n            for (var partIndex = 0; partIndex < emittedLine.parts.length; partIndex++) {\n                var part = emittedLine.parts[partIndex];\n                if (part.length > columnsLeft) {\n                    return emittedLine.srcSpans[partIndex];\n                }\n                columnsLeft -= part.length;\n            }\n        }\n        return null;\n    };\n    Object.defineProperty(EmitterVisitorContext.prototype, \"sourceLines\", {\n        get: function () {\n            if (this._lines.length && this._lines[this._lines.length - 1].parts.length === 0) {\n                return this._lines.slice(0, -1);\n            }\n            return this._lines;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return EmitterVisitorContext;\n}());\nvar AbstractEmitterVisitor = /** @class */ (function () {\n    function AbstractEmitterVisitor(_escapeDollarInStrings) {\n        this._escapeDollarInStrings = _escapeDollarInStrings;\n    }\n    AbstractEmitterVisitor.prototype.visitExpressionStmt = function (stmt, ctx) {\n        stmt.expr.visitExpression(this, ctx);\n        ctx.println(stmt, ';');\n        return null;\n    };\n    AbstractEmitterVisitor.prototype.visitReturnStmt = function (stmt, ctx) {\n        ctx.print(stmt, \"return \");\n        stmt.value.visitExpression(this, ctx);\n        ctx.println(stmt, ';');\n        return null;\n    };\n    AbstractEmitterVisitor.prototype.visitIfStmt = function (stmt, ctx) {\n        ctx.print(stmt, \"if (\");\n        stmt.condition.visitExpression(this, ctx);\n        ctx.print(stmt, \") {\");\n        var hasElseCase = stmt.falseCase != null && stmt.falseCase.length > 0;\n        if (stmt.trueCase.length <= 1 && !hasElseCase) {\n            ctx.print(stmt, \" \");\n            this.visitAllStatements(stmt.trueCase, ctx);\n            ctx.removeEmptyLastLine();\n            ctx.print(stmt, \" \");\n        }\n        else {\n            ctx.println();\n            ctx.incIndent();\n            this.visitAllStatements(stmt.trueCase, ctx);\n            ctx.decIndent();\n            if (hasElseCase) {\n                ctx.println(stmt, \"} else {\");\n                ctx.incIndent();\n                this.visitAllStatements(stmt.falseCase, ctx);\n                ctx.decIndent();\n            }\n        }\n        ctx.println(stmt, \"}\");\n        return null;\n    };\n    AbstractEmitterVisitor.prototype.visitThrowStmt = function (stmt, ctx) {\n        ctx.print(stmt, \"throw \");\n        stmt.error.visitExpression(this, ctx);\n        ctx.println(stmt, \";\");\n        return null;\n    };\n    AbstractEmitterVisitor.prototype.visitCommentStmt = function (stmt, ctx) {\n        if (stmt.multiline) {\n            ctx.println(stmt, \"/* \" + stmt.comment + \" */\");\n        }\n        else {\n            stmt.comment.split('\\n').forEach(function (line) { ctx.println(stmt, \"// \" + line); });\n        }\n        return null;\n    };\n    AbstractEmitterVisitor.prototype.visitJSDocCommentStmt = function (stmt, ctx) {\n        ctx.println(stmt, \"/*\" + stmt.toString() + \"*/\");\n        return null;\n    };\n    AbstractEmitterVisitor.prototype.visitWriteVarExpr = function (expr, ctx) {\n        var lineWasEmpty = ctx.lineIsEmpty();\n        if (!lineWasEmpty) {\n            ctx.print(expr, '(');\n        }\n        ctx.print(expr, expr.name + \" = \");\n        expr.value.visitExpression(this, ctx);\n        if (!lineWasEmpty) {\n            ctx.print(expr, ')');\n        }\n        return null;\n    };\n    AbstractEmitterVisitor.prototype.visitWriteKeyExpr = function (expr, ctx) {\n        var lineWasEmpty = ctx.lineIsEmpty();\n        if (!lineWasEmpty) {\n            ctx.print(expr, '(');\n        }\n        expr.receiver.visitExpression(this, ctx);\n        ctx.print(expr, \"[\");\n        expr.index.visitExpression(this, ctx);\n        ctx.print(expr, \"] = \");\n        expr.value.visitExpression(this, ctx);\n        if (!lineWasEmpty) {\n            ctx.print(expr, ')');\n        }\n        return null;\n    };\n    AbstractEmitterVisitor.prototype.visitWritePropExpr = function (expr, ctx) {\n        var lineWasEmpty = ctx.lineIsEmpty();\n        if (!lineWasEmpty) {\n            ctx.print(expr, '(');\n        }\n        expr.receiver.visitExpression(this, ctx);\n        ctx.print(expr, \".\" + expr.name + \" = \");\n        expr.value.visitExpression(this, ctx);\n        if (!lineWasEmpty) {\n            ctx.print(expr, ')');\n        }\n        return null;\n    };\n    AbstractEmitterVisitor.prototype.visitInvokeMethodExpr = function (expr, ctx) {\n        expr.receiver.visitExpression(this, ctx);\n        var name = expr.name;\n        if (expr.builtin != null) {\n            name = this.getBuiltinMethodName(expr.builtin);\n            if (name == null) {\n                // some builtins just mean to skip the call.\n                return null;\n            }\n        }\n        ctx.print(expr, \".\" + name + \"(\");\n        this.visitAllExpressions(expr.args, ctx, \",\");\n        ctx.print(expr, \")\");\n        return null;\n    };\n    AbstractEmitterVisitor.prototype.visitInvokeFunctionExpr = function (expr, ctx) {\n        expr.fn.visitExpression(this, ctx);\n        ctx.print(expr, \"(\");\n        this.visitAllExpressions(expr.args, ctx, ',');\n        ctx.print(expr, \")\");\n        return null;\n    };\n    AbstractEmitterVisitor.prototype.visitReadVarExpr = function (ast, ctx) {\n        var varName = ast.name;\n        if (ast.builtin != null) {\n            switch (ast.builtin) {\n                case BuiltinVar.Super:\n                    varName = 'super';\n                    break;\n                case BuiltinVar.This:\n                    varName = 'this';\n                    break;\n                case BuiltinVar.CatchError:\n                    varName = CATCH_ERROR_VAR$1.name;\n                    break;\n                case BuiltinVar.CatchStack:\n                    varName = CATCH_STACK_VAR$1.name;\n                    break;\n                default:\n                    throw new Error(\"Unknown builtin variable \" + ast.builtin);\n            }\n        }\n        ctx.print(ast, varName);\n        return null;\n    };\n    AbstractEmitterVisitor.prototype.visitInstantiateExpr = function (ast, ctx) {\n        ctx.print(ast, \"new \");\n        ast.classExpr.visitExpression(this, ctx);\n        ctx.print(ast, \"(\");\n        this.visitAllExpressions(ast.args, ctx, ',');\n        ctx.print(ast, \")\");\n        return null;\n    };\n    AbstractEmitterVisitor.prototype.visitLiteralExpr = function (ast, ctx) {\n        var value = ast.value;\n        if (typeof value === 'string') {\n            ctx.print(ast, escapeIdentifier(value, this._escapeDollarInStrings));\n        }\n        else {\n            ctx.print(ast, \"\" + value);\n        }\n        return null;\n    };\n    AbstractEmitterVisitor.prototype.visitConditionalExpr = function (ast, ctx) {\n        ctx.print(ast, \"(\");\n        ast.condition.visitExpression(this, ctx);\n        ctx.print(ast, '? ');\n        ast.trueCase.visitExpression(this, ctx);\n        ctx.print(ast, ': ');\n        ast.falseCase.visitExpression(this, ctx);\n        ctx.print(ast, \")\");\n        return null;\n    };\n    AbstractEmitterVisitor.prototype.visitNotExpr = function (ast, ctx) {\n        ctx.print(ast, '!');\n        ast.condition.visitExpression(this, ctx);\n        return null;\n    };\n    AbstractEmitterVisitor.prototype.visitAssertNotNullExpr = function (ast, ctx) {\n        ast.condition.visitExpression(this, ctx);\n        return null;\n    };\n    AbstractEmitterVisitor.prototype.visitBinaryOperatorExpr = function (ast, ctx) {\n        var opStr;\n        switch (ast.operator) {\n            case BinaryOperator.Equals:\n                opStr = '==';\n                break;\n            case BinaryOperator.Identical:\n                opStr = '===';\n                break;\n            case BinaryOperator.NotEquals:\n                opStr = '!=';\n                break;\n            case BinaryOperator.NotIdentical:\n                opStr = '!==';\n                break;\n            case BinaryOperator.And:\n                opStr = '&&';\n                break;\n            case BinaryOperator.BitwiseAnd:\n                opStr = '&';\n                break;\n            case BinaryOperator.Or:\n                opStr = '||';\n                break;\n            case BinaryOperator.Plus:\n                opStr = '+';\n                break;\n            case BinaryOperator.Minus:\n                opStr = '-';\n                break;\n            case BinaryOperator.Divide:\n                opStr = '/';\n                break;\n            case BinaryOperator.Multiply:\n                opStr = '*';\n                break;\n            case BinaryOperator.Modulo:\n                opStr = '%';\n                break;\n            case BinaryOperator.Lower:\n                opStr = '<';\n                break;\n            case BinaryOperator.LowerEquals:\n                opStr = '<=';\n                break;\n            case BinaryOperator.Bigger:\n                opStr = '>';\n                break;\n            case BinaryOperator.BiggerEquals:\n                opStr = '>=';\n                break;\n            default:\n                throw new Error(\"Unknown operator \" + ast.operator);\n        }\n        if (ast.parens)\n            ctx.print(ast, \"(\");\n        ast.lhs.visitExpression(this, ctx);\n        ctx.print(ast, \" \" + opStr + \" \");\n        ast.rhs.visitExpression(this, ctx);\n        if (ast.parens)\n            ctx.print(ast, \")\");\n        return null;\n    };\n    AbstractEmitterVisitor.prototype.visitReadPropExpr = function (ast, ctx) {\n        ast.receiver.visitExpression(this, ctx);\n        ctx.print(ast, \".\");\n        ctx.print(ast, ast.name);\n        return null;\n    };\n    AbstractEmitterVisitor.prototype.visitReadKeyExpr = function (ast, ctx) {\n        ast.receiver.visitExpression(this, ctx);\n        ctx.print(ast, \"[\");\n        ast.index.visitExpression(this, ctx);\n        ctx.print(ast, \"]\");\n        return null;\n    };\n    AbstractEmitterVisitor.prototype.visitLiteralArrayExpr = function (ast, ctx) {\n        ctx.print(ast, \"[\");\n        this.visitAllExpressions(ast.entries, ctx, ',');\n        ctx.print(ast, \"]\");\n        return null;\n    };\n    AbstractEmitterVisitor.prototype.visitLiteralMapExpr = function (ast, ctx) {\n        var _this = this;\n        ctx.print(ast, \"{\");\n        this.visitAllObjects(function (entry) {\n            ctx.print(ast, escapeIdentifier(entry.key, _this._escapeDollarInStrings, entry.quoted) + \":\");\n            entry.value.visitExpression(_this, ctx);\n        }, ast.entries, ctx, ',');\n        ctx.print(ast, \"}\");\n        return null;\n    };\n    AbstractEmitterVisitor.prototype.visitCommaExpr = function (ast, ctx) {\n        ctx.print(ast, '(');\n        this.visitAllExpressions(ast.parts, ctx, ',');\n        ctx.print(ast, ')');\n        return null;\n    };\n    AbstractEmitterVisitor.prototype.visitAllExpressions = function (expressions, ctx, separator) {\n        var _this = this;\n        this.visitAllObjects(function (expr) { return expr.visitExpression(_this, ctx); }, expressions, ctx, separator);\n    };\n    AbstractEmitterVisitor.prototype.visitAllObjects = function (handler, expressions, ctx, separator) {\n        var incrementedIndent = false;\n        for (var i = 0; i < expressions.length; i++) {\n            if (i > 0) {\n                if (ctx.lineLength() > 80) {\n                    ctx.print(null, separator, true);\n                    if (!incrementedIndent) {\n                        // continuation are marked with double indent.\n                        ctx.incIndent();\n                        ctx.incIndent();\n                        incrementedIndent = true;\n                    }\n                }\n                else {\n                    ctx.print(null, separator, false);\n                }\n            }\n            handler(expressions[i]);\n        }\n        if (incrementedIndent) {\n            // continuation are marked with double indent.\n            ctx.decIndent();\n            ctx.decIndent();\n        }\n    };\n    AbstractEmitterVisitor.prototype.visitAllStatements = function (statements, ctx) {\n        var _this = this;\n        statements.forEach(function (stmt) { return stmt.visitStatement(_this, ctx); });\n    };\n    return AbstractEmitterVisitor;\n}());\nfunction escapeIdentifier(input, escapeDollar, alwaysQuote) {\n    if (alwaysQuote === void 0) { alwaysQuote = true; }\n    if (input == null) {\n        return null;\n    }\n    var body = input.replace(_SINGLE_QUOTE_ESCAPE_STRING_RE, function () {\n        var match = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            match[_i] = arguments[_i];\n        }\n        if (match[0] == '$') {\n            return escapeDollar ? '\\\\$' : '$';\n        }\n        else if (match[0] == '\\n') {\n            return '\\\\n';\n        }\n        else if (match[0] == '\\r') {\n            return '\\\\r';\n        }\n        else {\n            return \"\\\\\" + match[0];\n        }\n    });\n    var requiresQuotes = alwaysQuote || !_LEGAL_IDENTIFIER_RE.test(body);\n    return requiresQuotes ? \"'\" + body + \"'\" : body;\n}\nfunction _createIndent(count) {\n    var res = '';\n    for (var i = 0; i < count; i++) {\n        res += _INDENT_WITH;\n    }\n    return res;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nvar _TsEmitterVisitor = /** @class */ (function (_super) {\n    __extends(_TsEmitterVisitor, _super);\n    function _TsEmitterVisitor(referenceFilter, importFilter) {\n        var _this = _super.call(this, false) || this;\n        _this.referenceFilter = referenceFilter;\n        _this.importFilter = importFilter;\n        _this.typeExpression = 0;\n        _this.importsWithPrefixes = new Map();\n        _this.reexports = new Map();\n        return _this;\n    }\n    _TsEmitterVisitor.prototype.visitType = function (t, ctx, defaultType) {\n        if (defaultType === void 0) { defaultType = 'any'; }\n        if (t) {\n            this.typeExpression++;\n            t.visitType(this, ctx);\n            this.typeExpression--;\n        }\n        else {\n            ctx.print(null, defaultType);\n        }\n    };\n    _TsEmitterVisitor.prototype.visitLiteralExpr = function (ast, ctx) {\n        var value = ast.value;\n        if (value == null && ast.type != INFERRED_TYPE) {\n            ctx.print(ast, \"(\" + value + \" as any)\");\n            return null;\n        }\n        return _super.prototype.visitLiteralExpr.call(this, ast, ctx);\n    };\n    // Temporary workaround to support strictNullCheck enabled consumers of ngc emit.\n    // In SNC mode, [] have the type never[], so we cast here to any[].\n    // TODO: narrow the cast to a more explicit type, or use a pattern that does not\n    // start with [].concat. see https://github.com/angular/angular/pull/11846\n    _TsEmitterVisitor.prototype.visitLiteralArrayExpr = function (ast, ctx) {\n        if (ast.entries.length === 0) {\n            ctx.print(ast, '(');\n        }\n        var result = _super.prototype.visitLiteralArrayExpr.call(this, ast, ctx);\n        if (ast.entries.length === 0) {\n            ctx.print(ast, ' as any[])');\n        }\n        return result;\n    };\n    _TsEmitterVisitor.prototype.visitExternalExpr = function (ast, ctx) {\n        this._visitIdentifier(ast.value, ast.typeParams, ctx);\n        return null;\n    };\n    _TsEmitterVisitor.prototype.visitAssertNotNullExpr = function (ast, ctx) {\n        var result = _super.prototype.visitAssertNotNullExpr.call(this, ast, ctx);\n        ctx.print(ast, '!');\n        return result;\n    };\n    _TsEmitterVisitor.prototype.visitDeclareVarStmt = function (stmt, ctx) {\n        if (stmt.hasModifier(StmtModifier.Exported) && stmt.value instanceof ExternalExpr &&\n            !stmt.type) {\n            // check for a reexport\n            var _a = stmt.value.value, name_1 = _a.name, moduleName = _a.moduleName;\n            if (moduleName) {\n                var reexports = this.reexports.get(moduleName);\n                if (!reexports) {\n                    reexports = [];\n                    this.reexports.set(moduleName, reexports);\n                }\n                reexports.push({ name: name_1, as: stmt.name });\n                return null;\n            }\n        }\n        if (stmt.hasModifier(StmtModifier.Exported)) {\n            ctx.print(stmt, \"export \");\n        }\n        if (stmt.hasModifier(StmtModifier.Final)) {\n            ctx.print(stmt, \"const\");\n        }\n        else {\n            ctx.print(stmt, \"var\");\n        }\n        ctx.print(stmt, \" \" + stmt.name);\n        this._printColonType(stmt.type, ctx);\n        if (stmt.value) {\n            ctx.print(stmt, \" = \");\n            stmt.value.visitExpression(this, ctx);\n        }\n        ctx.println(stmt, \";\");\n        return null;\n    };\n    _TsEmitterVisitor.prototype.visitCastExpr = function (ast, ctx) {\n        ctx.print(ast, \"(<\");\n        ast.type.visitType(this, ctx);\n        ctx.print(ast, \">\");\n        ast.value.visitExpression(this, ctx);\n        ctx.print(ast, \")\");\n        return null;\n    };\n    _TsEmitterVisitor.prototype.visitInstantiateExpr = function (ast, ctx) {\n        ctx.print(ast, \"new \");\n        this.typeExpression++;\n        ast.classExpr.visitExpression(this, ctx);\n        this.typeExpression--;\n        ctx.print(ast, \"(\");\n        this.visitAllExpressions(ast.args, ctx, ',');\n        ctx.print(ast, \")\");\n        return null;\n    };\n    _TsEmitterVisitor.prototype.visitDeclareClassStmt = function (stmt, ctx) {\n        var _this = this;\n        ctx.pushClass(stmt);\n        if (stmt.hasModifier(StmtModifier.Exported)) {\n            ctx.print(stmt, \"export \");\n        }\n        ctx.print(stmt, \"class \" + stmt.name);\n        if (stmt.parent != null) {\n            ctx.print(stmt, \" extends \");\n            this.typeExpression++;\n            stmt.parent.visitExpression(this, ctx);\n            this.typeExpression--;\n        }\n        ctx.println(stmt, \" {\");\n        ctx.incIndent();\n        stmt.fields.forEach(function (field) { return _this._visitClassField(field, ctx); });\n        if (stmt.constructorMethod != null) {\n            this._visitClassConstructor(stmt, ctx);\n        }\n        stmt.getters.forEach(function (getter) { return _this._visitClassGetter(getter, ctx); });\n        stmt.methods.forEach(function (method) { return _this._visitClassMethod(method, ctx); });\n        ctx.decIndent();\n        ctx.println(stmt, \"}\");\n        ctx.popClass();\n        return null;\n    };\n    _TsEmitterVisitor.prototype._visitClassField = function (field, ctx) {\n        if (field.hasModifier(StmtModifier.Private)) {\n            // comment out as a workaround for #10967\n            ctx.print(null, \"/*private*/ \");\n        }\n        if (field.hasModifier(StmtModifier.Static)) {\n            ctx.print(null, 'static ');\n        }\n        ctx.print(null, field.name);\n        this._printColonType(field.type, ctx);\n        if (field.initializer) {\n            ctx.print(null, ' = ');\n            field.initializer.visitExpression(this, ctx);\n        }\n        ctx.println(null, \";\");\n    };\n    _TsEmitterVisitor.prototype._visitClassGetter = function (getter, ctx) {\n        if (getter.hasModifier(StmtModifier.Private)) {\n            ctx.print(null, \"private \");\n        }\n        ctx.print(null, \"get \" + getter.name + \"()\");\n        this._printColonType(getter.type, ctx);\n        ctx.println(null, \" {\");\n        ctx.incIndent();\n        this.visitAllStatements(getter.body, ctx);\n        ctx.decIndent();\n        ctx.println(null, \"}\");\n    };\n    _TsEmitterVisitor.prototype._visitClassConstructor = function (stmt, ctx) {\n        ctx.print(stmt, \"constructor(\");\n        this._visitParams(stmt.constructorMethod.params, ctx);\n        ctx.println(stmt, \") {\");\n        ctx.incIndent();\n        this.visitAllStatements(stmt.constructorMethod.body, ctx);\n        ctx.decIndent();\n        ctx.println(stmt, \"}\");\n    };\n    _TsEmitterVisitor.prototype._visitClassMethod = function (method, ctx) {\n        if (method.hasModifier(StmtModifier.Private)) {\n            ctx.print(null, \"private \");\n        }\n        ctx.print(null, method.name + \"(\");\n        this._visitParams(method.params, ctx);\n        ctx.print(null, \")\");\n        this._printColonType(method.type, ctx, 'void');\n        ctx.println(null, \" {\");\n        ctx.incIndent();\n        this.visitAllStatements(method.body, ctx);\n        ctx.decIndent();\n        ctx.println(null, \"}\");\n    };\n    _TsEmitterVisitor.prototype.visitFunctionExpr = function (ast, ctx) {\n        if (ast.name) {\n            ctx.print(ast, 'function ');\n            ctx.print(ast, ast.name);\n        }\n        ctx.print(ast, \"(\");\n        this._visitParams(ast.params, ctx);\n        ctx.print(ast, \")\");\n        this._printColonType(ast.type, ctx, 'void');\n        if (!ast.name) {\n            ctx.print(ast, \" => \");\n        }\n        ctx.println(ast, '{');\n        ctx.incIndent();\n        this.visitAllStatements(ast.statements, ctx);\n        ctx.decIndent();\n        ctx.print(ast, \"}\");\n        return null;\n    };\n    _TsEmitterVisitor.prototype.visitDeclareFunctionStmt = function (stmt, ctx) {\n        if (stmt.hasModifier(StmtModifier.Exported)) {\n            ctx.print(stmt, \"export \");\n        }\n        ctx.print(stmt, \"function \" + stmt.name + \"(\");\n        this._visitParams(stmt.params, ctx);\n        ctx.print(stmt, \")\");\n        this._printColonType(stmt.type, ctx, 'void');\n        ctx.println(stmt, \" {\");\n        ctx.incIndent();\n        this.visitAllStatements(stmt.statements, ctx);\n        ctx.decIndent();\n        ctx.println(stmt, \"}\");\n        return null;\n    };\n    _TsEmitterVisitor.prototype.visitTryCatchStmt = function (stmt, ctx) {\n        ctx.println(stmt, \"try {\");\n        ctx.incIndent();\n        this.visitAllStatements(stmt.bodyStmts, ctx);\n        ctx.decIndent();\n        ctx.println(stmt, \"} catch (\" + CATCH_ERROR_VAR$1.name + \") {\");\n        ctx.incIndent();\n        var catchStmts = [CATCH_STACK_VAR$1.set(CATCH_ERROR_VAR$1.prop('stack', null)).toDeclStmt(null, [\n                StmtModifier.Final\n            ])].concat(stmt.catchStmts);\n        this.visitAllStatements(catchStmts, ctx);\n        ctx.decIndent();\n        ctx.println(stmt, \"}\");\n        return null;\n    };\n    _TsEmitterVisitor.prototype.visitBuiltinType = function (type, ctx) {\n        var typeStr;\n        switch (type.name) {\n            case BuiltinTypeName.Bool:\n                typeStr = 'boolean';\n                break;\n            case BuiltinTypeName.Dynamic:\n                typeStr = 'any';\n                break;\n            case BuiltinTypeName.Function:\n                typeStr = 'Function';\n                break;\n            case BuiltinTypeName.Number:\n                typeStr = 'number';\n                break;\n            case BuiltinTypeName.Int:\n                typeStr = 'number';\n                break;\n            case BuiltinTypeName.String:\n                typeStr = 'string';\n                break;\n            default:\n                throw new Error(\"Unsupported builtin type \" + type.name);\n        }\n        ctx.print(null, typeStr);\n        return null;\n    };\n    _TsEmitterVisitor.prototype.visitExpressionType = function (ast, ctx) {\n        ast.value.visitExpression(this, ctx);\n        return null;\n    };\n    _TsEmitterVisitor.prototype.visitArrayType = function (type, ctx) {\n        this.visitType(type.of, ctx);\n        ctx.print(null, \"[]\");\n        return null;\n    };\n    _TsEmitterVisitor.prototype.visitMapType = function (type, ctx) {\n        ctx.print(null, \"{[key: string]:\");\n        this.visitType(type.valueType, ctx);\n        ctx.print(null, \"}\");\n        return null;\n    };\n    _TsEmitterVisitor.prototype.getBuiltinMethodName = function (method) {\n        var name;\n        switch (method) {\n            case BuiltinMethod.ConcatArray:\n                name = 'concat';\n                break;\n            case BuiltinMethod.SubscribeObservable:\n                name = 'subscribe';\n                break;\n            case BuiltinMethod.Bind:\n                name = 'bind';\n                break;\n            default:\n                throw new Error(\"Unknown builtin method: \" + method);\n        }\n        return name;\n    };\n    _TsEmitterVisitor.prototype._visitParams = function (params, ctx) {\n        var _this = this;\n        this.visitAllObjects(function (param) {\n            ctx.print(null, param.name);\n            _this._printColonType(param.type, ctx);\n        }, params, ctx, ',');\n    };\n    _TsEmitterVisitor.prototype._visitIdentifier = function (value, typeParams, ctx) {\n        var _this = this;\n        var name = value.name, moduleName = value.moduleName;\n        if (this.referenceFilter && this.referenceFilter(value)) {\n            ctx.print(null, '(null as any)');\n            return;\n        }\n        if (moduleName && (!this.importFilter || !this.importFilter(value))) {\n            var prefix = this.importsWithPrefixes.get(moduleName);\n            if (prefix == null) {\n                prefix = \"i\" + this.importsWithPrefixes.size;\n                this.importsWithPrefixes.set(moduleName, prefix);\n            }\n            ctx.print(null, prefix + \".\");\n        }\n        ctx.print(null, name);\n        if (this.typeExpression > 0) {\n            // If we are in a type expression that refers to a generic type then supply\n            // the required type parameters. If there were not enough type parameters\n            // supplied, supply any as the type. Outside a type expression the reference\n            // should not supply type parameters and be treated as a simple value reference\n            // to the constructor function itself.\n            var suppliedParameters = typeParams || [];\n            if (suppliedParameters.length > 0) {\n                ctx.print(null, \"<\");\n                this.visitAllObjects(function (type) { return type.visitType(_this, ctx); }, typeParams, ctx, ',');\n                ctx.print(null, \">\");\n            }\n        }\n    };\n    _TsEmitterVisitor.prototype._printColonType = function (type, ctx, defaultType) {\n        if (type !== INFERRED_TYPE) {\n            ctx.print(null, ':');\n            this.visitType(type, ctx, defaultType);\n        }\n    };\n    return _TsEmitterVisitor;\n}(AbstractEmitterVisitor));\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Resolve a `Type` for {@link Pipe}.\n *\n * This interface can be overridden by the application developer to create custom behavior.\n *\n * See {@link Compiler}\n */\nvar PipeResolver = /** @class */ (function () {\n    function PipeResolver(_reflector) {\n        this._reflector = _reflector;\n    }\n    PipeResolver.prototype.isPipe = function (type) {\n        var typeMetadata = this._reflector.annotations(resolveForwardRef(type));\n        return typeMetadata && typeMetadata.some(createPipe.isTypeOf);\n    };\n    /**\n     * Return {@link Pipe} for a given `Type`.\n     */\n    PipeResolver.prototype.resolve = function (type, throwIfNotFound) {\n        if (throwIfNotFound === void 0) { throwIfNotFound = true; }\n        var metas = this._reflector.annotations(resolveForwardRef(type));\n        if (metas) {\n            var annotation = findLast(metas, createPipe.isTypeOf);\n            if (annotation) {\n                return annotation;\n            }\n        }\n        if (throwIfNotFound) {\n            throw new Error(\"No Pipe decorator found on \" + stringify(type));\n        }\n        return null;\n    };\n    return PipeResolver;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n// =================================================================================================\n// =================================================================================================\n// =========== S T O P   -  S T O P   -  S T O P   -  S T O P   -  S T O P   -  S T O P  ===========\n// =================================================================================================\n// =================================================================================================\n//\n//        DO NOT EDIT THIS LIST OF SECURITY SENSITIVE PROPERTIES WITHOUT A SECURITY REVIEW!\n//                               Reach out to mprobst for details.\n//\n// =================================================================================================\n/** Map from tagName|propertyName SecurityContext. Properties applying to all tags use '*'. */\nvar SECURITY_SCHEMA = {};\nfunction registerContext(ctx, specs) {\n    try {\n        for (var specs_1 = __values(specs), specs_1_1 = specs_1.next(); !specs_1_1.done; specs_1_1 = specs_1.next()) {\n            var spec = specs_1_1.value;\n            SECURITY_SCHEMA[spec.toLowerCase()] = ctx;\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (specs_1_1 && !specs_1_1.done && (_a = specs_1.return)) _a.call(specs_1);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n    var e_1, _a;\n}\n// Case is insignificant below, all element and attribute names are lower-cased for lookup.\nregisterContext(SecurityContext.HTML, [\n    'iframe|srcdoc',\n    '*|innerHTML',\n    '*|outerHTML',\n]);\nregisterContext(SecurityContext.STYLE, ['*|style']);\n// NB: no SCRIPT contexts here, they are never allowed due to the parser stripping them.\nregisterContext(SecurityContext.URL, [\n    '*|formAction', 'area|href', 'area|ping', 'audio|src', 'a|href',\n    'a|ping', 'blockquote|cite', 'body|background', 'del|cite', 'form|action',\n    'img|src', 'img|srcset', 'input|src', 'ins|cite', 'q|cite',\n    'source|src', 'source|srcset', 'track|src', 'video|poster', 'video|src',\n]);\nregisterContext(SecurityContext.RESOURCE_URL, [\n    'applet|code',\n    'applet|codebase',\n    'base|href',\n    'embed|src',\n    'frame|src',\n    'head|profile',\n    'html|manifest',\n    'iframe|src',\n    'link|href',\n    'media|src',\n    'object|codebase',\n    'object|data',\n    'script|src',\n]);\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar ElementSchemaRegistry = /** @class */ (function () {\n    function ElementSchemaRegistry() {\n    }\n    return ElementSchemaRegistry;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar BOOLEAN = 'boolean';\nvar NUMBER = 'number';\nvar STRING = 'string';\nvar OBJECT = 'object';\n/**\n * This array represents the DOM schema. It encodes inheritance, properties, and events.\n *\n * ## Overview\n *\n * Each line represents one kind of element. The `element_inheritance` and properties are joined\n * using `element_inheritance|properties` syntax.\n *\n * ## Element Inheritance\n *\n * The `element_inheritance` can be further subdivided as `element1,element2,...^parentElement`.\n * Here the individual elements are separated by `,` (commas). Every element in the list\n * has identical properties.\n *\n * An `element` may inherit additional properties from `parentElement` If no `^parentElement` is\n * specified then `\"\"` (blank) element is assumed.\n *\n * NOTE: The blank element inherits from root `[Element]` element, the super element of all\n * elements.\n *\n * NOTE an element prefix such as `:svg:` has no special meaning to the schema.\n *\n * ## Properties\n *\n * Each element has a set of properties separated by `,` (commas). Each property can be prefixed\n * by a special character designating its type:\n *\n * - (no prefix): property is a string.\n * - `*`: property represents an event.\n * - `!`: property is a boolean.\n * - `#`: property is a number.\n * - `%`: property is an object.\n *\n * ## Query\n *\n * The class creates an internal squas representation which allows to easily answer the query of\n * if a given property exist on a given element.\n *\n * NOTE: We don't yet support querying for types or events.\n * NOTE: This schema is auto extracted from `schema_extractor.ts` located in the test folder,\n *       see dom_element_schema_registry_spec.ts\n */\n// =================================================================================================\n// =================================================================================================\n// =========== S T O P   -  S T O P   -  S T O P   -  S T O P   -  S T O P   -  S T O P  ===========\n// =================================================================================================\n// =================================================================================================\n//\n//                       DO NOT EDIT THIS DOM SCHEMA WITHOUT A SECURITY REVIEW!\n//\n// Newly added properties must be security reviewed and assigned an appropriate SecurityContext in\n// dom_security_schema.ts. Reach out to mprobst & rjamet for details.\n//\n// =================================================================================================\nvar SCHEMA = [\n    '[Element]|textContent,%classList,className,id,innerHTML,*beforecopy,*beforecut,*beforepaste,*copy,*cut,*paste,*search,*selectstart,*webkitfullscreenchange,*webkitfullscreenerror,*wheel,outerHTML,#scrollLeft,#scrollTop,slot' +\n        /* added manually to avoid breaking changes */\n        ',*message,*mozfullscreenchange,*mozfullscreenerror,*mozpointerlockchange,*mozpointerlockerror,*webglcontextcreationerror,*webglcontextlost,*webglcontextrestored',\n    '[HTMLElement]^[Element]|accessKey,contentEditable,dir,!draggable,!hidden,innerText,lang,*abort,*auxclick,*blur,*cancel,*canplay,*canplaythrough,*change,*click,*close,*contextmenu,*cuechange,*dblclick,*drag,*dragend,*dragenter,*dragleave,*dragover,*dragstart,*drop,*durationchange,*emptied,*ended,*error,*focus,*gotpointercapture,*input,*invalid,*keydown,*keypress,*keyup,*load,*loadeddata,*loadedmetadata,*loadstart,*lostpointercapture,*mousedown,*mouseenter,*mouseleave,*mousemove,*mouseout,*mouseover,*mouseup,*mousewheel,*pause,*play,*playing,*pointercancel,*pointerdown,*pointerenter,*pointerleave,*pointermove,*pointerout,*pointerover,*pointerup,*progress,*ratechange,*reset,*resize,*scroll,*seeked,*seeking,*select,*show,*stalled,*submit,*suspend,*timeupdate,*toggle,*volumechange,*waiting,outerText,!spellcheck,%style,#tabIndex,title,!translate',\n    'abbr,address,article,aside,b,bdi,bdo,cite,code,dd,dfn,dt,em,figcaption,figure,footer,header,i,kbd,main,mark,nav,noscript,rb,rp,rt,rtc,ruby,s,samp,section,small,strong,sub,sup,u,var,wbr^[HTMLElement]|accessKey,contentEditable,dir,!draggable,!hidden,innerText,lang,*abort,*auxclick,*blur,*cancel,*canplay,*canplaythrough,*change,*click,*close,*contextmenu,*cuechange,*dblclick,*drag,*dragend,*dragenter,*dragleave,*dragover,*dragstart,*drop,*durationchange,*emptied,*ended,*error,*focus,*gotpointercapture,*input,*invalid,*keydown,*keypress,*keyup,*load,*loadeddata,*loadedmetadata,*loadstart,*lostpointercapture,*mousedown,*mouseenter,*mouseleave,*mousemove,*mouseout,*mouseover,*mouseup,*mousewheel,*pause,*play,*playing,*pointercancel,*pointerdown,*pointerenter,*pointerleave,*pointermove,*pointerout,*pointerover,*pointerup,*progress,*ratechange,*reset,*resize,*scroll,*seeked,*seeking,*select,*show,*stalled,*submit,*suspend,*timeupdate,*toggle,*volumechange,*waiting,outerText,!spellcheck,%style,#tabIndex,title,!translate',\n    'media^[HTMLElement]|!autoplay,!controls,%controlsList,%crossOrigin,#currentTime,!defaultMuted,#defaultPlaybackRate,!disableRemotePlayback,!loop,!muted,*encrypted,*waitingforkey,#playbackRate,preload,src,%srcObject,#volume',\n    ':svg:^[HTMLElement]|*abort,*auxclick,*blur,*cancel,*canplay,*canplaythrough,*change,*click,*close,*contextmenu,*cuechange,*dblclick,*drag,*dragend,*dragenter,*dragleave,*dragover,*dragstart,*drop,*durationchange,*emptied,*ended,*error,*focus,*gotpointercapture,*input,*invalid,*keydown,*keypress,*keyup,*load,*loadeddata,*loadedmetadata,*loadstart,*lostpointercapture,*mousedown,*mouseenter,*mouseleave,*mousemove,*mouseout,*mouseover,*mouseup,*mousewheel,*pause,*play,*playing,*pointercancel,*pointerdown,*pointerenter,*pointerleave,*pointermove,*pointerout,*pointerover,*pointerup,*progress,*ratechange,*reset,*resize,*scroll,*seeked,*seeking,*select,*show,*stalled,*submit,*suspend,*timeupdate,*toggle,*volumechange,*waiting,%style,#tabIndex',\n    ':svg:graphics^:svg:|',\n    ':svg:animation^:svg:|*begin,*end,*repeat',\n    ':svg:geometry^:svg:|',\n    ':svg:componentTransferFunction^:svg:|',\n    ':svg:gradient^:svg:|',\n    ':svg:textContent^:svg:graphics|',\n    ':svg:textPositioning^:svg:textContent|',\n    'a^[HTMLElement]|charset,coords,download,hash,host,hostname,href,hreflang,name,password,pathname,ping,port,protocol,referrerPolicy,rel,rev,search,shape,target,text,type,username',\n    'area^[HTMLElement]|alt,coords,download,hash,host,hostname,href,!noHref,password,pathname,ping,port,protocol,referrerPolicy,rel,search,shape,target,username',\n    'audio^media|',\n    'br^[HTMLElement]|clear',\n    'base^[HTMLElement]|href,target',\n    'body^[HTMLElement]|aLink,background,bgColor,link,*beforeunload,*blur,*error,*focus,*hashchange,*languagechange,*load,*message,*offline,*online,*pagehide,*pageshow,*popstate,*rejectionhandled,*resize,*scroll,*storage,*unhandledrejection,*unload,text,vLink',\n    'button^[HTMLElement]|!autofocus,!disabled,formAction,formEnctype,formMethod,!formNoValidate,formTarget,name,type,value',\n    'canvas^[HTMLElement]|#height,#width',\n    'content^[HTMLElement]|select',\n    'dl^[HTMLElement]|!compact',\n    'datalist^[HTMLElement]|',\n    'details^[HTMLElement]|!open',\n    'dialog^[HTMLElement]|!open,returnValue',\n    'dir^[HTMLElement]|!compact',\n    'div^[HTMLElement]|align',\n    'embed^[HTMLElement]|align,height,name,src,type,width',\n    'fieldset^[HTMLElement]|!disabled,name',\n    'font^[HTMLElement]|color,face,size',\n    'form^[HTMLElement]|acceptCharset,action,autocomplete,encoding,enctype,method,name,!noValidate,target',\n    'frame^[HTMLElement]|frameBorder,longDesc,marginHeight,marginWidth,name,!noResize,scrolling,src',\n    'frameset^[HTMLElement]|cols,*beforeunload,*blur,*error,*focus,*hashchange,*languagechange,*load,*message,*offline,*online,*pagehide,*pageshow,*popstate,*rejectionhandled,*resize,*scroll,*storage,*unhandledrejection,*unload,rows',\n    'hr^[HTMLElement]|align,color,!noShade,size,width',\n    'head^[HTMLElement]|',\n    'h1,h2,h3,h4,h5,h6^[HTMLElement]|align',\n    'html^[HTMLElement]|version',\n    'iframe^[HTMLElement]|align,!allowFullscreen,frameBorder,height,longDesc,marginHeight,marginWidth,name,referrerPolicy,%sandbox,scrolling,src,srcdoc,width',\n    'img^[HTMLElement]|align,alt,border,%crossOrigin,#height,#hspace,!isMap,longDesc,lowsrc,name,referrerPolicy,sizes,src,srcset,useMap,#vspace,#width',\n    'input^[HTMLElement]|accept,align,alt,autocapitalize,autocomplete,!autofocus,!checked,!defaultChecked,defaultValue,dirName,!disabled,%files,formAction,formEnctype,formMethod,!formNoValidate,formTarget,#height,!incremental,!indeterminate,max,#maxLength,min,#minLength,!multiple,name,pattern,placeholder,!readOnly,!required,selectionDirection,#selectionEnd,#selectionStart,#size,src,step,type,useMap,value,%valueAsDate,#valueAsNumber,#width',\n    'li^[HTMLElement]|type,#value',\n    'label^[HTMLElement]|htmlFor',\n    'legend^[HTMLElement]|align',\n    'link^[HTMLElement]|as,charset,%crossOrigin,!disabled,href,hreflang,integrity,media,referrerPolicy,rel,%relList,rev,%sizes,target,type',\n    'map^[HTMLElement]|name',\n    'marquee^[HTMLElement]|behavior,bgColor,direction,height,#hspace,#loop,#scrollAmount,#scrollDelay,!trueSpeed,#vspace,width',\n    'menu^[HTMLElement]|!compact',\n    'meta^[HTMLElement]|content,httpEquiv,name,scheme',\n    'meter^[HTMLElement]|#high,#low,#max,#min,#optimum,#value',\n    'ins,del^[HTMLElement]|cite,dateTime',\n    'ol^[HTMLElement]|!compact,!reversed,#start,type',\n    'object^[HTMLElement]|align,archive,border,code,codeBase,codeType,data,!declare,height,#hspace,name,standby,type,useMap,#vspace,width',\n    'optgroup^[HTMLElement]|!disabled,label',\n    'option^[HTMLElement]|!defaultSelected,!disabled,label,!selected,text,value',\n    'output^[HTMLElement]|defaultValue,%htmlFor,name,value',\n    'p^[HTMLElement]|align',\n    'param^[HTMLElement]|name,type,value,valueType',\n    'picture^[HTMLElement]|',\n    'pre^[HTMLElement]|#width',\n    'progress^[HTMLElement]|#max,#value',\n    'q,blockquote,cite^[HTMLElement]|',\n    'script^[HTMLElement]|!async,charset,%crossOrigin,!defer,event,htmlFor,integrity,src,text,type',\n    'select^[HTMLElement]|!autofocus,!disabled,#length,!multiple,name,!required,#selectedIndex,#size,value',\n    'shadow^[HTMLElement]|',\n    'slot^[HTMLElement]|name',\n    'source^[HTMLElement]|media,sizes,src,srcset,type',\n    'span^[HTMLElement]|',\n    'style^[HTMLElement]|!disabled,media,type',\n    'caption^[HTMLElement]|align',\n    'th,td^[HTMLElement]|abbr,align,axis,bgColor,ch,chOff,#colSpan,headers,height,!noWrap,#rowSpan,scope,vAlign,width',\n    'col,colgroup^[HTMLElement]|align,ch,chOff,#span,vAlign,width',\n    'table^[HTMLElement]|align,bgColor,border,%caption,cellPadding,cellSpacing,frame,rules,summary,%tFoot,%tHead,width',\n    'tr^[HTMLElement]|align,bgColor,ch,chOff,vAlign',\n    'tfoot,thead,tbody^[HTMLElement]|align,ch,chOff,vAlign',\n    'template^[HTMLElement]|',\n    'textarea^[HTMLElement]|autocapitalize,!autofocus,#cols,defaultValue,dirName,!disabled,#maxLength,#minLength,name,placeholder,!readOnly,!required,#rows,selectionDirection,#selectionEnd,#selectionStart,value,wrap',\n    'title^[HTMLElement]|text',\n    'track^[HTMLElement]|!default,kind,label,src,srclang',\n    'ul^[HTMLElement]|!compact,type',\n    'unknown^[HTMLElement]|',\n    'video^media|#height,poster,#width',\n    ':svg:a^:svg:graphics|',\n    ':svg:animate^:svg:animation|',\n    ':svg:animateMotion^:svg:animation|',\n    ':svg:animateTransform^:svg:animation|',\n    ':svg:circle^:svg:geometry|',\n    ':svg:clipPath^:svg:graphics|',\n    ':svg:defs^:svg:graphics|',\n    ':svg:desc^:svg:|',\n    ':svg:discard^:svg:|',\n    ':svg:ellipse^:svg:geometry|',\n    ':svg:feBlend^:svg:|',\n    ':svg:feColorMatrix^:svg:|',\n    ':svg:feComponentTransfer^:svg:|',\n    ':svg:feComposite^:svg:|',\n    ':svg:feConvolveMatrix^:svg:|',\n    ':svg:feDiffuseLighting^:svg:|',\n    ':svg:feDisplacementMap^:svg:|',\n    ':svg:feDistantLight^:svg:|',\n    ':svg:feDropShadow^:svg:|',\n    ':svg:feFlood^:svg:|',\n    ':svg:feFuncA^:svg:componentTransferFunction|',\n    ':svg:feFuncB^:svg:componentTransferFunction|',\n    ':svg:feFuncG^:svg:componentTransferFunction|',\n    ':svg:feFuncR^:svg:componentTransferFunction|',\n    ':svg:feGaussianBlur^:svg:|',\n    ':svg:feImage^:svg:|',\n    ':svg:feMerge^:svg:|',\n    ':svg:feMergeNode^:svg:|',\n    ':svg:feMorphology^:svg:|',\n    ':svg:feOffset^:svg:|',\n    ':svg:fePointLight^:svg:|',\n    ':svg:feSpecularLighting^:svg:|',\n    ':svg:feSpotLight^:svg:|',\n    ':svg:feTile^:svg:|',\n    ':svg:feTurbulence^:svg:|',\n    ':svg:filter^:svg:|',\n    ':svg:foreignObject^:svg:graphics|',\n    ':svg:g^:svg:graphics|',\n    ':svg:image^:svg:graphics|',\n    ':svg:line^:svg:geometry|',\n    ':svg:linearGradient^:svg:gradient|',\n    ':svg:mpath^:svg:|',\n    ':svg:marker^:svg:|',\n    ':svg:mask^:svg:|',\n    ':svg:metadata^:svg:|',\n    ':svg:path^:svg:geometry|',\n    ':svg:pattern^:svg:|',\n    ':svg:polygon^:svg:geometry|',\n    ':svg:polyline^:svg:geometry|',\n    ':svg:radialGradient^:svg:gradient|',\n    ':svg:rect^:svg:geometry|',\n    ':svg:svg^:svg:graphics|#currentScale,#zoomAndPan',\n    ':svg:script^:svg:|type',\n    ':svg:set^:svg:animation|',\n    ':svg:stop^:svg:|',\n    ':svg:style^:svg:|!disabled,media,title,type',\n    ':svg:switch^:svg:graphics|',\n    ':svg:symbol^:svg:|',\n    ':svg:tspan^:svg:textPositioning|',\n    ':svg:text^:svg:textPositioning|',\n    ':svg:textPath^:svg:textContent|',\n    ':svg:title^:svg:|',\n    ':svg:use^:svg:graphics|',\n    ':svg:view^:svg:|#zoomAndPan',\n    'data^[HTMLElement]|value',\n    'keygen^[HTMLElement]|!autofocus,challenge,!disabled,form,keytype,name',\n    'menuitem^[HTMLElement]|type,label,icon,!disabled,!checked,radiogroup,!default',\n    'summary^[HTMLElement]|',\n    'time^[HTMLElement]|dateTime',\n    ':svg:cursor^:svg:|',\n];\nvar _ATTR_TO_PROP = {\n    'class': 'className',\n    'for': 'htmlFor',\n    'formaction': 'formAction',\n    'innerHtml': 'innerHTML',\n    'readonly': 'readOnly',\n    'tabindex': 'tabIndex',\n};\nvar DomElementSchemaRegistry = /** @class */ (function (_super) {\n    __extends(DomElementSchemaRegistry, _super);\n    function DomElementSchemaRegistry() {\n        var _this = _super.call(this) || this;\n        _this._schema = {};\n        SCHEMA.forEach(function (encodedType) {\n            var type = {};\n            var _a = __read(encodedType.split('|'), 2), strType = _a[0], strProperties = _a[1];\n            var properties = strProperties.split(',');\n            var _b = __read(strType.split('^'), 2), typeNames = _b[0], superName = _b[1];\n            typeNames.split(',').forEach(function (tag) { return _this._schema[tag.toLowerCase()] = type; });\n            var superType = superName && _this._schema[superName.toLowerCase()];\n            if (superType) {\n                Object.keys(superType).forEach(function (prop) { type[prop] = superType[prop]; });\n            }\n            properties.forEach(function (property) {\n                if (property.length > 0) {\n                    switch (property[0]) {\n                        case '*':\n                            // We don't yet support events.\n                            // If ever allowing to bind to events, GO THROUGH A SECURITY REVIEW, allowing events\n                            // will\n                            // almost certainly introduce bad XSS vulnerabilities.\n                            // type[property.substring(1)] = EVENT;\n                            break;\n                        case '!':\n                            type[property.substring(1)] = BOOLEAN;\n                            break;\n                        case '#':\n                            type[property.substring(1)] = NUMBER;\n                            break;\n                        case '%':\n                            type[property.substring(1)] = OBJECT;\n                            break;\n                        default:\n                            type[property] = STRING;\n                    }\n                }\n            });\n        });\n        return _this;\n    }\n    DomElementSchemaRegistry.prototype.hasProperty = function (tagName, propName, schemaMetas) {\n        if (schemaMetas.some(function (schema) { return schema.name === NO_ERRORS_SCHEMA.name; })) {\n            return true;\n        }\n        if (tagName.indexOf('-') > -1) {\n            if (isNgContainer(tagName) || isNgContent(tagName)) {\n                return false;\n            }\n            if (schemaMetas.some(function (schema) { return schema.name === CUSTOM_ELEMENTS_SCHEMA.name; })) {\n                // Can't tell now as we don't know which properties a custom element will get\n                // once it is instantiated\n                return true;\n            }\n        }\n        var elementProperties = this._schema[tagName.toLowerCase()] || this._schema['unknown'];\n        return !!elementProperties[propName];\n    };\n    DomElementSchemaRegistry.prototype.hasElement = function (tagName, schemaMetas) {\n        if (schemaMetas.some(function (schema) { return schema.name === NO_ERRORS_SCHEMA.name; })) {\n            return true;\n        }\n        if (tagName.indexOf('-') > -1) {\n            if (isNgContainer(tagName) || isNgContent(tagName)) {\n                return true;\n            }\n            if (schemaMetas.some(function (schema) { return schema.name === CUSTOM_ELEMENTS_SCHEMA.name; })) {\n                // Allow any custom elements\n                return true;\n            }\n        }\n        return !!this._schema[tagName.toLowerCase()];\n    };\n    /**\n     * securityContext returns the security context for the given property on the given DOM tag.\n     *\n     * Tag and property name are statically known and cannot change at runtime, i.e. it is not\n     * possible to bind a value into a changing attribute or tag name.\n     *\n     * The filtering is white list based. All attributes in the schema above are assumed to have the\n     * 'NONE' security context, i.e. that they are safe inert string values. Only specific well known\n     * attack vectors are assigned their appropriate context.\n     */\n    DomElementSchemaRegistry.prototype.securityContext = function (tagName, propName, isAttribute) {\n        if (isAttribute) {\n            // NB: For security purposes, use the mapped property name, not the attribute name.\n            propName = this.getMappedPropName(propName);\n        }\n        // Make sure comparisons are case insensitive, so that case differences between attribute and\n        // property names do not have a security impact.\n        tagName = tagName.toLowerCase();\n        propName = propName.toLowerCase();\n        var ctx = SECURITY_SCHEMA[tagName + '|' + propName];\n        if (ctx) {\n            return ctx;\n        }\n        ctx = SECURITY_SCHEMA['*|' + propName];\n        return ctx ? ctx : SecurityContext.NONE;\n    };\n    DomElementSchemaRegistry.prototype.getMappedPropName = function (propName) { return _ATTR_TO_PROP[propName] || propName; };\n    DomElementSchemaRegistry.prototype.getDefaultComponentElementName = function () { return 'ng-component'; };\n    DomElementSchemaRegistry.prototype.validateProperty = function (name) {\n        if (name.toLowerCase().startsWith('on')) {\n            var msg = \"Binding to event property '\" + name + \"' is disallowed for security reasons, \" +\n                (\"please use (\" + name.slice(2) + \")=...\") +\n                (\"\\nIf '\" + name + \"' is a directive input, make sure the directive is imported by the\") +\n                \" current module.\";\n            return { error: true, msg: msg };\n        }\n        else {\n            return { error: false };\n        }\n    };\n    DomElementSchemaRegistry.prototype.validateAttribute = function (name) {\n        if (name.toLowerCase().startsWith('on')) {\n            var msg = \"Binding to event attribute '\" + name + \"' is disallowed for security reasons, \" +\n                (\"please use (\" + name.slice(2) + \")=...\");\n            return { error: true, msg: msg };\n        }\n        else {\n            return { error: false };\n        }\n    };\n    DomElementSchemaRegistry.prototype.allKnownElementNames = function () { return Object.keys(this._schema); };\n    DomElementSchemaRegistry.prototype.normalizeAnimationStyleProperty = function (propName) {\n        return dashCaseToCamelCase(propName);\n    };\n    DomElementSchemaRegistry.prototype.normalizeAnimationStyleValue = function (camelCaseProp, userProvidedProp, val) {\n        var unit = '';\n        var strVal = val.toString().trim();\n        var errorMsg = null;\n        if (_isPixelDimensionStyle(camelCaseProp) && val !== 0 && val !== '0') {\n            if (typeof val === 'number') {\n                unit = 'px';\n            }\n            else {\n                var valAndSuffixMatch = val.match(/^[+-]?[\\d\\.]+([a-z]*)$/);\n                if (valAndSuffixMatch && valAndSuffixMatch[1].length == 0) {\n                    errorMsg = \"Please provide a CSS unit value for \" + userProvidedProp + \":\" + val;\n                }\n            }\n        }\n        return { error: errorMsg, value: strVal + unit };\n    };\n    return DomElementSchemaRegistry;\n}(ElementSchemaRegistry));\nfunction _isPixelDimensionStyle(prop) {\n    switch (prop) {\n        case 'width':\n        case 'height':\n        case 'minWidth':\n        case 'minHeight':\n        case 'maxWidth':\n        case 'maxHeight':\n        case 'left':\n        case 'top':\n        case 'bottom':\n        case 'right':\n        case 'fontSize':\n        case 'outlineWidth':\n        case 'outlineOffset':\n        case 'paddingTop':\n        case 'paddingLeft':\n        case 'paddingBottom':\n        case 'paddingRight':\n        case 'marginTop':\n        case 'marginLeft':\n        case 'marginBottom':\n        case 'marginRight':\n        case 'borderRadius':\n        case 'borderWidth':\n        case 'borderTopWidth':\n        case 'borderLeftWidth':\n        case 'borderRightWidth':\n        case 'borderBottomWidth':\n        case 'textIndent':\n            return true;\n        default:\n            return false;\n    }\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar PRESERVE_WS_ATTR_NAME = 'ngPreserveWhitespaces';\nvar SKIP_WS_TRIM_TAGS = new Set(['pre', 'template', 'textarea', 'script', 'style']);\n// Equivalent to \\s with \\u00a0 (non-breaking space) excluded.\n// Based on https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp\nvar WS_CHARS = ' \\f\\n\\r\\t\\v\\u1680\\u180e\\u2000-\\u200a\\u2028\\u2029\\u202f\\u205f\\u3000\\ufeff';\nvar NO_WS_REGEXP = new RegExp(\"[^\" + WS_CHARS + \"]\");\nvar WS_REPLACE_REGEXP = new RegExp(\"[\" + WS_CHARS + \"]{2,}\", 'g');\nfunction hasPreserveWhitespacesAttr(attrs) {\n    return attrs.some(function (attr) { return attr.name === PRESERVE_WS_ATTR_NAME; });\n}\n/**\n * Angular Dart introduced &ngsp; as a placeholder for non-removable space, see:\n * https://github.com/dart-lang/angular/blob/0bb611387d29d65b5af7f9d2515ab571fd3fbee4/_tests/test/compiler/preserve_whitespace_test.dart#L25-L32\n * In Angular Dart &ngsp; is converted to the 0xE500 PUA (Private Use Areas) unicode character\n * and later on replaced by a space. We are re-implementing the same idea here.\n */\nfunction replaceNgsp(value) {\n    // lexer is replacing the &ngsp; pseudo-entity with NGSP_UNICODE\n    return value.replace(new RegExp(NGSP_UNICODE, 'g'), ' ');\n}\n/**\n * This visitor can walk HTML parse tree and remove / trim text nodes using the following rules:\n * - consider spaces, tabs and new lines as whitespace characters;\n * - drop text nodes consisting of whitespace characters only;\n * - for all other text nodes replace consecutive whitespace characters with one space;\n * - convert &ngsp; pseudo-entity to a single space;\n *\n * Removal and trimming of whitespaces have positive performance impact (less code to generate\n * while compiling templates, faster view creation). At the same time it can be \"destructive\"\n * in some cases (whitespaces can influence layout). Because of the potential of breaking layout\n * this visitor is not activated by default in Angular 5 and people need to explicitly opt-in for\n * whitespace removal. The default option for whitespace removal will be revisited in Angular 6\n * and might be changed to \"on\" by default.\n */\nvar WhitespaceVisitor = /** @class */ (function () {\n    function WhitespaceVisitor() {\n    }\n    WhitespaceVisitor.prototype.visitElement = function (element, context) {\n        if (SKIP_WS_TRIM_TAGS.has(element.name) || hasPreserveWhitespacesAttr(element.attrs)) {\n            // don't descent into elements where we need to preserve whitespaces\n            // but still visit all attributes to eliminate one used as a market to preserve WS\n            return new Element(element.name, visitAll(this, element.attrs), element.children, element.sourceSpan, element.startSourceSpan, element.endSourceSpan);\n        }\n        return new Element(element.name, element.attrs, visitAll(this, element.children), element.sourceSpan, element.startSourceSpan, element.endSourceSpan);\n    };\n    WhitespaceVisitor.prototype.visitAttribute = function (attribute, context) {\n        return attribute.name !== PRESERVE_WS_ATTR_NAME ? attribute : null;\n    };\n    WhitespaceVisitor.prototype.visitText = function (text, context) {\n        var isNotBlank = text.value.match(NO_WS_REGEXP);\n        if (isNotBlank) {\n            return new Text(replaceNgsp(text.value).replace(WS_REPLACE_REGEXP, ' '), text.sourceSpan);\n        }\n        return null;\n    };\n    WhitespaceVisitor.prototype.visitComment = function (comment, context) { return comment; };\n    WhitespaceVisitor.prototype.visitExpansion = function (expansion, context) { return expansion; };\n    WhitespaceVisitor.prototype.visitExpansionCase = function (expansionCase, context) { return expansionCase; };\n    return WhitespaceVisitor;\n}());\nfunction removeWhitespaces(htmlAstWithErrors) {\n    return new ParseTreeResult(visitAll(new WhitespaceVisitor(), htmlAstWithErrors.rootNodes), htmlAstWithErrors.errors);\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n// http://cldr.unicode.org/index/cldr-spec/plural-rules\nvar PLURAL_CASES = ['zero', 'one', 'two', 'few', 'many', 'other'];\n/**\n * Expands special forms into elements.\n *\n * For example,\n *\n * ```\n * { messages.length, plural,\n *   =0 {zero}\n *   =1 {one}\n *   other {more than one}\n * }\n * ```\n *\n * will be expanded into\n *\n * ```\n * <ng-container [ngPlural]=\"messages.length\">\n *   <ng-template ngPluralCase=\"=0\">zero</ng-template>\n *   <ng-template ngPluralCase=\"=1\">one</ng-template>\n *   <ng-template ngPluralCase=\"other\">more than one</ng-template>\n * </ng-container>\n * ```\n */\nfunction expandNodes(nodes) {\n    var expander = new _Expander();\n    return new ExpansionResult(visitAll(expander, nodes), expander.isExpanded, expander.errors);\n}\nvar ExpansionResult = /** @class */ (function () {\n    function ExpansionResult(nodes, expanded, errors) {\n        this.nodes = nodes;\n        this.expanded = expanded;\n        this.errors = errors;\n    }\n    return ExpansionResult;\n}());\nvar ExpansionError = /** @class */ (function (_super) {\n    __extends(ExpansionError, _super);\n    function ExpansionError(span, errorMsg) {\n        return _super.call(this, span, errorMsg) || this;\n    }\n    return ExpansionError;\n}(ParseError));\n/**\n * Expand expansion forms (plural, select) to directives\n *\n * @internal\n */\nvar _Expander = /** @class */ (function () {\n    function _Expander() {\n        this.isExpanded = false;\n        this.errors = [];\n    }\n    _Expander.prototype.visitElement = function (element, context) {\n        return new Element(element.name, element.attrs, visitAll(this, element.children), element.sourceSpan, element.startSourceSpan, element.endSourceSpan);\n    };\n    _Expander.prototype.visitAttribute = function (attribute, context) { return attribute; };\n    _Expander.prototype.visitText = function (text, context) { return text; };\n    _Expander.prototype.visitComment = function (comment, context) { return comment; };\n    _Expander.prototype.visitExpansion = function (icu, context) {\n        this.isExpanded = true;\n        return icu.type == 'plural' ? _expandPluralForm(icu, this.errors) :\n            _expandDefaultForm(icu, this.errors);\n    };\n    _Expander.prototype.visitExpansionCase = function (icuCase, context) {\n        throw new Error('Should not be reached');\n    };\n    return _Expander;\n}());\n// Plural forms are expanded to `NgPlural` and `NgPluralCase`s\nfunction _expandPluralForm(ast, errors) {\n    var children = ast.cases.map(function (c) {\n        if (PLURAL_CASES.indexOf(c.value) == -1 && !c.value.match(/^=\\d+$/)) {\n            errors.push(new ExpansionError(c.valueSourceSpan, \"Plural cases should be \\\"=<number>\\\" or one of \" + PLURAL_CASES.join(\", \")));\n        }\n        var expansionResult = expandNodes(c.expression);\n        errors.push.apply(errors, __spread(expansionResult.errors));\n        return new Element(\"ng-template\", [new Attribute('ngPluralCase', \"\" + c.value, c.valueSourceSpan)], expansionResult.nodes, c.sourceSpan, c.sourceSpan, c.sourceSpan);\n    });\n    var switchAttr = new Attribute('[ngPlural]', ast.switchValue, ast.switchValueSourceSpan);\n    return new Element('ng-container', [switchAttr], children, ast.sourceSpan, ast.sourceSpan, ast.sourceSpan);\n}\n// ICU messages (excluding plural form) are expanded to `NgSwitch`  and `NgSwitchCase`s\nfunction _expandDefaultForm(ast, errors) {\n    var children = ast.cases.map(function (c) {\n        var expansionResult = expandNodes(c.expression);\n        errors.push.apply(errors, __spread(expansionResult.errors));\n        if (c.value === 'other') {\n            // other is the default case when no values match\n            return new Element(\"ng-template\", [new Attribute('ngSwitchDefault', '', c.valueSourceSpan)], expansionResult.nodes, c.sourceSpan, c.sourceSpan, c.sourceSpan);\n        }\n        return new Element(\"ng-template\", [new Attribute('ngSwitchCase', \"\" + c.value, c.valueSourceSpan)], expansionResult.nodes, c.sourceSpan, c.sourceSpan, c.sourceSpan);\n    });\n    var switchAttr = new Attribute('[ngSwitch]', ast.switchValue, ast.switchValueSourceSpan);\n    return new Element('ng-container', [switchAttr], children, ast.sourceSpan, ast.sourceSpan, ast.sourceSpan);\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar PROPERTY_PARTS_SEPARATOR = '.';\nvar ATTRIBUTE_PREFIX = 'attr';\nvar CLASS_PREFIX = 'class';\nvar STYLE_PREFIX = 'style';\nvar ANIMATE_PROP_PREFIX = 'animate-';\nvar BoundPropertyType;\n(function (BoundPropertyType) {\n    BoundPropertyType[BoundPropertyType[\"DEFAULT\"] = 0] = \"DEFAULT\";\n    BoundPropertyType[BoundPropertyType[\"LITERAL_ATTR\"] = 1] = \"LITERAL_ATTR\";\n    BoundPropertyType[BoundPropertyType[\"ANIMATION\"] = 2] = \"ANIMATION\";\n})(BoundPropertyType || (BoundPropertyType = {}));\n/**\n * Represents a parsed property.\n */\nvar BoundProperty = /** @class */ (function () {\n    function BoundProperty(name, expression, type, sourceSpan) {\n        this.name = name;\n        this.expression = expression;\n        this.type = type;\n        this.sourceSpan = sourceSpan;\n        this.isLiteral = this.type === BoundPropertyType.LITERAL_ATTR;\n        this.isAnimation = this.type === BoundPropertyType.ANIMATION;\n    }\n    return BoundProperty;\n}());\n/**\n * Parses bindings in templates and in the directive host area.\n */\nvar BindingParser = /** @class */ (function () {\n    function BindingParser(_exprParser, _interpolationConfig, _schemaRegistry, pipes, _targetErrors) {\n        var _this = this;\n        this._exprParser = _exprParser;\n        this._interpolationConfig = _interpolationConfig;\n        this._schemaRegistry = _schemaRegistry;\n        this._targetErrors = _targetErrors;\n        this.pipesByName = new Map();\n        this._usedPipes = new Map();\n        pipes.forEach(function (pipe) { return _this.pipesByName.set(pipe.name, pipe); });\n    }\n    BindingParser.prototype.getUsedPipes = function () { return Array.from(this._usedPipes.values()); };\n    BindingParser.prototype.createBoundHostProperties = function (dirMeta, sourceSpan) {\n        var _this = this;\n        if (dirMeta.hostProperties) {\n            var boundProps_1 = [];\n            Object.keys(dirMeta.hostProperties).forEach(function (propName) {\n                var expression = dirMeta.hostProperties[propName];\n                if (typeof expression === 'string') {\n                    _this.parsePropertyBinding(propName, expression, true, sourceSpan, [], boundProps_1);\n                }\n                else {\n                    _this._reportError(\"Value of the host property binding \\\"\" + propName + \"\\\" needs to be a string representing an expression but got \\\"\" + expression + \"\\\" (\" + typeof expression + \")\", sourceSpan);\n                }\n            });\n            return boundProps_1;\n        }\n        return null;\n    };\n    BindingParser.prototype.createDirectiveHostPropertyAsts = function (dirMeta, elementSelector, sourceSpan) {\n        var _this = this;\n        var boundProps = this.createBoundHostProperties(dirMeta, sourceSpan);\n        return boundProps &&\n            boundProps.map(function (prop) { return _this.createElementPropertyAst(elementSelector, prop); });\n    };\n    BindingParser.prototype.createDirectiveHostEventAsts = function (dirMeta, sourceSpan) {\n        var _this = this;\n        if (dirMeta.hostListeners) {\n            var targetEventAsts_1 = [];\n            Object.keys(dirMeta.hostListeners).forEach(function (propName) {\n                var expression = dirMeta.hostListeners[propName];\n                if (typeof expression === 'string') {\n                    _this.parseEvent(propName, expression, sourceSpan, [], targetEventAsts_1);\n                }\n                else {\n                    _this._reportError(\"Value of the host listener \\\"\" + propName + \"\\\" needs to be a string representing an expression but got \\\"\" + expression + \"\\\" (\" + typeof expression + \")\", sourceSpan);\n                }\n            });\n            return targetEventAsts_1;\n        }\n        return null;\n    };\n    BindingParser.prototype.parseInterpolation = function (value, sourceSpan) {\n        var sourceInfo = sourceSpan.start.toString();\n        try {\n            var ast = this._exprParser.parseInterpolation(value, sourceInfo, this._interpolationConfig);\n            if (ast)\n                this._reportExpressionParserErrors(ast.errors, sourceSpan);\n            this._checkPipes(ast, sourceSpan);\n            return ast;\n        }\n        catch (e) {\n            this._reportError(\"\" + e, sourceSpan);\n            return this._exprParser.wrapLiteralPrimitive('ERROR', sourceInfo);\n        }\n    };\n    BindingParser.prototype.parseInlineTemplateBinding = function (prefixToken, value, sourceSpan, targetMatchableAttrs, targetProps, targetVars) {\n        var bindings = this._parseTemplateBindings(prefixToken, value, sourceSpan);\n        for (var i = 0; i < bindings.length; i++) {\n            var binding = bindings[i];\n            if (binding.keyIsVar) {\n                targetVars.push(new VariableAst(binding.key, binding.name, sourceSpan));\n            }\n            else if (binding.expression) {\n                this._parsePropertyAst(binding.key, binding.expression, sourceSpan, targetMatchableAttrs, targetProps);\n            }\n            else {\n                targetMatchableAttrs.push([binding.key, '']);\n                this.parseLiteralAttr(binding.key, null, sourceSpan, targetMatchableAttrs, targetProps);\n            }\n        }\n    };\n    BindingParser.prototype._parseTemplateBindings = function (prefixToken, value, sourceSpan) {\n        var _this = this;\n        var sourceInfo = sourceSpan.start.toString();\n        try {\n            var bindingsResult = this._exprParser.parseTemplateBindings(prefixToken, value, sourceInfo);\n            this._reportExpressionParserErrors(bindingsResult.errors, sourceSpan);\n            bindingsResult.templateBindings.forEach(function (binding) {\n                if (binding.expression) {\n                    _this._checkPipes(binding.expression, sourceSpan);\n                }\n            });\n            bindingsResult.warnings.forEach(function (warning) { _this._reportError(warning, sourceSpan, ParseErrorLevel.WARNING); });\n            return bindingsResult.templateBindings;\n        }\n        catch (e) {\n            this._reportError(\"\" + e, sourceSpan);\n            return [];\n        }\n    };\n    BindingParser.prototype.parseLiteralAttr = function (name, value, sourceSpan, targetMatchableAttrs, targetProps) {\n        if (_isAnimationLabel(name)) {\n            name = name.substring(1);\n            if (value) {\n                this._reportError(\"Assigning animation triggers via @prop=\\\"exp\\\" attributes with an expression is invalid.\" +\n                    \" Use property bindings (e.g. [@prop]=\\\"exp\\\") or use an attribute without a value (e.g. @prop) instead.\", sourceSpan, ParseErrorLevel.ERROR);\n            }\n            this._parseAnimation(name, value, sourceSpan, targetMatchableAttrs, targetProps);\n        }\n        else {\n            targetProps.push(new BoundProperty(name, this._exprParser.wrapLiteralPrimitive(value, ''), BoundPropertyType.LITERAL_ATTR, sourceSpan));\n        }\n    };\n    BindingParser.prototype.parsePropertyBinding = function (name, expression, isHost, sourceSpan, targetMatchableAttrs, targetProps) {\n        var isAnimationProp = false;\n        if (name.startsWith(ANIMATE_PROP_PREFIX)) {\n            isAnimationProp = true;\n            name = name.substring(ANIMATE_PROP_PREFIX.length);\n        }\n        else if (_isAnimationLabel(name)) {\n            isAnimationProp = true;\n            name = name.substring(1);\n        }\n        if (isAnimationProp) {\n            this._parseAnimation(name, expression, sourceSpan, targetMatchableAttrs, targetProps);\n        }\n        else {\n            this._parsePropertyAst(name, this._parseBinding(expression, isHost, sourceSpan), sourceSpan, targetMatchableAttrs, targetProps);\n        }\n    };\n    BindingParser.prototype.parsePropertyInterpolation = function (name, value, sourceSpan, targetMatchableAttrs, targetProps) {\n        var expr = this.parseInterpolation(value, sourceSpan);\n        if (expr) {\n            this._parsePropertyAst(name, expr, sourceSpan, targetMatchableAttrs, targetProps);\n            return true;\n        }\n        return false;\n    };\n    BindingParser.prototype._parsePropertyAst = function (name, ast, sourceSpan, targetMatchableAttrs, targetProps) {\n        targetMatchableAttrs.push([name, ast.source]);\n        targetProps.push(new BoundProperty(name, ast, BoundPropertyType.DEFAULT, sourceSpan));\n    };\n    BindingParser.prototype._parseAnimation = function (name, expression, sourceSpan, targetMatchableAttrs, targetProps) {\n        // This will occur when a @trigger is not paired with an expression.\n        // For animations it is valid to not have an expression since */void\n        // states will be applied by angular when the element is attached/detached\n        var ast = this._parseBinding(expression || 'undefined', false, sourceSpan);\n        targetMatchableAttrs.push([name, ast.source]);\n        targetProps.push(new BoundProperty(name, ast, BoundPropertyType.ANIMATION, sourceSpan));\n    };\n    BindingParser.prototype._parseBinding = function (value, isHostBinding, sourceSpan) {\n        var sourceInfo = sourceSpan.start.toString();\n        try {\n            var ast = isHostBinding ?\n                this._exprParser.parseSimpleBinding(value, sourceInfo, this._interpolationConfig) :\n                this._exprParser.parseBinding(value, sourceInfo, this._interpolationConfig);\n            if (ast)\n                this._reportExpressionParserErrors(ast.errors, sourceSpan);\n            this._checkPipes(ast, sourceSpan);\n            return ast;\n        }\n        catch (e) {\n            this._reportError(\"\" + e, sourceSpan);\n            return this._exprParser.wrapLiteralPrimitive('ERROR', sourceInfo);\n        }\n    };\n    BindingParser.prototype.createElementPropertyAst = function (elementSelector, boundProp) {\n        if (boundProp.isAnimation) {\n            return new BoundElementPropertyAst(boundProp.name, PropertyBindingType.Animation, SecurityContext.NONE, boundProp.expression, null, boundProp.sourceSpan);\n        }\n        var unit = null;\n        var bindingType = undefined;\n        var boundPropertyName = null;\n        var parts = boundProp.name.split(PROPERTY_PARTS_SEPARATOR);\n        var securityContexts = undefined;\n        // Check check for special cases (prefix style, attr, class)\n        if (parts.length > 1) {\n            if (parts[0] == ATTRIBUTE_PREFIX) {\n                boundPropertyName = parts[1];\n                this._validatePropertyOrAttributeName(boundPropertyName, boundProp.sourceSpan, true);\n                securityContexts = calcPossibleSecurityContexts(this._schemaRegistry, elementSelector, boundPropertyName, true);\n                var nsSeparatorIdx = boundPropertyName.indexOf(':');\n                if (nsSeparatorIdx > -1) {\n                    var ns = boundPropertyName.substring(0, nsSeparatorIdx);\n                    var name_1 = boundPropertyName.substring(nsSeparatorIdx + 1);\n                    boundPropertyName = mergeNsAndName(ns, name_1);\n                }\n                bindingType = PropertyBindingType.Attribute;\n            }\n            else if (parts[0] == CLASS_PREFIX) {\n                boundPropertyName = parts[1];\n                bindingType = PropertyBindingType.Class;\n                securityContexts = [SecurityContext.NONE];\n            }\n            else if (parts[0] == STYLE_PREFIX) {\n                unit = parts.length > 2 ? parts[2] : null;\n                boundPropertyName = parts[1];\n                bindingType = PropertyBindingType.Style;\n                securityContexts = [SecurityContext.STYLE];\n            }\n        }\n        // If not a special case, use the full property name\n        if (boundPropertyName === null) {\n            boundPropertyName = this._schemaRegistry.getMappedPropName(boundProp.name);\n            securityContexts = calcPossibleSecurityContexts(this._schemaRegistry, elementSelector, boundPropertyName, false);\n            bindingType = PropertyBindingType.Property;\n            this._validatePropertyOrAttributeName(boundPropertyName, boundProp.sourceSpan, false);\n        }\n        return new BoundElementPropertyAst(boundPropertyName, bindingType, securityContexts[0], boundProp.expression, unit, boundProp.sourceSpan);\n    };\n    BindingParser.prototype.parseEvent = function (name, expression, sourceSpan, targetMatchableAttrs, targetEvents) {\n        if (_isAnimationLabel(name)) {\n            name = name.substr(1);\n            this._parseAnimationEvent(name, expression, sourceSpan, targetEvents);\n        }\n        else {\n            this._parseEvent(name, expression, sourceSpan, targetMatchableAttrs, targetEvents);\n        }\n    };\n    BindingParser.prototype._parseAnimationEvent = function (name, expression, sourceSpan, targetEvents) {\n        var matches = splitAtPeriod(name, [name, '']);\n        var eventName = matches[0];\n        var phase = matches[1].toLowerCase();\n        if (phase) {\n            switch (phase) {\n                case 'start':\n                case 'done':\n                    var ast = this._parseAction(expression, sourceSpan);\n                    targetEvents.push(new BoundEventAst(eventName, null, phase, ast, sourceSpan));\n                    break;\n                default:\n                    this._reportError(\"The provided animation output phase value \\\"\" + phase + \"\\\" for \\\"@\" + eventName + \"\\\" is not supported (use start or done)\", sourceSpan);\n                    break;\n            }\n        }\n        else {\n            this._reportError(\"The animation trigger output event (@\" + eventName + \") is missing its phase value name (start or done are currently supported)\", sourceSpan);\n        }\n    };\n    BindingParser.prototype._parseEvent = function (name, expression, sourceSpan, targetMatchableAttrs, targetEvents) {\n        // long format: 'target: eventName'\n        var _a = __read(splitAtColon(name, [null, name]), 2), target = _a[0], eventName = _a[1];\n        var ast = this._parseAction(expression, sourceSpan);\n        targetMatchableAttrs.push([name, ast.source]);\n        targetEvents.push(new BoundEventAst(eventName, target, null, ast, sourceSpan));\n        // Don't detect directives for event names for now,\n        // so don't add the event name to the matchableAttrs\n    };\n    BindingParser.prototype._parseAction = function (value, sourceSpan) {\n        var sourceInfo = sourceSpan.start.toString();\n        try {\n            var ast = this._exprParser.parseAction(value, sourceInfo, this._interpolationConfig);\n            if (ast) {\n                this._reportExpressionParserErrors(ast.errors, sourceSpan);\n            }\n            if (!ast || ast.ast instanceof EmptyExpr) {\n                this._reportError(\"Empty expressions are not allowed\", sourceSpan);\n                return this._exprParser.wrapLiteralPrimitive('ERROR', sourceInfo);\n            }\n            this._checkPipes(ast, sourceSpan);\n            return ast;\n        }\n        catch (e) {\n            this._reportError(\"\" + e, sourceSpan);\n            return this._exprParser.wrapLiteralPrimitive('ERROR', sourceInfo);\n        }\n    };\n    BindingParser.prototype._reportError = function (message, sourceSpan, level) {\n        if (level === void 0) { level = ParseErrorLevel.ERROR; }\n        this._targetErrors.push(new ParseError(sourceSpan, message, level));\n    };\n    BindingParser.prototype._reportExpressionParserErrors = function (errors, sourceSpan) {\n        try {\n            for (var errors_1 = __values(errors), errors_1_1 = errors_1.next(); !errors_1_1.done; errors_1_1 = errors_1.next()) {\n                var error$$1 = errors_1_1.value;\n                this._reportError(error$$1.message, sourceSpan);\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (errors_1_1 && !errors_1_1.done && (_a = errors_1.return)) _a.call(errors_1);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        var e_1, _a;\n    };\n    BindingParser.prototype._checkPipes = function (ast, sourceSpan) {\n        var _this = this;\n        if (ast) {\n            var collector = new PipeCollector();\n            ast.visit(collector);\n            collector.pipes.forEach(function (ast, pipeName) {\n                var pipeMeta = _this.pipesByName.get(pipeName);\n                if (!pipeMeta) {\n                    _this._reportError(\"The pipe '\" + pipeName + \"' could not be found\", new ParseSourceSpan(sourceSpan.start.moveBy(ast.span.start), sourceSpan.start.moveBy(ast.span.end)));\n                }\n                else {\n                    _this._usedPipes.set(pipeName, pipeMeta);\n                }\n            });\n        }\n    };\n    /**\n     * @param propName the name of the property / attribute\n     * @param sourceSpan\n     * @param isAttr true when binding to an attribute\n     */\n    BindingParser.prototype._validatePropertyOrAttributeName = function (propName, sourceSpan, isAttr) {\n        var report = isAttr ? this._schemaRegistry.validateAttribute(propName) :\n            this._schemaRegistry.validateProperty(propName);\n        if (report.error) {\n            this._reportError(report.msg, sourceSpan, ParseErrorLevel.ERROR);\n        }\n    };\n    return BindingParser;\n}());\nvar PipeCollector = /** @class */ (function (_super) {\n    __extends(PipeCollector, _super);\n    function PipeCollector() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.pipes = new Map();\n        return _this;\n    }\n    PipeCollector.prototype.visitPipe = function (ast, context) {\n        this.pipes.set(ast.name, ast);\n        ast.exp.visit(this);\n        this.visitAll(ast.args, context);\n        return null;\n    };\n    return PipeCollector;\n}(RecursiveAstVisitor));\nfunction _isAnimationLabel(name) {\n    return name[0] == '@';\n}\nfunction calcPossibleSecurityContexts(registry, selector, propName, isAttribute) {\n    var ctxs = [];\n    CssSelector.parse(selector).forEach(function (selector) {\n        var elementNames = selector.element ? [selector.element] : registry.allKnownElementNames();\n        var notElementNames = new Set(selector.notSelectors.filter(function (selector) { return selector.isElementSelector(); })\n            .map(function (selector) { return selector.element; }));\n        var possibleElementNames = elementNames.filter(function (elementName) { return !notElementNames.has(elementName); });\n        ctxs.push.apply(ctxs, __spread(possibleElementNames.map(function (elementName) { return registry.securityContext(elementName, propName, isAttribute); })));\n    });\n    return ctxs.length === 0 ? [SecurityContext.NONE] : Array.from(new Set(ctxs)).sort();\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar BIND_NAME_REGEXP = /^(?:(?:(?:(bind-)|(let-)|(ref-|#)|(on-)|(bindon-)|(@))(.+))|\\[\\(([^\\)]+)\\)\\]|\\[([^\\]]+)\\]|\\(([^\\)]+)\\))$/;\n// Group 1 = \"bind-\"\nvar KW_BIND_IDX = 1;\n// Group 2 = \"let-\"\nvar KW_LET_IDX = 2;\n// Group 3 = \"ref-/#\"\nvar KW_REF_IDX = 3;\n// Group 4 = \"on-\"\nvar KW_ON_IDX = 4;\n// Group 5 = \"bindon-\"\nvar KW_BINDON_IDX = 5;\n// Group 6 = \"@\"\nvar KW_AT_IDX = 6;\n// Group 7 = the identifier after \"bind-\", \"let-\", \"ref-/#\", \"on-\", \"bindon-\" or \"@\"\nvar IDENT_KW_IDX = 7;\n// Group 8 = identifier inside [()]\nvar IDENT_BANANA_BOX_IDX = 8;\n// Group 9 = identifier inside []\nvar IDENT_PROPERTY_IDX = 9;\n// Group 10 = identifier inside ()\nvar IDENT_EVENT_IDX = 10;\nvar TEMPLATE_ATTR_PREFIX = '*';\nvar CLASS_ATTR = 'class';\nvar TEXT_CSS_SELECTOR = CssSelector.parse('*')[0];\nvar TemplateParseError = /** @class */ (function (_super) {\n    __extends(TemplateParseError, _super);\n    function TemplateParseError(message, span, level) {\n        return _super.call(this, span, message, level) || this;\n    }\n    return TemplateParseError;\n}(ParseError));\nvar TemplateParseResult = /** @class */ (function () {\n    function TemplateParseResult(templateAst, usedPipes, errors) {\n        this.templateAst = templateAst;\n        this.usedPipes = usedPipes;\n        this.errors = errors;\n    }\n    return TemplateParseResult;\n}());\nvar TemplateParser = /** @class */ (function () {\n    function TemplateParser(_config, _reflector, _exprParser, _schemaRegistry, _htmlParser, _console, transforms) {\n        this._config = _config;\n        this._reflector = _reflector;\n        this._exprParser = _exprParser;\n        this._schemaRegistry = _schemaRegistry;\n        this._htmlParser = _htmlParser;\n        this._console = _console;\n        this.transforms = transforms;\n    }\n    Object.defineProperty(TemplateParser.prototype, \"expressionParser\", {\n        get: function () { return this._exprParser; },\n        enumerable: true,\n        configurable: true\n    });\n    TemplateParser.prototype.parse = function (component, template, directives, pipes, schemas, templateUrl, preserveWhitespaces) {\n        var result = this.tryParse(component, template, directives, pipes, schemas, templateUrl, preserveWhitespaces);\n        var warnings = result.errors.filter(function (error$$1) { return error$$1.level === ParseErrorLevel.WARNING; });\n        var errors = result.errors.filter(function (error$$1) { return error$$1.level === ParseErrorLevel.ERROR; });\n        if (warnings.length > 0) {\n            this._console.warn(\"Template parse warnings:\\n\" + warnings.join('\\n'));\n        }\n        if (errors.length > 0) {\n            var errorString = errors.join('\\n');\n            throw syntaxError(\"Template parse errors:\\n\" + errorString, errors);\n        }\n        return { template: result.templateAst, pipes: result.usedPipes };\n    };\n    TemplateParser.prototype.tryParse = function (component, template, directives, pipes, schemas, templateUrl, preserveWhitespaces) {\n        var htmlParseResult = typeof template === 'string' ?\n            this._htmlParser.parse(template, templateUrl, true, this.getInterpolationConfig(component)) :\n            template;\n        if (!preserveWhitespaces) {\n            htmlParseResult = removeWhitespaces(htmlParseResult);\n        }\n        return this.tryParseHtml(this.expandHtml(htmlParseResult), component, directives, pipes, schemas);\n    };\n    TemplateParser.prototype.tryParseHtml = function (htmlAstWithErrors, component, directives, pipes, schemas) {\n        var result;\n        var errors = htmlAstWithErrors.errors;\n        var usedPipes = [];\n        if (htmlAstWithErrors.rootNodes.length > 0) {\n            var uniqDirectives = removeSummaryDuplicates(directives);\n            var uniqPipes = removeSummaryDuplicates(pipes);\n            var providerViewContext = new ProviderViewContext(this._reflector, component);\n            var interpolationConfig = undefined;\n            if (component.template && component.template.interpolation) {\n                interpolationConfig = {\n                    start: component.template.interpolation[0],\n                    end: component.template.interpolation[1]\n                };\n            }\n            var bindingParser = new BindingParser(this._exprParser, interpolationConfig, this._schemaRegistry, uniqPipes, errors);\n            var parseVisitor = new TemplateParseVisitor(this._reflector, this._config, providerViewContext, uniqDirectives, bindingParser, this._schemaRegistry, schemas, errors);\n            result = visitAll(parseVisitor, htmlAstWithErrors.rootNodes, EMPTY_ELEMENT_CONTEXT);\n            errors.push.apply(errors, __spread(providerViewContext.errors));\n            usedPipes.push.apply(usedPipes, __spread(bindingParser.getUsedPipes()));\n        }\n        else {\n            result = [];\n        }\n        this._assertNoReferenceDuplicationOnTemplate(result, errors);\n        if (errors.length > 0) {\n            return new TemplateParseResult(result, usedPipes, errors);\n        }\n        if (this.transforms) {\n            this.transforms.forEach(function (transform) { result = templateVisitAll(transform, result); });\n        }\n        return new TemplateParseResult(result, usedPipes, errors);\n    };\n    TemplateParser.prototype.expandHtml = function (htmlAstWithErrors, forced) {\n        if (forced === void 0) { forced = false; }\n        var errors = htmlAstWithErrors.errors;\n        if (errors.length == 0 || forced) {\n            // Transform ICU messages to angular directives\n            var expandedHtmlAst = expandNodes(htmlAstWithErrors.rootNodes);\n            errors.push.apply(errors, __spread(expandedHtmlAst.errors));\n            htmlAstWithErrors = new ParseTreeResult(expandedHtmlAst.nodes, errors);\n        }\n        return htmlAstWithErrors;\n    };\n    TemplateParser.prototype.getInterpolationConfig = function (component) {\n        if (component.template) {\n            return InterpolationConfig.fromArray(component.template.interpolation);\n        }\n        return undefined;\n    };\n    /** @internal */\n    TemplateParser.prototype._assertNoReferenceDuplicationOnTemplate = function (result, errors) {\n        var existingReferences = [];\n        result.filter(function (element) { return !!element.references; })\n            .forEach(function (element) { return element.references.forEach(function (reference) {\n            var name = reference.name;\n            if (existingReferences.indexOf(name) < 0) {\n                existingReferences.push(name);\n            }\n            else {\n                var error$$1 = new TemplateParseError(\"Reference \\\"#\" + name + \"\\\" is defined several times\", reference.sourceSpan, ParseErrorLevel.ERROR);\n                errors.push(error$$1);\n            }\n        }); });\n    };\n    return TemplateParser;\n}());\nvar TemplateParseVisitor = /** @class */ (function () {\n    function TemplateParseVisitor(reflector, config, providerViewContext, directives, _bindingParser, _schemaRegistry, _schemas, _targetErrors) {\n        var _this = this;\n        this.reflector = reflector;\n        this.config = config;\n        this.providerViewContext = providerViewContext;\n        this._bindingParser = _bindingParser;\n        this._schemaRegistry = _schemaRegistry;\n        this._schemas = _schemas;\n        this._targetErrors = _targetErrors;\n        this.selectorMatcher = new SelectorMatcher();\n        this.directivesIndex = new Map();\n        this.ngContentCount = 0;\n        // Note: queries start with id 1 so we can use the number in a Bloom filter!\n        this.contentQueryStartId = providerViewContext.component.viewQueries.length + 1;\n        directives.forEach(function (directive, index) {\n            var selector = CssSelector.parse(directive.selector);\n            _this.selectorMatcher.addSelectables(selector, directive);\n            _this.directivesIndex.set(directive, index);\n        });\n    }\n    TemplateParseVisitor.prototype.visitExpansion = function (expansion, context) { return null; };\n    TemplateParseVisitor.prototype.visitExpansionCase = function (expansionCase, context) { return null; };\n    TemplateParseVisitor.prototype.visitText = function (text, parent) {\n        var ngContentIndex = parent.findNgContentIndex(TEXT_CSS_SELECTOR);\n        var valueNoNgsp = replaceNgsp(text.value);\n        var expr = this._bindingParser.parseInterpolation(valueNoNgsp, text.sourceSpan);\n        return expr ? new BoundTextAst(expr, ngContentIndex, text.sourceSpan) :\n            new TextAst(valueNoNgsp, ngContentIndex, text.sourceSpan);\n    };\n    TemplateParseVisitor.prototype.visitAttribute = function (attribute, context) {\n        return new AttrAst(attribute.name, attribute.value, attribute.sourceSpan);\n    };\n    TemplateParseVisitor.prototype.visitComment = function (comment, context) { return null; };\n    TemplateParseVisitor.prototype.visitElement = function (element, parent) {\n        var _this = this;\n        var queryStartIndex = this.contentQueryStartId;\n        var nodeName = element.name;\n        var preparsedElement = preparseElement(element);\n        if (preparsedElement.type === PreparsedElementType.SCRIPT ||\n            preparsedElement.type === PreparsedElementType.STYLE) {\n            // Skipping <script> for security reasons\n            // Skipping <style> as we already processed them\n            // in the StyleCompiler\n            return null;\n        }\n        if (preparsedElement.type === PreparsedElementType.STYLESHEET &&\n            isStyleUrlResolvable(preparsedElement.hrefAttr)) {\n            // Skipping stylesheets with either relative urls or package scheme as we already processed\n            // them in the StyleCompiler\n            return null;\n        }\n        var matchableAttrs = [];\n        var elementOrDirectiveProps = [];\n        var elementOrDirectiveRefs = [];\n        var elementVars = [];\n        var events = [];\n        var templateElementOrDirectiveProps = [];\n        var templateMatchableAttrs = [];\n        var templateElementVars = [];\n        var hasInlineTemplates = false;\n        var attrs = [];\n        var isTemplateElement = isNgTemplate(element.name);\n        element.attrs.forEach(function (attr) {\n            var hasBinding = _this._parseAttr(isTemplateElement, attr, matchableAttrs, elementOrDirectiveProps, events, elementOrDirectiveRefs, elementVars);\n            var templateBindingsSource;\n            var prefixToken;\n            var normalizedName = _this._normalizeAttributeName(attr.name);\n            if (normalizedName.startsWith(TEMPLATE_ATTR_PREFIX)) {\n                templateBindingsSource = attr.value;\n                prefixToken = normalizedName.substring(TEMPLATE_ATTR_PREFIX.length) + ':';\n            }\n            var hasTemplateBinding = templateBindingsSource != null;\n            if (hasTemplateBinding) {\n                if (hasInlineTemplates) {\n                    _this._reportError(\"Can't have multiple template bindings on one element. Use only one attribute prefixed with *\", attr.sourceSpan);\n                }\n                hasInlineTemplates = true;\n                _this._bindingParser.parseInlineTemplateBinding(prefixToken, templateBindingsSource, attr.sourceSpan, templateMatchableAttrs, templateElementOrDirectiveProps, templateElementVars);\n            }\n            if (!hasBinding && !hasTemplateBinding) {\n                // don't include the bindings as attributes as well in the AST\n                attrs.push(_this.visitAttribute(attr, null));\n                matchableAttrs.push([attr.name, attr.value]);\n            }\n        });\n        var elementCssSelector = createElementCssSelector(nodeName, matchableAttrs);\n        var _a = this._parseDirectives(this.selectorMatcher, elementCssSelector), directiveMetas = _a.directives, matchElement = _a.matchElement;\n        var references = [];\n        var boundDirectivePropNames = new Set();\n        var directiveAsts = this._createDirectiveAsts(isTemplateElement, element.name, directiveMetas, elementOrDirectiveProps, elementOrDirectiveRefs, element.sourceSpan, references, boundDirectivePropNames);\n        var elementProps = this._createElementPropertyAsts(element.name, elementOrDirectiveProps, boundDirectivePropNames);\n        var isViewRoot = parent.isTemplateElement || hasInlineTemplates;\n        var providerContext = new ProviderElementContext(this.providerViewContext, parent.providerContext, isViewRoot, directiveAsts, attrs, references, isTemplateElement, queryStartIndex, element.sourceSpan);\n        var children = visitAll(preparsedElement.nonBindable ? NON_BINDABLE_VISITOR : this, element.children, ElementContext.create(isTemplateElement, directiveAsts, isTemplateElement ? parent.providerContext : providerContext));\n        providerContext.afterElement();\n        // Override the actual selector when the `ngProjectAs` attribute is provided\n        var projectionSelector = preparsedElement.projectAs != null ?\n            CssSelector.parse(preparsedElement.projectAs)[0] :\n            elementCssSelector;\n        var ngContentIndex = parent.findNgContentIndex(projectionSelector);\n        var parsedElement;\n        if (preparsedElement.type === PreparsedElementType.NG_CONTENT) {\n            if (element.children && !element.children.every(_isEmptyTextNode)) {\n                this._reportError(\"<ng-content> element cannot have content.\", element.sourceSpan);\n            }\n            parsedElement = new NgContentAst(this.ngContentCount++, hasInlineTemplates ? null : ngContentIndex, element.sourceSpan);\n        }\n        else if (isTemplateElement) {\n            this._assertAllEventsPublishedByDirectives(directiveAsts, events);\n            this._assertNoComponentsNorElementBindingsOnTemplate(directiveAsts, elementProps, element.sourceSpan);\n            parsedElement = new EmbeddedTemplateAst(attrs, events, references, elementVars, providerContext.transformedDirectiveAsts, providerContext.transformProviders, providerContext.transformedHasViewContainer, providerContext.queryMatches, children, hasInlineTemplates ? null : ngContentIndex, element.sourceSpan);\n        }\n        else {\n            this._assertElementExists(matchElement, element);\n            this._assertOnlyOneComponent(directiveAsts, element.sourceSpan);\n            var ngContentIndex_1 = hasInlineTemplates ? null : parent.findNgContentIndex(projectionSelector);\n            parsedElement = new ElementAst(nodeName, attrs, elementProps, events, references, providerContext.transformedDirectiveAsts, providerContext.transformProviders, providerContext.transformedHasViewContainer, providerContext.queryMatches, children, hasInlineTemplates ? null : ngContentIndex_1, element.sourceSpan, element.endSourceSpan || null);\n        }\n        if (hasInlineTemplates) {\n            var templateQueryStartIndex = this.contentQueryStartId;\n            var templateSelector = createElementCssSelector('ng-template', templateMatchableAttrs);\n            var templateDirectiveMetas = this._parseDirectives(this.selectorMatcher, templateSelector).directives;\n            var templateBoundDirectivePropNames = new Set();\n            var templateDirectiveAsts = this._createDirectiveAsts(true, element.name, templateDirectiveMetas, templateElementOrDirectiveProps, [], element.sourceSpan, [], templateBoundDirectivePropNames);\n            var templateElementProps = this._createElementPropertyAsts(element.name, templateElementOrDirectiveProps, templateBoundDirectivePropNames);\n            this._assertNoComponentsNorElementBindingsOnTemplate(templateDirectiveAsts, templateElementProps, element.sourceSpan);\n            var templateProviderContext = new ProviderElementContext(this.providerViewContext, parent.providerContext, parent.isTemplateElement, templateDirectiveAsts, [], [], true, templateQueryStartIndex, element.sourceSpan);\n            templateProviderContext.afterElement();\n            parsedElement = new EmbeddedTemplateAst([], [], [], templateElementVars, templateProviderContext.transformedDirectiveAsts, templateProviderContext.transformProviders, templateProviderContext.transformedHasViewContainer, templateProviderContext.queryMatches, [parsedElement], ngContentIndex, element.sourceSpan);\n        }\n        return parsedElement;\n    };\n    TemplateParseVisitor.prototype._parseAttr = function (isTemplateElement, attr, targetMatchableAttrs, targetProps, targetEvents, targetRefs, targetVars) {\n        var name = this._normalizeAttributeName(attr.name);\n        var value = attr.value;\n        var srcSpan = attr.sourceSpan;\n        var bindParts = name.match(BIND_NAME_REGEXP);\n        var hasBinding = false;\n        if (bindParts !== null) {\n            hasBinding = true;\n            if (bindParts[KW_BIND_IDX] != null) {\n                this._bindingParser.parsePropertyBinding(bindParts[IDENT_KW_IDX], value, false, srcSpan, targetMatchableAttrs, targetProps);\n            }\n            else if (bindParts[KW_LET_IDX]) {\n                if (isTemplateElement) {\n                    var identifier = bindParts[IDENT_KW_IDX];\n                    this._parseVariable(identifier, value, srcSpan, targetVars);\n                }\n                else {\n                    this._reportError(\"\\\"let-\\\" is only supported on ng-template elements.\", srcSpan);\n                }\n            }\n            else if (bindParts[KW_REF_IDX]) {\n                var identifier = bindParts[IDENT_KW_IDX];\n                this._parseReference(identifier, value, srcSpan, targetRefs);\n            }\n            else if (bindParts[KW_ON_IDX]) {\n                this._bindingParser.parseEvent(bindParts[IDENT_KW_IDX], value, srcSpan, targetMatchableAttrs, targetEvents);\n            }\n            else if (bindParts[KW_BINDON_IDX]) {\n                this._bindingParser.parsePropertyBinding(bindParts[IDENT_KW_IDX], value, false, srcSpan, targetMatchableAttrs, targetProps);\n                this._parseAssignmentEvent(bindParts[IDENT_KW_IDX], value, srcSpan, targetMatchableAttrs, targetEvents);\n            }\n            else if (bindParts[KW_AT_IDX]) {\n                this._bindingParser.parseLiteralAttr(name, value, srcSpan, targetMatchableAttrs, targetProps);\n            }\n            else if (bindParts[IDENT_BANANA_BOX_IDX]) {\n                this._bindingParser.parsePropertyBinding(bindParts[IDENT_BANANA_BOX_IDX], value, false, srcSpan, targetMatchableAttrs, targetProps);\n                this._parseAssignmentEvent(bindParts[IDENT_BANANA_BOX_IDX], value, srcSpan, targetMatchableAttrs, targetEvents);\n            }\n            else if (bindParts[IDENT_PROPERTY_IDX]) {\n                this._bindingParser.parsePropertyBinding(bindParts[IDENT_PROPERTY_IDX], value, false, srcSpan, targetMatchableAttrs, targetProps);\n            }\n            else if (bindParts[IDENT_EVENT_IDX]) {\n                this._bindingParser.parseEvent(bindParts[IDENT_EVENT_IDX], value, srcSpan, targetMatchableAttrs, targetEvents);\n            }\n        }\n        else {\n            hasBinding = this._bindingParser.parsePropertyInterpolation(name, value, srcSpan, targetMatchableAttrs, targetProps);\n        }\n        if (!hasBinding) {\n            this._bindingParser.parseLiteralAttr(name, value, srcSpan, targetMatchableAttrs, targetProps);\n        }\n        return hasBinding;\n    };\n    TemplateParseVisitor.prototype._normalizeAttributeName = function (attrName) {\n        return /^data-/i.test(attrName) ? attrName.substring(5) : attrName;\n    };\n    TemplateParseVisitor.prototype._parseVariable = function (identifier, value, sourceSpan, targetVars) {\n        if (identifier.indexOf('-') > -1) {\n            this._reportError(\"\\\"-\\\" is not allowed in variable names\", sourceSpan);\n        }\n        targetVars.push(new VariableAst(identifier, value, sourceSpan));\n    };\n    TemplateParseVisitor.prototype._parseReference = function (identifier, value, sourceSpan, targetRefs) {\n        if (identifier.indexOf('-') > -1) {\n            this._reportError(\"\\\"-\\\" is not allowed in reference names\", sourceSpan);\n        }\n        targetRefs.push(new ElementOrDirectiveRef(identifier, value, sourceSpan));\n    };\n    TemplateParseVisitor.prototype._parseAssignmentEvent = function (name, expression, sourceSpan, targetMatchableAttrs, targetEvents) {\n        this._bindingParser.parseEvent(name + \"Change\", expression + \"=$event\", sourceSpan, targetMatchableAttrs, targetEvents);\n    };\n    TemplateParseVisitor.prototype._parseDirectives = function (selectorMatcher, elementCssSelector) {\n        var _this = this;\n        // Need to sort the directives so that we get consistent results throughout,\n        // as selectorMatcher uses Maps inside.\n        // Also deduplicate directives as they might match more than one time!\n        var directives = new Array(this.directivesIndex.size);\n        // Whether any directive selector matches on the element name\n        var matchElement = false;\n        selectorMatcher.match(elementCssSelector, function (selector, directive) {\n            directives[_this.directivesIndex.get(directive)] = directive;\n            matchElement = matchElement || selector.hasElementSelector();\n        });\n        return {\n            directives: directives.filter(function (dir) { return !!dir; }),\n            matchElement: matchElement,\n        };\n    };\n    TemplateParseVisitor.prototype._createDirectiveAsts = function (isTemplateElement, elementName, directives, props, elementOrDirectiveRefs, elementSourceSpan, targetReferences, targetBoundDirectivePropNames) {\n        var _this = this;\n        var matchedReferences = new Set();\n        var component = null;\n        var directiveAsts = directives.map(function (directive) {\n            var sourceSpan = new ParseSourceSpan(elementSourceSpan.start, elementSourceSpan.end, \"Directive \" + identifierName(directive.type));\n            if (directive.isComponent) {\n                component = directive;\n            }\n            var directiveProperties = [];\n            var hostProperties = _this._bindingParser.createDirectiveHostPropertyAsts(directive, elementName, sourceSpan);\n            // Note: We need to check the host properties here as well,\n            // as we don't know the element name in the DirectiveWrapperCompiler yet.\n            hostProperties = _this._checkPropertiesInSchema(elementName, hostProperties);\n            var hostEvents = _this._bindingParser.createDirectiveHostEventAsts(directive, sourceSpan);\n            _this._createDirectivePropertyAsts(directive.inputs, props, directiveProperties, targetBoundDirectivePropNames);\n            elementOrDirectiveRefs.forEach(function (elOrDirRef) {\n                if ((elOrDirRef.value.length === 0 && directive.isComponent) ||\n                    (elOrDirRef.isReferenceToDirective(directive))) {\n                    targetReferences.push(new ReferenceAst(elOrDirRef.name, createTokenForReference(directive.type.reference), elOrDirRef.value, elOrDirRef.sourceSpan));\n                    matchedReferences.add(elOrDirRef.name);\n                }\n            });\n            var contentQueryStartId = _this.contentQueryStartId;\n            _this.contentQueryStartId += directive.queries.length;\n            return new DirectiveAst(directive, directiveProperties, hostProperties, hostEvents, contentQueryStartId, sourceSpan);\n        });\n        elementOrDirectiveRefs.forEach(function (elOrDirRef) {\n            if (elOrDirRef.value.length > 0) {\n                if (!matchedReferences.has(elOrDirRef.name)) {\n                    _this._reportError(\"There is no directive with \\\"exportAs\\\" set to \\\"\" + elOrDirRef.value + \"\\\"\", elOrDirRef.sourceSpan);\n                }\n            }\n            else if (!component) {\n                var refToken = null;\n                if (isTemplateElement) {\n                    refToken = createTokenForExternalReference(_this.reflector, Identifiers.TemplateRef);\n                }\n                targetReferences.push(new ReferenceAst(elOrDirRef.name, refToken, elOrDirRef.value, elOrDirRef.sourceSpan));\n            }\n        });\n        return directiveAsts;\n    };\n    TemplateParseVisitor.prototype._createDirectivePropertyAsts = function (directiveProperties, boundProps, targetBoundDirectiveProps, targetBoundDirectivePropNames) {\n        if (directiveProperties) {\n            var boundPropsByName_1 = new Map();\n            boundProps.forEach(function (boundProp) {\n                var prevValue = boundPropsByName_1.get(boundProp.name);\n                if (!prevValue || prevValue.isLiteral) {\n                    // give [a]=\"b\" a higher precedence than a=\"b\" on the same element\n                    boundPropsByName_1.set(boundProp.name, boundProp);\n                }\n            });\n            Object.keys(directiveProperties).forEach(function (dirProp) {\n                var elProp = directiveProperties[dirProp];\n                var boundProp = boundPropsByName_1.get(elProp);\n                // Bindings are optional, so this binding only needs to be set up if an expression is given.\n                if (boundProp) {\n                    targetBoundDirectivePropNames.add(boundProp.name);\n                    if (!isEmptyExpression(boundProp.expression)) {\n                        targetBoundDirectiveProps.push(new BoundDirectivePropertyAst(dirProp, boundProp.name, boundProp.expression, boundProp.sourceSpan));\n                    }\n                }\n            });\n        }\n    };\n    TemplateParseVisitor.prototype._createElementPropertyAsts = function (elementName, props, boundDirectivePropNames) {\n        var _this = this;\n        var boundElementProps = [];\n        props.forEach(function (prop) {\n            if (!prop.isLiteral && !boundDirectivePropNames.has(prop.name)) {\n                boundElementProps.push(_this._bindingParser.createElementPropertyAst(elementName, prop));\n            }\n        });\n        return this._checkPropertiesInSchema(elementName, boundElementProps);\n    };\n    TemplateParseVisitor.prototype._findComponentDirectives = function (directives) {\n        return directives.filter(function (directive) { return directive.directive.isComponent; });\n    };\n    TemplateParseVisitor.prototype._findComponentDirectiveNames = function (directives) {\n        return this._findComponentDirectives(directives)\n            .map(function (directive) { return identifierName(directive.directive.type); });\n    };\n    TemplateParseVisitor.prototype._assertOnlyOneComponent = function (directives, sourceSpan) {\n        var componentTypeNames = this._findComponentDirectiveNames(directives);\n        if (componentTypeNames.length > 1) {\n            this._reportError(\"More than one component matched on this element.\\n\" +\n                \"Make sure that only one component's selector can match a given element.\\n\" +\n                (\"Conflicting components: \" + componentTypeNames.join(',')), sourceSpan);\n        }\n    };\n    /**\n     * Make sure that non-angular tags conform to the schemas.\n     *\n     * Note: An element is considered an angular tag when at least one directive selector matches the\n     * tag name.\n     *\n     * @param matchElement Whether any directive has matched on the tag name\n     * @param element the html element\n     */\n    TemplateParseVisitor.prototype._assertElementExists = function (matchElement, element) {\n        var elName = element.name.replace(/^:xhtml:/, '');\n        if (!matchElement && !this._schemaRegistry.hasElement(elName, this._schemas)) {\n            var errorMsg = \"'\" + elName + \"' is not a known element:\\n\";\n            errorMsg +=\n                \"1. If '\" + elName + \"' is an Angular component, then verify that it is part of this module.\\n\";\n            if (elName.indexOf('-') > -1) {\n                errorMsg +=\n                    \"2. If '\" + elName + \"' is a Web Component then add 'CUSTOM_ELEMENTS_SCHEMA' to the '@NgModule.schemas' of this component to suppress this message.\";\n            }\n            else {\n                errorMsg +=\n                    \"2. To allow any element add 'NO_ERRORS_SCHEMA' to the '@NgModule.schemas' of this component.\";\n            }\n            this._reportError(errorMsg, element.sourceSpan);\n        }\n    };\n    TemplateParseVisitor.prototype._assertNoComponentsNorElementBindingsOnTemplate = function (directives, elementProps, sourceSpan) {\n        var _this = this;\n        var componentTypeNames = this._findComponentDirectiveNames(directives);\n        if (componentTypeNames.length > 0) {\n            this._reportError(\"Components on an embedded template: \" + componentTypeNames.join(','), sourceSpan);\n        }\n        elementProps.forEach(function (prop) {\n            _this._reportError(\"Property binding \" + prop.name + \" not used by any directive on an embedded template. Make sure that the property name is spelled correctly and all directives are listed in the \\\"@NgModule.declarations\\\".\", sourceSpan);\n        });\n    };\n    TemplateParseVisitor.prototype._assertAllEventsPublishedByDirectives = function (directives, events) {\n        var _this = this;\n        var allDirectiveEvents = new Set();\n        directives.forEach(function (directive) {\n            Object.keys(directive.directive.outputs).forEach(function (k) {\n                var eventName = directive.directive.outputs[k];\n                allDirectiveEvents.add(eventName);\n            });\n        });\n        events.forEach(function (event) {\n            if (event.target != null || !allDirectiveEvents.has(event.name)) {\n                _this._reportError(\"Event binding \" + event.fullName + \" not emitted by any directive on an embedded template. Make sure that the event name is spelled correctly and all directives are listed in the \\\"@NgModule.declarations\\\".\", event.sourceSpan);\n            }\n        });\n    };\n    TemplateParseVisitor.prototype._checkPropertiesInSchema = function (elementName, boundProps) {\n        var _this = this;\n        // Note: We can't filter out empty expressions before this method,\n        // as we still want to validate them!\n        return boundProps.filter(function (boundProp) {\n            if (boundProp.type === PropertyBindingType.Property &&\n                !_this._schemaRegistry.hasProperty(elementName, boundProp.name, _this._schemas)) {\n                var errorMsg = \"Can't bind to '\" + boundProp.name + \"' since it isn't a known property of '\" + elementName + \"'.\";\n                if (elementName.startsWith('ng-')) {\n                    errorMsg +=\n                        \"\\n1. If '\" + boundProp.name + \"' is an Angular directive, then add 'CommonModule' to the '@NgModule.imports' of this component.\" +\n                            \"\\n2. To allow any property add 'NO_ERRORS_SCHEMA' to the '@NgModule.schemas' of this component.\";\n                }\n                else if (elementName.indexOf('-') > -1) {\n                    errorMsg +=\n                        \"\\n1. If '\" + elementName + \"' is an Angular component and it has '\" + boundProp.name + \"' input, then verify that it is part of this module.\" +\n                            (\"\\n2. If '\" + elementName + \"' is a Web Component then add 'CUSTOM_ELEMENTS_SCHEMA' to the '@NgModule.schemas' of this component to suppress this message.\") +\n                            \"\\n3. To allow any property add 'NO_ERRORS_SCHEMA' to the '@NgModule.schemas' of this component.\";\n                }\n                _this._reportError(errorMsg, boundProp.sourceSpan);\n            }\n            return !isEmptyExpression(boundProp.value);\n        });\n    };\n    TemplateParseVisitor.prototype._reportError = function (message, sourceSpan, level) {\n        if (level === void 0) { level = ParseErrorLevel.ERROR; }\n        this._targetErrors.push(new ParseError(sourceSpan, message, level));\n    };\n    return TemplateParseVisitor;\n}());\nvar NonBindableVisitor = /** @class */ (function () {\n    function NonBindableVisitor() {\n    }\n    NonBindableVisitor.prototype.visitElement = function (ast, parent) {\n        var preparsedElement = preparseElement(ast);\n        if (preparsedElement.type === PreparsedElementType.SCRIPT ||\n            preparsedElement.type === PreparsedElementType.STYLE ||\n            preparsedElement.type === PreparsedElementType.STYLESHEET) {\n            // Skipping <script> for security reasons\n            // Skipping <style> and stylesheets as we already processed them\n            // in the StyleCompiler\n            return null;\n        }\n        var attrNameAndValues = ast.attrs.map(function (attr) { return [attr.name, attr.value]; });\n        var selector = createElementCssSelector(ast.name, attrNameAndValues);\n        var ngContentIndex = parent.findNgContentIndex(selector);\n        var children = visitAll(this, ast.children, EMPTY_ELEMENT_CONTEXT);\n        return new ElementAst(ast.name, visitAll(this, ast.attrs), [], [], [], [], [], false, [], children, ngContentIndex, ast.sourceSpan, ast.endSourceSpan);\n    };\n    NonBindableVisitor.prototype.visitComment = function (comment, context) { return null; };\n    NonBindableVisitor.prototype.visitAttribute = function (attribute, context) {\n        return new AttrAst(attribute.name, attribute.value, attribute.sourceSpan);\n    };\n    NonBindableVisitor.prototype.visitText = function (text, parent) {\n        var ngContentIndex = parent.findNgContentIndex(TEXT_CSS_SELECTOR);\n        return new TextAst(text.value, ngContentIndex, text.sourceSpan);\n    };\n    NonBindableVisitor.prototype.visitExpansion = function (expansion, context) { return expansion; };\n    NonBindableVisitor.prototype.visitExpansionCase = function (expansionCase, context) { return expansionCase; };\n    return NonBindableVisitor;\n}());\n/**\n * A reference to an element or directive in a template. E.g., the reference in this template:\n *\n * <div #myMenu=\"coolMenu\">\n *\n * would be {name: 'myMenu', value: 'coolMenu', sourceSpan: ...}\n */\nvar ElementOrDirectiveRef = /** @class */ (function () {\n    function ElementOrDirectiveRef(name, value, sourceSpan) {\n        this.name = name;\n        this.value = value;\n        this.sourceSpan = sourceSpan;\n    }\n    /** Gets whether this is a reference to the given directive. */\n    ElementOrDirectiveRef.prototype.isReferenceToDirective = function (directive) {\n        return splitExportAs(directive.exportAs).indexOf(this.value) !== -1;\n    };\n    return ElementOrDirectiveRef;\n}());\n/** Splits a raw, potentially comma-delimited `exportAs` value into an array of names. */\nfunction splitExportAs(exportAs) {\n    return exportAs ? exportAs.split(',').map(function (e) { return e.trim(); }) : [];\n}\nfunction splitClasses(classAttrValue) {\n    return classAttrValue.trim().split(/\\s+/g);\n}\nvar ElementContext = /** @class */ (function () {\n    function ElementContext(isTemplateElement, _ngContentIndexMatcher, _wildcardNgContentIndex, providerContext) {\n        this.isTemplateElement = isTemplateElement;\n        this._ngContentIndexMatcher = _ngContentIndexMatcher;\n        this._wildcardNgContentIndex = _wildcardNgContentIndex;\n        this.providerContext = providerContext;\n    }\n    ElementContext.create = function (isTemplateElement, directives, providerContext) {\n        var matcher = new SelectorMatcher();\n        var wildcardNgContentIndex = null;\n        var component = directives.find(function (directive) { return directive.directive.isComponent; });\n        if (component) {\n            var ngContentSelectors = component.directive.template.ngContentSelectors;\n            for (var i = 0; i < ngContentSelectors.length; i++) {\n                var selector = ngContentSelectors[i];\n                if (selector === '*') {\n                    wildcardNgContentIndex = i;\n                }\n                else {\n                    matcher.addSelectables(CssSelector.parse(ngContentSelectors[i]), i);\n                }\n            }\n        }\n        return new ElementContext(isTemplateElement, matcher, wildcardNgContentIndex, providerContext);\n    };\n    ElementContext.prototype.findNgContentIndex = function (selector) {\n        var ngContentIndices = [];\n        this._ngContentIndexMatcher.match(selector, function (selector, ngContentIndex) { ngContentIndices.push(ngContentIndex); });\n        ngContentIndices.sort();\n        if (this._wildcardNgContentIndex != null) {\n            ngContentIndices.push(this._wildcardNgContentIndex);\n        }\n        return ngContentIndices.length > 0 ? ngContentIndices[0] : null;\n    };\n    return ElementContext;\n}());\nfunction createElementCssSelector(elementName, attributes) {\n    var cssSelector = new CssSelector();\n    var elNameNoNs = splitNsName(elementName)[1];\n    cssSelector.setElement(elNameNoNs);\n    for (var i = 0; i < attributes.length; i++) {\n        var attrName = attributes[i][0];\n        var attrNameNoNs = splitNsName(attrName)[1];\n        var attrValue = attributes[i][1];\n        cssSelector.addAttribute(attrNameNoNs, attrValue);\n        if (attrName.toLowerCase() == CLASS_ATTR) {\n            var classes = splitClasses(attrValue);\n            classes.forEach(function (className) { return cssSelector.addClassName(className); });\n        }\n    }\n    return cssSelector;\n}\nvar EMPTY_ELEMENT_CONTEXT = new ElementContext(true, new SelectorMatcher(), null, null);\nvar NON_BINDABLE_VISITOR = new NonBindableVisitor();\nfunction _isEmptyTextNode(node) {\n    return node instanceof Text && node.value.trim().length == 0;\n}\nfunction removeSummaryDuplicates(items) {\n    var map = new Map();\n    items.forEach(function (item) {\n        if (!map.get(item.type.reference)) {\n            map.set(item.type.reference, item);\n        }\n    });\n    return Array.from(map.values());\n}\nfunction isEmptyExpression(ast) {\n    if (ast instanceof ASTWithSource) {\n        ast = ast.ast;\n    }\n    return ast instanceof EmptyExpr;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar EventHandlerVars = /** @class */ (function () {\n    function EventHandlerVars() {\n    }\n    EventHandlerVars.event = variable('$event');\n    return EventHandlerVars;\n}());\n/**\n * Converts the given expression AST into an executable output AST, assuming the expression is\n * used in an action binding (e.g. an event handler).\n */\n\n\nvar BindingForm;\n(function (BindingForm) {\n    // The general form of binding expression, supports all expressions.\n    BindingForm[BindingForm[\"General\"] = 0] = \"General\";\n    // Try to generate a simple binding (no temporaries or statements)\n    // otherwise generate a general binding\n    BindingForm[BindingForm[\"TrySimple\"] = 1] = \"TrySimple\";\n})(BindingForm || (BindingForm = {}));\n/**\n * Converts the given expression AST into an executable output AST, assuming the expression\n * is used in property binding. The expression has to be preprocessed via\n * `convertPropertyBindingBuiltins`.\n */\n\n\nvar _Mode;\n(function (_Mode) {\n    _Mode[_Mode[\"Statement\"] = 0] = \"Statement\";\n    _Mode[_Mode[\"Expression\"] = 1] = \"Expression\";\n})(_Mode || (_Mode = {}));\nvar _BuiltinAstConverter = /** @class */ (function (_super) {\n    __extends(_BuiltinAstConverter, _super);\n    function _BuiltinAstConverter(_converterFactory) {\n        var _this = _super.call(this) || this;\n        _this._converterFactory = _converterFactory;\n        return _this;\n    }\n    _BuiltinAstConverter.prototype.visitPipe = function (ast, context) {\n        var _this = this;\n        var args = __spread([ast.exp], ast.args).map(function (ast) { return ast.visit(_this, context); });\n        return new BuiltinFunctionCall(ast.span, args, this._converterFactory.createPipeConverter(ast.name, args.length));\n    };\n    _BuiltinAstConverter.prototype.visitLiteralArray = function (ast, context) {\n        var _this = this;\n        var args = ast.expressions.map(function (ast) { return ast.visit(_this, context); });\n        return new BuiltinFunctionCall(ast.span, args, this._converterFactory.createLiteralArrayConverter(ast.expressions.length));\n    };\n    _BuiltinAstConverter.prototype.visitLiteralMap = function (ast, context) {\n        var _this = this;\n        var args = ast.values.map(function (ast) { return ast.visit(_this, context); });\n        return new BuiltinFunctionCall(ast.span, args, this._converterFactory.createLiteralMapConverter(ast.keys));\n    };\n    return _BuiltinAstConverter;\n}(AstTransformer));\nvar BuiltinFunctionCall = /** @class */ (function (_super) {\n    __extends(BuiltinFunctionCall, _super);\n    function BuiltinFunctionCall(span, args, converter) {\n        var _this = _super.call(this, span, null, args) || this;\n        _this.args = args;\n        _this.converter = converter;\n        return _this;\n    }\n    return BuiltinFunctionCall;\n}(FunctionCall));\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar LOG_VAR$1 = variable('_l');\nvar VIEW_VAR = variable('_v');\nvar CHECK_VAR = variable('_ck');\nvar COMP_VAR = variable('_co');\nvar EVENT_NAME_VAR = variable('en');\nvar ALLOW_DEFAULT_VAR = variable(\"ad\");\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Context to use when producing a key.\n *\n * This ensures we see the constant not the reference variable when producing\n * a key.\n */\nvar KEY_CONTEXT = {};\n/**\n * A node that is a place-holder that allows the node to be replaced when the actual\n * node is known.\n *\n * This allows the constant pool to change an expression from a direct reference to\n * a constant to a shared constant. It returns a fix-up node that is later allowed to\n * change the referenced expression.\n */\nvar FixupExpression = /** @class */ (function (_super) {\n    __extends(FixupExpression, _super);\n    function FixupExpression(resolved) {\n        var _this = _super.call(this, resolved.type) || this;\n        _this.resolved = resolved;\n        _this.original = resolved;\n        return _this;\n    }\n    FixupExpression.prototype.visitExpression = function (visitor, context) {\n        if (context === KEY_CONTEXT) {\n            // When producing a key we want to traverse the constant not the\n            // variable used to refer to it.\n            return this.original.visitExpression(visitor, context);\n        }\n        else {\n            return this.resolved.visitExpression(visitor, context);\n        }\n    };\n    FixupExpression.prototype.isEquivalent = function (e) {\n        return e instanceof FixupExpression && this.resolved.isEquivalent(e.resolved);\n    };\n    FixupExpression.prototype.isConstant = function () { return true; };\n    FixupExpression.prototype.fixup = function (expression) {\n        this.resolved = expression;\n        this.shared = true;\n    };\n    return FixupExpression;\n}(Expression));\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n// Transform an i18n AST by renaming the placeholder nodes with the given mapper\nvar MapPlaceholderNames = /** @class */ (function (_super) {\n    __extends(MapPlaceholderNames, _super);\n    function MapPlaceholderNames() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    MapPlaceholderNames.prototype.convert = function (nodes, mapper) {\n        var _this = this;\n        return mapper ? nodes.map(function (n) { return n.visit(_this, mapper); }) : nodes;\n    };\n    MapPlaceholderNames.prototype.visitTagPlaceholder = function (ph, mapper) {\n        var _this = this;\n        var startName = mapper.toPublicName(ph.startName);\n        var closeName = ph.closeName ? mapper.toPublicName(ph.closeName) : ph.closeName;\n        var children = ph.children.map(function (n) { return n.visit(_this, mapper); });\n        return new TagPlaceholder(ph.tag, ph.attrs, startName, closeName, children, ph.isVoid, ph.sourceSpan);\n    };\n    MapPlaceholderNames.prototype.visitPlaceholder = function (ph, mapper) {\n        return new Placeholder(ph.value, mapper.toPublicName(ph.name), ph.sourceSpan);\n    };\n    MapPlaceholderNames.prototype.visitIcuPlaceholder = function (ph, mapper) {\n        return new IcuPlaceholder(ph.value, mapper.toPublicName(ph.name), ph.sourceSpan);\n    };\n    return MapPlaceholderNames;\n}(CloneVisitor));\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar CORE$1 = '@angular/core';\nvar Identifiers$1 = /** @class */ (function () {\n    function Identifiers() {\n    }\n    /* Methods */\n    Identifiers.NEW_METHOD = 'factory';\n    Identifiers.TRANSFORM_METHOD = 'transform';\n    Identifiers.PATCH_DEPS = 'patchedDeps';\n    /* Instructions */\n    Identifiers.createElement = { name: 'E', moduleName: CORE$1 };\n    Identifiers.elementEnd = { name: 'e', moduleName: CORE$1 };\n    Identifiers.elementProperty = { name: 'p', moduleName: CORE$1 };\n    Identifiers.elementAttribute = { name: 'a', moduleName: CORE$1 };\n    Identifiers.elementClassNamed = { name: 'kn', moduleName: CORE$1 };\n    Identifiers.elementStyleNamed = { name: 'sn', moduleName: CORE$1 };\n    Identifiers.containerCreate = { name: 'C', moduleName: CORE$1 };\n    Identifiers.containerEnd = { name: 'c', moduleName: CORE$1 };\n    Identifiers.directiveCreate = { name: 'D', moduleName: CORE$1 };\n    Identifiers.text = { name: 'T', moduleName: CORE$1 };\n    Identifiers.directiveInput = { name: 'i', moduleName: CORE$1 };\n    Identifiers.textCreateBound = { name: 't', moduleName: CORE$1 };\n    Identifiers.bind = { name: 'b', moduleName: CORE$1 };\n    Identifiers.interpolation1 = { name: 'i1', moduleName: CORE$1 };\n    Identifiers.interpolation2 = { name: 'i2', moduleName: CORE$1 };\n    Identifiers.interpolation3 = { name: 'i3', moduleName: CORE$1 };\n    Identifiers.interpolation4 = { name: 'i4', moduleName: CORE$1 };\n    Identifiers.interpolation5 = { name: 'i5', moduleName: CORE$1 };\n    Identifiers.interpolation6 = { name: 'i6', moduleName: CORE$1 };\n    Identifiers.interpolation7 = { name: 'i7', moduleName: CORE$1 };\n    Identifiers.interpolation8 = { name: 'i8', moduleName: CORE$1 };\n    Identifiers.interpolationV = { name: 'iV', moduleName: CORE$1 };\n    Identifiers.pureFunction0 = { name: 'f0', moduleName: CORE$1 };\n    Identifiers.pureFunction1 = { name: 'f1', moduleName: CORE$1 };\n    Identifiers.pureFunction2 = { name: 'f2', moduleName: CORE$1 };\n    Identifiers.pureFunction3 = { name: 'f3', moduleName: CORE$1 };\n    Identifiers.pureFunction4 = { name: 'f4', moduleName: CORE$1 };\n    Identifiers.pureFunction5 = { name: 'f5', moduleName: CORE$1 };\n    Identifiers.pureFunction6 = { name: 'f6', moduleName: CORE$1 };\n    Identifiers.pureFunction7 = { name: 'f7', moduleName: CORE$1 };\n    Identifiers.pureFunction8 = { name: 'f8', moduleName: CORE$1 };\n    Identifiers.pureFunctionV = { name: 'fV', moduleName: CORE$1 };\n    Identifiers.pipeBind1 = { name: 'pb1', moduleName: CORE$1 };\n    Identifiers.pipeBind2 = { name: 'pb2', moduleName: CORE$1 };\n    Identifiers.pipeBind3 = { name: 'pb3', moduleName: CORE$1 };\n    Identifiers.pipeBind4 = { name: 'pb4', moduleName: CORE$1 };\n    Identifiers.pipeBindV = { name: 'pbV', moduleName: CORE$1 };\n    Identifiers.load = { name: 'ld', moduleName: CORE$1 };\n    Identifiers.pipe = { name: 'Pp', moduleName: CORE$1 };\n    Identifiers.projection = { name: 'P', moduleName: CORE$1 };\n    Identifiers.projectionDef = { name: 'pD', moduleName: CORE$1 };\n    Identifiers.refreshComponent = { name: 'r', moduleName: CORE$1 };\n    Identifiers.directiveLifeCycle = { name: 'l', moduleName: CORE$1 };\n    Identifiers.injectElementRef = { name: 'injectElementRef', moduleName: CORE$1 };\n    Identifiers.injectTemplateRef = { name: 'injectTemplateRef', moduleName: CORE$1 };\n    Identifiers.injectViewContainerRef = { name: 'injectViewContainerRef', moduleName: CORE$1 };\n    Identifiers.inject = { name: 'inject', moduleName: CORE$1 };\n    Identifiers.defineComponent = { name: 'defineComponent', moduleName: CORE$1 };\n    Identifiers.defineDirective = {\n        name: 'defineDirective',\n        moduleName: CORE$1,\n    };\n    Identifiers.defineInjector = {\n        name: 'defineInjector',\n        moduleName: CORE$1,\n    };\n    Identifiers.definePipe = { name: 'definePipe', moduleName: CORE$1 };\n    Identifiers.query = { name: 'Q', moduleName: CORE$1 };\n    Identifiers.queryRefresh = { name: 'qR', moduleName: CORE$1 };\n    Identifiers.NgOnChangesFeature = { name: 'NgOnChangesFeature', moduleName: CORE$1 };\n    Identifiers.listener = { name: 'L', moduleName: CORE$1 };\n    return Identifiers;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar EMPTY_ARRAY = literalArr([]);\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Comment to insert above back-patch\n */\n\n/**\n * Comment to mark removable expressions\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/** The prefix reference variables */\nvar REFERENCE_PREFIX = '_r';\n\n\nvar BINDING_INSTRUCTION_MAP = (_a = {}, _a[PropertyBindingType.Property] = Identifiers$1.elementProperty, _a[PropertyBindingType.Attribute] = Identifiers$1.elementAttribute, _a[PropertyBindingType.Class] = Identifiers$1.elementClassNamed, _a[PropertyBindingType.Style] = Identifiers$1.elementStyleNamed, _a);\nfunction pipeBinding(args) {\n    switch (args.length) {\n        case 0:\n            // The first parameter to pipeBind is always the value to be transformed followed\n            // by arg.length arguments so the total number of arguments to pipeBind are\n            // arg.length + 1.\n            return Identifiers$1.pipeBind1;\n        case 1:\n            return Identifiers$1.pipeBind2;\n        case 2:\n            return Identifiers$1.pipeBind3;\n        default:\n            return Identifiers$1.pipeBindV;\n    }\n}\nvar pureFunctionIdentifiers = [\n    Identifiers$1.pureFunction0, Identifiers$1.pureFunction1, Identifiers$1.pureFunction2, Identifiers$1.pureFunction3, Identifiers$1.pureFunction4,\n    Identifiers$1.pureFunction5, Identifiers$1.pureFunction6, Identifiers$1.pureFunction7, Identifiers$1.pureFunction8\n];\nfunction getLiteralFactory(outputContext, literal$$1) {\n    var _a = outputContext.constantPool.getLiteralFactory(literal$$1), literalFactory = _a.literalFactory, literalFactoryArguments = _a.literalFactoryArguments;\n    literalFactoryArguments.length > 0 || error(\"Expected arguments to a literal factory function\");\n    var pureFunctionIdent = pureFunctionIdentifiers[literalFactoryArguments.length] || Identifiers$1.pureFunctionV;\n    // Literal factories are pure functions that only need to be re-invoked when the parameters\n    // change.\n    return importExpr(pureFunctionIdent).callFn(__spread([literalFactory], literalFactoryArguments));\n}\nfunction noop() { }\nvar BindingScope = /** @class */ (function () {\n    function BindingScope(parent, declareLocalVarCallback) {\n        if (parent === void 0) { parent = null; }\n        if (declareLocalVarCallback === void 0) { declareLocalVarCallback = noop; }\n        this.parent = parent;\n        this.declareLocalVarCallback = declareLocalVarCallback;\n        /**\n         * Keeps a map from local variables to their expressions.\n         *\n         * This is used when one refers to variable such as: 'let abc = a.b.c`.\n         * - key to the map is the string literal `\"abc\"`.\n         * - value `lhs` is the left hand side which is an AST representing `abc`.\n         * - value `rhs` is the right hand side which is an AST representing `a.b.c`.\n         * - value `declared` is true if the `declareLocalVarCallback` has been called for this scope\n         * already.\n         */\n        this.map = new Map();\n        this.referenceNameIndex = 0;\n    }\n    BindingScope.prototype.get = function (name) {\n        var current = this;\n        while (current) {\n            var value = current.map.get(name);\n            if (value != null) {\n                if (current !== this) {\n                    // make a local copy and reset the `declared` state.\n                    value = { lhs: value.lhs, rhs: value.rhs, declared: false };\n                    // Cache the value locally.\n                    this.map.set(name, value);\n                }\n                if (value.rhs && !value.declared) {\n                    // if it is first time we are referencing the variable in the scope\n                    // than invoke the callback to insert variable declaration.\n                    this.declareLocalVarCallback(value.lhs, value.rhs);\n                    value.declared = true;\n                }\n                return value.lhs;\n            }\n            current = current.parent;\n        }\n        return null;\n    };\n    /**\n     * Create a local variable for later reference.\n     *\n     * @param name Name of the variable.\n     * @param lhs AST representing the left hand side of the `let lhs = rhs;`.\n     * @param rhs AST representing the right hand side of the `let lhs = rhs;`. The `rhs` can be\n     * `undefined` for variable that are ambient such as `$event` and which don't have `rhs`\n     * declaration.\n     */\n    BindingScope.prototype.set = function (name, lhs, rhs) {\n        !this.map.has(name) ||\n            error(\"The name \" + name + \" is already defined in scope to be \" + this.map.get(name));\n        this.map.set(name, { lhs: lhs, rhs: rhs, declared: false });\n        return this;\n    };\n    BindingScope.prototype.getLocal = function (name) { return this.get(name); };\n    BindingScope.prototype.nestedScope = function (declareCallback) {\n        return new BindingScope(this, declareCallback);\n    };\n    BindingScope.prototype.freshReferenceName = function () {\n        var current = this;\n        // Find the top scope as it maintains the global reference count\n        while (current.parent)\n            current = current.parent;\n        var ref = \"\" + REFERENCE_PREFIX + current.referenceNameIndex++;\n        return ref;\n    };\n    BindingScope.ROOT_SCOPE = new BindingScope().set('$event', variable('$event'));\n    return BindingScope;\n}());\n\nvar ValueConverter = /** @class */ (function (_super) {\n    __extends(ValueConverter, _super);\n    function ValueConverter(outputCtx, allocateSlot, definePipe) {\n        var _this = _super.call(this) || this;\n        _this.outputCtx = outputCtx;\n        _this.allocateSlot = allocateSlot;\n        _this.definePipe = definePipe;\n        _this.pipeSlots = new Map();\n        return _this;\n    }\n    // AstMemoryEfficientTransformer\n    ValueConverter.prototype.visitPipe = function (ast, context) {\n        // Allocate a slot to create the pipe\n        var slot = this.allocateSlot();\n        var slotPseudoLocal = \"PIPE:\" + slot;\n        var target = new PropertyRead(ast.span, new ImplicitReceiver(ast.span), slotPseudoLocal);\n        var bindingId = pipeBinding(ast.args);\n        this.definePipe(ast.name, slotPseudoLocal, slot, importExpr(bindingId));\n        var value = ast.exp.visit(this);\n        var args = this.visitAll(ast.args);\n        return new FunctionCall(ast.span, target, __spread([new LiteralPrimitive(ast.span, slot), value], args));\n    };\n    ValueConverter.prototype.visitLiteralArray = function (ast, context) {\n        var _this = this;\n        return new BuiltinFunctionCall(ast.span, this.visitAll(ast.expressions), function (values) {\n            // If the literal has calculated (non-literal) elements transform it into\n            // calls to literal factories that compose the literal and will cache intermediate\n            // values. Otherwise, just return an literal array that contains the values.\n            var literal$$1 = literalArr(values);\n            return values.every(function (a) { return a.isConstant(); }) ?\n                _this.outputCtx.constantPool.getConstLiteral(literal$$1, true) :\n                getLiteralFactory(_this.outputCtx, literal$$1);\n        });\n    };\n    ValueConverter.prototype.visitLiteralMap = function (ast, context) {\n        var _this = this;\n        return new BuiltinFunctionCall(ast.span, this.visitAll(ast.values), function (values) {\n            // If the literal has calculated (non-literal) elements  transform it into\n            // calls to literal factories that compose the literal and will cache intermediate\n            // values. Otherwise, just return an literal array that contains the values.\n            var literal$$1 = literalMap(values.map(function (value, index) { return ({ key: ast.keys[index].key, value: value, quoted: ast.keys[index].quoted }); }));\n            return values.every(function (a) { return a.isConstant(); }) ?\n                _this.outputCtx.constantPool.getConstLiteral(literal$$1, true) :\n                getLiteralFactory(_this.outputCtx, literal$$1);\n        });\n    };\n    return ValueConverter;\n}(AstMemoryEfficientTransformer));\nvar ContentProjectionVisitor = /** @class */ (function (_super) {\n    __extends(ContentProjectionVisitor, _super);\n    function ContentProjectionVisitor(projectionMap, ngContentSelectors) {\n        var _this = _super.call(this) || this;\n        _this.projectionMap = projectionMap;\n        _this.ngContentSelectors = ngContentSelectors;\n        _this.index = 1;\n        return _this;\n    }\n    ContentProjectionVisitor.prototype.visitNgContent = function (ast) {\n        var selectorText = this.ngContentSelectors[ast.index];\n        selectorText != null || error(\"could not find selector for index \" + ast.index + \" in \" + ast);\n        if (!selectorText || selectorText === '*') {\n            this.projectionMap.set(ast, { index: 0 });\n        }\n        else {\n            var cssSelectors = CssSelector.parse(selectorText);\n            this.projectionMap.set(ast, { index: this.index++, selector: parseSelectorsToR3Selector(cssSelectors) });\n        }\n    };\n    return ContentProjectionVisitor;\n}(RecursiveTemplateAstVisitor));\nfunction parserSelectorToSimpleSelector(selector) {\n    var classes = selector.classNames && selector.classNames.length ? __spread([8 /* CLASS */], selector.classNames) :\n        [];\n    var elementName = selector.element && selector.element !== '*' ? selector.element : '';\n    return __spread([elementName], selector.attrs, classes);\n}\nfunction parserSelectorToNegativeSelector(selector) {\n    var classes = selector.classNames && selector.classNames.length ? __spread([8 /* CLASS */], selector.classNames) :\n        [];\n    if (selector.element) {\n        return __spread([\n            1 /* NOT */ | 4 /* ELEMENT */, selector.element\n        ], selector.attrs, classes);\n    }\n    else if (selector.attrs.length) {\n        return __spread([1 /* NOT */ | 2 /* ATTRIBUTE */], selector.attrs, classes);\n    }\n    else {\n        return selector.classNames && selector.classNames.length ? __spread([1 /* NOT */ | 8 /* CLASS */], selector.classNames) :\n            [];\n    }\n}\nfunction parserSelectorToR3Selector(selector) {\n    var positive = parserSelectorToSimpleSelector(selector);\n    var negative = selector.notSelectors && selector.notSelectors.length ?\n        selector.notSelectors.map(function (notSelector) { return parserSelectorToNegativeSelector(notSelector); }) :\n        [];\n    return positive.concat.apply(positive, __spread(negative));\n}\nfunction parseSelectorsToR3Selector(selectors) {\n    return selectors.map(parserSelectorToR3Selector);\n}\nvar _a;\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Write a pipe definition to the output context.\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar TS = /^(?!.*\\.d\\.ts$).*\\.ts$/;\nvar ResolvedStaticSymbol = /** @class */ (function () {\n    function ResolvedStaticSymbol(symbol, metadata) {\n        this.symbol = symbol;\n        this.metadata = metadata;\n    }\n    return ResolvedStaticSymbol;\n}());\nvar SUPPORTED_SCHEMA_VERSION = 4;\n/**\n * This class is responsible for loading metadata per symbol,\n * and normalizing references between symbols.\n *\n * Internally, it only uses symbols without members,\n * and deduces the values for symbols with members based\n * on these symbols.\n */\nvar StaticSymbolResolver = /** @class */ (function () {\n    function StaticSymbolResolver(host, staticSymbolCache, summaryResolver, errorRecorder) {\n        this.host = host;\n        this.staticSymbolCache = staticSymbolCache;\n        this.summaryResolver = summaryResolver;\n        this.errorRecorder = errorRecorder;\n        this.metadataCache = new Map();\n        // Note: this will only contain StaticSymbols without members!\n        this.resolvedSymbols = new Map();\n        this.resolvedFilePaths = new Set();\n        // Note: this will only contain StaticSymbols without members!\n        this.importAs = new Map();\n        this.symbolResourcePaths = new Map();\n        this.symbolFromFile = new Map();\n        this.knownFileNameToModuleNames = new Map();\n    }\n    StaticSymbolResolver.prototype.resolveSymbol = function (staticSymbol) {\n        if (staticSymbol.members.length > 0) {\n            return this._resolveSymbolMembers(staticSymbol);\n        }\n        // Note: always ask for a summary first,\n        // as we might have read shallow metadata via a .d.ts file\n        // for the symbol.\n        var resultFromSummary = this._resolveSymbolFromSummary(staticSymbol);\n        if (resultFromSummary) {\n            return resultFromSummary;\n        }\n        var resultFromCache = this.resolvedSymbols.get(staticSymbol);\n        if (resultFromCache) {\n            return resultFromCache;\n        }\n        // Note: Some users use libraries that were not compiled with ngc, i.e. they don't\n        // have summaries, only .d.ts files. So we always need to check both, the summary\n        // and metadata.\n        this._createSymbolsOf(staticSymbol.filePath);\n        return this.resolvedSymbols.get(staticSymbol);\n    };\n    /**\n     * getImportAs produces a symbol that can be used to import the given symbol.\n     * The import might be different than the symbol if the symbol is exported from\n     * a library with a summary; in which case we want to import the symbol from the\n     * ngfactory re-export instead of directly to avoid introducing a direct dependency\n     * on an otherwise indirect dependency.\n     *\n     * @param staticSymbol the symbol for which to generate a import symbol\n     */\n    StaticSymbolResolver.prototype.getImportAs = function (staticSymbol, useSummaries) {\n        if (useSummaries === void 0) { useSummaries = true; }\n        if (staticSymbol.members.length) {\n            var baseSymbol = this.getStaticSymbol(staticSymbol.filePath, staticSymbol.name);\n            var baseImportAs = this.getImportAs(baseSymbol, useSummaries);\n            return baseImportAs ?\n                this.getStaticSymbol(baseImportAs.filePath, baseImportAs.name, staticSymbol.members) :\n                null;\n        }\n        var summarizedFileName = stripSummaryForJitFileSuffix(staticSymbol.filePath);\n        if (summarizedFileName !== staticSymbol.filePath) {\n            var summarizedName = stripSummaryForJitNameSuffix(staticSymbol.name);\n            var baseSymbol = this.getStaticSymbol(summarizedFileName, summarizedName, staticSymbol.members);\n            var baseImportAs = this.getImportAs(baseSymbol, useSummaries);\n            return baseImportAs ?\n                this.getStaticSymbol(summaryForJitFileName(baseImportAs.filePath), summaryForJitName(baseImportAs.name), baseSymbol.members) :\n                null;\n        }\n        var result = (useSummaries && this.summaryResolver.getImportAs(staticSymbol)) || null;\n        if (!result) {\n            result = this.importAs.get(staticSymbol);\n        }\n        return result;\n    };\n    /**\n     * getResourcePath produces the path to the original location of the symbol and should\n     * be used to determine the relative location of resource references recorded in\n     * symbol metadata.\n     */\n    StaticSymbolResolver.prototype.getResourcePath = function (staticSymbol) {\n        return this.symbolResourcePaths.get(staticSymbol) || staticSymbol.filePath;\n    };\n    /**\n     * getTypeArity returns the number of generic type parameters the given symbol\n     * has. If the symbol is not a type the result is null.\n     */\n    StaticSymbolResolver.prototype.getTypeArity = function (staticSymbol) {\n        // If the file is a factory/ngsummary file, don't resolve the symbol as doing so would\n        // cause the metadata for an factory/ngsummary file to be loaded which doesn't exist.\n        // All references to generated classes must include the correct arity whenever\n        // generating code.\n        if (isGeneratedFile(staticSymbol.filePath)) {\n            return null;\n        }\n        var resolvedSymbol = unwrapResolvedMetadata(this.resolveSymbol(staticSymbol));\n        while (resolvedSymbol && resolvedSymbol.metadata instanceof StaticSymbol) {\n            resolvedSymbol = unwrapResolvedMetadata(this.resolveSymbol(resolvedSymbol.metadata));\n        }\n        return (resolvedSymbol && resolvedSymbol.metadata && resolvedSymbol.metadata.arity) || null;\n    };\n    StaticSymbolResolver.prototype.getKnownModuleName = function (filePath) {\n        return this.knownFileNameToModuleNames.get(filePath) || null;\n    };\n    StaticSymbolResolver.prototype.recordImportAs = function (sourceSymbol, targetSymbol) {\n        sourceSymbol.assertNoMembers();\n        targetSymbol.assertNoMembers();\n        this.importAs.set(sourceSymbol, targetSymbol);\n    };\n    StaticSymbolResolver.prototype.recordModuleNameForFileName = function (fileName, moduleName) {\n        this.knownFileNameToModuleNames.set(fileName, moduleName);\n    };\n    /**\n     * Invalidate all information derived from the given file.\n     *\n     * @param fileName the file to invalidate\n     */\n    StaticSymbolResolver.prototype.invalidateFile = function (fileName) {\n        this.metadataCache.delete(fileName);\n        this.resolvedFilePaths.delete(fileName);\n        var symbols = this.symbolFromFile.get(fileName);\n        if (symbols) {\n            this.symbolFromFile.delete(fileName);\n            try {\n                for (var symbols_1 = __values(symbols), symbols_1_1 = symbols_1.next(); !symbols_1_1.done; symbols_1_1 = symbols_1.next()) {\n                    var symbol = symbols_1_1.value;\n                    this.resolvedSymbols.delete(symbol);\n                    this.importAs.delete(symbol);\n                    this.symbolResourcePaths.delete(symbol);\n                }\n            }\n            catch (e_1_1) { e_1 = { error: e_1_1 }; }\n            finally {\n                try {\n                    if (symbols_1_1 && !symbols_1_1.done && (_a = symbols_1.return)) _a.call(symbols_1);\n                }\n                finally { if (e_1) throw e_1.error; }\n            }\n        }\n        var e_1, _a;\n    };\n    /* @internal */\n    StaticSymbolResolver.prototype.ignoreErrorsFor = function (cb) {\n        var recorder = this.errorRecorder;\n        this.errorRecorder = function () { };\n        try {\n            return cb();\n        }\n        finally {\n            this.errorRecorder = recorder;\n        }\n    };\n    StaticSymbolResolver.prototype._resolveSymbolMembers = function (staticSymbol) {\n        var members = staticSymbol.members;\n        var baseResolvedSymbol = this.resolveSymbol(this.getStaticSymbol(staticSymbol.filePath, staticSymbol.name));\n        if (!baseResolvedSymbol) {\n            return null;\n        }\n        var baseMetadata = unwrapResolvedMetadata(baseResolvedSymbol.metadata);\n        if (baseMetadata instanceof StaticSymbol) {\n            return new ResolvedStaticSymbol(staticSymbol, this.getStaticSymbol(baseMetadata.filePath, baseMetadata.name, members));\n        }\n        else if (baseMetadata && baseMetadata.__symbolic === 'class') {\n            if (baseMetadata.statics && members.length === 1) {\n                return new ResolvedStaticSymbol(staticSymbol, baseMetadata.statics[members[0]]);\n            }\n        }\n        else {\n            var value = baseMetadata;\n            for (var i = 0; i < members.length && value; i++) {\n                value = value[members[i]];\n            }\n            return new ResolvedStaticSymbol(staticSymbol, value);\n        }\n        return null;\n    };\n    StaticSymbolResolver.prototype._resolveSymbolFromSummary = function (staticSymbol) {\n        var summary = this.summaryResolver.resolveSummary(staticSymbol);\n        return summary ? new ResolvedStaticSymbol(staticSymbol, summary.metadata) : null;\n    };\n    /**\n     * getStaticSymbol produces a Type whose metadata is known but whose implementation is not loaded.\n     * All types passed to the StaticResolver should be pseudo-types returned by this method.\n     *\n     * @param declarationFile the absolute path of the file where the symbol is declared\n     * @param name the name of the type.\n     * @param members a symbol for a static member of the named type\n     */\n    StaticSymbolResolver.prototype.getStaticSymbol = function (declarationFile, name, members) {\n        return this.staticSymbolCache.get(declarationFile, name, members);\n    };\n    /**\n     * hasDecorators checks a file's metadata for the presence of decorators without evaluating the\n     * metadata.\n     *\n     * @param filePath the absolute path to examine for decorators.\n     * @returns true if any class in the file has a decorator.\n     */\n    StaticSymbolResolver.prototype.hasDecorators = function (filePath) {\n        var metadata = this.getModuleMetadata(filePath);\n        if (metadata['metadata']) {\n            return Object.keys(metadata['metadata']).some(function (metadataKey) {\n                var entry = metadata['metadata'][metadataKey];\n                return entry && entry.__symbolic === 'class' && entry.decorators;\n            });\n        }\n        return false;\n    };\n    StaticSymbolResolver.prototype.getSymbolsOf = function (filePath) {\n        var summarySymbols = this.summaryResolver.getSymbolsOf(filePath);\n        if (summarySymbols) {\n            return summarySymbols;\n        }\n        // Note: Some users use libraries that were not compiled with ngc, i.e. they don't\n        // have summaries, only .d.ts files, but `summaryResolver.isLibraryFile` returns true.\n        this._createSymbolsOf(filePath);\n        var metadataSymbols = [];\n        this.resolvedSymbols.forEach(function (resolvedSymbol) {\n            if (resolvedSymbol.symbol.filePath === filePath) {\n                metadataSymbols.push(resolvedSymbol.symbol);\n            }\n        });\n        return metadataSymbols;\n    };\n    StaticSymbolResolver.prototype._createSymbolsOf = function (filePath) {\n        var _this = this;\n        if (this.resolvedFilePaths.has(filePath)) {\n            return;\n        }\n        this.resolvedFilePaths.add(filePath);\n        var resolvedSymbols = [];\n        var metadata = this.getModuleMetadata(filePath);\n        if (metadata['importAs']) {\n            // Index bundle indices should use the importAs module name defined\n            // in the bundle.\n            this.knownFileNameToModuleNames.set(filePath, metadata['importAs']);\n        }\n        // handle the symbols in one of the re-export location\n        if (metadata['exports']) {\n            var _loop_1 = function (moduleExport) {\n                // handle the symbols in the list of explicitly re-exported symbols.\n                if (moduleExport.export) {\n                    moduleExport.export.forEach(function (exportSymbol) {\n                        var symbolName;\n                        if (typeof exportSymbol === 'string') {\n                            symbolName = exportSymbol;\n                        }\n                        else {\n                            symbolName = exportSymbol.as;\n                        }\n                        symbolName = unescapeIdentifier(symbolName);\n                        var symName = symbolName;\n                        if (typeof exportSymbol !== 'string') {\n                            symName = unescapeIdentifier(exportSymbol.name);\n                        }\n                        var resolvedModule = _this.resolveModule(moduleExport.from, filePath);\n                        if (resolvedModule) {\n                            var targetSymbol = _this.getStaticSymbol(resolvedModule, symName);\n                            var sourceSymbol = _this.getStaticSymbol(filePath, symbolName);\n                            resolvedSymbols.push(_this.createExport(sourceSymbol, targetSymbol));\n                        }\n                    });\n                }\n                else {\n                    // handle the symbols via export * directives.\n                    var resolvedModule = this_1.resolveModule(moduleExport.from, filePath);\n                    if (resolvedModule) {\n                        var nestedExports = this_1.getSymbolsOf(resolvedModule);\n                        nestedExports.forEach(function (targetSymbol) {\n                            var sourceSymbol = _this.getStaticSymbol(filePath, targetSymbol.name);\n                            resolvedSymbols.push(_this.createExport(sourceSymbol, targetSymbol));\n                        });\n                    }\n                }\n            };\n            var this_1 = this;\n            try {\n                for (var _a = __values(metadata['exports']), _b = _a.next(); !_b.done; _b = _a.next()) {\n                    var moduleExport = _b.value;\n                    _loop_1(moduleExport);\n                }\n            }\n            catch (e_2_1) { e_2 = { error: e_2_1 }; }\n            finally {\n                try {\n                    if (_b && !_b.done && (_c = _a.return)) _c.call(_a);\n                }\n                finally { if (e_2) throw e_2.error; }\n            }\n        }\n        // handle the actual metadata. Has to be after the exports\n        // as there migth be collisions in the names, and we want the symbols\n        // of the current module to win ofter reexports.\n        if (metadata['metadata']) {\n            // handle direct declarations of the symbol\n            var topLevelSymbolNames_1 = new Set(Object.keys(metadata['metadata']).map(unescapeIdentifier));\n            var origins_1 = metadata['origins'] || {};\n            Object.keys(metadata['metadata']).forEach(function (metadataKey) {\n                var symbolMeta = metadata['metadata'][metadataKey];\n                var name = unescapeIdentifier(metadataKey);\n                var symbol = _this.getStaticSymbol(filePath, name);\n                var origin = origins_1.hasOwnProperty(metadataKey) && origins_1[metadataKey];\n                if (origin) {\n                    // If the symbol is from a bundled index, use the declaration location of the\n                    // symbol so relative references (such as './my.html') will be calculated\n                    // correctly.\n                    var originFilePath = _this.resolveModule(origin, filePath);\n                    if (!originFilePath) {\n                        _this.reportError(new Error(\"Couldn't resolve original symbol for \" + origin + \" from \" + filePath));\n                    }\n                    else {\n                        _this.symbolResourcePaths.set(symbol, originFilePath);\n                    }\n                }\n                resolvedSymbols.push(_this.createResolvedSymbol(symbol, filePath, topLevelSymbolNames_1, symbolMeta));\n            });\n        }\n        resolvedSymbols.forEach(function (resolvedSymbol) { return _this.resolvedSymbols.set(resolvedSymbol.symbol, resolvedSymbol); });\n        this.symbolFromFile.set(filePath, resolvedSymbols.map(function (resolvedSymbol) { return resolvedSymbol.symbol; }));\n        var e_2, _c;\n    };\n    StaticSymbolResolver.prototype.createResolvedSymbol = function (sourceSymbol, topLevelPath, topLevelSymbolNames, metadata) {\n        var _this = this;\n        // For classes that don't have Angular summaries / metadata,\n        // we only keep their arity, but nothing else\n        // (e.g. their constructor parameters).\n        // We do this to prevent introducing deep imports\n        // as we didn't generate .ngfactory.ts files with proper reexports.\n        var isTsFile = TS.test(sourceSymbol.filePath);\n        if (this.summaryResolver.isLibraryFile(sourceSymbol.filePath) && !isTsFile && metadata &&\n            metadata['__symbolic'] === 'class') {\n            var transformedMeta_1 = { __symbolic: 'class', arity: metadata.arity };\n            return new ResolvedStaticSymbol(sourceSymbol, transformedMeta_1);\n        }\n        var _originalFileMemo;\n        var getOriginalName = function () {\n            if (!_originalFileMemo) {\n                // Guess what hte original file name is from the reference. If it has a `.d.ts` extension\n                // replace it with `.ts`. If it already has `.ts` just leave it in place. If it doesn't have\n                // .ts or .d.ts, append `.ts'. Also, if it is in `node_modules`, trim the `node_module`\n                // location as it is not important to finding the file.\n                _originalFileMemo =\n                    _this.host.getOutputName(topLevelPath.replace(/((\\.ts)|(\\.d\\.ts)|)$/, '.ts')\n                        .replace(/^.*node_modules[/\\\\]/, ''));\n            }\n            return _originalFileMemo;\n        };\n        var self = this;\n        var ReferenceTransformer = /** @class */ (function (_super) {\n            __extends(ReferenceTransformer, _super);\n            function ReferenceTransformer() {\n                return _super !== null && _super.apply(this, arguments) || this;\n            }\n            ReferenceTransformer.prototype.visitStringMap = function (map, functionParams) {\n                var symbolic = map['__symbolic'];\n                if (symbolic === 'function') {\n                    var oldLen = functionParams.length;\n                    functionParams.push.apply(functionParams, __spread((map['parameters'] || [])));\n                    var result = _super.prototype.visitStringMap.call(this, map, functionParams);\n                    functionParams.length = oldLen;\n                    return result;\n                }\n                else if (symbolic === 'reference') {\n                    var module = map['module'];\n                    var name_1 = map['name'] ? unescapeIdentifier(map['name']) : map['name'];\n                    if (!name_1) {\n                        return null;\n                    }\n                    var filePath = void 0;\n                    if (module) {\n                        filePath = self.resolveModule(module, sourceSymbol.filePath);\n                        if (!filePath) {\n                            return {\n                                __symbolic: 'error',\n                                message: \"Could not resolve \" + module + \" relative to \" + sourceSymbol.filePath + \".\",\n                                line: map.line,\n                                character: map.character,\n                                fileName: getOriginalName()\n                            };\n                        }\n                        return {\n                            __symbolic: 'resolved',\n                            symbol: self.getStaticSymbol(filePath, name_1),\n                            line: map.line,\n                            character: map.character,\n                            fileName: getOriginalName()\n                        };\n                    }\n                    else if (functionParams.indexOf(name_1) >= 0) {\n                        // reference to a function parameter\n                        return { __symbolic: 'reference', name: name_1 };\n                    }\n                    else {\n                        if (topLevelSymbolNames.has(name_1)) {\n                            return self.getStaticSymbol(topLevelPath, name_1);\n                        }\n                        // ambient value\n                        \n                    }\n                }\n                else if (symbolic === 'error') {\n                    return __assign({}, map, { fileName: getOriginalName() });\n                }\n                else {\n                    return _super.prototype.visitStringMap.call(this, map, functionParams);\n                }\n            };\n            return ReferenceTransformer;\n        }(ValueTransformer));\n        var transformedMeta = visitValue(metadata, new ReferenceTransformer(), []);\n        var unwrappedTransformedMeta = unwrapResolvedMetadata(transformedMeta);\n        if (unwrappedTransformedMeta instanceof StaticSymbol) {\n            return this.createExport(sourceSymbol, unwrappedTransformedMeta);\n        }\n        return new ResolvedStaticSymbol(sourceSymbol, transformedMeta);\n    };\n    StaticSymbolResolver.prototype.createExport = function (sourceSymbol, targetSymbol) {\n        sourceSymbol.assertNoMembers();\n        targetSymbol.assertNoMembers();\n        if (this.summaryResolver.isLibraryFile(sourceSymbol.filePath) &&\n            this.summaryResolver.isLibraryFile(targetSymbol.filePath)) {\n            // This case is for an ng library importing symbols from a plain ts library\n            // transitively.\n            // Note: We rely on the fact that we discover symbols in the direction\n            // from source files to library files\n            this.importAs.set(targetSymbol, this.getImportAs(sourceSymbol) || sourceSymbol);\n        }\n        return new ResolvedStaticSymbol(sourceSymbol, targetSymbol);\n    };\n    StaticSymbolResolver.prototype.reportError = function (error$$1, context, path$$1) {\n        if (this.errorRecorder) {\n            this.errorRecorder(error$$1, (context && context.filePath) || path$$1);\n        }\n        else {\n            throw error$$1;\n        }\n    };\n    /**\n     * @param module an absolute path to a module file.\n     */\n    StaticSymbolResolver.prototype.getModuleMetadata = function (module) {\n        var moduleMetadata = this.metadataCache.get(module);\n        if (!moduleMetadata) {\n            var moduleMetadatas = this.host.getMetadataFor(module);\n            if (moduleMetadatas) {\n                var maxVersion_1 = -1;\n                moduleMetadatas.forEach(function (md) {\n                    if (md && md['version'] > maxVersion_1) {\n                        maxVersion_1 = md['version'];\n                        moduleMetadata = md;\n                    }\n                });\n            }\n            if (!moduleMetadata) {\n                moduleMetadata =\n                    { __symbolic: 'module', version: SUPPORTED_SCHEMA_VERSION, module: module, metadata: {} };\n            }\n            if (moduleMetadata['version'] != SUPPORTED_SCHEMA_VERSION) {\n                var errorMessage = moduleMetadata['version'] == 2 ?\n                    \"Unsupported metadata version \" + moduleMetadata['version'] + \" for module \" + module + \". This module should be compiled with a newer version of ngc\" :\n                    \"Metadata version mismatch for module \" + module + \", found version \" + moduleMetadata['version'] + \", expected \" + SUPPORTED_SCHEMA_VERSION;\n                this.reportError(new Error(errorMessage));\n            }\n            this.metadataCache.set(module, moduleMetadata);\n        }\n        return moduleMetadata;\n    };\n    StaticSymbolResolver.prototype.getSymbolByModule = function (module, symbolName, containingFile) {\n        var filePath = this.resolveModule(module, containingFile);\n        if (!filePath) {\n            this.reportError(new Error(\"Could not resolve module \" + module + (containingFile ? ' relative to ' +\n                containingFile : '')));\n            return this.getStaticSymbol(\"ERROR:\" + module, symbolName);\n        }\n        return this.getStaticSymbol(filePath, symbolName);\n    };\n    StaticSymbolResolver.prototype.resolveModule = function (module, containingFile) {\n        try {\n            return this.host.moduleNameToFileName(module, containingFile);\n        }\n        catch (e) {\n            console.error(\"Could not resolve module '\" + module + \"' relative to file \" + containingFile);\n            this.reportError(e, undefined, containingFile);\n        }\n        return null;\n    };\n    return StaticSymbolResolver;\n}());\n// Remove extra underscore from escaped identifier.\n// See https://github.com/Microsoft/TypeScript/blob/master/src/compiler/utilities.ts\nfunction unescapeIdentifier(identifier) {\n    return identifier.startsWith('___') ? identifier.substr(1) : identifier;\n}\nfunction unwrapResolvedMetadata(metadata) {\n    if (metadata && metadata.__symbolic === 'resolved') {\n        return metadata.symbol;\n    }\n    return metadata;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nfunction deserializeSummaries(symbolCache, summaryResolver, libraryFileName, json) {\n    var deserializer = new FromJsonDeserializer(symbolCache, summaryResolver);\n    return deserializer.deserialize(libraryFileName, json);\n}\n\nvar ToJsonSerializer = /** @class */ (function (_super) {\n    __extends(ToJsonSerializer, _super);\n    function ToJsonSerializer(symbolResolver, summaryResolver, srcFileName) {\n        var _this = _super.call(this) || this;\n        _this.symbolResolver = symbolResolver;\n        _this.summaryResolver = summaryResolver;\n        _this.srcFileName = srcFileName;\n        // Note: This only contains symbols without members.\n        _this.symbols = [];\n        _this.indexBySymbol = new Map();\n        _this.reexportedBy = new Map();\n        // This now contains a `__symbol: number` in the place of\n        // StaticSymbols, but otherwise has the same shape as the original objects.\n        _this.processedSummaryBySymbol = new Map();\n        _this.processedSummaries = [];\n        _this.unprocessedSymbolSummariesBySymbol = new Map();\n        _this.moduleName = symbolResolver.getKnownModuleName(srcFileName);\n        return _this;\n    }\n    ToJsonSerializer.prototype.addSummary = function (summary) {\n        var _this = this;\n        var unprocessedSummary = this.unprocessedSymbolSummariesBySymbol.get(summary.symbol);\n        var processedSummary = this.processedSummaryBySymbol.get(summary.symbol);\n        if (!unprocessedSummary) {\n            unprocessedSummary = { symbol: summary.symbol, metadata: undefined };\n            this.unprocessedSymbolSummariesBySymbol.set(summary.symbol, unprocessedSummary);\n            processedSummary = { symbol: this.processValue(summary.symbol, 0 /* None */) };\n            this.processedSummaries.push(processedSummary);\n            this.processedSummaryBySymbol.set(summary.symbol, processedSummary);\n        }\n        if (!unprocessedSummary.metadata && summary.metadata) {\n            var metadata_1 = summary.metadata || {};\n            if (metadata_1.__symbolic === 'class') {\n                // For classes, we keep everything except their class decorators.\n                // We need to keep e.g. the ctor args, method names, method decorators\n                // so that the class can be extended in another compilation unit.\n                // We don't keep the class decorators as\n                // 1) they refer to data\n                //   that should not cause a rebuild of downstream compilation units\n                //   (e.g. inline templates of @Component, or @NgModule.declarations)\n                // 2) their data is already captured in TypeSummaries, e.g. DirectiveSummary.\n                var clone_1 = {};\n                Object.keys(metadata_1).forEach(function (propName) {\n                    if (propName !== 'decorators') {\n                        clone_1[propName] = metadata_1[propName];\n                    }\n                });\n                metadata_1 = clone_1;\n            }\n            else if (isCall(metadata_1)) {\n                if (!isFunctionCall(metadata_1) && !isMethodCallOnVariable(metadata_1)) {\n                    // Don't store complex calls as we won't be able to simplify them anyways later on.\n                    metadata_1 = {\n                        __symbolic: 'error',\n                        message: 'Complex function calls are not supported.',\n                    };\n                }\n            }\n            // Note: We need to keep storing ctor calls for e.g.\n            // `export const x = new InjectionToken(...)`\n            unprocessedSummary.metadata = metadata_1;\n            processedSummary.metadata = this.processValue(metadata_1, 1 /* ResolveValue */);\n            if (metadata_1 instanceof StaticSymbol &&\n                this.summaryResolver.isLibraryFile(metadata_1.filePath)) {\n                var declarationSymbol = this.symbols[this.indexBySymbol.get(metadata_1)];\n                if (!isLoweredSymbol(declarationSymbol.name)) {\n                    // Note: symbols that were introduced during codegen in the user file can have a reexport\n                    // if a user used `export *`. However, we can't rely on this as tsickle will change\n                    // `export *` into named exports, using only the information from the typechecker.\n                    // As we introduce the new symbols after typecheck, Tsickle does not know about them,\n                    // and omits them when expanding `export *`.\n                    // So we have to keep reexporting these symbols manually via .ngfactory files.\n                    this.reexportedBy.set(declarationSymbol, summary.symbol);\n                }\n            }\n        }\n        if (!unprocessedSummary.type && summary.type) {\n            unprocessedSummary.type = summary.type;\n            // Note: We don't add the summaries of all referenced symbols as for the ResolvedSymbols,\n            // as the type summaries already contain the transitive data that they require\n            // (in a minimal way).\n            processedSummary.type = this.processValue(summary.type, 0 /* None */);\n            // except for reexported directives / pipes, so we need to store\n            // their summaries explicitly.\n            if (summary.type.summaryKind === CompileSummaryKind.NgModule) {\n                var ngModuleSummary = summary.type;\n                ngModuleSummary.exportedDirectives.concat(ngModuleSummary.exportedPipes).forEach(function (id) {\n                    var symbol = id.reference;\n                    if (_this.summaryResolver.isLibraryFile(symbol.filePath) &&\n                        !_this.unprocessedSymbolSummariesBySymbol.has(symbol)) {\n                        var summary_1 = _this.summaryResolver.resolveSummary(symbol);\n                        if (summary_1) {\n                            _this.addSummary(summary_1);\n                        }\n                    }\n                });\n            }\n        }\n    };\n    ToJsonSerializer.prototype.serialize = function () {\n        var _this = this;\n        var exportAs = [];\n        var json = JSON.stringify({\n            moduleName: this.moduleName,\n            summaries: this.processedSummaries,\n            symbols: this.symbols.map(function (symbol, index) {\n                symbol.assertNoMembers();\n                var importAs = undefined;\n                if (_this.summaryResolver.isLibraryFile(symbol.filePath)) {\n                    var reexportSymbol = _this.reexportedBy.get(symbol);\n                    if (reexportSymbol) {\n                        importAs = _this.indexBySymbol.get(reexportSymbol);\n                    }\n                    else {\n                        var summary = _this.unprocessedSymbolSummariesBySymbol.get(symbol);\n                        if (!summary || !summary.metadata || summary.metadata.__symbolic !== 'interface') {\n                            importAs = symbol.name + \"_\" + index;\n                            exportAs.push({ symbol: symbol, exportAs: importAs });\n                        }\n                    }\n                }\n                return {\n                    __symbol: index,\n                    name: symbol.name,\n                    filePath: _this.summaryResolver.toSummaryFileName(symbol.filePath, _this.srcFileName),\n                    importAs: importAs\n                };\n            })\n        });\n        return { json: json, exportAs: exportAs };\n    };\n    ToJsonSerializer.prototype.processValue = function (value, flags) {\n        return visitValue(value, this, flags);\n    };\n    ToJsonSerializer.prototype.visitOther = function (value, context) {\n        if (value instanceof StaticSymbol) {\n            var baseSymbol = this.symbolResolver.getStaticSymbol(value.filePath, value.name);\n            var index = this.visitStaticSymbol(baseSymbol, context);\n            return { __symbol: index, members: value.members };\n        }\n    };\n    /**\n     * Strip line and character numbers from ngsummaries.\n     * Emitting them causes white spaces changes to retrigger upstream\n     * recompilations in bazel.\n     * TODO: find out a way to have line and character numbers in errors without\n     * excessive recompilation in bazel.\n     */\n    ToJsonSerializer.prototype.visitStringMap = function (map, context) {\n        if (map['__symbolic'] === 'resolved') {\n            return visitValue(map.symbol, this, context);\n        }\n        if (map['__symbolic'] === 'error') {\n            delete map['line'];\n            delete map['character'];\n        }\n        return _super.prototype.visitStringMap.call(this, map, context);\n    };\n    /**\n     * Returns null if the options.resolveValue is true, and the summary for the symbol\n     * resolved to a type or could not be resolved.\n     */\n    ToJsonSerializer.prototype.visitStaticSymbol = function (baseSymbol, flags) {\n        var index = this.indexBySymbol.get(baseSymbol);\n        var summary = null;\n        if (flags & 1 /* ResolveValue */ &&\n            this.summaryResolver.isLibraryFile(baseSymbol.filePath)) {\n            if (this.unprocessedSymbolSummariesBySymbol.has(baseSymbol)) {\n                // the summary for this symbol was already added\n                // -> nothing to do.\n                return index;\n            }\n            summary = this.loadSummary(baseSymbol);\n            if (summary && summary.metadata instanceof StaticSymbol) {\n                // The summary is a reexport\n                index = this.visitStaticSymbol(summary.metadata, flags);\n                // reset the summary as it is just a reexport, so we don't want to store it.\n                summary = null;\n            }\n        }\n        else if (index != null) {\n            // Note: == on purpose to compare with undefined!\n            // No summary and the symbol is already added -> nothing to do.\n            return index;\n        }\n        // Note: == on purpose to compare with undefined!\n        if (index == null) {\n            index = this.symbols.length;\n            this.symbols.push(baseSymbol);\n        }\n        this.indexBySymbol.set(baseSymbol, index);\n        if (summary) {\n            this.addSummary(summary);\n        }\n        return index;\n    };\n    ToJsonSerializer.prototype.loadSummary = function (symbol) {\n        var summary = this.summaryResolver.resolveSummary(symbol);\n        if (!summary) {\n            // some symbols might originate from a plain typescript library\n            // that just exported .d.ts and .metadata.json files, i.e. where no summary\n            // files were created.\n            var resolvedSymbol = this.symbolResolver.resolveSymbol(symbol);\n            if (resolvedSymbol) {\n                summary = { symbol: resolvedSymbol.symbol, metadata: resolvedSymbol.metadata };\n            }\n        }\n        return summary;\n    };\n    return ToJsonSerializer;\n}(ValueTransformer));\nvar FromJsonDeserializer = /** @class */ (function (_super) {\n    __extends(FromJsonDeserializer, _super);\n    function FromJsonDeserializer(symbolCache, summaryResolver) {\n        var _this = _super.call(this) || this;\n        _this.symbolCache = symbolCache;\n        _this.summaryResolver = summaryResolver;\n        return _this;\n    }\n    FromJsonDeserializer.prototype.deserialize = function (libraryFileName, json) {\n        var _this = this;\n        var data = JSON.parse(json);\n        var allImportAs = [];\n        this.symbols = data.symbols.map(function (serializedSymbol) { return _this.symbolCache.get(_this.summaryResolver.fromSummaryFileName(serializedSymbol.filePath, libraryFileName), serializedSymbol.name); });\n        data.symbols.forEach(function (serializedSymbol, index) {\n            var symbol = _this.symbols[index];\n            var importAs = serializedSymbol.importAs;\n            if (typeof importAs === 'number') {\n                allImportAs.push({ symbol: symbol, importAs: _this.symbols[importAs] });\n            }\n            else if (typeof importAs === 'string') {\n                allImportAs.push({ symbol: symbol, importAs: _this.symbolCache.get(ngfactoryFilePath(libraryFileName), importAs) });\n            }\n        });\n        var summaries = visitValue(data.summaries, this, null);\n        return { moduleName: data.moduleName, summaries: summaries, importAs: allImportAs };\n    };\n    FromJsonDeserializer.prototype.visitStringMap = function (map, context) {\n        if ('__symbol' in map) {\n            var baseSymbol = this.symbols[map['__symbol']];\n            var members = map['members'];\n            return members.length ? this.symbolCache.get(baseSymbol.filePath, baseSymbol.name, members) :\n                baseSymbol;\n        }\n        else {\n            return _super.prototype.visitStringMap.call(this, map, context);\n        }\n    };\n    return FromJsonDeserializer;\n}(ValueTransformer));\nfunction isCall(metadata) {\n    return metadata && metadata.__symbolic === 'call';\n}\nfunction isFunctionCall(metadata) {\n    return isCall(metadata) && unwrapResolvedMetadata(metadata.expression) instanceof StaticSymbol;\n}\nfunction isMethodCallOnVariable(metadata) {\n    return isCall(metadata) && metadata.expression && metadata.expression.__symbolic === 'select' &&\n        unwrapResolvedMetadata(metadata.expression.expression) instanceof StaticSymbol;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar StubEmitFlags;\n(function (StubEmitFlags) {\n    StubEmitFlags[StubEmitFlags[\"Basic\"] = 1] = \"Basic\";\n    StubEmitFlags[StubEmitFlags[\"TypeCheck\"] = 2] = \"TypeCheck\";\n    StubEmitFlags[StubEmitFlags[\"All\"] = 3] = \"All\";\n})(StubEmitFlags || (StubEmitFlags = {}));\nfunction analyzeNgModules(fileNames, host, staticSymbolResolver, metadataResolver) {\n    var files = _analyzeFilesIncludingNonProgramFiles(fileNames, host, staticSymbolResolver, metadataResolver);\n    return mergeAnalyzedFiles(files);\n}\n\n// Analyzes all of the program files,\n// including files that are not part of the program\n// but are referenced by an NgModule.\nfunction _analyzeFilesIncludingNonProgramFiles(fileNames, host, staticSymbolResolver, metadataResolver) {\n    var seenFiles = new Set();\n    var files = [];\n    var visitFile = function (fileName) {\n        if (seenFiles.has(fileName) || !host.isSourceFile(fileName)) {\n            return false;\n        }\n        seenFiles.add(fileName);\n        var analyzedFile = analyzeFile(host, staticSymbolResolver, metadataResolver, fileName);\n        files.push(analyzedFile);\n        analyzedFile.ngModules.forEach(function (ngModule) {\n            ngModule.transitiveModule.modules.forEach(function (modMeta) { return visitFile(modMeta.reference.filePath); });\n        });\n    };\n    fileNames.forEach(function (fileName) { return visitFile(fileName); });\n    return files;\n}\nfunction analyzeFile(host, staticSymbolResolver, metadataResolver, fileName) {\n    var directives = [];\n    var pipes = [];\n    var injectables = [];\n    var ngModules = [];\n    var hasDecorators = staticSymbolResolver.hasDecorators(fileName);\n    var exportsNonSourceFiles = false;\n    // Don't analyze .d.ts files that have no decorators as a shortcut\n    // to speed up the analysis. This prevents us from\n    // resolving the references in these files.\n    // Note: exportsNonSourceFiles is only needed when compiling with summaries,\n    // which is not the case when .d.ts files are treated as input files.\n    if (!fileName.endsWith('.d.ts') || hasDecorators) {\n        staticSymbolResolver.getSymbolsOf(fileName).forEach(function (symbol) {\n            var resolvedSymbol = staticSymbolResolver.resolveSymbol(symbol);\n            var symbolMeta = resolvedSymbol.metadata;\n            if (!symbolMeta || symbolMeta.__symbolic === 'error') {\n                return;\n            }\n            var isNgSymbol = false;\n            if (symbolMeta.__symbolic === 'class') {\n                if (metadataResolver.isDirective(symbol)) {\n                    isNgSymbol = true;\n                    directives.push(symbol);\n                }\n                else if (metadataResolver.isPipe(symbol)) {\n                    isNgSymbol = true;\n                    pipes.push(symbol);\n                }\n                else if (metadataResolver.isNgModule(symbol)) {\n                    var ngModule = metadataResolver.getNgModuleMetadata(symbol, false);\n                    if (ngModule) {\n                        isNgSymbol = true;\n                        ngModules.push(ngModule);\n                    }\n                }\n                else if (metadataResolver.isInjectable(symbol)) {\n                    isNgSymbol = true;\n                    var injectable = metadataResolver.getInjectableMetadata(symbol, null, false);\n                    if (injectable) {\n                        injectables.push(injectable);\n                    }\n                }\n            }\n            if (!isNgSymbol) {\n                exportsNonSourceFiles =\n                    exportsNonSourceFiles || isValueExportingNonSourceFile(host, symbolMeta);\n            }\n        });\n    }\n    return {\n        fileName: fileName, directives: directives, pipes: pipes, ngModules: ngModules, injectables: injectables, exportsNonSourceFiles: exportsNonSourceFiles,\n    };\n}\n\nfunction isValueExportingNonSourceFile(host, metadata) {\n    var exportsNonSourceFiles = false;\n    var Visitor = /** @class */ (function () {\n        function Visitor() {\n        }\n        Visitor.prototype.visitArray = function (arr, context) {\n            var _this = this;\n            arr.forEach(function (v) { return visitValue(v, _this, context); });\n        };\n        Visitor.prototype.visitStringMap = function (map, context) {\n            var _this = this;\n            Object.keys(map).forEach(function (key) { return visitValue(map[key], _this, context); });\n        };\n        Visitor.prototype.visitPrimitive = function (value, context) { };\n        Visitor.prototype.visitOther = function (value, context) {\n            if (value instanceof StaticSymbol && !host.isSourceFile(value.filePath)) {\n                exportsNonSourceFiles = true;\n            }\n        };\n        return Visitor;\n    }());\n    visitValue(metadata, new Visitor(), null);\n    return exportsNonSourceFiles;\n}\nfunction mergeAnalyzedFiles(analyzedFiles) {\n    var allNgModules = [];\n    var ngModuleByPipeOrDirective = new Map();\n    var allPipesAndDirectives = new Set();\n    analyzedFiles.forEach(function (af) {\n        af.ngModules.forEach(function (ngModule) {\n            allNgModules.push(ngModule);\n            ngModule.declaredDirectives.forEach(function (d) { return ngModuleByPipeOrDirective.set(d.reference, ngModule); });\n            ngModule.declaredPipes.forEach(function (p) { return ngModuleByPipeOrDirective.set(p.reference, ngModule); });\n        });\n        af.directives.forEach(function (d) { return allPipesAndDirectives.add(d); });\n        af.pipes.forEach(function (p) { return allPipesAndDirectives.add(p); });\n    });\n    var symbolsMissingModule = [];\n    allPipesAndDirectives.forEach(function (ref) {\n        if (!ngModuleByPipeOrDirective.has(ref)) {\n            symbolsMissingModule.push(ref);\n        }\n    });\n    return {\n        ngModules: allNgModules,\n        ngModuleByPipeOrDirective: ngModuleByPipeOrDirective,\n        symbolsMissingModule: symbolsMissingModule,\n        files: analyzedFiles\n    };\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar FORMATTED_MESSAGE = 'ngFormattedMessage';\nfunction indentStr(level) {\n    if (level <= 0)\n        return '';\n    if (level < 6)\n        return ['', ' ', '  ', '   ', '    ', '     '][level];\n    var half = indentStr(Math.floor(level / 2));\n    return half + half + (level % 2 === 1 ? ' ' : '');\n}\nfunction formatChain(chain, indent) {\n    if (indent === void 0) { indent = 0; }\n    if (!chain)\n        return '';\n    var position = chain.position ?\n        chain.position.fileName + \"(\" + (chain.position.line + 1) + \",\" + (chain.position.column + 1) + \")\" :\n        '';\n    var prefix = position && indent === 0 ? position + \": \" : '';\n    var postfix = position && indent !== 0 ? \" at \" + position : '';\n    var message = \"\" + prefix + chain.message + postfix;\n    return \"\" + indentStr(indent) + message + ((chain.next && ('\\n' + formatChain(chain.next, indent + 2))) || '');\n}\nfunction formattedError(chain) {\n    var message = formatChain(chain) + '.';\n    var error$$1 = syntaxError(message);\n    error$$1[FORMATTED_MESSAGE] = true;\n    error$$1.chain = chain;\n    error$$1.position = chain.position;\n    return error$$1;\n}\nfunction isFormattedError(error$$1) {\n    return !!error$$1[FORMATTED_MESSAGE];\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar ANGULAR_CORE = '@angular/core';\nvar ANGULAR_ROUTER = '@angular/router';\nvar HIDDEN_KEY = /^\\$.*\\$$/;\nvar IGNORE = {\n    __symbolic: 'ignore'\n};\nvar USE_VALUE = 'useValue';\nvar PROVIDE = 'provide';\nvar REFERENCE_SET = new Set([USE_VALUE, 'useFactory', 'data', 'id', 'loadChildren']);\nvar TYPEGUARD_POSTFIX = 'TypeGuard';\nvar USE_IF = 'UseIf';\nfunction shouldIgnore(value) {\n    return value && value.__symbolic == 'ignore';\n}\n/**\n * A static reflector implements enough of the Reflector API that is necessary to compile\n * templates statically.\n */\nvar StaticReflector = /** @class */ (function () {\n    function StaticReflector(summaryResolver, symbolResolver, knownMetadataClasses, knownMetadataFunctions, errorRecorder) {\n        if (knownMetadataClasses === void 0) { knownMetadataClasses = []; }\n        if (knownMetadataFunctions === void 0) { knownMetadataFunctions = []; }\n        var _this = this;\n        this.summaryResolver = summaryResolver;\n        this.symbolResolver = symbolResolver;\n        this.errorRecorder = errorRecorder;\n        this.annotationCache = new Map();\n        this.shallowAnnotationCache = new Map();\n        this.propertyCache = new Map();\n        this.parameterCache = new Map();\n        this.methodCache = new Map();\n        this.staticCache = new Map();\n        this.conversionMap = new Map();\n        this.resolvedExternalReferences = new Map();\n        this.annotationForParentClassWithSummaryKind = new Map();\n        this.initializeConversionMap();\n        knownMetadataClasses.forEach(function (kc) { return _this._registerDecoratorOrConstructor(_this.getStaticSymbol(kc.filePath, kc.name), kc.ctor); });\n        knownMetadataFunctions.forEach(function (kf) { return _this._registerFunction(_this.getStaticSymbol(kf.filePath, kf.name), kf.fn); });\n        this.annotationForParentClassWithSummaryKind.set(CompileSummaryKind.Directive, [createDirective, createComponent]);\n        this.annotationForParentClassWithSummaryKind.set(CompileSummaryKind.Pipe, [createPipe]);\n        this.annotationForParentClassWithSummaryKind.set(CompileSummaryKind.NgModule, [createNgModule]);\n        this.annotationForParentClassWithSummaryKind.set(CompileSummaryKind.Injectable, [createInjectable, createPipe, createDirective, createComponent, createNgModule]);\n    }\n    StaticReflector.prototype.componentModuleUrl = function (typeOrFunc) {\n        var staticSymbol = this.findSymbolDeclaration(typeOrFunc);\n        return this.symbolResolver.getResourcePath(staticSymbol);\n    };\n    StaticReflector.prototype.resolveExternalReference = function (ref, containingFile) {\n        var key = undefined;\n        if (!containingFile) {\n            key = ref.moduleName + \":\" + ref.name;\n            var declarationSymbol_1 = this.resolvedExternalReferences.get(key);\n            if (declarationSymbol_1)\n                return declarationSymbol_1;\n        }\n        var refSymbol = this.symbolResolver.getSymbolByModule(ref.moduleName, ref.name, containingFile);\n        var declarationSymbol = this.findSymbolDeclaration(refSymbol);\n        if (!containingFile) {\n            this.symbolResolver.recordModuleNameForFileName(refSymbol.filePath, ref.moduleName);\n            this.symbolResolver.recordImportAs(declarationSymbol, refSymbol);\n        }\n        if (key) {\n            this.resolvedExternalReferences.set(key, declarationSymbol);\n        }\n        return declarationSymbol;\n    };\n    StaticReflector.prototype.findDeclaration = function (moduleUrl, name, containingFile) {\n        return this.findSymbolDeclaration(this.symbolResolver.getSymbolByModule(moduleUrl, name, containingFile));\n    };\n    StaticReflector.prototype.tryFindDeclaration = function (moduleUrl, name, containingFile) {\n        var _this = this;\n        return this.symbolResolver.ignoreErrorsFor(function () { return _this.findDeclaration(moduleUrl, name, containingFile); });\n    };\n    StaticReflector.prototype.findSymbolDeclaration = function (symbol) {\n        var resolvedSymbol = this.symbolResolver.resolveSymbol(symbol);\n        if (resolvedSymbol) {\n            var resolvedMetadata = resolvedSymbol.metadata;\n            if (resolvedMetadata && resolvedMetadata.__symbolic === 'resolved') {\n                resolvedMetadata = resolvedMetadata.symbol;\n            }\n            if (resolvedMetadata instanceof StaticSymbol) {\n                return this.findSymbolDeclaration(resolvedSymbol.metadata);\n            }\n        }\n        return symbol;\n    };\n    StaticReflector.prototype.tryAnnotations = function (type) {\n        var originalRecorder = this.errorRecorder;\n        this.errorRecorder = function (error$$1, fileName) { };\n        try {\n            return this.annotations(type);\n        }\n        finally {\n            this.errorRecorder = originalRecorder;\n        }\n    };\n    StaticReflector.prototype.annotations = function (type) {\n        var _this = this;\n        return this._annotations(type, function (type, decorators) { return _this.simplify(type, decorators); }, this.annotationCache);\n    };\n    StaticReflector.prototype.shallowAnnotations = function (type) {\n        var _this = this;\n        return this._annotations(type, function (type, decorators) { return _this.simplify(type, decorators, true); }, this.shallowAnnotationCache);\n    };\n    StaticReflector.prototype._annotations = function (type, simplify, annotationCache) {\n        var annotations = annotationCache.get(type);\n        if (!annotations) {\n            annotations = [];\n            var classMetadata = this.getTypeMetadata(type);\n            var parentType = this.findParentType(type, classMetadata);\n            if (parentType) {\n                var parentAnnotations = this.annotations(parentType);\n                annotations.push.apply(annotations, __spread(parentAnnotations));\n            }\n            var ownAnnotations_1 = [];\n            if (classMetadata['decorators']) {\n                ownAnnotations_1 = simplify(type, classMetadata['decorators']);\n                annotations.push.apply(annotations, __spread(ownAnnotations_1));\n            }\n            if (parentType && !this.summaryResolver.isLibraryFile(type.filePath) &&\n                this.summaryResolver.isLibraryFile(parentType.filePath)) {\n                var summary = this.summaryResolver.resolveSummary(parentType);\n                if (summary && summary.type) {\n                    var requiredAnnotationTypes = this.annotationForParentClassWithSummaryKind.get(summary.type.summaryKind);\n                    var typeHasRequiredAnnotation = requiredAnnotationTypes.some(function (requiredType) { return ownAnnotations_1.some(function (ann) { return requiredType.isTypeOf(ann); }); });\n                    if (!typeHasRequiredAnnotation) {\n                        this.reportError(formatMetadataError(metadataError(\"Class \" + type.name + \" in \" + type.filePath + \" extends from a \" + CompileSummaryKind[summary.type.summaryKind] + \" in another compilation unit without duplicating the decorator\", \n                        /* summary */ undefined, \"Please add a \" + requiredAnnotationTypes.map(function (type) { return type.ngMetadataName; }).join(' or ') + \" decorator to the class\"), type), type);\n                    }\n                }\n            }\n            annotationCache.set(type, annotations.filter(function (ann) { return !!ann; }));\n        }\n        return annotations;\n    };\n    StaticReflector.prototype.propMetadata = function (type) {\n        var _this = this;\n        var propMetadata = this.propertyCache.get(type);\n        if (!propMetadata) {\n            var classMetadata = this.getTypeMetadata(type);\n            propMetadata = {};\n            var parentType = this.findParentType(type, classMetadata);\n            if (parentType) {\n                var parentPropMetadata_1 = this.propMetadata(parentType);\n                Object.keys(parentPropMetadata_1).forEach(function (parentProp) {\n                    propMetadata[parentProp] = parentPropMetadata_1[parentProp];\n                });\n            }\n            var members_1 = classMetadata['members'] || {};\n            Object.keys(members_1).forEach(function (propName) {\n                var propData = members_1[propName];\n                var prop = propData\n                    .find(function (a) { return a['__symbolic'] == 'property' || a['__symbolic'] == 'method'; });\n                var decorators = [];\n                if (propMetadata[propName]) {\n                    decorators.push.apply(decorators, __spread(propMetadata[propName]));\n                }\n                propMetadata[propName] = decorators;\n                if (prop && prop['decorators']) {\n                    decorators.push.apply(decorators, __spread(_this.simplify(type, prop['decorators'])));\n                }\n            });\n            this.propertyCache.set(type, propMetadata);\n        }\n        return propMetadata;\n    };\n    StaticReflector.prototype.parameters = function (type) {\n        var _this = this;\n        if (!(type instanceof StaticSymbol)) {\n            this.reportError(new Error(\"parameters received \" + JSON.stringify(type) + \" which is not a StaticSymbol\"), type);\n            return [];\n        }\n        try {\n            var parameters_1 = this.parameterCache.get(type);\n            if (!parameters_1) {\n                var classMetadata = this.getTypeMetadata(type);\n                var parentType = this.findParentType(type, classMetadata);\n                var members = classMetadata ? classMetadata['members'] : null;\n                var ctorData = members ? members['__ctor__'] : null;\n                if (ctorData) {\n                    var ctor = ctorData.find(function (a) { return a['__symbolic'] == 'constructor'; });\n                    var rawParameterTypes = ctor['parameters'] || [];\n                    var parameterDecorators_1 = this.simplify(type, ctor['parameterDecorators'] || []);\n                    parameters_1 = [];\n                    rawParameterTypes.forEach(function (rawParamType, index) {\n                        var nestedResult = [];\n                        var paramType = _this.trySimplify(type, rawParamType);\n                        if (paramType)\n                            nestedResult.push(paramType);\n                        var decorators = parameterDecorators_1 ? parameterDecorators_1[index] : null;\n                        if (decorators) {\n                            nestedResult.push.apply(nestedResult, __spread(decorators));\n                        }\n                        parameters_1.push(nestedResult);\n                    });\n                }\n                else if (parentType) {\n                    parameters_1 = this.parameters(parentType);\n                }\n                if (!parameters_1) {\n                    parameters_1 = [];\n                }\n                this.parameterCache.set(type, parameters_1);\n            }\n            return parameters_1;\n        }\n        catch (e) {\n            console.error(\"Failed on type \" + JSON.stringify(type) + \" with error \" + e);\n            throw e;\n        }\n    };\n    StaticReflector.prototype._methodNames = function (type) {\n        var methodNames = this.methodCache.get(type);\n        if (!methodNames) {\n            var classMetadata = this.getTypeMetadata(type);\n            methodNames = {};\n            var parentType = this.findParentType(type, classMetadata);\n            if (parentType) {\n                var parentMethodNames_1 = this._methodNames(parentType);\n                Object.keys(parentMethodNames_1).forEach(function (parentProp) {\n                    methodNames[parentProp] = parentMethodNames_1[parentProp];\n                });\n            }\n            var members_2 = classMetadata['members'] || {};\n            Object.keys(members_2).forEach(function (propName) {\n                var propData = members_2[propName];\n                var isMethod = propData.some(function (a) { return a['__symbolic'] == 'method'; });\n                methodNames[propName] = methodNames[propName] || isMethod;\n            });\n            this.methodCache.set(type, methodNames);\n        }\n        return methodNames;\n    };\n    StaticReflector.prototype._staticMembers = function (type) {\n        var staticMembers = this.staticCache.get(type);\n        if (!staticMembers) {\n            var classMetadata = this.getTypeMetadata(type);\n            var staticMemberData = classMetadata['statics'] || {};\n            staticMembers = Object.keys(staticMemberData);\n            this.staticCache.set(type, staticMembers);\n        }\n        return staticMembers;\n    };\n    StaticReflector.prototype.findParentType = function (type, classMetadata) {\n        var parentType = this.trySimplify(type, classMetadata['extends']);\n        if (parentType instanceof StaticSymbol) {\n            return parentType;\n        }\n    };\n    StaticReflector.prototype.hasLifecycleHook = function (type, lcProperty) {\n        if (!(type instanceof StaticSymbol)) {\n            this.reportError(new Error(\"hasLifecycleHook received \" + JSON.stringify(type) + \" which is not a StaticSymbol\"), type);\n        }\n        try {\n            return !!this._methodNames(type)[lcProperty];\n        }\n        catch (e) {\n            console.error(\"Failed on type \" + JSON.stringify(type) + \" with error \" + e);\n            throw e;\n        }\n    };\n    StaticReflector.prototype.guards = function (type) {\n        if (!(type instanceof StaticSymbol)) {\n            this.reportError(new Error(\"guards received \" + JSON.stringify(type) + \" which is not a StaticSymbol\"), type);\n            return {};\n        }\n        var staticMembers = this._staticMembers(type);\n        var result = {};\n        try {\n            for (var staticMembers_1 = __values(staticMembers), staticMembers_1_1 = staticMembers_1.next(); !staticMembers_1_1.done; staticMembers_1_1 = staticMembers_1.next()) {\n                var name_1 = staticMembers_1_1.value;\n                if (name_1.endsWith(TYPEGUARD_POSTFIX)) {\n                    var property = name_1.substr(0, name_1.length - TYPEGUARD_POSTFIX.length);\n                    var value = void 0;\n                    if (property.endsWith(USE_IF)) {\n                        property = name_1.substr(0, property.length - USE_IF.length);\n                        value = USE_IF;\n                    }\n                    else {\n                        value = this.getStaticSymbol(type.filePath, type.name, [name_1]);\n                    }\n                    result[property] = value;\n                }\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (staticMembers_1_1 && !staticMembers_1_1.done && (_a = staticMembers_1.return)) _a.call(staticMembers_1);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        return result;\n        var e_1, _a;\n    };\n    StaticReflector.prototype._registerDecoratorOrConstructor = function (type, ctor) {\n        this.conversionMap.set(type, function (context, args) { return new (ctor.bind.apply(ctor, __spread([void 0], args)))(); });\n    };\n    StaticReflector.prototype._registerFunction = function (type, fn) {\n        this.conversionMap.set(type, function (context, args) { return fn.apply(undefined, args); });\n    };\n    StaticReflector.prototype.initializeConversionMap = function () {\n        this._registerDecoratorOrConstructor(this.findDeclaration(ANGULAR_CORE, 'Injectable'), createInjectable);\n        this.injectionToken = this.findDeclaration(ANGULAR_CORE, 'InjectionToken');\n        this.opaqueToken = this.findDeclaration(ANGULAR_CORE, 'OpaqueToken');\n        this.ROUTES = this.tryFindDeclaration(ANGULAR_ROUTER, 'ROUTES');\n        this.ANALYZE_FOR_ENTRY_COMPONENTS =\n            this.findDeclaration(ANGULAR_CORE, 'ANALYZE_FOR_ENTRY_COMPONENTS');\n        this._registerDecoratorOrConstructor(this.findDeclaration(ANGULAR_CORE, 'Host'), createHost);\n        this._registerDecoratorOrConstructor(this.findDeclaration(ANGULAR_CORE, 'Self'), createSelf);\n        this._registerDecoratorOrConstructor(this.findDeclaration(ANGULAR_CORE, 'SkipSelf'), createSkipSelf);\n        this._registerDecoratorOrConstructor(this.findDeclaration(ANGULAR_CORE, 'Inject'), createInject);\n        this._registerDecoratorOrConstructor(this.findDeclaration(ANGULAR_CORE, 'Optional'), createOptional);\n        this._registerDecoratorOrConstructor(this.findDeclaration(ANGULAR_CORE, 'Attribute'), createAttribute);\n        this._registerDecoratorOrConstructor(this.findDeclaration(ANGULAR_CORE, 'ContentChild'), createContentChild);\n        this._registerDecoratorOrConstructor(this.findDeclaration(ANGULAR_CORE, 'ContentChildren'), createContentChildren);\n        this._registerDecoratorOrConstructor(this.findDeclaration(ANGULAR_CORE, 'ViewChild'), createViewChild);\n        this._registerDecoratorOrConstructor(this.findDeclaration(ANGULAR_CORE, 'ViewChildren'), createViewChildren);\n        this._registerDecoratorOrConstructor(this.findDeclaration(ANGULAR_CORE, 'Input'), createInput);\n        this._registerDecoratorOrConstructor(this.findDeclaration(ANGULAR_CORE, 'Output'), createOutput);\n        this._registerDecoratorOrConstructor(this.findDeclaration(ANGULAR_CORE, 'Pipe'), createPipe);\n        this._registerDecoratorOrConstructor(this.findDeclaration(ANGULAR_CORE, 'HostBinding'), createHostBinding);\n        this._registerDecoratorOrConstructor(this.findDeclaration(ANGULAR_CORE, 'HostListener'), createHostListener);\n        this._registerDecoratorOrConstructor(this.findDeclaration(ANGULAR_CORE, 'Directive'), createDirective);\n        this._registerDecoratorOrConstructor(this.findDeclaration(ANGULAR_CORE, 'Component'), createComponent);\n        this._registerDecoratorOrConstructor(this.findDeclaration(ANGULAR_CORE, 'NgModule'), createNgModule);\n        // Note: Some metadata classes can be used directly with Provider.deps.\n        this._registerDecoratorOrConstructor(this.findDeclaration(ANGULAR_CORE, 'Host'), createHost);\n        this._registerDecoratorOrConstructor(this.findDeclaration(ANGULAR_CORE, 'Self'), createSelf);\n        this._registerDecoratorOrConstructor(this.findDeclaration(ANGULAR_CORE, 'SkipSelf'), createSkipSelf);\n        this._registerDecoratorOrConstructor(this.findDeclaration(ANGULAR_CORE, 'Optional'), createOptional);\n    };\n    /**\n     * getStaticSymbol produces a Type whose metadata is known but whose implementation is not loaded.\n     * All types passed to the StaticResolver should be pseudo-types returned by this method.\n     *\n     * @param declarationFile the absolute path of the file where the symbol is declared\n     * @param name the name of the type.\n     */\n    StaticReflector.prototype.getStaticSymbol = function (declarationFile, name, members) {\n        return this.symbolResolver.getStaticSymbol(declarationFile, name, members);\n    };\n    /**\n     * Simplify but discard any errors\n     */\n    StaticReflector.prototype.trySimplify = function (context, value) {\n        var originalRecorder = this.errorRecorder;\n        this.errorRecorder = function (error$$1, fileName) { };\n        var result = this.simplify(context, value);\n        this.errorRecorder = originalRecorder;\n        return result;\n    };\n    /** @internal */\n    StaticReflector.prototype.simplify = function (context, value, lazy) {\n        if (lazy === void 0) { lazy = false; }\n        var self = this;\n        var scope = BindingScope$1.empty;\n        var calling = new Map();\n        function simplifyInContext(context, value, depth, references) {\n            function resolveReferenceValue(staticSymbol) {\n                var resolvedSymbol = self.symbolResolver.resolveSymbol(staticSymbol);\n                return resolvedSymbol ? resolvedSymbol.metadata : null;\n            }\n            function simplifyEagerly(value) {\n                return simplifyInContext(context, value, depth, 0);\n            }\n            function simplifyLazily(value) {\n                return simplifyInContext(context, value, depth, references + 1);\n            }\n            function simplifyNested(nestedContext, value) {\n                if (nestedContext === context) {\n                    // If the context hasn't changed let the exception propagate unmodified.\n                    return simplifyInContext(nestedContext, value, depth + 1, references);\n                }\n                try {\n                    return simplifyInContext(nestedContext, value, depth + 1, references);\n                }\n                catch (e) {\n                    if (isMetadataError(e)) {\n                        // Propagate the message text up but add a message to the chain that explains how we got\n                        // here.\n                        // e.chain implies e.symbol\n                        var summaryMsg = e.chain ? 'references \\'' + e.symbol.name + '\\'' : errorSummary(e);\n                        var summary = \"'\" + nestedContext.name + \"' \" + summaryMsg;\n                        var chain = { message: summary, position: e.position, next: e.chain };\n                        // TODO(chuckj): retrieve the position information indirectly from the collectors node\n                        // map if the metadata is from a .ts file.\n                        self.error({\n                            message: e.message,\n                            advise: e.advise,\n                            context: e.context, chain: chain,\n                            symbol: nestedContext\n                        }, context);\n                    }\n                    else {\n                        // It is probably an internal error.\n                        throw e;\n                    }\n                }\n            }\n            function simplifyCall(functionSymbol, targetFunction, args, targetExpression) {\n                if (targetFunction && targetFunction['__symbolic'] == 'function') {\n                    if (calling.get(functionSymbol)) {\n                        self.error({\n                            message: 'Recursion is not supported',\n                            summary: \"called '\" + functionSymbol.name + \"' recursively\",\n                            value: targetFunction\n                        }, functionSymbol);\n                    }\n                    try {\n                        var value_1 = targetFunction['value'];\n                        if (value_1 && (depth != 0 || value_1.__symbolic != 'error')) {\n                            var parameters = targetFunction['parameters'];\n                            var defaults = targetFunction.defaults;\n                            args = args.map(function (arg) { return simplifyNested(context, arg); })\n                                .map(function (arg) { return shouldIgnore(arg) ? undefined : arg; });\n                            if (defaults && defaults.length > args.length) {\n                                args.push.apply(args, __spread(defaults.slice(args.length).map(function (value) { return simplify(value); })));\n                            }\n                            calling.set(functionSymbol, true);\n                            var functionScope = BindingScope$1.build();\n                            for (var i = 0; i < parameters.length; i++) {\n                                functionScope.define(parameters[i], args[i]);\n                            }\n                            var oldScope = scope;\n                            var result_1;\n                            try {\n                                scope = functionScope.done();\n                                result_1 = simplifyNested(functionSymbol, value_1);\n                            }\n                            finally {\n                                scope = oldScope;\n                            }\n                            return result_1;\n                        }\n                    }\n                    finally {\n                        calling.delete(functionSymbol);\n                    }\n                }\n                if (depth === 0) {\n                    // If depth is 0 we are evaluating the top level expression that is describing element\n                    // decorator. In this case, it is a decorator we don't understand, such as a custom\n                    // non-angular decorator, and we should just ignore it.\n                    return IGNORE;\n                }\n                var position = undefined;\n                if (targetExpression && targetExpression.__symbolic == 'resolved') {\n                    var line = targetExpression.line;\n                    var character = targetExpression.character;\n                    var fileName = targetExpression.fileName;\n                    if (fileName != null && line != null && character != null) {\n                        position = { fileName: fileName, line: line, column: character };\n                    }\n                }\n                self.error({\n                    message: FUNCTION_CALL_NOT_SUPPORTED,\n                    context: functionSymbol,\n                    value: targetFunction, position: position\n                }, context);\n            }\n            function simplify(expression) {\n                if (isPrimitive(expression)) {\n                    return expression;\n                }\n                if (expression instanceof Array) {\n                    var result_2 = [];\n                    try {\n                        for (var _a = __values(expression), _b = _a.next(); !_b.done; _b = _a.next()) {\n                            var item = _b.value;\n                            // Check for a spread expression\n                            if (item && item.__symbolic === 'spread') {\n                                // We call with references as 0 because we require the actual value and cannot\n                                // tolerate a reference here.\n                                var spreadArray = simplifyEagerly(item.expression);\n                                if (Array.isArray(spreadArray)) {\n                                    try {\n                                        for (var spreadArray_1 = __values(spreadArray), spreadArray_1_1 = spreadArray_1.next(); !spreadArray_1_1.done; spreadArray_1_1 = spreadArray_1.next()) {\n                                            var spreadItem = spreadArray_1_1.value;\n                                            result_2.push(spreadItem);\n                                        }\n                                    }\n                                    catch (e_2_1) { e_2 = { error: e_2_1 }; }\n                                    finally {\n                                        try {\n                                            if (spreadArray_1_1 && !spreadArray_1_1.done && (_c = spreadArray_1.return)) _c.call(spreadArray_1);\n                                        }\n                                        finally { if (e_2) throw e_2.error; }\n                                    }\n                                    continue;\n                                }\n                            }\n                            var value_2 = simplify(item);\n                            if (shouldIgnore(value_2)) {\n                                continue;\n                            }\n                            result_2.push(value_2);\n                        }\n                    }\n                    catch (e_3_1) { e_3 = { error: e_3_1 }; }\n                    finally {\n                        try {\n                            if (_b && !_b.done && (_d = _a.return)) _d.call(_a);\n                        }\n                        finally { if (e_3) throw e_3.error; }\n                    }\n                    return result_2;\n                }\n                if (expression instanceof StaticSymbol) {\n                    // Stop simplification at builtin symbols or if we are in a reference context and\n                    // the symbol doesn't have members.\n                    if (expression === self.injectionToken || self.conversionMap.has(expression) ||\n                        (references > 0 && !expression.members.length)) {\n                        return expression;\n                    }\n                    else {\n                        var staticSymbol = expression;\n                        var declarationValue = resolveReferenceValue(staticSymbol);\n                        if (declarationValue != null) {\n                            return simplifyNested(staticSymbol, declarationValue);\n                        }\n                        else {\n                            return staticSymbol;\n                        }\n                    }\n                }\n                if (expression) {\n                    if (expression['__symbolic']) {\n                        var staticSymbol = void 0;\n                        switch (expression['__symbolic']) {\n                            case 'binop':\n                                var left = simplify(expression['left']);\n                                if (shouldIgnore(left))\n                                    return left;\n                                var right = simplify(expression['right']);\n                                if (shouldIgnore(right))\n                                    return right;\n                                switch (expression['operator']) {\n                                    case '&&':\n                                        return left && right;\n                                    case '||':\n                                        return left || right;\n                                    case '|':\n                                        return left | right;\n                                    case '^':\n                                        return left ^ right;\n                                    case '&':\n                                        return left & right;\n                                    case '==':\n                                        return left == right;\n                                    case '!=':\n                                        return left != right;\n                                    case '===':\n                                        return left === right;\n                                    case '!==':\n                                        return left !== right;\n                                    case '<':\n                                        return left < right;\n                                    case '>':\n                                        return left > right;\n                                    case '<=':\n                                        return left <= right;\n                                    case '>=':\n                                        return left >= right;\n                                    case '<<':\n                                        return left << right;\n                                    case '>>':\n                                        return left >> right;\n                                    case '+':\n                                        return left + right;\n                                    case '-':\n                                        return left - right;\n                                    case '*':\n                                        return left * right;\n                                    case '/':\n                                        return left / right;\n                                    case '%':\n                                        return left % right;\n                                }\n                                return null;\n                            case 'if':\n                                var condition = simplify(expression['condition']);\n                                return condition ? simplify(expression['thenExpression']) :\n                                    simplify(expression['elseExpression']);\n                            case 'pre':\n                                var operand = simplify(expression['operand']);\n                                if (shouldIgnore(operand))\n                                    return operand;\n                                switch (expression['operator']) {\n                                    case '+':\n                                        return operand;\n                                    case '-':\n                                        return -operand;\n                                    case '!':\n                                        return !operand;\n                                    case '~':\n                                        return ~operand;\n                                }\n                                return null;\n                            case 'index':\n                                var indexTarget = simplifyEagerly(expression['expression']);\n                                var index = simplifyEagerly(expression['index']);\n                                if (indexTarget && isPrimitive(index))\n                                    return indexTarget[index];\n                                return null;\n                            case 'select':\n                                var member = expression['member'];\n                                var selectContext = context;\n                                var selectTarget = simplify(expression['expression']);\n                                if (selectTarget instanceof StaticSymbol) {\n                                    var members = selectTarget.members.concat(member);\n                                    selectContext =\n                                        self.getStaticSymbol(selectTarget.filePath, selectTarget.name, members);\n                                    var declarationValue = resolveReferenceValue(selectContext);\n                                    if (declarationValue != null) {\n                                        return simplifyNested(selectContext, declarationValue);\n                                    }\n                                    else {\n                                        return selectContext;\n                                    }\n                                }\n                                if (selectTarget && isPrimitive(member))\n                                    return simplifyNested(selectContext, selectTarget[member]);\n                                return null;\n                            case 'reference':\n                                // Note: This only has to deal with variable references, as symbol references have\n                                // been converted into 'resolved'\n                                // in the StaticSymbolResolver.\n                                var name_2 = expression['name'];\n                                var localValue = scope.resolve(name_2);\n                                if (localValue != BindingScope$1.missing) {\n                                    return localValue;\n                                }\n                                break;\n                            case 'resolved':\n                                try {\n                                    return simplify(expression.symbol);\n                                }\n                                catch (e) {\n                                    // If an error is reported evaluating the symbol record the position of the\n                                    // reference in the error so it can\n                                    // be reported in the error message generated from the exception.\n                                    if (isMetadataError(e) && expression.fileName != null &&\n                                        expression.line != null && expression.character != null) {\n                                        e.position = {\n                                            fileName: expression.fileName,\n                                            line: expression.line,\n                                            column: expression.character\n                                        };\n                                    }\n                                    throw e;\n                                }\n                            case 'class':\n                                return context;\n                            case 'function':\n                                return context;\n                            case 'new':\n                            case 'call':\n                                // Determine if the function is a built-in conversion\n                                staticSymbol = simplifyInContext(context, expression['expression'], depth + 1, /* references */ 0);\n                                if (staticSymbol instanceof StaticSymbol) {\n                                    if (staticSymbol === self.injectionToken || staticSymbol === self.opaqueToken) {\n                                        // if somebody calls new InjectionToken, don't create an InjectionToken,\n                                        // but rather return the symbol to which the InjectionToken is assigned to.\n                                        // OpaqueToken is supported too as it is required by the language service to\n                                        // support v4 and prior versions of Angular.\n                                        return context;\n                                    }\n                                    var argExpressions = expression['arguments'] || [];\n                                    var converter = self.conversionMap.get(staticSymbol);\n                                    if (converter) {\n                                        var args = argExpressions.map(function (arg) { return simplifyNested(context, arg); })\n                                            .map(function (arg) { return shouldIgnore(arg) ? undefined : arg; });\n                                        return converter(context, args);\n                                    }\n                                    else {\n                                        // Determine if the function is one we can simplify.\n                                        var targetFunction = resolveReferenceValue(staticSymbol);\n                                        return simplifyCall(staticSymbol, targetFunction, argExpressions, expression['expression']);\n                                    }\n                                }\n                                return IGNORE;\n                            case 'error':\n                                var message = expression.message;\n                                if (expression['line'] != null) {\n                                    self.error({\n                                        message: message,\n                                        context: expression.context,\n                                        value: expression,\n                                        position: {\n                                            fileName: expression['fileName'],\n                                            line: expression['line'],\n                                            column: expression['character']\n                                        }\n                                    }, context);\n                                }\n                                else {\n                                    self.error({ message: message, context: expression.context }, context);\n                                }\n                                return IGNORE;\n                            case 'ignore':\n                                return expression;\n                        }\n                        return null;\n                    }\n                    return mapStringMap(expression, function (value, name) {\n                        if (REFERENCE_SET.has(name)) {\n                            if (name === USE_VALUE && PROVIDE in expression) {\n                                // If this is a provider expression, check for special tokens that need the value\n                                // during analysis.\n                                var provide = simplify(expression.provide);\n                                if (provide === self.ROUTES || provide == self.ANALYZE_FOR_ENTRY_COMPONENTS) {\n                                    return simplify(value);\n                                }\n                            }\n                            return simplifyLazily(value);\n                        }\n                        return simplify(value);\n                    });\n                }\n                return IGNORE;\n                var e_3, _d, e_2, _c;\n            }\n            return simplify(value);\n        }\n        var result;\n        try {\n            result = simplifyInContext(context, value, 0, lazy ? 1 : 0);\n        }\n        catch (e) {\n            if (this.errorRecorder) {\n                this.reportError(e, context);\n            }\n            else {\n                throw formatMetadataError(e, context);\n            }\n        }\n        if (shouldIgnore(result)) {\n            return undefined;\n        }\n        return result;\n    };\n    StaticReflector.prototype.getTypeMetadata = function (type) {\n        var resolvedSymbol = this.symbolResolver.resolveSymbol(type);\n        return resolvedSymbol && resolvedSymbol.metadata ? resolvedSymbol.metadata :\n            { __symbolic: 'class' };\n    };\n    StaticReflector.prototype.reportError = function (error$$1, context, path$$1) {\n        if (this.errorRecorder) {\n            this.errorRecorder(formatMetadataError(error$$1, context), (context && context.filePath) || path$$1);\n        }\n        else {\n            throw error$$1;\n        }\n    };\n    StaticReflector.prototype.error = function (_a, reportingContext) {\n        var message = _a.message, summary = _a.summary, advise = _a.advise, position = _a.position, context = _a.context, value = _a.value, symbol = _a.symbol, chain = _a.chain;\n        this.reportError(metadataError(message, summary, advise, position, symbol, context, chain), reportingContext);\n    };\n    return StaticReflector;\n}());\nvar METADATA_ERROR = 'ngMetadataError';\nfunction metadataError(message, summary, advise, position, symbol, context, chain) {\n    var error$$1 = syntaxError(message);\n    error$$1[METADATA_ERROR] = true;\n    if (advise)\n        error$$1.advise = advise;\n    if (position)\n        error$$1.position = position;\n    if (summary)\n        error$$1.summary = summary;\n    if (context)\n        error$$1.context = context;\n    if (chain)\n        error$$1.chain = chain;\n    if (symbol)\n        error$$1.symbol = symbol;\n    return error$$1;\n}\nfunction isMetadataError(error$$1) {\n    return !!error$$1[METADATA_ERROR];\n}\nvar REFERENCE_TO_NONEXPORTED_CLASS = 'Reference to non-exported class';\nvar VARIABLE_NOT_INITIALIZED = 'Variable not initialized';\nvar DESTRUCTURE_NOT_SUPPORTED = 'Destructuring not supported';\nvar COULD_NOT_RESOLVE_TYPE = 'Could not resolve type';\nvar FUNCTION_CALL_NOT_SUPPORTED = 'Function call not supported';\nvar REFERENCE_TO_LOCAL_SYMBOL = 'Reference to a local symbol';\nvar LAMBDA_NOT_SUPPORTED = 'Lambda not supported';\nfunction expandedMessage(message, context) {\n    switch (message) {\n        case REFERENCE_TO_NONEXPORTED_CLASS:\n            if (context && context.className) {\n                return \"References to a non-exported class are not supported in decorators but \" + context.className + \" was referenced.\";\n            }\n            break;\n        case VARIABLE_NOT_INITIALIZED:\n            return 'Only initialized variables and constants can be referenced in decorators because the value of this variable is needed by the template compiler';\n        case DESTRUCTURE_NOT_SUPPORTED:\n            return 'Referencing an exported destructured variable or constant is not supported in decorators and this value is needed by the template compiler';\n        case COULD_NOT_RESOLVE_TYPE:\n            if (context && context.typeName) {\n                return \"Could not resolve type \" + context.typeName;\n            }\n            break;\n        case FUNCTION_CALL_NOT_SUPPORTED:\n            if (context && context.name) {\n                return \"Function calls are not supported in decorators but '\" + context.name + \"' was called\";\n            }\n            return 'Function calls are not supported in decorators';\n        case REFERENCE_TO_LOCAL_SYMBOL:\n            if (context && context.name) {\n                return \"Reference to a local (non-exported) symbols are not supported in decorators but '\" + context.name + \"' was referenced\";\n            }\n            break;\n        case LAMBDA_NOT_SUPPORTED:\n            return \"Function expressions are not supported in decorators\";\n    }\n    return message;\n}\nfunction messageAdvise(message, context) {\n    switch (message) {\n        case REFERENCE_TO_NONEXPORTED_CLASS:\n            if (context && context.className) {\n                return \"Consider exporting '\" + context.className + \"'\";\n            }\n            break;\n        case DESTRUCTURE_NOT_SUPPORTED:\n            return 'Consider simplifying to avoid destructuring';\n        case REFERENCE_TO_LOCAL_SYMBOL:\n            if (context && context.name) {\n                return \"Consider exporting '\" + context.name + \"'\";\n            }\n            break;\n        case LAMBDA_NOT_SUPPORTED:\n            return \"Consider changing the function expression into an exported function\";\n    }\n    return undefined;\n}\nfunction errorSummary(error$$1) {\n    if (error$$1.summary) {\n        return error$$1.summary;\n    }\n    switch (error$$1.message) {\n        case REFERENCE_TO_NONEXPORTED_CLASS:\n            if (error$$1.context && error$$1.context.className) {\n                return \"references non-exported class \" + error$$1.context.className;\n            }\n            break;\n        case VARIABLE_NOT_INITIALIZED:\n            return 'is not initialized';\n        case DESTRUCTURE_NOT_SUPPORTED:\n            return 'is a destructured variable';\n        case COULD_NOT_RESOLVE_TYPE:\n            return 'could not be resolved';\n        case FUNCTION_CALL_NOT_SUPPORTED:\n            if (error$$1.context && error$$1.context.name) {\n                return \"calls '\" + error$$1.context.name + \"'\";\n            }\n            return \"calls a function\";\n        case REFERENCE_TO_LOCAL_SYMBOL:\n            if (error$$1.context && error$$1.context.name) {\n                return \"references local variable \" + error$$1.context.name;\n            }\n            return \"references a local variable\";\n    }\n    return 'contains the error';\n}\nfunction mapStringMap(input, transform) {\n    if (!input)\n        return {};\n    var result = {};\n    Object.keys(input).forEach(function (key) {\n        var value = transform(input[key], key);\n        if (!shouldIgnore(value)) {\n            if (HIDDEN_KEY.test(key)) {\n                Object.defineProperty(result, key, { enumerable: false, configurable: true, value: value });\n            }\n            else {\n                result[key] = value;\n            }\n        }\n    });\n    return result;\n}\nfunction isPrimitive(o) {\n    return o === null || (typeof o !== 'function' && typeof o !== 'object');\n}\nvar BindingScope$1 = /** @class */ (function () {\n    function BindingScope() {\n    }\n    BindingScope.build = function () {\n        var current = new Map();\n        return {\n            define: function (name, value) {\n                current.set(name, value);\n                return this;\n            },\n            done: function () {\n                return current.size > 0 ? new PopulatedScope(current) : BindingScope.empty;\n            }\n        };\n    };\n    BindingScope.missing = {};\n    BindingScope.empty = { resolve: function (name) { return BindingScope.missing; } };\n    return BindingScope;\n}());\nvar PopulatedScope = /** @class */ (function (_super) {\n    __extends(PopulatedScope, _super);\n    function PopulatedScope(bindings) {\n        var _this = _super.call(this) || this;\n        _this.bindings = bindings;\n        return _this;\n    }\n    PopulatedScope.prototype.resolve = function (name) {\n        return this.bindings.has(name) ? this.bindings.get(name) : BindingScope$1.missing;\n    };\n    return PopulatedScope;\n}(BindingScope$1));\nfunction formatMetadataMessageChain(chain, advise) {\n    var expanded = expandedMessage(chain.message, chain.context);\n    var nesting = chain.symbol ? \" in '\" + chain.symbol.name + \"'\" : '';\n    var message = \"\" + expanded + nesting;\n    var position = chain.position;\n    var next = chain.next ?\n        formatMetadataMessageChain(chain.next, advise) :\n        advise ? { message: advise } : undefined;\n    return { message: message, position: position, next: next };\n}\nfunction formatMetadataError(e, context) {\n    if (isMetadataError(e)) {\n        // Produce a formatted version of the and leaving enough information in the original error\n        // to recover the formatting information to eventually produce a diagnostic error message.\n        var position = e.position;\n        var chain = {\n            message: \"Error during template compile of '\" + context.name + \"'\",\n            position: position,\n            next: { message: e.message, next: e.chain, context: e.context, symbol: e.symbol }\n        };\n        var advise = e.advise || messageAdvise(e.message, e.context);\n        return formattedError(formatMetadataMessageChain(chain, advise));\n    }\n    return e;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar AotSummaryResolver = /** @class */ (function () {\n    function AotSummaryResolver(host, staticSymbolCache) {\n        this.host = host;\n        this.staticSymbolCache = staticSymbolCache;\n        // Note: this will only contain StaticSymbols without members!\n        this.summaryCache = new Map();\n        this.loadedFilePaths = new Map();\n        // Note: this will only contain StaticSymbols without members!\n        this.importAs = new Map();\n        this.knownFileNameToModuleNames = new Map();\n    }\n    AotSummaryResolver.prototype.isLibraryFile = function (filePath) {\n        // Note: We need to strip the .ngfactory. file path,\n        // so this method also works for generated files\n        // (for which host.isSourceFile will always return false).\n        return !this.host.isSourceFile(stripGeneratedFileSuffix(filePath));\n    };\n    AotSummaryResolver.prototype.toSummaryFileName = function (filePath, referringSrcFileName) {\n        return this.host.toSummaryFileName(filePath, referringSrcFileName);\n    };\n    AotSummaryResolver.prototype.fromSummaryFileName = function (fileName, referringLibFileName) {\n        return this.host.fromSummaryFileName(fileName, referringLibFileName);\n    };\n    AotSummaryResolver.prototype.resolveSummary = function (staticSymbol) {\n        var rootSymbol = staticSymbol.members.length ?\n            this.staticSymbolCache.get(staticSymbol.filePath, staticSymbol.name) :\n            staticSymbol;\n        var summary = this.summaryCache.get(rootSymbol);\n        if (!summary) {\n            this._loadSummaryFile(staticSymbol.filePath);\n            summary = this.summaryCache.get(staticSymbol);\n        }\n        return (rootSymbol === staticSymbol && summary) || null;\n    };\n    AotSummaryResolver.prototype.getSymbolsOf = function (filePath) {\n        if (this._loadSummaryFile(filePath)) {\n            return Array.from(this.summaryCache.keys()).filter(function (symbol) { return symbol.filePath === filePath; });\n        }\n        return null;\n    };\n    AotSummaryResolver.prototype.getImportAs = function (staticSymbol) {\n        staticSymbol.assertNoMembers();\n        return this.importAs.get(staticSymbol);\n    };\n    /**\n     * Converts a file path to a module name that can be used as an `import`.\n     */\n    AotSummaryResolver.prototype.getKnownModuleName = function (importedFilePath) {\n        return this.knownFileNameToModuleNames.get(importedFilePath) || null;\n    };\n    AotSummaryResolver.prototype.addSummary = function (summary) { this.summaryCache.set(summary.symbol, summary); };\n    AotSummaryResolver.prototype._loadSummaryFile = function (filePath) {\n        var _this = this;\n        var hasSummary = this.loadedFilePaths.get(filePath);\n        if (hasSummary != null) {\n            return hasSummary;\n        }\n        var json = null;\n        if (this.isLibraryFile(filePath)) {\n            var summaryFilePath = summaryFileName(filePath);\n            try {\n                json = this.host.loadSummary(summaryFilePath);\n            }\n            catch (e) {\n                console.error(\"Error loading summary file \" + summaryFilePath);\n                throw e;\n            }\n        }\n        hasSummary = json != null;\n        this.loadedFilePaths.set(filePath, hasSummary);\n        if (json) {\n            var _a = deserializeSummaries(this.staticSymbolCache, this, filePath, json), moduleName = _a.moduleName, summaries = _a.summaries, importAs = _a.importAs;\n            summaries.forEach(function (summary) { return _this.summaryCache.set(summary.symbol, summary); });\n            if (moduleName) {\n                this.knownFileNameToModuleNames.set(filePath, moduleName);\n            }\n            importAs.forEach(function (importAs) { _this.importAs.set(importAs.symbol, importAs.importAs); });\n        }\n        return hasSummary;\n    };\n    return AotSummaryResolver;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * Creates a new AotCompiler based on options and a host.\n */\n\nvar JitSummaryResolver = /** @class */ (function () {\n    function JitSummaryResolver() {\n        this._summaries = new Map();\n    }\n    JitSummaryResolver.prototype.isLibraryFile = function () { return false; };\n    JitSummaryResolver.prototype.toSummaryFileName = function (fileName) { return fileName; };\n    JitSummaryResolver.prototype.fromSummaryFileName = function (fileName) { return fileName; };\n    JitSummaryResolver.prototype.resolveSummary = function (reference) {\n        return this._summaries.get(reference) || null;\n    };\n    JitSummaryResolver.prototype.getSymbolsOf = function () { return []; };\n    JitSummaryResolver.prototype.getImportAs = function (reference) { return reference; };\n    JitSummaryResolver.prototype.getKnownModuleName = function (fileName) { return null; };\n    JitSummaryResolver.prototype.addSummary = function (summary) { this._summaries.set(summary.symbol, summary); };\n    return JitSummaryResolver;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar AbstractJsEmitterVisitor = /** @class */ (function (_super) {\n    __extends(AbstractJsEmitterVisitor, _super);\n    function AbstractJsEmitterVisitor() {\n        return _super.call(this, false) || this;\n    }\n    AbstractJsEmitterVisitor.prototype.visitDeclareClassStmt = function (stmt, ctx) {\n        var _this = this;\n        ctx.pushClass(stmt);\n        this._visitClassConstructor(stmt, ctx);\n        if (stmt.parent != null) {\n            ctx.print(stmt, stmt.name + \".prototype = Object.create(\");\n            stmt.parent.visitExpression(this, ctx);\n            ctx.println(stmt, \".prototype);\");\n        }\n        stmt.getters.forEach(function (getter) { return _this._visitClassGetter(stmt, getter, ctx); });\n        stmt.methods.forEach(function (method) { return _this._visitClassMethod(stmt, method, ctx); });\n        ctx.popClass();\n        return null;\n    };\n    AbstractJsEmitterVisitor.prototype._visitClassConstructor = function (stmt, ctx) {\n        ctx.print(stmt, \"function \" + stmt.name + \"(\");\n        if (stmt.constructorMethod != null) {\n            this._visitParams(stmt.constructorMethod.params, ctx);\n        }\n        ctx.println(stmt, \") {\");\n        ctx.incIndent();\n        if (stmt.constructorMethod != null) {\n            if (stmt.constructorMethod.body.length > 0) {\n                ctx.println(stmt, \"var self = this;\");\n                this.visitAllStatements(stmt.constructorMethod.body, ctx);\n            }\n        }\n        ctx.decIndent();\n        ctx.println(stmt, \"}\");\n    };\n    AbstractJsEmitterVisitor.prototype._visitClassGetter = function (stmt, getter, ctx) {\n        ctx.println(stmt, \"Object.defineProperty(\" + stmt.name + \".prototype, '\" + getter.name + \"', { get: function() {\");\n        ctx.incIndent();\n        if (getter.body.length > 0) {\n            ctx.println(stmt, \"var self = this;\");\n            this.visitAllStatements(getter.body, ctx);\n        }\n        ctx.decIndent();\n        ctx.println(stmt, \"}});\");\n    };\n    AbstractJsEmitterVisitor.prototype._visitClassMethod = function (stmt, method, ctx) {\n        ctx.print(stmt, stmt.name + \".prototype.\" + method.name + \" = function(\");\n        this._visitParams(method.params, ctx);\n        ctx.println(stmt, \") {\");\n        ctx.incIndent();\n        if (method.body.length > 0) {\n            ctx.println(stmt, \"var self = this;\");\n            this.visitAllStatements(method.body, ctx);\n        }\n        ctx.decIndent();\n        ctx.println(stmt, \"};\");\n    };\n    AbstractJsEmitterVisitor.prototype.visitReadVarExpr = function (ast, ctx) {\n        if (ast.builtin === BuiltinVar.This) {\n            ctx.print(ast, 'self');\n        }\n        else if (ast.builtin === BuiltinVar.Super) {\n            throw new Error(\"'super' needs to be handled at a parent ast node, not at the variable level!\");\n        }\n        else {\n            _super.prototype.visitReadVarExpr.call(this, ast, ctx);\n        }\n        return null;\n    };\n    AbstractJsEmitterVisitor.prototype.visitDeclareVarStmt = function (stmt, ctx) {\n        ctx.print(stmt, \"var \" + stmt.name);\n        if (stmt.value) {\n            ctx.print(stmt, ' = ');\n            stmt.value.visitExpression(this, ctx);\n        }\n        ctx.println(stmt, \";\");\n        return null;\n    };\n    AbstractJsEmitterVisitor.prototype.visitCastExpr = function (ast, ctx) {\n        ast.value.visitExpression(this, ctx);\n        return null;\n    };\n    AbstractJsEmitterVisitor.prototype.visitInvokeFunctionExpr = function (expr, ctx) {\n        var fnExpr = expr.fn;\n        if (fnExpr instanceof ReadVarExpr && fnExpr.builtin === BuiltinVar.Super) {\n            ctx.currentClass.parent.visitExpression(this, ctx);\n            ctx.print(expr, \".call(this\");\n            if (expr.args.length > 0) {\n                ctx.print(expr, \", \");\n                this.visitAllExpressions(expr.args, ctx, ',');\n            }\n            ctx.print(expr, \")\");\n        }\n        else {\n            _super.prototype.visitInvokeFunctionExpr.call(this, expr, ctx);\n        }\n        return null;\n    };\n    AbstractJsEmitterVisitor.prototype.visitFunctionExpr = function (ast, ctx) {\n        ctx.print(ast, \"function\" + (ast.name ? ' ' + ast.name : '') + \"(\");\n        this._visitParams(ast.params, ctx);\n        ctx.println(ast, \") {\");\n        ctx.incIndent();\n        this.visitAllStatements(ast.statements, ctx);\n        ctx.decIndent();\n        ctx.print(ast, \"}\");\n        return null;\n    };\n    AbstractJsEmitterVisitor.prototype.visitDeclareFunctionStmt = function (stmt, ctx) {\n        ctx.print(stmt, \"function \" + stmt.name + \"(\");\n        this._visitParams(stmt.params, ctx);\n        ctx.println(stmt, \") {\");\n        ctx.incIndent();\n        this.visitAllStatements(stmt.statements, ctx);\n        ctx.decIndent();\n        ctx.println(stmt, \"}\");\n        return null;\n    };\n    AbstractJsEmitterVisitor.prototype.visitTryCatchStmt = function (stmt, ctx) {\n        ctx.println(stmt, \"try {\");\n        ctx.incIndent();\n        this.visitAllStatements(stmt.bodyStmts, ctx);\n        ctx.decIndent();\n        ctx.println(stmt, \"} catch (\" + CATCH_ERROR_VAR$1.name + \") {\");\n        ctx.incIndent();\n        var catchStmts = [CATCH_STACK_VAR$1.set(CATCH_ERROR_VAR$1.prop('stack')).toDeclStmt(null, [\n                StmtModifier.Final\n            ])].concat(stmt.catchStmts);\n        this.visitAllStatements(catchStmts, ctx);\n        ctx.decIndent();\n        ctx.println(stmt, \"}\");\n        return null;\n    };\n    AbstractJsEmitterVisitor.prototype._visitParams = function (params, ctx) {\n        this.visitAllObjects(function (param) { return ctx.print(null, param.name); }, params, ctx, ',');\n    };\n    AbstractJsEmitterVisitor.prototype.getBuiltinMethodName = function (method) {\n        var name;\n        switch (method) {\n            case BuiltinMethod.ConcatArray:\n                name = 'concat';\n                break;\n            case BuiltinMethod.SubscribeObservable:\n                name = 'subscribe';\n                break;\n            case BuiltinMethod.Bind:\n                name = 'bind';\n                break;\n            default:\n                throw new Error(\"Unknown builtin method: \" + method);\n        }\n        return name;\n    };\n    return AbstractJsEmitterVisitor;\n}(AbstractEmitterVisitor));\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nvar JitEmitterVisitor = /** @class */ (function (_super) {\n    __extends(JitEmitterVisitor, _super);\n    function JitEmitterVisitor(reflector) {\n        var _this = _super.call(this) || this;\n        _this.reflector = reflector;\n        _this._evalArgNames = [];\n        _this._evalArgValues = [];\n        _this._evalExportedVars = [];\n        return _this;\n    }\n    JitEmitterVisitor.prototype.createReturnStmt = function (ctx) {\n        var stmt = new ReturnStatement(new LiteralMapExpr(this._evalExportedVars.map(function (resultVar) { return new LiteralMapEntry(resultVar, variable(resultVar), false); })));\n        stmt.visitStatement(this, ctx);\n    };\n    JitEmitterVisitor.prototype.getArgs = function () {\n        var result = {};\n        for (var i = 0; i < this._evalArgNames.length; i++) {\n            result[this._evalArgNames[i]] = this._evalArgValues[i];\n        }\n        return result;\n    };\n    JitEmitterVisitor.prototype.visitExternalExpr = function (ast, ctx) {\n        var value = this.reflector.resolveExternalReference(ast.value);\n        var id = this._evalArgValues.indexOf(value);\n        if (id === -1) {\n            id = this._evalArgValues.length;\n            this._evalArgValues.push(value);\n            var name_1 = identifierName({ reference: value }) || 'val';\n            this._evalArgNames.push(\"jit_\" + name_1 + \"_\" + id);\n        }\n        ctx.print(ast, this._evalArgNames[id]);\n        return null;\n    };\n    JitEmitterVisitor.prototype.visitDeclareVarStmt = function (stmt, ctx) {\n        if (stmt.hasModifier(StmtModifier.Exported)) {\n            this._evalExportedVars.push(stmt.name);\n        }\n        return _super.prototype.visitDeclareVarStmt.call(this, stmt, ctx);\n    };\n    JitEmitterVisitor.prototype.visitDeclareFunctionStmt = function (stmt, ctx) {\n        if (stmt.hasModifier(StmtModifier.Exported)) {\n            this._evalExportedVars.push(stmt.name);\n        }\n        return _super.prototype.visitDeclareFunctionStmt.call(this, stmt, ctx);\n    };\n    JitEmitterVisitor.prototype.visitDeclareClassStmt = function (stmt, ctx) {\n        if (stmt.hasModifier(StmtModifier.Exported)) {\n            this._evalExportedVars.push(stmt.name);\n        }\n        return _super.prototype.visitDeclareClassStmt.call(this, stmt, ctx);\n    };\n    return JitEmitterVisitor;\n}(AbstractJsEmitterVisitor));\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Provides access to reflection data about symbols that the compiler needs.\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Create a {@link UrlResolver} with no package prefix.\n */\n\nfunction createOfflineCompileUrlResolver() {\n    return new UrlResolver('.');\n}\nvar UrlResolver = /** @class */ (function () {\n    function UrlResolverImpl(_packagePrefix) {\n        if (_packagePrefix === void 0) { _packagePrefix = null; }\n        this._packagePrefix = _packagePrefix;\n    }\n    /**\n     * Resolves the `url` given the `baseUrl`:\n     * - when the `url` is null, the `baseUrl` is returned,\n     * - if `url` is relative ('path/to/here', './path/to/here'), the resolved url is a combination of\n     * `baseUrl` and `url`,\n     * - if `url` is absolute (it has a scheme: 'http://', 'https://' or start with '/'), the `url` is\n     * returned as is (ignoring the `baseUrl`)\n     */\n    UrlResolverImpl.prototype.resolve = function (baseUrl, url) {\n        var resolvedUrl = url;\n        if (baseUrl != null && baseUrl.length > 0) {\n            resolvedUrl = _resolveUrl(baseUrl, resolvedUrl);\n        }\n        var resolvedParts = _split(resolvedUrl);\n        var prefix = this._packagePrefix;\n        if (prefix != null && resolvedParts != null &&\n            resolvedParts[_ComponentIndex.Scheme] == 'package') {\n            var path$$1 = resolvedParts[_ComponentIndex.Path];\n            prefix = prefix.replace(/\\/+$/, '');\n            path$$1 = path$$1.replace(/^\\/+/, '');\n            return prefix + \"/\" + path$$1;\n        }\n        return resolvedUrl;\n    };\n    return UrlResolverImpl;\n}());\n/**\n * Extract the scheme of a URL.\n */\n\n// The code below is adapted from Traceur:\n// https://github.com/google/traceur-compiler/blob/9511c1dafa972bf0de1202a8a863bad02f0f95a8/src/runtime/url.js\n/**\n * Builds a URI string from already-encoded parts.\n *\n * No encoding is performed.  Any component may be omitted as either null or\n * undefined.\n *\n * @param opt_scheme The scheme such as 'http'.\n * @param opt_userInfo The user name before the '@'.\n * @param opt_domain The domain such as 'www.google.com', already\n *     URI-encoded.\n * @param opt_port The port number.\n * @param opt_path The path, already URI-encoded.  If it is not\n *     empty, it must begin with a slash.\n * @param opt_queryData The URI-encoded query data.\n * @param opt_fragment The URI-encoded fragment identifier.\n * @return The fully combined URI.\n */\nfunction _buildFromEncodedParts(opt_scheme, opt_userInfo, opt_domain, opt_port, opt_path, opt_queryData, opt_fragment) {\n    var out = [];\n    if (opt_scheme != null) {\n        out.push(opt_scheme + ':');\n    }\n    if (opt_domain != null) {\n        out.push('//');\n        if (opt_userInfo != null) {\n            out.push(opt_userInfo + '@');\n        }\n        out.push(opt_domain);\n        if (opt_port != null) {\n            out.push(':' + opt_port);\n        }\n    }\n    if (opt_path != null) {\n        out.push(opt_path);\n    }\n    if (opt_queryData != null) {\n        out.push('?' + opt_queryData);\n    }\n    if (opt_fragment != null) {\n        out.push('#' + opt_fragment);\n    }\n    return out.join('');\n}\n/**\n * A regular expression for breaking a URI into its component parts.\n *\n * {@link http://www.gbiv.com/protocols/uri/rfc/rfc3986.html#RFC2234} says\n * As the \"first-match-wins\" algorithm is identical to the \"greedy\"\n * disambiguation method used by POSIX regular expressions, it is natural and\n * commonplace to use a regular expression for parsing the potential five\n * components of a URI reference.\n *\n * The following line is the regular expression for breaking-down a\n * well-formed URI reference into its components.\n *\n * <pre>\n * ^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?\n *  12            3  4          5       6  7        8 9\n * </pre>\n *\n * The numbers in the second line above are only to assist readability; they\n * indicate the reference points for each subexpression (i.e., each paired\n * parenthesis). We refer to the value matched for subexpression <n> as $<n>.\n * For example, matching the above expression to\n * <pre>\n *     http://www.ics.uci.edu/pub/ietf/uri/#Related\n * </pre>\n * results in the following subexpression matches:\n * <pre>\n *    $1 = http:\n *    $2 = http\n *    $3 = //www.ics.uci.edu\n *    $4 = www.ics.uci.edu\n *    $5 = /pub/ietf/uri/\n *    $6 = <undefined>\n *    $7 = <undefined>\n *    $8 = #Related\n *    $9 = Related\n * </pre>\n * where <undefined> indicates that the component is not present, as is the\n * case for the query component in the above example. Therefore, we can\n * determine the value of the five components as\n * <pre>\n *    scheme    = $2\n *    authority = $4\n *    path      = $5\n *    query     = $7\n *    fragment  = $9\n * </pre>\n *\n * The regular expression has been modified slightly to expose the\n * userInfo, domain, and port separately from the authority.\n * The modified version yields\n * <pre>\n *    $1 = http              scheme\n *    $2 = <undefined>       userInfo -\\\n *    $3 = www.ics.uci.edu   domain     | authority\n *    $4 = <undefined>       port     -/\n *    $5 = /pub/ietf/uri/    path\n *    $6 = <undefined>       query without ?\n *    $7 = Related           fragment without #\n * </pre>\n * @internal\n */\nvar _splitRe = new RegExp('^' +\n    '(?:' +\n    '([^:/?#.]+)' + // scheme - ignore special characters\n    // used by other URL parts such as :,\n    // ?, /, #, and .\n    ':)?' +\n    '(?://' +\n    '(?:([^/?#]*)@)?' + // userInfo\n    '([\\\\w\\\\d\\\\-\\\\u0100-\\\\uffff.%]*)' + // domain - restrict to letters,\n    // digits, dashes, dots, percent\n    // escapes, and unicode characters.\n    '(?::([0-9]+))?' + // port\n    ')?' +\n    '([^?#]+)?' + // path\n    '(?:\\\\?([^#]*))?' + // query\n    '(?:#(.*))?' + // fragment\n    '$');\n/**\n * The index of each URI component in the return value of goog.uri.utils.split.\n * @enum {number}\n */\nvar _ComponentIndex;\n(function (_ComponentIndex) {\n    _ComponentIndex[_ComponentIndex[\"Scheme\"] = 1] = \"Scheme\";\n    _ComponentIndex[_ComponentIndex[\"UserInfo\"] = 2] = \"UserInfo\";\n    _ComponentIndex[_ComponentIndex[\"Domain\"] = 3] = \"Domain\";\n    _ComponentIndex[_ComponentIndex[\"Port\"] = 4] = \"Port\";\n    _ComponentIndex[_ComponentIndex[\"Path\"] = 5] = \"Path\";\n    _ComponentIndex[_ComponentIndex[\"QueryData\"] = 6] = \"QueryData\";\n    _ComponentIndex[_ComponentIndex[\"Fragment\"] = 7] = \"Fragment\";\n})(_ComponentIndex || (_ComponentIndex = {}));\n/**\n * Splits a URI into its component parts.\n *\n * Each component can be accessed via the component indices; for example:\n * <pre>\n * goog.uri.utils.split(someStr)[goog.uri.utils.CompontentIndex.QUERY_DATA];\n * </pre>\n *\n * @param uri The URI string to examine.\n * @return Each component still URI-encoded.\n *     Each component that is present will contain the encoded value, whereas\n *     components that are not present will be undefined or empty, depending\n *     on the browser's regular expression implementation.  Never null, since\n *     arbitrary strings may still look like path names.\n */\nfunction _split(uri) {\n    return uri.match(_splitRe);\n}\n/**\n  * Removes dot segments in given path component, as described in\n  * RFC 3986, section 5.2.4.\n  *\n  * @param path A non-empty path component.\n  * @return Path component with removed dot segments.\n  */\nfunction _removeDotSegments(path$$1) {\n    if (path$$1 == '/')\n        return '/';\n    var leadingSlash = path$$1[0] == '/' ? '/' : '';\n    var trailingSlash = path$$1[path$$1.length - 1] === '/' ? '/' : '';\n    var segments = path$$1.split('/');\n    var out = [];\n    var up = 0;\n    for (var pos = 0; pos < segments.length; pos++) {\n        var segment = segments[pos];\n        switch (segment) {\n            case '':\n            case '.':\n                break;\n            case '..':\n                if (out.length > 0) {\n                    out.pop();\n                }\n                else {\n                    up++;\n                }\n                break;\n            default:\n                out.push(segment);\n        }\n    }\n    if (leadingSlash == '') {\n        while (up-- > 0) {\n            out.unshift('..');\n        }\n        if (out.length === 0)\n            out.push('.');\n    }\n    return leadingSlash + out.join('/') + trailingSlash;\n}\n/**\n * Takes an array of the parts from split and canonicalizes the path part\n * and then joins all the parts.\n */\nfunction _joinAndCanonicalizePath(parts) {\n    var path$$1 = parts[_ComponentIndex.Path];\n    path$$1 = path$$1 == null ? '' : _removeDotSegments(path$$1);\n    parts[_ComponentIndex.Path] = path$$1;\n    return _buildFromEncodedParts(parts[_ComponentIndex.Scheme], parts[_ComponentIndex.UserInfo], parts[_ComponentIndex.Domain], parts[_ComponentIndex.Port], path$$1, parts[_ComponentIndex.QueryData], parts[_ComponentIndex.Fragment]);\n}\n/**\n * Resolves a URL.\n * @param base The URL acting as the base URL.\n * @param to The URL to resolve.\n */\nfunction _resolveUrl(base, url) {\n    var parts = _split(encodeURI(url));\n    var baseParts = _split(base);\n    if (parts[_ComponentIndex.Scheme] != null) {\n        return _joinAndCanonicalizePath(parts);\n    }\n    else {\n        parts[_ComponentIndex.Scheme] = baseParts[_ComponentIndex.Scheme];\n    }\n    for (var i = _ComponentIndex.Scheme; i <= _ComponentIndex.Port; i++) {\n        if (parts[i] == null) {\n            parts[i] = baseParts[i];\n        }\n    }\n    if (parts[_ComponentIndex.Path][0] == '/') {\n        return _joinAndCanonicalizePath(parts);\n    }\n    var path$$1 = baseParts[_ComponentIndex.Path];\n    if (path$$1 == null)\n        path$$1 = '/';\n    var index = path$$1.lastIndexOf('/');\n    path$$1 = path$$1.substring(0, index + 1) + parts[_ComponentIndex.Path];\n    parts[_ComponentIndex.Path] = path$$1;\n    return _joinAndCanonicalizePath(parts);\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * An interface for retrieving documents by URL that the compiler uses\n * to load templates.\n */\nvar ResourceLoader = /** @class */ (function () {\n    function ResourceLoader() {\n    }\n    ResourceLoader.prototype.get = function (url) { return ''; };\n    return ResourceLoader;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Extract i18n messages from source code\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * @module\n * @description\n * Entry point for all APIs of the compiler package.\n *\n * <div class=\"callout is-critical\">\n *   <header>Unstable APIs</header>\n *   <p>\n *     All compiler apis are currently considered experimental and private!\n *   </p>\n *   <p>\n *     We expect the APIs in this package to keep on changing. Do not rely on them.\n *   </p>\n * </div>\n */\n\n// This file only reexports content of the `src` folder. Keep it that way.\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * @module\n * @description\n * Entry point for all public APIs of this package.\n */\n\n// This file only reexports content of the `src` folder. Keep it that way.\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n// This file is not used to build this module. It is only used during editing\n// by the TypeScript language service and during build for verification. `ngc`\n// replaces this file with production index.ts when it rewrites private symbol\n// names.\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n// This file is not used to build this module. It is only used during editing\n// by the TypeScript language service and during build for verification. `ngc`\n// replaces this file with production index.ts when it rewrites private symbol\n// names.\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * An enumeration of basic types.\n *\n * @experimental\n */\nvar BuiltinType$1;\n(function (BuiltinType) {\n    /**\n     * The type is a type that can hold any other type.\n     */\n    BuiltinType[BuiltinType[\"Any\"] = 0] = \"Any\";\n    /**\n     * The type of a string literal.\n     */\n    BuiltinType[BuiltinType[\"String\"] = 1] = \"String\";\n    /**\n     * The type of a numeric literal.\n     */\n    BuiltinType[BuiltinType[\"Number\"] = 2] = \"Number\";\n    /**\n     * The type of the `true` and `false` literals.\n     */\n    BuiltinType[BuiltinType[\"Boolean\"] = 3] = \"Boolean\";\n    /**\n     * The type of the `undefined` literal.\n     */\n    BuiltinType[BuiltinType[\"Undefined\"] = 4] = \"Undefined\";\n    /**\n     * the type of the `null` literal.\n     */\n    BuiltinType[BuiltinType[\"Null\"] = 5] = \"Null\";\n    /**\n     * the type is an unbound type parameter.\n     */\n    BuiltinType[BuiltinType[\"Unbound\"] = 6] = \"Unbound\";\n    /**\n     * Not a built-in type.\n     */\n    BuiltinType[BuiltinType[\"Other\"] = 7] = \"Other\";\n})(BuiltinType$1 || (BuiltinType$1 = {}));\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar DiagnosticKind;\n(function (DiagnosticKind) {\n    DiagnosticKind[DiagnosticKind[\"Error\"] = 0] = \"Error\";\n    DiagnosticKind[DiagnosticKind[\"Warning\"] = 1] = \"Warning\";\n})(DiagnosticKind || (DiagnosticKind = {}));\nvar TypeDiagnostic = /** @class */ (function () {\n    function TypeDiagnostic(kind, message, ast) {\n        this.kind = kind;\n        this.message = message;\n        this.ast = ast;\n    }\n    return TypeDiagnostic;\n}());\n// AstType calculatetype of the ast given AST element.\nvar AstType = /** @class */ (function () {\n    function AstType(scope, query, context) {\n        this.scope = scope;\n        this.query = query;\n        this.context = context;\n    }\n    AstType.prototype.getType = function (ast) { return ast.visit(this); };\n    AstType.prototype.getDiagnostics = function (ast) {\n        this.diagnostics = [];\n        var type = ast.visit(this);\n        if (this.context.event && type.callable) {\n            this.reportWarning('Unexpected callable expression. Expected a method call', ast);\n        }\n        return this.diagnostics;\n    };\n    AstType.prototype.visitBinary = function (ast) {\n        var _this = this;\n        // Treat undefined and null as other.\n        function normalize$$1(kind, other) {\n            switch (kind) {\n                case BuiltinType$1.Undefined:\n                case BuiltinType$1.Null:\n                    return normalize$$1(other, BuiltinType$1.Other);\n            }\n            return kind;\n        }\n        var getType = function (ast, operation) {\n            var type = _this.getType(ast);\n            if (type.nullable) {\n                switch (operation) {\n                    case '&&':\n                    case '||':\n                    case '==':\n                    case '!=':\n                    case '===':\n                    case '!==':\n                        // Nullable allowed.\n                        break;\n                    default:\n                        _this.reportError(\"The expression might be null\", ast);\n                        break;\n                }\n                return _this.query.getNonNullableType(type);\n            }\n            return type;\n        };\n        var leftType = getType(ast.left, ast.operation);\n        var rightType = getType(ast.right, ast.operation);\n        var leftRawKind = this.query.getTypeKind(leftType);\n        var rightRawKind = this.query.getTypeKind(rightType);\n        var leftKind = normalize$$1(leftRawKind, rightRawKind);\n        var rightKind = normalize$$1(rightRawKind, leftRawKind);\n        // The following swtich implements operator typing similar to the\n        // type production tables in the TypeScript specification.\n        // https://github.com/Microsoft/TypeScript/blob/v1.8.10/doc/spec.md#4.19\n        var operKind = leftKind << 8 | rightKind;\n        switch (ast.operation) {\n            case '*':\n            case '/':\n            case '%':\n            case '-':\n            case '<<':\n            case '>>':\n            case '>>>':\n            case '&':\n            case '^':\n            case '|':\n                switch (operKind) {\n                    case BuiltinType$1.Any << 8 | BuiltinType$1.Any:\n                    case BuiltinType$1.Number << 8 | BuiltinType$1.Any:\n                    case BuiltinType$1.Any << 8 | BuiltinType$1.Number:\n                    case BuiltinType$1.Number << 8 | BuiltinType$1.Number:\n                        return this.query.getBuiltinType(BuiltinType$1.Number);\n                    default:\n                        var errorAst = ast.left;\n                        switch (leftKind) {\n                            case BuiltinType$1.Any:\n                            case BuiltinType$1.Number:\n                                errorAst = ast.right;\n                                break;\n                        }\n                        return this.reportError('Expected a numeric type', errorAst);\n                }\n            case '+':\n                switch (operKind) {\n                    case BuiltinType$1.Any << 8 | BuiltinType$1.Any:\n                    case BuiltinType$1.Any << 8 | BuiltinType$1.Boolean:\n                    case BuiltinType$1.Any << 8 | BuiltinType$1.Number:\n                    case BuiltinType$1.Any << 8 | BuiltinType$1.Other:\n                    case BuiltinType$1.Boolean << 8 | BuiltinType$1.Any:\n                    case BuiltinType$1.Number << 8 | BuiltinType$1.Any:\n                    case BuiltinType$1.Other << 8 | BuiltinType$1.Any:\n                        return this.anyType;\n                    case BuiltinType$1.Any << 8 | BuiltinType$1.String:\n                    case BuiltinType$1.Boolean << 8 | BuiltinType$1.String:\n                    case BuiltinType$1.Number << 8 | BuiltinType$1.String:\n                    case BuiltinType$1.String << 8 | BuiltinType$1.Any:\n                    case BuiltinType$1.String << 8 | BuiltinType$1.Boolean:\n                    case BuiltinType$1.String << 8 | BuiltinType$1.Number:\n                    case BuiltinType$1.String << 8 | BuiltinType$1.String:\n                    case BuiltinType$1.String << 8 | BuiltinType$1.Other:\n                    case BuiltinType$1.Other << 8 | BuiltinType$1.String:\n                        return this.query.getBuiltinType(BuiltinType$1.String);\n                    case BuiltinType$1.Number << 8 | BuiltinType$1.Number:\n                        return this.query.getBuiltinType(BuiltinType$1.Number);\n                    case BuiltinType$1.Boolean << 8 | BuiltinType$1.Number:\n                    case BuiltinType$1.Other << 8 | BuiltinType$1.Number:\n                        return this.reportError('Expected a number type', ast.left);\n                    case BuiltinType$1.Number << 8 | BuiltinType$1.Boolean:\n                    case BuiltinType$1.Number << 8 | BuiltinType$1.Other:\n                        return this.reportError('Expected a number type', ast.right);\n                    default:\n                        return this.reportError('Expected operands to be a string or number type', ast);\n                }\n            case '>':\n            case '<':\n            case '<=':\n            case '>=':\n            case '==':\n            case '!=':\n            case '===':\n            case '!==':\n                switch (operKind) {\n                    case BuiltinType$1.Any << 8 | BuiltinType$1.Any:\n                    case BuiltinType$1.Any << 8 | BuiltinType$1.Boolean:\n                    case BuiltinType$1.Any << 8 | BuiltinType$1.Number:\n                    case BuiltinType$1.Any << 8 | BuiltinType$1.String:\n                    case BuiltinType$1.Any << 8 | BuiltinType$1.Other:\n                    case BuiltinType$1.Boolean << 8 | BuiltinType$1.Any:\n                    case BuiltinType$1.Boolean << 8 | BuiltinType$1.Boolean:\n                    case BuiltinType$1.Number << 8 | BuiltinType$1.Any:\n                    case BuiltinType$1.Number << 8 | BuiltinType$1.Number:\n                    case BuiltinType$1.String << 8 | BuiltinType$1.Any:\n                    case BuiltinType$1.String << 8 | BuiltinType$1.String:\n                    case BuiltinType$1.Other << 8 | BuiltinType$1.Any:\n                    case BuiltinType$1.Other << 8 | BuiltinType$1.Other:\n                        return this.query.getBuiltinType(BuiltinType$1.Boolean);\n                    default:\n                        return this.reportError('Expected the operants to be of similar type or any', ast);\n                }\n            case '&&':\n                return rightType;\n            case '||':\n                return this.query.getTypeUnion(leftType, rightType);\n        }\n        return this.reportError(\"Unrecognized operator \" + ast.operation, ast);\n    };\n    AstType.prototype.visitChain = function (ast) {\n        if (this.diagnostics) {\n            // If we are producing diagnostics, visit the children\n            visitAstChildren(ast, this);\n        }\n        // The type of a chain is always undefined.\n        return this.query.getBuiltinType(BuiltinType$1.Undefined);\n    };\n    AstType.prototype.visitConditional = function (ast) {\n        // The type of a conditional is the union of the true and false conditions.\n        if (this.diagnostics) {\n            visitAstChildren(ast, this);\n        }\n        return this.query.getTypeUnion(this.getType(ast.trueExp), this.getType(ast.falseExp));\n    };\n    AstType.prototype.visitFunctionCall = function (ast) {\n        var _this = this;\n        // The type of a function call is the return type of the selected signature.\n        // The signature is selected based on the types of the arguments. Angular doesn't\n        // support contextual typing of arguments so this is simpler than TypeScript's\n        // version.\n        var args = ast.args.map(function (arg) { return _this.getType(arg); });\n        var target = this.getType(ast.target);\n        if (!target || !target.callable)\n            return this.reportError('Call target is not callable', ast);\n        var signature = target.selectSignature(args);\n        if (signature)\n            return signature.result;\n        // TODO: Consider a better error message here.\n        return this.reportError('Unable no compatible signature found for call', ast);\n    };\n    AstType.prototype.visitImplicitReceiver = function (ast) {\n        var _this = this;\n        // Return a pseudo-symbol for the implicit receiver.\n        // The members of the implicit receiver are what is defined by the\n        // scope passed into this class.\n        return {\n            name: '$implict',\n            kind: 'component',\n            language: 'ng-template',\n            type: undefined,\n            container: undefined,\n            callable: false,\n            nullable: false,\n            public: true,\n            definition: undefined,\n            members: function () { return _this.scope; },\n            signatures: function () { return []; },\n            selectSignature: function (types) { return undefined; },\n            indexed: function (argument) { return undefined; }\n        };\n    };\n    AstType.prototype.visitInterpolation = function (ast) {\n        // If we are producing diagnostics, visit the children.\n        if (this.diagnostics) {\n            visitAstChildren(ast, this);\n        }\n        return this.undefinedType;\n    };\n    AstType.prototype.visitKeyedRead = function (ast) {\n        var targetType = this.getType(ast.obj);\n        var keyType = this.getType(ast.key);\n        var result = targetType.indexed(keyType);\n        return result || this.anyType;\n    };\n    AstType.prototype.visitKeyedWrite = function (ast) {\n        // The write of a type is the type of the value being written.\n        return this.getType(ast.value);\n    };\n    AstType.prototype.visitLiteralArray = function (ast) {\n        var _this = this;\n        // A type literal is an array type of the union of the elements\n        return this.query.getArrayType((_a = this.query).getTypeUnion.apply(_a, __spread(ast.expressions.map(function (element) { return _this.getType(element); }))));\n        var _a;\n    };\n    AstType.prototype.visitLiteralMap = function (ast) {\n        // If we are producing diagnostics, visit the children\n        if (this.diagnostics) {\n            visitAstChildren(ast, this);\n        }\n        // TODO: Return a composite type.\n        return this.anyType;\n    };\n    AstType.prototype.visitLiteralPrimitive = function (ast) {\n        // The type of a literal primitive depends on the value of the literal.\n        switch (ast.value) {\n            case true:\n            case false:\n                return this.query.getBuiltinType(BuiltinType$1.Boolean);\n            case null:\n                return this.query.getBuiltinType(BuiltinType$1.Null);\n            case undefined:\n                return this.query.getBuiltinType(BuiltinType$1.Undefined);\n            default:\n                switch (typeof ast.value) {\n                    case 'string':\n                        return this.query.getBuiltinType(BuiltinType$1.String);\n                    case 'number':\n                        return this.query.getBuiltinType(BuiltinType$1.Number);\n                    default:\n                        return this.reportError('Unrecognized primitive', ast);\n                }\n        }\n    };\n    AstType.prototype.visitMethodCall = function (ast) {\n        return this.resolveMethodCall(this.getType(ast.receiver), ast);\n    };\n    AstType.prototype.visitPipe = function (ast) {\n        var _this = this;\n        // The type of a pipe node is the return type of the pipe's transform method. The table returned\n        // by getPipes() is expected to contain symbols with the corresponding transform method type.\n        var pipe = this.query.getPipes().get(ast.name);\n        if (!pipe)\n            return this.reportError(\"No pipe by the name \" + ast.name + \" found\", ast);\n        var expType = this.getType(ast.exp);\n        var signature = pipe.selectSignature([expType].concat(ast.args.map(function (arg) { return _this.getType(arg); })));\n        if (!signature)\n            return this.reportError('Unable to resolve signature for pipe invocation', ast);\n        return signature.result;\n    };\n    AstType.prototype.visitPrefixNot = function (ast) {\n        // The type of a prefix ! is always boolean.\n        return this.query.getBuiltinType(BuiltinType$1.Boolean);\n    };\n    AstType.prototype.visitNonNullAssert = function (ast) {\n        var expressionType = this.getType(ast.expression);\n        return this.query.getNonNullableType(expressionType);\n    };\n    AstType.prototype.visitPropertyRead = function (ast) {\n        return this.resolvePropertyRead(this.getType(ast.receiver), ast);\n    };\n    AstType.prototype.visitPropertyWrite = function (ast) {\n        // The type of a write is the type of the value being written.\n        return this.getType(ast.value);\n    };\n    AstType.prototype.visitQuote = function (ast) {\n        // The type of a quoted expression is any.\n        return this.query.getBuiltinType(BuiltinType$1.Any);\n    };\n    AstType.prototype.visitSafeMethodCall = function (ast) {\n        return this.resolveMethodCall(this.query.getNonNullableType(this.getType(ast.receiver)), ast);\n    };\n    AstType.prototype.visitSafePropertyRead = function (ast) {\n        return this.resolvePropertyRead(this.query.getNonNullableType(this.getType(ast.receiver)), ast);\n    };\n    Object.defineProperty(AstType.prototype, \"anyType\", {\n        get: function () {\n            var result = this._anyType;\n            if (!result) {\n                result = this._anyType = this.query.getBuiltinType(BuiltinType$1.Any);\n            }\n            return result;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(AstType.prototype, \"undefinedType\", {\n        get: function () {\n            var result = this._undefinedType;\n            if (!result) {\n                result = this._undefinedType = this.query.getBuiltinType(BuiltinType$1.Undefined);\n            }\n            return result;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    AstType.prototype.resolveMethodCall = function (receiverType, ast) {\n        var _this = this;\n        if (this.isAny(receiverType)) {\n            return this.anyType;\n        }\n        // The type of a method is the selected methods result type.\n        var method = receiverType.members().get(ast.name);\n        if (!method)\n            return this.reportError(\"Unknown method '\" + ast.name + \"'\", ast);\n        if (!method.type)\n            return this.reportError(\"Could not find a type for '\" + ast.name + \"'\", ast);\n        if (!method.type.callable)\n            return this.reportError(\"Member '\" + ast.name + \"' is not callable\", ast);\n        var signature = method.type.selectSignature(ast.args.map(function (arg) { return _this.getType(arg); }));\n        if (!signature)\n            return this.reportError(\"Unable to resolve signature for call of method \" + ast.name, ast);\n        return signature.result;\n    };\n    AstType.prototype.resolvePropertyRead = function (receiverType, ast) {\n        if (this.isAny(receiverType)) {\n            return this.anyType;\n        }\n        // The type of a property read is the seelcted member's type.\n        var member = receiverType.members().get(ast.name);\n        if (!member) {\n            var receiverInfo = receiverType.name;\n            if (receiverInfo == '$implict') {\n                receiverInfo =\n                    'The component declaration, template variable declarations, and element references do';\n            }\n            else if (receiverType.nullable) {\n                return this.reportError(\"The expression might be null\", ast.receiver);\n            }\n            else {\n                receiverInfo = \"'\" + receiverInfo + \"' does\";\n            }\n            return this.reportError(\"Identifier '\" + ast.name + \"' is not defined. \" + receiverInfo + \" not contain such a member\", ast);\n        }\n        if (!member.public) {\n            var receiverInfo = receiverType.name;\n            if (receiverInfo == '$implict') {\n                receiverInfo = 'the component';\n            }\n            else {\n                receiverInfo = \"'\" + receiverInfo + \"'\";\n            }\n            this.reportWarning(\"Identifier '\" + ast.name + \"' refers to a private member of \" + receiverInfo, ast);\n        }\n        return member.type;\n    };\n    AstType.prototype.reportError = function (message, ast) {\n        if (this.diagnostics) {\n            this.diagnostics.push(new TypeDiagnostic(DiagnosticKind.Error, message, ast));\n        }\n        return this.anyType;\n    };\n    AstType.prototype.reportWarning = function (message, ast) {\n        if (this.diagnostics) {\n            this.diagnostics.push(new TypeDiagnostic(DiagnosticKind.Warning, message, ast));\n        }\n        return this.anyType;\n    };\n    AstType.prototype.isAny = function (symbol) {\n        return !symbol || this.query.getTypeKind(symbol) == BuiltinType$1.Any ||\n            (!!symbol.type && this.isAny(symbol.type));\n    };\n    return AstType;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nfunction getTemplateExpressionDiagnostics(info) {\n    var visitor = new ExpressionDiagnosticsVisitor(info, function (path$$1, includeEvent) {\n        return getExpressionScope(info, path$$1, includeEvent);\n    });\n    templateVisitAll(visitor, info.templateAst);\n    return visitor.diagnostics;\n}\nfunction getExpressionDiagnostics(scope, ast, query, context) {\n    if (context === void 0) { context = {}; }\n    var analyzer = new AstType(scope, query, context);\n    analyzer.getDiagnostics(ast);\n    return analyzer.diagnostics;\n}\nfunction getReferences(info) {\n    var result = [];\n    function processReferences(references) {\n        var _loop_1 = function (reference) {\n            var type = undefined;\n            if (reference.value) {\n                type = info.query.getTypeSymbol(tokenReference(reference.value));\n            }\n            result.push({\n                name: reference.name,\n                kind: 'reference',\n                type: type || info.query.getBuiltinType(BuiltinType$1.Any),\n                get definition() { return getDefinitionOf(info, reference); }\n            });\n        };\n        try {\n            for (var references_1 = __values(references), references_1_1 = references_1.next(); !references_1_1.done; references_1_1 = references_1.next()) {\n                var reference = references_1_1.value;\n                _loop_1(reference);\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (references_1_1 && !references_1_1.done && (_a = references_1.return)) _a.call(references_1);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        var e_1, _a;\n    }\n    var visitor = new /** @class */ (function (_super) {\n        __extends(class_1, _super);\n        function class_1() {\n            return _super !== null && _super.apply(this, arguments) || this;\n        }\n        class_1.prototype.visitEmbeddedTemplate = function (ast, context) {\n            _super.prototype.visitEmbeddedTemplate.call(this, ast, context);\n            processReferences(ast.references);\n        };\n        class_1.prototype.visitElement = function (ast, context) {\n            _super.prototype.visitElement.call(this, ast, context);\n            processReferences(ast.references);\n        };\n        return class_1;\n    }(RecursiveTemplateAstVisitor));\n    templateVisitAll(visitor, info.templateAst);\n    return result;\n}\nfunction getDefinitionOf(info, ast) {\n    if (info.fileName) {\n        var templateOffset = info.offset;\n        return [{\n                fileName: info.fileName,\n                span: {\n                    start: ast.sourceSpan.start.offset + templateOffset,\n                    end: ast.sourceSpan.end.offset + templateOffset\n                }\n            }];\n    }\n}\nfunction getVarDeclarations(info, path$$1) {\n    var result = [];\n    var current = path$$1.tail;\n    while (current) {\n        if (current instanceof EmbeddedTemplateAst) {\n            var _loop_2 = function (variable) {\n                var name = variable.name;\n                // Find the first directive with a context.\n                var context = current.directives.map(function (d) { return info.query.getTemplateContext(d.directive.type.reference); })\n                    .find(function (c) { return !!c; });\n                // Determine the type of the context field referenced by variable.value.\n                var type = undefined;\n                if (context) {\n                    var value = context.get(variable.value);\n                    if (value) {\n                        type = value.type;\n                        var kind = info.query.getTypeKind(type);\n                        if (kind === BuiltinType$1.Any || kind == BuiltinType$1.Unbound) {\n                            // The any type is not very useful here. For special cases, such as ngFor, we can do\n                            // better.\n                            type = refinedVariableType(type, info, current);\n                        }\n                    }\n                }\n                if (!type) {\n                    type = info.query.getBuiltinType(BuiltinType$1.Any);\n                }\n                result.push({\n                    name: name,\n                    kind: 'variable', type: type, get definition() { return getDefinitionOf(info, variable); }\n                });\n            };\n            try {\n                for (var _a = __values(current.variables), _b = _a.next(); !_b.done; _b = _a.next()) {\n                    var variable = _b.value;\n                    _loop_2(variable);\n                }\n            }\n            catch (e_2_1) { e_2 = { error: e_2_1 }; }\n            finally {\n                try {\n                    if (_b && !_b.done && (_c = _a.return)) _c.call(_a);\n                }\n                finally { if (e_2) throw e_2.error; }\n            }\n        }\n        current = path$$1.parentOf(current);\n    }\n    return result;\n    var e_2, _c;\n}\nfunction refinedVariableType(type, info, templateElement) {\n    // Special case the ngFor directive\n    var ngForDirective = templateElement.directives.find(function (d) {\n        var name = identifierName(d.directive.type);\n        return name == 'NgFor' || name == 'NgForOf';\n    });\n    if (ngForDirective) {\n        var ngForOfBinding = ngForDirective.inputs.find(function (i) { return i.directiveName == 'ngForOf'; });\n        if (ngForOfBinding) {\n            var bindingType = new AstType(info.members, info.query, {}).getType(ngForOfBinding.value);\n            if (bindingType) {\n                var result = info.query.getElementType(bindingType);\n                if (result) {\n                    return result;\n                }\n            }\n        }\n    }\n    // We can't do better, return any\n    return info.query.getBuiltinType(BuiltinType$1.Any);\n}\nfunction getEventDeclaration(info, includeEvent) {\n    var result = [];\n    if (includeEvent) {\n        // TODO: Determine the type of the event parameter based on the Observable<T> or EventEmitter<T>\n        // of the event.\n        result = [{ name: '$event', kind: 'variable', type: info.query.getBuiltinType(BuiltinType$1.Any) }];\n    }\n    return result;\n}\nfunction getExpressionScope(info, path$$1, includeEvent) {\n    var result = info.members;\n    var references = getReferences(info);\n    var variables = getVarDeclarations(info, path$$1);\n    var events = getEventDeclaration(info, includeEvent);\n    if (references.length || variables.length || events.length) {\n        var referenceTable = info.query.createSymbolTable(references);\n        var variableTable = info.query.createSymbolTable(variables);\n        var eventsTable = info.query.createSymbolTable(events);\n        result = info.query.mergeSymbolTable([result, referenceTable, variableTable, eventsTable]);\n    }\n    return result;\n}\nvar ExpressionDiagnosticsVisitor = /** @class */ (function (_super) {\n    __extends(ExpressionDiagnosticsVisitor, _super);\n    function ExpressionDiagnosticsVisitor(info, getExpressionScope) {\n        var _this = _super.call(this) || this;\n        _this.info = info;\n        _this.getExpressionScope = getExpressionScope;\n        _this.diagnostics = [];\n        _this.path = new AstPath([]);\n        return _this;\n    }\n    ExpressionDiagnosticsVisitor.prototype.visitDirective = function (ast, context) {\n        // Override the default child visitor to ignore the host properties of a directive.\n        if (ast.inputs && ast.inputs.length) {\n            templateVisitAll(this, ast.inputs, context);\n        }\n    };\n    ExpressionDiagnosticsVisitor.prototype.visitBoundText = function (ast) {\n        this.push(ast);\n        this.diagnoseExpression(ast.value, ast.sourceSpan.start.offset, false);\n        this.pop();\n    };\n    ExpressionDiagnosticsVisitor.prototype.visitDirectiveProperty = function (ast) {\n        this.push(ast);\n        this.diagnoseExpression(ast.value, this.attributeValueLocation(ast), false);\n        this.pop();\n    };\n    ExpressionDiagnosticsVisitor.prototype.visitElementProperty = function (ast) {\n        this.push(ast);\n        this.diagnoseExpression(ast.value, this.attributeValueLocation(ast), false);\n        this.pop();\n    };\n    ExpressionDiagnosticsVisitor.prototype.visitEvent = function (ast) {\n        this.push(ast);\n        this.diagnoseExpression(ast.handler, this.attributeValueLocation(ast), true);\n        this.pop();\n    };\n    ExpressionDiagnosticsVisitor.prototype.visitVariable = function (ast) {\n        var directive = this.directiveSummary;\n        if (directive && ast.value) {\n            var context = this.info.query.getTemplateContext(directive.type.reference);\n            if (context && !context.has(ast.value)) {\n                if (ast.value === '$implicit') {\n                    this.reportError('The template context does not have an implicit value', spanOf$1(ast.sourceSpan));\n                }\n                else {\n                    this.reportError(\"The template context does not defined a member called '\" + ast.value + \"'\", spanOf$1(ast.sourceSpan));\n                }\n            }\n        }\n    };\n    ExpressionDiagnosticsVisitor.prototype.visitElement = function (ast, context) {\n        this.push(ast);\n        _super.prototype.visitElement.call(this, ast, context);\n        this.pop();\n    };\n    ExpressionDiagnosticsVisitor.prototype.visitEmbeddedTemplate = function (ast, context) {\n        var previousDirectiveSummary = this.directiveSummary;\n        this.push(ast);\n        // Find directive that references this template\n        this.directiveSummary =\n            ast.directives.map(function (d) { return d.directive; }).find(function (d) { return hasTemplateReference(d.type); });\n        // Process children\n        _super.prototype.visitEmbeddedTemplate.call(this, ast, context);\n        this.pop();\n        this.directiveSummary = previousDirectiveSummary;\n    };\n    ExpressionDiagnosticsVisitor.prototype.attributeValueLocation = function (ast) {\n        var path$$1 = findNode(this.info.htmlAst, ast.sourceSpan.start.offset);\n        var last = path$$1.tail;\n        if (last instanceof Attribute && last.valueSpan) {\n            // Add 1 for the quote.\n            return last.valueSpan.start.offset + 1;\n        }\n        return ast.sourceSpan.start.offset;\n    };\n    ExpressionDiagnosticsVisitor.prototype.diagnoseExpression = function (ast, offset, includeEvent) {\n        var _this = this;\n        var scope = this.getExpressionScope(this.path, includeEvent);\n        (_a = this.diagnostics).push.apply(_a, __spread(getExpressionDiagnostics(scope, ast, this.info.query, {\n            event: includeEvent\n        }).map(function (d) { return ({\n            span: offsetSpan(d.ast.span, offset + _this.info.offset),\n            kind: d.kind,\n            message: d.message\n        }); })));\n        var _a;\n    };\n    ExpressionDiagnosticsVisitor.prototype.push = function (ast) { this.path.push(ast); };\n    ExpressionDiagnosticsVisitor.prototype.pop = function () { this.path.pop(); };\n    ExpressionDiagnosticsVisitor.prototype.reportError = function (message, span) {\n        if (span) {\n            this.diagnostics.push({ span: offsetSpan(span, this.info.offset), kind: DiagnosticKind.Error, message: message });\n        }\n    };\n    ExpressionDiagnosticsVisitor.prototype.reportWarning = function (message, span) {\n        this.diagnostics.push({ span: offsetSpan(span, this.info.offset), kind: DiagnosticKind.Warning, message: message });\n    };\n    return ExpressionDiagnosticsVisitor;\n}(RecursiveTemplateAstVisitor));\nfunction hasTemplateReference(type) {\n    if (type.diDeps) {\n        try {\n            for (var _a = __values(type.diDeps), _b = _a.next(); !_b.done; _b = _a.next()) {\n                var diDep = _b.value;\n                if (diDep.token && diDep.token.identifier &&\n                    identifierName(diDep.token.identifier) == 'TemplateRef')\n                    return true;\n            }\n        }\n        catch (e_3_1) { e_3 = { error: e_3_1 }; }\n        finally {\n            try {\n                if (_b && !_b.done && (_c = _a.return)) _c.call(_a);\n            }\n            finally { if (e_3) throw e_3.error; }\n        }\n    }\n    return false;\n    var e_3, _c;\n}\nfunction offsetSpan(span, amount) {\n    return { start: span.start + amount, end: span.end + amount };\n}\nfunction spanOf$1(sourceSpan) {\n    return { start: sourceSpan.start.offset, end: sourceSpan.end.offset };\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Converts a `string` version into an array of numbers\n * @example\n * toNumbers('2.0.1'); // returns [2, 0, 1]\n */\nfunction toNumbers(value) {\n    return value.split('.').map(Number);\n}\n/**\n * Compares two arrays of positive numbers with lexicographical order in mind.\n *\n * However - unlike lexicographical order - for arrays of different length we consider:\n * [1, 2, 3] = [1, 2, 3, 0] instead of [1, 2, 3] < [1, 2, 3, 0]\n *\n * @param a The 'left hand' array in the comparison test\n * @param b The 'right hand' in the comparison test\n * @returns {-1|0|1} The comparison result: 1 if a is greater, -1 if b is greater, 0 is the two\n * arrays are equals\n */\nfunction compareNumbers(a, b) {\n    var max = Math.max(a.length, b.length);\n    var min = Math.min(a.length, b.length);\n    for (var i = 0; i < min; i++) {\n        if (a[i] > b[i])\n            return 1;\n        if (a[i] < b[i])\n            return -1;\n    }\n    if (min !== max) {\n        var longestArray = a.length === max ? a : b;\n        // The result to return in case the to arrays are considered different (1 if a is greater,\n        // -1 if b is greater)\n        var comparisonResult = a.length === max ? 1 : -1;\n        // Check that at least one of the remaining elements is greater than 0 to consider that the two\n        // arrays are different (e.g. [1, 0] and [1] are considered the same but not [1, 0, 1] and [1])\n        for (var i = min; i < max; i++) {\n            if (longestArray[i] > 0) {\n                return comparisonResult;\n            }\n        }\n    }\n    return 0;\n}\n/**\n * Checks if a TypeScript version is:\n * - greater or equal than the provided `low` version,\n * - lower or equal than an optional `high` version.\n *\n * @param version The TypeScript version\n * @param low The minimum version\n * @param high The maximum version\n */\nfunction isVersionBetween(version$$1, low, high) {\n    var tsNumbers = toNumbers(version$$1);\n    if (high !== undefined) {\n        return compareNumbers(toNumbers(low), tsNumbers) <= 0 &&\n            compareNumbers(toNumbers(high), tsNumbers) >= 0;\n    }\n    return compareNumbers(toNumbers(low), tsNumbers) <= 0;\n}\n/**\n * Compares two versions\n *\n * @param v1 The 'left hand' version in the comparison test\n * @param v2 The 'right hand' version in the comparison test\n * @returns {-1|0|1} The comparison result: 1 if v1 is greater, -1 if v2 is greater, 0 is the two\n * versions are equals\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n// In TypeScript 2.1 these flags moved\n// These helpers work for both 2.0 and 2.1.\nvar isPrivate = ts.ModifierFlags ?\n    (function (node) {\n        return !!(ts.getCombinedModifierFlags(node) & ts.ModifierFlags.Private);\n    }) :\n    (function (node) { return !!(node.flags & ts.NodeFlags.Private); });\nvar isReferenceType = ts.ObjectFlags ?\n    (function (type) {\n        return !!(type.flags & ts.TypeFlags.Object &&\n            type.objectFlags & ts.ObjectFlags.Reference);\n    }) :\n    (function (type) { return !!(type.flags & ts.TypeFlags.Reference); });\nfunction getSymbolQuery(program, checker, source, fetchPipes) {\n    return new TypeScriptSymbolQuery(program, checker, source, fetchPipes);\n}\n\nfunction getClassMembersFromDeclaration(program, checker, source, declaration) {\n    var type = checker.getTypeAtLocation(declaration);\n    return new TypeWrapper(type, { node: source, program: program, checker: checker }).members();\n}\n\nfunction getPipesTable(source, program, checker, pipes) {\n    return new PipesTable(pipes, { program: program, checker: checker, node: source });\n}\nvar TypeScriptSymbolQuery = /** @class */ (function () {\n    function TypeScriptSymbolQuery(program, checker, source, fetchPipes) {\n        this.program = program;\n        this.checker = checker;\n        this.source = source;\n        this.fetchPipes = fetchPipes;\n        this.typeCache = new Map();\n    }\n    TypeScriptSymbolQuery.prototype.getTypeKind = function (symbol) { return typeKindOf(this.getTsTypeOf(symbol)); };\n    TypeScriptSymbolQuery.prototype.getBuiltinType = function (kind) {\n        var result = this.typeCache.get(kind);\n        if (!result) {\n            var type = getBuiltinTypeFromTs(kind, { checker: this.checker, node: this.source, program: this.program });\n            result =\n                new TypeWrapper(type, { program: this.program, checker: this.checker, node: this.source });\n            this.typeCache.set(kind, result);\n        }\n        return result;\n    };\n    TypeScriptSymbolQuery.prototype.getTypeUnion = function () {\n        var types = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            types[_i] = arguments[_i];\n        }\n        // No API exists so return any if the types are not all the same type.\n        var result = undefined;\n        if (types.length) {\n            result = types[0];\n            for (var i = 1; i < types.length; i++) {\n                if (types[i] != result) {\n                    result = undefined;\n                    break;\n                }\n            }\n        }\n        return result || this.getBuiltinType(BuiltinType$1.Any);\n    };\n    TypeScriptSymbolQuery.prototype.getArrayType = function (type) { return this.getBuiltinType(BuiltinType$1.Any); };\n    TypeScriptSymbolQuery.prototype.getElementType = function (type) {\n        if (type instanceof TypeWrapper) {\n            var elementType = getTypeParameterOf(type.tsType, 'Array');\n            if (elementType) {\n                return new TypeWrapper(elementType, type.context);\n            }\n        }\n    };\n    TypeScriptSymbolQuery.prototype.getNonNullableType = function (symbol) {\n        if (symbol instanceof TypeWrapper && (typeof this.checker.getNonNullableType == 'function')) {\n            var tsType = symbol.tsType;\n            var nonNullableType = this.checker.getNonNullableType(tsType);\n            if (nonNullableType != tsType) {\n                return new TypeWrapper(nonNullableType, symbol.context);\n            }\n            else if (nonNullableType == tsType) {\n                return symbol;\n            }\n        }\n        return this.getBuiltinType(BuiltinType$1.Any);\n    };\n    TypeScriptSymbolQuery.prototype.getPipes = function () {\n        var result = this.pipesCache;\n        if (!result) {\n            result = this.pipesCache = this.fetchPipes();\n        }\n        return result;\n    };\n    TypeScriptSymbolQuery.prototype.getTemplateContext = function (type) {\n        var context = { node: this.source, program: this.program, checker: this.checker };\n        var typeSymbol = findClassSymbolInContext(type, context);\n        if (typeSymbol) {\n            var contextType = this.getTemplateRefContextType(typeSymbol);\n            if (contextType)\n                return new SymbolWrapper(contextType, context).members();\n        }\n    };\n    TypeScriptSymbolQuery.prototype.getTypeSymbol = function (type) {\n        var context = { node: this.source, program: this.program, checker: this.checker };\n        var typeSymbol = findClassSymbolInContext(type, context);\n        return typeSymbol && new SymbolWrapper(typeSymbol, context);\n    };\n    TypeScriptSymbolQuery.prototype.createSymbolTable = function (symbols) {\n        var result = new MapSymbolTable();\n        result.addAll(symbols.map(function (s) { return new DeclaredSymbol(s); }));\n        return result;\n    };\n    TypeScriptSymbolQuery.prototype.mergeSymbolTable = function (symbolTables) {\n        var result = new MapSymbolTable();\n        try {\n            for (var symbolTables_1 = __values(symbolTables), symbolTables_1_1 = symbolTables_1.next(); !symbolTables_1_1.done; symbolTables_1_1 = symbolTables_1.next()) {\n                var symbolTable = symbolTables_1_1.value;\n                result.addAll(symbolTable.values());\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (symbolTables_1_1 && !symbolTables_1_1.done && (_a = symbolTables_1.return)) _a.call(symbolTables_1);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        return result;\n        var e_1, _a;\n    };\n    TypeScriptSymbolQuery.prototype.getSpanAt = function (line, column) {\n        return spanAt(this.source, line, column);\n    };\n    TypeScriptSymbolQuery.prototype.getTemplateRefContextType = function (typeSymbol) {\n        var type = this.checker.getTypeOfSymbolAtLocation(typeSymbol, this.source);\n        var constructor = type.symbol && type.symbol.members &&\n            getFromSymbolTable(type.symbol.members, '__constructor');\n        if (constructor) {\n            var constructorDeclaration = constructor.declarations[0];\n            try {\n                for (var _a = __values(constructorDeclaration.parameters), _b = _a.next(); !_b.done; _b = _a.next()) {\n                    var parameter = _b.value;\n                    var type_1 = this.checker.getTypeAtLocation(parameter.type);\n                    if (type_1.symbol.name == 'TemplateRef' && isReferenceType(type_1)) {\n                        var typeReference = type_1;\n                        if (typeReference.typeArguments && typeReference.typeArguments.length === 1) {\n                            return typeReference.typeArguments[0].symbol;\n                        }\n                    }\n                }\n            }\n            catch (e_2_1) { e_2 = { error: e_2_1 }; }\n            finally {\n                try {\n                    if (_b && !_b.done && (_c = _a.return)) _c.call(_a);\n                }\n                finally { if (e_2) throw e_2.error; }\n            }\n        }\n        var e_2, _c;\n    };\n    TypeScriptSymbolQuery.prototype.getTsTypeOf = function (symbol) {\n        var type = this.getTypeWrapper(symbol);\n        return type && type.tsType;\n    };\n    TypeScriptSymbolQuery.prototype.getTypeWrapper = function (symbol) {\n        var type = undefined;\n        if (symbol instanceof TypeWrapper) {\n            type = symbol;\n        }\n        else if (symbol.type instanceof TypeWrapper) {\n            type = symbol.type;\n        }\n        return type;\n    };\n    return TypeScriptSymbolQuery;\n}());\nfunction typeCallable(type) {\n    var signatures = type.getCallSignatures();\n    return signatures && signatures.length != 0;\n}\nfunction signaturesOf(type, context) {\n    return type.getCallSignatures().map(function (s) { return new SignatureWrapper(s, context); });\n}\nfunction selectSignature(type, context, types) {\n    // TODO: Do a better job of selecting the right signature.\n    var signatures = type.getCallSignatures();\n    return signatures.length ? new SignatureWrapper(signatures[0], context) : undefined;\n}\nvar TypeWrapper = /** @class */ (function () {\n    function TypeWrapper(tsType, context) {\n        this.tsType = tsType;\n        this.context = context;\n        this.kind = 'type';\n        this.language = 'typescript';\n        this.type = undefined;\n        this.container = undefined;\n        this.public = true;\n        if (!tsType) {\n            throw Error('Internal: null type');\n        }\n    }\n    Object.defineProperty(TypeWrapper.prototype, \"name\", {\n        get: function () {\n            var symbol = this.tsType.symbol;\n            return (symbol && symbol.name) || '<anonymous>';\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(TypeWrapper.prototype, \"callable\", {\n        get: function () { return typeCallable(this.tsType); },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(TypeWrapper.prototype, \"nullable\", {\n        get: function () {\n            return this.context.checker.getNonNullableType(this.tsType) != this.tsType;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(TypeWrapper.prototype, \"definition\", {\n        get: function () {\n            var symbol = this.tsType.getSymbol();\n            return symbol ? definitionFromTsSymbol(symbol) : undefined;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    TypeWrapper.prototype.members = function () {\n        return new SymbolTableWrapper(this.tsType.getProperties(), this.context);\n    };\n    TypeWrapper.prototype.signatures = function () { return signaturesOf(this.tsType, this.context); };\n    TypeWrapper.prototype.selectSignature = function (types) {\n        return selectSignature(this.tsType, this.context, types);\n    };\n    TypeWrapper.prototype.indexed = function (argument) { return undefined; };\n    return TypeWrapper;\n}());\nvar SymbolWrapper = /** @class */ (function () {\n    function SymbolWrapper(symbol, context) {\n        this.context = context;\n        this.nullable = false;\n        this.language = 'typescript';\n        this.symbol = symbol && context && (symbol.flags & ts.SymbolFlags.Alias) ?\n            context.checker.getAliasedSymbol(symbol) :\n            symbol;\n    }\n    Object.defineProperty(SymbolWrapper.prototype, \"name\", {\n        get: function () { return this.symbol.name; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(SymbolWrapper.prototype, \"kind\", {\n        get: function () { return this.callable ? 'method' : 'property'; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(SymbolWrapper.prototype, \"type\", {\n        get: function () { return new TypeWrapper(this.tsType, this.context); },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(SymbolWrapper.prototype, \"container\", {\n        get: function () { return getContainerOf(this.symbol, this.context); },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(SymbolWrapper.prototype, \"public\", {\n        get: function () {\n            // Symbols that are not explicitly made private are public.\n            return !isSymbolPrivate(this.symbol);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(SymbolWrapper.prototype, \"callable\", {\n        get: function () { return typeCallable(this.tsType); },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(SymbolWrapper.prototype, \"definition\", {\n        get: function () { return definitionFromTsSymbol(this.symbol); },\n        enumerable: true,\n        configurable: true\n    });\n    SymbolWrapper.prototype.members = function () {\n        if (!this._members) {\n            if ((this.symbol.flags & (ts.SymbolFlags.Class | ts.SymbolFlags.Interface)) != 0) {\n                var declaredType = this.context.checker.getDeclaredTypeOfSymbol(this.symbol);\n                var typeWrapper = new TypeWrapper(declaredType, this.context);\n                this._members = typeWrapper.members();\n            }\n            else {\n                this._members = new SymbolTableWrapper(this.symbol.members, this.context);\n            }\n        }\n        return this._members;\n    };\n    SymbolWrapper.prototype.signatures = function () { return signaturesOf(this.tsType, this.context); };\n    SymbolWrapper.prototype.selectSignature = function (types) {\n        return selectSignature(this.tsType, this.context, types);\n    };\n    SymbolWrapper.prototype.indexed = function (argument) { return undefined; };\n    Object.defineProperty(SymbolWrapper.prototype, \"tsType\", {\n        get: function () {\n            var type = this._tsType;\n            if (!type) {\n                type = this._tsType =\n                    this.context.checker.getTypeOfSymbolAtLocation(this.symbol, this.context.node);\n            }\n            return type;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return SymbolWrapper;\n}());\nvar DeclaredSymbol = /** @class */ (function () {\n    function DeclaredSymbol(declaration) {\n        this.declaration = declaration;\n        this.language = 'ng-template';\n        this.nullable = false;\n        this.public = true;\n    }\n    Object.defineProperty(DeclaredSymbol.prototype, \"name\", {\n        get: function () { return this.declaration.name; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(DeclaredSymbol.prototype, \"kind\", {\n        get: function () { return this.declaration.kind; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(DeclaredSymbol.prototype, \"container\", {\n        get: function () { return undefined; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(DeclaredSymbol.prototype, \"type\", {\n        get: function () { return this.declaration.type; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(DeclaredSymbol.prototype, \"callable\", {\n        get: function () { return this.declaration.type.callable; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(DeclaredSymbol.prototype, \"definition\", {\n        get: function () { return this.declaration.definition; },\n        enumerable: true,\n        configurable: true\n    });\n    DeclaredSymbol.prototype.members = function () { return this.declaration.type.members(); };\n    DeclaredSymbol.prototype.signatures = function () { return this.declaration.type.signatures(); };\n    DeclaredSymbol.prototype.selectSignature = function (types) {\n        return this.declaration.type.selectSignature(types);\n    };\n    DeclaredSymbol.prototype.indexed = function (argument) { return undefined; };\n    return DeclaredSymbol;\n}());\nvar SignatureWrapper = /** @class */ (function () {\n    function SignatureWrapper(signature, context) {\n        this.signature = signature;\n        this.context = context;\n    }\n    Object.defineProperty(SignatureWrapper.prototype, \"arguments\", {\n        get: function () {\n            return new SymbolTableWrapper(this.signature.getParameters(), this.context);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(SignatureWrapper.prototype, \"result\", {\n        get: function () { return new TypeWrapper(this.signature.getReturnType(), this.context); },\n        enumerable: true,\n        configurable: true\n    });\n    return SignatureWrapper;\n}());\nvar SignatureResultOverride = /** @class */ (function () {\n    function SignatureResultOverride(signature, resultType) {\n        this.signature = signature;\n        this.resultType = resultType;\n    }\n    Object.defineProperty(SignatureResultOverride.prototype, \"arguments\", {\n        get: function () { return this.signature.arguments; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(SignatureResultOverride.prototype, \"result\", {\n        get: function () { return this.resultType; },\n        enumerable: true,\n        configurable: true\n    });\n    return SignatureResultOverride;\n}());\n/**\n * Indicates the lower bound TypeScript version supporting `SymbolTable` as an ES6 `Map`.\n * For lower versions, `SymbolTable` is implemented as a dictionary\n */\nvar MIN_TS_VERSION_SUPPORTING_MAP = '2.2';\nvar toSymbolTableFactory = function (tsVersion) { return function (symbols) {\n    if (isVersionBetween(tsVersion, MIN_TS_VERSION_SUPPORTING_MAP)) {\n        //  Typescript version >= 2.2, `SymbolTable` is implemented as an ES6 `Map`\n        var result_1 = new Map();\n        try {\n            for (var symbols_1 = __values(symbols), symbols_1_1 = symbols_1.next(); !symbols_1_1.done; symbols_1_1 = symbols_1.next()) {\n                var symbol = symbols_1_1.value;\n                result_1.set(symbol.name, symbol);\n            }\n        }\n        catch (e_3_1) { e_3 = { error: e_3_1 }; }\n        finally {\n            try {\n                if (symbols_1_1 && !symbols_1_1.done && (_a = symbols_1.return)) _a.call(symbols_1);\n            }\n            finally { if (e_3) throw e_3.error; }\n        }\n        // First, tell the compiler that `result` is of type `any`. Then, use a second type assertion\n        // to `ts.SymbolTable`.\n        // Otherwise, `Map<string, ts.Symbol>` and `ts.SymbolTable` will be considered as incompatible\n        // types by the compiler\n        return result_1;\n    }\n    //  Typescript version < 2.2, `SymbolTable` is implemented as a dictionary\n    var result = {};\n    try {\n        for (var symbols_2 = __values(symbols), symbols_2_1 = symbols_2.next(); !symbols_2_1.done; symbols_2_1 = symbols_2.next()) {\n            var symbol = symbols_2_1.value;\n            result[symbol.name] = symbol;\n        }\n    }\n    catch (e_4_1) { e_4 = { error: e_4_1 }; }\n    finally {\n        try {\n            if (symbols_2_1 && !symbols_2_1.done && (_b = symbols_2.return)) _b.call(symbols_2);\n        }\n        finally { if (e_4) throw e_4.error; }\n    }\n    return result;\n    var e_3, _a, e_4, _b;\n}; };\nfunction toSymbols(symbolTable) {\n    if (!symbolTable)\n        return [];\n    var table = symbolTable;\n    if (typeof table.values === 'function') {\n        return Array.from(table.values());\n    }\n    var result = [];\n    var own = typeof table.hasOwnProperty === 'function' ?\n        function (name) { return table.hasOwnProperty(name); } :\n        function (name) { return !!table[name]; };\n    for (var name in table) {\n        if (own(name)) {\n            result.push(table[name]);\n        }\n    }\n    return result;\n}\nvar SymbolTableWrapper = /** @class */ (function () {\n    function SymbolTableWrapper(symbols, context) {\n        this.context = context;\n        symbols = symbols || [];\n        if (Array.isArray(symbols)) {\n            this.symbols = symbols;\n            var toSymbolTable = toSymbolTableFactory(ts.version);\n            this.symbolTable = toSymbolTable(symbols);\n        }\n        else {\n            this.symbols = toSymbols(symbols);\n            this.symbolTable = symbols;\n        }\n    }\n    Object.defineProperty(SymbolTableWrapper.prototype, \"size\", {\n        get: function () { return this.symbols.length; },\n        enumerable: true,\n        configurable: true\n    });\n    SymbolTableWrapper.prototype.get = function (key) {\n        var symbol = getFromSymbolTable(this.symbolTable, key);\n        return symbol ? new SymbolWrapper(symbol, this.context) : undefined;\n    };\n    SymbolTableWrapper.prototype.has = function (key) {\n        var table = this.symbolTable;\n        return (typeof table.has === 'function') ? table.has(key) : table[key] != null;\n    };\n    SymbolTableWrapper.prototype.values = function () {\n        var _this = this;\n        return this.symbols.map(function (s) { return new SymbolWrapper(s, _this.context); });\n    };\n    return SymbolTableWrapper;\n}());\nvar MapSymbolTable = /** @class */ (function () {\n    function MapSymbolTable() {\n        this.map = new Map();\n        this._values = [];\n    }\n    Object.defineProperty(MapSymbolTable.prototype, \"size\", {\n        get: function () { return this.map.size; },\n        enumerable: true,\n        configurable: true\n    });\n    MapSymbolTable.prototype.get = function (key) { return this.map.get(key); };\n    MapSymbolTable.prototype.add = function (symbol) {\n        if (this.map.has(symbol.name)) {\n            var previous = this.map.get(symbol.name);\n            this._values[this._values.indexOf(previous)] = symbol;\n        }\n        this.map.set(symbol.name, symbol);\n        this._values.push(symbol);\n    };\n    MapSymbolTable.prototype.addAll = function (symbols) {\n        try {\n            for (var symbols_3 = __values(symbols), symbols_3_1 = symbols_3.next(); !symbols_3_1.done; symbols_3_1 = symbols_3.next()) {\n                var symbol = symbols_3_1.value;\n                this.add(symbol);\n            }\n        }\n        catch (e_5_1) { e_5 = { error: e_5_1 }; }\n        finally {\n            try {\n                if (symbols_3_1 && !symbols_3_1.done && (_a = symbols_3.return)) _a.call(symbols_3);\n            }\n            finally { if (e_5) throw e_5.error; }\n        }\n        var e_5, _a;\n    };\n    MapSymbolTable.prototype.has = function (key) { return this.map.has(key); };\n    MapSymbolTable.prototype.values = function () {\n        // Switch to this.map.values once iterables are supported by the target language.\n        return this._values;\n    };\n    return MapSymbolTable;\n}());\nvar PipesTable = /** @class */ (function () {\n    function PipesTable(pipes, context) {\n        this.pipes = pipes;\n        this.context = context;\n    }\n    Object.defineProperty(PipesTable.prototype, \"size\", {\n        get: function () { return this.pipes.length; },\n        enumerable: true,\n        configurable: true\n    });\n    PipesTable.prototype.get = function (key) {\n        var pipe = this.pipes.find(function (pipe) { return pipe.name == key; });\n        if (pipe) {\n            return new PipeSymbol(pipe, this.context);\n        }\n    };\n    PipesTable.prototype.has = function (key) { return this.pipes.find(function (pipe) { return pipe.name == key; }) != null; };\n    PipesTable.prototype.values = function () {\n        var _this = this;\n        return this.pipes.map(function (pipe) { return new PipeSymbol(pipe, _this.context); });\n    };\n    return PipesTable;\n}());\n// This matches .d.ts files that look like \".../<package-name>/<package-name>.d.ts\",\nvar INDEX_PATTERN = /[\\\\/]([^\\\\/]+)[\\\\/]\\1\\.d\\.ts$/;\nvar PipeSymbol = /** @class */ (function () {\n    function PipeSymbol(pipe, context) {\n        this.pipe = pipe;\n        this.context = context;\n        this.kind = 'pipe';\n        this.language = 'typescript';\n        this.container = undefined;\n        this.callable = true;\n        this.nullable = false;\n        this.public = true;\n    }\n    Object.defineProperty(PipeSymbol.prototype, \"name\", {\n        get: function () { return this.pipe.name; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PipeSymbol.prototype, \"type\", {\n        get: function () { return new TypeWrapper(this.tsType, this.context); },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PipeSymbol.prototype, \"definition\", {\n        get: function () {\n            var symbol = this.tsType.getSymbol();\n            return symbol ? definitionFromTsSymbol(symbol) : undefined;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    PipeSymbol.prototype.members = function () { return EmptyTable.instance; };\n    PipeSymbol.prototype.signatures = function () { return signaturesOf(this.tsType, this.context); };\n    PipeSymbol.prototype.selectSignature = function (types) {\n        var signature = selectSignature(this.tsType, this.context, types);\n        if (types.length == 1) {\n            var parameterType = types[0];\n            if (parameterType instanceof TypeWrapper) {\n                var resultType = undefined;\n                switch (this.name) {\n                    case 'async':\n                        switch (parameterType.name) {\n                            case 'Observable':\n                            case 'Promise':\n                            case 'EventEmitter':\n                                resultType = getTypeParameterOf(parameterType.tsType, parameterType.name);\n                                break;\n                            default:\n                                resultType = getBuiltinTypeFromTs(BuiltinType$1.Any, this.context);\n                                break;\n                        }\n                        break;\n                    case 'slice':\n                        resultType = getTypeParameterOf(parameterType.tsType, 'Array');\n                        break;\n                }\n                if (resultType) {\n                    signature = new SignatureResultOverride(signature, new TypeWrapper(resultType, parameterType.context));\n                }\n            }\n        }\n        return signature;\n    };\n    PipeSymbol.prototype.indexed = function (argument) { return undefined; };\n    Object.defineProperty(PipeSymbol.prototype, \"tsType\", {\n        get: function () {\n            var type = this._tsType;\n            if (!type) {\n                var classSymbol = this.findClassSymbol(this.pipe.type.reference);\n                if (classSymbol) {\n                    type = this._tsType = this.findTransformMethodType(classSymbol);\n                }\n                if (!type) {\n                    type = this._tsType = getBuiltinTypeFromTs(BuiltinType$1.Any, this.context);\n                }\n            }\n            return type;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    PipeSymbol.prototype.findClassSymbol = function (type) {\n        return findClassSymbolInContext(type, this.context);\n    };\n    PipeSymbol.prototype.findTransformMethodType = function (classSymbol) {\n        var classType = this.context.checker.getDeclaredTypeOfSymbol(classSymbol);\n        if (classType) {\n            var transform = classType.getProperty('transform');\n            if (transform) {\n                return this.context.checker.getTypeOfSymbolAtLocation(transform, this.context.node);\n            }\n        }\n    };\n    return PipeSymbol;\n}());\nfunction findClassSymbolInContext(type, context) {\n    var sourceFile = context.program.getSourceFile(type.filePath);\n    if (!sourceFile) {\n        // This handles a case where an <packageName>/index.d.ts and a <packageName>/<packageName>.d.ts\n        // are in the same directory. If we are looking for <packageName>/<packageName> and didn't\n        // find it, look for <packageName>/index.d.ts as the program might have found that instead.\n        var p = type.filePath;\n        var m = p.match(INDEX_PATTERN);\n        if (m) {\n            var indexVersion = path.join(path.dirname(p), 'index.d.ts');\n            sourceFile = context.program.getSourceFile(indexVersion);\n        }\n    }\n    if (sourceFile) {\n        var moduleSymbol = sourceFile.module || sourceFile.symbol;\n        var exports_1 = context.checker.getExportsOfModule(moduleSymbol);\n        return (exports_1 || []).find(function (symbol) { return symbol.name == type.name; });\n    }\n}\nvar EmptyTable = /** @class */ (function () {\n    function EmptyTable() {\n        this.size = 0;\n    }\n    EmptyTable.prototype.get = function (key) { return undefined; };\n    EmptyTable.prototype.has = function (key) { return false; };\n    EmptyTable.prototype.values = function () { return []; };\n    EmptyTable.instance = new EmptyTable();\n    return EmptyTable;\n}());\nfunction isSymbolPrivate(s) {\n    return !!s.valueDeclaration && isPrivate(s.valueDeclaration);\n}\nfunction getBuiltinTypeFromTs(kind, context) {\n    var type;\n    var checker = context.checker;\n    var node = context.node;\n    switch (kind) {\n        case BuiltinType$1.Any:\n            type = checker.getTypeAtLocation(setParents({\n                kind: ts.SyntaxKind.AsExpression,\n                expression: { kind: ts.SyntaxKind.TrueKeyword },\n                type: { kind: ts.SyntaxKind.AnyKeyword }\n            }, node));\n            break;\n        case BuiltinType$1.Boolean:\n            type =\n                checker.getTypeAtLocation(setParents({ kind: ts.SyntaxKind.TrueKeyword }, node));\n            break;\n        case BuiltinType$1.Null:\n            type =\n                checker.getTypeAtLocation(setParents({ kind: ts.SyntaxKind.NullKeyword }, node));\n            break;\n        case BuiltinType$1.Number:\n            var numeric = { kind: ts.SyntaxKind.NumericLiteral };\n            setParents({ kind: ts.SyntaxKind.ExpressionStatement, expression: numeric }, node);\n            type = checker.getTypeAtLocation(numeric);\n            break;\n        case BuiltinType$1.String:\n            type = checker.getTypeAtLocation(setParents({ kind: ts.SyntaxKind.NoSubstitutionTemplateLiteral }, node));\n            break;\n        case BuiltinType$1.Undefined:\n            type = checker.getTypeAtLocation(setParents({\n                kind: ts.SyntaxKind.VoidExpression,\n                expression: { kind: ts.SyntaxKind.NumericLiteral }\n            }, node));\n            break;\n        default:\n            throw new Error(\"Internal error, unhandled literal kind \" + kind + \":\" + BuiltinType$1[kind]);\n    }\n    return type;\n}\nfunction setParents(node, parent) {\n    node.parent = parent;\n    ts.forEachChild(node, function (child) { return setParents(child, node); });\n    return node;\n}\nfunction spanAt(sourceFile, line, column) {\n    if (line != null && column != null) {\n        var position_1 = ts.getPositionOfLineAndCharacter(sourceFile, line, column);\n        var findChild = function findChild(node) {\n            if (node.kind > ts.SyntaxKind.LastToken && node.pos <= position_1 && node.end > position_1) {\n                var betterNode = ts.forEachChild(node, findChild);\n                return betterNode || node;\n            }\n        };\n        var node = ts.forEachChild(sourceFile, findChild);\n        if (node) {\n            return { start: node.getStart(), end: node.getEnd() };\n        }\n    }\n}\nfunction definitionFromTsSymbol(symbol) {\n    var declarations = symbol.declarations;\n    if (declarations) {\n        return declarations.map(function (declaration) {\n            var sourceFile = declaration.getSourceFile();\n            return {\n                fileName: sourceFile.fileName,\n                span: { start: declaration.getStart(), end: declaration.getEnd() }\n            };\n        });\n    }\n}\nfunction parentDeclarationOf(node) {\n    while (node) {\n        switch (node.kind) {\n            case ts.SyntaxKind.ClassDeclaration:\n            case ts.SyntaxKind.InterfaceDeclaration:\n                return node;\n            case ts.SyntaxKind.SourceFile:\n                return undefined;\n        }\n        node = node.parent;\n    }\n}\nfunction getContainerOf(symbol, context) {\n    if (symbol.getFlags() & ts.SymbolFlags.ClassMember && symbol.declarations) {\n        try {\n            for (var _a = __values(symbol.declarations), _b = _a.next(); !_b.done; _b = _a.next()) {\n                var declaration = _b.value;\n                var parent = parentDeclarationOf(declaration);\n                if (parent) {\n                    var type = context.checker.getTypeAtLocation(parent);\n                    if (type) {\n                        return new TypeWrapper(type, context);\n                    }\n                }\n            }\n        }\n        catch (e_6_1) { e_6 = { error: e_6_1 }; }\n        finally {\n            try {\n                if (_b && !_b.done && (_c = _a.return)) _c.call(_a);\n            }\n            finally { if (e_6) throw e_6.error; }\n        }\n    }\n    var e_6, _c;\n}\nfunction getTypeParameterOf(type, name) {\n    if (type && type.symbol && type.symbol.name == name) {\n        var typeArguments = type.typeArguments;\n        if (typeArguments && typeArguments.length <= 1) {\n            return typeArguments[0];\n        }\n    }\n}\nfunction typeKindOf(type) {\n    if (type) {\n        if (type.flags & ts.TypeFlags.Any) {\n            return BuiltinType$1.Any;\n        }\n        else if (type.flags & (ts.TypeFlags.String | ts.TypeFlags.StringLike | ts.TypeFlags.StringLiteral)) {\n            return BuiltinType$1.String;\n        }\n        else if (type.flags & (ts.TypeFlags.Number | ts.TypeFlags.NumberLike)) {\n            return BuiltinType$1.Number;\n        }\n        else if (type.flags & (ts.TypeFlags.Undefined)) {\n            return BuiltinType$1.Undefined;\n        }\n        else if (type.flags & (ts.TypeFlags.Null)) {\n            return BuiltinType$1.Null;\n        }\n        else if (type.flags & ts.TypeFlags.Union) {\n            // If all the constituent types of a union are the same kind, it is also that kind.\n            var candidate = null;\n            var unionType = type;\n            if (unionType.types.length > 0) {\n                candidate = typeKindOf(unionType.types[0]);\n                try {\n                    for (var _a = __values(unionType.types), _b = _a.next(); !_b.done; _b = _a.next()) {\n                        var subType = _b.value;\n                        if (candidate != typeKindOf(subType)) {\n                            return BuiltinType$1.Other;\n                        }\n                    }\n                }\n                catch (e_7_1) { e_7 = { error: e_7_1 }; }\n                finally {\n                    try {\n                        if (_b && !_b.done && (_c = _a.return)) _c.call(_a);\n                    }\n                    finally { if (e_7) throw e_7.error; }\n                }\n            }\n            if (candidate != null) {\n                return candidate;\n            }\n        }\n        else if (type.flags & ts.TypeFlags.TypeParameter) {\n            return BuiltinType$1.Unbound;\n        }\n    }\n    return BuiltinType$1.Other;\n    var e_7, _c;\n}\nfunction getFromSymbolTable(symbolTable, key) {\n    var table = symbolTable;\n    var symbol;\n    if (typeof table.get === 'function') {\n        // TS 2.2 uses a Map\n        symbol = table.get(key);\n    }\n    else {\n        // TS pre-2.2 uses an object\n        symbol = table[key];\n    }\n    return symbol;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n// Metadata Schema\n// If you make a backwards incompatible change to the schema, increment the METADTA_VERSION number.\n// If you make a backwards compatible change to the metadata (such as adding an option field) then\n// leave METADATA_VERSION the same. If possible, supply as many versions of the metadata that can\n// represent the semantics of the file in an array. For example, when generating a version 2 file,\n// if version 1 can accurately represent the metadata, generate both version 1 and version 2 in\n// an array.\nvar METADATA_VERSION = 4;\n\nfunction isClassMetadata(value) {\n    return value && value.__symbolic === 'class';\n}\n\n\nfunction isMethodMetadata(value) {\n    return value && (value.__symbolic === 'constructor' || value.__symbolic === 'method');\n}\nfunction isConstructorMetadata(value) {\n    return value && value.__symbolic === 'constructor';\n}\nfunction isFunctionMetadata(value) {\n    return value && value.__symbolic === 'function';\n}\nfunction isMetadataSymbolicExpression(value) {\n    if (value) {\n        switch (value.__symbolic) {\n            case 'binary':\n            case 'call':\n            case 'index':\n            case 'new':\n            case 'pre':\n            case 'reference':\n            case 'select':\n            case 'spread':\n            case 'if':\n                return true;\n        }\n    }\n    return false;\n}\n\n\n\n\n\nfunction isMetadataGlobalReferenceExpression(value) {\n    return value && value.name && !value.module && isMetadataSymbolicReferenceExpression(value);\n}\nfunction isMetadataModuleReferenceExpression(value) {\n    return value && value.module && !value.name && !value.default &&\n        isMetadataSymbolicReferenceExpression(value);\n}\nfunction isMetadataImportedSymbolReferenceExpression(value) {\n    return value && value.module && !!value.name && isMetadataSymbolicReferenceExpression(value);\n}\nfunction isMetadataImportDefaultReference(value) {\n    return value && value.module && value.default && isMetadataSymbolicReferenceExpression(value);\n}\nfunction isMetadataSymbolicReferenceExpression(value) {\n    return value && value.__symbolic === 'reference';\n}\nfunction isMetadataSymbolicSelectExpression(value) {\n    return value && value.__symbolic === 'select';\n}\nfunction isMetadataSymbolicSpreadExpression(value) {\n    return value && value.__symbolic === 'spread';\n}\nfunction isMetadataError$1(value) {\n    return value && value.__symbolic === 'error';\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n// In TypeScript 2.1 the spread element kind was renamed.\nvar spreadElementSyntaxKind = ts.SyntaxKind.SpreadElement || ts.SyntaxKind.SpreadElementExpression;\nfunction isMethodCallOf(callExpression, memberName) {\n    var expression = callExpression.expression;\n    if (expression.kind === ts.SyntaxKind.PropertyAccessExpression) {\n        var propertyAccessExpression = expression;\n        var name = propertyAccessExpression.name;\n        if (name.kind == ts.SyntaxKind.Identifier) {\n            return name.text === memberName;\n        }\n    }\n    return false;\n}\nfunction isCallOf(callExpression, ident) {\n    var expression = callExpression.expression;\n    if (expression.kind === ts.SyntaxKind.Identifier) {\n        var identifier = expression;\n        return identifier.text === ident;\n    }\n    return false;\n}\n/* @internal */\nfunction recordMapEntry(entry, node, nodeMap, sourceFile) {\n    if (!nodeMap.has(entry)) {\n        nodeMap.set(entry, node);\n        if (node && (isMetadataImportedSymbolReferenceExpression(entry) ||\n            isMetadataImportDefaultReference(entry)) &&\n            entry.line == null) {\n            var info = sourceInfo(node, sourceFile);\n            if (info.line != null)\n                entry.line = info.line;\n            if (info.character != null)\n                entry.character = info.character;\n        }\n    }\n    return entry;\n}\n/**\n * ts.forEachChild stops iterating children when the callback return a truthy value.\n * This method inverts this to implement an `every` style iterator. It will return\n * true if every call to `cb` returns `true`.\n */\nfunction everyNodeChild(node, cb) {\n    return !ts.forEachChild(node, function (node) { return !cb(node); });\n}\nfunction isPrimitive$1(value) {\n    return Object(value) !== value;\n}\nfunction isDefined$1(obj) {\n    return obj !== undefined;\n}\nfunction getSourceFileOfNode(node) {\n    while (node && node.kind != ts.SyntaxKind.SourceFile) {\n        node = node.parent;\n    }\n    return node;\n}\n/* @internal */\nfunction sourceInfo(node, sourceFile) {\n    if (node) {\n        sourceFile = sourceFile || getSourceFileOfNode(node);\n        if (sourceFile) {\n            return ts.getLineAndCharacterOfPosition(sourceFile, node.getStart(sourceFile));\n        }\n    }\n    return {};\n}\n/* @internal */\nfunction errorSymbol(message, node, context, sourceFile) {\n    var result = __assign({ __symbolic: 'error', message: message }, sourceInfo(node, sourceFile));\n    if (context) {\n        result.context = context;\n    }\n    return result;\n}\n/**\n * Produce a symbolic representation of an expression folding values into their final value when\n * possible.\n */\nvar Evaluator = /** @class */ (function () {\n    function Evaluator(symbols, nodeMap, options, recordExport) {\n        if (options === void 0) { options = {}; }\n        this.symbols = symbols;\n        this.nodeMap = nodeMap;\n        this.options = options;\n        this.recordExport = recordExport;\n    }\n    Evaluator.prototype.nameOf = function (node) {\n        if (node && node.kind == ts.SyntaxKind.Identifier) {\n            return node.text;\n        }\n        var result = node && this.evaluateNode(node);\n        if (isMetadataError$1(result) || typeof result === 'string') {\n            return result;\n        }\n        else {\n            return errorSymbol('Name expected', node, { received: (node && node.getText()) || '<missing>' });\n        }\n    };\n    /**\n     * Returns true if the expression represented by `node` can be folded into a literal expression.\n     *\n     * For example, a literal is always foldable. This means that literal expressions such as `1.2`\n     * `\"Some value\"` `true` `false` are foldable.\n     *\n     * - An object literal is foldable if all the properties in the literal are foldable.\n     * - An array literal is foldable if all the elements are foldable.\n     * - A call is foldable if it is a call to a Array.prototype.concat or a call to CONST_EXPR.\n     * - A property access is foldable if the object is foldable.\n     * - A array index is foldable if index expression is foldable and the array is foldable.\n     * - Binary operator expressions are foldable if the left and right expressions are foldable and\n     *   it is one of '+', '-', '*', '/', '%', '||', and '&&'.\n     * - An identifier is foldable if a value can be found for its symbol in the evaluator symbol\n     *   table.\n     */\n    Evaluator.prototype.isFoldable = function (node) {\n        return this.isFoldableWorker(node, new Map());\n    };\n    Evaluator.prototype.isFoldableWorker = function (node, folding) {\n        var _this = this;\n        if (node) {\n            switch (node.kind) {\n                case ts.SyntaxKind.ObjectLiteralExpression:\n                    return everyNodeChild(node, function (child) {\n                        if (child.kind === ts.SyntaxKind.PropertyAssignment) {\n                            var propertyAssignment = child;\n                            return _this.isFoldableWorker(propertyAssignment.initializer, folding);\n                        }\n                        return false;\n                    });\n                case ts.SyntaxKind.ArrayLiteralExpression:\n                    return everyNodeChild(node, function (child) { return _this.isFoldableWorker(child, folding); });\n                case ts.SyntaxKind.CallExpression:\n                    var callExpression = node;\n                    // We can fold a <array>.concat(<v>).\n                    if (isMethodCallOf(callExpression, 'concat') &&\n                        arrayOrEmpty(callExpression.arguments).length === 1) {\n                        var arrayNode = callExpression.expression.expression;\n                        if (this.isFoldableWorker(arrayNode, folding) &&\n                            this.isFoldableWorker(callExpression.arguments[0], folding)) {\n                            // It needs to be an array.\n                            var arrayValue = this.evaluateNode(arrayNode);\n                            if (arrayValue && Array.isArray(arrayValue)) {\n                                return true;\n                            }\n                        }\n                    }\n                    // We can fold a call to CONST_EXPR\n                    if (isCallOf(callExpression, 'CONST_EXPR') &&\n                        arrayOrEmpty(callExpression.arguments).length === 1)\n                        return this.isFoldableWorker(callExpression.arguments[0], folding);\n                    return false;\n                case ts.SyntaxKind.NoSubstitutionTemplateLiteral:\n                case ts.SyntaxKind.StringLiteral:\n                case ts.SyntaxKind.NumericLiteral:\n                case ts.SyntaxKind.NullKeyword:\n                case ts.SyntaxKind.TrueKeyword:\n                case ts.SyntaxKind.FalseKeyword:\n                case ts.SyntaxKind.TemplateHead:\n                case ts.SyntaxKind.TemplateMiddle:\n                case ts.SyntaxKind.TemplateTail:\n                    return true;\n                case ts.SyntaxKind.ParenthesizedExpression:\n                    var parenthesizedExpression = node;\n                    return this.isFoldableWorker(parenthesizedExpression.expression, folding);\n                case ts.SyntaxKind.BinaryExpression:\n                    var binaryExpression = node;\n                    switch (binaryExpression.operatorToken.kind) {\n                        case ts.SyntaxKind.PlusToken:\n                        case ts.SyntaxKind.MinusToken:\n                        case ts.SyntaxKind.AsteriskToken:\n                        case ts.SyntaxKind.SlashToken:\n                        case ts.SyntaxKind.PercentToken:\n                        case ts.SyntaxKind.AmpersandAmpersandToken:\n                        case ts.SyntaxKind.BarBarToken:\n                            return this.isFoldableWorker(binaryExpression.left, folding) &&\n                                this.isFoldableWorker(binaryExpression.right, folding);\n                        default:\n                            return false;\n                    }\n                case ts.SyntaxKind.PropertyAccessExpression:\n                    var propertyAccessExpression = node;\n                    return this.isFoldableWorker(propertyAccessExpression.expression, folding);\n                case ts.SyntaxKind.ElementAccessExpression:\n                    var elementAccessExpression = node;\n                    return this.isFoldableWorker(elementAccessExpression.expression, folding) &&\n                        this.isFoldableWorker(elementAccessExpression.argumentExpression, folding);\n                case ts.SyntaxKind.Identifier:\n                    var identifier = node;\n                    var reference = this.symbols.resolve(identifier.text);\n                    if (reference !== undefined && isPrimitive$1(reference)) {\n                        return true;\n                    }\n                    break;\n                case ts.SyntaxKind.TemplateExpression:\n                    var templateExpression = node;\n                    return templateExpression.templateSpans.every(function (span) { return _this.isFoldableWorker(span.expression, folding); });\n            }\n        }\n        return false;\n    };\n    /**\n     * Produce a JSON serialiable object representing `node`. The foldable values in the expression\n     * tree are folded. For example, a node representing `1 + 2` is folded into `3`.\n     */\n    Evaluator.prototype.evaluateNode = function (node, preferReference) {\n        var _this = this;\n        var t = this;\n        var error;\n        function recordEntry(entry, node) {\n            if (t.options.substituteExpression) {\n                var newEntry = t.options.substituteExpression(entry, node);\n                if (t.recordExport && newEntry != entry && isMetadataGlobalReferenceExpression(newEntry)) {\n                    t.recordExport(newEntry.name, entry);\n                }\n                entry = newEntry;\n            }\n            return recordMapEntry(entry, node, t.nodeMap);\n        }\n        function isFoldableError(value) {\n            return !t.options.verboseInvalidExpression && isMetadataError$1(value);\n        }\n        var resolveName = function (name, preferReference) {\n            var reference = _this.symbols.resolve(name, preferReference);\n            if (reference === undefined) {\n                // Encode as a global reference. StaticReflector will check the reference.\n                return recordEntry({ __symbolic: 'reference', name: name }, node);\n            }\n            if (reference && isMetadataSymbolicReferenceExpression(reference)) {\n                return recordEntry(__assign({}, reference), node);\n            }\n            return reference;\n        };\n        switch (node.kind) {\n            case ts.SyntaxKind.ObjectLiteralExpression:\n                var obj_1 = {};\n                var quoted_1 = [];\n                ts.forEachChild(node, function (child) {\n                    switch (child.kind) {\n                        case ts.SyntaxKind.ShorthandPropertyAssignment:\n                        case ts.SyntaxKind.PropertyAssignment:\n                            var assignment = child;\n                            if (assignment.name.kind == ts.SyntaxKind.StringLiteral) {\n                                var name_1 = assignment.name.text;\n                                quoted_1.push(name_1);\n                            }\n                            var propertyName = _this.nameOf(assignment.name);\n                            if (isFoldableError(propertyName)) {\n                                error = propertyName;\n                                return true;\n                            }\n                            var propertyValue = isPropertyAssignment(assignment) ?\n                                _this.evaluateNode(assignment.initializer, /* preferReference */ true) :\n                                resolveName(propertyName, /* preferReference */ true);\n                            if (isFoldableError(propertyValue)) {\n                                error = propertyValue;\n                                return true; // Stop the forEachChild.\n                            }\n                            else {\n                                obj_1[propertyName] = isPropertyAssignment(assignment) ?\n                                    recordEntry(propertyValue, assignment.initializer) :\n                                    propertyValue;\n                            }\n                    }\n                });\n                if (error)\n                    return error;\n                if (this.options.quotedNames && quoted_1.length) {\n                    obj_1['$quoted$'] = quoted_1;\n                }\n                return recordEntry(obj_1, node);\n            case ts.SyntaxKind.ArrayLiteralExpression:\n                var arr_1 = [];\n                ts.forEachChild(node, function (child) {\n                    var value = _this.evaluateNode(child, /* preferReference */ true);\n                    // Check for error\n                    if (isFoldableError(value)) {\n                        error = value;\n                        return true; // Stop the forEachChild.\n                    }\n                    // Handle spread expressions\n                    if (isMetadataSymbolicSpreadExpression(value)) {\n                        if (Array.isArray(value.expression)) {\n                            try {\n                                for (var _a = __values(value.expression), _b = _a.next(); !_b.done; _b = _a.next()) {\n                                    var spreadValue = _b.value;\n                                    arr_1.push(spreadValue);\n                                }\n                            }\n                            catch (e_1_1) { e_1 = { error: e_1_1 }; }\n                            finally {\n                                try {\n                                    if (_b && !_b.done && (_c = _a.return)) _c.call(_a);\n                                }\n                                finally { if (e_1) throw e_1.error; }\n                            }\n                            return;\n                        }\n                    }\n                    arr_1.push(value);\n                    var e_1, _c;\n                });\n                if (error)\n                    return error;\n                return recordEntry(arr_1, node);\n            case spreadElementSyntaxKind:\n                var spreadExpression = this.evaluateNode(node.expression);\n                return recordEntry({ __symbolic: 'spread', expression: spreadExpression }, node);\n            case ts.SyntaxKind.CallExpression:\n                var callExpression = node;\n                if (isCallOf(callExpression, 'forwardRef') &&\n                    arrayOrEmpty(callExpression.arguments).length === 1) {\n                    var firstArgument = callExpression.arguments[0];\n                    if (firstArgument.kind == ts.SyntaxKind.ArrowFunction) {\n                        var arrowFunction = firstArgument;\n                        return recordEntry(this.evaluateNode(arrowFunction.body), node);\n                    }\n                }\n                var args = arrayOrEmpty(callExpression.arguments).map(function (arg) { return _this.evaluateNode(arg); });\n                if (this.isFoldable(callExpression)) {\n                    if (isMethodCallOf(callExpression, 'concat')) {\n                        var arrayValue = this.evaluateNode(callExpression.expression.expression);\n                        if (isFoldableError(arrayValue))\n                            return arrayValue;\n                        return arrayValue.concat(args[0]);\n                    }\n                }\n                // Always fold a CONST_EXPR even if the argument is not foldable.\n                if (isCallOf(callExpression, 'CONST_EXPR') &&\n                    arrayOrEmpty(callExpression.arguments).length === 1) {\n                    return recordEntry(args[0], node);\n                }\n                var expression = this.evaluateNode(callExpression.expression);\n                if (isFoldableError(expression)) {\n                    return recordEntry(expression, node);\n                }\n                var result = { __symbolic: 'call', expression: expression };\n                if (args && args.length) {\n                    result.arguments = args;\n                }\n                return recordEntry(result, node);\n            case ts.SyntaxKind.NewExpression:\n                var newExpression = node;\n                var newArgs = arrayOrEmpty(newExpression.arguments).map(function (arg) { return _this.evaluateNode(arg); });\n                var newTarget = this.evaluateNode(newExpression.expression);\n                if (isMetadataError$1(newTarget)) {\n                    return recordEntry(newTarget, node);\n                }\n                var call = { __symbolic: 'new', expression: newTarget };\n                if (newArgs.length) {\n                    call.arguments = newArgs;\n                }\n                return recordEntry(call, node);\n            case ts.SyntaxKind.PropertyAccessExpression: {\n                var propertyAccessExpression = node;\n                var expression_1 = this.evaluateNode(propertyAccessExpression.expression);\n                if (isFoldableError(expression_1)) {\n                    return recordEntry(expression_1, node);\n                }\n                var member = this.nameOf(propertyAccessExpression.name);\n                if (isFoldableError(member)) {\n                    return recordEntry(member, node);\n                }\n                if (expression_1 && this.isFoldable(propertyAccessExpression.expression))\n                    return expression_1[member];\n                if (isMetadataModuleReferenceExpression(expression_1)) {\n                    // A select into a module reference and be converted into a reference to the symbol\n                    // in the module\n                    return recordEntry({ __symbolic: 'reference', module: expression_1.module, name: member }, node);\n                }\n                return recordEntry({ __symbolic: 'select', expression: expression_1, member: member }, node);\n            }\n            case ts.SyntaxKind.ElementAccessExpression: {\n                var elementAccessExpression = node;\n                var expression_2 = this.evaluateNode(elementAccessExpression.expression);\n                if (isFoldableError(expression_2)) {\n                    return recordEntry(expression_2, node);\n                }\n                if (!elementAccessExpression.argumentExpression) {\n                    return recordEntry(errorSymbol('Expression form not supported', node), node);\n                }\n                var index = this.evaluateNode(elementAccessExpression.argumentExpression);\n                if (isFoldableError(expression_2)) {\n                    return recordEntry(expression_2, node);\n                }\n                if (this.isFoldable(elementAccessExpression.expression) &&\n                    this.isFoldable(elementAccessExpression.argumentExpression))\n                    return expression_2[index];\n                return recordEntry({ __symbolic: 'index', expression: expression_2, index: index }, node);\n            }\n            case ts.SyntaxKind.Identifier:\n                var identifier = node;\n                var name = identifier.text;\n                return resolveName(name, preferReference);\n            case ts.SyntaxKind.TypeReference:\n                var typeReferenceNode = node;\n                var typeNameNode_1 = typeReferenceNode.typeName;\n                var getReference = function (node) {\n                    if (typeNameNode_1.kind === ts.SyntaxKind.QualifiedName) {\n                        var qualifiedName = node;\n                        var left_1 = _this.evaluateNode(qualifiedName.left);\n                        if (isMetadataModuleReferenceExpression(left_1)) {\n                            return recordEntry({\n                                __symbolic: 'reference',\n                                module: left_1.module,\n                                name: qualifiedName.right.text\n                            }, node);\n                        }\n                        // Record a type reference to a declared type as a select.\n                        return { __symbolic: 'select', expression: left_1, member: qualifiedName.right.text };\n                    }\n                    else {\n                        var identifier_1 = typeNameNode_1;\n                        var symbol = _this.symbols.resolve(identifier_1.text);\n                        if (isFoldableError(symbol) || isMetadataSymbolicReferenceExpression(symbol)) {\n                            return recordEntry(symbol, node);\n                        }\n                        return recordEntry(errorSymbol('Could not resolve type', node, { typeName: identifier_1.text }), node);\n                    }\n                };\n                var typeReference = getReference(typeNameNode_1);\n                if (isFoldableError(typeReference)) {\n                    return recordEntry(typeReference, node);\n                }\n                if (!isMetadataModuleReferenceExpression(typeReference) &&\n                    typeReferenceNode.typeArguments && typeReferenceNode.typeArguments.length) {\n                    var args_1 = typeReferenceNode.typeArguments.map(function (element) { return _this.evaluateNode(element); });\n                    // TODO: Remove typecast when upgraded to 2.0 as it will be correctly inferred.\n                    // Some versions of 1.9 do not infer this correctly.\n                    typeReference.arguments = args_1;\n                }\n                return recordEntry(typeReference, node);\n            case ts.SyntaxKind.UnionType:\n                var unionType = node;\n                // Remove null and undefined from the list of unions.\n                var references = unionType.types\n                    .filter(function (n) { return n.kind != ts.SyntaxKind.NullKeyword &&\n                    n.kind != ts.SyntaxKind.UndefinedKeyword; })\n                    .map(function (n) { return _this.evaluateNode(n); });\n                // The remmaining reference must be the same. If two have type arguments consider them\n                // different even if the type arguments are the same.\n                var candidate = null;\n                for (var i = 0; i < references.length; i++) {\n                    var reference = references[i];\n                    if (isMetadataSymbolicReferenceExpression(reference)) {\n                        if (candidate) {\n                            if (reference.name == candidate.name &&\n                                reference.module == candidate.module && !reference.arguments) {\n                                candidate = reference;\n                            }\n                        }\n                        else {\n                            candidate = reference;\n                        }\n                    }\n                    else {\n                        return reference;\n                    }\n                }\n                if (candidate)\n                    return candidate;\n                break;\n            case ts.SyntaxKind.NoSubstitutionTemplateLiteral:\n            case ts.SyntaxKind.StringLiteral:\n            case ts.SyntaxKind.TemplateHead:\n            case ts.SyntaxKind.TemplateTail:\n            case ts.SyntaxKind.TemplateMiddle:\n                return node.text;\n            case ts.SyntaxKind.NumericLiteral:\n                return parseFloat(node.text);\n            case ts.SyntaxKind.AnyKeyword:\n                return recordEntry({ __symbolic: 'reference', name: 'any' }, node);\n            case ts.SyntaxKind.StringKeyword:\n                return recordEntry({ __symbolic: 'reference', name: 'string' }, node);\n            case ts.SyntaxKind.NumberKeyword:\n                return recordEntry({ __symbolic: 'reference', name: 'number' }, node);\n            case ts.SyntaxKind.BooleanKeyword:\n                return recordEntry({ __symbolic: 'reference', name: 'boolean' }, node);\n            case ts.SyntaxKind.ArrayType:\n                var arrayTypeNode = node;\n                return recordEntry({\n                    __symbolic: 'reference',\n                    name: 'Array',\n                    arguments: [this.evaluateNode(arrayTypeNode.elementType)]\n                }, node);\n            case ts.SyntaxKind.NullKeyword:\n                return null;\n            case ts.SyntaxKind.TrueKeyword:\n                return true;\n            case ts.SyntaxKind.FalseKeyword:\n                return false;\n            case ts.SyntaxKind.ParenthesizedExpression:\n                var parenthesizedExpression = node;\n                return this.evaluateNode(parenthesizedExpression.expression);\n            case ts.SyntaxKind.TypeAssertionExpression:\n                var typeAssertion = node;\n                return this.evaluateNode(typeAssertion.expression);\n            case ts.SyntaxKind.PrefixUnaryExpression:\n                var prefixUnaryExpression = node;\n                var operand = this.evaluateNode(prefixUnaryExpression.operand);\n                if (isDefined$1(operand) && isPrimitive$1(operand)) {\n                    switch (prefixUnaryExpression.operator) {\n                        case ts.SyntaxKind.PlusToken:\n                            return +operand;\n                        case ts.SyntaxKind.MinusToken:\n                            return -operand;\n                        case ts.SyntaxKind.TildeToken:\n                            return ~operand;\n                        case ts.SyntaxKind.ExclamationToken:\n                            return !operand;\n                    }\n                }\n                var operatorText = void 0;\n                switch (prefixUnaryExpression.operator) {\n                    case ts.SyntaxKind.PlusToken:\n                        operatorText = '+';\n                        break;\n                    case ts.SyntaxKind.MinusToken:\n                        operatorText = '-';\n                        break;\n                    case ts.SyntaxKind.TildeToken:\n                        operatorText = '~';\n                        break;\n                    case ts.SyntaxKind.ExclamationToken:\n                        operatorText = '!';\n                        break;\n                    default:\n                        return undefined;\n                }\n                return recordEntry({ __symbolic: 'pre', operator: operatorText, operand: operand }, node);\n            case ts.SyntaxKind.BinaryExpression:\n                var binaryExpression = node;\n                var left = this.evaluateNode(binaryExpression.left);\n                var right = this.evaluateNode(binaryExpression.right);\n                if (isDefined$1(left) && isDefined$1(right)) {\n                    if (isPrimitive$1(left) && isPrimitive$1(right))\n                        switch (binaryExpression.operatorToken.kind) {\n                            case ts.SyntaxKind.BarBarToken:\n                                return left || right;\n                            case ts.SyntaxKind.AmpersandAmpersandToken:\n                                return left && right;\n                            case ts.SyntaxKind.AmpersandToken:\n                                return left & right;\n                            case ts.SyntaxKind.BarToken:\n                                return left | right;\n                            case ts.SyntaxKind.CaretToken:\n                                return left ^ right;\n                            case ts.SyntaxKind.EqualsEqualsToken:\n                                return left == right;\n                            case ts.SyntaxKind.ExclamationEqualsToken:\n                                return left != right;\n                            case ts.SyntaxKind.EqualsEqualsEqualsToken:\n                                return left === right;\n                            case ts.SyntaxKind.ExclamationEqualsEqualsToken:\n                                return left !== right;\n                            case ts.SyntaxKind.LessThanToken:\n                                return left < right;\n                            case ts.SyntaxKind.GreaterThanToken:\n                                return left > right;\n                            case ts.SyntaxKind.LessThanEqualsToken:\n                                return left <= right;\n                            case ts.SyntaxKind.GreaterThanEqualsToken:\n                                return left >= right;\n                            case ts.SyntaxKind.LessThanLessThanToken:\n                                return left << right;\n                            case ts.SyntaxKind.GreaterThanGreaterThanToken:\n                                return left >> right;\n                            case ts.SyntaxKind.GreaterThanGreaterThanGreaterThanToken:\n                                return left >>> right;\n                            case ts.SyntaxKind.PlusToken:\n                                return left + right;\n                            case ts.SyntaxKind.MinusToken:\n                                return left - right;\n                            case ts.SyntaxKind.AsteriskToken:\n                                return left * right;\n                            case ts.SyntaxKind.SlashToken:\n                                return left / right;\n                            case ts.SyntaxKind.PercentToken:\n                                return left % right;\n                        }\n                    return recordEntry({\n                        __symbolic: 'binop',\n                        operator: binaryExpression.operatorToken.getText(),\n                        left: left,\n                        right: right\n                    }, node);\n                }\n                break;\n            case ts.SyntaxKind.ConditionalExpression:\n                var conditionalExpression = node;\n                var condition = this.evaluateNode(conditionalExpression.condition);\n                var thenExpression = this.evaluateNode(conditionalExpression.whenTrue);\n                var elseExpression = this.evaluateNode(conditionalExpression.whenFalse);\n                if (isPrimitive$1(condition)) {\n                    return condition ? thenExpression : elseExpression;\n                }\n                return recordEntry({ __symbolic: 'if', condition: condition, thenExpression: thenExpression, elseExpression: elseExpression }, node);\n            case ts.SyntaxKind.FunctionExpression:\n            case ts.SyntaxKind.ArrowFunction:\n                return recordEntry(errorSymbol('Lambda not supported', node), node);\n            case ts.SyntaxKind.TaggedTemplateExpression:\n                return recordEntry(errorSymbol('Tagged template expressions are not supported in metadata', node), node);\n            case ts.SyntaxKind.TemplateExpression:\n                var templateExpression = node;\n                if (this.isFoldable(node)) {\n                    return templateExpression.templateSpans.reduce(function (previous, current) { return previous + _this.evaluateNode(current.expression) +\n                        _this.evaluateNode(current.literal); }, this.evaluateNode(templateExpression.head));\n                }\n                else {\n                    return templateExpression.templateSpans.reduce(function (previous, current) {\n                        var expr = _this.evaluateNode(current.expression);\n                        var literal = _this.evaluateNode(current.literal);\n                        if (isFoldableError(expr))\n                            return expr;\n                        if (isFoldableError(literal))\n                            return literal;\n                        if (typeof previous === 'string' && typeof expr === 'string' &&\n                            typeof literal === 'string') {\n                            return previous + expr + literal;\n                        }\n                        var result = expr;\n                        if (previous !== '') {\n                            result = { __symbolic: 'binop', operator: '+', left: previous, right: expr };\n                        }\n                        if (literal != '') {\n                            result = { __symbolic: 'binop', operator: '+', left: result, right: literal };\n                        }\n                        return result;\n                    }, this.evaluateNode(templateExpression.head));\n                }\n            case ts.SyntaxKind.AsExpression:\n                var asExpression = node;\n                return this.evaluateNode(asExpression.expression);\n            case ts.SyntaxKind.ClassExpression:\n                return { __symbolic: 'class' };\n        }\n        return recordEntry(errorSymbol('Expression form not supported', node), node);\n    };\n    return Evaluator;\n}());\nfunction isPropertyAssignment(node) {\n    return node.kind == ts.SyntaxKind.PropertyAssignment;\n}\nvar empty = ts.createNodeArray();\nfunction arrayOrEmpty(v) {\n    return v || empty;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar Symbols = /** @class */ (function () {\n    function Symbols(sourceFile) {\n        this.sourceFile = sourceFile;\n        this.references = new Map();\n    }\n    Symbols.prototype.resolve = function (name, preferReference) {\n        return (preferReference && this.references.get(name)) || this.symbols.get(name);\n    };\n    Symbols.prototype.define = function (name, value) { this.symbols.set(name, value); };\n    Symbols.prototype.defineReference = function (name, value) {\n        this.references.set(name, value);\n    };\n    Symbols.prototype.has = function (name) { return this.symbols.has(name); };\n    Object.defineProperty(Symbols.prototype, \"symbols\", {\n        get: function () {\n            var result = this._symbols;\n            if (!result) {\n                result = this._symbols = new Map();\n                populateBuiltins(result);\n                this.buildImports();\n            }\n            return result;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Symbols.prototype.buildImports = function () {\n        var _this = this;\n        var symbols = this._symbols;\n        // Collect the imported symbols into this.symbols\n        var stripQuotes = function (s) { return s.replace(/^['\"]|['\"]$/g, ''); };\n        var visit = function (node) {\n            switch (node.kind) {\n                case ts.SyntaxKind.ImportEqualsDeclaration:\n                    var importEqualsDeclaration = node;\n                    if (importEqualsDeclaration.moduleReference.kind ===\n                        ts.SyntaxKind.ExternalModuleReference) {\n                        var externalReference = importEqualsDeclaration.moduleReference;\n                        if (externalReference.expression) {\n                            // An `import <identifier> = require(<module-specifier>);\n                            if (!externalReference.expression.parent) {\n                                // The `parent` field of a node is set by the TypeScript binder (run as\n                                // part of the type checker). Setting it here allows us to call `getText()`\n                                // even if the `SourceFile` was not type checked (which looks for `SourceFile`\n                                // in the parent chain). This doesn't damage the node as the binder unconditionally\n                                // sets the parent.\n                                externalReference.expression.parent = externalReference;\n                                externalReference.parent = _this.sourceFile;\n                            }\n                            var from_1 = stripQuotes(externalReference.expression.getText());\n                            symbols.set(importEqualsDeclaration.name.text, { __symbolic: 'reference', module: from_1 });\n                            break;\n                        }\n                    }\n                    symbols.set(importEqualsDeclaration.name.text, { __symbolic: 'error', message: \"Unsupported import syntax\" });\n                    break;\n                case ts.SyntaxKind.ImportDeclaration:\n                    var importDecl = node;\n                    if (!importDecl.importClause) {\n                        // An `import <module-specifier>` clause which does not bring symbols into scope.\n                        break;\n                    }\n                    if (!importDecl.moduleSpecifier.parent) {\n                        // See note above in the `ImportEqualDeclaration` case.\n                        importDecl.moduleSpecifier.parent = importDecl;\n                        importDecl.parent = _this.sourceFile;\n                    }\n                    var from = stripQuotes(importDecl.moduleSpecifier.getText());\n                    if (importDecl.importClause.name) {\n                        // An `import <identifier> form <module-specifier>` clause. Record the default symbol.\n                        symbols.set(importDecl.importClause.name.text, { __symbolic: 'reference', module: from, default: true });\n                    }\n                    var bindings = importDecl.importClause.namedBindings;\n                    if (bindings) {\n                        switch (bindings.kind) {\n                            case ts.SyntaxKind.NamedImports:\n                                try {\n                                    // An `import { [<identifier> [, <identifier>] } from <module-specifier>` clause\n                                    for (var _a = __values(bindings.elements), _b = _a.next(); !_b.done; _b = _a.next()) {\n                                        var binding = _b.value;\n                                        symbols.set(binding.name.text, {\n                                            __symbolic: 'reference',\n                                            module: from,\n                                            name: binding.propertyName ? binding.propertyName.text : binding.name.text\n                                        });\n                                    }\n                                }\n                                catch (e_1_1) { e_1 = { error: e_1_1 }; }\n                                finally {\n                                    try {\n                                        if (_b && !_b.done && (_c = _a.return)) _c.call(_a);\n                                    }\n                                    finally { if (e_1) throw e_1.error; }\n                                }\n                                break;\n                            case ts.SyntaxKind.NamespaceImport:\n                                // An `input * as <identifier> from <module-specifier>` clause.\n                                symbols.set(bindings.name.text, { __symbolic: 'reference', module: from });\n                                break;\n                        }\n                    }\n                    break;\n            }\n            ts.forEachChild(node, visit);\n            var e_1, _c;\n        };\n        if (this.sourceFile) {\n            ts.forEachChild(this.sourceFile, visit);\n        }\n    };\n    return Symbols;\n}());\nfunction populateBuiltins(symbols) {\n    // From lib.core.d.ts (all \"define const\")\n    ['Object', 'Function', 'String', 'Number', 'Array', 'Boolean', 'Map', 'NaN', 'Infinity', 'Math',\n        'Date', 'RegExp', 'Error', 'Error', 'EvalError', 'RangeError', 'ReferenceError', 'SyntaxError',\n        'TypeError', 'URIError', 'JSON', 'ArrayBuffer', 'DataView', 'Int8Array', 'Uint8Array',\n        'Uint8ClampedArray', 'Uint16Array', 'Int16Array', 'Int32Array', 'Uint32Array', 'Float32Array',\n        'Float64Array']\n        .forEach(function (name) { return symbols.set(name, { __symbolic: 'reference', name: name }); });\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar isStatic = function (node) { return ts.getCombinedModifierFlags(node) & ts.ModifierFlags.Static; };\n/**\n * Collect decorator metadata from a TypeScript module.\n */\nvar MetadataCollector = /** @class */ (function () {\n    function MetadataCollector(options) {\n        if (options === void 0) { options = {}; }\n        this.options = options;\n    }\n    /**\n     * Returns a JSON.stringify friendly form describing the decorators of the exported classes from\n     * the source file that is expected to correspond to a module.\n     */\n    MetadataCollector.prototype.getMetadata = function (sourceFile, strict, substituteExpression) {\n        var _this = this;\n        if (strict === void 0) { strict = false; }\n        var locals = new Symbols(sourceFile);\n        var nodeMap = new Map();\n        var composedSubstituter = substituteExpression && this.options.substituteExpression ?\n            function (value, node) {\n                return _this.options.substituteExpression(substituteExpression(value, node), node);\n            } :\n            substituteExpression;\n        var evaluatorOptions = substituteExpression ? __assign({}, this.options, { substituteExpression: composedSubstituter }) :\n            this.options;\n        var metadata;\n        var evaluator = new Evaluator(locals, nodeMap, evaluatorOptions, function (name, value) {\n            if (!metadata)\n                metadata = {};\n            metadata[name] = value;\n        });\n        var exports = undefined;\n        function objFromDecorator(decoratorNode) {\n            return evaluator.evaluateNode(decoratorNode.expression);\n        }\n        function recordEntry(entry, node) {\n            if (composedSubstituter) {\n                entry = composedSubstituter(entry, node);\n            }\n            return recordMapEntry(entry, node, nodeMap, sourceFile);\n        }\n        function errorSym(message, node, context) {\n            return errorSymbol(message, node, context, sourceFile);\n        }\n        function maybeGetSimpleFunction(functionDeclaration) {\n            if (functionDeclaration.name && functionDeclaration.name.kind == ts.SyntaxKind.Identifier) {\n                var nameNode = functionDeclaration.name;\n                var functionName = nameNode.text;\n                var functionBody = functionDeclaration.body;\n                if (functionBody && functionBody.statements.length == 1) {\n                    var statement = functionBody.statements[0];\n                    if (statement.kind === ts.SyntaxKind.ReturnStatement) {\n                        var returnStatement = statement;\n                        if (returnStatement.expression) {\n                            var func = {\n                                __symbolic: 'function',\n                                parameters: namesOf(functionDeclaration.parameters),\n                                value: evaluator.evaluateNode(returnStatement.expression)\n                            };\n                            if (functionDeclaration.parameters.some(function (p) { return p.initializer != null; })) {\n                                func.defaults = functionDeclaration.parameters.map(function (p) { return p.initializer && evaluator.evaluateNode(p.initializer); });\n                            }\n                            return recordEntry({ func: func, name: functionName }, functionDeclaration);\n                        }\n                    }\n                }\n            }\n        }\n        function classMetadataOf(classDeclaration) {\n            var result = { __symbolic: 'class' };\n            function getDecorators(decorators) {\n                if (decorators && decorators.length)\n                    return decorators.map(function (decorator) { return objFromDecorator(decorator); });\n                return undefined;\n            }\n            function referenceFrom(node) {\n                var result = evaluator.evaluateNode(node);\n                if (isMetadataError$1(result) || isMetadataSymbolicReferenceExpression(result) ||\n                    isMetadataSymbolicSelectExpression(result)) {\n                    return result;\n                }\n                else {\n                    return errorSym('Symbol reference expected', node);\n                }\n            }\n            // Add class parents\n            if (classDeclaration.heritageClauses) {\n                classDeclaration.heritageClauses.forEach(function (hc) {\n                    if (hc.token === ts.SyntaxKind.ExtendsKeyword && hc.types) {\n                        hc.types.forEach(function (type) { return result.extends = referenceFrom(type.expression); });\n                    }\n                });\n            }\n            // Add arity if the type is generic\n            var typeParameters = classDeclaration.typeParameters;\n            if (typeParameters && typeParameters.length) {\n                result.arity = typeParameters.length;\n            }\n            // Add class decorators\n            if (classDeclaration.decorators) {\n                result.decorators = getDecorators(classDeclaration.decorators);\n            }\n            // member decorators\n            var members = null;\n            function recordMember(name, metadata) {\n                if (!members)\n                    members = {};\n                var data = members.hasOwnProperty(name) ? members[name] : [];\n                data.push(metadata);\n                members[name] = data;\n            }\n            // static member\n            var statics = null;\n            function recordStaticMember(name, value) {\n                if (!statics)\n                    statics = {};\n                statics[name] = value;\n            }\n            try {\n                for (var _a = __values(classDeclaration.members), _b = _a.next(); !_b.done; _b = _a.next()) {\n                    var member = _b.value;\n                    var isConstructor = false;\n                    switch (member.kind) {\n                        case ts.SyntaxKind.Constructor:\n                        case ts.SyntaxKind.MethodDeclaration:\n                            isConstructor = member.kind === ts.SyntaxKind.Constructor;\n                            var method = member;\n                            if (isStatic(method)) {\n                                var maybeFunc = maybeGetSimpleFunction(method);\n                                if (maybeFunc) {\n                                    recordStaticMember(maybeFunc.name, maybeFunc.func);\n                                }\n                                continue;\n                            }\n                            var methodDecorators = getDecorators(method.decorators);\n                            var parameters = method.parameters;\n                            var parameterDecoratorData = [];\n                            var parametersData = [];\n                            var hasDecoratorData = false;\n                            var hasParameterData = false;\n                            try {\n                                for (var parameters_1 = __values(parameters), parameters_1_1 = parameters_1.next(); !parameters_1_1.done; parameters_1_1 = parameters_1.next()) {\n                                    var parameter = parameters_1_1.value;\n                                    var parameterData = getDecorators(parameter.decorators);\n                                    parameterDecoratorData.push(parameterData);\n                                    hasDecoratorData = hasDecoratorData || !!parameterData;\n                                    if (isConstructor) {\n                                        if (parameter.type) {\n                                            parametersData.push(referenceFrom(parameter.type));\n                                        }\n                                        else {\n                                            parametersData.push(null);\n                                        }\n                                        hasParameterData = true;\n                                    }\n                                }\n                            }\n                            catch (e_1_1) { e_1 = { error: e_1_1 }; }\n                            finally {\n                                try {\n                                    if (parameters_1_1 && !parameters_1_1.done && (_c = parameters_1.return)) _c.call(parameters_1);\n                                }\n                                finally { if (e_1) throw e_1.error; }\n                            }\n                            var data = { __symbolic: isConstructor ? 'constructor' : 'method' };\n                            var name = isConstructor ? '__ctor__' : evaluator.nameOf(member.name);\n                            if (methodDecorators) {\n                                data.decorators = methodDecorators;\n                            }\n                            if (hasDecoratorData) {\n                                data.parameterDecorators = parameterDecoratorData;\n                            }\n                            if (hasParameterData) {\n                                data.parameters = parametersData;\n                            }\n                            if (!isMetadataError$1(name)) {\n                                recordMember(name, data);\n                            }\n                            break;\n                        case ts.SyntaxKind.PropertyDeclaration:\n                        case ts.SyntaxKind.GetAccessor:\n                        case ts.SyntaxKind.SetAccessor:\n                            var property = member;\n                            if (isStatic(property)) {\n                                var name_1 = evaluator.nameOf(property.name);\n                                if (!isMetadataError$1(name_1)) {\n                                    if (property.initializer) {\n                                        var value = evaluator.evaluateNode(property.initializer);\n                                        recordStaticMember(name_1, value);\n                                    }\n                                    else {\n                                        recordStaticMember(name_1, errorSym('Variable not initialized', property.name));\n                                    }\n                                }\n                            }\n                            var propertyDecorators = getDecorators(property.decorators);\n                            if (propertyDecorators) {\n                                var name_2 = evaluator.nameOf(property.name);\n                                if (!isMetadataError$1(name_2)) {\n                                    recordMember(name_2, { __symbolic: 'property', decorators: propertyDecorators });\n                                }\n                            }\n                            break;\n                    }\n                }\n            }\n            catch (e_2_1) { e_2 = { error: e_2_1 }; }\n            finally {\n                try {\n                    if (_b && !_b.done && (_d = _a.return)) _d.call(_a);\n                }\n                finally { if (e_2) throw e_2.error; }\n            }\n            if (members) {\n                result.members = members;\n            }\n            if (statics) {\n                result.statics = statics;\n            }\n            return recordEntry(result, classDeclaration);\n            var e_2, _d, e_1, _c;\n        }\n        // Collect all exported symbols from an exports clause.\n        var exportMap = new Map();\n        ts.forEachChild(sourceFile, function (node) {\n            switch (node.kind) {\n                case ts.SyntaxKind.ExportDeclaration:\n                    var exportDeclaration = node;\n                    var moduleSpecifier = exportDeclaration.moduleSpecifier, exportClause = exportDeclaration.exportClause;\n                    if (!moduleSpecifier) {\n                        // If there is a module specifier there is also an exportClause\n                        exportClause.elements.forEach(function (spec) {\n                            var exportedAs = spec.name.text;\n                            var name = (spec.propertyName || spec.name).text;\n                            exportMap.set(name, exportedAs);\n                        });\n                    }\n            }\n        });\n        var isExport = function (node) {\n            return sourceFile.isDeclarationFile || ts.getCombinedModifierFlags(node) & ts.ModifierFlags.Export;\n        };\n        var isExportedIdentifier = function (identifier) {\n            return identifier && exportMap.has(identifier.text);\n        };\n        var isExported = function (node) {\n            return isExport(node) || isExportedIdentifier(node.name);\n        };\n        var exportedIdentifierName = function (identifier) {\n            return identifier && (exportMap.get(identifier.text) || identifier.text);\n        };\n        var exportedName = function (node) { return exportedIdentifierName(node.name); };\n        // Pre-declare classes and functions\n        ts.forEachChild(sourceFile, function (node) {\n            switch (node.kind) {\n                case ts.SyntaxKind.ClassDeclaration:\n                    var classDeclaration = node;\n                    if (classDeclaration.name) {\n                        var className = classDeclaration.name.text;\n                        if (isExported(classDeclaration)) {\n                            locals.define(className, { __symbolic: 'reference', name: exportedName(classDeclaration) });\n                        }\n                        else {\n                            locals.define(className, errorSym('Reference to non-exported class', node, { className: className }));\n                        }\n                    }\n                    break;\n                case ts.SyntaxKind.InterfaceDeclaration:\n                    var interfaceDeclaration = node;\n                    if (interfaceDeclaration.name) {\n                        var interfaceName = interfaceDeclaration.name.text;\n                        // All references to interfaces should be converted to references to `any`.\n                        locals.define(interfaceName, { __symbolic: 'reference', name: 'any' });\n                    }\n                    break;\n                case ts.SyntaxKind.FunctionDeclaration:\n                    var functionDeclaration = node;\n                    if (!isExported(functionDeclaration)) {\n                        // Report references to this function as an error.\n                        var nameNode = functionDeclaration.name;\n                        if (nameNode && nameNode.text) {\n                            locals.define(nameNode.text, errorSym('Reference to a non-exported function', nameNode, { name: nameNode.text }));\n                        }\n                    }\n                    break;\n            }\n        });\n        ts.forEachChild(sourceFile, function (node) {\n            switch (node.kind) {\n                case ts.SyntaxKind.ExportDeclaration:\n                    // Record export declarations\n                    var exportDeclaration = node;\n                    var moduleSpecifier = exportDeclaration.moduleSpecifier, exportClause = exportDeclaration.exportClause;\n                    if (!moduleSpecifier) {\n                        // no module specifier -> export {propName as name};\n                        if (exportClause) {\n                            exportClause.elements.forEach(function (spec) {\n                                var name = spec.name.text;\n                                // If the symbol was not already exported, export a reference since it is a\n                                // reference to an import\n                                if (!metadata || !metadata[name]) {\n                                    var propNode = spec.propertyName || spec.name;\n                                    var value = evaluator.evaluateNode(propNode);\n                                    if (!metadata)\n                                        metadata = {};\n                                    metadata[name] = recordEntry(value, node);\n                                }\n                            });\n                        }\n                    }\n                    if (moduleSpecifier && moduleSpecifier.kind == ts.SyntaxKind.StringLiteral) {\n                        // Ignore exports that don't have string literals as exports.\n                        // This is allowed by the syntax but will be flagged as an error by the type checker.\n                        var from = moduleSpecifier.text;\n                        var moduleExport = { from: from };\n                        if (exportClause) {\n                            moduleExport.export = exportClause.elements.map(function (spec) { return spec.propertyName ? { name: spec.propertyName.text, as: spec.name.text } :\n                                spec.name.text; });\n                        }\n                        if (!exports)\n                            exports = [];\n                        exports.push(moduleExport);\n                    }\n                    break;\n                case ts.SyntaxKind.ClassDeclaration:\n                    var classDeclaration = node;\n                    if (classDeclaration.name) {\n                        if (isExported(classDeclaration)) {\n                            var name = exportedName(classDeclaration);\n                            if (name) {\n                                if (!metadata)\n                                    metadata = {};\n                                metadata[name] = classMetadataOf(classDeclaration);\n                            }\n                        }\n                    }\n                    // Otherwise don't record metadata for the class.\n                    break;\n                case ts.SyntaxKind.TypeAliasDeclaration:\n                    var typeDeclaration = node;\n                    if (typeDeclaration.name && isExported(typeDeclaration)) {\n                        var name = exportedName(typeDeclaration);\n                        if (name) {\n                            if (!metadata)\n                                metadata = {};\n                            metadata[name] = { __symbolic: 'interface' };\n                        }\n                    }\n                    break;\n                case ts.SyntaxKind.InterfaceDeclaration:\n                    var interfaceDeclaration = node;\n                    if (interfaceDeclaration.name && isExported(interfaceDeclaration)) {\n                        var name = exportedName(interfaceDeclaration);\n                        if (name) {\n                            if (!metadata)\n                                metadata = {};\n                            metadata[name] = { __symbolic: 'interface' };\n                        }\n                    }\n                    break;\n                case ts.SyntaxKind.FunctionDeclaration:\n                    // Record functions that return a single value. Record the parameter\n                    // names substitution will be performed by the StaticReflector.\n                    var functionDeclaration = node;\n                    if (isExported(functionDeclaration) && functionDeclaration.name) {\n                        var name = exportedName(functionDeclaration);\n                        var maybeFunc = maybeGetSimpleFunction(functionDeclaration);\n                        if (name) {\n                            if (!metadata)\n                                metadata = {};\n                            metadata[name] =\n                                maybeFunc ? recordEntry(maybeFunc.func, node) : { __symbolic: 'function' };\n                        }\n                    }\n                    break;\n                case ts.SyntaxKind.EnumDeclaration:\n                    var enumDeclaration = node;\n                    if (isExported(enumDeclaration)) {\n                        var enumValueHolder = {};\n                        var enumName = exportedName(enumDeclaration);\n                        var nextDefaultValue = 0;\n                        var writtenMembers = 0;\n                        try {\n                            for (var _a = __values(enumDeclaration.members), _b = _a.next(); !_b.done; _b = _a.next()) {\n                                var member = _b.value;\n                                var enumValue = void 0;\n                                if (!member.initializer) {\n                                    enumValue = nextDefaultValue;\n                                }\n                                else {\n                                    enumValue = evaluator.evaluateNode(member.initializer);\n                                }\n                                var name = undefined;\n                                if (member.name.kind == ts.SyntaxKind.Identifier) {\n                                    var identifier = member.name;\n                                    name = identifier.text;\n                                    enumValueHolder[name] = enumValue;\n                                    writtenMembers++;\n                                }\n                                if (typeof enumValue === 'number') {\n                                    nextDefaultValue = enumValue + 1;\n                                }\n                                else if (name) {\n                                    nextDefaultValue = {\n                                        __symbolic: 'binary',\n                                        operator: '+',\n                                        left: {\n                                            __symbolic: 'select',\n                                            expression: recordEntry({ __symbolic: 'reference', name: enumName }, node), name: name\n                                        }\n                                    };\n                                }\n                                else {\n                                    nextDefaultValue =\n                                        recordEntry(errorSym('Unsupported enum member name', member.name), node);\n                                }\n                            }\n                        }\n                        catch (e_3_1) { e_3 = { error: e_3_1 }; }\n                        finally {\n                            try {\n                                if (_b && !_b.done && (_c = _a.return)) _c.call(_a);\n                            }\n                            finally { if (e_3) throw e_3.error; }\n                        }\n                        if (writtenMembers) {\n                            if (enumName) {\n                                if (!metadata)\n                                    metadata = {};\n                                metadata[enumName] = recordEntry(enumValueHolder, node);\n                            }\n                        }\n                    }\n                    break;\n                case ts.SyntaxKind.VariableStatement:\n                    var variableStatement = node;\n                    var _loop_1 = function (variableDeclaration) {\n                        if (variableDeclaration.name.kind == ts.SyntaxKind.Identifier) {\n                            var nameNode = variableDeclaration.name;\n                            var varValue = void 0;\n                            if (variableDeclaration.initializer) {\n                                varValue = evaluator.evaluateNode(variableDeclaration.initializer);\n                            }\n                            else {\n                                varValue = recordEntry(errorSym('Variable not initialized', nameNode), nameNode);\n                            }\n                            var exported = false;\n                            if (isExport(variableStatement) || isExport(variableDeclaration) ||\n                                isExportedIdentifier(nameNode)) {\n                                var name = exportedIdentifierName(nameNode);\n                                if (name) {\n                                    if (!metadata)\n                                        metadata = {};\n                                    metadata[name] = recordEntry(varValue, node);\n                                }\n                                exported = true;\n                            }\n                            if (typeof varValue == 'string' || typeof varValue == 'number' ||\n                                typeof varValue == 'boolean') {\n                                locals.define(nameNode.text, varValue);\n                                if (exported) {\n                                    locals.defineReference(nameNode.text, { __symbolic: 'reference', name: nameNode.text });\n                                }\n                            }\n                            else if (!exported) {\n                                if (varValue && !isMetadataError$1(varValue)) {\n                                    locals.define(nameNode.text, recordEntry(varValue, node));\n                                }\n                                else {\n                                    locals.define(nameNode.text, recordEntry(errorSym('Reference to a local symbol', nameNode, { name: nameNode.text }), node));\n                                }\n                            }\n                        }\n                        else {\n                            // Destructuring (or binding) declarations are not supported,\n                            // var {<identifier>[, <identifier>]+} = <expression>;\n                            //   or\n                            // var [<identifier>[, <identifier}+] = <expression>;\n                            // are not supported.\n                            var report_1 = function (nameNode) {\n                                switch (nameNode.kind) {\n                                    case ts.SyntaxKind.Identifier:\n                                        var name = nameNode;\n                                        var varValue = errorSym('Destructuring not supported', name);\n                                        locals.define(name.text, varValue);\n                                        if (isExport(node)) {\n                                            if (!metadata)\n                                                metadata = {};\n                                            metadata[name.text] = varValue;\n                                        }\n                                        break;\n                                    case ts.SyntaxKind.BindingElement:\n                                        var bindingElement = nameNode;\n                                        report_1(bindingElement.name);\n                                        break;\n                                    case ts.SyntaxKind.ObjectBindingPattern:\n                                    case ts.SyntaxKind.ArrayBindingPattern:\n                                        var bindings = nameNode;\n                                        bindings.elements.forEach(report_1);\n                                        break;\n                                }\n                            };\n                            report_1(variableDeclaration.name);\n                        }\n                    };\n                    try {\n                        for (var _d = __values(variableStatement.declarationList.declarations), _e = _d.next(); !_e.done; _e = _d.next()) {\n                            var variableDeclaration = _e.value;\n                            _loop_1(variableDeclaration);\n                        }\n                    }\n                    catch (e_4_1) { e_4 = { error: e_4_1 }; }\n                    finally {\n                        try {\n                            if (_e && !_e.done && (_f = _d.return)) _f.call(_d);\n                        }\n                        finally { if (e_4) throw e_4.error; }\n                    }\n                    break;\n            }\n            var e_3, _c, e_4, _f;\n        });\n        if (metadata || exports) {\n            if (!metadata)\n                metadata = {};\n            else if (strict) {\n                validateMetadata(sourceFile, nodeMap, metadata);\n            }\n            var result = {\n                __symbolic: 'module',\n                version: this.options.version || METADATA_VERSION, metadata: metadata\n            };\n            if (sourceFile.moduleName)\n                result.importAs = sourceFile.moduleName;\n            if (exports)\n                result.exports = exports;\n            return result;\n        }\n    };\n    return MetadataCollector;\n}());\n// This will throw if the metadata entry given contains an error node.\nfunction validateMetadata(sourceFile, nodeMap, metadata) {\n    var locals = new Set(['Array', 'Object', 'Set', 'Map', 'string', 'number', 'any']);\n    function validateExpression(expression) {\n        if (!expression) {\n            return;\n        }\n        else if (Array.isArray(expression)) {\n            expression.forEach(validateExpression);\n        }\n        else if (typeof expression === 'object' && !expression.hasOwnProperty('__symbolic')) {\n            Object.getOwnPropertyNames(expression).forEach(function (v) { return validateExpression(expression[v]); });\n        }\n        else if (isMetadataError$1(expression)) {\n            reportError(expression);\n        }\n        else if (isMetadataGlobalReferenceExpression(expression)) {\n            if (!locals.has(expression.name)) {\n                var reference = metadata[expression.name];\n                if (reference) {\n                    validateExpression(reference);\n                }\n            }\n        }\n        else if (isFunctionMetadata(expression)) {\n            validateFunction(expression);\n        }\n        else if (isMetadataSymbolicExpression(expression)) {\n            switch (expression.__symbolic) {\n                case 'binary':\n                    var binaryExpression = expression;\n                    validateExpression(binaryExpression.left);\n                    validateExpression(binaryExpression.right);\n                    break;\n                case 'call':\n                case 'new':\n                    var callExpression = expression;\n                    validateExpression(callExpression.expression);\n                    if (callExpression.arguments)\n                        callExpression.arguments.forEach(validateExpression);\n                    break;\n                case 'index':\n                    var indexExpression = expression;\n                    validateExpression(indexExpression.expression);\n                    validateExpression(indexExpression.index);\n                    break;\n                case 'pre':\n                    var prefixExpression = expression;\n                    validateExpression(prefixExpression.operand);\n                    break;\n                case 'select':\n                    var selectExpression = expression;\n                    validateExpression(selectExpression.expression);\n                    break;\n                case 'spread':\n                    var spreadExpression = expression;\n                    validateExpression(spreadExpression.expression);\n                    break;\n                case 'if':\n                    var ifExpression = expression;\n                    validateExpression(ifExpression.condition);\n                    validateExpression(ifExpression.elseExpression);\n                    validateExpression(ifExpression.thenExpression);\n                    break;\n            }\n        }\n    }\n    function validateMember(classData, member) {\n        if (member.decorators) {\n            member.decorators.forEach(validateExpression);\n        }\n        if (isMethodMetadata(member) && member.parameterDecorators) {\n            member.parameterDecorators.forEach(validateExpression);\n        }\n        // Only validate parameters of classes for which we know that are used with our DI\n        if (classData.decorators && isConstructorMetadata(member) && member.parameters) {\n            member.parameters.forEach(validateExpression);\n        }\n    }\n    function validateClass(classData) {\n        if (classData.decorators) {\n            classData.decorators.forEach(validateExpression);\n        }\n        if (classData.members) {\n            Object.getOwnPropertyNames(classData.members)\n                .forEach(function (name) { return classData.members[name].forEach(function (m) { return validateMember(classData, m); }); });\n        }\n        if (classData.statics) {\n            Object.getOwnPropertyNames(classData.statics).forEach(function (name) {\n                var staticMember = classData.statics[name];\n                if (isFunctionMetadata(staticMember)) {\n                    validateExpression(staticMember.value);\n                }\n                else {\n                    validateExpression(staticMember);\n                }\n            });\n        }\n    }\n    function validateFunction(functionDeclaration) {\n        if (functionDeclaration.value) {\n            var oldLocals = locals;\n            if (functionDeclaration.parameters) {\n                locals = new Set(oldLocals.values());\n                if (functionDeclaration.parameters)\n                    functionDeclaration.parameters.forEach(function (n) { return locals.add(n); });\n            }\n            validateExpression(functionDeclaration.value);\n            locals = oldLocals;\n        }\n    }\n    function shouldReportNode(node) {\n        if (node) {\n            var nodeStart = node.getStart();\n            return !(node.pos != nodeStart &&\n                sourceFile.text.substring(node.pos, nodeStart).indexOf('@dynamic') >= 0);\n        }\n        return true;\n    }\n    function reportError(error) {\n        var node = nodeMap.get(error);\n        if (shouldReportNode(node)) {\n            var lineInfo = error.line != undefined ?\n                error.character != undefined ? \":\" + (error.line + 1) + \":\" + (error.character + 1) :\n                    \":\" + (error.line + 1) :\n                '';\n            throw new Error(\"\" + sourceFile.fileName + lineInfo + \": Metadata collected contains an error that will be reported at runtime: \" + expandedMessage$1(error) + \".\\n  \" + JSON.stringify(error));\n        }\n    }\n    Object.getOwnPropertyNames(metadata).forEach(function (name) {\n        var entry = metadata[name];\n        try {\n            if (isClassMetadata(entry)) {\n                validateClass(entry);\n            }\n        }\n        catch (e) {\n            var node = nodeMap.get(entry);\n            if (shouldReportNode(node)) {\n                if (node) {\n                    var _a = sourceFile.getLineAndCharacterOfPosition(node.getStart()), line = _a.line, character = _a.character;\n                    throw new Error(sourceFile.fileName + \":\" + (line + 1) + \":\" + (character + 1) + \": Error encountered in metadata generated for exported symbol '\" + name + \"': \\n \" + e.message);\n                }\n                throw new Error(\"Error encountered in metadata generated for exported symbol \" + name + \": \\n \" + e.message);\n            }\n        }\n    });\n}\n// Collect parameter names from a function.\nfunction namesOf(parameters) {\n    var result = [];\n    function addNamesOf(name) {\n        if (name.kind == ts.SyntaxKind.Identifier) {\n            var identifier = name;\n            result.push(identifier.text);\n        }\n        else {\n            var bindingPattern = name;\n            try {\n                for (var _a = __values(bindingPattern.elements), _b = _a.next(); !_b.done; _b = _a.next()) {\n                    var element = _b.value;\n                    var name_3 = element.name;\n                    if (name_3) {\n                        addNamesOf(name_3);\n                    }\n                }\n            }\n            catch (e_5_1) { e_5 = { error: e_5_1 }; }\n            finally {\n                try {\n                    if (_b && !_b.done && (_c = _a.return)) _c.call(_a);\n                }\n                finally { if (e_5) throw e_5.error; }\n            }\n        }\n        var e_5, _c;\n    }\n    try {\n        for (var parameters_2 = __values(parameters), parameters_2_1 = parameters_2.next(); !parameters_2_1.done; parameters_2_1 = parameters_2.next()) {\n            var parameter = parameters_2_1.value;\n            addNamesOf(parameter.name);\n        }\n    }\n    catch (e_6_1) { e_6 = { error: e_6_1 }; }\n    finally {\n        try {\n            if (parameters_2_1 && !parameters_2_1.done && (_a = parameters_2.return)) _a.call(parameters_2);\n        }\n        finally { if (e_6) throw e_6.error; }\n    }\n    return result;\n    var e_6, _a;\n}\nfunction expandedMessage$1(error) {\n    switch (error.message) {\n        case 'Reference to non-exported class':\n            if (error.context && error.context.className) {\n                return \"Reference to a non-exported class \" + error.context.className + \". Consider exporting the class\";\n            }\n            break;\n        case 'Variable not initialized':\n            return 'Only initialized variables and constants can be referenced because the value of this variable is needed by the template compiler';\n        case 'Destructuring not supported':\n            return 'Referencing an exported destructured variable or constant is not supported by the template compiler. Consider simplifying this to avoid destructuring';\n        case 'Could not resolve type':\n            if (error.context && error.context.typeName) {\n                return \"Could not resolve type \" + error.context.typeName;\n            }\n            break;\n        case 'Function call not supported':\n            var prefix = error.context && error.context.name ? \"Calling function '\" + error.context.name + \"', f\" : 'F';\n            return prefix +\n                'unction calls are not supported. Consider replacing the function or lambda with a reference to an exported function';\n        case 'Reference to a local symbol':\n            if (error.context && error.context.name) {\n                return \"Reference to a local (non-exported) symbol '\" + error.context.name + \"'. Consider exporting the symbol\";\n            }\n    }\n    return error.message;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n\n\n\n\nvar EmitFlags;\n(function (EmitFlags) {\n    EmitFlags[EmitFlags[\"DTS\"] = 1] = \"DTS\";\n    EmitFlags[EmitFlags[\"JS\"] = 2] = \"JS\";\n    EmitFlags[EmitFlags[\"Metadata\"] = 4] = \"Metadata\";\n    EmitFlags[EmitFlags[\"I18nBundle\"] = 8] = \"I18nBundle\";\n    EmitFlags[EmitFlags[\"Codegen\"] = 16] = \"Codegen\";\n    EmitFlags[EmitFlags[\"Default\"] = 19] = \"Default\";\n    EmitFlags[EmitFlags[\"All\"] = 31] = \"All\";\n})(EmitFlags || (EmitFlags = {}));\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nvar DTS$2 = /\\.d\\.ts$/;\n\n// Note: This is an internal property in TypeScript. Use it only for assertions and tests.\n\n\n\n\n\n\n/**\n * Converts a ng.Diagnostic into a ts.Diagnostic.\n * This looses some information, and also uses an incomplete object as `file`.\n *\n * I.e. only use this where the API allows only a ts.Diagnostic.\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nfunction createMetadataReaderCache() {\n    var data = new Map();\n    return { data: data };\n}\nfunction readMetadata(filePath, host, cache) {\n    var metadatas = cache && cache.data.get(filePath);\n    if (metadatas) {\n        return metadatas;\n    }\n    if (host.fileExists(filePath)) {\n        // If the file doesn't exists then we cannot return metadata for the file.\n        // This will occur if the user referenced a declared module for which no file\n        // exists for the module (i.e. jQuery or angularjs).\n        if (DTS$2.test(filePath)) {\n            metadatas = readMetadataFile(host, filePath);\n            if (!metadatas) {\n                // If there is a .d.ts file but no metadata file we need to produce a\n                // metadata from the .d.ts file as metadata files capture reexports\n                // (starting with v3).\n                metadatas = [upgradeMetadataWithDtsData(host, { '__symbolic': 'module', 'version': 1, 'metadata': {} }, filePath)];\n            }\n        }\n        else {\n            var metadata = host.getSourceFileMetadata(filePath);\n            metadatas = metadata ? [metadata] : [];\n        }\n    }\n    if (cache && (!host.cacheMetadata || host.cacheMetadata(filePath))) {\n        cache.data.set(filePath, metadatas);\n    }\n    return metadatas;\n}\nfunction readMetadataFile(host, dtsFilePath) {\n    var metadataPath = dtsFilePath.replace(DTS$2, '.metadata.json');\n    if (!host.fileExists(metadataPath)) {\n        return undefined;\n    }\n    try {\n        var metadataOrMetadatas = JSON.parse(host.readFile(metadataPath));\n        var metadatas = metadataOrMetadatas ?\n            (Array.isArray(metadataOrMetadatas) ? metadataOrMetadatas : [metadataOrMetadatas]) :\n            [];\n        if (metadatas.length) {\n            var maxMetadata = metadatas.reduce(function (p, c) { return p.version > c.version ? p : c; });\n            if (maxMetadata.version < METADATA_VERSION) {\n                metadatas.push(upgradeMetadataWithDtsData(host, maxMetadata, dtsFilePath));\n            }\n        }\n        return metadatas;\n    }\n    catch (e) {\n        console.error(\"Failed to read JSON file \" + metadataPath);\n        throw e;\n    }\n}\nfunction upgradeMetadataWithDtsData(host, oldMetadata, dtsFilePath) {\n    // patch v1 to v3 by adding exports and the `extends` clause.\n    // patch v3 to v4 by adding `interface` symbols for TypeAlias\n    var newMetadata = {\n        '__symbolic': 'module',\n        'version': METADATA_VERSION,\n        'metadata': __assign({}, oldMetadata.metadata),\n    };\n    if (oldMetadata.exports) {\n        newMetadata.exports = oldMetadata.exports;\n    }\n    if (oldMetadata.importAs) {\n        newMetadata.importAs = oldMetadata.importAs;\n    }\n    if (oldMetadata.origins) {\n        newMetadata.origins = oldMetadata.origins;\n    }\n    var dtsMetadata = host.getSourceFileMetadata(dtsFilePath);\n    if (dtsMetadata) {\n        for (var prop in dtsMetadata.metadata) {\n            if (!newMetadata.metadata[prop]) {\n                newMetadata.metadata[prop] = dtsMetadata.metadata[prop];\n            }\n        }\n        if (dtsMetadata['importAs'])\n            newMetadata['importAs'] = dtsMetadata['importAs'];\n        // Only copy exports from exports from metadata prior to version 3.\n        // Starting with version 3 the collector began collecting exports and\n        // this should be redundant. Also, with bundler will rewrite the exports\n        // which will hoist the exports from modules referenced indirectly causing\n        // the imports to be different than the .d.ts files and using the .d.ts file\n        // exports would cause the StaticSymbolResolver to redirect symbols to the\n        // incorrect location.\n        if ((!oldMetadata.version || oldMetadata.version < 3) && dtsMetadata.exports) {\n            newMetadata.exports = dtsMetadata.exports;\n        }\n    }\n    return newMetadata;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/*\n\nThe API from compiler-cli that language-service can see.\nIt is important that none the exported modules require anything other than\nAngular modules and Typescript as this will indirectly add a dependency\nto the language service.\n\n*/\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * The kind of diagnostic message.\n *\n * @experimental\n */\nvar DiagnosticKind$1;\n(function (DiagnosticKind) {\n    DiagnosticKind[DiagnosticKind[\"Error\"] = 0] = \"Error\";\n    DiagnosticKind[DiagnosticKind[\"Warning\"] = 1] = \"Warning\";\n})(DiagnosticKind$1 || (DiagnosticKind$1 = {}));\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nfunction isParseSourceSpan(value) {\n    return value && !!value.start;\n}\nfunction spanOf$3(span) {\n    if (!span)\n        return undefined;\n    if (isParseSourceSpan(span)) {\n        return { start: span.start.offset, end: span.end.offset };\n    }\n    else {\n        if (span.endSourceSpan) {\n            return { start: span.sourceSpan.start.offset, end: span.endSourceSpan.end.offset };\n        }\n        else if (span.children && span.children.length) {\n            return {\n                start: span.sourceSpan.start.offset,\n                end: spanOf$3(span.children[span.children.length - 1]).end\n            };\n        }\n        return { start: span.sourceSpan.start.offset, end: span.sourceSpan.end.offset };\n    }\n}\nfunction inSpan(position, span, exclusive) {\n    return span != null && (exclusive ? position >= span.start && position < span.end :\n        position >= span.start && position <= span.end);\n}\nfunction offsetSpan$1(span, amount) {\n    return { start: span.start + amount, end: span.end + amount };\n}\nfunction isNarrower(spanA, spanB) {\n    return spanA.start >= spanB.start && spanA.end <= spanB.end;\n}\nfunction hasTemplateReference$1(type) {\n    if (type.diDeps) {\n        try {\n            for (var _a = __values(type.diDeps), _b = _a.next(); !_b.done; _b = _a.next()) {\n                var diDep = _b.value;\n                if (diDep.token && diDep.token.identifier &&\n                    identifierName(diDep.token.identifier) == 'TemplateRef')\n                    return true;\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (_b && !_b.done && (_c = _a.return)) _c.call(_a);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n    }\n    return false;\n    var e_1, _c;\n}\nfunction getSelectors(info) {\n    var map = new Map();\n    var selectors = flatten$1(info.directives.map(function (directive) {\n        var selectors = CssSelector.parse(directive.selector);\n        selectors.forEach(function (selector) { return map.set(selector, directive); });\n        return selectors;\n    }));\n    return { selectors: selectors, map: map };\n}\nfunction flatten$1(a) {\n    return (_a = []).concat.apply(_a, __spread(a));\n    var _a;\n}\nfunction removeSuffix(value, suffix) {\n    if (value.endsWith(suffix))\n        return value.substring(0, value.length - suffix.length);\n    return value;\n}\nfunction uniqueByName(elements) {\n    if (elements) {\n        var result = [];\n        var set = new Set();\n        try {\n            for (var elements_1 = __values(elements), elements_1_1 = elements_1.next(); !elements_1_1.done; elements_1_1 = elements_1.next()) {\n                var element = elements_1_1.value;\n                if (!set.has(element.name)) {\n                    set.add(element.name);\n                    result.push(element);\n                }\n            }\n        }\n        catch (e_2_1) { e_2 = { error: e_2_1 }; }\n        finally {\n            try {\n                if (elements_1_1 && !elements_1_1.done && (_a = elements_1.return)) _a.call(elements_1);\n            }\n            finally { if (e_2) throw e_2.error; }\n        }\n        return result;\n    }\n    var e_2, _a;\n}\n\nfunction diagnosticInfoFromTemplateInfo(info) {\n    return {\n        fileName: info.fileName,\n        offset: info.template.span.start,\n        query: info.template.query,\n        members: info.template.members,\n        htmlAst: info.htmlAst,\n        templateAst: info.templateAst\n    };\n}\nfunction findTemplateAstAt(ast, position, allowWidening) {\n    if (allowWidening === void 0) { allowWidening = false; }\n    var path$$1 = [];\n    var visitor = new /** @class */ (function (_super) {\n        __extends(class_1, _super);\n        function class_1() {\n            return _super !== null && _super.apply(this, arguments) || this;\n        }\n        class_1.prototype.visit = function (ast, context) {\n            var span = spanOf$3(ast);\n            if (inSpan(position, span)) {\n                var len = path$$1.length;\n                if (!len || allowWidening || isNarrower(span, spanOf$3(path$$1[len - 1]))) {\n                    path$$1.push(ast);\n                }\n            }\n            else {\n                // Returning a value here will result in the children being skipped.\n                return true;\n            }\n        };\n        class_1.prototype.visitEmbeddedTemplate = function (ast, context) {\n            return this.visitChildren(context, function (visit) {\n                // Ignore reference, variable and providers\n                visit(ast.attrs);\n                visit(ast.directives);\n                visit(ast.children);\n            });\n        };\n        class_1.prototype.visitElement = function (ast, context) {\n            return this.visitChildren(context, function (visit) {\n                // Ingnore providers\n                visit(ast.attrs);\n                visit(ast.inputs);\n                visit(ast.outputs);\n                visit(ast.references);\n                visit(ast.directives);\n                visit(ast.children);\n            });\n        };\n        class_1.prototype.visitDirective = function (ast, context) {\n            // Ignore the host properties of a directive\n            var result = this.visitChildren(context, function (visit) { visit(ast.inputs); });\n            // We never care about the diretive itself, just its inputs.\n            if (path$$1[path$$1.length - 1] == ast) {\n                path$$1.pop();\n            }\n            return result;\n        };\n        return class_1;\n    }(RecursiveTemplateAstVisitor));\n    templateVisitAll(visitor, ast);\n    return new AstPath(path$$1, position);\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nfunction findAstAt(ast, position, excludeEmpty) {\n    if (excludeEmpty === void 0) { excludeEmpty = false; }\n    var path$$1 = [];\n    var visitor = new /** @class */ (function (_super) {\n        __extends(class_1, _super);\n        function class_1() {\n            return _super !== null && _super.apply(this, arguments) || this;\n        }\n        class_1.prototype.visit = function (ast) {\n            if ((!excludeEmpty || ast.span.start < ast.span.end) && inSpan(position, ast.span)) {\n                path$$1.push(ast);\n                visitAstChildren(ast, this);\n            }\n        };\n        return class_1;\n    }(NullAstVisitor));\n    // We never care about the ASTWithSource node and its visit() method calls its ast's visit so\n    // the visit() method above would never see it.\n    if (ast instanceof ASTWithSource) {\n        ast = ast.ast;\n    }\n    visitor.visit(ast);\n    return new AstPath(path$$1, position);\n}\nfunction getExpressionCompletions(scope, ast, position, query) {\n    var path$$1 = findAstAt(ast, position);\n    if (path$$1.empty)\n        return undefined;\n    var tail = path$$1.tail;\n    var result = scope;\n    function getType(ast) { return new AstType(scope, query, {}).getType(ast); }\n    // If the completion request is in a not in a pipe or property access then the global scope\n    // (that is the scope of the implicit receiver) is the right scope as the user is typing the\n    // beginning of an expression.\n    tail.visit({\n        visitBinary: function (ast) { },\n        visitChain: function (ast) { },\n        visitConditional: function (ast) { },\n        visitFunctionCall: function (ast) { },\n        visitImplicitReceiver: function (ast) { },\n        visitInterpolation: function (ast) { result = undefined; },\n        visitKeyedRead: function (ast) { },\n        visitKeyedWrite: function (ast) { },\n        visitLiteralArray: function (ast) { },\n        visitLiteralMap: function (ast) { },\n        visitLiteralPrimitive: function (ast) { },\n        visitMethodCall: function (ast) { },\n        visitPipe: function (ast) {\n            if (position >= ast.exp.span.end &&\n                (!ast.args || !ast.args.length || position < ast.args[0].span.start)) {\n                // We are in a position a pipe name is expected.\n                result = query.getPipes();\n            }\n        },\n        visitPrefixNot: function (ast) { },\n        visitNonNullAssert: function (ast) { },\n        visitPropertyRead: function (ast) {\n            var receiverType = getType(ast.receiver);\n            result = receiverType ? receiverType.members() : scope;\n        },\n        visitPropertyWrite: function (ast) {\n            var receiverType = getType(ast.receiver);\n            result = receiverType ? receiverType.members() : scope;\n        },\n        visitQuote: function (ast) {\n            // For a quote, return the members of any (if there are any).\n            result = query.getBuiltinType(BuiltinType$1.Any).members();\n        },\n        visitSafeMethodCall: function (ast) {\n            var receiverType = getType(ast.receiver);\n            result = receiverType ? receiverType.members() : scope;\n        },\n        visitSafePropertyRead: function (ast) {\n            var receiverType = getType(ast.receiver);\n            result = receiverType ? receiverType.members() : scope;\n        },\n    });\n    return result && result.values();\n}\nfunction getExpressionSymbol(scope, ast, position, query) {\n    var path$$1 = findAstAt(ast, position, /* excludeEmpty */ true);\n    if (path$$1.empty)\n        return undefined;\n    var tail = path$$1.tail;\n    function getType(ast) { return new AstType(scope, query, {}).getType(ast); }\n    var symbol = undefined;\n    var span = undefined;\n    // If the completion request is in a not in a pipe or property access then the global scope\n    // (that is the scope of the implicit receiver) is the right scope as the user is typing the\n    // beginning of an expression.\n    tail.visit({\n        visitBinary: function (ast) { },\n        visitChain: function (ast) { },\n        visitConditional: function (ast) { },\n        visitFunctionCall: function (ast) { },\n        visitImplicitReceiver: function (ast) { },\n        visitInterpolation: function (ast) { },\n        visitKeyedRead: function (ast) { },\n        visitKeyedWrite: function (ast) { },\n        visitLiteralArray: function (ast) { },\n        visitLiteralMap: function (ast) { },\n        visitLiteralPrimitive: function (ast) { },\n        visitMethodCall: function (ast) {\n            var receiverType = getType(ast.receiver);\n            symbol = receiverType && receiverType.members().get(ast.name);\n            span = ast.span;\n        },\n        visitPipe: function (ast) {\n            if (position >= ast.exp.span.end &&\n                (!ast.args || !ast.args.length || position < ast.args[0].span.start)) {\n                // We are in a position a pipe name is expected.\n                var pipes = query.getPipes();\n                if (pipes) {\n                    symbol = pipes.get(ast.name);\n                    span = ast.span;\n                }\n            }\n        },\n        visitPrefixNot: function (ast) { },\n        visitNonNullAssert: function (ast) { },\n        visitPropertyRead: function (ast) {\n            var receiverType = getType(ast.receiver);\n            symbol = receiverType && receiverType.members().get(ast.name);\n            span = ast.span;\n        },\n        visitPropertyWrite: function (ast) {\n            var receiverType = getType(ast.receiver);\n            symbol = receiverType && receiverType.members().get(ast.name);\n            span = ast.span;\n        },\n        visitQuote: function (ast) { },\n        visitSafeMethodCall: function (ast) {\n            var receiverType = getType(ast.receiver);\n            symbol = receiverType && receiverType.members().get(ast.name);\n            span = ast.span;\n        },\n        visitSafePropertyRead: function (ast) {\n            var receiverType = getType(ast.receiver);\n            symbol = receiverType && receiverType.members().get(ast.name);\n            span = ast.span;\n        },\n    });\n    if (symbol && span) {\n        return { symbol: symbol, span: span };\n    }\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar values = [\n    'ID',\n    'CDATA',\n    'NAME',\n    ['ltr', 'rtl'],\n    ['rect', 'circle', 'poly', 'default'],\n    'NUMBER',\n    ['nohref'],\n    ['ismap'],\n    ['declare'],\n    ['DATA', 'REF', 'OBJECT'],\n    ['GET', 'POST'],\n    'IDREF',\n    ['TEXT', 'PASSWORD', 'CHECKBOX', 'RADIO', 'SUBMIT', 'RESET', 'FILE', 'HIDDEN', 'IMAGE', 'BUTTON'],\n    ['checked'],\n    ['disabled'],\n    ['readonly'],\n    ['multiple'],\n    ['selected'],\n    ['button', 'submit', 'reset'],\n    ['void', 'above', 'below', 'hsides', 'lhs', 'rhs', 'vsides', 'box', 'border'],\n    ['none', 'groups', 'rows', 'cols', 'all'],\n    ['left', 'center', 'right', 'justify', 'char'],\n    ['top', 'middle', 'bottom', 'baseline'],\n    'IDREFS',\n    ['row', 'col', 'rowgroup', 'colgroup'],\n    ['defer']\n];\nvar groups = [\n    { id: 0 },\n    {\n        onclick: 1,\n        ondblclick: 1,\n        onmousedown: 1,\n        onmouseup: 1,\n        onmouseover: 1,\n        onmousemove: 1,\n        onmouseout: 1,\n        onkeypress: 1,\n        onkeydown: 1,\n        onkeyup: 1\n    },\n    { lang: 2, dir: 3 },\n    { onload: 1, onunload: 1 },\n    { name: 1 },\n    { href: 1 },\n    { type: 1 },\n    { alt: 1 },\n    { tabindex: 5 },\n    { media: 1 },\n    { nohref: 6 },\n    { usemap: 1 },\n    { src: 1 },\n    { onfocus: 1, onblur: 1 },\n    { charset: 1 },\n    { declare: 8, classid: 1, codebase: 1, data: 1, codetype: 1, archive: 1, standby: 1 },\n    { title: 1 },\n    { value: 1 },\n    { cite: 1 },\n    { datetime: 1 },\n    { accept: 1 },\n    { shape: 4, coords: 1 },\n    { for: 11\n    },\n    { action: 1, method: 10, enctype: 1, onsubmit: 1, onreset: 1, 'accept-charset': 1 },\n    { valuetype: 9 },\n    { longdesc: 1 },\n    { width: 1 },\n    { disabled: 14 },\n    { readonly: 15, onselect: 1 },\n    { accesskey: 1 },\n    { size: 5, multiple: 16 },\n    { onchange: 1 },\n    { label: 1 },\n    { selected: 17 },\n    { type: 12, checked: 13, size: 1, maxlength: 5 },\n    { rows: 5, cols: 5 },\n    { type: 18 },\n    { height: 1 },\n    { summary: 1, border: 1, frame: 19, rules: 20, cellspacing: 1, cellpadding: 1, datapagesize: 1 },\n    { align: 21, char: 1, charoff: 1, valign: 22 },\n    { span: 5 },\n    { abbr: 1, axis: 1, headers: 23, scope: 24, rowspan: 5, colspan: 5 },\n    { profile: 1 },\n    { 'http-equiv': 2, name: 2, content: 1, scheme: 1 },\n    { class: 1, style: 1 },\n    { hreflang: 2, rel: 1, rev: 1 },\n    { ismap: 7 },\n    { defer: 25, event: 1, for: 1 }\n];\nvar elements = {\n    TT: [0, 1, 2, 16, 44],\n    I: [0, 1, 2, 16, 44],\n    B: [0, 1, 2, 16, 44],\n    BIG: [0, 1, 2, 16, 44],\n    SMALL: [0, 1, 2, 16, 44],\n    EM: [0, 1, 2, 16, 44],\n    STRONG: [0, 1, 2, 16, 44],\n    DFN: [0, 1, 2, 16, 44],\n    CODE: [0, 1, 2, 16, 44],\n    SAMP: [0, 1, 2, 16, 44],\n    KBD: [0, 1, 2, 16, 44],\n    VAR: [0, 1, 2, 16, 44],\n    CITE: [0, 1, 2, 16, 44],\n    ABBR: [0, 1, 2, 16, 44],\n    ACRONYM: [0, 1, 2, 16, 44],\n    SUB: [0, 1, 2, 16, 44],\n    SUP: [0, 1, 2, 16, 44],\n    SPAN: [0, 1, 2, 16, 44],\n    BDO: [0, 2, 16, 44],\n    BR: [0, 16, 44],\n    BODY: [0, 1, 2, 3, 16, 44],\n    ADDRESS: [0, 1, 2, 16, 44],\n    DIV: [0, 1, 2, 16, 44],\n    A: [0, 1, 2, 4, 5, 6, 8, 13, 14, 16, 21, 29, 44, 45],\n    MAP: [0, 1, 2, 4, 16, 44],\n    AREA: [0, 1, 2, 5, 7, 8, 10, 13, 16, 21, 29, 44],\n    LINK: [0, 1, 2, 5, 6, 9, 14, 16, 44, 45],\n    IMG: [0, 1, 2, 4, 7, 11, 12, 16, 25, 26, 37, 44, 46],\n    OBJECT: [0, 1, 2, 4, 6, 8, 11, 15, 16, 26, 37, 44],\n    PARAM: [0, 4, 6, 17, 24],\n    HR: [0, 1, 2, 16, 44],\n    P: [0, 1, 2, 16, 44],\n    H1: [0, 1, 2, 16, 44],\n    H2: [0, 1, 2, 16, 44],\n    H3: [0, 1, 2, 16, 44],\n    H4: [0, 1, 2, 16, 44],\n    H5: [0, 1, 2, 16, 44],\n    H6: [0, 1, 2, 16, 44],\n    PRE: [0, 1, 2, 16, 44],\n    Q: [0, 1, 2, 16, 18, 44],\n    BLOCKQUOTE: [0, 1, 2, 16, 18, 44],\n    INS: [0, 1, 2, 16, 18, 19, 44],\n    DEL: [0, 1, 2, 16, 18, 19, 44],\n    DL: [0, 1, 2, 16, 44],\n    DT: [0, 1, 2, 16, 44],\n    DD: [0, 1, 2, 16, 44],\n    OL: [0, 1, 2, 16, 44],\n    UL: [0, 1, 2, 16, 44],\n    LI: [0, 1, 2, 16, 44],\n    FORM: [0, 1, 2, 4, 16, 20, 23, 44],\n    LABEL: [0, 1, 2, 13, 16, 22, 29, 44],\n    INPUT: [0, 1, 2, 4, 7, 8, 11, 12, 13, 16, 17, 20, 27, 28, 29, 31, 34, 44, 46],\n    SELECT: [0, 1, 2, 4, 8, 13, 16, 27, 30, 31, 44],\n    OPTGROUP: [0, 1, 2, 16, 27, 32, 44],\n    OPTION: [0, 1, 2, 16, 17, 27, 32, 33, 44],\n    TEXTAREA: [0, 1, 2, 4, 8, 13, 16, 27, 28, 29, 31, 35, 44],\n    FIELDSET: [0, 1, 2, 16, 44],\n    LEGEND: [0, 1, 2, 16, 29, 44],\n    BUTTON: [0, 1, 2, 4, 8, 13, 16, 17, 27, 29, 36, 44],\n    TABLE: [0, 1, 2, 16, 26, 38, 44],\n    CAPTION: [0, 1, 2, 16, 44],\n    COLGROUP: [0, 1, 2, 16, 26, 39, 40, 44],\n    COL: [0, 1, 2, 16, 26, 39, 40, 44],\n    THEAD: [0, 1, 2, 16, 39, 44],\n    TBODY: [0, 1, 2, 16, 39, 44],\n    TFOOT: [0, 1, 2, 16, 39, 44],\n    TR: [0, 1, 2, 16, 39, 44],\n    TH: [0, 1, 2, 16, 39, 41, 44],\n    TD: [0, 1, 2, 16, 39, 41, 44],\n    HEAD: [2, 42],\n    TITLE: [2],\n    BASE: [5],\n    META: [2, 43],\n    STYLE: [2, 6, 9, 16],\n    SCRIPT: [6, 12, 14, 47],\n    NOSCRIPT: [0, 1, 2, 16, 44],\n    HTML: [2]\n};\nvar defaultAttributes = [0, 1, 2, 4];\nfunction elementNames() {\n    return Object.keys(elements).sort().map(function (v) { return v.toLowerCase(); });\n}\nfunction compose(indexes) {\n    var result = {};\n    if (indexes) {\n        try {\n            for (var indexes_1 = __values(indexes), indexes_1_1 = indexes_1.next(); !indexes_1_1.done; indexes_1_1 = indexes_1.next()) {\n                var index = indexes_1_1.value;\n                var group = groups[index];\n                for (var name_1 in group)\n                    if (group.hasOwnProperty(name_1))\n                        result[name_1] = values[group[name_1]];\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (indexes_1_1 && !indexes_1_1.done && (_a = indexes_1.return)) _a.call(indexes_1);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n    }\n    return result;\n    var e_1, _a;\n}\nfunction attributeNames(element) {\n    return Object.keys(compose(elements[element.toUpperCase()] || defaultAttributes)).sort();\n}\n\n// This section is describes the DOM property surface of a DOM element and is derivgulp formated\n// from\n// from the SCHEMA strings from the security context information. SCHEMA is copied here because\n// it would be an unnecessary risk to allow this array to be imported from the security context\n// schema registry.\nvar SCHEMA$1 = [\n    '[Element]|textContent,%classList,className,id,innerHTML,*beforecopy,*beforecut,*beforepaste,*copy,*cut,*paste,*search,*selectstart,*webkitfullscreenchange,*webkitfullscreenerror,*wheel,outerHTML,#scrollLeft,#scrollTop,slot' +\n        /* added manually to avoid breaking changes */\n        ',*message,*mozfullscreenchange,*mozfullscreenerror,*mozpointerlockchange,*mozpointerlockerror,*webglcontextcreationerror,*webglcontextlost,*webglcontextrestored',\n    '[HTMLElement]^[Element]|accessKey,contentEditable,dir,!draggable,!hidden,innerText,lang,*abort,*auxclick,*blur,*cancel,*canplay,*canplaythrough,*change,*click,*close,*contextmenu,*cuechange,*dblclick,*drag,*dragend,*dragenter,*dragleave,*dragover,*dragstart,*drop,*durationchange,*emptied,*ended,*error,*focus,*gotpointercapture,*input,*invalid,*keydown,*keypress,*keyup,*load,*loadeddata,*loadedmetadata,*loadstart,*lostpointercapture,*mousedown,*mouseenter,*mouseleave,*mousemove,*mouseout,*mouseover,*mouseup,*mousewheel,*pause,*play,*playing,*pointercancel,*pointerdown,*pointerenter,*pointerleave,*pointermove,*pointerout,*pointerover,*pointerup,*progress,*ratechange,*reset,*resize,*scroll,*seeked,*seeking,*select,*show,*stalled,*submit,*suspend,*timeupdate,*toggle,*volumechange,*waiting,outerText,!spellcheck,%style,#tabIndex,title,!translate',\n    'abbr,address,article,aside,b,bdi,bdo,cite,code,dd,dfn,dt,em,figcaption,figure,footer,header,i,kbd,main,mark,nav,noscript,rb,rp,rt,rtc,ruby,s,samp,section,small,strong,sub,sup,u,var,wbr^[HTMLElement]|accessKey,contentEditable,dir,!draggable,!hidden,innerText,lang,*abort,*auxclick,*blur,*cancel,*canplay,*canplaythrough,*change,*click,*close,*contextmenu,*cuechange,*dblclick,*drag,*dragend,*dragenter,*dragleave,*dragover,*dragstart,*drop,*durationchange,*emptied,*ended,*error,*focus,*gotpointercapture,*input,*invalid,*keydown,*keypress,*keyup,*load,*loadeddata,*loadedmetadata,*loadstart,*lostpointercapture,*mousedown,*mouseenter,*mouseleave,*mousemove,*mouseout,*mouseover,*mouseup,*mousewheel,*pause,*play,*playing,*pointercancel,*pointerdown,*pointerenter,*pointerleave,*pointermove,*pointerout,*pointerover,*pointerup,*progress,*ratechange,*reset,*resize,*scroll,*seeked,*seeking,*select,*show,*stalled,*submit,*suspend,*timeupdate,*toggle,*volumechange,*waiting,outerText,!spellcheck,%style,#tabIndex,title,!translate',\n    'media^[HTMLElement]|!autoplay,!controls,%controlsList,%crossOrigin,#currentTime,!defaultMuted,#defaultPlaybackRate,!disableRemotePlayback,!loop,!muted,*encrypted,*waitingforkey,#playbackRate,preload,src,%srcObject,#volume',\n    ':svg:^[HTMLElement]|*abort,*auxclick,*blur,*cancel,*canplay,*canplaythrough,*change,*click,*close,*contextmenu,*cuechange,*dblclick,*drag,*dragend,*dragenter,*dragleave,*dragover,*dragstart,*drop,*durationchange,*emptied,*ended,*error,*focus,*gotpointercapture,*input,*invalid,*keydown,*keypress,*keyup,*load,*loadeddata,*loadedmetadata,*loadstart,*lostpointercapture,*mousedown,*mouseenter,*mouseleave,*mousemove,*mouseout,*mouseover,*mouseup,*mousewheel,*pause,*play,*playing,*pointercancel,*pointerdown,*pointerenter,*pointerleave,*pointermove,*pointerout,*pointerover,*pointerup,*progress,*ratechange,*reset,*resize,*scroll,*seeked,*seeking,*select,*show,*stalled,*submit,*suspend,*timeupdate,*toggle,*volumechange,*waiting,%style,#tabIndex',\n    ':svg:graphics^:svg:|',\n    ':svg:animation^:svg:|*begin,*end,*repeat',\n    ':svg:geometry^:svg:|',\n    ':svg:componentTransferFunction^:svg:|',\n    ':svg:gradient^:svg:|',\n    ':svg:textContent^:svg:graphics|',\n    ':svg:textPositioning^:svg:textContent|',\n    'a^[HTMLElement]|charset,coords,download,hash,host,hostname,href,hreflang,name,password,pathname,ping,port,protocol,referrerPolicy,rel,rev,search,shape,target,text,type,username',\n    'area^[HTMLElement]|alt,coords,download,hash,host,hostname,href,!noHref,password,pathname,ping,port,protocol,referrerPolicy,rel,search,shape,target,username',\n    'audio^media|',\n    'br^[HTMLElement]|clear',\n    'base^[HTMLElement]|href,target',\n    'body^[HTMLElement]|aLink,background,bgColor,link,*beforeunload,*blur,*error,*focus,*hashchange,*languagechange,*load,*message,*offline,*online,*pagehide,*pageshow,*popstate,*rejectionhandled,*resize,*scroll,*storage,*unhandledrejection,*unload,text,vLink',\n    'button^[HTMLElement]|!autofocus,!disabled,formAction,formEnctype,formMethod,!formNoValidate,formTarget,name,type,value',\n    'canvas^[HTMLElement]|#height,#width',\n    'content^[HTMLElement]|select',\n    'dl^[HTMLElement]|!compact',\n    'datalist^[HTMLElement]|',\n    'details^[HTMLElement]|!open',\n    'dialog^[HTMLElement]|!open,returnValue',\n    'dir^[HTMLElement]|!compact',\n    'div^[HTMLElement]|align',\n    'embed^[HTMLElement]|align,height,name,src,type,width',\n    'fieldset^[HTMLElement]|!disabled,name',\n    'font^[HTMLElement]|color,face,size',\n    'form^[HTMLElement]|acceptCharset,action,autocomplete,encoding,enctype,method,name,!noValidate,target',\n    'frame^[HTMLElement]|frameBorder,longDesc,marginHeight,marginWidth,name,!noResize,scrolling,src',\n    'frameset^[HTMLElement]|cols,*beforeunload,*blur,*error,*focus,*hashchange,*languagechange,*load,*message,*offline,*online,*pagehide,*pageshow,*popstate,*rejectionhandled,*resize,*scroll,*storage,*unhandledrejection,*unload,rows',\n    'hr^[HTMLElement]|align,color,!noShade,size,width',\n    'head^[HTMLElement]|',\n    'h1,h2,h3,h4,h5,h6^[HTMLElement]|align',\n    'html^[HTMLElement]|version',\n    'iframe^[HTMLElement]|align,!allowFullscreen,frameBorder,height,longDesc,marginHeight,marginWidth,name,referrerPolicy,%sandbox,scrolling,src,srcdoc,width',\n    'img^[HTMLElement]|align,alt,border,%crossOrigin,#height,#hspace,!isMap,longDesc,lowsrc,name,referrerPolicy,sizes,src,srcset,useMap,#vspace,#width',\n    'input^[HTMLElement]|accept,align,alt,autocapitalize,autocomplete,!autofocus,!checked,!defaultChecked,defaultValue,dirName,!disabled,%files,formAction,formEnctype,formMethod,!formNoValidate,formTarget,#height,!incremental,!indeterminate,max,#maxLength,min,#minLength,!multiple,name,pattern,placeholder,!readOnly,!required,selectionDirection,#selectionEnd,#selectionStart,#size,src,step,type,useMap,value,%valueAsDate,#valueAsNumber,#width',\n    'li^[HTMLElement]|type,#value',\n    'label^[HTMLElement]|htmlFor',\n    'legend^[HTMLElement]|align',\n    'link^[HTMLElement]|as,charset,%crossOrigin,!disabled,href,hreflang,integrity,media,referrerPolicy,rel,%relList,rev,%sizes,target,type',\n    'map^[HTMLElement]|name',\n    'marquee^[HTMLElement]|behavior,bgColor,direction,height,#hspace,#loop,#scrollAmount,#scrollDelay,!trueSpeed,#vspace,width',\n    'menu^[HTMLElement]|!compact',\n    'meta^[HTMLElement]|content,httpEquiv,name,scheme',\n    'meter^[HTMLElement]|#high,#low,#max,#min,#optimum,#value',\n    'ins,del^[HTMLElement]|cite,dateTime',\n    'ol^[HTMLElement]|!compact,!reversed,#start,type',\n    'object^[HTMLElement]|align,archive,border,code,codeBase,codeType,data,!declare,height,#hspace,name,standby,type,useMap,#vspace,width',\n    'optgroup^[HTMLElement]|!disabled,label',\n    'option^[HTMLElement]|!defaultSelected,!disabled,label,!selected,text,value',\n    'output^[HTMLElement]|defaultValue,%htmlFor,name,value',\n    'p^[HTMLElement]|align',\n    'param^[HTMLElement]|name,type,value,valueType',\n    'picture^[HTMLElement]|',\n    'pre^[HTMLElement]|#width',\n    'progress^[HTMLElement]|#max,#value',\n    'q,blockquote,cite^[HTMLElement]|',\n    'script^[HTMLElement]|!async,charset,%crossOrigin,!defer,event,htmlFor,integrity,src,text,type',\n    'select^[HTMLElement]|!autofocus,!disabled,#length,!multiple,name,!required,#selectedIndex,#size,value',\n    'shadow^[HTMLElement]|',\n    'slot^[HTMLElement]|name',\n    'source^[HTMLElement]|media,sizes,src,srcset,type',\n    'span^[HTMLElement]|',\n    'style^[HTMLElement]|!disabled,media,type',\n    'caption^[HTMLElement]|align',\n    'th,td^[HTMLElement]|abbr,align,axis,bgColor,ch,chOff,#colSpan,headers,height,!noWrap,#rowSpan,scope,vAlign,width',\n    'col,colgroup^[HTMLElement]|align,ch,chOff,#span,vAlign,width',\n    'table^[HTMLElement]|align,bgColor,border,%caption,cellPadding,cellSpacing,frame,rules,summary,%tFoot,%tHead,width',\n    'tr^[HTMLElement]|align,bgColor,ch,chOff,vAlign',\n    'tfoot,thead,tbody^[HTMLElement]|align,ch,chOff,vAlign',\n    'template^[HTMLElement]|',\n    'textarea^[HTMLElement]|autocapitalize,!autofocus,#cols,defaultValue,dirName,!disabled,#maxLength,#minLength,name,placeholder,!readOnly,!required,#rows,selectionDirection,#selectionEnd,#selectionStart,value,wrap',\n    'title^[HTMLElement]|text',\n    'track^[HTMLElement]|!default,kind,label,src,srclang',\n    'ul^[HTMLElement]|!compact,type',\n    'unknown^[HTMLElement]|',\n    'video^media|#height,poster,#width',\n    ':svg:a^:svg:graphics|',\n    ':svg:animate^:svg:animation|',\n    ':svg:animateMotion^:svg:animation|',\n    ':svg:animateTransform^:svg:animation|',\n    ':svg:circle^:svg:geometry|',\n    ':svg:clipPath^:svg:graphics|',\n    ':svg:defs^:svg:graphics|',\n    ':svg:desc^:svg:|',\n    ':svg:discard^:svg:|',\n    ':svg:ellipse^:svg:geometry|',\n    ':svg:feBlend^:svg:|',\n    ':svg:feColorMatrix^:svg:|',\n    ':svg:feComponentTransfer^:svg:|',\n    ':svg:feComposite^:svg:|',\n    ':svg:feConvolveMatrix^:svg:|',\n    ':svg:feDiffuseLighting^:svg:|',\n    ':svg:feDisplacementMap^:svg:|',\n    ':svg:feDistantLight^:svg:|',\n    ':svg:feDropShadow^:svg:|',\n    ':svg:feFlood^:svg:|',\n    ':svg:feFuncA^:svg:componentTransferFunction|',\n    ':svg:feFuncB^:svg:componentTransferFunction|',\n    ':svg:feFuncG^:svg:componentTransferFunction|',\n    ':svg:feFuncR^:svg:componentTransferFunction|',\n    ':svg:feGaussianBlur^:svg:|',\n    ':svg:feImage^:svg:|',\n    ':svg:feMerge^:svg:|',\n    ':svg:feMergeNode^:svg:|',\n    ':svg:feMorphology^:svg:|',\n    ':svg:feOffset^:svg:|',\n    ':svg:fePointLight^:svg:|',\n    ':svg:feSpecularLighting^:svg:|',\n    ':svg:feSpotLight^:svg:|',\n    ':svg:feTile^:svg:|',\n    ':svg:feTurbulence^:svg:|',\n    ':svg:filter^:svg:|',\n    ':svg:foreignObject^:svg:graphics|',\n    ':svg:g^:svg:graphics|',\n    ':svg:image^:svg:graphics|',\n    ':svg:line^:svg:geometry|',\n    ':svg:linearGradient^:svg:gradient|',\n    ':svg:mpath^:svg:|',\n    ':svg:marker^:svg:|',\n    ':svg:mask^:svg:|',\n    ':svg:metadata^:svg:|',\n    ':svg:path^:svg:geometry|',\n    ':svg:pattern^:svg:|',\n    ':svg:polygon^:svg:geometry|',\n    ':svg:polyline^:svg:geometry|',\n    ':svg:radialGradient^:svg:gradient|',\n    ':svg:rect^:svg:geometry|',\n    ':svg:svg^:svg:graphics|#currentScale,#zoomAndPan',\n    ':svg:script^:svg:|type',\n    ':svg:set^:svg:animation|',\n    ':svg:stop^:svg:|',\n    ':svg:style^:svg:|!disabled,media,title,type',\n    ':svg:switch^:svg:graphics|',\n    ':svg:symbol^:svg:|',\n    ':svg:tspan^:svg:textPositioning|',\n    ':svg:text^:svg:textPositioning|',\n    ':svg:textPath^:svg:textContent|',\n    ':svg:title^:svg:|',\n    ':svg:use^:svg:graphics|',\n    ':svg:view^:svg:|#zoomAndPan',\n    'data^[HTMLElement]|value',\n    'keygen^[HTMLElement]|!autofocus,challenge,!disabled,form,keytype,name',\n    'menuitem^[HTMLElement]|type,label,icon,!disabled,!checked,radiogroup,!default',\n    'summary^[HTMLElement]|',\n    'time^[HTMLElement]|dateTime',\n    ':svg:cursor^:svg:|',\n];\nvar EVENT = 'event';\nvar BOOLEAN$1 = 'boolean';\nvar NUMBER$1 = 'number';\nvar STRING$1 = 'string';\nvar OBJECT$1 = 'object';\nvar SchemaInformation = /** @class */ (function () {\n    function SchemaInformation() {\n        var _this = this;\n        this.schema = {};\n        SCHEMA$1.forEach(function (encodedType) {\n            var parts = encodedType.split('|');\n            var properties = parts[1].split(',');\n            var typeParts = (parts[0] + '^').split('^');\n            var typeName = typeParts[0];\n            var type = {};\n            typeName.split(',').forEach(function (tag) { return _this.schema[tag.toLowerCase()] = type; });\n            var superName = typeParts[1];\n            var superType = superName && _this.schema[superName.toLowerCase()];\n            if (superType) {\n                for (var key in superType) {\n                    type[key] = superType[key];\n                }\n            }\n            properties.forEach(function (property) {\n                if (property == '') {\n                }\n                else if (property.startsWith('*')) {\n                    type[property.substring(1)] = EVENT;\n                }\n                else if (property.startsWith('!')) {\n                    type[property.substring(1)] = BOOLEAN$1;\n                }\n                else if (property.startsWith('#')) {\n                    type[property.substring(1)] = NUMBER$1;\n                }\n                else if (property.startsWith('%')) {\n                    type[property.substring(1)] = OBJECT$1;\n                }\n                else {\n                    type[property] = STRING$1;\n                }\n            });\n        });\n    }\n    SchemaInformation.prototype.allKnownElements = function () { return Object.keys(this.schema); };\n    SchemaInformation.prototype.eventsOf = function (elementName) {\n        var elementType = this.schema[elementName.toLowerCase()] || {};\n        return Object.keys(elementType).filter(function (property) { return elementType[property] === EVENT; });\n    };\n    SchemaInformation.prototype.propertiesOf = function (elementName) {\n        var elementType = this.schema[elementName.toLowerCase()] || {};\n        return Object.keys(elementType).filter(function (property) { return elementType[property] !== EVENT; });\n    };\n    SchemaInformation.prototype.typeOf = function (elementName, property) {\n        return (this.schema[elementName.toLowerCase()] || {})[property];\n    };\n    Object.defineProperty(SchemaInformation, \"instance\", {\n        get: function () {\n            var result = SchemaInformation._instance;\n            if (!result) {\n                result = SchemaInformation._instance = new SchemaInformation();\n            }\n            return result;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return SchemaInformation;\n}());\nfunction eventNames(elementName) {\n    return SchemaInformation.instance.eventsOf(elementName);\n}\nfunction propertyNames(elementName) {\n    return SchemaInformation.instance.propertiesOf(elementName);\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar TEMPLATE_ATTR_PREFIX$1 = '*';\nvar hiddenHtmlElements = {\n    html: true,\n    script: true,\n    noscript: true,\n    base: true,\n    body: true,\n    title: true,\n    head: true,\n    link: true,\n};\nfunction getTemplateCompletions(templateInfo) {\n    var result = undefined;\n    var htmlAst = templateInfo.htmlAst, templateAst = templateInfo.templateAst, template = templateInfo.template;\n    // The templateNode starts at the delimiter character so we add 1 to skip it.\n    if (templateInfo.position != null) {\n        var templatePosition_1 = templateInfo.position - template.span.start;\n        var path_1 = findNode(htmlAst, templatePosition_1);\n        var mostSpecific = path_1.tail;\n        if (path_1.empty || !mostSpecific) {\n            result = elementCompletions(templateInfo, path_1);\n        }\n        else {\n            var astPosition_1 = templatePosition_1 - mostSpecific.sourceSpan.start.offset;\n            mostSpecific.visit({\n                visitElement: function (ast) {\n                    var startTagSpan = spanOf$3(ast.sourceSpan);\n                    var tagLen = ast.name.length;\n                    if (templatePosition_1 <=\n                        startTagSpan.start + tagLen + 1 /* 1 for the opening angle bracked */) {\n                        // If we are in the tag then return the element completions.\n                        result = elementCompletions(templateInfo, path_1);\n                    }\n                    else if (templatePosition_1 < startTagSpan.end) {\n                        // We are in the attribute section of the element (but not in an attribute).\n                        // Return the attribute completions.\n                        result = attributeCompletions(templateInfo, path_1);\n                    }\n                },\n                visitAttribute: function (ast) {\n                    if (!ast.valueSpan || !inSpan(templatePosition_1, spanOf$3(ast.valueSpan))) {\n                        // We are in the name of an attribute. Show attribute completions.\n                        result = attributeCompletions(templateInfo, path_1);\n                    }\n                    else if (ast.valueSpan && inSpan(templatePosition_1, spanOf$3(ast.valueSpan))) {\n                        result = attributeValueCompletions(templateInfo, templatePosition_1, ast);\n                    }\n                },\n                visitText: function (ast) {\n                    // Check if we are in a entity.\n                    result = entityCompletions(getSourceText(template, spanOf$3(ast)), astPosition_1);\n                    if (result)\n                        return result;\n                    result = interpolationCompletions(templateInfo, templatePosition_1);\n                    if (result)\n                        return result;\n                    var element = path_1.first(Element);\n                    if (element) {\n                        var definition = getHtmlTagDefinition(element.name);\n                        if (definition.contentType === TagContentType.PARSABLE_DATA) {\n                            result = voidElementAttributeCompletions(templateInfo, path_1);\n                            if (!result) {\n                                // If the element can hold content Show element completions.\n                                result = elementCompletions(templateInfo, path_1);\n                            }\n                        }\n                    }\n                    else {\n                        // If no element container, implies parsable data so show elements.\n                        result = voidElementAttributeCompletions(templateInfo, path_1);\n                        if (!result) {\n                            result = elementCompletions(templateInfo, path_1);\n                        }\n                    }\n                },\n                visitComment: function (ast) { },\n                visitExpansion: function (ast) { },\n                visitExpansionCase: function (ast) { }\n            }, null);\n        }\n    }\n    return result;\n}\nfunction attributeCompletions(info, path$$1) {\n    var item = path$$1.tail instanceof Element ? path$$1.tail : path$$1.parentOf(path$$1.tail);\n    if (item instanceof Element) {\n        return attributeCompletionsForElement(info, item.name, item);\n    }\n    return undefined;\n}\nfunction attributeCompletionsForElement(info, elementName, element) {\n    var attributes = getAttributeInfosForElement(info, elementName, element);\n    // Map all the attributes to a completion\n    return attributes.map(function (attr) { return ({\n        kind: attr.fromHtml ? 'html attribute' : 'attribute',\n        name: nameOfAttr(attr),\n        sort: attr.name\n    }); });\n}\nfunction getAttributeInfosForElement(info, elementName, element) {\n    var attributes = [];\n    // Add html attributes\n    var htmlAttributes = attributeNames(elementName) || [];\n    if (htmlAttributes) {\n        attributes.push.apply(attributes, __spread(htmlAttributes.map(function (name) { return ({ name: name, fromHtml: true }); })));\n    }\n    // Add html properties\n    var htmlProperties = propertyNames(elementName);\n    if (htmlProperties) {\n        attributes.push.apply(attributes, __spread(htmlProperties.map(function (name) { return ({ name: name, input: true }); })));\n    }\n    // Add html events\n    var htmlEvents = eventNames(elementName);\n    if (htmlEvents) {\n        attributes.push.apply(attributes, __spread(htmlEvents.map(function (name) { return ({ name: name, output: true }); })));\n    }\n    var _a = getSelectors(info), selectors = _a.selectors, selectorMap = _a.map;\n    if (selectors && selectors.length) {\n        // All the attributes that are selectable should be shown.\n        var applicableSelectors = selectors.filter(function (selector) { return !selector.element || selector.element == elementName; });\n        var selectorAndAttributeNames = applicableSelectors.map(function (selector) { return ({ selector: selector, attrs: selector.attrs.filter(function (a) { return !!a; }) }); });\n        var attrs_1 = flatten$1(selectorAndAttributeNames.map(function (selectorAndAttr) {\n            var directive = selectorMap.get(selectorAndAttr.selector);\n            var result = selectorAndAttr.attrs.map(function (name) { return ({ name: name, input: name in directive.inputs, output: name in directive.outputs }); });\n            return result;\n        }));\n        // Add template attribute if a directive contains a template reference\n        selectorAndAttributeNames.forEach(function (selectorAndAttr) {\n            var selector = selectorAndAttr.selector;\n            var directive = selectorMap.get(selector);\n            if (directive && hasTemplateReference$1(directive.type) && selector.attrs.length &&\n                selector.attrs[0]) {\n                attrs_1.push({ name: selector.attrs[0], template: true });\n            }\n        });\n        // All input and output properties of the matching directives should be added.\n        var elementSelector = element ?\n            createElementCssSelector$1(element) :\n            createElementCssSelector$1(new Element(elementName, [], [], null, null, null));\n        var matcher = new SelectorMatcher();\n        matcher.addSelectables(selectors);\n        matcher.match(elementSelector, function (selector) {\n            var directive = selectorMap.get(selector);\n            if (directive) {\n                attrs_1.push.apply(attrs_1, __spread(Object.keys(directive.inputs).map(function (name) { return ({ name: name, input: true }); })));\n                attrs_1.push.apply(attrs_1, __spread(Object.keys(directive.outputs).map(function (name) { return ({ name: name, output: true }); })));\n            }\n        });\n        // If a name shows up twice, fold it into a single value.\n        attrs_1 = foldAttrs(attrs_1);\n        // Now expand them back out to ensure that input/output shows up as well as input and\n        // output.\n        attributes.push.apply(attributes, __spread(flatten$1(attrs_1.map(expandedAttr))));\n    }\n    return attributes;\n}\nfunction attributeValueCompletions(info, position, attr) {\n    var path$$1 = findTemplateAstAt(info.templateAst, position);\n    var mostSpecific = path$$1.tail;\n    var dinfo = diagnosticInfoFromTemplateInfo(info);\n    if (mostSpecific) {\n        var visitor = new ExpressionVisitor(info, position, attr, function () { return getExpressionScope(dinfo, path$$1, false); });\n        mostSpecific.visit(visitor, null);\n        if (!visitor.result || !visitor.result.length) {\n            // Try allwoing widening the path\n            var widerPath_1 = findTemplateAstAt(info.templateAst, position, /* allowWidening */ true);\n            if (widerPath_1.tail) {\n                var widerVisitor = new ExpressionVisitor(info, position, attr, function () { return getExpressionScope(dinfo, widerPath_1, false); });\n                widerPath_1.tail.visit(widerVisitor, null);\n                return widerVisitor.result;\n            }\n        }\n        return visitor.result;\n    }\n}\nfunction elementCompletions(info, path$$1) {\n    var htmlNames = elementNames().filter(function (name) { return !(name in hiddenHtmlElements); });\n    // Collect the elements referenced by the selectors\n    var directiveElements = getSelectors(info)\n        .selectors.map(function (selector) { return selector.element; })\n        .filter(function (name) { return !!name; });\n    var components = directiveElements.map(function (name) { return ({ kind: 'component', name: name, sort: name }); });\n    var htmlElements = htmlNames.map(function (name) { return ({ kind: 'element', name: name, sort: name }); });\n    // Return components and html elements\n    return uniqueByName(htmlElements.concat(components));\n}\nfunction entityCompletions(value, position) {\n    // Look for entity completions\n    var re = /&[A-Za-z]*;?(?!\\d)/g;\n    var found;\n    var result = undefined;\n    while (found = re.exec(value)) {\n        var len = found[0].length;\n        if (position >= found.index && position < (found.index + len)) {\n            result = Object.keys(NAMED_ENTITIES)\n                .map(function (name) { return ({ kind: 'entity', name: \"&\" + name + \";\", sort: name }); });\n            break;\n        }\n    }\n    return result;\n}\nfunction interpolationCompletions(info, position) {\n    // Look for an interpolation in at the position.\n    var templatePath = findTemplateAstAt(info.templateAst, position);\n    var mostSpecific = templatePath.tail;\n    if (mostSpecific) {\n        var visitor = new ExpressionVisitor(info, position, undefined, function () { return getExpressionScope(diagnosticInfoFromTemplateInfo(info), templatePath, false); });\n        mostSpecific.visit(visitor, null);\n        return uniqueByName(visitor.result);\n    }\n}\n// There is a special case of HTML where text that contains a unclosed tag is treated as\n// text. For exaple '<h1> Some <a text </h1>' produces a text nodes inside of the H1\n// element \"Some <a text\". We, however, want to treat this as if the user was requesting\n// the attributes of an \"a\" element, not requesting completion in the a text element. This\n// code checks for this case and returns element completions if it is detected or undefined\n// if it is not.\nfunction voidElementAttributeCompletions(info, path$$1) {\n    var tail = path$$1.tail;\n    if (tail instanceof Text) {\n        var match = tail.value.match(/<(\\w(\\w|\\d|-)*:)?(\\w(\\w|\\d|-)*)\\s/);\n        // The position must be after the match, otherwise we are still in a place where elements\n        // are expected (such as `<|a` or `<a|`; we only want attributes for `<a |` or after).\n        if (match &&\n            path$$1.position >= (match.index || 0) + match[0].length + tail.sourceSpan.start.offset) {\n            return attributeCompletionsForElement(info, match[3]);\n        }\n    }\n}\nvar ExpressionVisitor = /** @class */ (function (_super) {\n    __extends(ExpressionVisitor, _super);\n    function ExpressionVisitor(info, position, attr, getExpressionScope) {\n        var _this = _super.call(this) || this;\n        _this.info = info;\n        _this.position = position;\n        _this.attr = attr;\n        _this.getExpressionScope = getExpressionScope || (function () { return info.template.members; });\n        return _this;\n    }\n    ExpressionVisitor.prototype.visitDirectiveProperty = function (ast) {\n        this.attributeValueCompletions(ast.value);\n    };\n    ExpressionVisitor.prototype.visitElementProperty = function (ast) {\n        this.attributeValueCompletions(ast.value);\n    };\n    ExpressionVisitor.prototype.visitEvent = function (ast) { this.attributeValueCompletions(ast.handler); };\n    ExpressionVisitor.prototype.visitElement = function (ast) {\n        var _this = this;\n        if (this.attr && getSelectors(this.info) && this.attr.name.startsWith(TEMPLATE_ATTR_PREFIX$1)) {\n            // The value is a template expression but the expression AST was not produced when the\n            // TemplateAst was produce so\n            // do that now.\n            var key_1 = this.attr.name.substr(TEMPLATE_ATTR_PREFIX$1.length);\n            // Find the selector\n            var selectorInfo = getSelectors(this.info);\n            var selectors = selectorInfo.selectors;\n            var selector_1 = selectors.filter(function (s) { return s.attrs.some(function (attr, i) { return i % 2 == 0 && attr == key_1; }); })[0];\n            var templateBindingResult = this.info.expressionParser.parseTemplateBindings(key_1, this.attr.value, null);\n            // find the template binding that contains the position\n            if (!this.attr.valueSpan)\n                return;\n            var valueRelativePosition_1 = this.position - this.attr.valueSpan.start.offset - 1;\n            var bindings = templateBindingResult.templateBindings;\n            var binding = bindings.find(function (binding) { return inSpan(valueRelativePosition_1, binding.span, /* exclusive */ true); }) ||\n                bindings.find(function (binding) { return inSpan(valueRelativePosition_1, binding.span); });\n            var keyCompletions = function () {\n                var keys = [];\n                if (selector_1) {\n                    var attrNames = selector_1.attrs.filter(function (_, i) { return i % 2 == 0; });\n                    keys = attrNames.filter(function (name) { return name.startsWith(key_1) && name != key_1; })\n                        .map(function (name) { return lowerName(name.substr(key_1.length)); });\n                }\n                keys.push('let');\n                _this.result = keys.map(function (key) { return ({ kind: 'key', name: key, sort: key }); });\n            };\n            if (!binding || (binding.key == key_1 && !binding.expression)) {\n                // We are in the root binding. We should return `let` and keys that are left in the\n                // selector.\n                keyCompletions();\n            }\n            else if (binding.keyIsVar) {\n                var equalLocation = this.attr.value.indexOf('=');\n                this.result = [];\n                if (equalLocation >= 0 && valueRelativePosition_1 >= equalLocation) {\n                    // We are after the '=' in a let clause. The valid values here are the members of the\n                    // template reference's type parameter.\n                    var directiveMetadata = selectorInfo.map.get(selector_1);\n                    if (directiveMetadata) {\n                        var contextTable = this.info.template.query.getTemplateContext(directiveMetadata.type.reference);\n                        if (contextTable) {\n                            this.result = this.symbolsToCompletions(contextTable.values());\n                        }\n                    }\n                }\n                else if (binding.key && valueRelativePosition_1 <= (binding.key.length - key_1.length)) {\n                    keyCompletions();\n                }\n            }\n            else {\n                // If the position is in the expression or after the key or there is no key, return the\n                // expression completions\n                if ((binding.expression && inSpan(valueRelativePosition_1, binding.expression.ast.span)) ||\n                    (binding.key &&\n                        valueRelativePosition_1 > binding.span.start + (binding.key.length - key_1.length)) ||\n                    !binding.key) {\n                    var span = new ParseSpan(0, this.attr.value.length);\n                    this.attributeValueCompletions(binding.expression ? binding.expression.ast :\n                        new PropertyRead(span, new ImplicitReceiver(span), ''), valueRelativePosition_1);\n                }\n                else {\n                    keyCompletions();\n                }\n            }\n        }\n    };\n    ExpressionVisitor.prototype.visitBoundText = function (ast) {\n        var expressionPosition = this.position - ast.sourceSpan.start.offset;\n        if (inSpan(expressionPosition, ast.value.span)) {\n            var completions = getExpressionCompletions(this.getExpressionScope(), ast.value, expressionPosition, this.info.template.query);\n            if (completions) {\n                this.result = this.symbolsToCompletions(completions);\n            }\n        }\n    };\n    ExpressionVisitor.prototype.attributeValueCompletions = function (value, position) {\n        var symbols = getExpressionCompletions(this.getExpressionScope(), value, position == null ? this.attributeValuePosition : position, this.info.template.query);\n        if (symbols) {\n            this.result = this.symbolsToCompletions(symbols);\n        }\n    };\n    ExpressionVisitor.prototype.symbolsToCompletions = function (symbols) {\n        return symbols.filter(function (s) { return !s.name.startsWith('__') && s.public; })\n            .map(function (symbol) { return ({ kind: symbol.kind, name: symbol.name, sort: symbol.name }); });\n    };\n    Object.defineProperty(ExpressionVisitor.prototype, \"attributeValuePosition\", {\n        get: function () {\n            if (this.attr && this.attr.valueSpan) {\n                return this.position - this.attr.valueSpan.start.offset - 1;\n            }\n            return 0;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return ExpressionVisitor;\n}(NullTemplateVisitor));\nfunction getSourceText(template, span) {\n    return template.source.substring(span.start, span.end);\n}\nfunction nameOfAttr(attr) {\n    var name = attr.name;\n    if (attr.output) {\n        name = removeSuffix(name, 'Events');\n        name = removeSuffix(name, 'Changed');\n    }\n    var result = [name];\n    if (attr.input) {\n        result.unshift('[');\n        result.push(']');\n    }\n    if (attr.output) {\n        result.unshift('(');\n        result.push(')');\n    }\n    if (attr.template) {\n        result.unshift('*');\n    }\n    return result.join('');\n}\nvar templateAttr = /^(\\w+:)?(template$|^\\*)/;\nfunction createElementCssSelector$1(element) {\n    var cssSelector = new CssSelector();\n    var elNameNoNs = splitNsName(element.name)[1];\n    cssSelector.setElement(elNameNoNs);\n    try {\n        for (var _a = __values(element.attrs), _b = _a.next(); !_b.done; _b = _a.next()) {\n            var attr = _b.value;\n            if (!attr.name.match(templateAttr)) {\n                var _c = __read(splitNsName(attr.name), 2), _ = _c[0], attrNameNoNs = _c[1];\n                cssSelector.addAttribute(attrNameNoNs, attr.value);\n                if (attr.name.toLowerCase() == 'class') {\n                    var classes = attr.value.split(/s+/g);\n                    classes.forEach(function (className) { return cssSelector.addClassName(className); });\n                }\n            }\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (_b && !_b.done && (_d = _a.return)) _d.call(_a);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n    return cssSelector;\n    var e_1, _d;\n}\nfunction foldAttrs(attrs) {\n    var inputOutput = new Map();\n    var templates = new Map();\n    var result = [];\n    attrs.forEach(function (attr) {\n        if (attr.fromHtml) {\n            return attr;\n        }\n        if (attr.template) {\n            var duplicate = templates.get(attr.name);\n            if (!duplicate) {\n                result.push({ name: attr.name, template: true });\n                templates.set(attr.name, attr);\n            }\n        }\n        if (attr.input || attr.output) {\n            var duplicate = inputOutput.get(attr.name);\n            if (duplicate) {\n                duplicate.input = duplicate.input || attr.input;\n                duplicate.output = duplicate.output || attr.output;\n            }\n            else {\n                var cloneAttr = { name: attr.name };\n                if (attr.input)\n                    cloneAttr.input = true;\n                if (attr.output)\n                    cloneAttr.output = true;\n                result.push(cloneAttr);\n                inputOutput.set(attr.name, cloneAttr);\n            }\n        }\n    });\n    return result;\n}\nfunction expandedAttr(attr) {\n    if (attr.input && attr.output) {\n        return [\n            attr, { name: attr.name, input: true, output: false },\n            { name: attr.name, input: false, output: true }\n        ];\n    }\n    return [attr];\n}\nfunction lowerName(name) {\n    return name && (name[0].toLowerCase() + name.substr(1));\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nfunction locateSymbol(info) {\n    if (!info.position)\n        return undefined;\n    var templatePosition = info.position - info.template.span.start;\n    var path$$1 = findTemplateAstAt(info.templateAst, templatePosition);\n    if (path$$1.tail) {\n        var symbol_1 = undefined;\n        var span_1 = undefined;\n        var attributeValueSymbol_1 = function (ast, inEvent) {\n            if (inEvent === void 0) { inEvent = false; }\n            var attribute = findAttribute(info);\n            if (attribute) {\n                if (inSpan(templatePosition, spanOf$3(attribute.valueSpan))) {\n                    var dinfo = diagnosticInfoFromTemplateInfo(info);\n                    var scope = getExpressionScope(dinfo, path$$1, inEvent);\n                    if (attribute.valueSpan) {\n                        var expressionOffset = attribute.valueSpan.start.offset + 1;\n                        var result = getExpressionSymbol(scope, ast, templatePosition - expressionOffset, info.template.query);\n                        if (result) {\n                            symbol_1 = result.symbol;\n                            span_1 = offsetSpan$1(result.span, expressionOffset);\n                        }\n                    }\n                    return true;\n                }\n            }\n            return false;\n        };\n        path$$1.tail.visit({\n            visitNgContent: function (ast) { },\n            visitEmbeddedTemplate: function (ast) { },\n            visitElement: function (ast) {\n                var component = ast.directives.find(function (d) { return d.directive.isComponent; });\n                if (component) {\n                    symbol_1 = info.template.query.getTypeSymbol(component.directive.type.reference);\n                    symbol_1 = symbol_1 && new OverrideKindSymbol(symbol_1, 'component');\n                    span_1 = spanOf$3(ast);\n                }\n                else {\n                    // Find a directive that matches the element name\n                    var directive = ast.directives.find(function (d) { return d.directive.selector != null && d.directive.selector.indexOf(ast.name) >= 0; });\n                    if (directive) {\n                        symbol_1 = info.template.query.getTypeSymbol(directive.directive.type.reference);\n                        symbol_1 = symbol_1 && new OverrideKindSymbol(symbol_1, 'directive');\n                        span_1 = spanOf$3(ast);\n                    }\n                }\n            },\n            visitReference: function (ast) {\n                symbol_1 = ast.value && info.template.query.getTypeSymbol(tokenReference(ast.value));\n                span_1 = spanOf$3(ast);\n            },\n            visitVariable: function (ast) { },\n            visitEvent: function (ast) {\n                if (!attributeValueSymbol_1(ast.handler, /* inEvent */ true)) {\n                    symbol_1 = findOutputBinding(info, path$$1, ast);\n                    symbol_1 = symbol_1 && new OverrideKindSymbol(symbol_1, 'event');\n                    span_1 = spanOf$3(ast);\n                }\n            },\n            visitElementProperty: function (ast) { attributeValueSymbol_1(ast.value); },\n            visitAttr: function (ast) { },\n            visitBoundText: function (ast) {\n                var expressionPosition = templatePosition - ast.sourceSpan.start.offset;\n                if (inSpan(expressionPosition, ast.value.span)) {\n                    var dinfo = diagnosticInfoFromTemplateInfo(info);\n                    var scope = getExpressionScope(dinfo, path$$1, /* includeEvent */ false);\n                    var result = getExpressionSymbol(scope, ast.value, expressionPosition, info.template.query);\n                    if (result) {\n                        symbol_1 = result.symbol;\n                        span_1 = offsetSpan$1(result.span, ast.sourceSpan.start.offset);\n                    }\n                }\n            },\n            visitText: function (ast) { },\n            visitDirective: function (ast) {\n                symbol_1 = info.template.query.getTypeSymbol(ast.directive.type.reference);\n                span_1 = spanOf$3(ast);\n            },\n            visitDirectiveProperty: function (ast) {\n                if (!attributeValueSymbol_1(ast.value)) {\n                    symbol_1 = findInputBinding(info, path$$1, ast);\n                    span_1 = spanOf$3(ast);\n                }\n            }\n        }, null);\n        if (symbol_1 && span_1) {\n            return { symbol: symbol_1, span: offsetSpan$1(span_1, info.template.span.start) };\n        }\n    }\n}\nfunction findAttribute(info) {\n    if (info.position) {\n        var templatePosition = info.position - info.template.span.start;\n        var path$$1 = findNode(info.htmlAst, templatePosition);\n        return path$$1.first(Attribute);\n    }\n}\nfunction findInputBinding(info, path$$1, binding) {\n    var element = path$$1.first(ElementAst);\n    if (element) {\n        try {\n            for (var _a = __values(element.directives), _b = _a.next(); !_b.done; _b = _a.next()) {\n                var directive = _b.value;\n                var invertedInput = invertMap(directive.directive.inputs);\n                var fieldName = invertedInput[binding.templateName];\n                if (fieldName) {\n                    var classSymbol = info.template.query.getTypeSymbol(directive.directive.type.reference);\n                    if (classSymbol) {\n                        return classSymbol.members().get(fieldName);\n                    }\n                }\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (_b && !_b.done && (_c = _a.return)) _c.call(_a);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n    }\n    var e_1, _c;\n}\nfunction findOutputBinding(info, path$$1, binding) {\n    var element = path$$1.first(ElementAst);\n    if (element) {\n        try {\n            for (var _a = __values(element.directives), _b = _a.next(); !_b.done; _b = _a.next()) {\n                var directive = _b.value;\n                var invertedOutputs = invertMap(directive.directive.outputs);\n                var fieldName = invertedOutputs[binding.name];\n                if (fieldName) {\n                    var classSymbol = info.template.query.getTypeSymbol(directive.directive.type.reference);\n                    if (classSymbol) {\n                        return classSymbol.members().get(fieldName);\n                    }\n                }\n            }\n        }\n        catch (e_2_1) { e_2 = { error: e_2_1 }; }\n        finally {\n            try {\n                if (_b && !_b.done && (_c = _a.return)) _c.call(_a);\n            }\n            finally { if (e_2) throw e_2.error; }\n        }\n    }\n    var e_2, _c;\n}\nfunction invertMap(obj) {\n    var result = {};\n    try {\n        for (var _a = __values(Object.keys(obj)), _b = _a.next(); !_b.done; _b = _a.next()) {\n            var name_1 = _b.value;\n            var v = obj[name_1];\n            result[v] = name_1;\n        }\n    }\n    catch (e_3_1) { e_3 = { error: e_3_1 }; }\n    finally {\n        try {\n            if (_b && !_b.done && (_c = _a.return)) _c.call(_a);\n        }\n        finally { if (e_3) throw e_3.error; }\n    }\n    return result;\n    var e_3, _c;\n}\n/**\n * Wrap a symbol and change its kind to component.\n */\nvar OverrideKindSymbol = /** @class */ (function () {\n    function OverrideKindSymbol(sym, kindOverride) {\n        this.sym = sym;\n        this.kind = kindOverride;\n    }\n    Object.defineProperty(OverrideKindSymbol.prototype, \"name\", {\n        get: function () { return this.sym.name; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(OverrideKindSymbol.prototype, \"language\", {\n        get: function () { return this.sym.language; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(OverrideKindSymbol.prototype, \"type\", {\n        get: function () { return this.sym.type; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(OverrideKindSymbol.prototype, \"container\", {\n        get: function () { return this.sym.container; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(OverrideKindSymbol.prototype, \"public\", {\n        get: function () { return this.sym.public; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(OverrideKindSymbol.prototype, \"callable\", {\n        get: function () { return this.sym.callable; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(OverrideKindSymbol.prototype, \"nullable\", {\n        get: function () { return this.sym.nullable; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(OverrideKindSymbol.prototype, \"definition\", {\n        get: function () { return this.sym.definition; },\n        enumerable: true,\n        configurable: true\n    });\n    OverrideKindSymbol.prototype.members = function () { return this.sym.members(); };\n    OverrideKindSymbol.prototype.signatures = function () { return this.sym.signatures(); };\n    OverrideKindSymbol.prototype.selectSignature = function (types) { return this.sym.selectSignature(types); };\n    OverrideKindSymbol.prototype.indexed = function (argument) { return this.sym.indexed(argument); };\n    return OverrideKindSymbol;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nfunction getDefinition(info) {\n    var result = locateSymbol(info);\n    return result && result.symbol.definition;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nfunction getTemplateDiagnostics(fileName, astProvider, templates) {\n    var results = [];\n    var _loop_1 = function (template) {\n        var ast = astProvider.getTemplateAst(template, fileName);\n        if (ast) {\n            if (ast.parseErrors && ast.parseErrors.length) {\n                results.push.apply(results, __spread(ast.parseErrors.map(function (e) { return ({\n                    kind: DiagnosticKind$1.Error,\n                    span: offsetSpan$1(spanOf$3(e.span), template.span.start),\n                    message: e.msg\n                }); })));\n            }\n            else if (ast.templateAst && ast.htmlAst) {\n                var info = {\n                    templateAst: ast.templateAst,\n                    htmlAst: ast.htmlAst,\n                    offset: template.span.start,\n                    query: template.query,\n                    members: template.members\n                };\n                var expressionDiagnostics = getTemplateExpressionDiagnostics(info);\n                results.push.apply(results, __spread(expressionDiagnostics));\n            }\n            if (ast.errors) {\n                results.push.apply(results, __spread(ast.errors.map(function (e) { return ({ kind: e.kind, span: e.span || template.span, message: e.message }); })));\n            }\n        }\n    };\n    try {\n        for (var templates_1 = __values(templates), templates_1_1 = templates_1.next(); !templates_1_1.done; templates_1_1 = templates_1.next()) {\n            var template = templates_1_1.value;\n            _loop_1(template);\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (templates_1_1 && !templates_1_1.done && (_a = templates_1.return)) _a.call(templates_1);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n    return results;\n    var e_1, _a;\n}\nfunction getDeclarationDiagnostics(declarations, modules) {\n    var results = [];\n    var directives = undefined;\n    var _loop_2 = function (declaration) {\n        var report = function (message, span) {\n            results.push({\n                kind: DiagnosticKind$1.Error,\n                span: span || declaration.declarationSpan, message: message\n            });\n        };\n        try {\n            for (var _a = __values(declaration.errors), _b = _a.next(); !_b.done; _b = _a.next()) {\n                var error = _b.value;\n                report(error.message, error.span);\n            }\n        }\n        catch (e_2_1) { e_2 = { error: e_2_1 }; }\n        finally {\n            try {\n                if (_b && !_b.done && (_c = _a.return)) _c.call(_a);\n            }\n            finally { if (e_2) throw e_2.error; }\n        }\n        if (declaration.metadata) {\n            if (declaration.metadata.isComponent) {\n                if (!modules.ngModuleByPipeOrDirective.has(declaration.type)) {\n                    report(\"Component '\" + declaration.type.name + \"' is not included in a module and will not be available inside a template. Consider adding it to a NgModule declaration\");\n                }\n                var _d = declaration.metadata.template, template = _d.template, templateUrl = _d.templateUrl;\n                if (template === null && !templateUrl) {\n                    report(\"Component '\" + declaration.type.name + \"' must have a template or templateUrl\");\n                }\n                else if (template && templateUrl) {\n                    report(\"Component '\" + declaration.type.name + \"' must not have both template and templateUrl\");\n                }\n            }\n            else {\n                if (!directives) {\n                    directives = new Set();\n                    modules.ngModules.forEach(function (module) {\n                        module.declaredDirectives.forEach(function (directive) { directives.add(directive.reference); });\n                    });\n                }\n                if (!directives.has(declaration.type)) {\n                    report(\"Directive '\" + declaration.type.name + \"' is not included in a module and will not be available inside a template. Consider adding it to a NgModule declaration\");\n                }\n            }\n        }\n        var e_2, _c;\n    };\n    try {\n        for (var declarations_1 = __values(declarations), declarations_1_1 = declarations_1.next(); !declarations_1_1.done; declarations_1_1 = declarations_1.next()) {\n            var declaration = declarations_1_1.value;\n            _loop_2(declaration);\n        }\n    }\n    catch (e_3_1) { e_3 = { error: e_3_1 }; }\n    finally {\n        try {\n            if (declarations_1_1 && !declarations_1_1.done && (_a = declarations_1.return)) _a.call(declarations_1);\n        }\n        finally { if (e_3) throw e_3.error; }\n    }\n    return results;\n    var e_3, _a;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nfunction getHover(info) {\n    var result = locateSymbol(info);\n    if (result) {\n        return { text: hoverTextOf(result.symbol), span: result.span };\n    }\n}\nfunction hoverTextOf(symbol) {\n    var result = [{ text: symbol.kind }, { text: ' ' }, { text: symbol.name, language: symbol.language }];\n    var container = symbol.container;\n    if (container) {\n        result.push({ text: ' of ' }, { text: container.name, language: container.language });\n    }\n    return result;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Create an instance of an Angular `LanguageService`.\n *\n * @experimental\n */\nfunction createLanguageService(host) {\n    return new LanguageServiceImpl(host);\n}\nvar LanguageServiceImpl = /** @class */ (function () {\n    function LanguageServiceImpl(host) {\n        this.host = host;\n    }\n    Object.defineProperty(LanguageServiceImpl.prototype, \"metadataResolver\", {\n        get: function () { return this.host.resolver; },\n        enumerable: true,\n        configurable: true\n    });\n    LanguageServiceImpl.prototype.getTemplateReferences = function () { return this.host.getTemplateReferences(); };\n    LanguageServiceImpl.prototype.getDiagnostics = function (fileName) {\n        var results = [];\n        var templates = this.host.getTemplates(fileName);\n        if (templates && templates.length) {\n            results.push.apply(results, __spread(getTemplateDiagnostics(fileName, this, templates)));\n        }\n        var declarations = this.host.getDeclarations(fileName);\n        if (declarations && declarations.length) {\n            var summary = this.host.getAnalyzedModules();\n            results.push.apply(results, __spread(getDeclarationDiagnostics(declarations, summary)));\n        }\n        return uniqueBySpan(results);\n    };\n    LanguageServiceImpl.prototype.getPipesAt = function (fileName, position) {\n        var templateInfo = this.getTemplateAstAtPosition(fileName, position);\n        if (templateInfo) {\n            return templateInfo.pipes;\n        }\n        return [];\n    };\n    LanguageServiceImpl.prototype.getCompletionsAt = function (fileName, position) {\n        var templateInfo = this.getTemplateAstAtPosition(fileName, position);\n        if (templateInfo) {\n            return getTemplateCompletions(templateInfo);\n        }\n    };\n    LanguageServiceImpl.prototype.getDefinitionAt = function (fileName, position) {\n        var templateInfo = this.getTemplateAstAtPosition(fileName, position);\n        if (templateInfo) {\n            return getDefinition(templateInfo);\n        }\n    };\n    LanguageServiceImpl.prototype.getHoverAt = function (fileName, position) {\n        var templateInfo = this.getTemplateAstAtPosition(fileName, position);\n        if (templateInfo) {\n            return getHover(templateInfo);\n        }\n    };\n    LanguageServiceImpl.prototype.getTemplateAstAtPosition = function (fileName, position) {\n        var template = this.host.getTemplateAt(fileName, position);\n        if (template) {\n            var astResult = this.getTemplateAst(template, fileName);\n            if (astResult && astResult.htmlAst && astResult.templateAst && astResult.directive &&\n                astResult.directives && astResult.pipes && astResult.expressionParser)\n                return {\n                    position: position,\n                    fileName: fileName,\n                    template: template,\n                    htmlAst: astResult.htmlAst,\n                    directive: astResult.directive,\n                    directives: astResult.directives,\n                    pipes: astResult.pipes,\n                    templateAst: astResult.templateAst,\n                    expressionParser: astResult.expressionParser\n                };\n        }\n        return undefined;\n    };\n    LanguageServiceImpl.prototype.getTemplateAst = function (template, contextFile) {\n        var _this = this;\n        var result = undefined;\n        try {\n            var resolvedMetadata = this.metadataResolver.getNonNormalizedDirectiveMetadata(template.type);\n            var metadata = resolvedMetadata && resolvedMetadata.metadata;\n            if (metadata) {\n                var rawHtmlParser = new HtmlParser();\n                var htmlParser = new I18NHtmlParser(rawHtmlParser);\n                var expressionParser = new Parser(new Lexer());\n                var config = new CompilerConfig();\n                var parser = new TemplateParser(config, this.host.resolver.getReflector(), expressionParser, new DomElementSchemaRegistry(), htmlParser, null, []);\n                var htmlResult = htmlParser.parse(template.source, '', true);\n                var analyzedModules = this.host.getAnalyzedModules();\n                var errors = undefined;\n                var ngModule = analyzedModules.ngModuleByPipeOrDirective.get(template.type);\n                if (!ngModule) {\n                    // Reported by the the declaration diagnostics.\n                    ngModule = findSuitableDefaultModule(analyzedModules);\n                }\n                if (ngModule) {\n                    var resolvedDirectives = ngModule.transitiveModule.directives.map(function (d) { return _this.host.resolver.getNonNormalizedDirectiveMetadata(d.reference); });\n                    var directives = removeMissing(resolvedDirectives).map(function (d) { return d.metadata.toSummary(); });\n                    var pipes = ngModule.transitiveModule.pipes.map(function (p) { return _this.host.resolver.getOrLoadPipeMetadata(p.reference).toSummary(); });\n                    var schemas = ngModule.schemas;\n                    var parseResult = parser.tryParseHtml(htmlResult, metadata, directives, pipes, schemas);\n                    result = {\n                        htmlAst: htmlResult.rootNodes,\n                        templateAst: parseResult.templateAst,\n                        directive: metadata, directives: directives, pipes: pipes,\n                        parseErrors: parseResult.errors, expressionParser: expressionParser, errors: errors\n                    };\n                }\n            }\n        }\n        catch (e) {\n            var span = template.span;\n            if (e.fileName == contextFile) {\n                span = template.query.getSpanAt(e.line, e.column) || span;\n            }\n            result = { errors: [{ kind: DiagnosticKind$1.Error, message: e.message, span: span }] };\n        }\n        return result || {};\n    };\n    return LanguageServiceImpl;\n}());\nfunction removeMissing(values) {\n    return values.filter(function (e) { return !!e; });\n}\nfunction uniqueBySpan(elements) {\n    if (elements) {\n        var result = [];\n        var map = new Map();\n        try {\n            for (var elements_1 = __values(elements), elements_1_1 = elements_1.next(); !elements_1_1.done; elements_1_1 = elements_1.next()) {\n                var element = elements_1_1.value;\n                var span = element.span;\n                var set = map.get(span.start);\n                if (!set) {\n                    set = new Set();\n                    map.set(span.start, set);\n                }\n                if (!set.has(span.end)) {\n                    set.add(span.end);\n                    result.push(element);\n                }\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (elements_1_1 && !elements_1_1.done && (_a = elements_1.return)) _a.call(elements_1);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        return result;\n    }\n    var e_1, _a;\n}\nfunction findSuitableDefaultModule(modules) {\n    var result = undefined;\n    var resultSize = 0;\n    try {\n        for (var _a = __values(modules.ngModules), _b = _a.next(); !_b.done; _b = _a.next()) {\n            var module_1 = _b.value;\n            var moduleSize = module_1.transitiveModule.directives.length;\n            if (moduleSize > resultSize) {\n                result = module_1;\n                resultSize = moduleSize;\n            }\n        }\n    }\n    catch (e_2_1) { e_2 = { error: e_2_1 }; }\n    finally {\n        try {\n            if (_b && !_b.done && (_c = _a.return)) _c.call(_a);\n        }\n        finally { if (e_2) throw e_2.error; }\n    }\n    return result;\n    var e_2, _c;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Construct an `InjectableDef` which defines how a token will be constructed by the DI system, and\n * in which injectors (if any) it will be available.\n *\n * This should be assigned to a static `ngInjectableDef` field on a type, which will then be an\n * `InjectableType`.\n *\n * Options:\n * * `providedIn` determines which injectors will include the injectable, by either associating it\n *   with an `@NgModule` or other `InjectorType`, or by specifying that this injectable should be\n *   provided in the `'root'` injector, which will be the application-level injector in most apps.\n * * `factory` gives the zero argument function which will create an instance of the injectable.\n *   The factory can call `inject` to access the `Injector` and request injection of dependencies.\n *\n * @experimental\n */\nfunction defineInjectable(opts) {\n    return {\n        providedIn: opts.providedIn || null,\n        factory: opts.factory,\n    };\n}\n/**\n * Construct an `InjectorDef` which configures an injector.\n *\n * This should be assigned to a static `ngInjectorDef` field on a type, which will then be an\n * `InjectorType`.\n *\n * Options:\n *\n * * `factory`: an `InjectorType` is an instantiable type, so a zero argument `factory` function to\n *   create the type must be provided. If that factory function needs to inject arguments, it can\n *   use the `inject` function.\n * * `providers`: an optional array of providers to add to the injector. Each provider must\n *   either have a factory or point to a type which has an `ngInjectableDef` static property (the\n *   type must be an `InjectableType`).\n * * `imports`: an optional array of imports of other `InjectorType`s or `InjectorTypeWithModule`s\n *   whose providers will also be added to the injector. Locally provided types will override\n *   providers from imports.\n *\n * @experimental\n */\nfunction defineInjector(options) {\n    return {\n        factory: options.factory,\n        providers: options.providers || [],\n        imports: options.imports || [],\n    };\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Creates a token that can be used in a DI Provider.\n *\n * Use an `InjectionToken` whenever the type you are injecting is not reified (does not have a\n * runtime representation) such as when injecting an interface, callable type, array or\n * parametrized type.\n *\n * `InjectionToken` is parameterized on `T` which is the type of object which will be returned by\n * the `Injector`. This provides additional level of type safety.\n *\n * ```\n * interface MyInterface {...}\n * var myInterface = injector.get(new InjectionToken<MyInterface>('SomeToken'));\n * // myInterface is inferred to be MyInterface.\n * ```\n *\n * When creating an `InjectionToken`, you can optionally specify a factory function which returns\n * (possibly by creating) a default value of the parameterized type `T`. This sets up the\n * `InjectionToken` using this factory as a provider as if it was defined explicitly in the\n * application's root injector. If the factory function, which takes zero arguments, needs to inject\n * dependencies, it can do so using the `inject` function. See below for an example.\n *\n * Additionally, if a `factory` is specified you can also specify the `providedIn` option, which\n * overrides the above behavior and marks the token as belonging to a particular `@NgModule`. As\n * mentioned above, `'root'` is the default value for `providedIn`.\n *\n * ### Example\n *\n * #### Tree-shakeable InjectionToken\n *\n * {@example core/di/ts/injector_spec.ts region='ShakeableInjectionToken'}\n *\n * #### Plain InjectionToken\n *\n * {@example core/di/ts/injector_spec.ts region='InjectionToken'}\n *\n *\n */\nvar InjectionToken = /** @class */ (function () {\n    function InjectionToken(_desc, options) {\n        this._desc = _desc;\n        /** @internal */\n        this.ngMetadataName = 'InjectionToken';\n        if (options !== undefined) {\n            this.ngInjectableDef = defineInjectable({\n                providedIn: options.providedIn || 'root',\n                factory: options.factory,\n            });\n        }\n        else {\n            this.ngInjectableDef = undefined;\n        }\n    }\n    InjectionToken.prototype.toString = function () { return \"InjectionToken \" + this._desc; };\n    return InjectionToken;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar ANNOTATIONS = '__annotations__';\nvar PARAMETERS = '__parameters__';\nvar PROP_METADATA = '__prop__metadata__';\n/**\n * @suppress {globalThis}\n */\nfunction makeDecorator(name, props, parentClass, chainFn, typeFn) {\n    var metaCtor = makeMetadataCtor(props);\n    function DecoratorFactory() {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        if (this instanceof DecoratorFactory) {\n            metaCtor.call.apply(metaCtor, __spread([this], args));\n            return this;\n        }\n        var annotationInstance = new ((_a = DecoratorFactory).bind.apply(_a, __spread([void 0], args)))();\n        var TypeDecorator = function TypeDecorator(cls) {\n            typeFn && typeFn.apply(void 0, __spread([cls], args));\n            // Use of Object.defineProperty is important since it creates non-enumerable property which\n            // prevents the property is copied during subclassing.\n            var annotations = cls.hasOwnProperty(ANNOTATIONS) ?\n                cls[ANNOTATIONS] :\n                Object.defineProperty(cls, ANNOTATIONS, { value: [] })[ANNOTATIONS];\n            annotations.push(annotationInstance);\n            return cls;\n        };\n        if (chainFn)\n            chainFn(TypeDecorator);\n        return TypeDecorator;\n        var _a;\n    }\n    if (parentClass) {\n        DecoratorFactory.prototype = Object.create(parentClass.prototype);\n    }\n    DecoratorFactory.prototype.ngMetadataName = name;\n    DecoratorFactory.annotationCls = DecoratorFactory;\n    return DecoratorFactory;\n}\nfunction makeMetadataCtor(props) {\n    return function ctor() {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        if (props) {\n            var values = props.apply(void 0, __spread(args));\n            for (var propName in values) {\n                this[propName] = values[propName];\n            }\n        }\n    };\n}\nfunction makeParamDecorator(name, props, parentClass) {\n    var metaCtor = makeMetadataCtor(props);\n    function ParamDecoratorFactory() {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        if (this instanceof ParamDecoratorFactory) {\n            metaCtor.apply(this, args);\n            return this;\n        }\n        var annotationInstance = new ((_a = ParamDecoratorFactory).bind.apply(_a, __spread([void 0], args)))();\n        ParamDecorator.annotation = annotationInstance;\n        return ParamDecorator;\n        function ParamDecorator(cls, unusedKey, index) {\n            // Use of Object.defineProperty is important since it creates non-enumerable property which\n            // prevents the property is copied during subclassing.\n            var parameters = cls.hasOwnProperty(PARAMETERS) ?\n                cls[PARAMETERS] :\n                Object.defineProperty(cls, PARAMETERS, { value: [] })[PARAMETERS];\n            // there might be gaps if some in between parameters do not have annotations.\n            // we pad with nulls.\n            while (parameters.length <= index) {\n                parameters.push(null);\n            }\n            (parameters[index] = parameters[index] || []).push(annotationInstance);\n            return cls;\n        }\n        var _a;\n    }\n    if (parentClass) {\n        ParamDecoratorFactory.prototype = Object.create(parentClass.prototype);\n    }\n    ParamDecoratorFactory.prototype.ngMetadataName = name;\n    ParamDecoratorFactory.annotationCls = ParamDecoratorFactory;\n    return ParamDecoratorFactory;\n}\nfunction makePropDecorator(name, props, parentClass) {\n    var metaCtor = makeMetadataCtor(props);\n    function PropDecoratorFactory() {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        if (this instanceof PropDecoratorFactory) {\n            metaCtor.apply(this, args);\n            return this;\n        }\n        var decoratorInstance = new ((_a = PropDecoratorFactory).bind.apply(_a, __spread([void 0], args)))();\n        return function PropDecorator(target, name) {\n            var constructor = target.constructor;\n            // Use of Object.defineProperty is important since it creates non-enumerable property which\n            // prevents the property is copied during subclassing.\n            var meta = constructor.hasOwnProperty(PROP_METADATA) ?\n                constructor[PROP_METADATA] :\n                Object.defineProperty(constructor, PROP_METADATA, { value: {} })[PROP_METADATA];\n            meta[name] = meta.hasOwnProperty(name) && meta[name] || [];\n            meta[name].unshift(decoratorInstance);\n        };\n        var _a;\n    }\n    if (parentClass) {\n        PropDecoratorFactory.prototype = Object.create(parentClass.prototype);\n    }\n    PropDecoratorFactory.prototype.ngMetadataName = name;\n    PropDecoratorFactory.annotationCls = PropDecoratorFactory;\n    return PropDecoratorFactory;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * This token can be used to create a virtual provider that will populate the\n * `entryComponents` fields of components and ng modules based on its `useValue`.\n * All components that are referenced in the `useValue` value (either directly\n * or in a nested array or map) will be added to the `entryComponents` property.\n *\n * ### Example\n * The following example shows how the router can populate the `entryComponents`\n * field of an NgModule based on the router configuration which refers\n * to components.\n *\n * ```typescript\n * // helper function inside the router\n * function provideRoutes(routes) {\n *   return [\n *     {provide: ROUTES, useValue: routes},\n *     {provide: ANALYZE_FOR_ENTRY_COMPONENTS, useValue: routes, multi: true}\n *   ];\n * }\n *\n * // user code\n * let routes = [\n *   {path: '/root', component: RootComp},\n *   {path: '/teams', component: TeamsComp}\n * ];\n *\n * @NgModule({\n *   providers: [provideRoutes(routes)]\n * })\n * class ModuleWithRoutes {}\n * ```\n *\n * @experimental\n */\nvar ANALYZE_FOR_ENTRY_COMPONENTS = new InjectionToken('AnalyzeForEntryComponents');\n/**\n * Attribute decorator and metadata.\n *\n *\n * @Annotation\n */\nvar Attribute$1 = makeParamDecorator('Attribute', function (attributeName) { return ({ attributeName: attributeName }); });\n/**\n * Base class for query metadata.\n *\n * See {@link ContentChildren}, {@link ContentChild}, {@link ViewChildren}, {@link ViewChild} for\n * more information.\n *\n *\n */\nvar Query = /** @class */ (function () {\n    function Query() {\n    }\n    return Query;\n}());\n/**\n * ContentChildren decorator and metadata.\n *\n *\n *  @Annotation\n */\nvar ContentChildren = makePropDecorator('ContentChildren', function (selector, data) {\n    if (data === void 0) { data = {}; }\n    return (__assign({ selector: selector, first: false, isViewQuery: false, descendants: false }, data));\n}, Query);\n/**\n * ContentChild decorator and metadata.\n *\n *\n * @Annotation\n */\nvar ContentChild = makePropDecorator('ContentChild', function (selector, data) {\n    if (data === void 0) { data = {}; }\n    return (__assign({ selector: selector, first: true, isViewQuery: false, descendants: true }, data));\n}, Query);\n/**\n * ViewChildren decorator and metadata.\n *\n *\n * @Annotation\n */\nvar ViewChildren = makePropDecorator('ViewChildren', function (selector, data) {\n    if (data === void 0) { data = {}; }\n    return (__assign({ selector: selector, first: false, isViewQuery: true, descendants: true }, data));\n}, Query);\n/**\n * ViewChild decorator and metadata.\n *\n *\n * @Annotation\n */\nvar ViewChild = makePropDecorator('ViewChild', function (selector, data) {\n    return (__assign({ selector: selector, first: true, isViewQuery: true, descendants: true }, data));\n}, Query);\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Describes within the change detector which strategy will be used the next time change\n * detection is triggered.\n *\n */\n/**\n * Describes within the change detector which strategy will be used the next time change\n * detection is triggered.\n *\n */\nvar ChangeDetectionStrategy$1;\n/**\n * Describes within the change detector which strategy will be used the next time change\n * detection is triggered.\n *\n */\n(function (ChangeDetectionStrategy) {\n    /**\n     * `OnPush` means that the change detector's mode will be initially set to `CheckOnce`.\n     */\n    ChangeDetectionStrategy[ChangeDetectionStrategy[\"OnPush\"] = 0] = \"OnPush\";\n    /**\n     * `Default` means that the change detector's mode will be initially set to `CheckAlways`.\n     */\n    ChangeDetectionStrategy[ChangeDetectionStrategy[\"Default\"] = 1] = \"Default\";\n})(ChangeDetectionStrategy$1 || (ChangeDetectionStrategy$1 = {}));\n/**\n * Describes the status of the detector.\n */\n/**\n * Describes the status of the detector.\n */\nvar ChangeDetectorStatus;\n/**\n * Describes the status of the detector.\n */\n(function (ChangeDetectorStatus) {\n    /**\n     * `CheckOnce` means that after calling detectChanges the mode of the change detector\n     * will become `Checked`.\n     */\n    ChangeDetectorStatus[ChangeDetectorStatus[\"CheckOnce\"] = 0] = \"CheckOnce\";\n    /**\n     * `Checked` means that the change detector should be skipped until its mode changes to\n     * `CheckOnce`.\n     */\n    ChangeDetectorStatus[ChangeDetectorStatus[\"Checked\"] = 1] = \"Checked\";\n    /**\n     * `CheckAlways` means that after calling detectChanges the mode of the change detector\n     * will remain `CheckAlways`.\n     */\n    ChangeDetectorStatus[ChangeDetectorStatus[\"CheckAlways\"] = 2] = \"CheckAlways\";\n    /**\n     * `Detached` means that the change detector sub tree is not a part of the main tree and\n     * should be skipped.\n     */\n    ChangeDetectorStatus[ChangeDetectorStatus[\"Detached\"] = 3] = \"Detached\";\n    /**\n     * `Errored` means that the change detector encountered an error checking a binding\n     * or calling a directive lifecycle method and is now in an inconsistent state. Change\n     * detectors in this state will no longer detect changes.\n     */\n    ChangeDetectorStatus[ChangeDetectorStatus[\"Errored\"] = 4] = \"Errored\";\n    /**\n     * `Destroyed` means that the change detector is destroyed.\n     */\n    ChangeDetectorStatus[ChangeDetectorStatus[\"Destroyed\"] = 5] = \"Destroyed\";\n})(ChangeDetectorStatus || (ChangeDetectorStatus = {}));\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Directive decorator and metadata.\n *\n *\n * @Annotation\n */\nvar Directive = makeDecorator('Directive', function (dir) {\n    if (dir === void 0) { dir = {}; }\n    return dir;\n});\n/**\n * Component decorator and metadata.\n *\n *\n * @Annotation\n */\nvar Component = makeDecorator('Component', function (c) {\n    if (c === void 0) { c = {}; }\n    return (__assign({ changeDetection: ChangeDetectionStrategy$1.Default }, c));\n}, Directive);\n/**\n * Pipe decorator and metadata.\n *\n * Use the `@Pipe` annotation to declare that a given class is a pipe. A pipe\n * class must also implement {@link PipeTransform} interface.\n *\n * To use the pipe include a reference to the pipe class in\n * {@link NgModule#declarations}.\n *\n *\n * @Annotation\n */\nvar Pipe = makeDecorator('Pipe', function (p) { return (__assign({ pure: true }, p)); });\n/**\n * Input decorator and metadata.\n *\n *\n * @Annotation\n */\nvar Input = makePropDecorator('Input', function (bindingPropertyName) { return ({ bindingPropertyName: bindingPropertyName }); });\n/**\n * Output decorator and metadata.\n *\n *\n * @Annotation\n */\nvar Output = makePropDecorator('Output', function (bindingPropertyName) { return ({ bindingPropertyName: bindingPropertyName }); });\n/**\n * HostBinding decorator and metadata.\n *\n *\n * @Annotation\n */\nvar HostBinding = makePropDecorator('HostBinding', function (hostPropertyName) { return ({ hostPropertyName: hostPropertyName }); });\n/**\n * HostListener decorator and metadata.\n *\n *\n * @Annotation\n */\nvar HostListener = makePropDecorator('HostListener', function (eventName, args) { return ({ eventName: eventName, args: args }); });\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * @description\n *\n * Represents a type that a Component or other object is instances of.\n *\n * An example of a `Type` is `MyCustomComponent` class, which in JavaScript is be represented by\n * the `MyCustomComponent` constructor function.\n *\n *\n */\nvar Type$2 = Function;\nfunction isType(v) {\n    return typeof v === 'function';\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar __window = typeof window !== 'undefined' && window;\nvar __self = typeof self !== 'undefined' && typeof WorkerGlobalScope !== 'undefined' &&\n    self instanceof WorkerGlobalScope && self;\nvar __global = typeof global !== 'undefined' && global;\nvar _global = __window || __global || __self;\nvar promise = Promise.resolve(0);\nvar _symbolIterator = null;\nfunction getSymbolIterator() {\n    if (!_symbolIterator) {\n        var Symbol_1 = _global['Symbol'];\n        if (Symbol_1 && Symbol_1.iterator) {\n            _symbolIterator = Symbol_1.iterator;\n        }\n        else {\n            // es6-shim specific logic\n            var keys = Object.getOwnPropertyNames(Map.prototype);\n            for (var i = 0; i < keys.length; ++i) {\n                var key = keys[i];\n                if (key !== 'entries' && key !== 'size' &&\n                    Map.prototype[key] === Map.prototype['entries']) {\n                    _symbolIterator = key;\n                }\n            }\n        }\n    }\n    return _symbolIterator;\n}\nfunction scheduleMicroTask(fn) {\n    if (typeof Zone === 'undefined') {\n        // use promise to schedule microTask instead of use Zone\n        promise.then(function () { fn && fn.apply(null, null); });\n    }\n    else {\n        Zone.current.scheduleMicroTask('scheduleMicrotask', fn);\n    }\n}\n// JS has NaN !== NaN\nfunction looseIdentical(a, b) {\n    return a === b || typeof a === 'number' && typeof b === 'number' && isNaN(a) && isNaN(b);\n}\nfunction stringify$1(token) {\n    if (typeof token === 'string') {\n        return token;\n    }\n    if (token instanceof Array) {\n        return '[' + token.map(stringify$1).join(', ') + ']';\n    }\n    if (token == null) {\n        return '' + token;\n    }\n    if (token.overriddenName) {\n        return \"\" + token.overriddenName;\n    }\n    if (token.name) {\n        return \"\" + token.name;\n    }\n    var res = token.toString();\n    if (res == null) {\n        return '' + res;\n    }\n    var newLineIndex = res.indexOf('\\n');\n    return newLineIndex === -1 ? res : res.substring(0, newLineIndex);\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Attention: These regex has to hold even if the code is minified!\n */\nvar DELEGATE_CTOR = /^function\\s+\\S+\\(\\)\\s*{[\\s\\S]+\\.apply\\(this,\\s*arguments\\)/;\nvar INHERITED_CLASS = /^class\\s+[A-Za-z\\d$_]*\\s*extends\\s+[A-Za-z\\d$_]+\\s*{/;\nvar INHERITED_CLASS_WITH_CTOR = /^class\\s+[A-Za-z\\d$_]*\\s*extends\\s+[A-Za-z\\d$_]+\\s*{[\\s\\S]*constructor\\s*\\(/;\nvar ReflectionCapabilities = /** @class */ (function () {\n    function ReflectionCapabilities(reflect) {\n        this._reflect = reflect || _global['Reflect'];\n    }\n    ReflectionCapabilities.prototype.isReflectionEnabled = function () { return true; };\n    ReflectionCapabilities.prototype.factory = function (t) { return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        return new (t.bind.apply(t, __spread([void 0], args)))();\n    }; };\n    /** @internal */\n    /** @internal */\n    ReflectionCapabilities.prototype._zipTypesAndAnnotations = /** @internal */\n    function (paramTypes, paramAnnotations) {\n        var result;\n        if (typeof paramTypes === 'undefined') {\n            result = new Array(paramAnnotations.length);\n        }\n        else {\n            result = new Array(paramTypes.length);\n        }\n        for (var i = 0; i < result.length; i++) {\n            // TS outputs Object for parameters without types, while Traceur omits\n            // the annotations. For now we preserve the Traceur behavior to aid\n            // migration, but this can be revisited.\n            if (typeof paramTypes === 'undefined') {\n                result[i] = [];\n            }\n            else if (paramTypes[i] != Object) {\n                result[i] = [paramTypes[i]];\n            }\n            else {\n                result[i] = [];\n            }\n            if (paramAnnotations && paramAnnotations[i] != null) {\n                result[i] = result[i].concat(paramAnnotations[i]);\n            }\n        }\n        return result;\n    };\n    ReflectionCapabilities.prototype._ownParameters = function (type, parentCtor) {\n        var typeStr = type.toString();\n        // If we have no decorators, we only have function.length as metadata.\n        // In that case, to detect whether a child class declared an own constructor or not,\n        // we need to look inside of that constructor to check whether it is\n        // just calling the parent.\n        // This also helps to work around for https://github.com/Microsoft/TypeScript/issues/12439\n        // that sets 'design:paramtypes' to []\n        // if a class inherits from another class but has no ctor declared itself.\n        if (DELEGATE_CTOR.exec(typeStr) ||\n            (INHERITED_CLASS.exec(typeStr) && !INHERITED_CLASS_WITH_CTOR.exec(typeStr))) {\n            return null;\n        }\n        // Prefer the direct API.\n        if (type.parameters && type.parameters !== parentCtor.parameters) {\n            return type.parameters;\n        }\n        // API of tsickle for lowering decorators to properties on the class.\n        var tsickleCtorParams = type.ctorParameters;\n        if (tsickleCtorParams && tsickleCtorParams !== parentCtor.ctorParameters) {\n            // Newer tsickle uses a function closure\n            // Retain the non-function case for compatibility with older tsickle\n            var ctorParameters = typeof tsickleCtorParams === 'function' ? tsickleCtorParams() : tsickleCtorParams;\n            var paramTypes_1 = ctorParameters.map(function (ctorParam) { return ctorParam && ctorParam.type; });\n            var paramAnnotations_1 = ctorParameters.map(function (ctorParam) {\n                return ctorParam && convertTsickleDecoratorIntoMetadata(ctorParam.decorators);\n            });\n            return this._zipTypesAndAnnotations(paramTypes_1, paramAnnotations_1);\n        }\n        // API for metadata created by invoking the decorators.\n        var paramAnnotations = type.hasOwnProperty(PARAMETERS) && type[PARAMETERS];\n        var paramTypes = this._reflect && this._reflect.getOwnMetadata &&\n            this._reflect.getOwnMetadata('design:paramtypes', type);\n        if (paramTypes || paramAnnotations) {\n            return this._zipTypesAndAnnotations(paramTypes, paramAnnotations);\n        }\n        // If a class has no decorators, at least create metadata\n        // based on function.length.\n        // Note: We know that this is a real constructor as we checked\n        // the content of the constructor above.\n        return new Array(type.length).fill(undefined);\n    };\n    ReflectionCapabilities.prototype.parameters = function (type) {\n        // Note: only report metadata if we have at least one class decorator\n        // to stay in sync with the static reflector.\n        if (!isType(type)) {\n            return [];\n        }\n        var parentCtor = getParentCtor(type);\n        var parameters = this._ownParameters(type, parentCtor);\n        if (!parameters && parentCtor !== Object) {\n            parameters = this.parameters(parentCtor);\n        }\n        return parameters || [];\n    };\n    ReflectionCapabilities.prototype._ownAnnotations = function (typeOrFunc, parentCtor) {\n        // Prefer the direct API.\n        if (typeOrFunc.annotations && typeOrFunc.annotations !== parentCtor.annotations) {\n            var annotations = typeOrFunc.annotations;\n            if (typeof annotations === 'function' && annotations.annotations) {\n                annotations = annotations.annotations;\n            }\n            return annotations;\n        }\n        // API of tsickle for lowering decorators to properties on the class.\n        if (typeOrFunc.decorators && typeOrFunc.decorators !== parentCtor.decorators) {\n            return convertTsickleDecoratorIntoMetadata(typeOrFunc.decorators);\n        }\n        // API for metadata created by invoking the decorators.\n        if (typeOrFunc.hasOwnProperty(ANNOTATIONS)) {\n            return typeOrFunc[ANNOTATIONS];\n        }\n        return null;\n    };\n    ReflectionCapabilities.prototype.annotations = function (typeOrFunc) {\n        if (!isType(typeOrFunc)) {\n            return [];\n        }\n        var parentCtor = getParentCtor(typeOrFunc);\n        var ownAnnotations = this._ownAnnotations(typeOrFunc, parentCtor) || [];\n        var parentAnnotations = parentCtor !== Object ? this.annotations(parentCtor) : [];\n        return parentAnnotations.concat(ownAnnotations);\n    };\n    ReflectionCapabilities.prototype._ownPropMetadata = function (typeOrFunc, parentCtor) {\n        // Prefer the direct API.\n        if (typeOrFunc.propMetadata &&\n            typeOrFunc.propMetadata !== parentCtor.propMetadata) {\n            var propMetadata = typeOrFunc.propMetadata;\n            if (typeof propMetadata === 'function' && propMetadata.propMetadata) {\n                propMetadata = propMetadata.propMetadata;\n            }\n            return propMetadata;\n        }\n        // API of tsickle for lowering decorators to properties on the class.\n        if (typeOrFunc.propDecorators &&\n            typeOrFunc.propDecorators !== parentCtor.propDecorators) {\n            var propDecorators_1 = typeOrFunc.propDecorators;\n            var propMetadata_1 = {};\n            Object.keys(propDecorators_1).forEach(function (prop) {\n                propMetadata_1[prop] = convertTsickleDecoratorIntoMetadata(propDecorators_1[prop]);\n            });\n            return propMetadata_1;\n        }\n        // API for metadata created by invoking the decorators.\n        if (typeOrFunc.hasOwnProperty(PROP_METADATA)) {\n            return typeOrFunc[PROP_METADATA];\n        }\n        return null;\n    };\n    ReflectionCapabilities.prototype.propMetadata = function (typeOrFunc) {\n        if (!isType(typeOrFunc)) {\n            return {};\n        }\n        var parentCtor = getParentCtor(typeOrFunc);\n        var propMetadata = {};\n        if (parentCtor !== Object) {\n            var parentPropMetadata_1 = this.propMetadata(parentCtor);\n            Object.keys(parentPropMetadata_1).forEach(function (propName) {\n                propMetadata[propName] = parentPropMetadata_1[propName];\n            });\n        }\n        var ownPropMetadata = this._ownPropMetadata(typeOrFunc, parentCtor);\n        if (ownPropMetadata) {\n            Object.keys(ownPropMetadata).forEach(function (propName) {\n                var decorators = [];\n                if (propMetadata.hasOwnProperty(propName)) {\n                    decorators.push.apply(decorators, __spread(propMetadata[propName]));\n                }\n                decorators.push.apply(decorators, __spread(ownPropMetadata[propName]));\n                propMetadata[propName] = decorators;\n            });\n        }\n        return propMetadata;\n    };\n    ReflectionCapabilities.prototype.hasLifecycleHook = function (type, lcProperty) {\n        return type instanceof Type$2 && lcProperty in type.prototype;\n    };\n    ReflectionCapabilities.prototype.guards = function (type) { return {}; };\n    ReflectionCapabilities.prototype.getter = function (name) { return new Function('o', 'return o.' + name + ';'); };\n    ReflectionCapabilities.prototype.setter = function (name) {\n        return new Function('o', 'v', 'return o.' + name + ' = v;');\n    };\n    ReflectionCapabilities.prototype.method = function (name) {\n        var functionBody = \"if (!o.\" + name + \") throw new Error('\\\"\" + name + \"\\\" is undefined');\\n        return o.\" + name + \".apply(o, args);\";\n        return new Function('o', 'args', functionBody);\n    };\n    // There is not a concept of import uri in Js, but this is useful in developing Dart applications.\n    // There is not a concept of import uri in Js, but this is useful in developing Dart applications.\n    ReflectionCapabilities.prototype.importUri = \n    // There is not a concept of import uri in Js, but this is useful in developing Dart applications.\n    function (type) {\n        // StaticSymbol\n        if (typeof type === 'object' && type['filePath']) {\n            return type['filePath'];\n        }\n        // Runtime type\n        return \"./\" + stringify$1(type);\n    };\n    ReflectionCapabilities.prototype.resourceUri = function (type) { return \"./\" + stringify$1(type); };\n    ReflectionCapabilities.prototype.resolveIdentifier = function (name, moduleUrl, members, runtime) {\n        return runtime;\n    };\n    ReflectionCapabilities.prototype.resolveEnum = function (enumIdentifier, name) { return enumIdentifier[name]; };\n    return ReflectionCapabilities;\n}());\nfunction convertTsickleDecoratorIntoMetadata(decoratorInvocations) {\n    if (!decoratorInvocations) {\n        return [];\n    }\n    return decoratorInvocations.map(function (decoratorInvocation) {\n        var decoratorType = decoratorInvocation.type;\n        var annotationCls = decoratorType.annotationCls;\n        var annotationArgs = decoratorInvocation.args ? decoratorInvocation.args : [];\n        return new (annotationCls.bind.apply(annotationCls, __spread([void 0], annotationArgs)))();\n    });\n}\nfunction getParentCtor(ctor) {\n    var parentProto = ctor.prototype ? Object.getPrototypeOf(ctor.prototype) : null;\n    var parentCtor = parentProto ? parentProto.constructor : null;\n    // Note: We always use `Object` as the null value\n    // to simplify checking later on.\n    return parentCtor || Object;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nfunction getClosureSafeProperty(objWithPropertyToExtract, target) {\n    for (var key in objWithPropertyToExtract) {\n        if (objWithPropertyToExtract[key] === target) {\n            return key;\n        }\n    }\n    throw Error('Could not find renamed property on target object.');\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Allows to refer to references which are not yet defined.\n *\n * For instance, `forwardRef` is used when the `token` which we need to refer to for the purposes of\n * DI is declared,\n * but not yet defined. It is also used when the `token` which we use when creating a query is not\n * yet defined.\n *\n * ### Example\n * {@example core/di/ts/forward_ref/forward_ref_spec.ts region='forward_ref'}\n * @experimental\n */\nfunction forwardRef(forwardRefFn) {\n    forwardRefFn.__forward_ref__ = forwardRef;\n    forwardRefFn.toString = function () { return stringify$1(this()); };\n    return forwardRefFn;\n}\n/**\n * Lazily retrieves the reference value from a forwardRef.\n *\n * Acts as the identity function when given a non-forward-ref value.\n *\n * ### Example ([live demo](http://plnkr.co/edit/GU72mJrk1fiodChcmiDR?p=preview))\n *\n * {@example core/di/ts/forward_ref/forward_ref_spec.ts region='resolve_forward_ref'}\n *\n * See: {@link forwardRef}\n * @experimental\n */\nfunction resolveForwardRef$1(type) {\n    if (typeof type === 'function' && type.hasOwnProperty('__forward_ref__') &&\n        type.__forward_ref__ === forwardRef) {\n        return type();\n    }\n    else {\n        return type;\n    }\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Inject decorator and metadata.\n *\n *\n * @Annotation\n */\nvar Inject = makeParamDecorator('Inject', function (token) { return ({ token: token }); });\n/**\n * Optional decorator and metadata.\n *\n *\n * @Annotation\n */\nvar Optional = makeParamDecorator('Optional');\n/**\n * Self decorator and metadata.\n *\n *\n * @Annotation\n */\nvar Self = makeParamDecorator('Self');\n/**\n * SkipSelf decorator and metadata.\n *\n *\n * @Annotation\n */\nvar SkipSelf = makeParamDecorator('SkipSelf');\n/**\n * Host decorator and metadata.\n *\n *\n * @Annotation\n */\nvar Host = makeParamDecorator('Host');\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar SOURCE$1 = '__source';\nvar _THROW_IF_NOT_FOUND = new Object();\nvar THROW_IF_NOT_FOUND = _THROW_IF_NOT_FOUND;\n/**\n * An InjectionToken that gets the current `Injector` for `createInjector()`-style injectors.\n *\n * Requesting this token instead of `Injector` allows `StaticInjector` to be tree-shaken from a\n * project.\n *\n * @experimental\n */\nvar INJECTOR = new InjectionToken('INJECTOR');\nvar NullInjector = /** @class */ (function () {\n    function NullInjector() {\n    }\n    NullInjector.prototype.get = function (token, notFoundValue) {\n        if (notFoundValue === void 0) { notFoundValue = _THROW_IF_NOT_FOUND; }\n        if (notFoundValue === _THROW_IF_NOT_FOUND) {\n            throw new Error(\"NullInjectorError: No provider for \" + stringify$1(token) + \"!\");\n        }\n        return notFoundValue;\n    };\n    return NullInjector;\n}());\n/**\n * @usageNotes\n * ```\n * const injector: Injector = ...;\n * injector.get(...);\n * ```\n *\n * @description\n *\n * Concrete injectors implement this interface.\n *\n * For more details, see the {@linkDocs guide/dependency-injection \"Dependency Injection Guide\"}.\n *\n * ### Example\n *\n * {@example core/di/ts/injector_spec.ts region='Injector'}\n *\n * `Injector` returns itself when given `Injector` as a token:\n * {@example core/di/ts/injector_spec.ts region='injectInjector'}\n *\n *\n */\nvar Injector = /** @class */ (function () {\n    function Injector() {\n    }\n    /**\n     * Create a new Injector which is configure using `StaticProvider`s.\n     *\n     * ### Example\n     *\n     * {@example core/di/ts/provider_spec.ts region='ConstructorProvider'}\n     */\n    /**\n       * Create a new Injector which is configure using `StaticProvider`s.\n       *\n       * ### Example\n       *\n       * {@example core/di/ts/provider_spec.ts region='ConstructorProvider'}\n       */\n    Injector.create = /**\n       * Create a new Injector which is configure using `StaticProvider`s.\n       *\n       * ### Example\n       *\n       * {@example core/di/ts/provider_spec.ts region='ConstructorProvider'}\n       */\n    function (options, parent) {\n        if (Array.isArray(options)) {\n            return new StaticInjector(options, parent);\n        }\n        else {\n            return new StaticInjector(options.providers, options.parent, options.name || null);\n        }\n    };\n    Injector.THROW_IF_NOT_FOUND = _THROW_IF_NOT_FOUND;\n    Injector.NULL = new NullInjector();\n    Injector.ngInjectableDef = defineInjectable({\n        providedIn: 'any',\n        factory: function () { return inject(INJECTOR); },\n    });\n    return Injector;\n}());\nvar IDENT = function (value) {\n    return value;\n};\nvar EMPTY = [];\nvar CIRCULAR = IDENT;\nvar MULTI_PROVIDER_FN = function () {\n    return Array.prototype.slice.call(arguments);\n};\nvar GET_PROPERTY_NAME$1 = {};\nvar USE_VALUE$2 = getClosureSafeProperty$1({ provide: String, useValue: GET_PROPERTY_NAME$1 });\nvar NG_TOKEN_PATH = 'ngTokenPath';\nvar NG_TEMP_TOKEN_PATH = 'ngTempTokenPath';\nvar NULL_INJECTOR = Injector.NULL;\nvar NEW_LINE = /\\n/gm;\nvar NO_NEW_LINE = '';\nvar StaticInjector = /** @class */ (function () {\n    function StaticInjector(providers, parent, source) {\n        if (parent === void 0) { parent = NULL_INJECTOR; }\n        if (source === void 0) { source = null; }\n        this.parent = parent;\n        this.source = source;\n        var records = this._records = new Map();\n        records.set(Injector, { token: Injector, fn: IDENT, deps: EMPTY, value: this, useNew: false });\n        records.set(INJECTOR, { token: INJECTOR, fn: IDENT, deps: EMPTY, value: this, useNew: false });\n        recursivelyProcessProviders(records, providers);\n    }\n    StaticInjector.prototype.get = function (token, notFoundValue, flags) {\n        if (flags === void 0) { flags = 0 /* Default */; }\n        var record = this._records.get(token);\n        try {\n            return tryResolveToken(token, record, this._records, this.parent, notFoundValue, flags);\n        }\n        catch (e) {\n            var tokenPath = e[NG_TEMP_TOKEN_PATH];\n            if (token[SOURCE$1]) {\n                tokenPath.unshift(token[SOURCE$1]);\n            }\n            e.message = formatError('\\n' + e.message, tokenPath, this.source);\n            e[NG_TOKEN_PATH] = tokenPath;\n            e[NG_TEMP_TOKEN_PATH] = null;\n            throw e;\n        }\n    };\n    StaticInjector.prototype.toString = function () {\n        var tokens = [], records = this._records;\n        records.forEach(function (v, token) { return tokens.push(stringify$1(token)); });\n        return \"StaticInjector[\" + tokens.join(', ') + \"]\";\n    };\n    return StaticInjector;\n}());\nfunction resolveProvider(provider) {\n    var deps = computeDeps(provider);\n    var fn = IDENT;\n    var value = EMPTY;\n    var useNew = false;\n    var provide = resolveForwardRef$1(provider.provide);\n    if (USE_VALUE$2 in provider) {\n        // We need to use USE_VALUE in provider since provider.useValue could be defined as undefined.\n        value = provider.useValue;\n    }\n    else if (provider.useFactory) {\n        fn = provider.useFactory;\n    }\n    else if (provider.useExisting) {\n        // Just use IDENT\n    }\n    else if (provider.useClass) {\n        useNew = true;\n        fn = resolveForwardRef$1(provider.useClass);\n    }\n    else if (typeof provide == 'function') {\n        useNew = true;\n        fn = provide;\n    }\n    else {\n        throw staticError('StaticProvider does not have [useValue|useFactory|useExisting|useClass] or [provide] is not newable', provider);\n    }\n    return { deps: deps, fn: fn, useNew: useNew, value: value };\n}\nfunction multiProviderMixError(token) {\n    return staticError('Cannot mix multi providers and regular providers', token);\n}\nfunction recursivelyProcessProviders(records, provider) {\n    if (provider) {\n        provider = resolveForwardRef$1(provider);\n        if (provider instanceof Array) {\n            // if we have an array recurse into the array\n            for (var i = 0; i < provider.length; i++) {\n                recursivelyProcessProviders(records, provider[i]);\n            }\n        }\n        else if (typeof provider === 'function') {\n            // Functions were supported in ReflectiveInjector, but are not here. For safety give useful\n            // error messages\n            throw staticError('Function/Class not supported', provider);\n        }\n        else if (provider && typeof provider === 'object' && provider.provide) {\n            // At this point we have what looks like a provider: {provide: ?, ....}\n            var token = resolveForwardRef$1(provider.provide);\n            var resolvedProvider = resolveProvider(provider);\n            if (provider.multi === true) {\n                // This is a multi provider.\n                var multiProvider = records.get(token);\n                if (multiProvider) {\n                    if (multiProvider.fn !== MULTI_PROVIDER_FN) {\n                        throw multiProviderMixError(token);\n                    }\n                }\n                else {\n                    // Create a placeholder factory which will look up the constituents of the multi provider.\n                    records.set(token, multiProvider = {\n                        token: provider.provide,\n                        deps: [],\n                        useNew: false,\n                        fn: MULTI_PROVIDER_FN,\n                        value: EMPTY\n                    });\n                }\n                // Treat the provider as the token.\n                token = provider;\n                multiProvider.deps.push({ token: token, options: 6 /* Default */ });\n            }\n            var record = records.get(token);\n            if (record && record.fn == MULTI_PROVIDER_FN) {\n                throw multiProviderMixError(token);\n            }\n            records.set(token, resolvedProvider);\n        }\n        else {\n            throw staticError('Unexpected provider', provider);\n        }\n    }\n}\nfunction tryResolveToken(token, record, records, parent, notFoundValue, flags) {\n    try {\n        return resolveToken(token, record, records, parent, notFoundValue, flags);\n    }\n    catch (e) {\n        // ensure that 'e' is of type Error.\n        if (!(e instanceof Error)) {\n            e = new Error(e);\n        }\n        var path$$1 = e[NG_TEMP_TOKEN_PATH] = e[NG_TEMP_TOKEN_PATH] || [];\n        path$$1.unshift(token);\n        if (record && record.value == CIRCULAR) {\n            // Reset the Circular flag.\n            record.value = EMPTY;\n        }\n        throw e;\n    }\n}\nfunction resolveToken(token, record, records, parent, notFoundValue, flags) {\n    var value;\n    if (record && !(flags & 1 /* SkipSelf */)) {\n        // If we don't have a record, this implies that we don't own the provider hence don't know how\n        // to resolve it.\n        value = record.value;\n        if (value == CIRCULAR) {\n            throw Error(NO_NEW_LINE + 'Circular dependency');\n        }\n        else if (value === EMPTY) {\n            record.value = CIRCULAR;\n            var obj = undefined;\n            var useNew = record.useNew;\n            var fn = record.fn;\n            var depRecords = record.deps;\n            var deps = EMPTY;\n            if (depRecords.length) {\n                deps = [];\n                for (var i = 0; i < depRecords.length; i++) {\n                    var depRecord = depRecords[i];\n                    var options = depRecord.options;\n                    var childRecord = options & 2 /* CheckSelf */ ? records.get(depRecord.token) : undefined;\n                    deps.push(tryResolveToken(\n                    // Current Token to resolve\n                    depRecord.token, childRecord, records, \n                    // If we don't know how to resolve dependency and we should not check parent for it,\n                    // than pass in Null injector.\n                    !childRecord && !(options & 4 /* CheckParent */) ? NULL_INJECTOR : parent, options & 1 /* Optional */ ? null : Injector.THROW_IF_NOT_FOUND, 0 /* Default */));\n                }\n            }\n            record.value = value = useNew ? new ((_a = fn).bind.apply(_a, __spread([void 0], deps)))() : fn.apply(obj, deps);\n        }\n    }\n    else if (!(flags & 2 /* Self */)) {\n        value = parent.get(token, notFoundValue, 0 /* Default */);\n    }\n    return value;\n    var _a;\n}\nfunction computeDeps(provider) {\n    var deps = EMPTY;\n    var providerDeps = provider.deps;\n    if (providerDeps && providerDeps.length) {\n        deps = [];\n        for (var i = 0; i < providerDeps.length; i++) {\n            var options = 6;\n            var token = resolveForwardRef$1(providerDeps[i]);\n            if (token instanceof Array) {\n                for (var j = 0, annotations = token; j < annotations.length; j++) {\n                    var annotation = annotations[j];\n                    if (annotation instanceof Optional || annotation == Optional) {\n                        options = options | 1 /* Optional */;\n                    }\n                    else if (annotation instanceof SkipSelf || annotation == SkipSelf) {\n                        options = options & ~2 /* CheckSelf */;\n                    }\n                    else if (annotation instanceof Self || annotation == Self) {\n                        options = options & ~4 /* CheckParent */;\n                    }\n                    else if (annotation instanceof Inject) {\n                        token = annotation.token;\n                    }\n                    else {\n                        token = resolveForwardRef$1(annotation);\n                    }\n                }\n            }\n            deps.push({ token: token, options: options });\n        }\n    }\n    else if (provider.useExisting) {\n        var token = resolveForwardRef$1(provider.useExisting);\n        deps = [{ token: token, options: 6 /* Default */ }];\n    }\n    else if (!providerDeps && !(USE_VALUE$2 in provider)) {\n        // useValue & useExisting are the only ones which are exempt from deps all others need it.\n        throw staticError('\\'deps\\' required', provider);\n    }\n    return deps;\n}\nfunction formatError(text, obj, source) {\n    if (source === void 0) { source = null; }\n    text = text && text.charAt(0) === '\\n' && text.charAt(1) == NO_NEW_LINE ? text.substr(2) : text;\n    var context = stringify$1(obj);\n    if (obj instanceof Array) {\n        context = obj.map(stringify$1).join(' -> ');\n    }\n    else if (typeof obj === 'object') {\n        var parts = [];\n        for (var key in obj) {\n            if (obj.hasOwnProperty(key)) {\n                var value = obj[key];\n                parts.push(key + ':' + (typeof value === 'string' ? JSON.stringify(value) : stringify$1(value)));\n            }\n        }\n        context = \"{\" + parts.join(', ') + \"}\";\n    }\n    return \"StaticInjectorError\" + (source ? '(' + source + ')' : '') + \"[\" + context + \"]: \" + text.replace(NEW_LINE, '\\n  ');\n}\nfunction staticError(text, obj) {\n    return new Error(formatError(text, obj));\n}\nfunction getClosureSafeProperty$1(objWithPropertyToExtract) {\n    for (var key in objWithPropertyToExtract) {\n        if (objWithPropertyToExtract[key] === GET_PROPERTY_NAME$1) {\n            return key;\n        }\n    }\n    throw Error('!prop');\n}\nvar _currentInjector = null;\nfunction setCurrentInjector(injector) {\n    var former = _currentInjector;\n    _currentInjector = injector;\n    return former;\n}\nfunction inject(token, notFoundValue, flags) {\n    if (flags === void 0) { flags = 0 /* Default */; }\n    if (_currentInjector === null) {\n        throw new Error(\"inject() must be called from an injection context\");\n    }\n    return _currentInjector.get(token, notFoundValue, flags);\n}\nfunction injectArgs(types) {\n    var args = [];\n    for (var i = 0; i < types.length; i++) {\n        var arg = types[i];\n        if (Array.isArray(arg)) {\n            if (arg.length === 0) {\n                throw new Error('Arguments array must have arguments.');\n            }\n            var type = undefined;\n            var defaultValue = undefined;\n            for (var j = 0; j < arg.length; j++) {\n                var meta = arg[j];\n                if (meta instanceof Optional || meta.__proto__.ngMetadataName === 'Optional') {\n                    defaultValue = null;\n                }\n                else if (meta instanceof SkipSelf || meta.__proto__.ngMetadataName === 'SkipSelf') {\n                    \n                }\n                else if (meta instanceof Self || meta.__proto__.ngMetadataName === 'Self') {\n                    \n                }\n                else if (meta instanceof Inject) {\n                    type = meta.token;\n                }\n                else {\n                    type = meta;\n                }\n            }\n            args.push(inject((type), defaultValue, 0 /* Default */));\n        }\n        else {\n            args.push(inject(arg));\n        }\n    }\n    return args;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar GET_PROPERTY_NAME = {};\nvar 0 = GET_PROPERTY_NAME;\nvar USE_VALUE$1 = getClosureSafeProperty({ provide: String, useValue: 0 }, GET_PROPERTY_NAME);\nvar EMPTY_ARRAY$1 = [];\nfunction convertInjectableProviderToFactory(type, provider) {\n    if (!provider) {\n        var reflectionCapabilities = new ReflectionCapabilities();\n        var deps_1 = reflectionCapabilities.parameters(type);\n        // TODO - convert to flags.\n        return function () { return new (type.bind.apply(type, __spread([void 0], injectArgs(deps_1))))(); };\n    }\n    if (USE_VALUE$1 in provider) {\n        var valueProvider_1 = provider;\n        return function () { return valueProvider_1.useValue; };\n    }\n    else if (provider.useExisting) {\n        var existingProvider_1 = provider;\n        return function () { return inject(existingProvider_1.useExisting); };\n    }\n    else if (provider.useFactory) {\n        var factoryProvider_1 = provider;\n        return function () { return factoryProvider_1.useFactory.apply(factoryProvider_1, __spread(injectArgs(factoryProvider_1.deps || EMPTY_ARRAY$1))); };\n    }\n    else if (provider.useClass) {\n        var classProvider_1 = provider;\n        var deps_2 = provider.deps;\n        if (!deps_2) {\n            var reflectionCapabilities = new ReflectionCapabilities();\n            deps_2 = reflectionCapabilities.parameters(type);\n        }\n        return function () {\n            return new ((_a = classProvider_1.useClass).bind.apply(_a, __spread([void 0], injectArgs(deps_2))))();\n            var _a;\n        };\n    }\n    else {\n        var deps_3 = provider.deps;\n        if (!deps_3) {\n            var reflectionCapabilities = new ReflectionCapabilities();\n            deps_3 = reflectionCapabilities.parameters(type);\n        }\n        return function () { return new (type.bind.apply(type, __spread([void 0], injectArgs((deps_3)))))(); };\n    }\n}\n/**\n* Injectable decorator and metadata.\n*\n*\n* @Annotation\n*/\nvar Injectable = makeDecorator('Injectable', undefined, undefined, undefined, function (injectableType, options) {\n    if (options && options.providedIn !== undefined &&\n        injectableType.ngInjectableDef === undefined) {\n        injectableType.ngInjectableDef = defineInjectable({\n            providedIn: options.providedIn,\n            factory: convertInjectableProviderToFactory(injectableType, options)\n        });\n    }\n});\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Defines a schema that will allow:\n * - any non-Angular elements with a `-` in their name,\n * - any properties on elements with a `-` in their name which is the common rule for custom\n * elements.\n *\n *\n */\n\n/**\n * Defines a schema that will allow any property on any element.\n *\n * @experimental\n */\n\n/**\n * NgModule decorator and metadata.\n *\n *\n * @Annotation\n */\nvar NgModule = makeDecorator('NgModule', function (ngModule) { return ngModule; }, undefined, undefined, function (moduleType, metadata) {\n    var imports = (metadata && metadata.imports) || [];\n    if (metadata && metadata.exports) {\n        imports = __spread(imports, [metadata.exports]);\n    }\n    moduleType.ngInjectorDef = defineInjector({\n        factory: convertInjectableProviderToFactory(moduleType, { useClass: moduleType }),\n        providers: metadata && metadata.providers,\n        imports: imports,\n    });\n});\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Defines template and style encapsulation options available for Component's {@link Component}.\n *\n * See {@link Component#encapsulation encapsulation}.\n *\n */\n/**\n * Defines template and style encapsulation options available for Component's {@link Component}.\n *\n * See {@link Component#encapsulation encapsulation}.\n *\n */\nvar ViewEncapsulation$1;\n/**\n * Defines template and style encapsulation options available for Component's {@link Component}.\n *\n * See {@link Component#encapsulation encapsulation}.\n *\n */\n(function (ViewEncapsulation) {\n    /**\n     * Emulate `Native` scoping of styles by adding an attribute containing surrogate id to the Host\n     * Element and pre-processing the style rules provided via {@link Component#styles styles} or\n     * {@link Component#styleUrls styleUrls}, and adding the new Host Element attribute to all\n     * selectors.\n     *\n     * This is the default option.\n     */\n    ViewEncapsulation[ViewEncapsulation[\"Emulated\"] = 0] = \"Emulated\";\n    /**\n     * Use the native encapsulation mechanism of the renderer.\n     *\n     * For the DOM this means using [Shadow DOM](https://w3c.github.io/webcomponents/spec/shadow/) and\n     * creating a ShadowRoot for Component's Host Element.\n     */\n    ViewEncapsulation[ViewEncapsulation[\"Native\"] = 1] = \"Native\";\n    /**\n     * Don't provide any template or style encapsulation.\n     */\n    ViewEncapsulation[ViewEncapsulation[\"None\"] = 2] = \"None\";\n})(ViewEncapsulation$1 || (ViewEncapsulation$1 = {}));\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * @description Represents the version of Angular\n *\n *\n */\nvar Version$1 = /** @class */ (function () {\n    function Version(full) {\n        this.full = full;\n        this.major = full.split('.')[0];\n        this.minor = full.split('.')[1];\n        this.patch = full.split('.').slice(2).join('.');\n    }\n    return Version;\n}());\n/**\n *\n */\nvar VERSION$2 = new Version$1('6.0.0-rc.4');\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nvar ERROR_DEBUG_CONTEXT = 'ngDebugContext';\nvar ERROR_ORIGINAL_ERROR = 'ngOriginalError';\nvar ERROR_LOGGER = 'ngErrorLogger';\n\nfunction getDebugContext(error) {\n    return error[ERROR_DEBUG_CONTEXT];\n}\nfunction getOriginalError(error) {\n    return error[ERROR_ORIGINAL_ERROR];\n}\nfunction getErrorLogger(error) {\n    return error[ERROR_LOGGER] || defaultErrorLogger;\n}\nfunction defaultErrorLogger(console) {\n    var values = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        values[_i - 1] = arguments[_i];\n    }\n    console.error.apply(console, __spread(values));\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n *\n * @description\n * Provides a hook for centralized exception handling.\n *\n * The default implementation of `ErrorHandler` prints error messages to the `console`. To\n * intercept error handling, write a custom exception handler that replaces this default as\n * appropriate for your app.\n *\n * ### Example\n *\n * ```\n * class MyErrorHandler implements ErrorHandler {\n *   handleError(error) {\n *     // do something with the exception\n *   }\n * }\n *\n * @NgModule({\n *   providers: [{provide: ErrorHandler, useClass: MyErrorHandler}]\n * })\n * class MyModule {}\n * ```\n *\n *\n */\nvar ErrorHandler = /** @class */ (function () {\n    function ErrorHandler() {\n        /**\n           * @internal\n           */\n        this._console = console;\n    }\n    ErrorHandler.prototype.handleError = function (error) {\n        var originalError = this._findOriginalError(error);\n        var context = this._findContext(error);\n        // Note: Browser consoles show the place from where console.error was called.\n        // We can use this to give users additional information about the error.\n        var errorLogger = getErrorLogger(error);\n        errorLogger(this._console, \"ERROR\", error);\n        if (originalError) {\n            errorLogger(this._console, \"ORIGINAL ERROR\", originalError);\n        }\n        if (context) {\n            errorLogger(this._console, 'ERROR CONTEXT', context);\n        }\n    };\n    /** @internal */\n    /** @internal */\n    ErrorHandler.prototype._findContext = /** @internal */\n    function (error) {\n        if (error) {\n            return getDebugContext(error) ? getDebugContext(error) :\n                this._findContext(getOriginalError(error));\n        }\n        return null;\n    };\n    /** @internal */\n    /** @internal */\n    ErrorHandler.prototype._findOriginalError = /** @internal */\n    function (error) {\n        var e = getOriginalError(error);\n        while (e && getOriginalError(e)) {\n            e = getOriginalError(e);\n        }\n        return e;\n    };\n    return ErrorHandler;\n}());\nfunction wrappedError(message, originalError) {\n    var msg = message + \" caused by: \" + (originalError instanceof Error ? originalError.message : originalError);\n    var error = Error(msg);\n    error[ERROR_ORIGINAL_ERROR] = originalError;\n    return error;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nfunction findFirstClosedCycle(keys) {\n    var res = [];\n    for (var i = 0; i < keys.length; ++i) {\n        if (res.indexOf(keys[i]) > -1) {\n            res.push(keys[i]);\n            return res;\n        }\n        res.push(keys[i]);\n    }\n    return res;\n}\nfunction constructResolvingPath(keys) {\n    if (keys.length > 1) {\n        var reversed = findFirstClosedCycle(keys.slice().reverse());\n        var tokenStrs = reversed.map(function (k) { return stringify$1(k.token); });\n        return ' (' + tokenStrs.join(' -> ') + ')';\n    }\n    return '';\n}\nfunction injectionError(injector, key, constructResolvingMessage, originalError) {\n    var keys = [key];\n    var errMsg = constructResolvingMessage(keys);\n    var error = (originalError ? wrappedError(errMsg, originalError) : Error(errMsg));\n    error.addKey = addKey;\n    error.keys = keys;\n    error.injectors = [injector];\n    error.constructResolvingMessage = constructResolvingMessage;\n    error[ERROR_ORIGINAL_ERROR] = originalError;\n    return error;\n}\nfunction addKey(injector, key) {\n    this.injectors.push(injector);\n    this.keys.push(key);\n    // Note: This updated message won't be reflected in the `.stack` property\n    this.message = this.constructResolvingMessage(this.keys);\n}\n/**\n * Thrown when trying to retrieve a dependency by key from {@link Injector}, but the\n * {@link Injector} does not have a {@link Provider} for the given key.\n *\n * ### Example ([live demo](http://plnkr.co/edit/vq8D3FRB9aGbnWJqtEPE?p=preview))\n *\n * ```typescript\n * class A {\n *   constructor(b:B) {}\n * }\n *\n * expect(() => Injector.resolveAndCreate([A])).toThrowError();\n * ```\n */\nfunction noProviderError(injector, key) {\n    return injectionError(injector, key, function (keys) {\n        var first = stringify$1(keys[0].token);\n        return \"No provider for \" + first + \"!\" + constructResolvingPath(keys);\n    });\n}\n/**\n * Thrown when dependencies form a cycle.\n *\n * ### Example ([live demo](http://plnkr.co/edit/wYQdNos0Tzql3ei1EV9j?p=info))\n *\n * ```typescript\n * var injector = Injector.resolveAndCreate([\n *   {provide: \"one\", useFactory: (two) => \"two\", deps: [[new Inject(\"two\")]]},\n *   {provide: \"two\", useFactory: (one) => \"one\", deps: [[new Inject(\"one\")]]}\n * ]);\n *\n * expect(() => injector.get(\"one\")).toThrowError();\n * ```\n *\n * Retrieving `A` or `B` throws a `CyclicDependencyError` as the graph above cannot be constructed.\n */\nfunction cyclicDependencyError(injector, key) {\n    return injectionError(injector, key, function (keys) {\n        return \"Cannot instantiate cyclic dependency!\" + constructResolvingPath(keys);\n    });\n}\n/**\n * Thrown when a constructing type returns with an Error.\n *\n * The `InstantiationError` class contains the original error plus the dependency graph which caused\n * this object to be instantiated.\n *\n * ### Example ([live demo](http://plnkr.co/edit/7aWYdcqTQsP0eNqEdUAf?p=preview))\n *\n * ```typescript\n * class A {\n *   constructor() {\n *     throw new Error('message');\n *   }\n * }\n *\n * var injector = Injector.resolveAndCreate([A]);\n\n * try {\n *   injector.get(A);\n * } catch (e) {\n *   expect(e instanceof InstantiationError).toBe(true);\n *   expect(e.originalException.message).toEqual(\"message\");\n *   expect(e.originalStack).toBeDefined();\n * }\n * ```\n */\nfunction instantiationError(injector, originalException, originalStack, key) {\n    return injectionError(injector, key, function (keys) {\n        var first = stringify$1(keys[0].token);\n        return originalException.message + \": Error during instantiation of \" + first + \"!\" + constructResolvingPath(keys) + \".\";\n    }, originalException);\n}\n/**\n * Thrown when an object other then {@link Provider} (or `Type`) is passed to {@link Injector}\n * creation.\n *\n * ### Example ([live demo](http://plnkr.co/edit/YatCFbPAMCL0JSSQ4mvH?p=preview))\n *\n * ```typescript\n * expect(() => Injector.resolveAndCreate([\"not a type\"])).toThrowError();\n * ```\n */\nfunction invalidProviderError(provider) {\n    return Error(\"Invalid provider - only instances of Provider and Type are allowed, got: \" + provider);\n}\n/**\n * Thrown when the class has no annotation information.\n *\n * Lack of annotation information prevents the {@link Injector} from determining which dependencies\n * need to be injected into the constructor.\n *\n * ### Example ([live demo](http://plnkr.co/edit/rHnZtlNS7vJOPQ6pcVkm?p=preview))\n *\n * ```typescript\n * class A {\n *   constructor(b) {}\n * }\n *\n * expect(() => Injector.resolveAndCreate([A])).toThrowError();\n * ```\n *\n * This error is also thrown when the class not marked with {@link Injectable} has parameter types.\n *\n * ```typescript\n * class B {}\n *\n * class A {\n *   constructor(b:B) {} // no information about the parameter types of A is available at runtime.\n * }\n *\n * expect(() => Injector.resolveAndCreate([A,B])).toThrowError();\n * ```\n *\n */\nfunction noAnnotationError(typeOrFunc, params) {\n    var signature = [];\n    for (var i = 0, ii = params.length; i < ii; i++) {\n        var parameter = params[i];\n        if (!parameter || parameter.length == 0) {\n            signature.push('?');\n        }\n        else {\n            signature.push(parameter.map(stringify$1).join(' '));\n        }\n    }\n    return Error('Cannot resolve all parameters for \\'' + stringify$1(typeOrFunc) + '\\'(' +\n        signature.join(', ') + '). ' +\n        'Make sure that all the parameters are decorated with Inject or have valid type annotations and that \\'' +\n        stringify$1(typeOrFunc) + '\\' is decorated with Injectable.');\n}\n/**\n * Thrown when getting an object by index.\n *\n * ### Example ([live demo](http://plnkr.co/edit/bRs0SX2OTQiJzqvjgl8P?p=preview))\n *\n * ```typescript\n * class A {}\n *\n * var injector = Injector.resolveAndCreate([A]);\n *\n * expect(() => injector.getAt(100)).toThrowError();\n * ```\n *\n */\nfunction outOfBoundsError(index) {\n    return Error(\"Index \" + index + \" is out-of-bounds.\");\n}\n// TODO: add a working example after alpha38 is released\n/**\n * Thrown when a multi provider and a regular provider are bound to the same token.\n *\n * ### Example\n *\n * ```typescript\n * expect(() => Injector.resolveAndCreate([\n *   { provide: \"Strings\", useValue: \"string1\", multi: true},\n *   { provide: \"Strings\", useValue: \"string2\", multi: false}\n * ])).toThrowError();\n * ```\n */\nfunction mixingMultiProvidersWithRegularProvidersError(provider1, provider2) {\n    return Error(\"Cannot mix multi providers and regular providers, got: \" + provider1 + \" \" + provider2);\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * A unique object used for retrieving items from the {@link ReflectiveInjector}.\n *\n * Keys have:\n * - a system-wide unique `id`.\n * - a `token`.\n *\n * `Key` is used internally by {@link ReflectiveInjector} because its system-wide unique `id` allows\n * the\n * injector to store created objects in a more efficient way.\n *\n * `Key` should not be created directly. {@link ReflectiveInjector} creates keys automatically when\n * resolving\n * providers.\n * @deprecated No replacement\n */\nvar ReflectiveKey = /** @class */ (function () {\n    /**\n     * Private\n     */\n    function ReflectiveKey(token, id) {\n        this.token = token;\n        this.id = id;\n        if (!token) {\n            throw new Error('Token must be defined!');\n        }\n        this.displayName = stringify$1(this.token);\n    }\n    /**\n     * Retrieves a `Key` for a token.\n     */\n    /**\n       * Retrieves a `Key` for a token.\n       */\n    ReflectiveKey.get = /**\n       * Retrieves a `Key` for a token.\n       */\n    function (token) {\n        return _globalKeyRegistry.get(resolveForwardRef$1(token));\n    };\n    Object.defineProperty(ReflectiveKey, \"numberOfKeys\", {\n        /**\n         * @returns the number of keys registered in the system.\n         */\n        get: /**\n           * @returns the number of keys registered in the system.\n           */\n        function () { return _globalKeyRegistry.numberOfKeys; },\n        enumerable: true,\n        configurable: true\n    });\n    return ReflectiveKey;\n}());\nvar KeyRegistry = /** @class */ (function () {\n    function KeyRegistry() {\n        this._allKeys = new Map();\n    }\n    KeyRegistry.prototype.get = function (token) {\n        if (token instanceof ReflectiveKey)\n            return token;\n        if (this._allKeys.has(token)) {\n            return this._allKeys.get(token);\n        }\n        var newKey = new ReflectiveKey(token, ReflectiveKey.numberOfKeys);\n        this._allKeys.set(token, newKey);\n        return newKey;\n    };\n    Object.defineProperty(KeyRegistry.prototype, \"numberOfKeys\", {\n        get: function () { return this._allKeys.size; },\n        enumerable: true,\n        configurable: true\n    });\n    return KeyRegistry;\n}());\nvar _globalKeyRegistry = new KeyRegistry();\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Provides access to reflection data about symbols. Used internally by Angular\n * to power dependency injection and compilation.\n */\nvar Reflector = /** @class */ (function () {\n    function Reflector(reflectionCapabilities) {\n        this.reflectionCapabilities = reflectionCapabilities;\n    }\n    Reflector.prototype.updateCapabilities = function (caps) { this.reflectionCapabilities = caps; };\n    Reflector.prototype.factory = function (type) { return this.reflectionCapabilities.factory(type); };\n    Reflector.prototype.parameters = function (typeOrFunc) {\n        return this.reflectionCapabilities.parameters(typeOrFunc);\n    };\n    Reflector.prototype.annotations = function (typeOrFunc) {\n        return this.reflectionCapabilities.annotations(typeOrFunc);\n    };\n    Reflector.prototype.propMetadata = function (typeOrFunc) {\n        return this.reflectionCapabilities.propMetadata(typeOrFunc);\n    };\n    Reflector.prototype.hasLifecycleHook = function (type, lcProperty) {\n        return this.reflectionCapabilities.hasLifecycleHook(type, lcProperty);\n    };\n    Reflector.prototype.getter = function (name) { return this.reflectionCapabilities.getter(name); };\n    Reflector.prototype.setter = function (name) { return this.reflectionCapabilities.setter(name); };\n    Reflector.prototype.method = function (name) { return this.reflectionCapabilities.method(name); };\n    Reflector.prototype.importUri = function (type) { return this.reflectionCapabilities.importUri(type); };\n    Reflector.prototype.resourceUri = function (type) { return this.reflectionCapabilities.resourceUri(type); };\n    Reflector.prototype.resolveIdentifier = function (name, moduleUrl, members, runtime) {\n        return this.reflectionCapabilities.resolveIdentifier(name, moduleUrl, members, runtime);\n    };\n    Reflector.prototype.resolveEnum = function (identifier, name) {\n        return this.reflectionCapabilities.resolveEnum(identifier, name);\n    };\n    return Reflector;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * The {@link Reflector} used internally in Angular to access metadata\n * about symbols.\n */\nvar reflector = new Reflector(new ReflectionCapabilities());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * `Dependency` is used by the framework to extend DI.\n * This is internal to Angular and should not be used directly.\n */\nvar ReflectiveDependency = /** @class */ (function () {\n    function ReflectiveDependency(key, optional, visibility) {\n        this.key = key;\n        this.optional = optional;\n        this.visibility = visibility;\n    }\n    ReflectiveDependency.fromKey = function (key) {\n        return new ReflectiveDependency(key, false, null);\n    };\n    return ReflectiveDependency;\n}());\nvar _EMPTY_LIST = [];\nvar ResolvedReflectiveProvider_ = /** @class */ (function () {\n    function ResolvedReflectiveProvider_(key, resolvedFactories, multiProvider) {\n        this.key = key;\n        this.resolvedFactories = resolvedFactories;\n        this.multiProvider = multiProvider;\n        this.resolvedFactory = this.resolvedFactories[0];\n    }\n    return ResolvedReflectiveProvider_;\n}());\n/**\n * An internal resolved representation of a factory function created by resolving {@link\n * Provider}.\n * @experimental\n */\nvar ResolvedReflectiveFactory = /** @class */ (function () {\n    function ResolvedReflectiveFactory(/**\n           * Factory function which can return an instance of an object represented by a key.\n           */\n    factory, /**\n           * Arguments (dependencies) to the `factory` function.\n           */\n    dependencies) {\n        this.factory = factory;\n        this.dependencies = dependencies;\n    }\n    return ResolvedReflectiveFactory;\n}());\n/**\n * Resolve a single provider.\n */\nfunction resolveReflectiveFactory(provider) {\n    var factoryFn;\n    var resolvedDeps;\n    if (provider.useClass) {\n        var useClass = resolveForwardRef$1(provider.useClass);\n        factoryFn = reflector.factory(useClass);\n        resolvedDeps = _dependenciesFor(useClass);\n    }\n    else if (provider.useExisting) {\n        factoryFn = function (aliasInstance) { return aliasInstance; };\n        resolvedDeps = [ReflectiveDependency.fromKey(ReflectiveKey.get(provider.useExisting))];\n    }\n    else if (provider.useFactory) {\n        factoryFn = provider.useFactory;\n        resolvedDeps = constructDependencies(provider.useFactory, provider.deps);\n    }\n    else {\n        factoryFn = function () { return provider.useValue; };\n        resolvedDeps = _EMPTY_LIST;\n    }\n    return new ResolvedReflectiveFactory(factoryFn, resolvedDeps);\n}\n/**\n * Converts the {@link Provider} into {@link ResolvedProvider}.\n *\n * {@link Injector} internally only uses {@link ResolvedProvider}, {@link Provider} contains\n * convenience provider syntax.\n */\nfunction resolveReflectiveProvider(provider) {\n    return new ResolvedReflectiveProvider_(ReflectiveKey.get(provider.provide), [resolveReflectiveFactory(provider)], provider.multi || false);\n}\n/**\n * Resolve a list of Providers.\n */\nfunction resolveReflectiveProviders(providers) {\n    var normalized = _normalizeProviders(providers, []);\n    var resolved = normalized.map(resolveReflectiveProvider);\n    var resolvedProviderMap = mergeResolvedReflectiveProviders(resolved, new Map());\n    return Array.from(resolvedProviderMap.values());\n}\n/**\n * Merges a list of ResolvedProviders into a list where\n * each key is contained exactly once and multi providers\n * have been merged.\n */\nfunction mergeResolvedReflectiveProviders(providers, normalizedProvidersMap) {\n    for (var i = 0; i < providers.length; i++) {\n        var provider = providers[i];\n        var existing = normalizedProvidersMap.get(provider.key.id);\n        if (existing) {\n            if (provider.multiProvider !== existing.multiProvider) {\n                throw mixingMultiProvidersWithRegularProvidersError(existing, provider);\n            }\n            if (provider.multiProvider) {\n                for (var j = 0; j < provider.resolvedFactories.length; j++) {\n                    existing.resolvedFactories.push(provider.resolvedFactories[j]);\n                }\n            }\n            else {\n                normalizedProvidersMap.set(provider.key.id, provider);\n            }\n        }\n        else {\n            var resolvedProvider = void 0;\n            if (provider.multiProvider) {\n                resolvedProvider = new ResolvedReflectiveProvider_(provider.key, provider.resolvedFactories.slice(), provider.multiProvider);\n            }\n            else {\n                resolvedProvider = provider;\n            }\n            normalizedProvidersMap.set(provider.key.id, resolvedProvider);\n        }\n    }\n    return normalizedProvidersMap;\n}\nfunction _normalizeProviders(providers, res) {\n    providers.forEach(function (b) {\n        if (b instanceof Type$2) {\n            res.push({ provide: b, useClass: b });\n        }\n        else if (b && typeof b == 'object' && b.provide !== undefined) {\n            res.push(b);\n        }\n        else if (b instanceof Array) {\n            _normalizeProviders(b, res);\n        }\n        else {\n            throw invalidProviderError(b);\n        }\n    });\n    return res;\n}\nfunction constructDependencies(typeOrFunc, dependencies) {\n    if (!dependencies) {\n        return _dependenciesFor(typeOrFunc);\n    }\n    else {\n        var params_1 = dependencies.map(function (t) { return [t]; });\n        return dependencies.map(function (t) { return _extractToken(typeOrFunc, t, params_1); });\n    }\n}\nfunction _dependenciesFor(typeOrFunc) {\n    var params = reflector.parameters(typeOrFunc);\n    if (!params)\n        return [];\n    if (params.some(function (p) { return p == null; })) {\n        throw noAnnotationError(typeOrFunc, params);\n    }\n    return params.map(function (p) { return _extractToken(typeOrFunc, p, params); });\n}\nfunction _extractToken(typeOrFunc, metadata, params) {\n    var token = null;\n    var optional = false;\n    if (!Array.isArray(metadata)) {\n        if (metadata instanceof Inject) {\n            return _createDependency(metadata.token, optional, null);\n        }\n        else {\n            return _createDependency(metadata, optional, null);\n        }\n    }\n    var visibility = null;\n    for (var i = 0; i < metadata.length; ++i) {\n        var paramMetadata = metadata[i];\n        if (paramMetadata instanceof Type$2) {\n            token = paramMetadata;\n        }\n        else if (paramMetadata instanceof Inject) {\n            token = paramMetadata.token;\n        }\n        else if (paramMetadata instanceof Optional) {\n            optional = true;\n        }\n        else if (paramMetadata instanceof Self || paramMetadata instanceof SkipSelf) {\n            visibility = paramMetadata;\n        }\n        else if (paramMetadata instanceof InjectionToken) {\n            token = paramMetadata;\n        }\n    }\n    token = resolveForwardRef$1(token);\n    if (token != null) {\n        return _createDependency(token, optional, visibility);\n    }\n    else {\n        throw noAnnotationError(typeOrFunc, params);\n    }\n}\nfunction _createDependency(token, optional, visibility) {\n    return new ReflectiveDependency(ReflectiveKey.get(token), optional, visibility);\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n// Threshold for the dynamic version\nvar UNDEFINED = new Object();\n/**\n * A ReflectiveDependency injection container used for instantiating objects and resolving\n * dependencies.\n *\n * An `Injector` is a replacement for a `new` operator, which can automatically resolve the\n * constructor dependencies.\n *\n * In typical use, application code asks for the dependencies in the constructor and they are\n * resolved by the `Injector`.\n *\n * ### Example ([live demo](http://plnkr.co/edit/jzjec0?p=preview))\n *\n * The following example creates an `Injector` configured to create `Engine` and `Car`.\n *\n * ```typescript\n * @Injectable()\n * class Engine {\n * }\n *\n * @Injectable()\n * class Car {\n *   constructor(public engine:Engine) {}\n * }\n *\n * var injector = ReflectiveInjector.resolveAndCreate([Car, Engine]);\n * var car = injector.get(Car);\n * expect(car instanceof Car).toBe(true);\n * expect(car.engine instanceof Engine).toBe(true);\n * ```\n *\n * Notice, we don't use the `new` operator because we explicitly want to have the `Injector`\n * resolve all of the object's dependencies automatically.\n *\n * @deprecated from v5 - slow and brings in a lot of code, Use `Injector.create` instead.\n */\nvar ReflectiveInjector = /** @class */ (function () {\n    function ReflectiveInjector() {\n    }\n    /**\n     * Turns an array of provider definitions into an array of resolved providers.\n     *\n     * A resolution is a process of flattening multiple nested arrays and converting individual\n     * providers into an array of {@link ResolvedReflectiveProvider}s.\n     *\n     * ### Example ([live demo](http://plnkr.co/edit/AiXTHi?p=preview))\n     *\n     * ```typescript\n     * @Injectable()\n     * class Engine {\n     * }\n     *\n     * @Injectable()\n     * class Car {\n     *   constructor(public engine:Engine) {}\n     * }\n     *\n     * var providers = ReflectiveInjector.resolve([Car, [[Engine]]]);\n     *\n     * expect(providers.length).toEqual(2);\n     *\n     * expect(providers[0] instanceof ResolvedReflectiveProvider).toBe(true);\n     * expect(providers[0].key.displayName).toBe(\"Car\");\n     * expect(providers[0].dependencies.length).toEqual(1);\n     * expect(providers[0].factory).toBeDefined();\n     *\n     * expect(providers[1].key.displayName).toBe(\"Engine\");\n     * });\n     * ```\n     *\n     * See {@link ReflectiveInjector#fromResolvedProviders fromResolvedProviders} for more info.\n     */\n    /**\n       * Turns an array of provider definitions into an array of resolved providers.\n       *\n       * A resolution is a process of flattening multiple nested arrays and converting individual\n       * providers into an array of {@link ResolvedReflectiveProvider}s.\n       *\n       * ### Example ([live demo](http://plnkr.co/edit/AiXTHi?p=preview))\n       *\n       * ```typescript\n       * @Injectable()\n       * class Engine {\n       * }\n       *\n       * @Injectable()\n       * class Car {\n       *   constructor(public engine:Engine) {}\n       * }\n       *\n       * var providers = ReflectiveInjector.resolve([Car, [[Engine]]]);\n       *\n       * expect(providers.length).toEqual(2);\n       *\n       * expect(providers[0] instanceof ResolvedReflectiveProvider).toBe(true);\n       * expect(providers[0].key.displayName).toBe(\"Car\");\n       * expect(providers[0].dependencies.length).toEqual(1);\n       * expect(providers[0].factory).toBeDefined();\n       *\n       * expect(providers[1].key.displayName).toBe(\"Engine\");\n       * });\n       * ```\n       *\n       * See {@link ReflectiveInjector#fromResolvedProviders fromResolvedProviders} for more info.\n       */\n    ReflectiveInjector.resolve = /**\n       * Turns an array of provider definitions into an array of resolved providers.\n       *\n       * A resolution is a process of flattening multiple nested arrays and converting individual\n       * providers into an array of {@link ResolvedReflectiveProvider}s.\n       *\n       * ### Example ([live demo](http://plnkr.co/edit/AiXTHi?p=preview))\n       *\n       * ```typescript\n       * @Injectable()\n       * class Engine {\n       * }\n       *\n       * @Injectable()\n       * class Car {\n       *   constructor(public engine:Engine) {}\n       * }\n       *\n       * var providers = ReflectiveInjector.resolve([Car, [[Engine]]]);\n       *\n       * expect(providers.length).toEqual(2);\n       *\n       * expect(providers[0] instanceof ResolvedReflectiveProvider).toBe(true);\n       * expect(providers[0].key.displayName).toBe(\"Car\");\n       * expect(providers[0].dependencies.length).toEqual(1);\n       * expect(providers[0].factory).toBeDefined();\n       *\n       * expect(providers[1].key.displayName).toBe(\"Engine\");\n       * });\n       * ```\n       *\n       * See {@link ReflectiveInjector#fromResolvedProviders fromResolvedProviders} for more info.\n       */\n    function (providers) {\n        return resolveReflectiveProviders(providers);\n    };\n    /**\n     * Resolves an array of providers and creates an injector from those providers.\n     *\n     * The passed-in providers can be an array of `Type`, {@link Provider},\n     * or a recursive array of more providers.\n     *\n     * ### Example ([live demo](http://plnkr.co/edit/ePOccA?p=preview))\n     *\n     * ```typescript\n     * @Injectable()\n     * class Engine {\n     * }\n     *\n     * @Injectable()\n     * class Car {\n     *   constructor(public engine:Engine) {}\n     * }\n     *\n     * var injector = ReflectiveInjector.resolveAndCreate([Car, Engine]);\n     * expect(injector.get(Car) instanceof Car).toBe(true);\n     * ```\n     *\n     * This function is slower than the corresponding `fromResolvedProviders`\n     * because it needs to resolve the passed-in providers first.\n     * See {@link ReflectiveInjector#resolve resolve} and\n     * {@link ReflectiveInjector#fromResolvedProviders fromResolvedProviders}.\n     */\n    /**\n       * Resolves an array of providers and creates an injector from those providers.\n       *\n       * The passed-in providers can be an array of `Type`, {@link Provider},\n       * or a recursive array of more providers.\n       *\n       * ### Example ([live demo](http://plnkr.co/edit/ePOccA?p=preview))\n       *\n       * ```typescript\n       * @Injectable()\n       * class Engine {\n       * }\n       *\n       * @Injectable()\n       * class Car {\n       *   constructor(public engine:Engine) {}\n       * }\n       *\n       * var injector = ReflectiveInjector.resolveAndCreate([Car, Engine]);\n       * expect(injector.get(Car) instanceof Car).toBe(true);\n       * ```\n       *\n       * This function is slower than the corresponding `fromResolvedProviders`\n       * because it needs to resolve the passed-in providers first.\n       * See {@link ReflectiveInjector#resolve resolve} and\n       * {@link ReflectiveInjector#fromResolvedProviders fromResolvedProviders}.\n       */\n    ReflectiveInjector.resolveAndCreate = /**\n       * Resolves an array of providers and creates an injector from those providers.\n       *\n       * The passed-in providers can be an array of `Type`, {@link Provider},\n       * or a recursive array of more providers.\n       *\n       * ### Example ([live demo](http://plnkr.co/edit/ePOccA?p=preview))\n       *\n       * ```typescript\n       * @Injectable()\n       * class Engine {\n       * }\n       *\n       * @Injectable()\n       * class Car {\n       *   constructor(public engine:Engine) {}\n       * }\n       *\n       * var injector = ReflectiveInjector.resolveAndCreate([Car, Engine]);\n       * expect(injector.get(Car) instanceof Car).toBe(true);\n       * ```\n       *\n       * This function is slower than the corresponding `fromResolvedProviders`\n       * because it needs to resolve the passed-in providers first.\n       * See {@link ReflectiveInjector#resolve resolve} and\n       * {@link ReflectiveInjector#fromResolvedProviders fromResolvedProviders}.\n       */\n    function (providers, parent) {\n        var ResolvedReflectiveProviders = ReflectiveInjector.resolve(providers);\n        return ReflectiveInjector.fromResolvedProviders(ResolvedReflectiveProviders, parent);\n    };\n    /**\n     * Creates an injector from previously resolved providers.\n     *\n     * This API is the recommended way to construct injectors in performance-sensitive parts.\n     *\n     * ### Example ([live demo](http://plnkr.co/edit/KrSMci?p=preview))\n     *\n     * ```typescript\n     * @Injectable()\n     * class Engine {\n     * }\n     *\n     * @Injectable()\n     * class Car {\n     *   constructor(public engine:Engine) {}\n     * }\n     *\n     * var providers = ReflectiveInjector.resolve([Car, Engine]);\n     * var injector = ReflectiveInjector.fromResolvedProviders(providers);\n     * expect(injector.get(Car) instanceof Car).toBe(true);\n     * ```\n     * @experimental\n     */\n    /**\n       * Creates an injector from previously resolved providers.\n       *\n       * This API is the recommended way to construct injectors in performance-sensitive parts.\n       *\n       * ### Example ([live demo](http://plnkr.co/edit/KrSMci?p=preview))\n       *\n       * ```typescript\n       * @Injectable()\n       * class Engine {\n       * }\n       *\n       * @Injectable()\n       * class Car {\n       *   constructor(public engine:Engine) {}\n       * }\n       *\n       * var providers = ReflectiveInjector.resolve([Car, Engine]);\n       * var injector = ReflectiveInjector.fromResolvedProviders(providers);\n       * expect(injector.get(Car) instanceof Car).toBe(true);\n       * ```\n       * @experimental\n       */\n    ReflectiveInjector.fromResolvedProviders = /**\n       * Creates an injector from previously resolved providers.\n       *\n       * This API is the recommended way to construct injectors in performance-sensitive parts.\n       *\n       * ### Example ([live demo](http://plnkr.co/edit/KrSMci?p=preview))\n       *\n       * ```typescript\n       * @Injectable()\n       * class Engine {\n       * }\n       *\n       * @Injectable()\n       * class Car {\n       *   constructor(public engine:Engine) {}\n       * }\n       *\n       * var providers = ReflectiveInjector.resolve([Car, Engine]);\n       * var injector = ReflectiveInjector.fromResolvedProviders(providers);\n       * expect(injector.get(Car) instanceof Car).toBe(true);\n       * ```\n       * @experimental\n       */\n    function (providers, parent) {\n        return new ReflectiveInjector_(providers, parent);\n    };\n    return ReflectiveInjector;\n}());\nvar ReflectiveInjector_ = /** @class */ (function () {\n    /**\n     * Private\n     */\n    function ReflectiveInjector_(_providers, _parent) {\n        /** @internal */\n        this._constructionCounter = 0;\n        this._providers = _providers;\n        this.parent = _parent || null;\n        var len = _providers.length;\n        this.keyIds = new Array(len);\n        this.objs = new Array(len);\n        for (var i = 0; i < len; i++) {\n            this.keyIds[i] = _providers[i].key.id;\n            this.objs[i] = UNDEFINED;\n        }\n    }\n    ReflectiveInjector_.prototype.get = function (token, notFoundValue) {\n        if (notFoundValue === void 0) { notFoundValue = THROW_IF_NOT_FOUND; }\n        return this._getByKey(ReflectiveKey.get(token), null, notFoundValue);\n    };\n    ReflectiveInjector_.prototype.resolveAndCreateChild = function (providers) {\n        var ResolvedReflectiveProviders = ReflectiveInjector.resolve(providers);\n        return this.createChildFromResolved(ResolvedReflectiveProviders);\n    };\n    ReflectiveInjector_.prototype.createChildFromResolved = function (providers) {\n        var inj = new ReflectiveInjector_(providers);\n        inj.parent = this;\n        return inj;\n    };\n    ReflectiveInjector_.prototype.resolveAndInstantiate = function (provider) {\n        return this.instantiateResolved(ReflectiveInjector.resolve([provider])[0]);\n    };\n    ReflectiveInjector_.prototype.instantiateResolved = function (provider) {\n        return this._instantiateProvider(provider);\n    };\n    ReflectiveInjector_.prototype.getProviderAtIndex = function (index) {\n        if (index < 0 || index >= this._providers.length) {\n            throw outOfBoundsError(index);\n        }\n        return this._providers[index];\n    };\n    /** @internal */\n    /** @internal */\n    ReflectiveInjector_.prototype._new = /** @internal */\n    function (provider) {\n        if (this._constructionCounter++ > this._getMaxNumberOfObjects()) {\n            throw cyclicDependencyError(this, provider.key);\n        }\n        return this._instantiateProvider(provider);\n    };\n    ReflectiveInjector_.prototype._getMaxNumberOfObjects = function () { return this.objs.length; };\n    ReflectiveInjector_.prototype._instantiateProvider = function (provider) {\n        if (provider.multiProvider) {\n            var res = new Array(provider.resolvedFactories.length);\n            for (var i = 0; i < provider.resolvedFactories.length; ++i) {\n                res[i] = this._instantiate(provider, provider.resolvedFactories[i]);\n            }\n            return res;\n        }\n        else {\n            return this._instantiate(provider, provider.resolvedFactories[0]);\n        }\n    };\n    ReflectiveInjector_.prototype._instantiate = function (provider, ResolvedReflectiveFactory$$1) {\n        var _this = this;\n        var factory = ResolvedReflectiveFactory$$1.factory;\n        var deps;\n        try {\n            deps =\n                ResolvedReflectiveFactory$$1.dependencies.map(function (dep) { return _this._getByReflectiveDependency(dep); });\n        }\n        catch (e) {\n            if (e.addKey) {\n                e.addKey(this, provider.key);\n            }\n            throw e;\n        }\n        var obj;\n        try {\n            obj = factory.apply(void 0, __spread(deps));\n        }\n        catch (e) {\n            throw instantiationError(this, e, e.stack, provider.key);\n        }\n        return obj;\n    };\n    ReflectiveInjector_.prototype._getByReflectiveDependency = function (dep) {\n        return this._getByKey(dep.key, dep.visibility, dep.optional ? null : THROW_IF_NOT_FOUND);\n    };\n    ReflectiveInjector_.prototype._getByKey = function (key, visibility, notFoundValue) {\n        if (key === ReflectiveInjector_.INJECTOR_KEY) {\n            return this;\n        }\n        if (visibility instanceof Self) {\n            return this._getByKeySelf(key, notFoundValue);\n        }\n        else {\n            return this._getByKeyDefault(key, notFoundValue, visibility);\n        }\n    };\n    ReflectiveInjector_.prototype._getObjByKeyId = function (keyId) {\n        for (var i = 0; i < this.keyIds.length; i++) {\n            if (this.keyIds[i] === keyId) {\n                if (this.objs[i] === UNDEFINED) {\n                    this.objs[i] = this._new(this._providers[i]);\n                }\n                return this.objs[i];\n            }\n        }\n        return UNDEFINED;\n    };\n    /** @internal */\n    /** @internal */\n    ReflectiveInjector_.prototype._throwOrNull = /** @internal */\n    function (key, notFoundValue) {\n        if (notFoundValue !== THROW_IF_NOT_FOUND) {\n            return notFoundValue;\n        }\n        else {\n            throw noProviderError(this, key);\n        }\n    };\n    /** @internal */\n    /** @internal */\n    ReflectiveInjector_.prototype._getByKeySelf = /** @internal */\n    function (key, notFoundValue) {\n        var obj = this._getObjByKeyId(key.id);\n        return (obj !== UNDEFINED) ? obj : this._throwOrNull(key, notFoundValue);\n    };\n    /** @internal */\n    /** @internal */\n    ReflectiveInjector_.prototype._getByKeyDefault = /** @internal */\n    function (key, notFoundValue, visibility) {\n        var inj;\n        if (visibility instanceof SkipSelf) {\n            inj = this.parent;\n        }\n        else {\n            inj = this;\n        }\n        while (inj instanceof ReflectiveInjector_) {\n            var inj_ = inj;\n            var obj = inj_._getObjByKeyId(key.id);\n            if (obj !== UNDEFINED)\n                return obj;\n            inj = inj_.parent;\n        }\n        if (inj !== null) {\n            return inj.get(key.token, notFoundValue);\n        }\n        else {\n            return this._throwOrNull(key, notFoundValue);\n        }\n    };\n    Object.defineProperty(ReflectiveInjector_.prototype, \"displayName\", {\n        get: function () {\n            var providers = _mapProviders(this, function (b) { return ' \"' + b.key.displayName + '\" '; })\n                .join(', ');\n            return \"ReflectiveInjector(providers: [\" + providers + \"])\";\n        },\n        enumerable: true,\n        configurable: true\n    });\n    ReflectiveInjector_.prototype.toString = function () { return this.displayName; };\n    ReflectiveInjector_.INJECTOR_KEY = ReflectiveKey.get(Injector);\n    return ReflectiveInjector_;\n}());\nfunction _mapProviders(injector, fn) {\n    var res = new Array(injector._providers.length);\n    for (var i = 0; i < injector._providers.length; ++i) {\n        res[i] = fn(injector.getProviderAtIndex(i));\n    }\n    return res;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * An internal token whose presence in an injector indicates that the injector should treat itself\n * as a root scoped injector when processing requests for unknown tokens which may indicate\n * they are provided in the root scope.\n */\nvar APP_ROOT = new InjectionToken('The presence of this token marks an injector as being the root injector.');\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Create a new `Injector` which is configured using `InjectorDefType`s.\n *\n * @experimental\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nfunction isFunction(x) {\n    return typeof x === 'function';\n}\n\nvar _enable_super_gross_mode_that_will_cause_bad_things = false;\n/**\n * The global configuration object for RxJS, used to configure things\n * like what Promise contructor should used to create Promises\n */\nvar config = {\n    /**\n     * The promise constructor used by default for methods such as\n     * {@link toPromise} and {@link forEach}\n     */\n    Promise: undefined,\n    /**\n     * If true, turns on synchronous error rethrowing, which is a deprecated behavior\n     * in v6 and higher. This behavior enables bad patterns like wrapping a subscribe\n     * call in a try/catch block. It also enables producer interference, a nasty bug\n     * where a multicast can be broken for all observers by a downstream consumer with\n     * an unhandled error. DO NOT USE THIS FLAG UNLESS IT'S NEEDED TO BY TIME\n     * FOR MIGRATION REASONS.\n     */\n    set useDeprecatedSynchronousErrorHandling(value) {\n        if (value) {\n            var error = new Error();\n            console.warn('DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \\n' + error.stack);\n        }\n        else if (_enable_super_gross_mode_that_will_cause_bad_things) {\n            console.log('RxJS: Back to a better error behavior. Thank you. <3');\n        }\n        _enable_super_gross_mode_that_will_cause_bad_things = value;\n    },\n    get useDeprecatedSynchronousErrorHandling() {\n        return _enable_super_gross_mode_that_will_cause_bad_things;\n    },\n};\n\n/**\n * Throws an error on another job so that it's picked up by the runtime's\n * uncaught error handling mechanism.\n * @param err the error to throw\n */\nfunction hostReportError(err) {\n    setTimeout(function () { throw err; });\n}\n\nvar empty$1 = {\n    closed: true,\n    next: function (value) { },\n    error: function (err) {\n        if (config.useDeprecatedSynchronousErrorHandling) {\n            throw err;\n        }\n        else {\n            hostReportError(err);\n        }\n    },\n    complete: function () { }\n};\n\nvar isArray = Array.isArray || (function (x) { return x && typeof x.length === 'number'; });\n\nfunction isObject(x) {\n    return x != null && typeof x === 'object';\n}\n\n// typeof any so that it we don't have to cast when comparing a result to the error object\nvar errorObject = { e: {} };\n\nvar tryCatchTarget;\nfunction tryCatcher() {\n    try {\n        return tryCatchTarget.apply(this, arguments);\n    }\n    catch (e) {\n        errorObject.e = e;\n        return errorObject;\n    }\n}\nfunction tryCatch(fn) {\n    tryCatchTarget = fn;\n    return tryCatcher;\n}\n\nvar __extends$2 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * An error thrown when one or more errors have occurred during the\n * `unsubscribe` of a {@link Subscription}.\n */\nvar UnsubscriptionError = /** @class */ (function (_super) {\n    __extends$2(UnsubscriptionError, _super);\n    function UnsubscriptionError(errors) {\n        var _this = _super.call(this, errors ?\n            errors.length + \" errors occurred during unsubscription:\\n  \" + errors.map(function (err, i) { return i + 1 + \") \" + err.toString(); }).join('\\n  ') : '') || this;\n        _this.errors = errors;\n        _this.name = 'UnsubscriptionError';\n        Object.setPrototypeOf(_this, UnsubscriptionError.prototype);\n        return _this;\n    }\n    return UnsubscriptionError;\n}(Error));\n\n/**\n * Represents a disposable resource, such as the execution of an Observable. A\n * Subscription has one important method, `unsubscribe`, that takes no argument\n * and just disposes the resource held by the subscription.\n *\n * Additionally, subscriptions may be grouped together through the `add()`\n * method, which will attach a child Subscription to the current Subscription.\n * When a Subscription is unsubscribed, all its children (and its grandchildren)\n * will be unsubscribed as well.\n *\n * @class Subscription\n */\nvar Subscription = /** @class */ (function () {\n    /**\n     * @param {function(): void} [unsubscribe] A function describing how to\n     * perform the disposal of resources when the `unsubscribe` method is called.\n     */\n    function Subscription(unsubscribe) {\n        /**\n         * A flag to indicate whether this Subscription has already been unsubscribed.\n         * @type {boolean}\n         */\n        this.closed = false;\n        /** @internal */\n        this._parent = null;\n        /** @internal */\n        this._parents = null;\n        /** @internal */\n        this._subscriptions = null;\n        if (unsubscribe) {\n            this._unsubscribe = unsubscribe;\n        }\n    }\n    /**\n     * Disposes the resources held by the subscription. May, for instance, cancel\n     * an ongoing Observable execution or cancel any other type of work that\n     * started when the Subscription was created.\n     * @return {void}\n     */\n    Subscription.prototype.unsubscribe = function () {\n        var hasErrors = false;\n        var errors;\n        if (this.closed) {\n            return;\n        }\n        var _a = this, _parent = _a._parent, _parents = _a._parents, _unsubscribe = _a._unsubscribe, _subscriptions = _a._subscriptions;\n        this.closed = true;\n        this._parent = null;\n        this._parents = null;\n        // null out _subscriptions first so any child subscriptions that attempt\n        // to remove themselves from this subscription will noop\n        this._subscriptions = null;\n        var index = -1;\n        var len = _parents ? _parents.length : 0;\n        // if this._parent is null, then so is this._parents, and we\n        // don't have to remove ourselves from any parent subscriptions.\n        while (_parent) {\n            _parent.remove(this);\n            // if this._parents is null or index >= len,\n            // then _parent is set to null, and the loop exits\n            _parent = ++index < len && _parents[index] || null;\n        }\n        if (isFunction(_unsubscribe)) {\n            var trial = tryCatch(_unsubscribe).call(this);\n            if (trial === errorObject) {\n                hasErrors = true;\n                errors = errors || (errorObject.e instanceof UnsubscriptionError ?\n                    flattenUnsubscriptionErrors(errorObject.e.errors) : [errorObject.e]);\n            }\n        }\n        if (isArray(_subscriptions)) {\n            index = -1;\n            len = _subscriptions.length;\n            while (++index < len) {\n                var sub = _subscriptions[index];\n                if (isObject(sub)) {\n                    var trial = tryCatch(sub.unsubscribe).call(sub);\n                    if (trial === errorObject) {\n                        hasErrors = true;\n                        errors = errors || [];\n                        var err = errorObject.e;\n                        if (err instanceof UnsubscriptionError) {\n                            errors = errors.concat(flattenUnsubscriptionErrors(err.errors));\n                        }\n                        else {\n                            errors.push(err);\n                        }\n                    }\n                }\n            }\n        }\n        if (hasErrors) {\n            throw new UnsubscriptionError(errors);\n        }\n    };\n    /**\n     * Adds a tear down to be called during the unsubscribe() of this\n     * Subscription.\n     *\n     * If the tear down being added is a subscription that is already\n     * unsubscribed, is the same reference `add` is being called on, or is\n     * `Subscription.EMPTY`, it will not be added.\n     *\n     * If this subscription is already in an `closed` state, the passed\n     * tear down logic will be executed immediately.\n     *\n     * @param {TeardownLogic} teardown The additional logic to execute on\n     * teardown.\n     * @return {Subscription} Returns the Subscription used or created to be\n     * added to the inner subscriptions list. This Subscription can be used with\n     * `remove()` to remove the passed teardown logic from the inner subscriptions\n     * list.\n     */\n    Subscription.prototype.add = function (teardown) {\n        if (!teardown || (teardown === Subscription.EMPTY)) {\n            return Subscription.EMPTY;\n        }\n        if (teardown === this) {\n            return this;\n        }\n        var subscription = teardown;\n        switch (typeof teardown) {\n            case 'function':\n                subscription = new Subscription(teardown);\n            case 'object':\n                if (subscription.closed || typeof subscription.unsubscribe !== 'function') {\n                    return subscription;\n                }\n                else if (this.closed) {\n                    subscription.unsubscribe();\n                    return subscription;\n                }\n                else if (typeof subscription._addParent !== 'function' /* quack quack */) {\n                    var tmp = subscription;\n                    subscription = new Subscription();\n                    subscription._subscriptions = [tmp];\n                }\n                break;\n            default:\n                throw new Error('unrecognized teardown ' + teardown + ' added to Subscription.');\n        }\n        var subscriptions = this._subscriptions || (this._subscriptions = []);\n        subscriptions.push(subscription);\n        subscription._addParent(this);\n        return subscription;\n    };\n    /**\n     * Removes a Subscription from the internal list of subscriptions that will\n     * unsubscribe during the unsubscribe process of this Subscription.\n     * @param {Subscription} subscription The subscription to remove.\n     * @return {void}\n     */\n    Subscription.prototype.remove = function (subscription) {\n        var subscriptions = this._subscriptions;\n        if (subscriptions) {\n            var subscriptionIndex = subscriptions.indexOf(subscription);\n            if (subscriptionIndex !== -1) {\n                subscriptions.splice(subscriptionIndex, 1);\n            }\n        }\n    };\n    /** @internal */\n    Subscription.prototype._addParent = function (parent) {\n        var _a = this, _parent = _a._parent, _parents = _a._parents;\n        if (!_parent || _parent === parent) {\n            // If we don't have a parent, or the new parent is the same as the\n            // current parent, then set this._parent to the new parent.\n            this._parent = parent;\n        }\n        else if (!_parents) {\n            // If there's already one parent, but not multiple, allocate an Array to\n            // store the rest of the parent Subscriptions.\n            this._parents = [parent];\n        }\n        else if (_parents.indexOf(parent) === -1) {\n            // Only add the new parent to the _parents list if it's not already there.\n            _parents.push(parent);\n        }\n    };\n    /** @nocollapse */\n    Subscription.EMPTY = (function (empty) {\n        empty.closed = true;\n        return empty;\n    }(new Subscription()));\n    return Subscription;\n}());\nfunction flattenUnsubscriptionErrors(errors) {\n    return errors.reduce(function (errs, err) { return errs.concat((err instanceof UnsubscriptionError) ? err.errors : err); }, []);\n}\n\nvar rxSubscriber = (typeof Symbol === 'function' && typeof Symbol.for === 'function')\n    ? Symbol.for('rxSubscriber')\n    : '@@rxSubscriber';\n/**\n * @deprecated use rxSubscriber instead\n */\n\nvar __extends$1 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Implements the {@link Observer} interface and extends the\n * {@link Subscription} class. While the {@link Observer} is the public API for\n * consuming the values of an {@link Observable}, all Observers get converted to\n * a Subscriber, in order to provide Subscription-like capabilities such as\n * `unsubscribe`. Subscriber is a common type in RxJS, and crucial for\n * implementing operators, but it is rarely used as a public API.\n *\n * @class Subscriber<T>\n */\nvar Subscriber = /** @class */ (function (_super) {\n    __extends$1(Subscriber, _super);\n    /**\n     * @param {Observer|function(value: T): void} [destinationOrNext] A partially\n     * defined Observer or a `next` callback function.\n     * @param {function(e: ?any): void} [error] The `error` callback of an\n     * Observer.\n     * @param {function(): void} [complete] The `complete` callback of an\n     * Observer.\n     */\n    function Subscriber(destinationOrNext, error, complete) {\n        var _this = _super.call(this) || this;\n        /** @internal */ _this.syncErrorValue = null;\n        /** @internal */ _this.syncErrorThrown = false;\n        /** @internal */ _this.syncErrorThrowable = false;\n        _this.isStopped = false;\n        switch (arguments.length) {\n            case 0:\n                _this.destination = empty$1;\n                break;\n            case 1:\n                if (!destinationOrNext) {\n                    _this.destination = empty$1;\n                    break;\n                }\n                if (typeof destinationOrNext === 'object') {\n                    // HACK(benlesh): For situations where Node has multiple copies of rxjs in\n                    // node_modules, we cannot rely on `instanceof` checks\n                    if (isTrustedSubscriber(destinationOrNext)) {\n                        var trustedSubscriber = destinationOrNext[rxSubscriber]();\n                        _this.syncErrorThrowable = trustedSubscriber.syncErrorThrowable;\n                        _this.destination = trustedSubscriber;\n                        trustedSubscriber.add(_this);\n                    }\n                    else {\n                        _this.syncErrorThrowable = true;\n                        _this.destination = new SafeSubscriber(_this, destinationOrNext);\n                    }\n                    break;\n                }\n            default:\n                _this.syncErrorThrowable = true;\n                _this.destination = new SafeSubscriber(_this, destinationOrNext, error, complete);\n                break;\n        }\n        return _this;\n    }\n    Subscriber.prototype[rxSubscriber] = function () { return this; };\n    /**\n     * A static factory for a Subscriber, given a (potentially partial) definition\n     * of an Observer.\n     * @param {function(x: ?T): void} [next] The `next` callback of an Observer.\n     * @param {function(e: ?any): void} [error] The `error` callback of an\n     * Observer.\n     * @param {function(): void} [complete] The `complete` callback of an\n     * Observer.\n     * @return {Subscriber<T>} A Subscriber wrapping the (partially defined)\n     * Observer represented by the given arguments.\n     * @nocollapse\n     */\n    Subscriber.create = function (next, error, complete) {\n        var subscriber = new Subscriber(next, error, complete);\n        subscriber.syncErrorThrowable = false;\n        return subscriber;\n    };\n    /**\n     * The {@link Observer} callback to receive notifications of type `next` from\n     * the Observable, with a value. The Observable may call this method 0 or more\n     * times.\n     * @param {T} [value] The `next` value.\n     * @return {void}\n     */\n    Subscriber.prototype.next = function (value) {\n        if (!this.isStopped) {\n            this._next(value);\n        }\n    };\n    /**\n     * The {@link Observer} callback to receive notifications of type `error` from\n     * the Observable, with an attached {@link Error}. Notifies the Observer that\n     * the Observable has experienced an error condition.\n     * @param {any} [err] The `error` exception.\n     * @return {void}\n     */\n    Subscriber.prototype.error = function (err) {\n        if (!this.isStopped) {\n            this.isStopped = true;\n            this._error(err);\n        }\n    };\n    /**\n     * The {@link Observer} callback to receive a valueless notification of type\n     * `complete` from the Observable. Notifies the Observer that the Observable\n     * has finished sending push-based notifications.\n     * @return {void}\n     */\n    Subscriber.prototype.complete = function () {\n        if (!this.isStopped) {\n            this.isStopped = true;\n            this._complete();\n        }\n    };\n    Subscriber.prototype.unsubscribe = function () {\n        if (this.closed) {\n            return;\n        }\n        this.isStopped = true;\n        _super.prototype.unsubscribe.call(this);\n    };\n    Subscriber.prototype._next = function (value) {\n        this.destination.next(value);\n    };\n    Subscriber.prototype._error = function (err) {\n        this.destination.error(err);\n        this.unsubscribe();\n    };\n    Subscriber.prototype._complete = function () {\n        this.destination.complete();\n        this.unsubscribe();\n    };\n    /** @deprecated This is an internal implementation detail, do not use. */\n    Subscriber.prototype._unsubscribeAndRecycle = function () {\n        var _a = this, _parent = _a._parent, _parents = _a._parents;\n        this._parent = null;\n        this._parents = null;\n        this.unsubscribe();\n        this.closed = false;\n        this.isStopped = false;\n        this._parent = _parent;\n        this._parents = _parents;\n        return this;\n    };\n    return Subscriber;\n}(Subscription));\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar SafeSubscriber = /** @class */ (function (_super) {\n    __extends$1(SafeSubscriber, _super);\n    function SafeSubscriber(_parentSubscriber, observerOrNext, error, complete) {\n        var _this = _super.call(this) || this;\n        _this._parentSubscriber = _parentSubscriber;\n        var next;\n        var context = _this;\n        if (isFunction(observerOrNext)) {\n            next = observerOrNext;\n        }\n        else if (observerOrNext) {\n            next = observerOrNext.next;\n            error = observerOrNext.error;\n            complete = observerOrNext.complete;\n            if (observerOrNext !== empty$1) {\n                context = Object.create(observerOrNext);\n                if (isFunction(context.unsubscribe)) {\n                    _this.add(context.unsubscribe.bind(context));\n                }\n                context.unsubscribe = _this.unsubscribe.bind(_this);\n            }\n        }\n        _this._context = context;\n        _this._next = next;\n        _this._error = error;\n        _this._complete = complete;\n        return _this;\n    }\n    SafeSubscriber.prototype.next = function (value) {\n        if (!this.isStopped && this._next) {\n            var _parentSubscriber = this._parentSubscriber;\n            if (!config.useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\n                this.__tryOrUnsub(this._next, value);\n            }\n            else if (this.__tryOrSetError(_parentSubscriber, this._next, value)) {\n                this.unsubscribe();\n            }\n        }\n    };\n    SafeSubscriber.prototype.error = function (err) {\n        if (!this.isStopped) {\n            var _parentSubscriber = this._parentSubscriber;\n            var useDeprecatedSynchronousErrorHandling = config.useDeprecatedSynchronousErrorHandling;\n            if (this._error) {\n                if (!useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\n                    this.__tryOrUnsub(this._error, err);\n                    this.unsubscribe();\n                }\n                else {\n                    this.__tryOrSetError(_parentSubscriber, this._error, err);\n                    this.unsubscribe();\n                }\n            }\n            else if (!_parentSubscriber.syncErrorThrowable) {\n                this.unsubscribe();\n                if (useDeprecatedSynchronousErrorHandling) {\n                    throw err;\n                }\n                hostReportError(err);\n            }\n            else {\n                if (useDeprecatedSynchronousErrorHandling) {\n                    _parentSubscriber.syncErrorValue = err;\n                    _parentSubscriber.syncErrorThrown = true;\n                }\n                else {\n                    hostReportError(err);\n                }\n                this.unsubscribe();\n            }\n        }\n    };\n    SafeSubscriber.prototype.complete = function () {\n        var _this = this;\n        if (!this.isStopped) {\n            var _parentSubscriber = this._parentSubscriber;\n            if (this._complete) {\n                var wrappedComplete = function () { return _this._complete.call(_this._context); };\n                if (!config.useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\n                    this.__tryOrUnsub(wrappedComplete);\n                    this.unsubscribe();\n                }\n                else {\n                    this.__tryOrSetError(_parentSubscriber, wrappedComplete);\n                    this.unsubscribe();\n                }\n            }\n            else {\n                this.unsubscribe();\n            }\n        }\n    };\n    SafeSubscriber.prototype.__tryOrUnsub = function (fn, value) {\n        try {\n            fn.call(this._context, value);\n        }\n        catch (err) {\n            this.unsubscribe();\n            if (config.useDeprecatedSynchronousErrorHandling) {\n                throw err;\n            }\n            else {\n                hostReportError(err);\n            }\n        }\n    };\n    SafeSubscriber.prototype.__tryOrSetError = function (parent, fn, value) {\n        if (!config.useDeprecatedSynchronousErrorHandling) {\n            throw new Error('bad call');\n        }\n        try {\n            fn.call(this._context, value);\n        }\n        catch (err) {\n            if (config.useDeprecatedSynchronousErrorHandling) {\n                parent.syncErrorValue = err;\n                parent.syncErrorThrown = true;\n                return true;\n            }\n            else {\n                hostReportError(err);\n                return true;\n            }\n        }\n        return false;\n    };\n    /** @deprecated This is an internal implementation detail, do not use. */\n    SafeSubscriber.prototype._unsubscribe = function () {\n        var _parentSubscriber = this._parentSubscriber;\n        this._context = null;\n        this._parentSubscriber = null;\n        _parentSubscriber.unsubscribe();\n    };\n    return SafeSubscriber;\n}(Subscriber));\nfunction isTrustedSubscriber(obj) {\n    return obj instanceof Subscriber || ('syncErrorThrowable' in obj && obj[rxSubscriber]);\n}\n\nfunction toSubscriber(nextOrObserver, error, complete) {\n    if (nextOrObserver) {\n        if (nextOrObserver instanceof Subscriber) {\n            return nextOrObserver;\n        }\n        if (nextOrObserver[rxSubscriber]) {\n            return nextOrObserver[rxSubscriber]();\n        }\n    }\n    if (!nextOrObserver && !error && !complete) {\n        return new Subscriber(empty$1);\n    }\n    return new Subscriber(nextOrObserver, error, complete);\n}\n\n/** Symbol.observable or a string \"@@observable\". Used for interop */\nvar observable = typeof Symbol === 'function' && Symbol.observable || '@@observable';\n\n/* tslint:disable:no-empty */\nfunction noop$1() { }\n\n/* tslint:enable:max-line-length */\n\n/* @internal */\nfunction pipeFromArray(fns) {\n    if (!fns) {\n        return noop$1;\n    }\n    if (fns.length === 1) {\n        return fns[0];\n    }\n    return function piped(input) {\n        return fns.reduce(function (prev, fn) { return fn(prev); }, input);\n    };\n}\n\n/**\n * A representation of any set of values over any amount of time. This is the most basic building block\n * of RxJS.\n *\n * @class Observable<T>\n */\nvar Observable = /** @class */ (function () {\n    /**\n     * @constructor\n     * @param {Function} subscribe the function that is called when the Observable is\n     * initially subscribed to. This function is given a Subscriber, to which new values\n     * can be `next`ed, or an `error` method can be called to raise an error, or\n     * `complete` can be called to notify of a successful completion.\n     */\n    function Observable(subscribe) {\n        /** Internal implementation detail, do not use directly. */\n        this._isScalar = false;\n        if (subscribe) {\n            this._subscribe = subscribe;\n        }\n    }\n    /**\n     * Creates a new Observable, with this Observable as the source, and the passed\n     * operator defined as the new observable's operator.\n     * @method lift\n     * @param {Operator} operator the operator defining the operation to take on the observable\n     * @return {Observable} a new observable with the Operator applied\n     */\n    Observable.prototype.lift = function (operator) {\n        var observable$$1 = new Observable();\n        observable$$1.source = this;\n        observable$$1.operator = operator;\n        return observable$$1;\n    };\n    /**\n     * Invokes an execution of an Observable and registers Observer handlers for notifications it will emit.\n     *\n     * <span class=\"informal\">Use it when you have all these Observables, but still nothing is happening.</span>\n     *\n     * `subscribe` is not a regular operator, but a method that calls Observable's internal `subscribe` function. It\n     * might be for example a function that you passed to a {@link create} static factory, but most of the time it is\n     * a library implementation, which defines what and when will be emitted by an Observable. This means that calling\n     * `subscribe` is actually the moment when Observable starts its work, not when it is created, as it is often\n     * thought.\n     *\n     * Apart from starting the execution of an Observable, this method allows you to listen for values\n     * that an Observable emits, as well as for when it completes or errors. You can achieve this in two\n     * following ways.\n     *\n     * The first way is creating an object that implements {@link Observer} interface. It should have methods\n     * defined by that interface, but note that it should be just a regular JavaScript object, which you can create\n     * yourself in any way you want (ES6 class, classic function constructor, object literal etc.). In particular do\n     * not attempt to use any RxJS implementation details to create Observers - you don't need them. Remember also\n     * that your object does not have to implement all methods. If you find yourself creating a method that doesn't\n     * do anything, you can simply omit it. Note however, that if `error` method is not provided, all errors will\n     * be left uncaught.\n     *\n     * The second way is to give up on Observer object altogether and simply provide callback functions in place of its methods.\n     * This means you can provide three functions as arguments to `subscribe`, where first function is equivalent\n     * of a `next` method, second of an `error` method and third of a `complete` method. Just as in case of Observer,\n     * if you do not need to listen for something, you can omit a function, preferably by passing `undefined` or `null`,\n     * since `subscribe` recognizes these functions by where they were placed in function call. When it comes\n     * to `error` function, just as before, if not provided, errors emitted by an Observable will be thrown.\n     *\n     * Whatever style of calling `subscribe` you use, in both cases it returns a Subscription object.\n     * This object allows you to call `unsubscribe` on it, which in turn will stop work that an Observable does and will clean\n     * up all resources that an Observable used. Note that cancelling a subscription will not call `complete` callback\n     * provided to `subscribe` function, which is reserved for a regular completion signal that comes from an Observable.\n     *\n     * Remember that callbacks provided to `subscribe` are not guaranteed to be called asynchronously.\n     * It is an Observable itself that decides when these functions will be called. For example {@link of}\n     * by default emits all its values synchronously. Always check documentation for how given Observable\n     * will behave when subscribed and if its default behavior can be modified with a {@link Scheduler}.\n     *\n     * @example <caption>Subscribe with an Observer</caption>\n     * const sumObserver = {\n     *   sum: 0,\n     *   next(value) {\n     *     console.log('Adding: ' + value);\n     *     this.sum = this.sum + value;\n     *   },\n     *   error() { // We actually could just remove this method,\n     *   },        // since we do not really care about errors right now.\n     *   complete() {\n     *     console.log('Sum equals: ' + this.sum);\n     *   }\n     * };\n     *\n     * Rx.Observable.of(1, 2, 3) // Synchronously emits 1, 2, 3 and then completes.\n     * .subscribe(sumObserver);\n     *\n     * // Logs:\n     * // \"Adding: 1\"\n     * // \"Adding: 2\"\n     * // \"Adding: 3\"\n     * // \"Sum equals: 6\"\n     *\n     *\n     * @example <caption>Subscribe with functions</caption>\n     * let sum = 0;\n     *\n     * Rx.Observable.of(1, 2, 3)\n     * .subscribe(\n     *   function(value) {\n     *     console.log('Adding: ' + value);\n     *     sum = sum + value;\n     *   },\n     *   undefined,\n     *   function() {\n     *     console.log('Sum equals: ' + sum);\n     *   }\n     * );\n     *\n     * // Logs:\n     * // \"Adding: 1\"\n     * // \"Adding: 2\"\n     * // \"Adding: 3\"\n     * // \"Sum equals: 6\"\n     *\n     *\n     * @example <caption>Cancel a subscription</caption>\n     * const subscription = Rx.Observable.interval(1000).subscribe(\n     *   num => console.log(num),\n     *   undefined,\n     *   () => console.log('completed!') // Will not be called, even\n     * );                                // when cancelling subscription\n     *\n     *\n     * setTimeout(() => {\n     *   subscription.unsubscribe();\n     *   console.log('unsubscribed!');\n     * }, 2500);\n     *\n     * // Logs:\n     * // 0 after 1s\n     * // 1 after 2s\n     * // \"unsubscribed!\" after 2.5s\n     *\n     *\n     * @param {Observer|Function} observerOrNext (optional) Either an observer with methods to be called,\n     *  or the first of three possible handlers, which is the handler for each value emitted from the subscribed\n     *  Observable.\n     * @param {Function} error (optional) A handler for a terminal event resulting from an error. If no error handler is provided,\n     *  the error will be thrown as unhandled.\n     * @param {Function} complete (optional) A handler for a terminal event resulting from successful completion.\n     * @return {ISubscription} a subscription reference to the registered handlers\n     * @method subscribe\n     */\n    Observable.prototype.subscribe = function (observerOrNext, error, complete) {\n        var operator = this.operator;\n        var sink = toSubscriber(observerOrNext, error, complete);\n        if (operator) {\n            operator.call(sink, this.source);\n        }\n        else {\n            sink.add(this.source || !sink.syncErrorThrowable ? this._subscribe(sink) : this._trySubscribe(sink));\n        }\n        if (config.useDeprecatedSynchronousErrorHandling) {\n            if (sink.syncErrorThrowable) {\n                sink.syncErrorThrowable = false;\n                if (sink.syncErrorThrown) {\n                    throw sink.syncErrorValue;\n                }\n            }\n        }\n        return sink;\n    };\n    /** @deprecated This is an internal implementation detail, do not use. */\n    Observable.prototype._trySubscribe = function (sink) {\n        try {\n            return this._subscribe(sink);\n        }\n        catch (err) {\n            if (config.useDeprecatedSynchronousErrorHandling) {\n                sink.syncErrorThrown = true;\n                sink.syncErrorValue = err;\n            }\n            sink.error(err);\n        }\n    };\n    /**\n     * @method forEach\n     * @param {Function} next a handler for each value emitted by the observable\n     * @param {PromiseConstructor} [promiseCtor] a constructor function used to instantiate the Promise\n     * @return {Promise} a promise that either resolves on observable completion or\n     *  rejects with the handled error\n     */\n    Observable.prototype.forEach = function (next, promiseCtor) {\n        var _this = this;\n        promiseCtor = getPromiseCtor(promiseCtor);\n        return new promiseCtor(function (resolve, reject) {\n            // Must be declared in a separate statement to avoid a RefernceError when\n            // accessing subscription below in the closure due to Temporal Dead Zone.\n            var subscription;\n            subscription = _this.subscribe(function (value) {\n                try {\n                    next(value);\n                }\n                catch (err) {\n                    reject(err);\n                    if (subscription) {\n                        subscription.unsubscribe();\n                    }\n                }\n            }, reject, resolve);\n        });\n    };\n    /** @deprecated This is an internal implementation detail, do not use. */\n    Observable.prototype._subscribe = function (subscriber) {\n        var source = this.source;\n        return source && source.subscribe(subscriber);\n    };\n    /**\n     * An interop point defined by the es7-observable spec https://github.com/zenparsing/es-observable\n     * @method Symbol.observable\n     * @return {Observable} this instance of the observable\n     */\n    Observable.prototype[observable] = function () {\n        return this;\n    };\n    /* tslint:enable:max-line-length */\n    /**\n     * Used to stitch together functional operators into a chain.\n     * @method pipe\n     * @return {Observable} the Observable result of all of the operators having\n     * been called in the order they were passed in.\n     *\n     * @example\n     *\n     * import { map, filter, scan } from 'rxjs/operators';\n     *\n     * Rx.Observable.interval(1000)\n     *   .pipe(\n     *     filter(x => x % 2 === 0),\n     *     map(x => x + x),\n     *     scan((acc, x) => acc + x)\n     *   )\n     *   .subscribe(x => console.log(x))\n     */\n    Observable.prototype.pipe = function () {\n        var operations = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            operations[_i] = arguments[_i];\n        }\n        if (operations.length === 0) {\n            return this;\n        }\n        return pipeFromArray(operations)(this);\n    };\n    /* tslint:enable:max-line-length */\n    Observable.prototype.toPromise = function (promiseCtor) {\n        var _this = this;\n        promiseCtor = getPromiseCtor(promiseCtor);\n        return new promiseCtor(function (resolve, reject) {\n            var value;\n            _this.subscribe(function (x) { return value = x; }, function (err) { return reject(err); }, function () { return resolve(value); });\n        });\n    };\n    // HACK: Since TypeScript inherits static properties too, we have to\n    // fight against TypeScript here so Subject can have a different static create signature\n    /**\n     * Creates a new cold Observable by calling the Observable constructor\n     * @static true\n     * @owner Observable\n     * @method create\n     * @param {Function} subscribe? the subscriber function to be passed to the Observable constructor\n     * @return {Observable} a new cold observable\n     * @nocollapse\n     */\n    Observable.create = function (subscribe) {\n        return new Observable(subscribe);\n    };\n    return Observable;\n}());\n/**\n * Decides between a passed promise constructor from consuming code,\n * A default configured promise constructor, and the native promise\n * constructor and returns it. If nothing can be found, it will throw\n * an error.\n * @param promiseCtor The optional promise constructor to passed by consuming code\n */\nfunction getPromiseCtor(promiseCtor) {\n    if (!promiseCtor) {\n        promiseCtor = config.Promise || Promise;\n    }\n    if (!promiseCtor) {\n        throw new Error('no Promise impl found');\n    }\n    return promiseCtor;\n}\n\nvar __extends$5 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * An error thrown when an action is invalid because the object has been\n * unsubscribed.\n *\n * @see {@link Subject}\n * @see {@link BehaviorSubject}\n *\n * @class ObjectUnsubscribedError\n */\nvar ObjectUnsubscribedError = /** @class */ (function (_super) {\n    __extends$5(ObjectUnsubscribedError, _super);\n    function ObjectUnsubscribedError() {\n        var _this = _super.call(this, 'object unsubscribed') || this;\n        _this.name = 'ObjectUnsubscribedError';\n        Object.setPrototypeOf(_this, ObjectUnsubscribedError.prototype);\n        return _this;\n    }\n    return ObjectUnsubscribedError;\n}(Error));\n\nvar __extends$6 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar SubjectSubscription = /** @class */ (function (_super) {\n    __extends$6(SubjectSubscription, _super);\n    function SubjectSubscription(subject, subscriber) {\n        var _this = _super.call(this) || this;\n        _this.subject = subject;\n        _this.subscriber = subscriber;\n        _this.closed = false;\n        return _this;\n    }\n    SubjectSubscription.prototype.unsubscribe = function () {\n        if (this.closed) {\n            return;\n        }\n        this.closed = true;\n        var subject = this.subject;\n        var observers = subject.observers;\n        this.subject = null;\n        if (!observers || observers.length === 0 || subject.isStopped || subject.closed) {\n            return;\n        }\n        var subscriberIndex = observers.indexOf(this.subscriber);\n        if (subscriberIndex !== -1) {\n            observers.splice(subscriberIndex, 1);\n        }\n    };\n    return SubjectSubscription;\n}(Subscription));\n\nvar __extends$4 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @class SubjectSubscriber<T>\n */\nvar SubjectSubscriber = /** @class */ (function (_super) {\n    __extends$4(SubjectSubscriber, _super);\n    function SubjectSubscriber(destination) {\n        var _this = _super.call(this, destination) || this;\n        _this.destination = destination;\n        return _this;\n    }\n    return SubjectSubscriber;\n}(Subscriber));\n/**\n * @class Subject<T>\n */\nvar Subject = /** @class */ (function (_super) {\n    __extends$4(Subject, _super);\n    function Subject() {\n        var _this = _super.call(this) || this;\n        _this.observers = [];\n        _this.closed = false;\n        _this.isStopped = false;\n        _this.hasError = false;\n        _this.thrownError = null;\n        return _this;\n    }\n    Subject.prototype[rxSubscriber] = function () {\n        return new SubjectSubscriber(this);\n    };\n    Subject.prototype.lift = function (operator) {\n        var subject = new AnonymousSubject(this, this);\n        subject.operator = operator;\n        return subject;\n    };\n    Subject.prototype.next = function (value) {\n        if (this.closed) {\n            throw new ObjectUnsubscribedError();\n        }\n        if (!this.isStopped) {\n            var observers = this.observers;\n            var len = observers.length;\n            var copy = observers.slice();\n            for (var i = 0; i < len; i++) {\n                copy[i].next(value);\n            }\n        }\n    };\n    Subject.prototype.error = function (err) {\n        if (this.closed) {\n            throw new ObjectUnsubscribedError();\n        }\n        this.hasError = true;\n        this.thrownError = err;\n        this.isStopped = true;\n        var observers = this.observers;\n        var len = observers.length;\n        var copy = observers.slice();\n        for (var i = 0; i < len; i++) {\n            copy[i].error(err);\n        }\n        this.observers.length = 0;\n    };\n    Subject.prototype.complete = function () {\n        if (this.closed) {\n            throw new ObjectUnsubscribedError();\n        }\n        this.isStopped = true;\n        var observers = this.observers;\n        var len = observers.length;\n        var copy = observers.slice();\n        for (var i = 0; i < len; i++) {\n            copy[i].complete();\n        }\n        this.observers.length = 0;\n    };\n    Subject.prototype.unsubscribe = function () {\n        this.isStopped = true;\n        this.closed = true;\n        this.observers = null;\n    };\n    /** @deprecated This is an internal implementation detail, do not use. */\n    Subject.prototype._trySubscribe = function (subscriber) {\n        if (this.closed) {\n            throw new ObjectUnsubscribedError();\n        }\n        else {\n            return _super.prototype._trySubscribe.call(this, subscriber);\n        }\n    };\n    /** @deprecated This is an internal implementation detail, do not use. */\n    Subject.prototype._subscribe = function (subscriber) {\n        if (this.closed) {\n            throw new ObjectUnsubscribedError();\n        }\n        else if (this.hasError) {\n            subscriber.error(this.thrownError);\n            return Subscription.EMPTY;\n        }\n        else if (this.isStopped) {\n            subscriber.complete();\n            return Subscription.EMPTY;\n        }\n        else {\n            this.observers.push(subscriber);\n            return new SubjectSubscription(this, subscriber);\n        }\n    };\n    Subject.prototype.asObservable = function () {\n        var observable = new Observable();\n        observable.source = this;\n        return observable;\n    };\n    /**@nocollapse */\n    Subject.create = function (destination, source) {\n        return new AnonymousSubject(destination, source);\n    };\n    return Subject;\n}(Observable));\n/**\n * @class AnonymousSubject<T>\n */\nvar AnonymousSubject = /** @class */ (function (_super) {\n    __extends$4(AnonymousSubject, _super);\n    function AnonymousSubject(destination, source) {\n        var _this = _super.call(this) || this;\n        _this.destination = destination;\n        _this.source = source;\n        return _this;\n    }\n    AnonymousSubject.prototype.next = function (value) {\n        var destination = this.destination;\n        if (destination && destination.next) {\n            destination.next(value);\n        }\n    };\n    AnonymousSubject.prototype.error = function (err) {\n        var destination = this.destination;\n        if (destination && destination.error) {\n            this.destination.error(err);\n        }\n    };\n    AnonymousSubject.prototype.complete = function () {\n        var destination = this.destination;\n        if (destination && destination.complete) {\n            this.destination.complete();\n        }\n    };\n    /** @deprecated This is an internal implementation detail, do not use. */\n    AnonymousSubject.prototype._subscribe = function (subscriber) {\n        var source = this.source;\n        if (source) {\n            return this.source.subscribe(subscriber);\n        }\n        else {\n            return Subscription.EMPTY;\n        }\n    };\n    return AnonymousSubject;\n}(Subject));\n\nvar __extends$7 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nfunction refCount() {\n    return function refCountOperatorFunction(source) {\n        return source.lift(new RefCountOperator$1(source));\n    };\n}\nvar RefCountOperator$1 = /** @class */ (function () {\n    function RefCountOperator(connectable) {\n        this.connectable = connectable;\n    }\n    RefCountOperator.prototype.call = function (subscriber, source) {\n        var connectable = this.connectable;\n        connectable._refCount++;\n        var refCounter = new RefCountSubscriber$1(subscriber, connectable);\n        var subscription = source.subscribe(refCounter);\n        if (!refCounter.closed) {\n            refCounter.connection = connectable.connect();\n        }\n        return subscription;\n    };\n    return RefCountOperator;\n}());\nvar RefCountSubscriber$1 = /** @class */ (function (_super) {\n    __extends$7(RefCountSubscriber, _super);\n    function RefCountSubscriber(destination, connectable) {\n        var _this = _super.call(this, destination) || this;\n        _this.connectable = connectable;\n        return _this;\n    }\n    RefCountSubscriber.prototype._unsubscribe = function () {\n        var connectable = this.connectable;\n        if (!connectable) {\n            this.connection = null;\n            return;\n        }\n        this.connectable = null;\n        var refCount = connectable._refCount;\n        if (refCount <= 0) {\n            this.connection = null;\n            return;\n        }\n        connectable._refCount = refCount - 1;\n        if (refCount > 1) {\n            this.connection = null;\n            return;\n        }\n        ///\n        // Compare the local RefCountSubscriber's connection Subscription to the\n        // connection Subscription on the shared ConnectableObservable. In cases\n        // where the ConnectableObservable source synchronously emits values, and\n        // the RefCountSubscriber's downstream Observers synchronously unsubscribe,\n        // execution continues to here before the RefCountOperator has a chance to\n        // supply the RefCountSubscriber with the shared connection Subscription.\n        // For example:\n        // ```\n        // Observable.range(0, 10)\n        //   .publish()\n        //   .refCount()\n        //   .take(5)\n        //   .subscribe();\n        // ```\n        // In order to account for this case, RefCountSubscriber should only dispose\n        // the ConnectableObservable's shared connection Subscription if the\n        // connection Subscription exists, *and* either:\n        //   a. RefCountSubscriber doesn't have a reference to the shared connection\n        //      Subscription yet, or,\n        //   b. RefCountSubscriber's connection Subscription reference is identical\n        //      to the shared connection Subscription\n        ///\n        var connection = this.connection;\n        var sharedConnection = connectable._connection;\n        this.connection = null;\n        if (sharedConnection && (!connection || sharedConnection === connection)) {\n            sharedConnection.unsubscribe();\n        }\n    };\n    return RefCountSubscriber;\n}(Subscriber));\n\nvar __extends$3 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @class ConnectableObservable<T>\n */\nvar ConnectableObservable = /** @class */ (function (_super) {\n    __extends$3(ConnectableObservable, _super);\n    function ConnectableObservable(source, subjectFactory) {\n        var _this = _super.call(this) || this;\n        _this.source = source;\n        _this.subjectFactory = subjectFactory;\n        _this._refCount = 0;\n        /** @internal */\n        _this._isComplete = false;\n        return _this;\n    }\n    /** @deprecated This is an internal implementation detail, do not use. */\n    ConnectableObservable.prototype._subscribe = function (subscriber) {\n        return this.getSubject().subscribe(subscriber);\n    };\n    ConnectableObservable.prototype.getSubject = function () {\n        var subject = this._subject;\n        if (!subject || subject.isStopped) {\n            this._subject = this.subjectFactory();\n        }\n        return this._subject;\n    };\n    ConnectableObservable.prototype.connect = function () {\n        var connection = this._connection;\n        if (!connection) {\n            this._isComplete = false;\n            connection = this._connection = new Subscription();\n            connection.add(this.source\n                .subscribe(new ConnectableSubscriber(this.getSubject(), this)));\n            if (connection.closed) {\n                this._connection = null;\n                connection = Subscription.EMPTY;\n            }\n            else {\n                this._connection = connection;\n            }\n        }\n        return connection;\n    };\n    ConnectableObservable.prototype.refCount = function () {\n        return refCount()(this);\n    };\n    return ConnectableObservable;\n}(Observable));\nvar connectableProto = ConnectableObservable.prototype;\nvar connectableObservableDescriptor = {\n    operator: { value: null },\n    _refCount: { value: 0, writable: true },\n    _subject: { value: null, writable: true },\n    _connection: { value: null, writable: true },\n    _subscribe: { value: connectableProto._subscribe },\n    _isComplete: { value: connectableProto._isComplete, writable: true },\n    getSubject: { value: connectableProto.getSubject },\n    connect: { value: connectableProto.connect },\n    refCount: { value: connectableProto.refCount }\n};\nvar ConnectableSubscriber = /** @class */ (function (_super) {\n    __extends$3(ConnectableSubscriber, _super);\n    function ConnectableSubscriber(destination, connectable) {\n        var _this = _super.call(this, destination) || this;\n        _this.connectable = connectable;\n        return _this;\n    }\n    ConnectableSubscriber.prototype._error = function (err) {\n        this._unsubscribe();\n        _super.prototype._error.call(this, err);\n    };\n    ConnectableSubscriber.prototype._complete = function () {\n        this.connectable._isComplete = true;\n        this._unsubscribe();\n        _super.prototype._complete.call(this);\n    };\n    ConnectableSubscriber.prototype._unsubscribe = function () {\n        var connectable = this.connectable;\n        if (connectable) {\n            this.connectable = null;\n            var connection = connectable._connection;\n            connectable._refCount = 0;\n            connectable._subject = null;\n            connectable._connection = null;\n            if (connection) {\n                connection.unsubscribe();\n            }\n        }\n    };\n    return ConnectableSubscriber;\n}(SubjectSubscriber));\nvar RefCountSubscriber = /** @class */ (function (_super) {\n    __extends$3(RefCountSubscriber, _super);\n    function RefCountSubscriber(destination, connectable) {\n        var _this = _super.call(this, destination) || this;\n        _this.connectable = connectable;\n        return _this;\n    }\n    RefCountSubscriber.prototype._unsubscribe = function () {\n        var connectable = this.connectable;\n        if (!connectable) {\n            this.connection = null;\n            return;\n        }\n        this.connectable = null;\n        var refCount$$1 = connectable._refCount;\n        if (refCount$$1 <= 0) {\n            this.connection = null;\n            return;\n        }\n        connectable._refCount = refCount$$1 - 1;\n        if (refCount$$1 > 1) {\n            this.connection = null;\n            return;\n        }\n        ///\n        // Compare the local RefCountSubscriber's connection Subscription to the\n        // connection Subscription on the shared ConnectableObservable. In cases\n        // where the ConnectableObservable source synchronously emits values, and\n        // the RefCountSubscriber's downstream Observers synchronously unsubscribe,\n        // execution continues to here before the RefCountOperator has a chance to\n        // supply the RefCountSubscriber with the shared connection Subscription.\n        // For example:\n        // ```\n        // Observable.range(0, 10)\n        //   .publish()\n        //   .refCount()\n        //   .take(5)\n        //   .subscribe();\n        // ```\n        // In order to account for this case, RefCountSubscriber should only dispose\n        // the ConnectableObservable's shared connection Subscription if the\n        // connection Subscription exists, *and* either:\n        //   a. RefCountSubscriber doesn't have a reference to the shared connection\n        //      Subscription yet, or,\n        //   b. RefCountSubscriber's connection Subscription reference is identical\n        //      to the shared connection Subscription\n        ///\n        var connection = this.connection;\n        var sharedConnection = connectable._connection;\n        this.connection = null;\n        if (sharedConnection && (!connection || sharedConnection === connection)) {\n            sharedConnection.unsubscribe();\n        }\n    };\n    return RefCountSubscriber;\n}(Subscriber));\n\nvar __extends$8 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @class BehaviorSubject<T>\n */\nvar BehaviorSubject = /** @class */ (function (_super) {\n    __extends$8(BehaviorSubject, _super);\n    function BehaviorSubject(_value) {\n        var _this = _super.call(this) || this;\n        _this._value = _value;\n        return _this;\n    }\n    Object.defineProperty(BehaviorSubject.prototype, \"value\", {\n        get: function () {\n            return this.getValue();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /** @deprecated This is an internal implementation detail, do not use. */\n    BehaviorSubject.prototype._subscribe = function (subscriber) {\n        var subscription = _super.prototype._subscribe.call(this, subscriber);\n        if (subscription && !subscription.closed) {\n            subscriber.next(this._value);\n        }\n        return subscription;\n    };\n    BehaviorSubject.prototype.getValue = function () {\n        if (this.hasError) {\n            throw this.thrownError;\n        }\n        else if (this.closed) {\n            throw new ObjectUnsubscribedError();\n        }\n        else {\n            return this._value;\n        }\n    };\n    BehaviorSubject.prototype.next = function (value) {\n        _super.prototype.next.call(this, this._value = value);\n    };\n    return BehaviorSubject;\n}(Subject));\n\nvar __extends$12 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * A unit of work to be executed in a {@link Scheduler}. An action is typically\n * created from within a Scheduler and an RxJS user does not need to concern\n * themselves about creating and manipulating an Action.\n *\n * ```ts\n * class Action<T> extends Subscription {\n *   new (scheduler: Scheduler, work: (state?: T) => void);\n *   schedule(state?: T, delay: number = 0): Subscription;\n * }\n * ```\n *\n * @class Action<T>\n */\nvar Action = /** @class */ (function (_super) {\n    __extends$12(Action, _super);\n    function Action(scheduler, work) {\n        return _super.call(this) || this;\n    }\n    /**\n     * Schedules this action on its parent Scheduler for execution. May be passed\n     * some context object, `state`. May happen at some point in the future,\n     * according to the `delay` parameter, if specified.\n     * @param {T} [state] Some contextual data that the `work` function uses when\n     * called by the Scheduler.\n     * @param {number} [delay] Time to wait before executing the work, where the\n     * time unit is implicit and defined by the Scheduler.\n     * @return {void}\n     */\n    Action.prototype.schedule = function (state, delay) {\n        if (delay === void 0) { delay = 0; }\n        return this;\n    };\n    return Action;\n}(Subscription));\n\nvar __extends$11 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar AsyncAction = /** @class */ (function (_super) {\n    __extends$11(AsyncAction, _super);\n    function AsyncAction(scheduler, work) {\n        var _this = _super.call(this, scheduler, work) || this;\n        _this.scheduler = scheduler;\n        _this.work = work;\n        _this.pending = false;\n        return _this;\n    }\n    AsyncAction.prototype.schedule = function (state, delay) {\n        if (delay === void 0) { delay = 0; }\n        if (this.closed) {\n            return this;\n        }\n        // Always replace the current state with the new state.\n        this.state = state;\n        var id = this.id;\n        var scheduler = this.scheduler;\n        //\n        // Important implementation note:\n        //\n        // Actions only execute once by default, unless rescheduled from within the\n        // scheduled callback. This allows us to implement single and repeat\n        // actions via the same code path, without adding API surface area, as well\n        // as mimic traditional recursion but across asynchronous boundaries.\n        //\n        // However, JS runtimes and timers distinguish between intervals achieved by\n        // serial `setTimeout` calls vs. a single `setInterval` call. An interval of\n        // serial `setTimeout` calls can be individually delayed, which delays\n        // scheduling the next `setTimeout`, and so on. `setInterval` attempts to\n        // guarantee the interval callback will be invoked more precisely to the\n        // interval period, regardless of load.\n        //\n        // Therefore, we use `setInterval` to schedule single and repeat actions.\n        // If the action reschedules itself with the same delay, the interval is not\n        // canceled. If the action doesn't reschedule, or reschedules with a\n        // different delay, the interval will be canceled after scheduled callback\n        // execution.\n        //\n        if (id != null) {\n            this.id = this.recycleAsyncId(scheduler, id, delay);\n        }\n        // Set the pending flag indicating that this action has been scheduled, or\n        // has recursively rescheduled itself.\n        this.pending = true;\n        this.delay = delay;\n        // If this action has already an async Id, don't request a new one.\n        this.id = this.id || this.requestAsyncId(scheduler, this.id, delay);\n        return this;\n    };\n    AsyncAction.prototype.requestAsyncId = function (scheduler, id, delay) {\n        if (delay === void 0) { delay = 0; }\n        return setInterval(scheduler.flush.bind(scheduler, this), delay);\n    };\n    AsyncAction.prototype.recycleAsyncId = function (scheduler, id, delay) {\n        if (delay === void 0) { delay = 0; }\n        // If this action is rescheduled with the same delay time, don't clear the interval id.\n        if (delay !== null && this.delay === delay && this.pending === false) {\n            return id;\n        }\n        // Otherwise, if the action's delay time is different from the current delay,\n        // or the action has been rescheduled before it's executed, clear the interval id\n        return clearInterval(id) && undefined || undefined;\n    };\n    /**\n     * Immediately executes this action and the `work` it contains.\n     * @return {any}\n     */\n    AsyncAction.prototype.execute = function (state, delay) {\n        if (this.closed) {\n            return new Error('executing a cancelled action');\n        }\n        this.pending = false;\n        var error = this._execute(state, delay);\n        if (error) {\n            return error;\n        }\n        else if (this.pending === false && this.id != null) {\n            // Dequeue if the action didn't reschedule itself. Don't call\n            // unsubscribe(), because the action could reschedule later.\n            // For example:\n            // ```\n            // scheduler.schedule(function doWork(counter) {\n            //   /* ... I'm a busy worker bee ... */\n            //   var originalAction = this;\n            //   /* wait 100ms before rescheduling the action */\n            //   setTimeout(function () {\n            //     originalAction.schedule(counter + 1);\n            //   }, 100);\n            // }, 1000);\n            // ```\n            this.id = this.recycleAsyncId(this.scheduler, this.id, null);\n        }\n    };\n    AsyncAction.prototype._execute = function (state, delay) {\n        var errored = false;\n        var errorValue = undefined;\n        try {\n            this.work(state);\n        }\n        catch (e) {\n            errored = true;\n            errorValue = !!e && e || new Error(e);\n        }\n        if (errored) {\n            this.unsubscribe();\n            return errorValue;\n        }\n    };\n    /** @deprecated This is an internal implementation detail, do not use. */\n    AsyncAction.prototype._unsubscribe = function () {\n        var id = this.id;\n        var scheduler = this.scheduler;\n        var actions = scheduler.actions;\n        var index = actions.indexOf(this);\n        this.work = null;\n        this.state = null;\n        this.pending = false;\n        this.scheduler = null;\n        if (index !== -1) {\n            actions.splice(index, 1);\n        }\n        if (id != null) {\n            this.id = this.recycleAsyncId(scheduler, id, null);\n        }\n        this.delay = null;\n    };\n    return AsyncAction;\n}(Action));\n\nvar __extends$10 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar QueueAction = /** @class */ (function (_super) {\n    __extends$10(QueueAction, _super);\n    function QueueAction(scheduler, work) {\n        var _this = _super.call(this, scheduler, work) || this;\n        _this.scheduler = scheduler;\n        _this.work = work;\n        return _this;\n    }\n    QueueAction.prototype.schedule = function (state, delay) {\n        if (delay === void 0) { delay = 0; }\n        if (delay > 0) {\n            return _super.prototype.schedule.call(this, state, delay);\n        }\n        this.delay = delay;\n        this.state = state;\n        this.scheduler.flush(this);\n        return this;\n    };\n    QueueAction.prototype.execute = function (state, delay) {\n        return (delay > 0 || this.closed) ?\n            _super.prototype.execute.call(this, state, delay) :\n            this._execute(state, delay);\n    };\n    QueueAction.prototype.requestAsyncId = function (scheduler, id, delay) {\n        if (delay === void 0) { delay = 0; }\n        // If delay exists and is greater than 0, or if the delay is null (the\n        // action wasn't rescheduled) but was originally scheduled as an async\n        // action, then recycle as an async action.\n        if ((delay !== null && delay > 0) || (delay === null && this.delay > 0)) {\n            return _super.prototype.requestAsyncId.call(this, scheduler, id, delay);\n        }\n        // Otherwise flush the scheduler starting with this action.\n        return scheduler.flush(this);\n    };\n    return QueueAction;\n}(AsyncAction));\n\n/**\n * An execution context and a data structure to order tasks and schedule their\n * execution. Provides a notion of (potentially virtual) time, through the\n * `now()` getter method.\n *\n * Each unit of work in a Scheduler is called an {@link Action}.\n *\n * ```ts\n * class Scheduler {\n *   now(): number;\n *   schedule(work, delay?, state?): Subscription;\n * }\n * ```\n *\n * @class Scheduler\n * @deprecated Scheduler is an internal implementation detail of RxJS, and\n * should not be used directly. Rather, create your own class and implement\n * {@link SchedulerLike}\n */\nvar Scheduler = /** @class */ (function () {\n    function Scheduler(SchedulerAction, now) {\n        if (now === void 0) { now = Scheduler.now; }\n        this.SchedulerAction = SchedulerAction;\n        this.now = now;\n    }\n    /**\n     * Schedules a function, `work`, for execution. May happen at some point in\n     * the future, according to the `delay` parameter, if specified. May be passed\n     * some context object, `state`, which will be passed to the `work` function.\n     *\n     * The given arguments will be processed an stored as an Action object in a\n     * queue of actions.\n     *\n     * @param {function(state: ?T): ?Subscription} work A function representing a\n     * task, or some unit of work to be executed by the Scheduler.\n     * @param {number} [delay] Time to wait before executing the work, where the\n     * time unit is implicit and defined by the Scheduler itself.\n     * @param {T} [state] Some contextual data that the `work` function uses when\n     * called by the Scheduler.\n     * @return {Subscription} A subscription in order to be able to unsubscribe\n     * the scheduled work.\n     */\n    Scheduler.prototype.schedule = function (work, delay, state) {\n        if (delay === void 0) { delay = 0; }\n        return new this.SchedulerAction(this, work).schedule(state, delay);\n    };\n    /** @nocollapse */\n    Scheduler.now = Date.now ? Date.now : function () { return +new Date(); };\n    return Scheduler;\n}());\n\nvar __extends$14 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar AsyncScheduler = /** @class */ (function (_super) {\n    __extends$14(AsyncScheduler, _super);\n    function AsyncScheduler() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.actions = [];\n        /**\n         * A flag to indicate whether the Scheduler is currently executing a batch of\n         * queued actions.\n         * @type {boolean}\n         */\n        _this.active = false;\n        /**\n         * An internal ID used to track the latest asynchronous task such as those\n         * coming from `setTimeout`, `setInterval`, `requestAnimationFrame`, and\n         * others.\n         * @type {any}\n         */\n        _this.scheduled = undefined;\n        return _this;\n    }\n    AsyncScheduler.prototype.flush = function (action) {\n        var actions = this.actions;\n        if (this.active) {\n            actions.push(action);\n            return;\n        }\n        var error;\n        this.active = true;\n        do {\n            if (error = action.execute(action.state, action.delay)) {\n                break;\n            }\n        } while (action = actions.shift()); // exhaust the scheduler queue\n        this.active = false;\n        if (error) {\n            while (action = actions.shift()) {\n                action.unsubscribe();\n            }\n            throw error;\n        }\n    };\n    return AsyncScheduler;\n}(Scheduler));\n\nvar __extends$13 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar QueueScheduler = /** @class */ (function (_super) {\n    __extends$13(QueueScheduler, _super);\n    function QueueScheduler() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    return QueueScheduler;\n}(AsyncScheduler));\n\n/**\n *\n * Queue Scheduler\n *\n * <span class=\"informal\">Put every next task on a queue, instead of executing it immediately</span>\n *\n * `queue` scheduler, when used with delay, behaves the same as {@link async} scheduler.\n *\n * When used without delay, it schedules given task synchronously - executes it right when\n * it is scheduled. However when called recursively, that is when inside the scheduled task,\n * another task is scheduled with queue scheduler, instead of executing immediately as well,\n * that task will be put on a queue and wait for current one to finish.\n *\n * This means that when you execute task with `queue` scheduler, you are sure it will end\n * before any other task scheduled with that scheduler will start.\n *\n * @examples <caption>Schedule recursively first, then do something</caption>\n *\n * Rx.Scheduler.queue.schedule(() => {\n *   Rx.Scheduler.queue.schedule(() => console.log('second')); // will not happen now, but will be put on a queue\n *\n *   console.log('first');\n * });\n *\n * // Logs:\n * // \"first\"\n * // \"second\"\n *\n *\n * @example <caption>Reschedule itself recursively</caption>\n *\n * Rx.Scheduler.queue.schedule(function(state) {\n *   if (state !== 0) {\n *     console.log('before', state);\n *     this.schedule(state - 1); // `this` references currently executing Action,\n *                               // which we reschedule with new state\n *     console.log('after', state);\n *   }\n * }, 0, 3);\n *\n * // In scheduler that runs recursively, you would expect:\n * // \"before\", 3\n * // \"before\", 2\n * // \"before\", 1\n * // \"after\", 1\n * // \"after\", 2\n * // \"after\", 3\n *\n * // But with queue it logs:\n * // \"before\", 3\n * // \"after\", 3\n * // \"before\", 2\n * // \"after\", 2\n * // \"before\", 1\n * // \"after\", 1\n *\n *\n * @static true\n * @name queue\n * @owner Scheduler\n */\nvar queue = new QueueScheduler(QueueAction);\n\n/**\n * The same Observable instance returned by any call to {@link empty} without a\n * {@link Scheduler}. It is preferrable to use this over `empty()`.\n */\nvar EMPTY$1 = new Observable(function (subscriber) { return subscriber.complete(); });\n/**\n * Creates an Observable that emits no items to the Observer and immediately\n * emits a complete notification.\n *\n * <span class=\"informal\">Just emits 'complete', and nothing else.\n * </span>\n *\n * <img src=\"./img/empty.png\" width=\"100%\">\n *\n * This static operator is useful for creating a simple Observable that only\n * emits the complete notification. It can be used for composing with other\n * Observables, such as in a {@link mergeMap}.\n *\n * @example <caption>Emit the number 7, then complete.</caption>\n * var result = Rx.Observable.empty().startWith(7);\n * result.subscribe(x => console.log(x));\n *\n * @example <caption>Map and flatten only odd numbers to the sequence 'a', 'b', 'c'</caption>\n * var interval = Rx.Observable.interval(1000);\n * var result = interval.mergeMap(x =>\n *   x % 2 === 1 ? Rx.Observable.of('a', 'b', 'c') : Rx.Observable.empty()\n * );\n * result.subscribe(x => console.log(x));\n *\n * // Results in the following to the console:\n * // x is equal to the count on the interval eg(0,1,2,3,...)\n * // x will occur every 1000ms\n * // if x % 2 is equal to 1 print abc\n * // if x % 2 is not equal to 1 nothing will be output\n *\n * @see {@link create}\n * @see {@link never}\n * @see {@link of}\n * @see {@link throw}\n *\n * @param {Scheduler} [scheduler] A {@link IScheduler} to use for scheduling\n * the emission of the complete notification.\n * @return {Observable} An \"empty\" Observable: emits only the complete\n * notification.\n * @static true\n * @name empty\n * @owner Observable\n * @deprecated Deprecated in favor of using EMPTY constant.\n */\nfunction empty$2(scheduler) {\n    return scheduler ? emptyScheduled(scheduler) : EMPTY$1;\n}\nfunction emptyScheduled(scheduler) {\n    return new Observable(function (subscriber) { return scheduler.schedule(function () { return subscriber.complete(); }); });\n}\n\nfunction isScheduler(value) {\n    return value && typeof value.schedule === 'function';\n}\n\n/**\n * Subscribes to an ArrayLike with a subscriber\n * @param array The array or array-like to subscribe to\n */\nvar subscribeToArray = function (array) { return function (subscriber) {\n    for (var i = 0, len = array.length; i < len && !subscriber.closed; i++) {\n        subscriber.next(array[i]);\n    }\n    if (!subscriber.closed) {\n        subscriber.complete();\n    }\n}; };\n\nfunction fromArray(input, scheduler) {\n    if (!scheduler) {\n        return new Observable(subscribeToArray(input));\n    }\n    else {\n        return new Observable(function (subscriber) {\n            var sub = new Subscription();\n            var i = 0;\n            sub.add(scheduler.schedule(function () {\n                if (i === input.length) {\n                    subscriber.complete();\n                    return;\n                }\n                subscriber.next(input[i++]);\n                if (!subscriber.closed) {\n                    sub.add(this.schedule());\n                }\n            }));\n            return sub;\n        });\n    }\n}\n\nfunction scalar(value) {\n    var result = new Observable(function (subscriber) {\n        subscriber.next(value);\n        subscriber.complete();\n    });\n    result._isScalar = true;\n    result.value = value;\n    return result;\n}\n\nfunction of() {\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n    }\n    var scheduler = args[args.length - 1];\n    if (isScheduler(scheduler)) {\n        args.pop();\n    }\n    else {\n        scheduler = undefined;\n    }\n    switch (args.length) {\n        case 0:\n            return empty$2(scheduler);\n        case 1:\n            return scheduler ? fromArray(args, scheduler) : scalar(args[0]);\n        default:\n            return fromArray(args, scheduler);\n    }\n}\n\n/**\n * Creates an Observable that emits no items to the Observer and immediately\n * emits an error notification.\n *\n * <span class=\"informal\">Just emits 'error', and nothing else.\n * </span>\n *\n * <img src=\"./img/throw.png\" width=\"100%\">\n *\n * This static operator is useful for creating a simple Observable that only\n * emits the error notification. It can be used for composing with other\n * Observables, such as in a {@link mergeMap}.\n *\n * @example <caption>Emit the number 7, then emit an error.</caption>\n * import { throwError, concat, of } from 'rxjs/create';\n *\n * const result = concat(of(7), throwError(new Error('oops!')));\n * result.subscribe(x => console.log(x), e => console.error(e));\n *\n * @example <caption>Map and flatten numbers to the sequence 'a', 'b', 'c', but throw an error for 13</caption>\n * import { throwError, interval, of } from 'rxjs/create';\n * import { mergeMap } from 'rxjs/operators';\n *\n * interval(1000).pipe(\n *   mergeMap(x => x === 13 ?\n *     throwError('Thirteens are bad') :\n *     of('a', 'b', 'c')\n *   )\n * ).subscribe(x => console.log(x), e => console.error(e));\n *\n * @see {@link create}\n * @see {@link empty}\n * @see {@link never}\n * @see {@link of}\n *\n * @param {any} error The particular Error to pass to the error notification.\n * @param {Scheduler} [scheduler] A {@link IScheduler} to use for scheduling\n * the emission of the error notification.\n * @return {Observable} An error Observable: emits only the error notification\n * using the given error argument.\n * @static true\n * @name throw\n * @owner Observable\n */\nfunction throwError(error, scheduler) {\n    if (!scheduler) {\n        return new Observable(function (subscriber) { return subscriber.error(error); });\n    }\n    else {\n        return new Observable(function (subscriber) { return scheduler.schedule(dispatch, 0, { error: error, subscriber: subscriber }); });\n    }\n}\nfunction dispatch(_a) {\n    var error = _a.error, subscriber = _a.subscriber;\n    subscriber.error(error);\n}\n\n/**\n * Represents a push-based event or value that an {@link Observable} can emit.\n * This class is particularly useful for operators that manage notifications,\n * like {@link materialize}, {@link dematerialize}, {@link observeOn}, and\n * others. Besides wrapping the actual delivered value, it also annotates it\n * with metadata of, for instance, what type of push message it is (`next`,\n * `error`, or `complete`).\n *\n * @see {@link materialize}\n * @see {@link dematerialize}\n * @see {@link observeOn}\n *\n * @class Notification<T>\n */\nvar Notification = /** @class */ (function () {\n    function Notification(kind, value, error) {\n        this.kind = kind;\n        this.value = value;\n        this.error = error;\n        this.hasValue = kind === 'N';\n    }\n    /**\n     * Delivers to the given `observer` the value wrapped by this Notification.\n     * @param {Observer} observer\n     * @return\n     */\n    Notification.prototype.observe = function (observer) {\n        switch (this.kind) {\n            case 'N':\n                return observer.next && observer.next(this.value);\n            case 'E':\n                return observer.error && observer.error(this.error);\n            case 'C':\n                return observer.complete && observer.complete();\n        }\n    };\n    /**\n     * Given some {@link Observer} callbacks, deliver the value represented by the\n     * current Notification to the correctly corresponding callback.\n     * @param {function(value: T): void} next An Observer `next` callback.\n     * @param {function(err: any): void} [error] An Observer `error` callback.\n     * @param {function(): void} [complete] An Observer `complete` callback.\n     * @return {any}\n     */\n    Notification.prototype.do = function (next, error, complete) {\n        var kind = this.kind;\n        switch (kind) {\n            case 'N':\n                return next && next(this.value);\n            case 'E':\n                return error && error(this.error);\n            case 'C':\n                return complete && complete();\n        }\n    };\n    /**\n     * Takes an Observer or its individual callback functions, and calls `observe`\n     * or `do` methods accordingly.\n     * @param {Observer|function(value: T): void} nextOrObserver An Observer or\n     * the `next` callback.\n     * @param {function(err: any): void} [error] An Observer `error` callback.\n     * @param {function(): void} [complete] An Observer `complete` callback.\n     * @return {any}\n     */\n    Notification.prototype.accept = function (nextOrObserver, error, complete) {\n        if (nextOrObserver && typeof nextOrObserver.next === 'function') {\n            return this.observe(nextOrObserver);\n        }\n        else {\n            return this.do(nextOrObserver, error, complete);\n        }\n    };\n    /**\n     * Returns a simple Observable that just delivers the notification represented\n     * by this Notification instance.\n     * @return {any}\n     */\n    Notification.prototype.toObservable = function () {\n        var kind = this.kind;\n        switch (kind) {\n            case 'N':\n                return of(this.value);\n            case 'E':\n                return throwError(this.error);\n            case 'C':\n                return empty$2();\n        }\n        throw new Error('unexpected notification kind value');\n    };\n    /**\n     * A shortcut to create a Notification instance of the type `next` from a\n     * given value.\n     * @param {T} value The `next` value.\n     * @return {Notification<T>} The \"next\" Notification representing the\n     * argument.\n     * @nocollapse\n     */\n    Notification.createNext = function (value) {\n        if (typeof value !== 'undefined') {\n            return new Notification('N', value);\n        }\n        return Notification.undefinedValueNotification;\n    };\n    /**\n     * A shortcut to create a Notification instance of the type `error` from a\n     * given error.\n     * @param {any} [err] The `error` error.\n     * @return {Notification<T>} The \"error\" Notification representing the\n     * argument.\n     * @nocollapse\n     */\n    Notification.createError = function (err) {\n        return new Notification('E', undefined, err);\n    };\n    /**\n     * A shortcut to create a Notification instance of the type `complete`.\n     * @return {Notification<any>} The valueless \"complete\" Notification.\n     * @nocollapse\n     */\n    Notification.createComplete = function () {\n        return Notification.completeNotification;\n    };\n    Notification.completeNotification = new Notification('C');\n    Notification.undefinedValueNotification = new Notification('N', undefined);\n    return Notification;\n}());\n\nvar __extends$15 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n *\n * Re-emits all notifications from source Observable with specified scheduler.\n *\n * <span class=\"informal\">Ensure a specific scheduler is used, from outside of an Observable.</span>\n *\n * `observeOn` is an operator that accepts a scheduler as a first parameter, which will be used to reschedule\n * notifications emitted by the source Observable. It might be useful, if you do not have control over\n * internal scheduler of a given Observable, but want to control when its values are emitted nevertheless.\n *\n * Returned Observable emits the same notifications (nexted values, complete and error events) as the source Observable,\n * but rescheduled with provided scheduler. Note that this doesn't mean that source Observables internal\n * scheduler will be replaced in any way. Original scheduler still will be used, but when the source Observable emits\n * notification, it will be immediately scheduled again - this time with scheduler passed to `observeOn`.\n * An anti-pattern would be calling `observeOn` on Observable that emits lots of values synchronously, to split\n * that emissions into asynchronous chunks. For this to happen, scheduler would have to be passed into the source\n * Observable directly (usually into the operator that creates it). `observeOn` simply delays notifications a\n * little bit more, to ensure that they are emitted at expected moments.\n *\n * As a matter of fact, `observeOn` accepts second parameter, which specifies in milliseconds with what delay notifications\n * will be emitted. The main difference between {@link delay} operator and `observeOn` is that `observeOn`\n * will delay all notifications - including error notifications - while `delay` will pass through error\n * from source Observable immediately when it is emitted. In general it is highly recommended to use `delay` operator\n * for any kind of delaying of values in the stream, while using `observeOn` to specify which scheduler should be used\n * for notification emissions in general.\n *\n * @example <caption>Ensure values in subscribe are called just before browser repaint.</caption>\n * const intervals = Rx.Observable.interval(10); // Intervals are scheduled\n *                                               // with async scheduler by default...\n *\n * intervals\n * .observeOn(Rx.Scheduler.animationFrame)       // ...but we will observe on animationFrame\n * .subscribe(val => {                           // scheduler to ensure smooth animation.\n *   someDiv.style.height = val + 'px';\n * });\n *\n * @see {@link delay}\n *\n * @param {SchedulerLike} scheduler Scheduler that will be used to reschedule notifications from source Observable.\n * @param {number} [delay] Number of milliseconds that states with what delay every notification should be rescheduled.\n * @return {Observable<T>} Observable that emits the same notifications as the source Observable,\n * but with provided scheduler.\n *\n * @method observeOn\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar ObserveOnSubscriber = /** @class */ (function (_super) {\n    __extends$15(ObserveOnSubscriber, _super);\n    function ObserveOnSubscriber(destination, scheduler, delay) {\n        if (delay === void 0) { delay = 0; }\n        var _this = _super.call(this, destination) || this;\n        _this.scheduler = scheduler;\n        _this.delay = delay;\n        return _this;\n    }\n    /** @nocollapse */\n    ObserveOnSubscriber.dispatch = function (arg) {\n        var notification = arg.notification, destination = arg.destination;\n        notification.observe(destination);\n        this.unsubscribe();\n    };\n    ObserveOnSubscriber.prototype.scheduleMessage = function (notification) {\n        this.add(this.scheduler.schedule(ObserveOnSubscriber.dispatch, this.delay, new ObserveOnMessage(notification, this.destination)));\n    };\n    ObserveOnSubscriber.prototype._next = function (value) {\n        this.scheduleMessage(Notification.createNext(value));\n    };\n    ObserveOnSubscriber.prototype._error = function (err) {\n        this.scheduleMessage(Notification.createError(err));\n    };\n    ObserveOnSubscriber.prototype._complete = function () {\n        this.scheduleMessage(Notification.createComplete());\n    };\n    return ObserveOnSubscriber;\n}(Subscriber));\nvar ObserveOnMessage = /** @class */ (function () {\n    function ObserveOnMessage(notification, destination) {\n        this.notification = notification;\n        this.destination = destination;\n    }\n    return ObserveOnMessage;\n}());\n\nvar __extends$9 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @class ReplaySubject<T>\n */\nvar ReplaySubject = /** @class */ (function (_super) {\n    __extends$9(ReplaySubject, _super);\n    function ReplaySubject(bufferSize, windowTime, scheduler) {\n        if (bufferSize === void 0) { bufferSize = Number.POSITIVE_INFINITY; }\n        if (windowTime === void 0) { windowTime = Number.POSITIVE_INFINITY; }\n        var _this = _super.call(this) || this;\n        _this.scheduler = scheduler;\n        _this._events = [];\n        _this._infiniteTimeWindow = false;\n        _this._bufferSize = bufferSize < 1 ? 1 : bufferSize;\n        _this._windowTime = windowTime < 1 ? 1 : windowTime;\n        if (windowTime === Number.POSITIVE_INFINITY) {\n            _this._infiniteTimeWindow = true;\n            _this.next = _this.nextInfiniteTimeWindow;\n        }\n        else {\n            _this.next = _this.nextTimeWindow;\n        }\n        return _this;\n    }\n    ReplaySubject.prototype.nextInfiniteTimeWindow = function (value) {\n        var _events = this._events;\n        _events.push(value);\n        // Since this method is invoked in every next() call than the buffer\n        // can overgrow the max size only by one item\n        if (_events.length > this._bufferSize) {\n            _events.shift();\n        }\n        _super.prototype.next.call(this, value);\n    };\n    ReplaySubject.prototype.nextTimeWindow = function (value) {\n        this._events.push(new ReplayEvent(this._getNow(), value));\n        this._trimBufferThenGetEvents();\n        _super.prototype.next.call(this, value);\n    };\n    /** @deprecated This is an internal implementation detail, do not use. */\n    ReplaySubject.prototype._subscribe = function (subscriber) {\n        // When `_infiniteTimeWindow === true` then the buffer is already trimmed\n        var _infiniteTimeWindow = this._infiniteTimeWindow;\n        var _events = _infiniteTimeWindow ? this._events : this._trimBufferThenGetEvents();\n        var scheduler = this.scheduler;\n        var len = _events.length;\n        var subscription;\n        if (this.closed) {\n            throw new ObjectUnsubscribedError();\n        }\n        else if (this.isStopped || this.hasError) {\n            subscription = Subscription.EMPTY;\n        }\n        else {\n            this.observers.push(subscriber);\n            subscription = new SubjectSubscription(this, subscriber);\n        }\n        if (scheduler) {\n            subscriber.add(subscriber = new ObserveOnSubscriber(subscriber, scheduler));\n        }\n        if (_infiniteTimeWindow) {\n            for (var i = 0; i < len && !subscriber.closed; i++) {\n                subscriber.next(_events[i]);\n            }\n        }\n        else {\n            for (var i = 0; i < len && !subscriber.closed; i++) {\n                subscriber.next(_events[i].value);\n            }\n        }\n        if (this.hasError) {\n            subscriber.error(this.thrownError);\n        }\n        else if (this.isStopped) {\n            subscriber.complete();\n        }\n        return subscription;\n    };\n    ReplaySubject.prototype._getNow = function () {\n        return (this.scheduler || queue).now();\n    };\n    ReplaySubject.prototype._trimBufferThenGetEvents = function () {\n        var now = this._getNow();\n        var _bufferSize = this._bufferSize;\n        var _windowTime = this._windowTime;\n        var _events = this._events;\n        var eventsCount = _events.length;\n        var spliceCount = 0;\n        // Trim events that fall out of the time window.\n        // Start at the front of the list. Break early once\n        // we encounter an event that falls within the window.\n        while (spliceCount < eventsCount) {\n            if ((now - _events[spliceCount].time) < _windowTime) {\n                break;\n            }\n            spliceCount++;\n        }\n        if (eventsCount > _bufferSize) {\n            spliceCount = Math.max(spliceCount, eventsCount - _bufferSize);\n        }\n        if (spliceCount > 0) {\n            _events.splice(0, spliceCount);\n        }\n        return _events;\n    };\n    return ReplaySubject;\n}(Subject));\nvar ReplayEvent = /** @class */ (function () {\n    function ReplayEvent(time, value) {\n        this.time = time;\n        this.value = value;\n    }\n    return ReplayEvent;\n}());\n\nvar __extends$16 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @class AsyncSubject<T>\n */\nvar AsyncSubject = /** @class */ (function (_super) {\n    __extends$16(AsyncSubject, _super);\n    function AsyncSubject() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.value = null;\n        _this.hasNext = false;\n        _this.hasCompleted = false;\n        return _this;\n    }\n    /** @deprecated This is an internal implementation detail, do not use. */\n    AsyncSubject.prototype._subscribe = function (subscriber) {\n        if (this.hasError) {\n            subscriber.error(this.thrownError);\n            return Subscription.EMPTY;\n        }\n        else if (this.hasCompleted && this.hasNext) {\n            subscriber.next(this.value);\n            subscriber.complete();\n            return Subscription.EMPTY;\n        }\n        return _super.prototype._subscribe.call(this, subscriber);\n    };\n    AsyncSubject.prototype.next = function (value) {\n        if (!this.hasCompleted) {\n            this.value = value;\n            this.hasNext = true;\n        }\n    };\n    AsyncSubject.prototype.error = function (error) {\n        if (!this.hasCompleted) {\n            _super.prototype.error.call(this, error);\n        }\n    };\n    AsyncSubject.prototype.complete = function () {\n        this.hasCompleted = true;\n        if (this.hasNext) {\n            _super.prototype.next.call(this, this.value);\n        }\n        _super.prototype.complete.call(this);\n    };\n    return AsyncSubject;\n}(Subject));\n\nvar nextHandle = 0;\nvar tasksByHandle = {};\nfunction runIfPresent(handle) {\n    var cb = tasksByHandle[handle];\n    if (cb) {\n        cb();\n    }\n}\nvar Immediate = {\n    setImmediate: function (cb) {\n        var handle = nextHandle++;\n        tasksByHandle[handle] = cb;\n        Promise.resolve().then(function () { return runIfPresent(handle); });\n        return handle;\n    },\n    clearImmediate: function (handle) {\n        delete tasksByHandle[handle];\n    },\n};\n\nvar __extends$17 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar AsapAction = /** @class */ (function (_super) {\n    __extends$17(AsapAction, _super);\n    function AsapAction(scheduler, work) {\n        var _this = _super.call(this, scheduler, work) || this;\n        _this.scheduler = scheduler;\n        _this.work = work;\n        return _this;\n    }\n    AsapAction.prototype.requestAsyncId = function (scheduler, id, delay) {\n        if (delay === void 0) { delay = 0; }\n        // If delay is greater than 0, request as an async action.\n        if (delay !== null && delay > 0) {\n            return _super.prototype.requestAsyncId.call(this, scheduler, id, delay);\n        }\n        // Push the action to the end of the scheduler queue.\n        scheduler.actions.push(this);\n        // If a microtask has already been scheduled, don't schedule another\n        // one. If a microtask hasn't been scheduled yet, schedule one now. Return\n        // the current scheduled microtask id.\n        return scheduler.scheduled || (scheduler.scheduled = Immediate.setImmediate(scheduler.flush.bind(scheduler, null)));\n    };\n    AsapAction.prototype.recycleAsyncId = function (scheduler, id, delay) {\n        if (delay === void 0) { delay = 0; }\n        // If delay exists and is greater than 0, or if the delay is null (the\n        // action wasn't rescheduled) but was originally scheduled as an async\n        // action, then recycle as an async action.\n        if ((delay !== null && delay > 0) || (delay === null && this.delay > 0)) {\n            return _super.prototype.recycleAsyncId.call(this, scheduler, id, delay);\n        }\n        // If the scheduler queue is empty, cancel the requested microtask and\n        // set the scheduled flag to undefined so the next AsapAction will schedule\n        // its own.\n        if (scheduler.actions.length === 0) {\n            Immediate.clearImmediate(id);\n            scheduler.scheduled = undefined;\n        }\n        // Return undefined so the action knows to request a new async id if it's rescheduled.\n        return undefined;\n    };\n    return AsapAction;\n}(AsyncAction));\n\nvar __extends$18 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar AsapScheduler = /** @class */ (function (_super) {\n    __extends$18(AsapScheduler, _super);\n    function AsapScheduler() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    AsapScheduler.prototype.flush = function (action) {\n        this.active = true;\n        this.scheduled = undefined;\n        var actions = this.actions;\n        var error;\n        var index = -1;\n        var count = actions.length;\n        action = action || actions.shift();\n        do {\n            if (error = action.execute(action.state, action.delay)) {\n                break;\n            }\n        } while (++index < count && (action = actions.shift()));\n        this.active = false;\n        if (error) {\n            while (++index < count && (action = actions.shift())) {\n                action.unsubscribe();\n            }\n            throw error;\n        }\n    };\n    return AsapScheduler;\n}(AsyncScheduler));\n\n/**\n *\n * Asap Scheduler\n *\n * <span class=\"informal\">Perform task as fast as it can be performed asynchronously</span>\n *\n * `asap` scheduler behaves the same as {@link async} scheduler when you use it to delay task\n * in time. If however you set delay to `0`, `asap` will wait for current synchronously executing\n * code to end and then it will try to execute given task as fast as possible.\n *\n * `asap` scheduler will do its best to minimize time between end of currently executing code\n * and start of scheduled task. This makes it best candidate for performing so called \"deferring\".\n * Traditionally this was achieved by calling `setTimeout(deferredTask, 0)`, but that technique involves\n * some (although minimal) unwanted delay.\n *\n * Note that using `asap` scheduler does not necessarily mean that your task will be first to process\n * after currently executing code. In particular, if some task was also scheduled with `asap` before,\n * that task will execute first. That being said, if you need to schedule task asynchronously, but\n * as soon as possible, `asap` scheduler is your best bet.\n *\n * @example <caption>Compare async and asap scheduler</caption>\n *\n * Rx.Scheduler.async.schedule(() => console.log('async')); // scheduling 'async' first...\n * Rx.Scheduler.asap.schedule(() => console.log('asap'));\n *\n * // Logs:\n * // \"asap\"\n * // \"async\"\n * // ... but 'asap' goes first!\n *\n * @static true\n * @name asap\n * @owner Scheduler\n */\nvar asap = new AsapScheduler(AsapAction);\n\n/**\n *\n * Async Scheduler\n *\n * <span class=\"informal\">Schedule task as if you used setTimeout(task, duration)</span>\n *\n * `async` scheduler schedules tasks asynchronously, by putting them on the JavaScript\n * event loop queue. It is best used to delay tasks in time or to schedule tasks repeating\n * in intervals.\n *\n * If you just want to \"defer\" task, that is to perform it right after currently\n * executing synchronous code ends (commonly achieved by `setTimeout(deferredTask, 0)`),\n * better choice will be the {@link asap} scheduler.\n *\n * @example <caption>Use async scheduler to delay task</caption>\n * const task = () => console.log('it works!');\n *\n * Rx.Scheduler.async.schedule(task, 2000);\n *\n * // After 2 seconds logs:\n * // \"it works!\"\n *\n *\n * @example <caption>Use async scheduler to repeat task in intervals</caption>\n * function task(state) {\n *   console.log(state);\n *   this.schedule(state + 1, 1000); // `this` references currently executing Action,\n *                                   // which we reschedule with new state and delay\n * }\n *\n * Rx.Scheduler.async.schedule(task, 3000, 0);\n *\n * // Logs:\n * // 0 after 3s\n * // 1 after 4s\n * // 2 after 5s\n * // 3 after 6s\n *\n * @static true\n * @name async\n * @owner Scheduler\n */\nvar async = new AsyncScheduler(AsyncAction);\n\nvar __extends$19 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar AnimationFrameAction = /** @class */ (function (_super) {\n    __extends$19(AnimationFrameAction, _super);\n    function AnimationFrameAction(scheduler, work) {\n        var _this = _super.call(this, scheduler, work) || this;\n        _this.scheduler = scheduler;\n        _this.work = work;\n        return _this;\n    }\n    AnimationFrameAction.prototype.requestAsyncId = function (scheduler, id, delay) {\n        if (delay === void 0) { delay = 0; }\n        // If delay is greater than 0, request as an async action.\n        if (delay !== null && delay > 0) {\n            return _super.prototype.requestAsyncId.call(this, scheduler, id, delay);\n        }\n        // Push the action to the end of the scheduler queue.\n        scheduler.actions.push(this);\n        // If an animation frame has already been requested, don't request another\n        // one. If an animation frame hasn't been requested yet, request one. Return\n        // the current animation frame request id.\n        return scheduler.scheduled || (scheduler.scheduled = requestAnimationFrame(function () { return scheduler.flush(null); }));\n    };\n    AnimationFrameAction.prototype.recycleAsyncId = function (scheduler, id, delay) {\n        if (delay === void 0) { delay = 0; }\n        // If delay exists and is greater than 0, or if the delay is null (the\n        // action wasn't rescheduled) but was originally scheduled as an async\n        // action, then recycle as an async action.\n        if ((delay !== null && delay > 0) || (delay === null && this.delay > 0)) {\n            return _super.prototype.recycleAsyncId.call(this, scheduler, id, delay);\n        }\n        // If the scheduler queue is empty, cancel the requested animation frame and\n        // set the scheduled flag to undefined so the next AnimationFrameAction will\n        // request its own.\n        if (scheduler.actions.length === 0) {\n            cancelAnimationFrame(id);\n            scheduler.scheduled = undefined;\n        }\n        // Return undefined so the action knows to request a new async id if it's rescheduled.\n        return undefined;\n    };\n    return AnimationFrameAction;\n}(AsyncAction));\n\nvar __extends$20 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar AnimationFrameScheduler = /** @class */ (function (_super) {\n    __extends$20(AnimationFrameScheduler, _super);\n    function AnimationFrameScheduler() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    AnimationFrameScheduler.prototype.flush = function (action) {\n        this.active = true;\n        this.scheduled = undefined;\n        var actions = this.actions;\n        var error;\n        var index = -1;\n        var count = actions.length;\n        action = action || actions.shift();\n        do {\n            if (error = action.execute(action.state, action.delay)) {\n                break;\n            }\n        } while (++index < count && (action = actions.shift()));\n        this.active = false;\n        if (error) {\n            while (++index < count && (action = actions.shift())) {\n                action.unsubscribe();\n            }\n            throw error;\n        }\n    };\n    return AnimationFrameScheduler;\n}(AsyncScheduler));\n\n/**\n *\n * Animation Frame Scheduler\n *\n * <span class=\"informal\">Perform task when `window.requestAnimationFrame` would fire</span>\n *\n * When `animationFrame` scheduler is used with delay, it will fall back to {@link async} scheduler\n * behaviour.\n *\n * Without delay, `animationFrame` scheduler can be used to create smooth browser animations.\n * It makes sure scheduled task will happen just before next browser content repaint,\n * thus performing animations as efficiently as possible.\n *\n * @example <caption>Schedule div height animation</caption>\n * const div = document.querySelector('.some-div');\n *\n * Rx.Scheduler.animationFrame.schedule(function(height) {\n *   div.style.height = height + \"px\";\n *\n *   this.schedule(height + 1);  // `this` references currently executing Action,\n *                               // which we reschedule with new state\n * }, 0, 0);\n *\n * // You will see .some-div element growing in height\n *\n *\n * @static true\n * @name animationFrame\n * @owner Scheduler\n */\nvar animationFrame = new AnimationFrameScheduler(AnimationFrameAction);\n\nvar __extends$21 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar VirtualTimeScheduler = /** @class */ (function (_super) {\n    __extends$21(VirtualTimeScheduler, _super);\n    function VirtualTimeScheduler(SchedulerAction, maxFrames) {\n        if (SchedulerAction === void 0) { SchedulerAction = VirtualAction; }\n        if (maxFrames === void 0) { maxFrames = Number.POSITIVE_INFINITY; }\n        var _this = _super.call(this, SchedulerAction, function () { return _this.frame; }) || this;\n        _this.maxFrames = maxFrames;\n        _this.frame = 0;\n        _this.index = -1;\n        return _this;\n    }\n    /**\n     * Prompt the Scheduler to execute all of its queued actions, therefore\n     * clearing its queue.\n     * @return {void}\n     */\n    VirtualTimeScheduler.prototype.flush = function () {\n        var _a = this, actions = _a.actions, maxFrames = _a.maxFrames;\n        var error, action;\n        while ((action = actions.shift()) && (this.frame = action.delay) <= maxFrames) {\n            if (error = action.execute(action.state, action.delay)) {\n                break;\n            }\n        }\n        if (error) {\n            while (action = actions.shift()) {\n                action.unsubscribe();\n            }\n            throw error;\n        }\n    };\n    VirtualTimeScheduler.frameTimeFactor = 10;\n    return VirtualTimeScheduler;\n}(AsyncScheduler));\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar VirtualAction = /** @class */ (function (_super) {\n    __extends$21(VirtualAction, _super);\n    function VirtualAction(scheduler, work, index) {\n        if (index === void 0) { index = scheduler.index += 1; }\n        var _this = _super.call(this, scheduler, work) || this;\n        _this.scheduler = scheduler;\n        _this.work = work;\n        _this.index = index;\n        _this.active = true;\n        _this.index = scheduler.index = index;\n        return _this;\n    }\n    VirtualAction.prototype.schedule = function (state, delay) {\n        if (delay === void 0) { delay = 0; }\n        if (!this.id) {\n            return _super.prototype.schedule.call(this, state, delay);\n        }\n        this.active = false;\n        // If an action is rescheduled, we save allocations by mutating its state,\n        // pushing it to the end of the scheduler queue, and recycling the action.\n        // But since the VirtualTimeScheduler is used for testing, VirtualActions\n        // must be immutable so they can be inspected later.\n        var action = new VirtualAction(this.scheduler, this.work);\n        this.add(action);\n        return action.schedule(state, delay);\n    };\n    VirtualAction.prototype.requestAsyncId = function (scheduler, id, delay) {\n        if (delay === void 0) { delay = 0; }\n        this.delay = scheduler.frame + delay;\n        var actions = scheduler.actions;\n        actions.push(this);\n        actions.sort(VirtualAction.sortActions);\n        return true;\n    };\n    VirtualAction.prototype.recycleAsyncId = function (scheduler, id, delay) {\n        if (delay === void 0) { delay = 0; }\n        return undefined;\n    };\n    VirtualAction.prototype._execute = function (state, delay) {\n        if (this.active === true) {\n            return _super.prototype._execute.call(this, state, delay);\n        }\n    };\n    VirtualAction.sortActions = function (a, b) {\n        if (a.delay === b.delay) {\n            if (a.index === b.index) {\n                return 0;\n            }\n            else if (a.index > b.index) {\n                return 1;\n            }\n            else {\n                return -1;\n            }\n        }\n        else if (a.delay > b.delay) {\n            return 1;\n        }\n        else {\n            return -1;\n        }\n    };\n    return VirtualAction;\n}(AsyncAction));\n\nfunction identity(x) {\n    return x;\n}\n\nvar __extends$22 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * An error thrown when an element was queried at a certain index of an\n * Observable, but no such index or position exists in that sequence.\n *\n * @see {@link elementAt}\n * @see {@link take}\n * @see {@link takeLast}\n *\n * @class ArgumentOutOfRangeError\n */\nvar ArgumentOutOfRangeError = /** @class */ (function (_super) {\n    __extends$22(ArgumentOutOfRangeError, _super);\n    function ArgumentOutOfRangeError() {\n        var _this = _super.call(this, 'argument out of range') || this;\n        _this.name = 'ArgumentOutOfRangeError';\n        Object.setPrototypeOf(_this, ArgumentOutOfRangeError.prototype);\n        return _this;\n    }\n    return ArgumentOutOfRangeError;\n}(Error));\n\nvar __extends$23 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * An error thrown when an Observable or a sequence was queried but has no\n * elements.\n *\n * @see {@link first}\n * @see {@link last}\n * @see {@link single}\n *\n * @class EmptyError\n */\nvar EmptyError = /** @class */ (function (_super) {\n    __extends$23(EmptyError, _super);\n    function EmptyError() {\n        var _this = _super.call(this, 'no elements in sequence') || this;\n        _this.name = 'EmptyError';\n        Object.setPrototypeOf(_this, EmptyError.prototype);\n        return _this;\n    }\n    return EmptyError;\n}(Error));\n\nvar __extends$24 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * An error thrown when duetime elapses.\n *\n * @see {@link timeout}\n *\n * @class TimeoutError\n */\nvar TimeoutError = /** @class */ (function (_super) {\n    __extends$24(TimeoutError, _super);\n    function TimeoutError() {\n        var _this = _super.call(this, 'Timeout has occurred') || this;\n        Object.setPrototypeOf(_this, TimeoutError.prototype);\n        return _this;\n    }\n    return TimeoutError;\n}(Error));\n\nvar __extends$25 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Applies a given `project` function to each value emitted by the source\n * Observable, and emits the resulting values as an Observable.\n *\n * <span class=\"informal\">Like [Array.prototype.map()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map),\n * it passes each source value through a transformation function to get\n * corresponding output values.</span>\n *\n * <img src=\"./img/map.png\" width=\"100%\">\n *\n * Similar to the well known `Array.prototype.map` function, this operator\n * applies a projection to each value and emits that projection in the output\n * Observable.\n *\n * @example <caption>Map every click to the clientX position of that click</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var positions = clicks.map(ev => ev.clientX);\n * positions.subscribe(x => console.log(x));\n *\n * @see {@link mapTo}\n * @see {@link pluck}\n *\n * @param {function(value: T, index: number): R} project The function to apply\n * to each `value` emitted by the source Observable. The `index` parameter is\n * the number `i` for the i-th emission that has happened since the\n * subscription, starting from the number `0`.\n * @param {any} [thisArg] An optional argument to define what `this` is in the\n * `project` function.\n * @return {Observable<R>} An Observable that emits the values from the source\n * Observable transformed by the given `project` function.\n * @method map\n * @owner Observable\n */\nfunction map(project, thisArg) {\n    return function mapOperation(source) {\n        if (typeof project !== 'function') {\n            throw new TypeError('argument is not a function. Are you looking for `mapTo()`?');\n        }\n        return source.lift(new MapOperator(project, thisArg));\n    };\n}\nvar MapOperator = /** @class */ (function () {\n    function MapOperator(project, thisArg) {\n        this.project = project;\n        this.thisArg = thisArg;\n    }\n    MapOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new MapSubscriber(subscriber, this.project, this.thisArg));\n    };\n    return MapOperator;\n}());\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar MapSubscriber = /** @class */ (function (_super) {\n    __extends$25(MapSubscriber, _super);\n    function MapSubscriber(destination, project, thisArg) {\n        var _this = _super.call(this, destination) || this;\n        _this.project = project;\n        _this.count = 0;\n        _this.thisArg = thisArg || _this;\n        return _this;\n    }\n    // NOTE: This looks unoptimized, but it's actually purposefully NOT\n    // using try/catch optimizations.\n    MapSubscriber.prototype._next = function (value) {\n        var result;\n        try {\n            result = this.project.call(this.thisArg, value, this.count++);\n        }\n        catch (err) {\n            this.destination.error(err);\n            return;\n        }\n        this.destination.next(result);\n    };\n    return MapSubscriber;\n}(Subscriber));\n\nvar __read$1 = (undefined && undefined.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spread$1 = (undefined && undefined.__spread) || function () {\n    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read$1(arguments[i]));\n    return ar;\n};\n// tslint:enable:max-line-length\n/**\n * Converts a callback API to a function that returns an Observable.\n *\n * <span class=\"informal\">Give it a function `f` of type `f(x, callback)` and\n * it will return a function `g` that when called as `g(x)` will output an\n * Observable.</span>\n *\n * `bindCallback` is not an operator because its input and output are not\n * Observables. The input is a function `func` with some parameters, the\n * last parameter must be a callback function that `func` calls when it is\n * done.\n *\n * The output of `bindCallback` is a function that takes the same parameters\n * as `func`, except the last one (the callback). When the output function\n * is called with arguments it will return an Observable. If function `func`\n * calls its callback with one argument the Observable will emit that value.\n * If on the other hand the callback is called with multiple values the resulting\n * Observable will emit an array with said values as arguments.\n *\n * It is very important to remember that input function `func` is not called\n * when the output function is, but rather when the Observable returned by the output\n * function is subscribed. This means if `func` makes an AJAX request, that request\n * will be made every time someone subscribes to the resulting Observable, but not before.\n *\n * The last optional parameter - {@link Scheduler} - can be used to control when the call\n * to `func` happens after someone subscribes to Observable, as well as when results\n * passed to callback will be emitted. By default, the subscription to  an Observable calls `func`\n * synchronously, but using `Scheduler.async` as the last parameter will defer the call to `func`,\n * just like wrapping the call in `setTimeout` with a timeout of `0` would. If you use the async Scheduler\n * and call `subscribe` on the output Observable all function calls that are currently executing\n * will end before `func` is invoked.\n *\n * By default results passed to the callback are emitted immediately after `func` invokes the callback.\n * In particular, if the callback is called synchronously the subscription of the resulting Observable\n * will call the `next` function synchronously as well.  If you want to defer that call,\n * you may use `Scheduler.async` just as before.  This means that by using `Scheduler.async` you can\n * ensure that `func` always calls its callback asynchronously, thus avoiding terrifying Zalgo.\n *\n * Note that the Observable created by the output function will always emit a single value\n * and then complete immediately. If `func` calls the callback multiple times, values from subsequent\n * calls will not appear in the stream. If you need to listen for multiple calls,\n *  you probably want to use {@link fromEvent} or {@link fromEventPattern} instead.\n *\n * If `func` depends on some context (`this` property) and is not already bound the context of `func`\n * will be the context that the output function has at call time. In particular, if `func`\n * is called as a method of some objec and if `func` is not already bound, in order to preserve the context\n * it is recommended that the context of the output function is set to that object as well.\n *\n * If the input function calls its callback in the \"node style\" (i.e. first argument to callback is\n * optional error parameter signaling whether the call failed or not), {@link bindNodeCallback}\n * provides convenient error handling and probably is a better choice.\n * `bindCallback` will treat such functions the same as any other and error parameters\n * (whether passed or not) will always be interpreted as regular callback argument.\n *\n *\n * @example <caption>Convert jQuery's getJSON to an Observable API</caption>\n * // Suppose we have jQuery.getJSON('/my/url', callback)\n * var getJSONAsObservable = bindCallback(jQuery.getJSON);\n * var result = getJSONAsObservable('/my/url');\n * result.subscribe(x => console.log(x), e => console.error(e));\n *\n *\n * @example <caption>Receive an array of arguments passed to a callback</caption>\n * someFunction((a, b, c) => {\n *   console.log(a); // 5\n *   console.log(b); // 'some string'\n *   console.log(c); // {someProperty: 'someValue'}\n * });\n *\n * const boundSomeFunction = bindCallback(someFunction);\n * boundSomeFunction().subscribe(values => {\n *   console.log(values) // [5, 'some string', {someProperty: 'someValue'}]\n * });\n *\n *\n * @example <caption>Compare behaviour with and without async Scheduler</caption>\n * function iCallMyCallbackSynchronously(cb) {\n *   cb();\n * }\n *\n * const boundSyncFn = bindCallback(iCallMyCallbackSynchronously);\n * const boundAsyncFn = bindCallback(iCallMyCallbackSynchronously, null, Rx.Scheduler.async);\n *\n * boundSyncFn().subscribe(() => console.log('I was sync!'));\n * boundAsyncFn().subscribe(() => console.log('I was async!'));\n * console.log('This happened...');\n *\n * // Logs:\n * // I was sync!\n * // This happened...\n * // I was async!\n *\n *\n * @example <caption>Use bindCallback on an object method</caption>\n * const boundMethod = bindCallback(someObject.methodWithCallback);\n * boundMethod.call(someObject) // make sure methodWithCallback has access to someObject\n * .subscribe(subscriber);\n *\n *\n * @see {@link bindNodeCallback}\n * @see {@link from}\n * @see {@link fromPromise}\n *\n * @param {function} func A function with a callback as the last parameter.\n * @param {Scheduler} [scheduler] The scheduler on which to schedule the\n * callbacks.\n * @return {function(...params: *): Observable} A function which returns the\n * Observable that delivers the same values the callback would deliver.\n * @name bindCallback\n */\n\nvar __read$2 = (undefined && undefined.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spread$2 = (undefined && undefined.__spread) || function () {\n    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read$2(arguments[i]));\n    return ar;\n};\n/**\n * Converts a Node.js-style callback API to a function that returns an\n * Observable.\n *\n * <span class=\"informal\">It's just like {@link bindCallback}, but the\n * callback is expected to be of type `callback(error, result)`.</span>\n *\n * `bindNodeCallback` is not an operator because its input and output are not\n * Observables. The input is a function `func` with some parameters, but the\n * last parameter must be a callback function that `func` calls when it is\n * done. The callback function is expected to follow Node.js conventions,\n * where the first argument to the callback is an error object, signaling\n * whether call was successful. If that object is passed to callback, it means\n * something went wrong.\n *\n * The output of `bindNodeCallback` is a function that takes the same\n * parameters as `func`, except the last one (the callback). When the output\n * function is called with arguments, it will return an Observable.\n * If `func` calls its callback with error parameter present, Observable will\n * error with that value as well. If error parameter is not passed, Observable will emit\n * second parameter. If there are more parameters (third and so on),\n * Observable will emit an array with all arguments, except first error argument.\n *\n * Note that `func` will not be called at the same time output function is,\n * but rather whenever resulting Observable is subscribed. By default call to\n * `func` will happen synchronously after subscription, but that can be changed\n * with proper {@link Scheduler} provided as optional third parameter. Scheduler\n * can also control when values from callback will be emitted by Observable.\n * To find out more, check out documentation for {@link bindCallback}, where\n * Scheduler works exactly the same.\n *\n * As in {@link bindCallback}, context (`this` property) of input function will be set to context\n * of returned function, when it is called.\n *\n * After Observable emits value, it will complete immediately. This means\n * even if `func` calls callback again, values from second and consecutive\n * calls will never appear on the stream. If you need to handle functions\n * that call callbacks multiple times, check out {@link fromEvent} or\n * {@link fromEventPattern} instead.\n *\n * Note that `bindNodeCallback` can be used in non-Node.js environments as well.\n * \"Node.js-style\" callbacks are just a convention, so if you write for\n * browsers or any other environment and API you use implements that callback style,\n * `bindNodeCallback` can be safely used on that API functions as well.\n *\n * Remember that Error object passed to callback does not have to be an instance\n * of JavaScript built-in `Error` object. In fact, it does not even have to an object.\n * Error parameter of callback function is interpreted as \"present\", when value\n * of that parameter is truthy. It could be, for example, non-zero number, non-empty\n * string or boolean `true`. In all of these cases resulting Observable would error\n * with that value. This means usually regular style callbacks will fail very often when\n * `bindNodeCallback` is used. If your Observable errors much more often then you\n * would expect, check if callback really is called in Node.js-style and, if not,\n * switch to {@link bindCallback} instead.\n *\n * Note that even if error parameter is technically present in callback, but its value\n * is falsy, it still won't appear in array emitted by Observable.\n *\n *\n * @example <caption>Read a file from the filesystem and get the data as an Observable</caption>\n * import * as fs from 'fs';\n * var readFileAsObservable = bindNodeCallback(fs.readFile);\n * var result = readFileAsObservable('./roadNames.txt', 'utf8');\n * result.subscribe(x => console.log(x), e => console.error(e));\n *\n *\n * @example <caption>Use on function calling callback with multiple arguments</caption>\n * someFunction((err, a, b) => {\n *   console.log(err); // null\n *   console.log(a); // 5\n *   console.log(b); // \"some string\"\n * });\n * var boundSomeFunction = bindNodeCallback(someFunction);\n * boundSomeFunction()\n * .subscribe(value => {\n *   console.log(value); // [5, \"some string\"]\n * });\n *\n * @example <caption>Use on function calling callback in regular style</caption>\n * someFunction(a => {\n *   console.log(a); // 5\n * });\n * var boundSomeFunction = bindNodeCallback(someFunction);\n * boundSomeFunction()\n * .subscribe(\n *   value => {}             // never gets called\n *   err => console.log(err) // 5\n * );\n *\n *\n * @see {@link bindCallback}\n * @see {@link from}\n * @see {@link fromPromise}\n *\n * @param {function} func Function with a Node.js-style callback as the last parameter.\n * @param {Scheduler} [scheduler] The scheduler on which to schedule the\n * callbacks.\n * @return {function(...params: *): Observable} A function which returns the\n * Observable that delivers the same values the Node.js callback would\n * deliver.\n * @name bindNodeCallback\n */\n\nvar __extends$27 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar OuterSubscriber = /** @class */ (function (_super) {\n    __extends$27(OuterSubscriber, _super);\n    function OuterSubscriber() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    OuterSubscriber.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n        this.destination.next(innerValue);\n    };\n    OuterSubscriber.prototype.notifyError = function (error, innerSub) {\n        this.destination.error(error);\n    };\n    OuterSubscriber.prototype.notifyComplete = function (innerSub) {\n        this.destination.complete();\n    };\n    return OuterSubscriber;\n}(Subscriber));\n\nvar __extends$28 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar InnerSubscriber = /** @class */ (function (_super) {\n    __extends$28(InnerSubscriber, _super);\n    function InnerSubscriber(parent, outerValue, outerIndex) {\n        var _this = _super.call(this) || this;\n        _this.parent = parent;\n        _this.outerValue = outerValue;\n        _this.outerIndex = outerIndex;\n        _this.index = 0;\n        return _this;\n    }\n    InnerSubscriber.prototype._next = function (value) {\n        this.parent.notifyNext(this.outerValue, value, this.outerIndex, this.index++, this);\n    };\n    InnerSubscriber.prototype._error = function (error) {\n        this.parent.notifyError(error, this);\n        this.unsubscribe();\n    };\n    InnerSubscriber.prototype._complete = function () {\n        this.parent.notifyComplete(this);\n        this.unsubscribe();\n    };\n    return InnerSubscriber;\n}(Subscriber));\n\nvar subscribeToPromise = function (promise) { return function (subscriber) {\n    promise.then(function (value) {\n        if (!subscriber.closed) {\n            subscriber.next(value);\n            subscriber.complete();\n        }\n    }, function (err) { return subscriber.error(err); })\n        .then(null, hostReportError);\n    return subscriber;\n}; };\n\nfunction getSymbolIterator$1() {\n    if (typeof Symbol !== 'function' || !Symbol.iterator) {\n        return '@@iterator';\n    }\n    return Symbol.iterator;\n}\nvar iterator = getSymbolIterator$1();\n/**\n * @deprecated use {@link iterator} instead\n */\n\nvar subscribeToIterable = function (iterable) { return function (subscriber) {\n    var iterator$$1 = iterable[iterator]();\n    do {\n        var item = iterator$$1.next();\n        if (item.done) {\n            subscriber.complete();\n            break;\n        }\n        subscriber.next(item.value);\n        if (subscriber.closed) {\n            break;\n        }\n    } while (true);\n    // Finalize the iterator if it happens to be a Generator\n    if (typeof iterator$$1.return === 'function') {\n        subscriber.add(function () {\n            if (iterator$$1.return) {\n                iterator$$1.return();\n            }\n        });\n    }\n    return subscriber;\n}; };\n\n/**\n * Subscribes to an object that implements Symbol.observable with the given\n * Subscriber.\n * @param obj An object that implements Symbol.observable\n */\nvar subscribeToObservable = function (obj) { return function (subscriber) {\n    var obs = obj[observable]();\n    if (typeof obs.subscribe !== 'function') {\n        // Should be caught by observable subscribe function error handling.\n        throw new TypeError('Provided object does not correctly implement Symbol.observable');\n    }\n    else {\n        return obs.subscribe(subscriber);\n    }\n}; };\n\nvar isArrayLike = (function (x) { return x && typeof x.length === 'number'; });\n\nfunction isPromise$1(value) {\n    return value && typeof value.subscribe !== 'function' && typeof value.then === 'function';\n}\n\nvar subscribeTo = function (result) {\n    if (result instanceof Observable) {\n        return function (subscriber) {\n            if (result._isScalar) {\n                subscriber.next(result.value);\n                subscriber.complete();\n                return undefined;\n            }\n            else {\n                return result.subscribe(subscriber);\n            }\n        };\n    }\n    else if (isArrayLike(result)) {\n        return subscribeToArray(result);\n    }\n    else if (isPromise$1(result)) {\n        return subscribeToPromise(result);\n    }\n    else if (result && typeof result[iterator] === 'function') {\n        return subscribeToIterable(result);\n    }\n    else if (result && typeof result[observable] === 'function') {\n        return subscribeToObservable(result);\n    }\n    else {\n        var value = isObject(result) ? 'an invalid object' : \"'\" + result + \"'\";\n        var msg = \"You provided \" + value + \" where a stream was expected.\"\n            + ' You can provide an Observable, Promise, Array, or Iterable.';\n        throw new TypeError(msg);\n    }\n};\n\nfunction subscribeToResult(outerSubscriber, result, outerValue, outerIndex) {\n    var destination = new InnerSubscriber(outerSubscriber, outerValue, outerIndex);\n    return subscribeTo(result)(destination);\n}\n\nvar __extends$26 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar NONE = {};\n/* tslint:enable:max-line-length */\n/**\n * Combines multiple Observables to create an Observable whose values are\n * calculated from the latest values of each of its input Observables.\n *\n * <span class=\"informal\">Whenever any input Observable emits a value, it\n * computes a formula using the latest values from all the inputs, then emits\n * the output of that formula.</span>\n *\n * <img src=\"./img/combineLatest.png\" width=\"100%\">\n *\n * `combineLatest` combines the values from all the Observables passed as\n * arguments. This is done by subscribing to each Observable in order and,\n * whenever any Observable emits, collecting an array of the most recent\n * values from each Observable. So if you pass `n` Observables to operator,\n * returned Observable will always emit an array of `n` values, in order\n * corresponding to order of passed Observables (value from the first Observable\n * on the first place and so on).\n *\n * Static version of `combineLatest` accepts either an array of Observables\n * or each Observable can be put directly as an argument. Note that array of\n * Observables is good choice, if you don't know beforehand how many Observables\n * you will combine. Passing empty array will result in Observable that\n * completes immediately.\n *\n * To ensure output array has always the same length, `combineLatest` will\n * actually wait for all input Observables to emit at least once,\n * before it starts emitting results. This means if some Observable emits\n * values before other Observables started emitting, all that values but last\n * will be lost. On the other hand, is some Observable does not emit value but\n * completes, resulting Observable will complete at the same moment without\n * emitting anything, since it will be now impossible to include value from\n * completed Observable in resulting array. Also, if some input Observable does\n * not emit any value and never completes, `combineLatest` will also never emit\n * and never complete, since, again, it will wait for all streams to emit some\n * value.\n *\n * If at least one Observable was passed to `combineLatest` and all passed Observables\n * emitted something, resulting Observable will complete when all combined\n * streams complete. So even if some Observable completes, result of\n * `combineLatest` will still emit values when other Observables do. In case\n * of completed Observable, its value from now on will always be the last\n * emitted value. On the other hand, if any Observable errors, `combineLatest`\n * will error immediately as well, and all other Observables will be unsubscribed.\n *\n * `combineLatest` accepts as optional parameter `project` function, which takes\n * as arguments all values that would normally be emitted by resulting Observable.\n * `project` can return any kind of value, which will be then emitted by Observable\n * instead of default array. Note that `project` does not take as argument that array\n * of values, but values themselves. That means default `project` can be imagined\n * as function that takes all its arguments and puts them into an array.\n *\n *\n * @example <caption>Combine two timer Observables</caption>\n * const firstTimer = Rx.Observable.timer(0, 1000); // emit 0, 1, 2... after every second, starting from now\n * const secondTimer = Rx.Observable.timer(500, 1000); // emit 0, 1, 2... after every second, starting 0,5s from now\n * const combinedTimers = Rx.Observable.combineLatest(firstTimer, secondTimer);\n * combinedTimers.subscribe(value => console.log(value));\n * // Logs\n * // [0, 0] after 0.5s\n * // [1, 0] after 1s\n * // [1, 1] after 1.5s\n * // [2, 1] after 2s\n *\n *\n * @example <caption>Combine an array of Observables</caption>\n * const observables = [1, 5, 10].map(\n *   n => Rx.Observable.of(n).delay(n * 1000).startWith(0) // emit 0 and then emit n after n seconds\n * );\n * const combined = Rx.Observable.combineLatest(observables);\n * combined.subscribe(value => console.log(value));\n * // Logs\n * // [0, 0, 0] immediately\n * // [1, 0, 0] after 1s\n * // [1, 5, 0] after 5s\n * // [1, 5, 10] after 10s\n *\n *\n * @example <caption>Use project function to dynamically calculate the Body-Mass Index</caption>\n * var weight = Rx.Observable.of(70, 72, 76, 79, 75);\n * var height = Rx.Observable.of(1.76, 1.77, 1.78);\n * var bmi = Rx.Observable.combineLatest(weight, height, (w, h) => w / (h * h));\n * bmi.subscribe(x => console.log('BMI is ' + x));\n *\n * // With output to console:\n * // BMI is 24.212293388429753\n * // BMI is 23.93948099205209\n * // BMI is 23.671253629592222\n *\n *\n * @see {@link combineAll}\n * @see {@link merge}\n * @see {@link withLatestFrom}\n *\n * @param {ObservableInput} observable1 An input Observable to combine with other Observables.\n * @param {ObservableInput} observable2 An input Observable to combine with other Observables.\n * More than one input Observables may be given as arguments\n * or an array of Observables may be given as the first argument.\n * @param {function} [project] An optional function to project the values from\n * the combined latest values into a new value on the output Observable.\n * @param {Scheduler} [scheduler=null] The IScheduler to use for subscribing to\n * each input Observable.\n * @return {Observable} An Observable of projected values from the most recent\n * values from each input Observable, or an array of the most recent values from\n * each input Observable.\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar CombineLatestSubscriber = /** @class */ (function (_super) {\n    __extends$26(CombineLatestSubscriber, _super);\n    function CombineLatestSubscriber(destination, resultSelector) {\n        var _this = _super.call(this, destination) || this;\n        _this.resultSelector = resultSelector;\n        _this.active = 0;\n        _this.values = [];\n        _this.observables = [];\n        return _this;\n    }\n    CombineLatestSubscriber.prototype._next = function (observable) {\n        this.values.push(NONE);\n        this.observables.push(observable);\n    };\n    CombineLatestSubscriber.prototype._complete = function () {\n        var observables = this.observables;\n        var len = observables.length;\n        if (len === 0) {\n            this.destination.complete();\n        }\n        else {\n            this.active = len;\n            this.toRespond = len;\n            for (var i = 0; i < len; i++) {\n                var observable = observables[i];\n                this.add(subscribeToResult(this, observable, observable, i));\n            }\n        }\n    };\n    CombineLatestSubscriber.prototype.notifyComplete = function (unused) {\n        if ((this.active -= 1) === 0) {\n            this.destination.complete();\n        }\n    };\n    CombineLatestSubscriber.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n        var values = this.values;\n        var oldVal = values[outerIndex];\n        var toRespond = !this.toRespond\n            ? 0\n            : oldVal === NONE ? --this.toRespond : this.toRespond;\n        values[outerIndex] = innerValue;\n        if (toRespond === 0) {\n            if (this.resultSelector) {\n                this._tryResultSelector(values);\n            }\n            else {\n                this.destination.next(values.slice());\n            }\n        }\n    };\n    CombineLatestSubscriber.prototype._tryResultSelector = function (values) {\n        var result;\n        try {\n            result = this.resultSelector.apply(this, values);\n        }\n        catch (err) {\n            this.destination.error(err);\n            return;\n        }\n        this.destination.next(result);\n    };\n    return CombineLatestSubscriber;\n}(OuterSubscriber));\n\n/** Identifies an input as being Observable (but not necessary an Rx Observable) */\nfunction isObservable(input) {\n    return input && typeof input[observable] === 'function';\n}\n\n/** Identifies an input as being an Iterable */\nfunction isIterable(input) {\n    return input && typeof input[iterator] === 'function';\n}\n\nfunction fromPromise(input, scheduler) {\n    if (!scheduler) {\n        return new Observable(subscribeToPromise(input));\n    }\n    else {\n        return new Observable(function (subscriber) {\n            var sub = new Subscription();\n            sub.add(scheduler.schedule(function () { return input.then(function (value) {\n                sub.add(scheduler.schedule(function () {\n                    subscriber.next(value);\n                    sub.add(scheduler.schedule(function () { return subscriber.complete(); }));\n                }));\n            }, function (err) {\n                sub.add(scheduler.schedule(function () { return subscriber.error(err); }));\n            }); }));\n            return sub;\n        });\n    }\n}\n\nfunction fromIterable(input, scheduler) {\n    if (!input) {\n        throw new Error('Iterable cannot be null');\n    }\n    if (!scheduler) {\n        return new Observable(subscribeToIterable(input));\n    }\n    else {\n        return new Observable(function (subscriber) {\n            var sub = new Subscription();\n            var iterator$$1;\n            sub.add(function () {\n                // Finalize generators\n                if (iterator$$1 && typeof iterator$$1.return === 'function') {\n                    iterator$$1.return();\n                }\n            });\n            sub.add(scheduler.schedule(function () {\n                iterator$$1 = input[iterator]();\n                sub.add(scheduler.schedule(function () {\n                    if (subscriber.closed) {\n                        return;\n                    }\n                    var value;\n                    var done;\n                    try {\n                        var result = iterator$$1.next();\n                        value = result.value;\n                        done = result.done;\n                    }\n                    catch (err) {\n                        subscriber.error(err);\n                        return;\n                    }\n                    if (done) {\n                        subscriber.complete();\n                    }\n                    else {\n                        subscriber.next(value);\n                        this.schedule();\n                    }\n                }));\n            }));\n            return sub;\n        });\n    }\n}\n\nfunction fromObservable(input, scheduler) {\n    if (!scheduler) {\n        return new Observable(subscribeToObservable(input));\n    }\n    else {\n        return new Observable(function (subscriber) {\n            var sub = new Subscription();\n            sub.add(scheduler.schedule(function () {\n                var observable$$1 = input[observable]();\n                sub.add(observable$$1.subscribe({\n                    next: function (value) { sub.add(scheduler.schedule(function () { return subscriber.next(value); })); },\n                    error: function (err) { sub.add(scheduler.schedule(function () { return subscriber.error(err); })); },\n                    complete: function () { sub.add(scheduler.schedule(function () { return subscriber.complete(); })); },\n                }));\n            }));\n            return sub;\n        });\n    }\n}\n\nfunction from(input, scheduler) {\n    if (!scheduler) {\n        if (input instanceof Observable) {\n            return input;\n        }\n        return new Observable(subscribeTo(input));\n    }\n    if (input != null) {\n        if (isObservable(input)) {\n            return fromObservable(input, scheduler);\n        }\n        else if (isPromise$1(input)) {\n            return fromPromise(input, scheduler);\n        }\n        else if (isArrayLike(input)) {\n            return fromArray(input, scheduler);\n        }\n        else if (isIterable(input) || typeof input === 'string') {\n            return fromIterable(input, scheduler);\n        }\n    }\n    throw new TypeError((input !== null && typeof input || input) + ' is not observable');\n}\n\nvar __extends$29 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/* tslint:enable:max-line-length */\n/**\n * Projects each source value to an Observable which is merged in the output\n * Observable.\n *\n * <span class=\"informal\">Maps each value to an Observable, then flattens all of\n * these inner Observables using {@link mergeAll}.</span>\n *\n * <img src=\"./img/mergeMap.png\" width=\"100%\">\n *\n * Returns an Observable that emits items based on applying a function that you\n * supply to each item emitted by the source Observable, where that function\n * returns an Observable, and then merging those resulting Observables and\n * emitting the results of this merger.\n *\n * @example <caption>Map and flatten each letter to an Observable ticking every 1 second</caption>\n * var letters = Rx.Observable.of('a', 'b', 'c');\n * var result = letters.mergeMap(x =>\n *   Rx.Observable.interval(1000).map(i => x+i)\n * );\n * result.subscribe(x => console.log(x));\n *\n * // Results in the following:\n * // a0\n * // b0\n * // c0\n * // a1\n * // b1\n * // c1\n * // continues to list a,b,c with respective ascending integers\n *\n * @see {@link concatMap}\n * @see {@link exhaustMap}\n * @see {@link merge}\n * @see {@link mergeAll}\n * @see {@link mergeMapTo}\n * @see {@link mergeScan}\n * @see {@link switchMap}\n *\n * @param {function(value: T, ?index: number): ObservableInput} project A function\n * that, when applied to an item emitted by the source Observable, returns an\n * Observable.\n * @param {number} [concurrent=Number.POSITIVE_INFINITY] Maximum number of input\n * Observables being subscribed to concurrently.\n * @return {Observable} An Observable that emits the result of applying the\n * projection function (and the optional `resultSelector`) to each item emitted\n * by the source Observable and merging the results of the Observables obtained\n * from this transformation.\n * @method mergeMap\n * @owner Observable\n */\nfunction mergeMap(project, resultSelector, concurrent) {\n    if (concurrent === void 0) { concurrent = Number.POSITIVE_INFINITY; }\n    if (typeof resultSelector === 'function') {\n        // DEPRECATED PATH\n        return function (source) { return source.pipe(mergeMap(function (a, i) { return from(project(a, i)).pipe(map(function (b, ii) { return resultSelector(a, b, i, ii); })); }, concurrent)); };\n    }\n    else if (typeof resultSelector === 'number') {\n        concurrent = resultSelector;\n    }\n    return function (source) { return source.lift(new MergeMapOperator(project, concurrent)); };\n}\nvar MergeMapOperator = /** @class */ (function () {\n    function MergeMapOperator(project, concurrent) {\n        if (concurrent === void 0) { concurrent = Number.POSITIVE_INFINITY; }\n        this.project = project;\n        this.concurrent = concurrent;\n    }\n    MergeMapOperator.prototype.call = function (observer, source) {\n        return source.subscribe(new MergeMapSubscriber(observer, this.project, this.concurrent));\n    };\n    return MergeMapOperator;\n}());\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar MergeMapSubscriber = /** @class */ (function (_super) {\n    __extends$29(MergeMapSubscriber, _super);\n    function MergeMapSubscriber(destination, project, concurrent) {\n        if (concurrent === void 0) { concurrent = Number.POSITIVE_INFINITY; }\n        var _this = _super.call(this, destination) || this;\n        _this.project = project;\n        _this.concurrent = concurrent;\n        _this.hasCompleted = false;\n        _this.buffer = [];\n        _this.active = 0;\n        _this.index = 0;\n        return _this;\n    }\n    MergeMapSubscriber.prototype._next = function (value) {\n        if (this.active < this.concurrent) {\n            this._tryNext(value);\n        }\n        else {\n            this.buffer.push(value);\n        }\n    };\n    MergeMapSubscriber.prototype._tryNext = function (value) {\n        var result;\n        var index = this.index++;\n        try {\n            result = this.project(value, index);\n        }\n        catch (err) {\n            this.destination.error(err);\n            return;\n        }\n        this.active++;\n        this._innerSub(result, value, index);\n    };\n    MergeMapSubscriber.prototype._innerSub = function (ish, value, index) {\n        this.add(subscribeToResult(this, ish, value, index));\n    };\n    MergeMapSubscriber.prototype._complete = function () {\n        this.hasCompleted = true;\n        if (this.active === 0 && this.buffer.length === 0) {\n            this.destination.complete();\n        }\n    };\n    MergeMapSubscriber.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n        this.destination.next(innerValue);\n    };\n    MergeMapSubscriber.prototype.notifyComplete = function (innerSub) {\n        var buffer = this.buffer;\n        this.remove(innerSub);\n        this.active--;\n        if (buffer.length > 0) {\n            this._next(buffer.shift());\n        }\n        else if (this.active === 0 && this.hasCompleted) {\n            this.destination.complete();\n        }\n    };\n    return MergeMapSubscriber;\n}(OuterSubscriber));\n\n/**\n * Converts a higher-order Observable into a first-order Observable which\n * concurrently delivers all values that are emitted on the inner Observables.\n *\n * <span class=\"informal\">Flattens an Observable-of-Observables.</span>\n *\n * <img src=\"./img/mergeAll.png\" width=\"100%\">\n *\n * `mergeAll` subscribes to an Observable that emits Observables, also known as\n * a higher-order Observable. Each time it observes one of these emitted inner\n * Observables, it subscribes to that and delivers all the values from the\n * inner Observable on the output Observable. The output Observable only\n * completes once all inner Observables have completed. Any error delivered by\n * a inner Observable will be immediately emitted on the output Observable.\n *\n * @example <caption>Spawn a new interval Observable for each click event, and blend their outputs as one Observable</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var higherOrder = clicks.map((ev) => Rx.Observable.interval(1000));\n * var firstOrder = higherOrder.mergeAll();\n * firstOrder.subscribe(x => console.log(x));\n *\n * @example <caption>Count from 0 to 9 every second for each click, but only allow 2 concurrent timers</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var higherOrder = clicks.map((ev) => Rx.Observable.interval(1000).take(10));\n * var firstOrder = higherOrder.mergeAll(2);\n * firstOrder.subscribe(x => console.log(x));\n *\n * @see {@link combineAll}\n * @see {@link concatAll}\n * @see {@link exhaust}\n * @see {@link merge}\n * @see {@link mergeMap}\n * @see {@link mergeMapTo}\n * @see {@link mergeScan}\n * @see {@link switch}\n * @see {@link zipAll}\n *\n * @param {number} [concurrent=Number.POSITIVE_INFINITY] Maximum number of inner\n * Observables being subscribed to concurrently.\n * @return {Observable} An Observable that emits values coming from all the\n * inner Observables emitted by the source Observable.\n * @method mergeAll\n * @owner Observable\n */\nfunction mergeAll(concurrent) {\n    if (concurrent === void 0) { concurrent = Number.POSITIVE_INFINITY; }\n    return mergeMap(identity, concurrent);\n}\n\n/**\n * Converts a higher-order Observable into a first-order Observable by\n * concatenating the inner Observables in order.\n *\n * <span class=\"informal\">Flattens an Observable-of-Observables by putting one\n * inner Observable after the other.</span>\n *\n * <img src=\"./img/concatAll.png\" width=\"100%\">\n *\n * Joins every Observable emitted by the source (a higher-order Observable), in\n * a serial fashion. It subscribes to each inner Observable only after the\n * previous inner Observable has completed, and merges all of their values into\n * the returned observable.\n *\n * __Warning:__ If the source Observable emits Observables quickly and\n * endlessly, and the inner Observables it emits generally complete slower than\n * the source emits, you can run into memory issues as the incoming Observables\n * collect in an unbounded buffer.\n *\n * Note: `concatAll` is equivalent to `mergeAll` with concurrency parameter set\n * to `1`.\n *\n * @example <caption>For each click event, tick every second from 0 to 3, with no concurrency</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var higherOrder = clicks.map(ev => Rx.Observable.interval(1000).take(4));\n * var firstOrder = higherOrder.concatAll();\n * firstOrder.subscribe(x => console.log(x));\n *\n * // Results in the following:\n * // (results are not concurrent)\n * // For every click on the \"document\" it will emit values 0 to 3 spaced\n * // on a 1000ms interval\n * // one click = 1000ms-> 0 -1000ms-> 1 -1000ms-> 2 -1000ms-> 3\n *\n * @see {@link combineAll}\n * @see {@link concat}\n * @see {@link concatMap}\n * @see {@link concatMapTo}\n * @see {@link exhaust}\n * @see {@link mergeAll}\n * @see {@link switch}\n * @see {@link zipAll}\n *\n * @return {Observable} An Observable emitting values from all the inner\n * Observables concatenated.\n * @method concatAll\n * @owner Observable\n */\n\nvar __read$3 = (undefined && undefined.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spread$3 = (undefined && undefined.__spread) || function () {\n    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read$3(arguments[i]));\n    return ar;\n};\n/* tslint:enable:max-line-length */\n/**\n * Creates an output Observable which sequentially emits all values from given\n * Observable and then moves on to the next.\n *\n * <span class=\"informal\">Concatenates multiple Observables together by\n * sequentially emitting their values, one Observable after the other.</span>\n *\n * <img src=\"./img/concat.png\" width=\"100%\">\n *\n * `concat` joins multiple Observables together, by subscribing to them one at a time and\n * merging their results into the output Observable. You can pass either an array of\n * Observables, or put them directly as arguments. Passing an empty array will result\n * in Observable that completes immediately.\n *\n * `concat` will subscribe to first input Observable and emit all its values, without\n * changing or affecting them in any way. When that Observable completes, it will\n * subscribe to then next Observable passed and, again, emit its values. This will be\n * repeated, until the operator runs out of Observables. When last input Observable completes,\n * `concat` will complete as well. At any given moment only one Observable passed to operator\n * emits values. If you would like to emit values from passed Observables concurrently, check out\n * {@link merge} instead, especially with optional `concurrent` parameter. As a matter of fact,\n * `concat` is an equivalent of `merge` operator with `concurrent` parameter set to `1`.\n *\n * Note that if some input Observable never completes, `concat` will also never complete\n * and Observables following the one that did not complete will never be subscribed. On the other\n * hand, if some Observable simply completes immediately after it is subscribed, it will be\n * invisible for `concat`, which will just move on to the next Observable.\n *\n * If any Observable in chain errors, instead of passing control to the next Observable,\n * `concat` will error immediately as well. Observables that would be subscribed after\n * the one that emitted error, never will.\n *\n * If you pass to `concat` the same Observable many times, its stream of values\n * will be \"replayed\" on every subscription, which means you can repeat given Observable\n * as many times as you like. If passing the same Observable to `concat` 1000 times becomes tedious,\n * you can always use {@link repeat}.\n *\n * @example <caption>Concatenate a timer counting from 0 to 3 with a synchronous sequence from 1 to 10</caption>\n * var timer = Rx.Observable.interval(1000).take(4);\n * var sequence = Rx.Observable.range(1, 10);\n * var result = Rx.Observable.concat(timer, sequence);\n * result.subscribe(x => console.log(x));\n *\n * // results in:\n * // 0 -1000ms-> 1 -1000ms-> 2 -1000ms-> 3 -immediate-> 1 ... 10\n *\n *\n * @example <caption>Concatenate an array of 3 Observables</caption>\n * var timer1 = Rx.Observable.interval(1000).take(10);\n * var timer2 = Rx.Observable.interval(2000).take(6);\n * var timer3 = Rx.Observable.interval(500).take(10);\n * var result = Rx.Observable.concat([timer1, timer2, timer3]); // note that array is passed\n * result.subscribe(x => console.log(x));\n *\n * // results in the following:\n * // (Prints to console sequentially)\n * // -1000ms-> 0 -1000ms-> 1 -1000ms-> ... 9\n * // -2000ms-> 0 -2000ms-> 1 -2000ms-> ... 5\n * // -500ms-> 0 -500ms-> 1 -500ms-> ... 9\n *\n *\n * @example <caption>Concatenate the same Observable to repeat it</caption>\n * const timer = Rx.Observable.interval(1000).take(2);\n *\n * Rx.Observable.concat(timer, timer) // concating the same Observable!\n * .subscribe(\n *   value => console.log(value),\n *   err => {},\n *   () => console.log('...and it is done!')\n * );\n *\n * // Logs:\n * // 0 after 1s\n * // 1 after 2s\n * // 0 after 3s\n * // 1 after 4s\n * // \"...and it is done!\" also after 4s\n *\n * @see {@link concatAll}\n * @see {@link concatMap}\n * @see {@link concatMapTo}\n *\n * @param {ObservableInput} input1 An input Observable to concatenate with others.\n * @param {ObservableInput} input2 An input Observable to concatenate with others.\n * More than one input Observables may be given as argument.\n * @param {Scheduler} [scheduler=null] An optional IScheduler to schedule each\n * Observable subscription on.\n * @return {Observable} All values of each passed Observable merged into a\n * single Observable, in order, in serial fashion.\n * @static true\n * @name concat\n * @owner Observable\n */\n\n/**\n * Creates an Observable that, on subscribe, calls an Observable factory to\n * make an Observable for each new Observer.\n *\n * <span class=\"informal\">Creates the Observable lazily, that is, only when it\n * is subscribed.\n * </span>\n *\n * <img src=\"./img/defer.png\" width=\"100%\">\n *\n * `defer` allows you to create the Observable only when the Observer\n * subscribes, and create a fresh Observable for each Observer. It waits until\n * an Observer subscribes to it, and then it generates an Observable,\n * typically with an Observable factory function. It does this afresh for each\n * subscriber, so although each subscriber may think it is subscribing to the\n * same Observable, in fact each subscriber gets its own individual\n * Observable.\n *\n * @example <caption>Subscribe to either an Observable of clicks or an Observable of interval, at random</caption>\n * var clicksOrInterval = Rx.Observable.defer(function () {\n *   if (Math.random() > 0.5) {\n *     return Rx.Observable.fromEvent(document, 'click');\n *   } else {\n *     return Rx.Observable.interval(1000);\n *   }\n * });\n * clicksOrInterval.subscribe(x => console.log(x));\n *\n * // Results in the following behavior:\n * // If the result of Math.random() is greater than 0.5 it will listen\n * // for clicks anywhere on the \"document\"; when document is clicked it\n * // will log a MouseEvent object to the console. If the result is less\n * // than 0.5 it will emit ascending numbers, one every second(1000ms).\n *\n * @see {@link create}\n *\n * @param {function(): SubscribableOrPromise} observableFactory The Observable\n * factory function to invoke for each Observer that subscribes to the output\n * Observable. May also return a Promise, which will be converted on the fly\n * to an Observable.\n * @return {Observable} An Observable whose Observers' subscriptions trigger\n * an invocation of the given Observable factory function.\n * @static true\n * @name defer\n * @owner Observable\n */\n\nvar __extends$30 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __read$4 = (undefined && undefined.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spread$4 = (undefined && undefined.__spread) || function () {\n    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read$4(arguments[i]));\n    return ar;\n};\n/* tslint:enable:max-line-length */\n/**\n * Joins last values emitted by passed Observables.\n *\n * <span class=\"informal\">Wait for Observables to complete and then combine last values they emitted.</span>\n *\n * <img src=\"./img/forkJoin.png\" width=\"100%\">\n *\n * `forkJoin` is an operator that takes any number of Observables which can be passed either as an array\n * or directly as arguments. If no input Observables are provided, resulting stream will complete\n * immediately.\n *\n * `forkJoin` will wait for all passed Observables to complete and then it will emit an array with last\n * values from corresponding Observables. So if you pass `n` Observables to the operator, resulting\n * array will have `n` values, where first value is the last thing emitted by the first Observable,\n * second value is the last thing emitted by the second Observable and so on. That means `forkJoin` will\n * not emit more than once and it will complete after that. If you need to emit combined values not only\n * at the end of lifecycle of passed Observables, but also throughout it, try out {@link combineLatest}\n * or {@link zip} instead.\n *\n * In order for resulting array to have the same length as the number of input Observables, whenever any of\n * that Observables completes without emitting any value, `forkJoin` will complete at that moment as well\n * and it will not emit anything either, even if it already has some last values from other Observables.\n * Conversely, if there is an Observable that never completes, `forkJoin` will never complete as well,\n * unless at any point some other Observable completes without emitting value, which brings us back to\n * the previous case. Overall, in order for `forkJoin` to emit a value, all Observables passed as arguments\n * have to emit something at least once and complete.\n *\n * If any input Observable errors at some point, `forkJoin` will error as well and all other Observables\n * will be immediately unsubscribed.\n *\n * Optionally `forkJoin` accepts project function, that will be called with values which normally\n * would land in emitted array. Whatever is returned by project function, will appear in output\n * Observable instead. This means that default project can be thought of as a function that takes\n * all its arguments and puts them into an array. Note that project function will be called only\n * when output Observable is supposed to emit a result.\n *\n * @example <caption>Use forkJoin with operator emitting immediately</caption>\n * import { forkJoin, of } from 'rxjs';\n *\n * const observable = forkJoin(\n *   of(1, 2, 3, 4),\n *   of(5, 6, 7, 8)\n * );\n * observable.subscribe(\n *   value => console.log(value),\n *   err => {},\n *   () => console.log('This is how it ends!')\n * );\n *\n * // Logs:\n * // [4, 8]\n * // \"This is how it ends!\"\n *\n *\n * @example <caption>Use forkJoin with operator emitting after some time</caption>\n * import { forkJoin, interval } from 'rxjs';\n * import { take } from 'rxjs/operators';\n *\n * const observable = forkJoin(\n *   interval(1000).pipe(take(3)), // emit 0, 1, 2 every second and complete\n *   interval(500).pipe(take(4)) // emit 0, 1, 2, 3 every half a second and complete\n * );\n * observable.subscribe(\n *   value => console.log(value),\n *   err => {},\n *   () => console.log('This is how it ends!')\n * );\n *\n * // Logs:\n * // [2, 3] after 3 seconds\n * // \"This is how it ends!\" immediately after\n *\n *\n * @example <caption>Use forkJoin with project function</caption>\n * import { jorkJoin, interval } from 'rxjs';\n * import { take } from 'rxjs/operators';\n *\n * const observable = forkJoin(\n *   interval(1000).pipe(take(3)), // emit 0, 1, 2 every second and complete\n *   interval(500).pipe(take(4)), // emit 0, 1, 2, 3 every half a second and complete\n *   (n, m) => n + m\n * );\n * observable.subscribe(\n *   value => console.log(value),\n *   err => {},\n *   () => console.log('This is how it ends!')\n * );\n *\n * // Logs:\n * // 5 after 3 seconds\n * // \"This is how it ends!\" immediately after\n *\n * @see {@link combineLatest}\n * @see {@link zip}\n *\n * @param {...ObservableInput} sources Any number of Observables provided either as an array or as an arguments\n * passed directly to the operator.\n * @param {function} [project] Function that takes values emitted by input Observables and returns value\n * that will appear in resulting Observable instead of default array.\n * @return {Observable} Observable emitting either an array of last values emitted by passed Observables\n * or value from project function.\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar ForkJoinSubscriber = /** @class */ (function (_super) {\n    __extends$30(ForkJoinSubscriber, _super);\n    function ForkJoinSubscriber(destination, sources) {\n        var _this = _super.call(this, destination) || this;\n        _this.sources = sources;\n        _this.completed = 0;\n        _this.haveValues = 0;\n        var len = sources.length;\n        _this.values = new Array(len);\n        for (var i = 0; i < len; i++) {\n            var source = sources[i];\n            var innerSubscription = subscribeToResult(_this, source, null, i);\n            if (innerSubscription) {\n                _this.add(innerSubscription);\n            }\n        }\n        return _this;\n    }\n    ForkJoinSubscriber.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n        this.values[outerIndex] = innerValue;\n        if (!innerSub._hasValue) {\n            innerSub._hasValue = true;\n            this.haveValues++;\n        }\n    };\n    ForkJoinSubscriber.prototype.notifyComplete = function (innerSub) {\n        var _a = this, destination = _a.destination, haveValues = _a.haveValues, values = _a.values;\n        var len = values.length;\n        if (!innerSub._hasValue) {\n            destination.complete();\n            return;\n        }\n        this.completed++;\n        if (this.completed !== len) {\n            return;\n        }\n        if (haveValues === len) {\n            destination.next(values);\n        }\n        destination.complete();\n    };\n    return ForkJoinSubscriber;\n}(OuterSubscriber));\n\nvar __read$5 = (undefined && undefined.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spread$5 = (undefined && undefined.__spread) || function () {\n    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read$5(arguments[i]));\n    return ar;\n};\n/* tslint:enable:max-line-length */\n/**\n * Creates an Observable that emits events of a specific type coming from the\n * given event target.\n *\n * <span class=\"informal\">Creates an Observable from DOM events, or Node.js\n * EventEmitter events or others.</span>\n *\n * <img src=\"./img/fromEvent.png\" width=\"100%\">\n *\n * `fromEvent` accepts as a first argument event target, which is an object with methods\n * for registering event handler functions. As a second argument it takes string that indicates\n * type of event we want to listen for. `fromEvent` supports selected types of event targets,\n * which are described in detail below. If your event target does not match any of the ones listed,\n * you should use {@link fromEventPattern}, which can be used on arbitrary APIs.\n * When it comes to APIs supported by `fromEvent`, their methods for adding and removing event\n * handler functions have different names, but they all accept a string describing event type\n * and function itself, which will be called whenever said event happens.\n *\n * Every time resulting Observable is subscribed, event handler function will be registered\n * to event target on given event type. When that event fires, value\n * passed as a first argument to registered function will be emitted by output Observable.\n * When Observable is unsubscribed, function will be unregistered from event target.\n *\n * Note that if event target calls registered function with more than one argument, second\n * and following arguments will not appear in resulting stream. In order to get access to them,\n * you can pass to `fromEvent` optional project function, which will be called with all arguments\n * passed to event handler. Output Observable will then emit value returned by project function,\n * instead of the usual value.\n *\n * Remember that event targets listed below are checked via duck typing. It means that\n * no matter what kind of object you have and no matter what environment you work in,\n * you can safely use `fromEvent` on that object if it exposes described methods (provided\n * of course they behave as was described above). So for example if Node.js library exposes\n * event target which has the same method names as DOM EventTarget, `fromEvent` is still\n * a good choice.\n *\n * If the API you use is more callback then event handler oriented (subscribed\n * callback function fires only once and thus there is no need to manually\n * unregister it), you should use {@link bindCallback} or {@link bindNodeCallback}\n * instead.\n *\n * `fromEvent` supports following types of event targets:\n *\n * **DOM EventTarget**\n *\n * This is an object with `addEventListener` and `removeEventListener` methods.\n *\n * In the browser, `addEventListener` accepts - apart from event type string and event\n * handler function arguments - optional third parameter, which is either an object or boolean,\n * both used for additional configuration how and when passed function will be called. When\n * `fromEvent` is used with event target of that type, you can provide this values\n * as third parameter as well.\n *\n * **Node.js EventEmitter**\n *\n * An object with `addListener` and `removeListener` methods.\n *\n * **JQuery-style event target**\n *\n * An object with `on` and `off` methods\n *\n * **DOM NodeList**\n *\n * List of DOM Nodes, returned for example by `document.querySelectorAll` or `Node.childNodes`.\n *\n * Although this collection is not event target in itself, `fromEvent` will iterate over all Nodes\n * it contains and install event handler function in every of them. When returned Observable\n * is unsubscribed, function will be removed from all Nodes.\n *\n * **DOM HtmlCollection**\n *\n * Just as in case of NodeList it is a collection of DOM nodes. Here as well event handler function is\n * installed and removed in each of elements.\n *\n *\n * @example <caption>Emits clicks happening on the DOM document</caption>\n * var clicks = fromEvent(document, 'click');\n * clicks.subscribe(x => console.log(x));\n *\n * // Results in:\n * // MouseEvent object logged to console every time a click\n * // occurs on the document.\n *\n *\n * @example <caption>Use addEventListener with capture option</caption>\n * var clicksInDocument = fromEvent(document, 'click', true); // note optional configuration parameter\n *                                                                          // which will be passed to addEventListener\n * var clicksInDiv = fromEvent(someDivInDocument, 'click');\n *\n * clicksInDocument.subscribe(() => console.log('document'));\n * clicksInDiv.subscribe(() => console.log('div'));\n *\n * // By default events bubble UP in DOM tree, so normally\n * // when we would click on div in document\n * // \"div\" would be logged first and then \"document\".\n * // Since we specified optional `capture` option, document\n * // will catch event when it goes DOWN DOM tree, so console\n * // will log \"document\" and then \"div\".\n *\n * @see {@link bindCallback}\n * @see {@link bindNodeCallback}\n * @see {@link fromEventPattern}\n *\n * @param {EventTargetLike} target The DOM EventTarget, Node.js\n * EventEmitter, JQuery-like event target, NodeList or HTMLCollection to attach the event handler to.\n * @param {string} eventName The event name of interest, being emitted by the\n * `target`.\n * @param {EventListenerOptions} [options] Options to pass through to addEventListener\n * @return {Observable<T>}\n * @name fromEvent\n */\n\nvar __read$6 = (undefined && undefined.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spread$6 = (undefined && undefined.__spread) || function () {\n    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read$6(arguments[i]));\n    return ar;\n};\n/* tslint:enable:max-line-length */\n/**\n * Creates an Observable from an API based on addHandler/removeHandler\n * functions.\n *\n * <span class=\"informal\">Converts any addHandler/removeHandler API to an\n * Observable.</span>\n *\n * <img src=\"./img/fromEventPattern.png\" width=\"100%\">\n *\n * Creates an Observable by using the `addHandler` and `removeHandler`\n * functions to add and remove the handlers. The `addHandler` is\n * called when the output Observable is subscribed, and `removeHandler` is\n * called when the Subscription is unsubscribed.\n *\n * @example <caption>Emits clicks happening on the DOM document</caption>\n * function addClickHandler(handler) {\n *   document.addEventListener('click', handler);\n * }\n *\n * function removeClickHandler(handler) {\n *   document.removeEventListener('click', handler);\n * }\n *\n * var clicks = fromEventPattern(\n *   addClickHandler,\n *   removeClickHandler\n * );\n * clicks.subscribe(x => console.log(x));\n *\n * @see {@link from}\n * @see {@link fromEvent}\n *\n * @param {function(handler: Function): any} addHandler A function that takes\n * a `handler` function as argument and attaches it somehow to the actual\n * source of events.\n * @param {function(handler: Function, signal?: any): void} [removeHandler] An optional function that\n * takes a `handler` function as argument and removes it in case it was\n * previously attached using `addHandler`. if addHandler returns signal to teardown when remove,\n * removeHandler function will forward it.\n * @return {Observable<T>}\n * @name fromEventPattern\n */\n\n/**\n * Decides at subscription time which Observable will actually be subscribed.\n *\n * <span class=\"informal\">`If` statement for Observables.</span>\n *\n * `if` accepts a condition function and two Observables. When\n * an Observable returned by the operator is subscribed, condition function will be called.\n * Based on what boolean it returns at that moment, consumer will subscribe either to\n * the first Observable (if condition was true) or to the second (if condition was false). Condition\n * function may also not return anything - in that case condition will be evaluated as false and\n * second Observable will be subscribed.\n *\n * Note that Observables for both cases (true and false) are optional. If condition points to an Observable that\n * was left undefined, resulting stream will simply complete immediately. That allows you to, rather\n * then controlling which Observable will be subscribed, decide at runtime if consumer should have access\n * to given Observable or not.\n *\n * If you have more complex logic that requires decision between more than two Observables, {@link defer}\n * will probably be a better choice. Actually `if` can be easily implemented with {@link defer}\n * and exists only for convenience and readability reasons.\n *\n *\n * @example <caption>Change at runtime which Observable will be subscribed</caption>\n * let subscribeToFirst;\n * const firstOrSecond = Rx.Observable.if(\n *   () => subscribeToFirst,\n *   Rx.Observable.of('first'),\n *   Rx.Observable.of('second')\n * );\n *\n * subscribeToFirst = true;\n * firstOrSecond.subscribe(value => console.log(value));\n *\n * // Logs:\n * // \"first\"\n *\n * subscribeToFirst = false;\n * firstOrSecond.subscribe(value => console.log(value));\n *\n * // Logs:\n * // \"second\"\n *\n *\n * @example <caption>Control an access to an Observable</caption>\n * let accessGranted;\n * const observableIfYouHaveAccess = Rx.Observable.if(\n *   () => accessGranted,\n *   Rx.Observable.of('It seems you have an access...') // Note that only one Observable is passed to the operator.\n * );\n *\n * accessGranted = true;\n * observableIfYouHaveAccess.subscribe(\n *   value => console.log(value),\n *   err => {},\n *   () => console.log('The end')\n * );\n *\n * // Logs:\n * // \"It seems you have an access...\"\n * // \"The end\"\n *\n * accessGranted = false;\n * observableIfYouHaveAccess.subscribe(\n *   value => console.log(value),\n *   err => {},\n *   () => console.log('The end')\n * );\n *\n * // Logs:\n * // \"The end\"\n *\n * @see {@link defer}\n *\n * @param {function(): boolean} condition Condition which Observable should be chosen.\n * @param {Observable} [trueObservable] An Observable that will be subscribed if condition is true.\n * @param {Observable} [falseObservable] An Observable that will be subscribed if condition is false.\n * @return {Observable} Either first or second Observable, depending on condition.\n * @static true\n * @name iif\n * @owner Observable\n */\n\nfunction isNumeric(val) {\n    // parseFloat NaNs numeric-cast false positives (null|true|false|\"\")\n    // ...but misinterprets leading-number strings, particularly hex literals (\"0x...\")\n    // subtraction forces infinities to NaN\n    // adding 1 corrects loss of precision from parseFloat (#15100)\n    return !isArray(val) && (val - parseFloat(val) + 1) >= 0;\n}\n\n/**\n * Creates an Observable that emits sequential numbers every specified\n * interval of time, on a specified IScheduler.\n *\n * <span class=\"informal\">Emits incremental numbers periodically in time.\n * </span>\n *\n * <img src=\"./img/interval.png\" width=\"100%\">\n *\n * `interval` returns an Observable that emits an infinite sequence of\n * ascending integers, with a constant interval of time of your choosing\n * between those emissions. The first emission is not sent immediately, but\n * only after the first period has passed. By default, this operator uses the\n * `async` IScheduler to provide a notion of time, but you may pass any\n * IScheduler to it.\n *\n * @example <caption>Emits ascending numbers, one every second (1000ms)</caption>\n * var numbers = Rx.Observable.interval(1000);\n * numbers.subscribe(x => console.log(x));\n *\n * @see {@link timer}\n * @see {@link delay}\n *\n * @param {number} [period=0] The interval size in milliseconds (by default)\n * or the time unit determined by the scheduler's clock.\n * @param {Scheduler} [scheduler=async] The IScheduler to use for scheduling\n * the emission of values, and providing a notion of \"time\".\n * @return {Observable} An Observable that emits a sequential number each time\n * interval.\n * @static true\n * @name interval\n * @owner Observable\n */\n\n/* tslint:enable:max-line-length */\n/**\n * Creates an output Observable which concurrently emits all values from every\n * given input Observable.\n *\n * <span class=\"informal\">Flattens multiple Observables together by blending\n * their values into one Observable.</span>\n *\n * <img src=\"./img/merge.png\" width=\"100%\">\n *\n * `merge` subscribes to each given input Observable (as arguments), and simply\n * forwards (without doing any transformation) all the values from all the input\n * Observables to the output Observable. The output Observable only completes\n * once all input Observables have completed. Any error delivered by an input\n * Observable will be immediately emitted on the output Observable.\n *\n * @example <caption>Merge together two Observables: 1s interval and clicks</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var timer = Rx.Observable.interval(1000);\n * var clicksOrTimer = Rx.Observable.merge(clicks, timer);\n * clicksOrTimer.subscribe(x => console.log(x));\n *\n * // Results in the following:\n * // timer will emit ascending values, one every second(1000ms) to console\n * // clicks logs MouseEvents to console everytime the \"document\" is clicked\n * // Since the two streams are merged you see these happening\n * // as they occur.\n *\n * @example <caption>Merge together 3 Observables, but only 2 run concurrently</caption>\n * var timer1 = Rx.Observable.interval(1000).take(10);\n * var timer2 = Rx.Observable.interval(2000).take(6);\n * var timer3 = Rx.Observable.interval(500).take(10);\n * var concurrent = 2; // the argument\n * var merged = Rx.Observable.merge(timer1, timer2, timer3, concurrent);\n * merged.subscribe(x => console.log(x));\n *\n * // Results in the following:\n * // - First timer1 and timer2 will run concurrently\n * // - timer1 will emit a value every 1000ms for 10 iterations\n * // - timer2 will emit a value every 2000ms for 6 iterations\n * // - after timer1 hits it's max iteration, timer2 will\n * //   continue, and timer3 will start to run concurrently with timer2\n * // - when timer2 hits it's max iteration it terminates, and\n * //   timer3 will continue to emit a value every 500ms until it is complete\n *\n * @see {@link mergeAll}\n * @see {@link mergeMap}\n * @see {@link mergeMapTo}\n * @see {@link mergeScan}\n *\n * @param {...ObservableInput} observables Input Observables to merge together.\n * @param {number} [concurrent=Number.POSITIVE_INFINITY] Maximum number of input\n * Observables being subscribed to concurrently.\n * @param {Scheduler} [scheduler=null] The IScheduler to use for managing\n * concurrency of input Observables.\n * @return {Observable} an Observable that emits items that are the result of\n * every input Observable.\n * @static true\n * @name merge\n * @owner Observable\n */\nfunction merge() {\n    var observables = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        observables[_i] = arguments[_i];\n    }\n    var concurrent = Number.POSITIVE_INFINITY;\n    var scheduler = null;\n    var last = observables[observables.length - 1];\n    if (isScheduler(last)) {\n        scheduler = observables.pop();\n        if (observables.length > 1 && typeof observables[observables.length - 1] === 'number') {\n            concurrent = observables.pop();\n        }\n    }\n    else if (typeof last === 'number') {\n        concurrent = observables.pop();\n    }\n    if (scheduler === null && observables.length === 1 && observables[0] instanceof Observable) {\n        return observables[0];\n    }\n    return mergeAll(concurrent)(fromArray(observables, scheduler));\n}\n\n/**\n * An Observable that emits no items to the Observer and never completes.\n *\n * <img src=\"./img/never.png\" width=\"100%\">\n *\n * A simple Observable that emits neither values nor errors nor the completion\n * notification. It can be used for testing purposes or for composing with other\n * Observables. Please note that by never emitting a complete notification, this\n * Observable keeps the subscription from being disposed automatically.\n * Subscriptions need to be manually disposed.\n *\n * @example <caption>Emit the number 7, then never emit anything else (not even complete).</caption>\n * function info() {\n *   console.log('Will not be called');\n * }\n * var result = NEVER.startWith(7);\n * result.subscribe(x => console.log(x), info, info);\n *\n * @see {@link create}\n * @see {@link EMPTY}\n * @see {@link of}\n * @see {@link throwError}\n */\n\n/**\n * @deprecated Deprecated in favor of using NEVER constant.\n */\n\nvar __read$7 = (undefined && undefined.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spread$7 = (undefined && undefined.__spread) || function () {\n    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read$7(arguments[i]));\n    return ar;\n};\n/* tslint:enable:max-line-length */\n/**\n * When any of the provided Observable emits an complete or error notification, it immediately subscribes to the next one\n * that was passed.\n *\n * <span class=\"informal\">Execute series of Observables no matter what, even if it means swallowing errors.</span>\n *\n * <img src=\"./img/onErrorResumeNext.png\" width=\"100%\">\n *\n * `onErrorResumeNext` Will subscribe to each observable source it is provided, in order.\n * If the source it's subscribed to emits an error or completes, it will move to the next source\n * without error.\n *\n * If `onErrorResumeNext` is provided no arguments, or a single, empty array, it will return {@link EMPTY}.\n *\n * `onErrorResumeNext` is basically {@link concat}, only it will continue, even if one of its\n * sources emits an error.\n *\n * Note that there is no way to handle any errors thrown by sources via the resuult of\n * `onErrorResumeNext`. If you want to handle errors thrown in any given source, you can\n * always use the {@link catchError} operator on them before passing them into `onErrorResumeNext`.\n *\n * @example <caption>Subscribe to the next Observable after map fails</caption>\n * import { onErrorResumeNext, of } from 'rxjs/create';\n * import { map } from 'rxjs/operators';\n *\n * onErrorResumeNext(\n *  of(1, 2, 3, 0).pipe(\n *    map(x => {\n *      if (x === 0) throw Error();\n *      return 10 / x;\n *    })\n *  ),\n *  of(1, 2, 3),\n * )\n * .subscribe(\n *   val => console.log(val),\n *   err => console.log(err),          // Will never be called.\n *   () => console.log('done')\n * );\n *\n * // Logs:\n * // 10\n * // 5\n * // 3.3333333333333335\n * // 1\n * // 2\n * // 3\n * // \"done\"\n *\n * @see {@link concat}\n * @see {@link catch}\n *\n * @param {...ObservableInput} sources Observables (or anything that *is* observable) passed either directly or as an array.\n * @return {Observable} An Observable that concatenates all sources, one after the other,\n * ignoring all errors, such that any error causes it to move on to the next source.\n */\n\n/**\n * Convert an object into an observable sequence of [key, value] pairs\n * using an optional IScheduler to enumerate the object.\n *\n * @example <caption>Converts a javascript object to an Observable</caption>\n * var obj = {\n *   foo: 42,\n *   bar: 56,\n *   baz: 78\n * };\n *\n * var source = Rx.Observable.pairs(obj);\n *\n * var subscription = source.subscribe(\n *   function (x) {\n *     console.log('Next: %s', x);\n *   },\n *   function (err) {\n *     console.log('Error: %s', err);\n *   },\n *   function () {\n *     console.log('Completed');\n *   });\n *\n * @param {Object} obj The object to inspect and turn into an\n * Observable sequence.\n * @param {Scheduler} [scheduler] An optional IScheduler to run the\n * enumeration of the input sequence on.\n * @returns {(Observable<[string, T]>)} An observable sequence of\n * [key, value] pairs from the object.\n */\n\n/** @internal */\n\nvar __extends$31 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar RaceSubscriber = /** @class */ (function (_super) {\n    __extends$31(RaceSubscriber, _super);\n    function RaceSubscriber(destination) {\n        var _this = _super.call(this, destination) || this;\n        _this.hasFirst = false;\n        _this.observables = [];\n        _this.subscriptions = [];\n        return _this;\n    }\n    RaceSubscriber.prototype._next = function (observable) {\n        this.observables.push(observable);\n    };\n    RaceSubscriber.prototype._complete = function () {\n        var observables = this.observables;\n        var len = observables.length;\n        if (len === 0) {\n            this.destination.complete();\n        }\n        else {\n            for (var i = 0; i < len && !this.hasFirst; i++) {\n                var observable = observables[i];\n                var subscription = subscribeToResult(this, observable, observable, i);\n                if (this.subscriptions) {\n                    this.subscriptions.push(subscription);\n                }\n                this.add(subscription);\n            }\n            this.observables = null;\n        }\n    };\n    RaceSubscriber.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n        if (!this.hasFirst) {\n            this.hasFirst = true;\n            for (var i = 0; i < this.subscriptions.length; i++) {\n                if (i !== outerIndex) {\n                    var subscription = this.subscriptions[i];\n                    subscription.unsubscribe();\n                    this.remove(subscription);\n                }\n            }\n            this.subscriptions = null;\n        }\n        this.destination.next(innerValue);\n    };\n    return RaceSubscriber;\n}(OuterSubscriber));\n\n/**\n * Creates an Observable that emits a sequence of numbers within a specified\n * range.\n *\n * <span class=\"informal\">Emits a sequence of numbers in a range.</span>\n *\n * <img src=\"./img/range.png\" width=\"100%\">\n *\n * `range` operator emits a range of sequential integers, in order, where you\n * select the `start` of the range and its `length`. By default, uses no\n * IScheduler and just delivers the notifications synchronously, but may use\n * an optional IScheduler to regulate those deliveries.\n *\n * @example <caption>Emits the numbers 1 to 10</caption>\n * var numbers = Rx.Observable.range(1, 10);\n * numbers.subscribe(x => console.log(x));\n *\n * @see {@link timer}\n * @see {@link interval}\n *\n * @param {number} [start=0] The value of the first integer in the sequence.\n * @param {number} [count=0] The number of sequential integers to generate.\n * @param {Scheduler} [scheduler] A {@link IScheduler} to use for scheduling\n * the emissions of the notifications.\n * @return {Observable} An Observable of numbers that emits a finite range of\n * sequential integers.\n * @static true\n * @name range\n * @owner Observable\n */\n\n/** @internal */\n\n/**\n * Creates an Observable that starts emitting after an `initialDelay` and\n * emits ever increasing numbers after each `period` of time thereafter.\n *\n * <span class=\"informal\">Its like {@link interval}, but you can specify when\n * should the emissions start.</span>\n *\n * <img src=\"./img/timer.png\" width=\"100%\">\n *\n * `timer` returns an Observable that emits an infinite sequence of ascending\n * integers, with a constant interval of time, `period` of your choosing\n * between those emissions. The first emission happens after the specified\n * `initialDelay`. The initial delay may be a {@link Date}. By default, this\n * operator uses the `async` IScheduler to provide a notion of time, but you\n * may pass any IScheduler to it. If `period` is not specified, the output\n * Observable emits only one value, `0`. Otherwise, it emits an infinite\n * sequence.\n *\n * @example <caption>Emits ascending numbers, one every second (1000ms), starting after 3 seconds</caption>\n * var numbers = Rx.Observable.timer(3000, 1000);\n * numbers.subscribe(x => console.log(x));\n *\n * @example <caption>Emits one number after five seconds</caption>\n * var numbers = Rx.Observable.timer(5000);\n * numbers.subscribe(x => console.log(x));\n *\n * @see {@link interval}\n * @see {@link delay}\n *\n * @param {number|Date} [dueTime] The initial delay time to wait before\n * emitting the first value of `0`.\n * @param {number|SchedulerLike} [periodOrScheduler] The period of time between emissions of the\n * subsequent numbers.\n * @param {SchedulerLike} [scheduler=async] The IScheduler to use for scheduling\n * the emission of values, and providing a notion of \"time\".\n * @return {Observable} An Observable that emits a `0` after the\n * `initialDelay` and ever increasing numbers after each `period` of time\n * thereafter.\n * @static true\n * @name timer\n * @owner Observable\n */\n\n/**\n * Creates an Observable that uses a resource which will be disposed at the same time as the Observable.\n *\n * <span class=\"informal\">Use it when you catch yourself cleaning up after an Observable.</span>\n *\n * `using` is a factory operator, which accepts two functions. First function returns a disposable resource.\n * It can be an arbitrary object that implements `unsubscribe` method. Second function will be injected with\n * that object and should return an Observable. That Observable can use resource object during its execution.\n * Both functions passed to `using` will be called every time someone subscribes - neither an Observable nor\n * resource object will be shared in any way between subscriptions.\n *\n * When Observable returned by `using` is subscribed, Observable returned from the second function will be subscribed\n * as well. All its notifications (nexted values, completion and error events) will be emitted unchanged by the output\n * Observable. If however someone unsubscribes from the Observable or source Observable completes or errors by itself,\n * the `unsubscribe` method on resource object will be called. This can be used to do any necessary clean up, which\n * otherwise would have to be handled by hand. Note that complete or error notifications are not emitted when someone\n * cancels subscription to an Observable via `unsubscribe`, so `using` can be used as a hook, allowing you to make\n * sure that all resources which need to exist during an Observable execution will be disposed at appropriate time.\n *\n * @see {@link defer}\n *\n * @param {function(): ISubscription} resourceFactory A function which creates any resource object\n * that implements `unsubscribe` method.\n * @param {function(resource: ISubscription): Observable<T>} observableFactory A function which\n * creates an Observable, that can use injected resource object.\n * @return {Observable<T>} An Observable that behaves the same as Observable returned by `observableFactory`, but\n * which - when completed, errored or unsubscribed - will also call `unsubscribe` on created resource object.\n */\n\nvar __extends$32 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/* tslint:enable:max-line-length */\n/**\n * Combines multiple Observables to create an Observable whose values are calculated from the values, in order, of each\n * of its input Observables.\n *\n * If the latest parameter is a function, this function is used to compute the created value from the input values.\n * Otherwise, an array of the input values is returned.\n *\n * @example <caption>Combine age and name from different sources</caption>\n *\n * let age$ = Observable.of<number>(27, 25, 29);\n * let name$ = Observable.of<string>('Foo', 'Bar', 'Beer');\n * let isDev$ = Observable.of<boolean>(true, true, false);\n *\n * Observable\n *     .zip(age$,\n *          name$,\n *          isDev$,\n *          (age: number, name: string, isDev: boolean) => ({ age, name, isDev }))\n *     .subscribe(x => console.log(x));\n *\n * // outputs\n * // { age: 27, name: 'Foo', isDev: true }\n * // { age: 25, name: 'Bar', isDev: true }\n * // { age: 29, name: 'Beer', isDev: false }\n *\n * @param observables\n * @return {Observable<R>}\n * @static true\n * @name zip\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar ZipSubscriber = /** @class */ (function (_super) {\n    __extends$32(ZipSubscriber, _super);\n    function ZipSubscriber(destination, resultSelector, values) {\n        if (values === void 0) { values = Object.create(null); }\n        var _this = _super.call(this, destination) || this;\n        _this.iterators = [];\n        _this.active = 0;\n        _this.resultSelector = (typeof resultSelector === 'function') ? resultSelector : null;\n        _this.values = values;\n        return _this;\n    }\n    ZipSubscriber.prototype._next = function (value) {\n        var iterators = this.iterators;\n        if (isArray(value)) {\n            iterators.push(new StaticArrayIterator(value));\n        }\n        else if (typeof value[iterator] === 'function') {\n            iterators.push(new StaticIterator(value[iterator]()));\n        }\n        else {\n            iterators.push(new ZipBufferIterator(this.destination, this, value));\n        }\n    };\n    ZipSubscriber.prototype._complete = function () {\n        var iterators = this.iterators;\n        var len = iterators.length;\n        if (len === 0) {\n            this.destination.complete();\n            return;\n        }\n        this.active = len;\n        for (var i = 0; i < len; i++) {\n            var iterator$$1 = iterators[i];\n            if (iterator$$1.stillUnsubscribed) {\n                this.add(iterator$$1.subscribe(iterator$$1, i));\n            }\n            else {\n                this.active--; // not an observable\n            }\n        }\n    };\n    ZipSubscriber.prototype.notifyInactive = function () {\n        this.active--;\n        if (this.active === 0) {\n            this.destination.complete();\n        }\n    };\n    ZipSubscriber.prototype.checkIterators = function () {\n        var iterators = this.iterators;\n        var len = iterators.length;\n        var destination = this.destination;\n        // abort if not all of them have values\n        for (var i = 0; i < len; i++) {\n            var iterator$$1 = iterators[i];\n            if (typeof iterator$$1.hasValue === 'function' && !iterator$$1.hasValue()) {\n                return;\n            }\n        }\n        var shouldComplete = false;\n        var args = [];\n        for (var i = 0; i < len; i++) {\n            var iterator$$1 = iterators[i];\n            var result = iterator$$1.next();\n            // check to see if it's completed now that you've gotten\n            // the next value.\n            if (iterator$$1.hasCompleted()) {\n                shouldComplete = true;\n            }\n            if (result.done) {\n                destination.complete();\n                return;\n            }\n            args.push(result.value);\n        }\n        if (this.resultSelector) {\n            this._tryresultSelector(args);\n        }\n        else {\n            destination.next(args);\n        }\n        if (shouldComplete) {\n            destination.complete();\n        }\n    };\n    ZipSubscriber.prototype._tryresultSelector = function (args) {\n        var result;\n        try {\n            result = this.resultSelector.apply(this, args);\n        }\n        catch (err) {\n            this.destination.error(err);\n            return;\n        }\n        this.destination.next(result);\n    };\n    return ZipSubscriber;\n}(Subscriber));\nvar StaticIterator = /** @class */ (function () {\n    function StaticIterator(iterator$$1) {\n        this.iterator = iterator$$1;\n        this.nextResult = iterator$$1.next();\n    }\n    StaticIterator.prototype.hasValue = function () {\n        return true;\n    };\n    StaticIterator.prototype.next = function () {\n        var result = this.nextResult;\n        this.nextResult = this.iterator.next();\n        return result;\n    };\n    StaticIterator.prototype.hasCompleted = function () {\n        var nextResult = this.nextResult;\n        return nextResult && nextResult.done;\n    };\n    return StaticIterator;\n}());\nvar StaticArrayIterator = /** @class */ (function () {\n    function StaticArrayIterator(array) {\n        this.array = array;\n        this.index = 0;\n        this.length = 0;\n        this.length = array.length;\n    }\n    StaticArrayIterator.prototype[iterator] = function () {\n        return this;\n    };\n    StaticArrayIterator.prototype.next = function (value) {\n        var i = this.index++;\n        var array = this.array;\n        return i < this.length ? { value: array[i], done: false } : { value: null, done: true };\n    };\n    StaticArrayIterator.prototype.hasValue = function () {\n        return this.array.length > this.index;\n    };\n    StaticArrayIterator.prototype.hasCompleted = function () {\n        return this.array.length === this.index;\n    };\n    return StaticArrayIterator;\n}());\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar ZipBufferIterator = /** @class */ (function (_super) {\n    __extends$32(ZipBufferIterator, _super);\n    function ZipBufferIterator(destination, parent, observable) {\n        var _this = _super.call(this, destination) || this;\n        _this.parent = parent;\n        _this.observable = observable;\n        _this.stillUnsubscribed = true;\n        _this.buffer = [];\n        _this.isComplete = false;\n        return _this;\n    }\n    ZipBufferIterator.prototype[iterator] = function () {\n        return this;\n    };\n    // NOTE: there is actually a name collision here with Subscriber.next and Iterator.next\n    //    this is legit because `next()` will never be called by a subscription in this case.\n    ZipBufferIterator.prototype.next = function () {\n        var buffer = this.buffer;\n        if (buffer.length === 0 && this.isComplete) {\n            return { value: null, done: true };\n        }\n        else {\n            return { value: buffer.shift(), done: false };\n        }\n    };\n    ZipBufferIterator.prototype.hasValue = function () {\n        return this.buffer.length > 0;\n    };\n    ZipBufferIterator.prototype.hasCompleted = function () {\n        return this.buffer.length === 0 && this.isComplete;\n    };\n    ZipBufferIterator.prototype.notifyComplete = function () {\n        if (this.buffer.length > 0) {\n            this.isComplete = true;\n            this.parent.notifyInactive();\n        }\n        else {\n            this.destination.complete();\n        }\n    };\n    ZipBufferIterator.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n        this.buffer.push(innerValue);\n        this.parent.checkIterators();\n    };\n    ZipBufferIterator.prototype.subscribe = function (value, index) {\n        return subscribeToResult(this, this.observable, this, index);\n    };\n    return ZipBufferIterator;\n}(OuterSubscriber));\n\n/* Observable */\n\nvar __extends$33 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Ignores source values for a duration determined by another Observable, then\n * emits the most recent value from the source Observable, then repeats this\n * process.\n *\n * <span class=\"informal\">It's like {@link auditTime}, but the silencing\n * duration is determined by a second Observable.</span>\n *\n * <img src=\"./img/audit.png\" width=\"100%\">\n *\n * `audit` is similar to `throttle`, but emits the last value from the silenced\n * time window, instead of the first value. `audit` emits the most recent value\n * from the source Observable on the output Observable as soon as its internal\n * timer becomes disabled, and ignores source values while the timer is enabled.\n * Initially, the timer is disabled. As soon as the first source value arrives,\n * the timer is enabled by calling the `durationSelector` function with the\n * source value, which returns the \"duration\" Observable. When the duration\n * Observable emits a value or completes, the timer is disabled, then the most\n * recent source value is emitted on the output Observable, and this process\n * repeats for the next source value.\n *\n * @example <caption>Emit clicks at a rate of at most one click per second</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var result = clicks.audit(ev => Rx.Observable.interval(1000));\n * result.subscribe(x => console.log(x));\n *\n * @see {@link auditTime}\n * @see {@link debounce}\n * @see {@link delayWhen}\n * @see {@link sample}\n * @see {@link throttle}\n *\n * @param {function(value: T): SubscribableOrPromise} durationSelector A function\n * that receives a value from the source Observable, for computing the silencing\n * duration, returned as an Observable or a Promise.\n * @return {Observable<T>} An Observable that performs rate-limiting of\n * emissions from the source Observable.\n * @method audit\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar AuditSubscriber = /** @class */ (function (_super) {\n    __extends$33(AuditSubscriber, _super);\n    function AuditSubscriber(destination, durationSelector) {\n        var _this = _super.call(this, destination) || this;\n        _this.durationSelector = durationSelector;\n        _this.hasValue = false;\n        return _this;\n    }\n    AuditSubscriber.prototype._next = function (value) {\n        this.value = value;\n        this.hasValue = true;\n        if (!this.throttled) {\n            var duration = tryCatch(this.durationSelector)(value);\n            if (duration === errorObject) {\n                this.destination.error(errorObject.e);\n            }\n            else {\n                var innerSubscription = subscribeToResult(this, duration);\n                if (innerSubscription.closed) {\n                    this.clearThrottle();\n                }\n                else {\n                    this.add(this.throttled = innerSubscription);\n                }\n            }\n        }\n    };\n    AuditSubscriber.prototype.clearThrottle = function () {\n        var _a = this, value = _a.value, hasValue = _a.hasValue, throttled = _a.throttled;\n        if (throttled) {\n            this.remove(throttled);\n            this.throttled = null;\n            throttled.unsubscribe();\n        }\n        if (hasValue) {\n            this.value = null;\n            this.hasValue = false;\n            this.destination.next(value);\n        }\n    };\n    AuditSubscriber.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex) {\n        this.clearThrottle();\n    };\n    AuditSubscriber.prototype.notifyComplete = function () {\n        this.clearThrottle();\n    };\n    return AuditSubscriber;\n}(OuterSubscriber));\n\n/**\n * Ignores source values for `duration` milliseconds, then emits the most recent\n * value from the source Observable, then repeats this process.\n *\n * <span class=\"informal\">When it sees a source values, it ignores that plus\n * the next ones for `duration` milliseconds, and then it emits the most recent\n * value from the source.</span>\n *\n * <img src=\"./img/auditTime.png\" width=\"100%\">\n *\n * `auditTime` is similar to `throttleTime`, but emits the last value from the\n * silenced time window, instead of the first value. `auditTime` emits the most\n * recent value from the source Observable on the output Observable as soon as\n * its internal timer becomes disabled, and ignores source values while the\n * timer is enabled. Initially, the timer is disabled. As soon as the first\n * source value arrives, the timer is enabled. After `duration` milliseconds (or\n * the time unit determined internally by the optional `scheduler`) has passed,\n * the timer is disabled, then the most recent source value is emitted on the\n * output Observable, and this process repeats for the next source value.\n * Optionally takes a {@link IScheduler} for managing timers.\n *\n * @example <caption>Emit clicks at a rate of at most one click per second</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var result = clicks.auditTime(1000);\n * result.subscribe(x => console.log(x));\n *\n * @see {@link audit}\n * @see {@link debounceTime}\n * @see {@link delay}\n * @see {@link sampleTime}\n * @see {@link throttleTime}\n *\n * @param {number} duration Time to wait before emitting the most recent source\n * value, measured in milliseconds or the time unit determined internally\n * by the optional `scheduler`.\n * @param {Scheduler} [scheduler=async] The {@link IScheduler} to use for\n * managing the timers that handle the rate-limiting behavior.\n * @return {Observable<T>} An Observable that performs rate-limiting of\n * emissions from the source Observable.\n * @method auditTime\n * @owner Observable\n */\n\nvar __extends$34 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Buffers the source Observable values until `closingNotifier` emits.\n *\n * <span class=\"informal\">Collects values from the past as an array, and emits\n * that array only when another Observable emits.</span>\n *\n * <img src=\"./img/buffer.png\" width=\"100%\">\n *\n * Buffers the incoming Observable values until the given `closingNotifier`\n * Observable emits a value, at which point it emits the buffer on the output\n * Observable and starts a new buffer internally, awaiting the next time\n * `closingNotifier` emits.\n *\n * @example <caption>On every click, emit array of most recent interval events</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var interval = Rx.Observable.interval(1000);\n * var buffered = interval.buffer(clicks);\n * buffered.subscribe(x => console.log(x));\n *\n * @see {@link bufferCount}\n * @see {@link bufferTime}\n * @see {@link bufferToggle}\n * @see {@link bufferWhen}\n * @see {@link window}\n *\n * @param {Observable<any>} closingNotifier An Observable that signals the\n * buffer to be emitted on the output Observable.\n * @return {Observable<T[]>} An Observable of buffers, which are arrays of\n * values.\n * @method buffer\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar BufferSubscriber = /** @class */ (function (_super) {\n    __extends$34(BufferSubscriber, _super);\n    function BufferSubscriber(destination, closingNotifier) {\n        var _this = _super.call(this, destination) || this;\n        _this.buffer = [];\n        _this.add(subscribeToResult(_this, closingNotifier));\n        return _this;\n    }\n    BufferSubscriber.prototype._next = function (value) {\n        this.buffer.push(value);\n    };\n    BufferSubscriber.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n        var buffer = this.buffer;\n        this.buffer = [];\n        this.destination.next(buffer);\n    };\n    return BufferSubscriber;\n}(OuterSubscriber));\n\nvar __extends$35 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Buffers the source Observable values until the size hits the maximum\n * `bufferSize` given.\n *\n * <span class=\"informal\">Collects values from the past as an array, and emits\n * that array only when its size reaches `bufferSize`.</span>\n *\n * <img src=\"./img/bufferCount.png\" width=\"100%\">\n *\n * Buffers a number of values from the source Observable by `bufferSize` then\n * emits the buffer and clears it, and starts a new buffer each\n * `startBufferEvery` values. If `startBufferEvery` is not provided or is\n * `null`, then new buffers are started immediately at the start of the source\n * and when each buffer closes and is emitted.\n *\n * @example <caption>Emit the last two click events as an array</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var buffered = clicks.bufferCount(2);\n * buffered.subscribe(x => console.log(x));\n *\n * @example <caption>On every click, emit the last two click events as an array</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var buffered = clicks.bufferCount(2, 1);\n * buffered.subscribe(x => console.log(x));\n *\n * @see {@link buffer}\n * @see {@link bufferTime}\n * @see {@link bufferToggle}\n * @see {@link bufferWhen}\n * @see {@link pairwise}\n * @see {@link windowCount}\n *\n * @param {number} bufferSize The maximum size of the buffer emitted.\n * @param {number} [startBufferEvery] Interval at which to start a new buffer.\n * For example if `startBufferEvery` is `2`, then a new buffer will be started\n * on every other value from the source. A new buffer is started at the\n * beginning of the source by default.\n * @return {Observable<T[]>} An Observable of arrays of buffered values.\n * @method bufferCount\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar BufferCountSubscriber = /** @class */ (function (_super) {\n    __extends$35(BufferCountSubscriber, _super);\n    function BufferCountSubscriber(destination, bufferSize) {\n        var _this = _super.call(this, destination) || this;\n        _this.bufferSize = bufferSize;\n        _this.buffer = [];\n        return _this;\n    }\n    BufferCountSubscriber.prototype._next = function (value) {\n        var buffer = this.buffer;\n        buffer.push(value);\n        if (buffer.length == this.bufferSize) {\n            this.destination.next(buffer);\n            this.buffer = [];\n        }\n    };\n    BufferCountSubscriber.prototype._complete = function () {\n        var buffer = this.buffer;\n        if (buffer.length > 0) {\n            this.destination.next(buffer);\n        }\n        _super.prototype._complete.call(this);\n    };\n    return BufferCountSubscriber;\n}(Subscriber));\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar BufferSkipCountSubscriber = /** @class */ (function (_super) {\n    __extends$35(BufferSkipCountSubscriber, _super);\n    function BufferSkipCountSubscriber(destination, bufferSize, startBufferEvery) {\n        var _this = _super.call(this, destination) || this;\n        _this.bufferSize = bufferSize;\n        _this.startBufferEvery = startBufferEvery;\n        _this.buffers = [];\n        _this.count = 0;\n        return _this;\n    }\n    BufferSkipCountSubscriber.prototype._next = function (value) {\n        var _a = this, bufferSize = _a.bufferSize, startBufferEvery = _a.startBufferEvery, buffers = _a.buffers, count = _a.count;\n        this.count++;\n        if (count % startBufferEvery === 0) {\n            buffers.push([]);\n        }\n        for (var i = buffers.length; i--;) {\n            var buffer = buffers[i];\n            buffer.push(value);\n            if (buffer.length === bufferSize) {\n                buffers.splice(i, 1);\n                this.destination.next(buffer);\n            }\n        }\n    };\n    BufferSkipCountSubscriber.prototype._complete = function () {\n        var _a = this, buffers = _a.buffers, destination = _a.destination;\n        while (buffers.length > 0) {\n            var buffer = buffers.shift();\n            if (buffer.length > 0) {\n                destination.next(buffer);\n            }\n        }\n        _super.prototype._complete.call(this);\n    };\n    return BufferSkipCountSubscriber;\n}(Subscriber));\n\nvar __extends$36 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/* tslint:enable:max-line-length */\n/**\n * Buffers the source Observable values for a specific time period.\n *\n * <span class=\"informal\">Collects values from the past as an array, and emits\n * those arrays periodically in time.</span>\n *\n * <img src=\"./img/bufferTime.png\" width=\"100%\">\n *\n * Buffers values from the source for a specific time duration `bufferTimeSpan`.\n * Unless the optional argument `bufferCreationInterval` is given, it emits and\n * resets the buffer every `bufferTimeSpan` milliseconds. If\n * `bufferCreationInterval` is given, this operator opens the buffer every\n * `bufferCreationInterval` milliseconds and closes (emits and resets) the\n * buffer every `bufferTimeSpan` milliseconds. When the optional argument\n * `maxBufferSize` is specified, the buffer will be closed either after\n * `bufferTimeSpan` milliseconds or when it contains `maxBufferSize` elements.\n *\n * @example <caption>Every second, emit an array of the recent click events</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var buffered = clicks.bufferTime(1000);\n * buffered.subscribe(x => console.log(x));\n *\n * @example <caption>Every 5 seconds, emit the click events from the next 2 seconds</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var buffered = clicks.bufferTime(2000, 5000);\n * buffered.subscribe(x => console.log(x));\n *\n * @see {@link buffer}\n * @see {@link bufferCount}\n * @see {@link bufferToggle}\n * @see {@link bufferWhen}\n * @see {@link windowTime}\n *\n * @param {number} bufferTimeSpan The amount of time to fill each buffer array.\n * @param {number} [bufferCreationInterval] The interval at which to start new\n * buffers.\n * @param {number} [maxBufferSize] The maximum buffer size.\n * @param {Scheduler} [scheduler=async] The scheduler on which to schedule the\n * intervals that determine buffer boundaries.\n * @return {Observable<T[]>} An observable of arrays of buffered values.\n * @method bufferTime\n * @owner Observable\n */\n\nvar Context = /** @class */ (function () {\n    function Context() {\n        this.buffer = [];\n    }\n    return Context;\n}());\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar BufferTimeSubscriber = /** @class */ (function (_super) {\n    __extends$36(BufferTimeSubscriber, _super);\n    function BufferTimeSubscriber(destination, bufferTimeSpan, bufferCreationInterval, maxBufferSize, scheduler) {\n        var _this = _super.call(this, destination) || this;\n        _this.bufferTimeSpan = bufferTimeSpan;\n        _this.bufferCreationInterval = bufferCreationInterval;\n        _this.maxBufferSize = maxBufferSize;\n        _this.scheduler = scheduler;\n        _this.contexts = [];\n        var context = _this.openContext();\n        _this.timespanOnly = bufferCreationInterval == null || bufferCreationInterval < 0;\n        if (_this.timespanOnly) {\n            var timeSpanOnlyState = { subscriber: _this, context: context, bufferTimeSpan: bufferTimeSpan };\n            _this.add(context.closeAction = scheduler.schedule(dispatchBufferTimeSpanOnly, bufferTimeSpan, timeSpanOnlyState));\n        }\n        else {\n            var closeState = { subscriber: _this, context: context };\n            var creationState = { bufferTimeSpan: bufferTimeSpan, bufferCreationInterval: bufferCreationInterval, subscriber: _this, scheduler: scheduler };\n            _this.add(context.closeAction = scheduler.schedule(dispatchBufferClose, bufferTimeSpan, closeState));\n            _this.add(scheduler.schedule(dispatchBufferCreation, bufferCreationInterval, creationState));\n        }\n        return _this;\n    }\n    BufferTimeSubscriber.prototype._next = function (value) {\n        var contexts = this.contexts;\n        var len = contexts.length;\n        var filledBufferContext;\n        for (var i = 0; i < len; i++) {\n            var context = contexts[i];\n            var buffer = context.buffer;\n            buffer.push(value);\n            if (buffer.length == this.maxBufferSize) {\n                filledBufferContext = context;\n            }\n        }\n        if (filledBufferContext) {\n            this.onBufferFull(filledBufferContext);\n        }\n    };\n    BufferTimeSubscriber.prototype._error = function (err) {\n        this.contexts.length = 0;\n        _super.prototype._error.call(this, err);\n    };\n    BufferTimeSubscriber.prototype._complete = function () {\n        var _a = this, contexts = _a.contexts, destination = _a.destination;\n        while (contexts.length > 0) {\n            var context = contexts.shift();\n            destination.next(context.buffer);\n        }\n        _super.prototype._complete.call(this);\n    };\n    /** @deprecated This is an internal implementation detail, do not use. */\n    BufferTimeSubscriber.prototype._unsubscribe = function () {\n        this.contexts = null;\n    };\n    BufferTimeSubscriber.prototype.onBufferFull = function (context) {\n        this.closeContext(context);\n        var closeAction = context.closeAction;\n        closeAction.unsubscribe();\n        this.remove(closeAction);\n        if (!this.closed && this.timespanOnly) {\n            context = this.openContext();\n            var bufferTimeSpan = this.bufferTimeSpan;\n            var timeSpanOnlyState = { subscriber: this, context: context, bufferTimeSpan: bufferTimeSpan };\n            this.add(context.closeAction = this.scheduler.schedule(dispatchBufferTimeSpanOnly, bufferTimeSpan, timeSpanOnlyState));\n        }\n    };\n    BufferTimeSubscriber.prototype.openContext = function () {\n        var context = new Context();\n        this.contexts.push(context);\n        return context;\n    };\n    BufferTimeSubscriber.prototype.closeContext = function (context) {\n        this.destination.next(context.buffer);\n        var contexts = this.contexts;\n        var spliceIndex = contexts ? contexts.indexOf(context) : -1;\n        if (spliceIndex >= 0) {\n            contexts.splice(contexts.indexOf(context), 1);\n        }\n    };\n    return BufferTimeSubscriber;\n}(Subscriber));\nfunction dispatchBufferTimeSpanOnly(state) {\n    var subscriber = state.subscriber;\n    var prevContext = state.context;\n    if (prevContext) {\n        subscriber.closeContext(prevContext);\n    }\n    if (!subscriber.closed) {\n        state.context = subscriber.openContext();\n        state.context.closeAction = this.schedule(state, state.bufferTimeSpan);\n    }\n}\nfunction dispatchBufferCreation(state) {\n    var bufferCreationInterval = state.bufferCreationInterval, bufferTimeSpan = state.bufferTimeSpan, subscriber = state.subscriber, scheduler = state.scheduler;\n    var context = subscriber.openContext();\n    var action = this;\n    if (!subscriber.closed) {\n        subscriber.add(context.closeAction = scheduler.schedule(dispatchBufferClose, bufferTimeSpan, { subscriber: subscriber, context: context }));\n        action.schedule(state, bufferCreationInterval);\n    }\n}\nfunction dispatchBufferClose(arg) {\n    var subscriber = arg.subscriber, context = arg.context;\n    subscriber.closeContext(context);\n}\n\nvar __extends$37 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Buffers the source Observable values starting from an emission from\n * `openings` and ending when the output of `closingSelector` emits.\n *\n * <span class=\"informal\">Collects values from the past as an array. Starts\n * collecting only when `opening` emits, and calls the `closingSelector`\n * function to get an Observable that tells when to close the buffer.</span>\n *\n * <img src=\"./img/bufferToggle.png\" width=\"100%\">\n *\n * Buffers values from the source by opening the buffer via signals from an\n * Observable provided to `openings`, and closing and sending the buffers when\n * a Subscribable or Promise returned by the `closingSelector` function emits.\n *\n * @example <caption>Every other second, emit the click events from the next 500ms</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var openings = Rx.Observable.interval(1000);\n * var buffered = clicks.bufferToggle(openings, i =>\n *   i % 2 ? Rx.Observable.interval(500) : Rx.Observable.empty()\n * );\n * buffered.subscribe(x => console.log(x));\n *\n * @see {@link buffer}\n * @see {@link bufferCount}\n * @see {@link bufferTime}\n * @see {@link bufferWhen}\n * @see {@link windowToggle}\n *\n * @param {SubscribableOrPromise<O>} openings A Subscribable or Promise of notifications to start new\n * buffers.\n * @param {function(value: O): SubscribableOrPromise} closingSelector A function that takes\n * the value emitted by the `openings` observable and returns a Subscribable or Promise,\n * which, when it emits, signals that the associated buffer should be emitted\n * and cleared.\n * @return {Observable<T[]>} An observable of arrays of buffered values.\n * @method bufferToggle\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar BufferToggleSubscriber = /** @class */ (function (_super) {\n    __extends$37(BufferToggleSubscriber, _super);\n    function BufferToggleSubscriber(destination, openings, closingSelector) {\n        var _this = _super.call(this, destination) || this;\n        _this.openings = openings;\n        _this.closingSelector = closingSelector;\n        _this.contexts = [];\n        _this.add(subscribeToResult(_this, openings));\n        return _this;\n    }\n    BufferToggleSubscriber.prototype._next = function (value) {\n        var contexts = this.contexts;\n        var len = contexts.length;\n        for (var i = 0; i < len; i++) {\n            contexts[i].buffer.push(value);\n        }\n    };\n    BufferToggleSubscriber.prototype._error = function (err) {\n        var contexts = this.contexts;\n        while (contexts.length > 0) {\n            var context = contexts.shift();\n            context.subscription.unsubscribe();\n            context.buffer = null;\n            context.subscription = null;\n        }\n        this.contexts = null;\n        _super.prototype._error.call(this, err);\n    };\n    BufferToggleSubscriber.prototype._complete = function () {\n        var contexts = this.contexts;\n        while (contexts.length > 0) {\n            var context = contexts.shift();\n            this.destination.next(context.buffer);\n            context.subscription.unsubscribe();\n            context.buffer = null;\n            context.subscription = null;\n        }\n        this.contexts = null;\n        _super.prototype._complete.call(this);\n    };\n    BufferToggleSubscriber.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n        outerValue ? this.closeBuffer(outerValue) : this.openBuffer(innerValue);\n    };\n    BufferToggleSubscriber.prototype.notifyComplete = function (innerSub) {\n        this.closeBuffer(innerSub.context);\n    };\n    BufferToggleSubscriber.prototype.openBuffer = function (value) {\n        try {\n            var closingSelector = this.closingSelector;\n            var closingNotifier = closingSelector.call(this, value);\n            if (closingNotifier) {\n                this.trySubscribe(closingNotifier);\n            }\n        }\n        catch (err) {\n            this._error(err);\n        }\n    };\n    BufferToggleSubscriber.prototype.closeBuffer = function (context) {\n        var contexts = this.contexts;\n        if (contexts && context) {\n            var buffer = context.buffer, subscription = context.subscription;\n            this.destination.next(buffer);\n            contexts.splice(contexts.indexOf(context), 1);\n            this.remove(subscription);\n            subscription.unsubscribe();\n        }\n    };\n    BufferToggleSubscriber.prototype.trySubscribe = function (closingNotifier) {\n        var contexts = this.contexts;\n        var buffer = [];\n        var subscription = new Subscription();\n        var context = { buffer: buffer, subscription: subscription };\n        contexts.push(context);\n        var innerSubscription = subscribeToResult(this, closingNotifier, context);\n        if (!innerSubscription || innerSubscription.closed) {\n            this.closeBuffer(context);\n        }\n        else {\n            innerSubscription.context = context;\n            this.add(innerSubscription);\n            subscription.add(innerSubscription);\n        }\n    };\n    return BufferToggleSubscriber;\n}(OuterSubscriber));\n\nvar __extends$38 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Buffers the source Observable values, using a factory function of closing\n * Observables to determine when to close, emit, and reset the buffer.\n *\n * <span class=\"informal\">Collects values from the past as an array. When it\n * starts collecting values, it calls a function that returns an Observable that\n * tells when to close the buffer and restart collecting.</span>\n *\n * <img src=\"./img/bufferWhen.png\" width=\"100%\">\n *\n * Opens a buffer immediately, then closes the buffer when the observable\n * returned by calling `closingSelector` function emits a value. When it closes\n * the buffer, it immediately opens a new buffer and repeats the process.\n *\n * @example <caption>Emit an array of the last clicks every [1-5] random seconds</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var buffered = clicks.bufferWhen(() =>\n *   Rx.Observable.interval(1000 + Math.random() * 4000)\n * );\n * buffered.subscribe(x => console.log(x));\n *\n * @see {@link buffer}\n * @see {@link bufferCount}\n * @see {@link bufferTime}\n * @see {@link bufferToggle}\n * @see {@link windowWhen}\n *\n * @param {function(): Observable} closingSelector A function that takes no\n * arguments and returns an Observable that signals buffer closure.\n * @return {Observable<T[]>} An observable of arrays of buffered values.\n * @method bufferWhen\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar BufferWhenSubscriber = /** @class */ (function (_super) {\n    __extends$38(BufferWhenSubscriber, _super);\n    function BufferWhenSubscriber(destination, closingSelector) {\n        var _this = _super.call(this, destination) || this;\n        _this.closingSelector = closingSelector;\n        _this.subscribing = false;\n        _this.openBuffer();\n        return _this;\n    }\n    BufferWhenSubscriber.prototype._next = function (value) {\n        this.buffer.push(value);\n    };\n    BufferWhenSubscriber.prototype._complete = function () {\n        var buffer = this.buffer;\n        if (buffer) {\n            this.destination.next(buffer);\n        }\n        _super.prototype._complete.call(this);\n    };\n    /** @deprecated This is an internal implementation detail, do not use. */\n    BufferWhenSubscriber.prototype._unsubscribe = function () {\n        this.buffer = null;\n        this.subscribing = false;\n    };\n    BufferWhenSubscriber.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n        this.openBuffer();\n    };\n    BufferWhenSubscriber.prototype.notifyComplete = function () {\n        if (this.subscribing) {\n            this.complete();\n        }\n        else {\n            this.openBuffer();\n        }\n    };\n    BufferWhenSubscriber.prototype.openBuffer = function () {\n        var closingSubscription = this.closingSubscription;\n        if (closingSubscription) {\n            this.remove(closingSubscription);\n            closingSubscription.unsubscribe();\n        }\n        var buffer = this.buffer;\n        if (this.buffer) {\n            this.destination.next(buffer);\n        }\n        this.buffer = [];\n        var closingNotifier = tryCatch(this.closingSelector)();\n        if (closingNotifier === errorObject) {\n            this.error(errorObject.e);\n        }\n        else {\n            closingSubscription = new Subscription();\n            this.closingSubscription = closingSubscription;\n            this.add(closingSubscription);\n            this.subscribing = true;\n            closingSubscription.add(subscribeToResult(this, closingNotifier));\n            this.subscribing = false;\n        }\n    };\n    return BufferWhenSubscriber;\n}(OuterSubscriber));\n\nvar __extends$39 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Catches errors on the observable to be handled by returning a new observable or throwing an error.\n *\n * <img src=\"./img/catch.png\" width=\"100%\">\n *\n * @example <caption>Continues with a different Observable when there's an error</caption>\n *\n * Observable.of(1, 2, 3, 4, 5)\n *   .map(n => {\n * \t   if (n == 4) {\n * \t     throw 'four!';\n *     }\n *\t   return n;\n *   })\n *   .catch(err => Observable.of('I', 'II', 'III', 'IV', 'V'))\n *   .subscribe(x => console.log(x));\n *   // 1, 2, 3, I, II, III, IV, V\n *\n * @example <caption>Retries the caught source Observable again in case of error, similar to retry() operator</caption>\n *\n * Observable.of(1, 2, 3, 4, 5)\n *   .map(n => {\n * \t   if (n === 4) {\n * \t     throw 'four!';\n *     }\n * \t   return n;\n *   })\n *   .catch((err, caught) => caught)\n *   .take(30)\n *   .subscribe(x => console.log(x));\n *   // 1, 2, 3, 1, 2, 3, ...\n *\n * @example <caption>Throws a new error when the source Observable throws an error</caption>\n *\n * Observable.of(1, 2, 3, 4, 5)\n *   .map(n => {\n *     if (n == 4) {\n *       throw 'four!';\n *     }\n *     return n;\n *   })\n *   .catch(err => {\n *     throw 'error in source. Details: ' + err;\n *   })\n *   .subscribe(\n *     x => console.log(x),\n *     err => console.log(err)\n *   );\n *   // 1, 2, 3, error in source. Details: four!\n *\n * @param {function} selector a function that takes as arguments `err`, which is the error, and `caught`, which\n *  is the source observable, in case you'd like to \"retry\" that observable by returning it again. Whatever observable\n *  is returned by the `selector` will be used to continue the observable chain.\n * @return {Observable} An observable that originates from either the source or the observable returned by the\n *  catch `selector` function.\n * @name catchError\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar CatchSubscriber = /** @class */ (function (_super) {\n    __extends$39(CatchSubscriber, _super);\n    function CatchSubscriber(destination, selector, caught) {\n        var _this = _super.call(this, destination) || this;\n        _this.selector = selector;\n        _this.caught = caught;\n        return _this;\n    }\n    // NOTE: overriding `error` instead of `_error` because we don't want\n    // to have this flag this subscriber as `isStopped`. We can mimic the\n    // behavior of the RetrySubscriber (from the `retry` operator), where\n    // we unsubscribe from our source chain, reset our Subscriber flags,\n    // then subscribe to the selector result.\n    CatchSubscriber.prototype.error = function (err) {\n        if (!this.isStopped) {\n            var result = void 0;\n            try {\n                result = this.selector(err, this.caught);\n            }\n            catch (err2) {\n                _super.prototype.error.call(this, err2);\n                return;\n            }\n            this._unsubscribeAndRecycle();\n            this.add(subscribeToResult(this, result));\n        }\n    };\n    return CatchSubscriber;\n}(OuterSubscriber));\n\nvar __read$8 = (undefined && undefined.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spread$8 = (undefined && undefined.__spread) || function () {\n    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read$8(arguments[i]));\n    return ar;\n};\n/* tslint:enable:max-line-length */\n/**\n * @deprecated Deprecated in favor of static combineLatest.\n */\n\nvar __read$9 = (undefined && undefined.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spread$9 = (undefined && undefined.__spread) || function () {\n    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read$9(arguments[i]));\n    return ar;\n};\n/* tslint:enable:max-line-length */\n/**\n * @deprecated Deprecated in favor of static concat.\n */\n\n/* tslint:enable:max-line-length */\n/**\n * Projects each source value to an Observable which is merged in the output\n * Observable, in a serialized fashion waiting for each one to complete before\n * merging the next.\n *\n * <span class=\"informal\">Maps each value to an Observable, then flattens all of\n * these inner Observables using {@link concatAll}.</span>\n *\n * <img src=\"./img/concatMap.png\" width=\"100%\">\n *\n * Returns an Observable that emits items based on applying a function that you\n * supply to each item emitted by the source Observable, where that function\n * returns an (so-called \"inner\") Observable. Each new inner Observable is\n * concatenated with the previous inner Observable.\n *\n * __Warning:__ if source values arrive endlessly and faster than their\n * corresponding inner Observables can complete, it will result in memory issues\n * as inner Observables amass in an unbounded buffer waiting for their turn to\n * be subscribed to.\n *\n * Note: `concatMap` is equivalent to `mergeMap` with concurrency parameter set\n * to `1`.\n *\n * @example <caption>For each click event, tick every second from 0 to 3, with no concurrency</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var result = clicks.concatMap(ev => Rx.Observable.interval(1000).take(4));\n * result.subscribe(x => console.log(x));\n *\n * // Results in the following:\n * // (results are not concurrent)\n * // For every click on the \"document\" it will emit values 0 to 3 spaced\n * // on a 1000ms interval\n * // one click = 1000ms-> 0 -1000ms-> 1 -1000ms-> 2 -1000ms-> 3\n *\n * @see {@link concat}\n * @see {@link concatAll}\n * @see {@link concatMapTo}\n * @see {@link exhaustMap}\n * @see {@link mergeMap}\n * @see {@link switchMap}\n *\n * @param {function(value: T, ?index: number): ObservableInput} project A function\n * that, when applied to an item emitted by the source Observable, returns an\n * Observable.\n * @return {Observable} An Observable that emits the result of applying the\n * projection function (and the optional `resultSelector`) to each item emitted\n * by the source Observable and taking values from each projected inner\n * Observable sequentially.\n * @method concatMap\n * @owner Observable\n */\n\n/* tslint:enable:max-line-length */\n/**\n * Projects each source value to the same Observable which is merged multiple\n * times in a serialized fashion on the output Observable.\n *\n * <span class=\"informal\">It's like {@link concatMap}, but maps each value\n * always to the same inner Observable.</span>\n *\n * <img src=\"./img/concatMapTo.png\" width=\"100%\">\n *\n * Maps each source value to the given Observable `innerObservable` regardless\n * of the source value, and then flattens those resulting Observables into one\n * single Observable, which is the output Observable. Each new `innerObservable`\n * instance emitted on the output Observable is concatenated with the previous\n * `innerObservable` instance.\n *\n * __Warning:__ if source values arrive endlessly and faster than their\n * corresponding inner Observables can complete, it will result in memory issues\n * as inner Observables amass in an unbounded buffer waiting for their turn to\n * be subscribed to.\n *\n * Note: `concatMapTo` is equivalent to `mergeMapTo` with concurrency parameter\n * set to `1`.\n *\n * @example <caption>For each click event, tick every second from 0 to 3, with no concurrency</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var result = clicks.concatMapTo(Rx.Observable.interval(1000).take(4));\n * result.subscribe(x => console.log(x));\n *\n * // Results in the following:\n * // (results are not concurrent)\n * // For every click on the \"document\" it will emit values 0 to 3 spaced\n * // on a 1000ms interval\n * // one click = 1000ms-> 0 -1000ms-> 1 -1000ms-> 2 -1000ms-> 3\n *\n * @see {@link concat}\n * @see {@link concatAll}\n * @see {@link concatMap}\n * @see {@link mergeMapTo}\n * @see {@link switchMapTo}\n *\n * @param {ObservableInput} innerObservable An Observable to replace each value from\n * the source Observable.\n * @return {Observable} An observable of values merged together by joining the\n * passed observable with itself, one after the other, for each value emitted\n * from the source.\n * @method concatMapTo\n * @owner Observable\n */\n\nvar __extends$40 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Counts the number of emissions on the source and emits that number when the\n * source completes.\n *\n * <span class=\"informal\">Tells how many values were emitted, when the source\n * completes.</span>\n *\n * <img src=\"./img/count.png\" width=\"100%\">\n *\n * `count` transforms an Observable that emits values into an Observable that\n * emits a single value that represents the number of values emitted by the\n * source Observable. If the source Observable terminates with an error, `count`\n * will pass this error notification along without emitting a value first. If\n * the source Observable does not terminate at all, `count` will neither emit\n * a value nor terminate. This operator takes an optional `predicate` function\n * as argument, in which case the output emission will represent the number of\n * source values that matched `true` with the `predicate`.\n *\n * @example <caption>Counts how many seconds have passed before the first click happened</caption>\n * var seconds = Rx.Observable.interval(1000);\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var secondsBeforeClick = seconds.takeUntil(clicks);\n * var result = secondsBeforeClick.count();\n * result.subscribe(x => console.log(x));\n *\n * @example <caption>Counts how many odd numbers are there between 1 and 7</caption>\n * var numbers = Rx.Observable.range(1, 7);\n * var result = numbers.count(i => i % 2 === 1);\n * result.subscribe(x => console.log(x));\n *\n * // Results in:\n * // 4\n *\n * @see {@link max}\n * @see {@link min}\n * @see {@link reduce}\n *\n * @param {function(value: T, i: number, source: Observable<T>): boolean} [predicate] A\n * boolean function to select what values are to be counted. It is provided with\n * arguments of:\n * - `value`: the value from the source Observable.\n * - `index`: the (zero-based) \"index\" of the value from the source Observable.\n * - `source`: the source Observable instance itself.\n * @return {Observable} An Observable of one number that represents the count as\n * described above.\n * @method count\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar CountSubscriber = /** @class */ (function (_super) {\n    __extends$40(CountSubscriber, _super);\n    function CountSubscriber(destination, predicate, source) {\n        var _this = _super.call(this, destination) || this;\n        _this.predicate = predicate;\n        _this.source = source;\n        _this.count = 0;\n        _this.index = 0;\n        return _this;\n    }\n    CountSubscriber.prototype._next = function (value) {\n        if (this.predicate) {\n            this._tryPredicate(value);\n        }\n        else {\n            this.count++;\n        }\n    };\n    CountSubscriber.prototype._tryPredicate = function (value) {\n        var result;\n        try {\n            result = this.predicate(value, this.index++, this.source);\n        }\n        catch (err) {\n            this.destination.error(err);\n            return;\n        }\n        if (result) {\n            this.count++;\n        }\n    };\n    CountSubscriber.prototype._complete = function () {\n        this.destination.next(this.count);\n        this.destination.complete();\n    };\n    return CountSubscriber;\n}(Subscriber));\n\nvar __extends$41 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Emits a value from the source Observable only after a particular time span\n * determined by another Observable has passed without another source emission.\n *\n * <span class=\"informal\">It's like {@link debounceTime}, but the time span of\n * emission silence is determined by a second Observable.</span>\n *\n * <img src=\"./img/debounce.png\" width=\"100%\">\n *\n * `debounce` delays values emitted by the source Observable, but drops previous\n * pending delayed emissions if a new value arrives on the source Observable.\n * This operator keeps track of the most recent value from the source\n * Observable, and spawns a duration Observable by calling the\n * `durationSelector` function. The value is emitted only when the duration\n * Observable emits a value or completes, and if no other value was emitted on\n * the source Observable since the duration Observable was spawned. If a new\n * value appears before the duration Observable emits, the previous value will\n * be dropped and will not be emitted on the output Observable.\n *\n * Like {@link debounceTime}, this is a rate-limiting operator, and also a\n * delay-like operator since output emissions do not necessarily occur at the\n * same time as they did on the source Observable.\n *\n * @example <caption>Emit the most recent click after a burst of clicks</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var result = clicks.debounce(() => Rx.Observable.interval(1000));\n * result.subscribe(x => console.log(x));\n *\n * @see {@link audit}\n * @see {@link debounceTime}\n * @see {@link delayWhen}\n * @see {@link throttle}\n *\n * @param {function(value: T): SubscribableOrPromise} durationSelector A function\n * that receives a value from the source Observable, for computing the timeout\n * duration for each source value, returned as an Observable or a Promise.\n * @return {Observable} An Observable that delays the emissions of the source\n * Observable by the specified duration Observable returned by\n * `durationSelector`, and may drop some values if they occur too frequently.\n * @method debounce\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar DebounceSubscriber = /** @class */ (function (_super) {\n    __extends$41(DebounceSubscriber, _super);\n    function DebounceSubscriber(destination, durationSelector) {\n        var _this = _super.call(this, destination) || this;\n        _this.durationSelector = durationSelector;\n        _this.hasValue = false;\n        _this.durationSubscription = null;\n        return _this;\n    }\n    DebounceSubscriber.prototype._next = function (value) {\n        try {\n            var result = this.durationSelector.call(this, value);\n            if (result) {\n                this._tryNext(value, result);\n            }\n        }\n        catch (err) {\n            this.destination.error(err);\n        }\n    };\n    DebounceSubscriber.prototype._complete = function () {\n        this.emitValue();\n        this.destination.complete();\n    };\n    DebounceSubscriber.prototype._tryNext = function (value, duration) {\n        var subscription = this.durationSubscription;\n        this.value = value;\n        this.hasValue = true;\n        if (subscription) {\n            subscription.unsubscribe();\n            this.remove(subscription);\n        }\n        subscription = subscribeToResult(this, duration);\n        if (subscription && !subscription.closed) {\n            this.add(this.durationSubscription = subscription);\n        }\n    };\n    DebounceSubscriber.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n        this.emitValue();\n    };\n    DebounceSubscriber.prototype.notifyComplete = function () {\n        this.emitValue();\n    };\n    DebounceSubscriber.prototype.emitValue = function () {\n        if (this.hasValue) {\n            var value = this.value;\n            var subscription = this.durationSubscription;\n            if (subscription) {\n                this.durationSubscription = null;\n                subscription.unsubscribe();\n                this.remove(subscription);\n            }\n            // This must be done *before* passing the value\n            // along to the destination because it's possible for\n            // the value to synchronously re-enter this operator\n            // recursively if the duration selector Observable\n            // emits synchronously\n            this.value = null;\n            this.hasValue = false;\n            _super.prototype._next.call(this, value);\n        }\n    };\n    return DebounceSubscriber;\n}(OuterSubscriber));\n\nvar __extends$42 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Emits a value from the source Observable only after a particular time span\n * has passed without another source emission.\n *\n * <span class=\"informal\">It's like {@link delay}, but passes only the most\n * recent value from each burst of emissions.</span>\n *\n * <img src=\"./img/debounceTime.png\" width=\"100%\">\n *\n * `debounceTime` delays values emitted by the source Observable, but drops\n * previous pending delayed emissions if a new value arrives on the source\n * Observable. This operator keeps track of the most recent value from the\n * source Observable, and emits that only when `dueTime` enough time has passed\n * without any other value appearing on the source Observable. If a new value\n * appears before `dueTime` silence occurs, the previous value will be dropped\n * and will not be emitted on the output Observable.\n *\n * This is a rate-limiting operator, because it is impossible for more than one\n * value to be emitted in any time window of duration `dueTime`, but it is also\n * a delay-like operator since output emissions do not occur at the same time as\n * they did on the source Observable. Optionally takes a {@link IScheduler} for\n * managing timers.\n *\n * @example <caption>Emit the most recent click after a burst of clicks</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var result = clicks.debounceTime(1000);\n * result.subscribe(x => console.log(x));\n *\n * @see {@link auditTime}\n * @see {@link debounce}\n * @see {@link delay}\n * @see {@link sampleTime}\n * @see {@link throttleTime}\n *\n * @param {number} dueTime The timeout duration in milliseconds (or the time\n * unit determined internally by the optional `scheduler`) for the window of\n * time required to wait for emission silence before emitting the most recent\n * source value.\n * @param {Scheduler} [scheduler=async] The {@link IScheduler} to use for\n * managing the timers that handle the timeout for each value.\n * @return {Observable} An Observable that delays the emissions of the source\n * Observable by the specified `dueTime`, and may drop some values if they occur\n * too frequently.\n * @method debounceTime\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar DebounceTimeSubscriber = /** @class */ (function (_super) {\n    __extends$42(DebounceTimeSubscriber, _super);\n    function DebounceTimeSubscriber(destination, dueTime, scheduler) {\n        var _this = _super.call(this, destination) || this;\n        _this.dueTime = dueTime;\n        _this.scheduler = scheduler;\n        _this.debouncedSubscription = null;\n        _this.lastValue = null;\n        _this.hasValue = false;\n        return _this;\n    }\n    DebounceTimeSubscriber.prototype._next = function (value) {\n        this.clearDebounce();\n        this.lastValue = value;\n        this.hasValue = true;\n        this.add(this.debouncedSubscription = this.scheduler.schedule(dispatchNext$2, this.dueTime, this));\n    };\n    DebounceTimeSubscriber.prototype._complete = function () {\n        this.debouncedNext();\n        this.destination.complete();\n    };\n    DebounceTimeSubscriber.prototype.debouncedNext = function () {\n        this.clearDebounce();\n        if (this.hasValue) {\n            var lastValue = this.lastValue;\n            // This must be done *before* passing the value\n            // along to the destination because it's possible for\n            // the value to synchronously re-enter this operator\n            // recursively when scheduled with things like\n            // VirtualScheduler/TestScheduler.\n            this.lastValue = null;\n            this.hasValue = false;\n            this.destination.next(lastValue);\n        }\n    };\n    DebounceTimeSubscriber.prototype.clearDebounce = function () {\n        var debouncedSubscription = this.debouncedSubscription;\n        if (debouncedSubscription !== null) {\n            this.remove(debouncedSubscription);\n            debouncedSubscription.unsubscribe();\n            this.debouncedSubscription = null;\n        }\n    };\n    return DebounceTimeSubscriber;\n}(Subscriber));\nfunction dispatchNext$2(subscriber) {\n    subscriber.debouncedNext();\n}\n\nvar __extends$43 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/* tslint:enable:max-line-length */\n/**\n * Emits a given value if the source Observable completes without emitting any\n * `next` value, otherwise mirrors the source Observable.\n *\n * <span class=\"informal\">If the source Observable turns out to be empty, then\n * this operator will emit a default value.</span>\n *\n * <img src=\"./img/defaultIfEmpty.png\" width=\"100%\">\n *\n * `defaultIfEmpty` emits the values emitted by the source Observable or a\n * specified default value if the source Observable is empty (completes without\n * having emitted any `next` value).\n *\n * @example <caption>If no clicks happen in 5 seconds, then emit \"no clicks\"</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var clicksBeforeFive = clicks.takeUntil(Rx.Observable.interval(5000));\n * var result = clicksBeforeFive.defaultIfEmpty('no clicks');\n * result.subscribe(x => console.log(x));\n *\n * @see {@link empty}\n * @see {@link last}\n *\n * @param {any} [defaultValue=null] The default value used if the source\n * Observable is empty.\n * @return {Observable} An Observable that emits either the specified\n * `defaultValue` if the source Observable emits no items, or the values emitted\n * by the source Observable.\n * @method defaultIfEmpty\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar DefaultIfEmptySubscriber = /** @class */ (function (_super) {\n    __extends$43(DefaultIfEmptySubscriber, _super);\n    function DefaultIfEmptySubscriber(destination, defaultValue) {\n        var _this = _super.call(this, destination) || this;\n        _this.defaultValue = defaultValue;\n        _this.isEmpty = true;\n        return _this;\n    }\n    DefaultIfEmptySubscriber.prototype._next = function (value) {\n        this.isEmpty = false;\n        this.destination.next(value);\n    };\n    DefaultIfEmptySubscriber.prototype._complete = function () {\n        if (this.isEmpty) {\n            this.destination.next(this.defaultValue);\n        }\n        this.destination.complete();\n    };\n    return DefaultIfEmptySubscriber;\n}(Subscriber));\n\nvar __extends$44 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Delays the emission of items from the source Observable by a given timeout or\n * until a given Date.\n *\n * <span class=\"informal\">Time shifts each item by some specified amount of\n * milliseconds.</span>\n *\n * <img src=\"./img/delay.png\" width=\"100%\">\n *\n * If the delay argument is a Number, this operator time shifts the source\n * Observable by that amount of time expressed in milliseconds. The relative\n * time intervals between the values are preserved.\n *\n * If the delay argument is a Date, this operator time shifts the start of the\n * Observable execution until the given date occurs.\n *\n * @example <caption>Delay each click by one second</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var delayedClicks = clicks.delay(1000); // each click emitted after 1 second\n * delayedClicks.subscribe(x => console.log(x));\n *\n * @example <caption>Delay all clicks until a future date happens</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var date = new Date('March 15, 2050 12:00:00'); // in the future\n * var delayedClicks = clicks.delay(date); // click emitted only after that date\n * delayedClicks.subscribe(x => console.log(x));\n *\n * @see {@link debounceTime}\n * @see {@link delayWhen}\n *\n * @param {number|Date} delay The delay duration in milliseconds (a `number`) or\n * a `Date` until which the emission of the source items is delayed.\n * @param {Scheduler} [scheduler=async] The IScheduler to use for\n * managing the timers that handle the time-shift for each item.\n * @return {Observable} An Observable that delays the emissions of the source\n * Observable by the specified timeout or Date.\n * @method delay\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar DelaySubscriber = /** @class */ (function (_super) {\n    __extends$44(DelaySubscriber, _super);\n    function DelaySubscriber(destination, delay, scheduler) {\n        var _this = _super.call(this, destination) || this;\n        _this.delay = delay;\n        _this.scheduler = scheduler;\n        _this.queue = [];\n        _this.active = false;\n        _this.errored = false;\n        return _this;\n    }\n    DelaySubscriber.dispatch = function (state) {\n        var source = state.source;\n        var queue = source.queue;\n        var scheduler = state.scheduler;\n        var destination = state.destination;\n        while (queue.length > 0 && (queue[0].time - scheduler.now()) <= 0) {\n            queue.shift().notification.observe(destination);\n        }\n        if (queue.length > 0) {\n            var delay_1 = Math.max(0, queue[0].time - scheduler.now());\n            this.schedule(state, delay_1);\n        }\n        else {\n            source.active = false;\n        }\n    };\n    DelaySubscriber.prototype._schedule = function (scheduler) {\n        this.active = true;\n        this.add(scheduler.schedule(DelaySubscriber.dispatch, this.delay, {\n            source: this, destination: this.destination, scheduler: scheduler\n        }));\n    };\n    DelaySubscriber.prototype.scheduleNotification = function (notification) {\n        if (this.errored === true) {\n            return;\n        }\n        var scheduler = this.scheduler;\n        var message = new DelayMessage(scheduler.now() + this.delay, notification);\n        this.queue.push(message);\n        if (this.active === false) {\n            this._schedule(scheduler);\n        }\n    };\n    DelaySubscriber.prototype._next = function (value) {\n        this.scheduleNotification(Notification.createNext(value));\n    };\n    DelaySubscriber.prototype._error = function (err) {\n        this.errored = true;\n        this.queue = [];\n        this.destination.error(err);\n    };\n    DelaySubscriber.prototype._complete = function () {\n        this.scheduleNotification(Notification.createComplete());\n    };\n    return DelaySubscriber;\n}(Subscriber));\nvar DelayMessage = /** @class */ (function () {\n    function DelayMessage(time, notification) {\n        this.time = time;\n        this.notification = notification;\n    }\n    return DelayMessage;\n}());\n\nvar __extends$45 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Delays the emission of items from the source Observable by a given time span\n * determined by the emissions of another Observable.\n *\n * <span class=\"informal\">It's like {@link delay}, but the time span of the\n * delay duration is determined by a second Observable.</span>\n *\n * <img src=\"./img/delayWhen.png\" width=\"100%\">\n *\n * `delayWhen` time shifts each emitted value from the source Observable by a\n * time span determined by another Observable. When the source emits a value,\n * the `delayDurationSelector` function is called with the source value as\n * argument, and should return an Observable, called the \"duration\" Observable.\n * The source value is emitted on the output Observable only when the duration\n * Observable emits a value or completes.\n *\n * Optionally, `delayWhen` takes a second argument, `subscriptionDelay`, which\n * is an Observable. When `subscriptionDelay` emits its first value or\n * completes, the source Observable is subscribed to and starts behaving like\n * described in the previous paragraph. If `subscriptionDelay` is not provided,\n * `delayWhen` will subscribe to the source Observable as soon as the output\n * Observable is subscribed.\n *\n * @example <caption>Delay each click by a random amount of time, between 0 and 5 seconds</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var delayedClicks = clicks.delayWhen(event =>\n *   Rx.Observable.interval(Math.random() * 5000)\n * );\n * delayedClicks.subscribe(x => console.log(x));\n *\n * @see {@link debounce}\n * @see {@link delay}\n *\n * @param {function(value: T): Observable} delayDurationSelector A function that\n * returns an Observable for each value emitted by the source Observable, which\n * is then used to delay the emission of that item on the output Observable\n * until the Observable returned from this function emits a value.\n * @param {Observable} subscriptionDelay An Observable that triggers the\n * subscription to the source Observable once it emits any value.\n * @return {Observable} An Observable that delays the emissions of the source\n * Observable by an amount of time specified by the Observable returned by\n * `delayDurationSelector`.\n * @method delayWhen\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar DelayWhenSubscriber = /** @class */ (function (_super) {\n    __extends$45(DelayWhenSubscriber, _super);\n    function DelayWhenSubscriber(destination, delayDurationSelector) {\n        var _this = _super.call(this, destination) || this;\n        _this.delayDurationSelector = delayDurationSelector;\n        _this.completed = false;\n        _this.delayNotifierSubscriptions = [];\n        _this.values = [];\n        return _this;\n    }\n    DelayWhenSubscriber.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n        this.destination.next(outerValue);\n        this.removeSubscription(innerSub);\n        this.tryComplete();\n    };\n    DelayWhenSubscriber.prototype.notifyError = function (error, innerSub) {\n        this._error(error);\n    };\n    DelayWhenSubscriber.prototype.notifyComplete = function (innerSub) {\n        var value = this.removeSubscription(innerSub);\n        if (value) {\n            this.destination.next(value);\n        }\n        this.tryComplete();\n    };\n    DelayWhenSubscriber.prototype._next = function (value) {\n        try {\n            var delayNotifier = this.delayDurationSelector(value);\n            if (delayNotifier) {\n                this.tryDelay(delayNotifier, value);\n            }\n        }\n        catch (err) {\n            this.destination.error(err);\n        }\n    };\n    DelayWhenSubscriber.prototype._complete = function () {\n        this.completed = true;\n        this.tryComplete();\n    };\n    DelayWhenSubscriber.prototype.removeSubscription = function (subscription) {\n        subscription.unsubscribe();\n        var subscriptionIdx = this.delayNotifierSubscriptions.indexOf(subscription);\n        var value = null;\n        if (subscriptionIdx !== -1) {\n            value = this.values[subscriptionIdx];\n            this.delayNotifierSubscriptions.splice(subscriptionIdx, 1);\n            this.values.splice(subscriptionIdx, 1);\n        }\n        return value;\n    };\n    DelayWhenSubscriber.prototype.tryDelay = function (delayNotifier, value) {\n        var notifierSubscription = subscribeToResult(this, delayNotifier, value);\n        if (notifierSubscription && !notifierSubscription.closed) {\n            this.add(notifierSubscription);\n            this.delayNotifierSubscriptions.push(notifierSubscription);\n        }\n        this.values.push(value);\n    };\n    DelayWhenSubscriber.prototype.tryComplete = function () {\n        if (this.completed && this.delayNotifierSubscriptions.length === 0) {\n            this.destination.complete();\n        }\n    };\n    return DelayWhenSubscriber;\n}(OuterSubscriber));\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar SubscriptionDelayObservable = /** @class */ (function (_super) {\n    __extends$45(SubscriptionDelayObservable, _super);\n    function SubscriptionDelayObservable(source, subscriptionDelay) {\n        var _this = _super.call(this) || this;\n        _this.source = source;\n        _this.subscriptionDelay = subscriptionDelay;\n        return _this;\n    }\n    /** @deprecated This is an internal implementation detail, do not use. */\n    SubscriptionDelayObservable.prototype._subscribe = function (subscriber) {\n        this.subscriptionDelay.subscribe(new SubscriptionDelaySubscriber(subscriber, this.source));\n    };\n    return SubscriptionDelayObservable;\n}(Observable));\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar SubscriptionDelaySubscriber = /** @class */ (function (_super) {\n    __extends$45(SubscriptionDelaySubscriber, _super);\n    function SubscriptionDelaySubscriber(parent, source) {\n        var _this = _super.call(this) || this;\n        _this.parent = parent;\n        _this.source = source;\n        _this.sourceSubscribed = false;\n        return _this;\n    }\n    SubscriptionDelaySubscriber.prototype._next = function (unused) {\n        this.subscribeToSource();\n    };\n    SubscriptionDelaySubscriber.prototype._error = function (err) {\n        this.unsubscribe();\n        this.parent.error(err);\n    };\n    SubscriptionDelaySubscriber.prototype._complete = function () {\n        this.subscribeToSource();\n    };\n    SubscriptionDelaySubscriber.prototype.subscribeToSource = function () {\n        if (!this.sourceSubscribed) {\n            this.sourceSubscribed = true;\n            this.unsubscribe();\n            this.source.subscribe(this.parent);\n        }\n    };\n    return SubscriptionDelaySubscriber;\n}(Subscriber));\n\nvar __extends$46 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Converts an Observable of {@link Notification} objects into the emissions\n * that they represent.\n *\n * <span class=\"informal\">Unwraps {@link Notification} objects as actual `next`,\n * `error` and `complete` emissions. The opposite of {@link materialize}.</span>\n *\n * <img src=\"./img/dematerialize.png\" width=\"100%\">\n *\n * `dematerialize` is assumed to operate an Observable that only emits\n * {@link Notification} objects as `next` emissions, and does not emit any\n * `error`. Such Observable is the output of a `materialize` operation. Those\n * notifications are then unwrapped using the metadata they contain, and emitted\n * as `next`, `error`, and `complete` on the output Observable.\n *\n * Use this operator in conjunction with {@link materialize}.\n *\n * @example <caption>Convert an Observable of Notifications to an actual Observable</caption>\n * var notifA = new Rx.Notification('N', 'A');\n * var notifB = new Rx.Notification('N', 'B');\n * var notifE = new Rx.Notification('E', void 0,\n *   new TypeError('x.toUpperCase is not a function')\n * );\n * var materialized = Rx.Observable.of(notifA, notifB, notifE);\n * var upperCase = materialized.dematerialize();\n * upperCase.subscribe(x => console.log(x), e => console.error(e));\n *\n * // Results in:\n * // A\n * // B\n * // TypeError: x.toUpperCase is not a function\n *\n * @see {@link Notification}\n * @see {@link materialize}\n *\n * @return {Observable} An Observable that emits items and notifications\n * embedded in Notification objects emitted by the source Observable.\n * @method dematerialize\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar DeMaterializeSubscriber = /** @class */ (function (_super) {\n    __extends$46(DeMaterializeSubscriber, _super);\n    function DeMaterializeSubscriber(destination) {\n        return _super.call(this, destination) || this;\n    }\n    DeMaterializeSubscriber.prototype._next = function (value) {\n        value.observe(this.destination);\n    };\n    return DeMaterializeSubscriber;\n}(Subscriber));\n\nvar __extends$47 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Returns an Observable that emits all items emitted by the source Observable that are distinct by comparison from previous items.\n *\n * If a keySelector function is provided, then it will project each value from the source observable into a new value that it will\n * check for equality with previously projected values. If a keySelector function is not provided, it will use each value from the\n * source observable directly with an equality check against previous values.\n *\n * In JavaScript runtimes that support `Set`, this operator will use a `Set` to improve performance of the distinct value checking.\n *\n * In other runtimes, this operator will use a minimal implementation of `Set` that relies on an `Array` and `indexOf` under the\n * hood, so performance will degrade as more values are checked for distinction. Even in newer browsers, a long-running `distinct`\n * use might result in memory leaks. To help alleviate this in some scenarios, an optional `flushes` parameter is also provided so\n * that the internal `Set` can be \"flushed\", basically clearing it of values.\n *\n * @example <caption>A simple example with numbers</caption>\n * Observable.of(1, 1, 2, 2, 2, 1, 2, 3, 4, 3, 2, 1)\n *   .distinct()\n *   .subscribe(x => console.log(x)); // 1, 2, 3, 4\n *\n * @example <caption>An example using a keySelector function</caption>\n * interface Person {\n *    age: number,\n *    name: string\n * }\n *\n * Observable.of<Person>(\n *     { age: 4, name: 'Foo'},\n *     { age: 7, name: 'Bar'},\n *     { age: 5, name: 'Foo'})\n *     .distinct((p: Person) => p.name)\n *     .subscribe(x => console.log(x));\n *\n * // displays:\n * // { age: 4, name: 'Foo' }\n * // { age: 7, name: 'Bar' }\n *\n * @see {@link distinctUntilChanged}\n * @see {@link distinctUntilKeyChanged}\n *\n * @param {function} [keySelector] Optional function to select which value you want to check as distinct.\n * @param {Observable} [flushes] Optional Observable for flushing the internal HashSet of the operator.\n * @return {Observable} An Observable that emits items from the source Observable with distinct values.\n * @method distinct\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar DistinctSubscriber = /** @class */ (function (_super) {\n    __extends$47(DistinctSubscriber, _super);\n    function DistinctSubscriber(destination, keySelector, flushes) {\n        var _this = _super.call(this, destination) || this;\n        _this.keySelector = keySelector;\n        _this.values = new Set();\n        if (flushes) {\n            _this.add(subscribeToResult(_this, flushes));\n        }\n        return _this;\n    }\n    DistinctSubscriber.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n        this.values.clear();\n    };\n    DistinctSubscriber.prototype.notifyError = function (error, innerSub) {\n        this._error(error);\n    };\n    DistinctSubscriber.prototype._next = function (value) {\n        if (this.keySelector) {\n            this._useKeySelector(value);\n        }\n        else {\n            this._finalizeNext(value, value);\n        }\n    };\n    DistinctSubscriber.prototype._useKeySelector = function (value) {\n        var key;\n        var destination = this.destination;\n        try {\n            key = this.keySelector(value);\n        }\n        catch (err) {\n            destination.error(err);\n            return;\n        }\n        this._finalizeNext(key, value);\n    };\n    DistinctSubscriber.prototype._finalizeNext = function (key, value) {\n        var values = this.values;\n        if (!values.has(key)) {\n            values.add(key);\n            this.destination.next(value);\n        }\n    };\n    return DistinctSubscriber;\n}(OuterSubscriber));\n\nvar __extends$48 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/* tslint:enable:max-line-length */\n/**\n * Returns an Observable that emits all items emitted by the source Observable that are distinct by comparison from the previous item.\n *\n * If a comparator function is provided, then it will be called for each item to test for whether or not that value should be emitted.\n *\n * If a comparator function is not provided, an equality check is used by default.\n *\n * @example <caption>A simple example with numbers</caption>\n * Observable.of(1, 1, 2, 2, 2, 1, 1, 2, 3, 3, 4)\n *   .distinctUntilChanged()\n *   .subscribe(x => console.log(x)); // 1, 2, 1, 2, 3, 4\n *\n * @example <caption>An example using a compare function</caption>\n * interface Person {\n *    age: number,\n *    name: string\n * }\n *\n * Observable.of<Person>(\n *     { age: 4, name: 'Foo'},\n *     { age: 7, name: 'Bar'},\n *     { age: 5, name: 'Foo'})\n *     { age: 6, name: 'Foo'})\n *     .distinctUntilChanged((p: Person, q: Person) => p.name === q.name)\n *     .subscribe(x => console.log(x));\n *\n * // displays:\n * // { age: 4, name: 'Foo' }\n * // { age: 7, name: 'Bar' }\n * // { age: 5, name: 'Foo' }\n *\n * @see {@link distinct}\n * @see {@link distinctUntilKeyChanged}\n *\n * @param {function} [compare] Optional comparison function called to test if an item is distinct from the previous item in the source.\n * @return {Observable} An Observable that emits items from the source Observable with distinct values.\n * @method distinctUntilChanged\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar DistinctUntilChangedSubscriber = /** @class */ (function (_super) {\n    __extends$48(DistinctUntilChangedSubscriber, _super);\n    function DistinctUntilChangedSubscriber(destination, compare, keySelector) {\n        var _this = _super.call(this, destination) || this;\n        _this.keySelector = keySelector;\n        _this.hasKey = false;\n        if (typeof compare === 'function') {\n            _this.compare = compare;\n        }\n        return _this;\n    }\n    DistinctUntilChangedSubscriber.prototype.compare = function (x, y) {\n        return x === y;\n    };\n    DistinctUntilChangedSubscriber.prototype._next = function (value) {\n        var keySelector = this.keySelector;\n        var key = value;\n        if (keySelector) {\n            key = tryCatch(this.keySelector)(value);\n            if (key === errorObject) {\n                return this.destination.error(errorObject.e);\n            }\n        }\n        var result = false;\n        if (this.hasKey) {\n            result = tryCatch(this.compare)(this.key, key);\n            if (result === errorObject) {\n                return this.destination.error(errorObject.e);\n            }\n        }\n        else {\n            this.hasKey = true;\n        }\n        if (Boolean(result) === false) {\n            this.key = key;\n            this.destination.next(value);\n        }\n    };\n    return DistinctUntilChangedSubscriber;\n}(Subscriber));\n\n/* tslint:enable:max-line-length */\n/**\n * Returns an Observable that emits all items emitted by the source Observable that are distinct by comparison from the previous item,\n * using a property accessed by using the key provided to check if the two items are distinct.\n *\n * If a comparator function is provided, then it will be called for each item to test for whether or not that value should be emitted.\n *\n * If a comparator function is not provided, an equality check is used by default.\n *\n * @example <caption>An example comparing the name of persons</caption>\n *\n *  interface Person {\n *     age: number,\n *     name: string\n *  }\n *\n * Observable.of<Person>(\n *     { age: 4, name: 'Foo'},\n *     { age: 7, name: 'Bar'},\n *     { age: 5, name: 'Foo'},\n *     { age: 6, name: 'Foo'})\n *     .distinctUntilKeyChanged('name')\n *     .subscribe(x => console.log(x));\n *\n * // displays:\n * // { age: 4, name: 'Foo' }\n * // { age: 7, name: 'Bar' }\n * // { age: 5, name: 'Foo' }\n *\n * @example <caption>An example comparing the first letters of the name</caption>\n *\n * interface Person {\n *     age: number,\n *     name: string\n *  }\n *\n * Observable.of<Person>(\n *     { age: 4, name: 'Foo1'},\n *     { age: 7, name: 'Bar'},\n *     { age: 5, name: 'Foo2'},\n *     { age: 6, name: 'Foo3'})\n *     .distinctUntilKeyChanged('name', (x: string, y: string) => x.substring(0, 3) === y.substring(0, 3))\n *     .subscribe(x => console.log(x));\n *\n * // displays:\n * // { age: 4, name: 'Foo1' }\n * // { age: 7, name: 'Bar' }\n * // { age: 5, name: 'Foo2' }\n *\n * @see {@link distinct}\n * @see {@link distinctUntilChanged}\n *\n * @param {string} key String key for object property lookup on each item.\n * @param {function} [compare] Optional comparison function called to test if an item is distinct from the previous item in the source.\n * @return {Observable} An Observable that emits items from the source Observable with distinct values based on the key specified.\n * @method distinctUntilKeyChanged\n * @owner Observable\n */\n\nvar __extends$49 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/* tslint:enable:max-line-length */\n/**\n * Filter items emitted by the source Observable by only emitting those that\n * satisfy a specified predicate.\n *\n * <span class=\"informal\">Like\n * [Array.prototype.filter()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/filter),\n * it only emits a value from the source if it passes a criterion function.</span>\n *\n * <img src=\"./img/filter.png\" width=\"100%\">\n *\n * Similar to the well-known `Array.prototype.filter` method, this operator\n * takes values from the source Observable, passes them through a `predicate`\n * function and only emits those values that yielded `true`.\n *\n * @example <caption>Emit only click events whose target was a DIV element</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var clicksOnDivs = clicks.filter(ev => ev.target.tagName === 'DIV');\n * clicksOnDivs.subscribe(x => console.log(x));\n *\n * @see {@link distinct}\n * @see {@link distinctUntilChanged}\n * @see {@link distinctUntilKeyChanged}\n * @see {@link ignoreElements}\n * @see {@link partition}\n * @see {@link skip}\n *\n * @param {function(value: T, index: number): boolean} predicate A function that\n * evaluates each value emitted by the source Observable. If it returns `true`,\n * the value is emitted, if `false` the value is not passed to the output\n * Observable. The `index` parameter is the number `i` for the i-th source\n * emission that has happened since the subscription, starting from the number\n * `0`.\n * @param {any} [thisArg] An optional argument to determine the value of `this`\n * in the `predicate` function.\n * @return {Observable} An Observable of values from the source that were\n * allowed by the `predicate` function.\n * @method filter\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar FilterSubscriber = /** @class */ (function (_super) {\n    __extends$49(FilterSubscriber, _super);\n    function FilterSubscriber(destination, predicate, thisArg) {\n        var _this = _super.call(this, destination) || this;\n        _this.predicate = predicate;\n        _this.thisArg = thisArg;\n        _this.count = 0;\n        return _this;\n    }\n    // the try catch block below is left specifically for\n    // optimization and perf reasons. a tryCatcher is not necessary here.\n    FilterSubscriber.prototype._next = function (value) {\n        var result;\n        try {\n            result = this.predicate.call(this.thisArg, value, this.count++);\n        }\n        catch (err) {\n            this.destination.error(err);\n            return;\n        }\n        if (result) {\n            this.destination.next(value);\n        }\n    };\n    return FilterSubscriber;\n}(Subscriber));\n\nvar __extends$50 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/* tslint:enable:max-line-length */\n/**\n * Perform a side effect for every emission on the source Observable, but return\n * an Observable that is identical to the source.\n *\n * <span class=\"informal\">Intercepts each emission on the source and runs a\n * function, but returns an output which is identical to the source as long as errors don't occur.</span>\n *\n * <img src=\"./img/do.png\" width=\"100%\">\n *\n * Returns a mirrored Observable of the source Observable, but modified so that\n * the provided Observer is called to perform a side effect for every value,\n * error, and completion emitted by the source. Any errors that are thrown in\n * the aforementioned Observer or handlers are safely sent down the error path\n * of the output Observable.\n *\n * This operator is useful for debugging your Observables for the correct values\n * or performing other side effects.\n *\n * Note: this is different to a `subscribe` on the Observable. If the Observable\n * returned by `do` is not subscribed, the side effects specified by the\n * Observer will never happen. `do` therefore simply spies on existing\n * execution, it does not trigger an execution to happen like `subscribe` does.\n *\n * @example <caption>Map every click to the clientX position of that click, while also logging the click event</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var positions = clicks\n *   .do(ev => console.log(ev))\n *   .map(ev => ev.clientX);\n * positions.subscribe(x => console.log(x));\n *\n * @see {@link map}\n * @see {@link subscribe}\n *\n * @param {Observer|function} [nextOrObserver] A normal Observer object or a\n * callback for `next`.\n * @param {function} [error] Callback for errors in the source.\n * @param {function} [complete] Callback for the completion of the source.\n * @return {Observable} An Observable identical to the source, but runs the\n * specified Observer or callback(s) for each item.\n * @name tap\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar TapSubscriber = /** @class */ (function (_super) {\n    __extends$50(TapSubscriber, _super);\n    function TapSubscriber(destination, observerOrNext, error, complete) {\n        var _this = _super.call(this, destination) || this;\n        _this._tapNext = noop$1;\n        _this._tapError = noop$1;\n        _this._tapComplete = noop$1;\n        _this._tapError = error || noop$1;\n        _this._tapComplete = complete || noop$1;\n        if (isFunction(observerOrNext)) {\n            _this._context = _this;\n            _this._tapNext = observerOrNext;\n        }\n        else if (observerOrNext) {\n            _this._context = observerOrNext;\n            _this._tapNext = observerOrNext.next || noop$1;\n            _this._tapError = observerOrNext.error || noop$1;\n            _this._tapComplete = observerOrNext.complete || noop$1;\n        }\n        return _this;\n    }\n    TapSubscriber.prototype._next = function (value) {\n        try {\n            this._tapNext.call(this._context, value);\n        }\n        catch (err) {\n            this.destination.error(err);\n            return;\n        }\n        this.destination.next(value);\n    };\n    TapSubscriber.prototype._error = function (err) {\n        try {\n            this._tapError.call(this._context, err);\n        }\n        catch (err) {\n            this.destination.error(err);\n            return;\n        }\n        this.destination.error(err);\n    };\n    TapSubscriber.prototype._complete = function () {\n        try {\n            this._tapComplete.call(this._context);\n        }\n        catch (err) {\n            this.destination.error(err);\n            return;\n        }\n        return this.destination.complete();\n    };\n    return TapSubscriber;\n}(Subscriber));\n\n/**\n * If the source observable completes without emitting a value, it will emit\n * an error. The error will be created at that time by the optional\n * `errorFactory` argument, otherwise, the error will be {@link ErrorEmpty}.\n *\n * @example\n *\n * const click$ = fromEvent(button, 'click');\n *\n * clicks$.pipe(\n *   takeUntil(timer(1000)),\n *   throwIfEmpty(\n *     () => new Error('the button was not clicked within 1 second')\n *   ),\n * )\n * .subscribe({\n *   next() { console.log('The button was clicked'); },\n *   error(err) { console.error(err); },\n * });\n * @param {Function} [errorFactory] A factory function called to produce the\n * error to be thrown when the source observable completes without emitting a\n * value.\n */\n\nvar __extends$51 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Emits only the first `count` values emitted by the source Observable.\n *\n * <span class=\"informal\">Takes the first `count` values from the source, then\n * completes.</span>\n *\n * <img src=\"./img/take.png\" width=\"100%\">\n *\n * `take` returns an Observable that emits only the first `count` values emitted\n * by the source Observable. If the source emits fewer than `count` values then\n * all of its values are emitted. After that, it completes, regardless if the\n * source completes.\n *\n * @example <caption>Take the first 5 seconds of an infinite 1-second interval Observable</caption>\n * var interval = Rx.Observable.interval(1000);\n * var five = interval.take(5);\n * five.subscribe(x => console.log(x));\n *\n * @see {@link takeLast}\n * @see {@link takeUntil}\n * @see {@link takeWhile}\n * @see {@link skip}\n *\n * @throws {ArgumentOutOfRangeError} When using `take(i)`, it delivers an\n * ArgumentOutOrRangeError to the Observer's `error` callback if `i < 0`.\n *\n * @param {number} count The maximum number of `next` values to emit.\n * @return {Observable<T>} An Observable that emits only the first `count`\n * values emitted by the source Observable, or all of the values from the source\n * if the source emits fewer than `count` values.\n * @method take\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar TakeSubscriber = /** @class */ (function (_super) {\n    __extends$51(TakeSubscriber, _super);\n    function TakeSubscriber(destination, total) {\n        var _this = _super.call(this, destination) || this;\n        _this.total = total;\n        _this.count = 0;\n        return _this;\n    }\n    TakeSubscriber.prototype._next = function (value) {\n        var total = this.total;\n        var count = ++this.count;\n        if (count <= total) {\n            this.destination.next(value);\n            if (count === total) {\n                this.destination.complete();\n                this.unsubscribe();\n            }\n        }\n    };\n    return TakeSubscriber;\n}(Subscriber));\n\n/**\n * Emits the single value at the specified `index` in a sequence of emissions\n * from the source Observable.\n *\n * <span class=\"informal\">Emits only the i-th value, then completes.</span>\n *\n * <img src=\"./img/elementAt.png\" width=\"100%\">\n *\n * `elementAt` returns an Observable that emits the item at the specified\n * `index` in the source Observable, or a default value if that `index` is out\n * of range and the `default` argument is provided. If the `default` argument is\n * not given and the `index` is out of range, the output Observable will emit an\n * `ArgumentOutOfRangeError` error.\n *\n * @example <caption>Emit only the third click event</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var result = clicks.elementAt(2);\n * result.subscribe(x => console.log(x));\n *\n * // Results in:\n * // click 1 = nothing\n * // click 2 = nothing\n * // click 3 = MouseEvent object logged to console\n *\n * @see {@link first}\n * @see {@link last}\n * @see {@link skip}\n * @see {@link single}\n * @see {@link take}\n *\n * @throws {ArgumentOutOfRangeError} When using `elementAt(i)`, it delivers an\n * ArgumentOutOrRangeError to the Observer's `error` callback if `i < 0` or the\n * Observable has completed before emitting the i-th `next` notification.\n *\n * @param {number} index Is the number `i` for the i-th source emission that has\n * happened since the subscription, starting from the number `0`.\n * @param {T} [defaultValue] The default value returned for missing indices.\n * @return {Observable} An Observable that emits a single item, if it is found.\n * Otherwise, will emit the default value if given. If not, then emits an error.\n * @method elementAt\n * @owner Observable\n */\n\nvar __extends$52 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Returns an Observable that emits whether or not every item of the source satisfies the condition specified.\n *\n * @example <caption>A simple example emitting true if all elements are less than 5, false otherwise</caption>\n *  Observable.of(1, 2, 3, 4, 5, 6)\n *     .every(x => x < 5)\n *     .subscribe(x => console.log(x)); // -> false\n *\n * @param {function} predicate A function for determining if an item meets a specified condition.\n * @param {any} [thisArg] Optional object to use for `this` in the callback.\n * @return {Observable} An Observable of booleans that determines if all items of the source Observable meet the condition specified.\n * @method every\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar EverySubscriber = /** @class */ (function (_super) {\n    __extends$52(EverySubscriber, _super);\n    function EverySubscriber(destination, predicate, thisArg, source) {\n        var _this = _super.call(this, destination) || this;\n        _this.predicate = predicate;\n        _this.thisArg = thisArg;\n        _this.source = source;\n        _this.index = 0;\n        _this.thisArg = thisArg || _this;\n        return _this;\n    }\n    EverySubscriber.prototype.notifyComplete = function (everyValueMatch) {\n        this.destination.next(everyValueMatch);\n        this.destination.complete();\n    };\n    EverySubscriber.prototype._next = function (value) {\n        var result = false;\n        try {\n            result = this.predicate.call(this.thisArg, value, this.index++, this.source);\n        }\n        catch (err) {\n            this.destination.error(err);\n            return;\n        }\n        if (!result) {\n            this.notifyComplete(false);\n        }\n    };\n    EverySubscriber.prototype._complete = function () {\n        this.notifyComplete(true);\n    };\n    return EverySubscriber;\n}(Subscriber));\n\nvar __extends$53 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Converts a higher-order Observable into a first-order Observable by dropping\n * inner Observables while the previous inner Observable has not yet completed.\n *\n * <span class=\"informal\">Flattens an Observable-of-Observables by dropping the\n * next inner Observables while the current inner is still executing.</span>\n *\n * <img src=\"./img/exhaust.png\" width=\"100%\">\n *\n * `exhaust` subscribes to an Observable that emits Observables, also known as a\n * higher-order Observable. Each time it observes one of these emitted inner\n * Observables, the output Observable begins emitting the items emitted by that\n * inner Observable. So far, it behaves like {@link mergeAll}. However,\n * `exhaust` ignores every new inner Observable if the previous Observable has\n * not yet completed. Once that one completes, it will accept and flatten the\n * next inner Observable and repeat this process.\n *\n * @example <caption>Run a finite timer for each click, only if there is no currently active timer</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var higherOrder = clicks.map((ev) => Rx.Observable.interval(1000).take(5));\n * var result = higherOrder.exhaust();\n * result.subscribe(x => console.log(x));\n *\n * @see {@link combineAll}\n * @see {@link concatAll}\n * @see {@link switch}\n * @see {@link mergeAll}\n * @see {@link exhaustMap}\n * @see {@link zipAll}\n *\n * @return {Observable} An Observable that takes a source of Observables and propagates the first observable\n * exclusively until it completes before subscribing to the next.\n * @method exhaust\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar SwitchFirstSubscriber = /** @class */ (function (_super) {\n    __extends$53(SwitchFirstSubscriber, _super);\n    function SwitchFirstSubscriber(destination) {\n        var _this = _super.call(this, destination) || this;\n        _this.hasCompleted = false;\n        _this.hasSubscription = false;\n        return _this;\n    }\n    SwitchFirstSubscriber.prototype._next = function (value) {\n        if (!this.hasSubscription) {\n            this.hasSubscription = true;\n            this.add(subscribeToResult(this, value));\n        }\n    };\n    SwitchFirstSubscriber.prototype._complete = function () {\n        this.hasCompleted = true;\n        if (!this.hasSubscription) {\n            this.destination.complete();\n        }\n    };\n    SwitchFirstSubscriber.prototype.notifyComplete = function (innerSub) {\n        this.remove(innerSub);\n        this.hasSubscription = false;\n        if (this.hasCompleted) {\n            this.destination.complete();\n        }\n    };\n    return SwitchFirstSubscriber;\n}(OuterSubscriber));\n\nvar __extends$54 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/* tslint:enable:max-line-length */\n/**\n * Projects each source value to an Observable which is merged in the output\n * Observable only if the previous projected Observable has completed.\n *\n * <span class=\"informal\">Maps each value to an Observable, then flattens all of\n * these inner Observables using {@link exhaust}.</span>\n *\n * <img src=\"./img/exhaustMap.png\" width=\"100%\">\n *\n * Returns an Observable that emits items based on applying a function that you\n * supply to each item emitted by the source Observable, where that function\n * returns an (so-called \"inner\") Observable. When it projects a source value to\n * an Observable, the output Observable begins emitting the items emitted by\n * that projected Observable. However, `exhaustMap` ignores every new projected\n * Observable if the previous projected Observable has not yet completed. Once\n * that one completes, it will accept and flatten the next projected Observable\n * and repeat this process.\n *\n * @example <caption>Run a finite timer for each click, only if there is no currently active timer</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var result = clicks.exhaustMap((ev) => Rx.Observable.interval(1000).take(5));\n * result.subscribe(x => console.log(x));\n *\n * @see {@link concatMap}\n * @see {@link exhaust}\n * @see {@link mergeMap}\n * @see {@link switchMap}\n *\n * @param {function(value: T, ?index: number): ObservableInput} project A function\n * that, when applied to an item emitted by the source Observable, returns an\n * Observable.\n * @return {Observable} An Observable containing projected Observables\n * of each item of the source, ignoring projected Observables that start before\n * their preceding Observable has completed.\n * @method exhaustMap\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar ExhaustMapSubscriber = /** @class */ (function (_super) {\n    __extends$54(ExhaustMapSubscriber, _super);\n    function ExhaustMapSubscriber(destination, project) {\n        var _this = _super.call(this, destination) || this;\n        _this.project = project;\n        _this.hasSubscription = false;\n        _this.hasCompleted = false;\n        _this.index = 0;\n        return _this;\n    }\n    ExhaustMapSubscriber.prototype._next = function (value) {\n        if (!this.hasSubscription) {\n            this.tryNext(value);\n        }\n    };\n    ExhaustMapSubscriber.prototype.tryNext = function (value) {\n        var index = this.index++;\n        var destination = this.destination;\n        try {\n            var result = this.project(value, index);\n            this.hasSubscription = true;\n            this.add(subscribeToResult(this, result, value, index));\n        }\n        catch (err) {\n            destination.error(err);\n        }\n    };\n    ExhaustMapSubscriber.prototype._complete = function () {\n        this.hasCompleted = true;\n        if (!this.hasSubscription) {\n            this.destination.complete();\n        }\n    };\n    ExhaustMapSubscriber.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n        this.destination.next(innerValue);\n    };\n    ExhaustMapSubscriber.prototype.notifyError = function (err) {\n        this.destination.error(err);\n    };\n    ExhaustMapSubscriber.prototype.notifyComplete = function (innerSub) {\n        this.remove(innerSub);\n        this.hasSubscription = false;\n        if (this.hasCompleted) {\n            this.destination.complete();\n        }\n    };\n    return ExhaustMapSubscriber;\n}(OuterSubscriber));\n\nvar __extends$55 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/* tslint:enable:max-line-length */\n/**\n * Recursively projects each source value to an Observable which is merged in\n * the output Observable.\n *\n * <span class=\"informal\">It's similar to {@link mergeMap}, but applies the\n * projection function to every source value as well as every output value.\n * It's recursive.</span>\n *\n * <img src=\"./img/expand.png\" width=\"100%\">\n *\n * Returns an Observable that emits items based on applying a function that you\n * supply to each item emitted by the source Observable, where that function\n * returns an Observable, and then merging those resulting Observables and\n * emitting the results of this merger. *Expand* will re-emit on the output\n * Observable every source value. Then, each output value is given to the\n * `project` function which returns an inner Observable to be merged on the\n * output Observable. Those output values resulting from the projection are also\n * given to the `project` function to produce new output values. This is how\n * *expand* behaves recursively.\n *\n * @example <caption>Start emitting the powers of two on every click, at most 10 of them</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var powersOfTwo = clicks\n *   .mapTo(1)\n *   .expand(x => Rx.Observable.of(2 * x).delay(1000))\n *   .take(10);\n * powersOfTwo.subscribe(x => console.log(x));\n *\n * @see {@link mergeMap}\n * @see {@link mergeScan}\n *\n * @param {function(value: T, index: number) => Observable} project A function\n * that, when applied to an item emitted by the source or the output Observable,\n * returns an Observable.\n * @param {number} [concurrent=Number.POSITIVE_INFINITY] Maximum number of input\n * Observables being subscribed to concurrently.\n * @param {Scheduler} [scheduler=null] The IScheduler to use for subscribing to\n * each projected inner Observable.\n * @return {Observable} An Observable that emits the source values and also\n * result of applying the projection function to each value emitted on the\n * output Observable and and merging the results of the Observables obtained\n * from this transformation.\n * @method expand\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar ExpandSubscriber = /** @class */ (function (_super) {\n    __extends$55(ExpandSubscriber, _super);\n    function ExpandSubscriber(destination, project, concurrent, scheduler) {\n        var _this = _super.call(this, destination) || this;\n        _this.project = project;\n        _this.concurrent = concurrent;\n        _this.scheduler = scheduler;\n        _this.index = 0;\n        _this.active = 0;\n        _this.hasCompleted = false;\n        if (concurrent < Number.POSITIVE_INFINITY) {\n            _this.buffer = [];\n        }\n        return _this;\n    }\n    ExpandSubscriber.dispatch = function (arg) {\n        var subscriber = arg.subscriber, result = arg.result, value = arg.value, index = arg.index;\n        subscriber.subscribeToProjection(result, value, index);\n    };\n    ExpandSubscriber.prototype._next = function (value) {\n        var destination = this.destination;\n        if (destination.closed) {\n            this._complete();\n            return;\n        }\n        var index = this.index++;\n        if (this.active < this.concurrent) {\n            destination.next(value);\n            var result = tryCatch(this.project)(value, index);\n            if (result === errorObject) {\n                destination.error(errorObject.e);\n            }\n            else if (!this.scheduler) {\n                this.subscribeToProjection(result, value, index);\n            }\n            else {\n                var state = { subscriber: this, result: result, value: value, index: index };\n                this.add(this.scheduler.schedule(ExpandSubscriber.dispatch, 0, state));\n            }\n        }\n        else {\n            this.buffer.push(value);\n        }\n    };\n    ExpandSubscriber.prototype.subscribeToProjection = function (result, value, index) {\n        this.active++;\n        this.add(subscribeToResult(this, result, value, index));\n    };\n    ExpandSubscriber.prototype._complete = function () {\n        this.hasCompleted = true;\n        if (this.hasCompleted && this.active === 0) {\n            this.destination.complete();\n        }\n    };\n    ExpandSubscriber.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n        this._next(innerValue);\n    };\n    ExpandSubscriber.prototype.notifyComplete = function (innerSub) {\n        var buffer = this.buffer;\n        this.remove(innerSub);\n        this.active--;\n        if (buffer && buffer.length > 0) {\n            this._next(buffer.shift());\n        }\n        if (this.hasCompleted && this.active === 0) {\n            this.destination.complete();\n        }\n    };\n    return ExpandSubscriber;\n}(OuterSubscriber));\n\nvar __extends$56 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Returns an Observable that mirrors the source Observable, but will call a specified function when\n * the source terminates on complete or error.\n * @param {function} callback Function to be called when source terminates.\n * @return {Observable} An Observable that mirrors the source, but will call the specified function on termination.\n * @method finally\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar FinallySubscriber = /** @class */ (function (_super) {\n    __extends$56(FinallySubscriber, _super);\n    function FinallySubscriber(destination, callback) {\n        var _this = _super.call(this, destination) || this;\n        _this.add(new Subscription(callback));\n        return _this;\n    }\n    return FinallySubscriber;\n}(Subscriber));\n\nvar __extends$57 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Emits only the first value emitted by the source Observable that meets some\n * condition.\n *\n * <span class=\"informal\">Finds the first value that passes some test and emits\n * that.</span>\n *\n * <img src=\"./img/find.png\" width=\"100%\">\n *\n * `find` searches for the first item in the source Observable that matches the\n * specified condition embodied by the `predicate`, and returns the first\n * occurrence in the source. Unlike {@link first}, the `predicate` is required\n * in `find`, and does not emit an error if a valid value is not found.\n *\n * @example <caption>Find and emit the first click that happens on a DIV element</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var result = clicks.find(ev => ev.target.tagName === 'DIV');\n * result.subscribe(x => console.log(x));\n *\n * @see {@link filter}\n * @see {@link first}\n * @see {@link findIndex}\n * @see {@link take}\n *\n * @param {function(value: T, index: number, source: Observable<T>): boolean} predicate\n * A function called with each item to test for condition matching.\n * @param {any} [thisArg] An optional argument to determine the value of `this`\n * in the `predicate` function.\n * @return {Observable<T>} An Observable of the first item that matches the\n * condition.\n * @method find\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar FindValueSubscriber = /** @class */ (function (_super) {\n    __extends$57(FindValueSubscriber, _super);\n    function FindValueSubscriber(destination, predicate, source, yieldIndex, thisArg) {\n        var _this = _super.call(this, destination) || this;\n        _this.predicate = predicate;\n        _this.source = source;\n        _this.yieldIndex = yieldIndex;\n        _this.thisArg = thisArg;\n        _this.index = 0;\n        return _this;\n    }\n    FindValueSubscriber.prototype.notifyComplete = function (value) {\n        var destination = this.destination;\n        destination.next(value);\n        destination.complete();\n    };\n    FindValueSubscriber.prototype._next = function (value) {\n        var _a = this, predicate = _a.predicate, thisArg = _a.thisArg;\n        var index = this.index++;\n        try {\n            var result = predicate.call(thisArg || this, value, index, this.source);\n            if (result) {\n                this.notifyComplete(this.yieldIndex ? index : value);\n            }\n        }\n        catch (err) {\n            this.destination.error(err);\n        }\n    };\n    FindValueSubscriber.prototype._complete = function () {\n        this.notifyComplete(this.yieldIndex ? -1 : undefined);\n    };\n    return FindValueSubscriber;\n}(Subscriber));\n\n/**\n * Emits only the index of the first value emitted by the source Observable that\n * meets some condition.\n *\n * <span class=\"informal\">It's like {@link find}, but emits the index of the\n * found value, not the value itself.</span>\n *\n * <img src=\"./img/findIndex.png\" width=\"100%\">\n *\n * `findIndex` searches for the first item in the source Observable that matches\n * the specified condition embodied by the `predicate`, and returns the\n * (zero-based) index of the first occurrence in the source. Unlike\n * {@link first}, the `predicate` is required in `findIndex`, and does not emit\n * an error if a valid value is not found.\n *\n * @example <caption>Emit the index of first click that happens on a DIV element</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var result = clicks.findIndex(ev => ev.target.tagName === 'DIV');\n * result.subscribe(x => console.log(x));\n *\n * @see {@link filter}\n * @see {@link find}\n * @see {@link first}\n * @see {@link take}\n *\n * @param {function(value: T, index: number, source: Observable<T>): boolean} predicate\n * A function called with each item to test for condition matching.\n * @param {any} [thisArg] An optional argument to determine the value of `this`\n * in the `predicate` function.\n * @return {Observable} An Observable of the index of the first item that\n * matches the condition.\n * @method find\n * @owner Observable\n */\n\n/**\n * Emits only the first value (or the first value that meets some condition)\n * emitted by the source Observable.\n *\n * <span class=\"informal\">Emits only the first value. Or emits only the first\n * value that passes some test.</span>\n *\n * <img src=\"./img/first.png\" width=\"100%\">\n *\n * If called with no arguments, `first` emits the first value of the source\n * Observable, then completes. If called with a `predicate` function, `first`\n * emits the first value of the source that matches the specified condition. It\n * may also take a `resultSelector` function to produce the output value from\n * the input value, and a `defaultValue` to emit in case the source completes\n * before it is able to emit a valid value. Throws an error if `defaultValue`\n * was not provided and a matching element is not found.\n *\n * @example <caption>Emit only the first click that happens on the DOM</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var result = clicks.first();\n * result.subscribe(x => console.log(x));\n *\n * @example <caption>Emits the first click that happens on a DIV</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var result = clicks.first(ev => ev.target.tagName === 'DIV');\n * result.subscribe(x => console.log(x));\n *\n * @see {@link filter}\n * @see {@link find}\n * @see {@link take}\n *\n * @throws {EmptyError} Delivers an EmptyError to the Observer's `error`\n * callback if the Observable completes before any `next` notification was sent.\n *\n * @param {function(value: T, index: number, source: Observable<T>): boolean} [predicate]\n * An optional function called with each item to test for condition matching.\n * @param {R} [defaultValue] The default value emitted in case no valid value\n * was found on the source.\n * @return {Observable<T|R>} An Observable of the first item that matches the\n * condition.\n * @method first\n * @owner Observable\n */\n\nvar __extends$58 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/* tslint:enable:max-line-length */\n/**\n * Groups the items emitted by an Observable according to a specified criterion,\n * and emits these grouped items as `GroupedObservables`, one\n * {@link GroupedObservable} per group.\n *\n * <img src=\"./img/groupBy.png\" width=\"100%\">\n *\n * @example <caption>Group objects by id and return as array</caption>\n * Observable.of<Obj>({id: 1, name: 'aze1'},\n *                    {id: 2, name: 'sf2'},\n *                    {id: 2, name: 'dg2'},\n *                    {id: 1, name: 'erg1'},\n *                    {id: 1, name: 'df1'},\n *                    {id: 2, name: 'sfqfb2'},\n *                    {id: 3, name: 'qfs3'},\n *                    {id: 2, name: 'qsgqsfg2'}\n *     )\n *     .groupBy(p => p.id)\n *     .flatMap( (group$) => group$.reduce((acc, cur) => [...acc, cur], []))\n *     .subscribe(p => console.log(p));\n *\n * // displays:\n * // [ { id: 1, name: 'aze1' },\n * //   { id: 1, name: 'erg1' },\n * //   { id: 1, name: 'df1' } ]\n * //\n * // [ { id: 2, name: 'sf2' },\n * //   { id: 2, name: 'dg2' },\n * //   { id: 2, name: 'sfqfb2' },\n * //   { id: 2, name: 'qsgqsfg2' } ]\n * //\n * // [ { id: 3, name: 'qfs3' } ]\n *\n * @example <caption>Pivot data on the id field</caption>\n * Observable.of<Obj>({id: 1, name: 'aze1'},\n *                    {id: 2, name: 'sf2'},\n *                    {id: 2, name: 'dg2'},\n *                    {id: 1, name: 'erg1'},\n *                    {id: 1, name: 'df1'},\n *                    {id: 2, name: 'sfqfb2'},\n *                    {id: 3, name: 'qfs1'},\n *                    {id: 2, name: 'qsgqsfg2'}\n *                   )\n *     .groupBy(p => p.id, p => p.name)\n *     .flatMap( (group$) => group$.reduce((acc, cur) => [...acc, cur], [\"\" + group$.key]))\n *     .map(arr => ({'id': parseInt(arr[0]), 'values': arr.slice(1)}))\n *     .subscribe(p => console.log(p));\n *\n * // displays:\n * // { id: 1, values: [ 'aze1', 'erg1', 'df1' ] }\n * // { id: 2, values: [ 'sf2', 'dg2', 'sfqfb2', 'qsgqsfg2' ] }\n * // { id: 3, values: [ 'qfs1' ] }\n *\n * @param {function(value: T): K} keySelector A function that extracts the key\n * for each item.\n * @param {function(value: T): R} [elementSelector] A function that extracts the\n * return element for each item.\n * @param {function(grouped: GroupedObservable<K,R>): Observable<any>} [durationSelector]\n * A function that returns an Observable to determine how long each group should\n * exist.\n * @return {Observable<GroupedObservable<K,R>>} An Observable that emits\n * GroupedObservables, each of which corresponds to a unique key value and each\n * of which emits those items from the source Observable that share that key\n * value.\n * @method groupBy\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar GroupBySubscriber = /** @class */ (function (_super) {\n    __extends$58(GroupBySubscriber, _super);\n    function GroupBySubscriber(destination, keySelector, elementSelector, durationSelector, subjectSelector) {\n        var _this = _super.call(this, destination) || this;\n        _this.keySelector = keySelector;\n        _this.elementSelector = elementSelector;\n        _this.durationSelector = durationSelector;\n        _this.subjectSelector = subjectSelector;\n        _this.groups = null;\n        _this.attemptedToUnsubscribe = false;\n        _this.count = 0;\n        return _this;\n    }\n    GroupBySubscriber.prototype._next = function (value) {\n        var key;\n        try {\n            key = this.keySelector(value);\n        }\n        catch (err) {\n            this.error(err);\n            return;\n        }\n        this._group(value, key);\n    };\n    GroupBySubscriber.prototype._group = function (value, key) {\n        var groups = this.groups;\n        if (!groups) {\n            groups = this.groups = new Map();\n        }\n        var group = groups.get(key);\n        var element;\n        if (this.elementSelector) {\n            try {\n                element = this.elementSelector(value);\n            }\n            catch (err) {\n                this.error(err);\n            }\n        }\n        else {\n            element = value;\n        }\n        if (!group) {\n            group = (this.subjectSelector ? this.subjectSelector() : new Subject());\n            groups.set(key, group);\n            var groupedObservable = new GroupedObservable(key, group, this);\n            this.destination.next(groupedObservable);\n            if (this.durationSelector) {\n                var duration = void 0;\n                try {\n                    duration = this.durationSelector(new GroupedObservable(key, group));\n                }\n                catch (err) {\n                    this.error(err);\n                    return;\n                }\n                this.add(duration.subscribe(new GroupDurationSubscriber(key, group, this)));\n            }\n        }\n        if (!group.closed) {\n            group.next(element);\n        }\n    };\n    GroupBySubscriber.prototype._error = function (err) {\n        var groups = this.groups;\n        if (groups) {\n            groups.forEach(function (group, key) {\n                group.error(err);\n            });\n            groups.clear();\n        }\n        this.destination.error(err);\n    };\n    GroupBySubscriber.prototype._complete = function () {\n        var groups = this.groups;\n        if (groups) {\n            groups.forEach(function (group, key) {\n                group.complete();\n            });\n            groups.clear();\n        }\n        this.destination.complete();\n    };\n    GroupBySubscriber.prototype.removeGroup = function (key) {\n        this.groups.delete(key);\n    };\n    GroupBySubscriber.prototype.unsubscribe = function () {\n        if (!this.closed) {\n            this.attemptedToUnsubscribe = true;\n            if (this.count === 0) {\n                _super.prototype.unsubscribe.call(this);\n            }\n        }\n    };\n    return GroupBySubscriber;\n}(Subscriber));\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar GroupDurationSubscriber = /** @class */ (function (_super) {\n    __extends$58(GroupDurationSubscriber, _super);\n    function GroupDurationSubscriber(key, group, parent) {\n        var _this = _super.call(this, group) || this;\n        _this.key = key;\n        _this.group = group;\n        _this.parent = parent;\n        return _this;\n    }\n    GroupDurationSubscriber.prototype._next = function (value) {\n        this.complete();\n    };\n    /** @deprecated This is an internal implementation detail, do not use. */\n    GroupDurationSubscriber.prototype._unsubscribe = function () {\n        var _a = this, parent = _a.parent, key = _a.key;\n        this.key = this.parent = null;\n        if (parent) {\n            parent.removeGroup(key);\n        }\n    };\n    return GroupDurationSubscriber;\n}(Subscriber));\n/**\n * An Observable representing values belonging to the same group represented by\n * a common key. The values emitted by a GroupedObservable come from the source\n * Observable. The common key is available as the field `key` on a\n * GroupedObservable instance.\n *\n * @class GroupedObservable<K, T>\n */\nvar GroupedObservable = /** @class */ (function (_super) {\n    __extends$58(GroupedObservable, _super);\n    function GroupedObservable(key, groupSubject, refCountSubscription) {\n        var _this = _super.call(this) || this;\n        _this.key = key;\n        _this.groupSubject = groupSubject;\n        _this.refCountSubscription = refCountSubscription;\n        return _this;\n    }\n    /** @deprecated This is an internal implementation detail, do not use. */\n    GroupedObservable.prototype._subscribe = function (subscriber) {\n        var subscription = new Subscription();\n        var _a = this, refCountSubscription = _a.refCountSubscription, groupSubject = _a.groupSubject;\n        if (refCountSubscription && !refCountSubscription.closed) {\n            subscription.add(new InnerRefCountSubscription(refCountSubscription));\n        }\n        subscription.add(groupSubject.subscribe(subscriber));\n        return subscription;\n    };\n    return GroupedObservable;\n}(Observable));\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar InnerRefCountSubscription = /** @class */ (function (_super) {\n    __extends$58(InnerRefCountSubscription, _super);\n    function InnerRefCountSubscription(parent) {\n        var _this = _super.call(this) || this;\n        _this.parent = parent;\n        parent.count++;\n        return _this;\n    }\n    InnerRefCountSubscription.prototype.unsubscribe = function () {\n        var parent = this.parent;\n        if (!parent.closed && !this.closed) {\n            _super.prototype.unsubscribe.call(this);\n            parent.count -= 1;\n            if (parent.count === 0 && parent.attemptedToUnsubscribe) {\n                parent.unsubscribe();\n            }\n        }\n    };\n    return InnerRefCountSubscription;\n}(Subscription));\n\nvar __extends$59 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Ignores all items emitted by the source Observable and only passes calls of `complete` or `error`.\n *\n * <img src=\"./img/ignoreElements.png\" width=\"100%\">\n *\n * @return {Observable} An empty Observable that only calls `complete`\n * or `error`, based on which one is called by the source Observable.\n * @method ignoreElements\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar IgnoreElementsSubscriber = /** @class */ (function (_super) {\n    __extends$59(IgnoreElementsSubscriber, _super);\n    function IgnoreElementsSubscriber() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    IgnoreElementsSubscriber.prototype._next = function (unused) {\n        // Do nothing\n    };\n    return IgnoreElementsSubscriber;\n}(Subscriber));\n\nvar __extends$60 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar IsEmptySubscriber = /** @class */ (function (_super) {\n    __extends$60(IsEmptySubscriber, _super);\n    function IsEmptySubscriber(destination) {\n        return _super.call(this, destination) || this;\n    }\n    IsEmptySubscriber.prototype.notifyComplete = function (isEmpty) {\n        var destination = this.destination;\n        destination.next(isEmpty);\n        destination.complete();\n    };\n    IsEmptySubscriber.prototype._next = function (value) {\n        this.notifyComplete(false);\n    };\n    IsEmptySubscriber.prototype._complete = function () {\n        this.notifyComplete(true);\n    };\n    return IsEmptySubscriber;\n}(Subscriber));\n\nvar __extends$61 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Emits only the last `count` values emitted by the source Observable.\n *\n * <span class=\"informal\">Remembers the latest `count` values, then emits those\n * only when the source completes.</span>\n *\n * <img src=\"./img/takeLast.png\" width=\"100%\">\n *\n * `takeLast` returns an Observable that emits at most the last `count` values\n * emitted by the source Observable. If the source emits fewer than `count`\n * values then all of its values are emitted. This operator must wait until the\n * `complete` notification emission from the source in order to emit the `next`\n * values on the output Observable, because otherwise it is impossible to know\n * whether or not more values will be emitted on the source. For this reason,\n * all values are emitted synchronously, followed by the complete notification.\n *\n * @example <caption>Take the last 3 values of an Observable with many values</caption>\n * var many = Rx.Observable.range(1, 100);\n * var lastThree = many.pipe(takeLast(3));\n * lastThree.subscribe(x => console.log(x));\n *\n * @see {@link take}\n * @see {@link takeUntil}\n * @see {@link takeWhile}\n * @see {@link skip}\n *\n * @throws {ArgumentOutOfRangeError} When using `takeLast(i)`, it delivers an\n * ArgumentOutOrRangeError to the Observer's `error` callback if `i < 0`.\n *\n * @param {number} count The maximum number of values to emit from the end of\n * the sequence of values emitted by the source Observable.\n * @return {Observable<T>} An Observable that emits at most the last count\n * values emitted by the source Observable.\n * @method takeLast\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar TakeLastSubscriber = /** @class */ (function (_super) {\n    __extends$61(TakeLastSubscriber, _super);\n    function TakeLastSubscriber(destination, total) {\n        var _this = _super.call(this, destination) || this;\n        _this.total = total;\n        _this.ring = new Array();\n        _this.count = 0;\n        return _this;\n    }\n    TakeLastSubscriber.prototype._next = function (value) {\n        var ring = this.ring;\n        var total = this.total;\n        var count = this.count++;\n        if (ring.length < total) {\n            ring.push(value);\n        }\n        else {\n            var index = count % total;\n            ring[index] = value;\n        }\n    };\n    TakeLastSubscriber.prototype._complete = function () {\n        var destination = this.destination;\n        var count = this.count;\n        if (count > 0) {\n            var total = this.count >= this.total ? this.total : this.count;\n            var ring = this.ring;\n            for (var i = 0; i < total; i++) {\n                var idx = (count++) % total;\n                destination.next(ring[idx]);\n            }\n        }\n        destination.complete();\n    };\n    return TakeLastSubscriber;\n}(Subscriber));\n\n/**\n * Returns an Observable that emits only the last item emitted by the source Observable.\n * It optionally takes a predicate function as a parameter, in which case, rather than emitting\n * the last item from the source Observable, the resulting Observable will emit the last item\n * from the source Observable that satisfies the predicate.\n *\n * <img src=\"./img/last.png\" width=\"100%\">\n *\n * @throws {EmptyError} Delivers an EmptyError to the Observer's `error`\n * callback if the Observable completes before any `next` notification was sent.\n * @param {function} [predicate] - The condition any source emitted item has to satisfy.\n * @param {any} [defaultValue] - An optional default value to provide if last\n * predicate isn't met or no values were emitted.\n * @return {Observable} An Observable that emits only the last item satisfying the given condition\n * from the source, or an NoSuchElementException if no such items are emitted.\n * @throws - Throws if no items that match the predicate are emitted by the source Observable.\n */\n\nvar __extends$62 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Emits the given constant value on the output Observable every time the source\n * Observable emits a value.\n *\n * <span class=\"informal\">Like {@link map}, but it maps every source value to\n * the same output value every time.</span>\n *\n * <img src=\"./img/mapTo.png\" width=\"100%\">\n *\n * Takes a constant `value` as argument, and emits that whenever the source\n * Observable emits a value. In other words, ignores the actual source value,\n * and simply uses the emission moment to know when to emit the given `value`.\n *\n * @example <caption>Map every click to the string 'Hi'</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var greetings = clicks.mapTo('Hi');\n * greetings.subscribe(x => console.log(x));\n *\n * @see {@link map}\n *\n * @param {any} value The value to map each source value to.\n * @return {Observable} An Observable that emits the given `value` every time\n * the source Observable emits something.\n * @method mapTo\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar MapToSubscriber = /** @class */ (function (_super) {\n    __extends$62(MapToSubscriber, _super);\n    function MapToSubscriber(destination, value) {\n        var _this = _super.call(this, destination) || this;\n        _this.value = value;\n        return _this;\n    }\n    MapToSubscriber.prototype._next = function (x) {\n        this.destination.next(this.value);\n    };\n    return MapToSubscriber;\n}(Subscriber));\n\nvar __extends$63 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Represents all of the notifications from the source Observable as `next`\n * emissions marked with their original types within {@link Notification}\n * objects.\n *\n * <span class=\"informal\">Wraps `next`, `error` and `complete` emissions in\n * {@link Notification} objects, emitted as `next` on the output Observable.\n * </span>\n *\n * <img src=\"./img/materialize.png\" width=\"100%\">\n *\n * `materialize` returns an Observable that emits a `next` notification for each\n * `next`, `error`, or `complete` emission of the source Observable. When the\n * source Observable emits `complete`, the output Observable will emit `next` as\n * a Notification of type \"complete\", and then it will emit `complete` as well.\n * When the source Observable emits `error`, the output will emit `next` as a\n * Notification of type \"error\", and then `complete`.\n *\n * This operator is useful for producing metadata of the source Observable, to\n * be consumed as `next` emissions. Use it in conjunction with\n * {@link dematerialize}.\n *\n * @example <caption>Convert a faulty Observable to an Observable of Notifications</caption>\n * var letters = Rx.Observable.of('a', 'b', 13, 'd');\n * var upperCase = letters.map(x => x.toUpperCase());\n * var materialized = upperCase.materialize();\n * materialized.subscribe(x => console.log(x));\n *\n * // Results in the following:\n * // - Notification {kind: \"N\", value: \"A\", error: undefined, hasValue: true}\n * // - Notification {kind: \"N\", value: \"B\", error: undefined, hasValue: true}\n * // - Notification {kind: \"E\", value: undefined, error: TypeError:\n * //   x.toUpperCase is not a function at MapSubscriber.letters.map.x\n * //   [as project] (http://1, hasValue: false}\n *\n * @see {@link Notification}\n * @see {@link dematerialize}\n *\n * @return {Observable<Notification<T>>} An Observable that emits\n * {@link Notification} objects that wrap the original emissions from the source\n * Observable with metadata.\n * @method materialize\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar MaterializeSubscriber = /** @class */ (function (_super) {\n    __extends$63(MaterializeSubscriber, _super);\n    function MaterializeSubscriber(destination) {\n        return _super.call(this, destination) || this;\n    }\n    MaterializeSubscriber.prototype._next = function (value) {\n        this.destination.next(Notification.createNext(value));\n    };\n    MaterializeSubscriber.prototype._error = function (err) {\n        var destination = this.destination;\n        destination.next(Notification.createError(err));\n        destination.complete();\n    };\n    MaterializeSubscriber.prototype._complete = function () {\n        var destination = this.destination;\n        destination.next(Notification.createComplete());\n        destination.complete();\n    };\n    return MaterializeSubscriber;\n}(Subscriber));\n\nvar __extends$64 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/* tslint:enable:max-line-length */\n/**\n * Applies an accumulator function over the source Observable, and returns each\n * intermediate result, with an optional seed value.\n *\n * <span class=\"informal\">It's like {@link reduce}, but emits the current\n * accumulation whenever the source emits a value.</span>\n *\n * <img src=\"./img/scan.png\" width=\"100%\">\n *\n * Combines together all values emitted on the source, using an accumulator\n * function that knows how to join a new source value into the accumulation from\n * the past. Is similar to {@link reduce}, but emits the intermediate\n * accumulations.\n *\n * Returns an Observable that applies a specified `accumulator` function to each\n * item emitted by the source Observable. If a `seed` value is specified, then\n * that value will be used as the initial value for the accumulator. If no seed\n * value is specified, the first item of the source is used as the seed.\n *\n * @example <caption>Count the number of click events</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var ones = clicks.mapTo(1);\n * var seed = 0;\n * var count = ones.scan((acc, one) => acc + one, seed);\n * count.subscribe(x => console.log(x));\n *\n * @see {@link expand}\n * @see {@link mergeScan}\n * @see {@link reduce}\n *\n * @param {function(acc: R, value: T, index: number): R} accumulator\n * The accumulator function called on each source value.\n * @param {T|R} [seed] The initial accumulation value.\n * @return {Observable<R>} An observable of the accumulated values.\n * @method scan\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar ScanSubscriber = /** @class */ (function (_super) {\n    __extends$64(ScanSubscriber, _super);\n    function ScanSubscriber(destination, accumulator, _seed, hasSeed) {\n        var _this = _super.call(this, destination) || this;\n        _this.accumulator = accumulator;\n        _this._seed = _seed;\n        _this.hasSeed = hasSeed;\n        _this.index = 0;\n        return _this;\n    }\n    Object.defineProperty(ScanSubscriber.prototype, \"seed\", {\n        get: function () {\n            return this._seed;\n        },\n        set: function (value) {\n            this.hasSeed = true;\n            this._seed = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    ScanSubscriber.prototype._next = function (value) {\n        if (!this.hasSeed) {\n            this.seed = value;\n            this.destination.next(value);\n        }\n        else {\n            return this._tryNext(value);\n        }\n    };\n    ScanSubscriber.prototype._tryNext = function (value) {\n        var index = this.index++;\n        var result;\n        try {\n            result = this.accumulator(this.seed, value, index);\n        }\n        catch (err) {\n            this.destination.error(err);\n        }\n        this.seed = result;\n        this.destination.next(result);\n    };\n    return ScanSubscriber;\n}(Subscriber));\n\n/* tslint:enable:max-line-length */\n/**\n * Applies an accumulator function over the source Observable, and returns the\n * accumulated result when the source completes, given an optional seed value.\n *\n * <span class=\"informal\">Combines together all values emitted on the source,\n * using an accumulator function that knows how to join a new source value into\n * the accumulation from the past.</span>\n *\n * <img src=\"./img/reduce.png\" width=\"100%\">\n *\n * Like\n * [Array.prototype.reduce()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/reduce),\n * `reduce` applies an `accumulator` function against an accumulation and each\n * value of the source Observable (from the past) to reduce it to a single\n * value, emitted on the output Observable. Note that `reduce` will only emit\n * one value, only when the source Observable completes. It is equivalent to\n * applying operator {@link scan} followed by operator {@link last}.\n *\n * Returns an Observable that applies a specified `accumulator` function to each\n * item emitted by the source Observable. If a `seed` value is specified, then\n * that value will be used as the initial value for the accumulator. If no seed\n * value is specified, the first item of the source is used as the seed.\n *\n * @example <caption>Count the number of click events that happened in 5 seconds</caption>\n * var clicksInFiveSeconds = Rx.Observable.fromEvent(document, 'click')\n *   .takeUntil(Rx.Observable.interval(5000));\n * var ones = clicksInFiveSeconds.mapTo(1);\n * var seed = 0;\n * var count = ones.reduce((acc, one) => acc + one, seed);\n * count.subscribe(x => console.log(x));\n *\n * @see {@link count}\n * @see {@link expand}\n * @see {@link mergeScan}\n * @see {@link scan}\n *\n * @param {function(acc: R, value: T, index: number): R} accumulator The accumulator function\n * called on each source value.\n * @param {R} [seed] The initial accumulation value.\n * @return {Observable<R>} An Observable that emits a single value that is the\n * result of accumulating the values emitted by the source Observable.\n * @method reduce\n * @owner Observable\n */\n\n/**\n * The Max operator operates on an Observable that emits numbers (or items that can be compared with a provided function),\n * and when source Observable completes it emits a single item: the item with the largest value.\n *\n * <img src=\"./img/max.png\" width=\"100%\">\n *\n * @example <caption>Get the maximal value of a series of numbers</caption>\n * Rx.Observable.of(5, 4, 7, 2, 8)\n *   .max()\n *   .subscribe(x => console.log(x)); // -> 8\n *\n * @example <caption>Use a comparer function to get the maximal item</caption>\n * interface Person {\n *   age: number,\n *   name: string\n * }\n * Observable.of<Person>({age: 7, name: 'Foo'},\n *                       {age: 5, name: 'Bar'},\n *                       {age: 9, name: 'Beer'})\n *           .max<Person>((a: Person, b: Person) => a.age < b.age ? -1 : 1)\n *           .subscribe((x: Person) => console.log(x.name)); // -> 'Beer'\n * }\n *\n * @see {@link min}\n *\n * @param {Function} [comparer] - Optional comparer function that it will use instead of its default to compare the\n * value of two items.\n * @return {Observable} An Observable that emits item with the largest value.\n * @method max\n * @owner Observable\n */\n\nvar __read$10 = (undefined && undefined.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spread$10 = (undefined && undefined.__spread) || function () {\n    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read$10(arguments[i]));\n    return ar;\n};\n/* tslint:enable:max-line-length */\n/**\n * @deprecated Deprecated in favor of static merge.\n */\n\n/* tslint:enable:max-line-length */\n/**\n * Projects each source value to the same Observable which is merged multiple\n * times in the output Observable.\n *\n * <span class=\"informal\">It's like {@link mergeMap}, but maps each value always\n * to the same inner Observable.</span>\n *\n * <img src=\"./img/mergeMapTo.png\" width=\"100%\">\n *\n * Maps each source value to the given Observable `innerObservable` regardless\n * of the source value, and then merges those resulting Observables into one\n * single Observable, which is the output Observable.\n *\n * @example <caption>For each click event, start an interval Observable ticking every 1 second</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var result = clicks.mergeMapTo(Rx.Observable.interval(1000));\n * result.subscribe(x => console.log(x));\n *\n * @see {@link concatMapTo}\n * @see {@link merge}\n * @see {@link mergeAll}\n * @see {@link mergeMap}\n * @see {@link mergeScan}\n * @see {@link switchMapTo}\n *\n * @param {ObservableInput} innerObservable An Observable to replace each value from\n * the source Observable.\n * @param {number} [concurrent=Number.POSITIVE_INFINITY] Maximum number of input\n * Observables being subscribed to concurrently.\n * @return {Observable} An Observable that emits items from the given\n * `innerObservable`\n * @method mergeMapTo\n * @owner Observable\n */\n\nvar __extends$65 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Applies an accumulator function over the source Observable where the\n * accumulator function itself returns an Observable, then each intermediate\n * Observable returned is merged into the output Observable.\n *\n * <span class=\"informal\">It's like {@link scan}, but the Observables returned\n * by the accumulator are merged into the outer Observable.</span>\n *\n * @example <caption>Count the number of click events</caption>\n * const click$ = Rx.Observable.fromEvent(document, 'click');\n * const one$ = click$.mapTo(1);\n * const seed = 0;\n * const count$ = one$.mergeScan((acc, one) => Rx.Observable.of(acc + one), seed);\n * count$.subscribe(x => console.log(x));\n *\n * // Results:\n * 1\n * 2\n * 3\n * 4\n * // ...and so on for each click\n *\n * @param {function(acc: R, value: T): Observable<R>} accumulator\n * The accumulator function called on each source value.\n * @param seed The initial accumulation value.\n * @param {number} [concurrent=Number.POSITIVE_INFINITY] Maximum number of\n * input Observables being subscribed to concurrently.\n * @return {Observable<R>} An observable of the accumulated values.\n * @method mergeScan\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar MergeScanSubscriber = /** @class */ (function (_super) {\n    __extends$65(MergeScanSubscriber, _super);\n    function MergeScanSubscriber(destination, accumulator, acc, concurrent) {\n        var _this = _super.call(this, destination) || this;\n        _this.accumulator = accumulator;\n        _this.acc = acc;\n        _this.concurrent = concurrent;\n        _this.hasValue = false;\n        _this.hasCompleted = false;\n        _this.buffer = [];\n        _this.active = 0;\n        _this.index = 0;\n        return _this;\n    }\n    MergeScanSubscriber.prototype._next = function (value) {\n        if (this.active < this.concurrent) {\n            var index = this.index++;\n            var ish = tryCatch(this.accumulator)(this.acc, value);\n            var destination = this.destination;\n            if (ish === errorObject) {\n                destination.error(errorObject.e);\n            }\n            else {\n                this.active++;\n                this._innerSub(ish, value, index);\n            }\n        }\n        else {\n            this.buffer.push(value);\n        }\n    };\n    MergeScanSubscriber.prototype._innerSub = function (ish, value, index) {\n        this.add(subscribeToResult(this, ish, value, index));\n    };\n    MergeScanSubscriber.prototype._complete = function () {\n        this.hasCompleted = true;\n        if (this.active === 0 && this.buffer.length === 0) {\n            if (this.hasValue === false) {\n                this.destination.next(this.acc);\n            }\n            this.destination.complete();\n        }\n    };\n    MergeScanSubscriber.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n        var destination = this.destination;\n        this.acc = innerValue;\n        this.hasValue = true;\n        destination.next(innerValue);\n    };\n    MergeScanSubscriber.prototype.notifyComplete = function (innerSub) {\n        var buffer = this.buffer;\n        this.remove(innerSub);\n        this.active--;\n        if (buffer.length > 0) {\n            this._next(buffer.shift());\n        }\n        else if (this.active === 0 && this.hasCompleted) {\n            if (this.hasValue === false) {\n                this.destination.next(this.acc);\n            }\n            this.destination.complete();\n        }\n    };\n    return MergeScanSubscriber;\n}(OuterSubscriber));\n\n/**\n * The Min operator operates on an Observable that emits numbers (or items that can be compared with a provided function),\n * and when source Observable completes it emits a single item: the item with the smallest value.\n *\n * <img src=\"./img/min.png\" width=\"100%\">\n *\n * @example <caption>Get the minimal value of a series of numbers</caption>\n * Rx.Observable.of(5, 4, 7, 2, 8)\n *   .min()\n *   .subscribe(x => console.log(x)); // -> 2\n *\n * @example <caption>Use a comparer function to get the minimal item</caption>\n * interface Person {\n *   age: number,\n *   name: string\n * }\n * Observable.of<Person>({age: 7, name: 'Foo'},\n *                       {age: 5, name: 'Bar'},\n *                       {age: 9, name: 'Beer'})\n *           .min<Person>( (a: Person, b: Person) => a.age < b.age ? -1 : 1)\n *           .subscribe((x: Person) => console.log(x.name)); // -> 'Bar'\n * }\n *\n * @see {@link max}\n *\n * @param {Function} [comparer] - Optional comparer function that it will use instead of its default to compare the\n * value of two items.\n * @return {Observable<R>} An Observable that emits item with the smallest value.\n * @method min\n * @owner Observable\n */\n\n/* tslint:enable:max-line-length */\n/**\n * Returns an Observable that emits the results of invoking a specified selector on items\n * emitted by a ConnectableObservable that shares a single subscription to the underlying stream.\n *\n * <img src=\"./img/multicast.png\" width=\"100%\">\n *\n * @param {Function|Subject} subjectOrSubjectFactory - Factory function to create an intermediate subject through\n * which the source sequence's elements will be multicast to the selector function\n * or Subject to push source elements into.\n * @param {Function} [selector] - Optional selector function that can use the multicasted source stream\n * as many times as needed, without causing multiple subscriptions to the source stream.\n * Subscribers to the given source will receive all notifications of the source from the\n * time of the subscription forward.\n * @return {Observable} An Observable that emits the results of invoking the selector\n * on the items emitted by a `ConnectableObservable` that shares a single subscription to\n * the underlying stream.\n * @method multicast\n * @owner Observable\n */\nfunction multicast(subjectOrSubjectFactory, selector) {\n    return function multicastOperatorFunction(source) {\n        var subjectFactory;\n        if (typeof subjectOrSubjectFactory === 'function') {\n            subjectFactory = subjectOrSubjectFactory;\n        }\n        else {\n            subjectFactory = function subjectFactory() {\n                return subjectOrSubjectFactory;\n            };\n        }\n        if (typeof selector === 'function') {\n            return source.lift(new MulticastOperator(subjectFactory, selector));\n        }\n        var connectable = Object.create(source, connectableObservableDescriptor);\n        connectable.source = source;\n        connectable.subjectFactory = subjectFactory;\n        return connectable;\n    };\n}\nvar MulticastOperator = /** @class */ (function () {\n    function MulticastOperator(subjectFactory, selector) {\n        this.subjectFactory = subjectFactory;\n        this.selector = selector;\n    }\n    MulticastOperator.prototype.call = function (subscriber, source) {\n        var selector = this.selector;\n        var subject = this.subjectFactory();\n        var subscription = selector(subject).subscribe(subscriber);\n        subscription.add(source.subscribe(subject));\n        return subscription;\n    };\n    return MulticastOperator;\n}());\n\nvar __extends$66 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/* tslint:enable:max-line-length */\n/**\n * When any of the provided Observable emits an complete or error notification, it immediately subscribes to the next one\n * that was passed.\n *\n * <span class=\"informal\">Execute series of Observables no matter what, even if it means swallowing errors.</span>\n *\n * <img src=\"./img/onErrorResumeNext.png\" width=\"100%\">\n *\n * `onErrorResumeNext` is an operator that accepts a series of Observables, provided either directly as\n * arguments or as an array. If no single Observable is provided, returned Observable will simply behave the same\n * as the source.\n *\n * `onErrorResumeNext` returns an Observable that starts by subscribing and re-emitting values from the source Observable.\n * When its stream of values ends - no matter if Observable completed or emitted an error - `onErrorResumeNext`\n * will subscribe to the first Observable that was passed as an argument to the method. It will start re-emitting\n * its values as well and - again - when that stream ends, `onErrorResumeNext` will proceed to subscribing yet another\n * Observable in provided series, no matter if previous Observable completed or ended with an error. This will\n * be happening until there is no more Observables left in the series, at which point returned Observable will\n * complete - even if the last subscribed stream ended with an error.\n *\n * `onErrorResumeNext` can be therefore thought of as version of {@link concat} operator, which is more permissive\n * when it comes to the errors emitted by its input Observables. While `concat` subscribes to the next Observable\n * in series only if previous one successfully completed, `onErrorResumeNext` subscribes even if it ended with\n * an error.\n *\n * Note that you do not get any access to errors emitted by the Observables. In particular do not\n * expect these errors to appear in error callback passed to {@link subscribe}. If you want to take\n * specific actions based on what error was emitted by an Observable, you should try out {@link catch} instead.\n *\n *\n * @example <caption>Subscribe to the next Observable after map fails</caption>\n * Rx.Observable.of(1, 2, 3, 0)\n *   .map(x => {\n *       if (x === 0) { throw Error(); }\n         return 10 / x;\n *   })\n *   .onErrorResumeNext(Rx.Observable.of(1, 2, 3))\n *   .subscribe(\n *     val => console.log(val),\n *     err => console.log(err),          // Will never be called.\n *     () => console.log('that\\'s it!')\n *   );\n *\n * // Logs:\n * // 10\n * // 5\n * // 3.3333333333333335\n * // 1\n * // 2\n * // 3\n * // \"that's it!\"\n *\n * @see {@link concat}\n * @see {@link catch}\n *\n * @param {...ObservableInput} observables Observables passed either directly or as an array.\n * @return {Observable} An Observable that emits values from source Observable, but - if it errors - subscribes\n * to the next passed Observable and so on, until it completes or runs out of Observables.\n * @method onErrorResumeNext\n * @owner Observable\n */\n\n/* tslint:enable:max-line-length */\n\nvar OnErrorResumeNextSubscriber = /** @class */ (function (_super) {\n    __extends$66(OnErrorResumeNextSubscriber, _super);\n    function OnErrorResumeNextSubscriber(destination, nextSources) {\n        var _this = _super.call(this, destination) || this;\n        _this.destination = destination;\n        _this.nextSources = nextSources;\n        return _this;\n    }\n    OnErrorResumeNextSubscriber.prototype.notifyError = function (error, innerSub) {\n        this.subscribeToNextSource();\n    };\n    OnErrorResumeNextSubscriber.prototype.notifyComplete = function (innerSub) {\n        this.subscribeToNextSource();\n    };\n    OnErrorResumeNextSubscriber.prototype._error = function (err) {\n        this.subscribeToNextSource();\n    };\n    OnErrorResumeNextSubscriber.prototype._complete = function () {\n        this.subscribeToNextSource();\n    };\n    OnErrorResumeNextSubscriber.prototype.subscribeToNextSource = function () {\n        var next = this.nextSources.shift();\n        if (next) {\n            this.add(subscribeToResult(this, next));\n        }\n        else {\n            this.destination.complete();\n        }\n    };\n    return OnErrorResumeNextSubscriber;\n}(OuterSubscriber));\n\nvar __extends$67 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Groups pairs of consecutive emissions together and emits them as an array of\n * two values.\n *\n * <span class=\"informal\">Puts the current value and previous value together as\n * an array, and emits that.</span>\n *\n * <img src=\"./img/pairwise.png\" width=\"100%\">\n *\n * The Nth emission from the source Observable will cause the output Observable\n * to emit an array [(N-1)th, Nth] of the previous and the current value, as a\n * pair. For this reason, `pairwise` emits on the second and subsequent\n * emissions from the source Observable, but not on the first emission, because\n * there is no previous value in that case.\n *\n * @example <caption>On every click (starting from the second), emit the relative distance to the previous click</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var pairs = clicks.pairwise();\n * var distance = pairs.map(pair => {\n *   var x0 = pair[0].clientX;\n *   var y0 = pair[0].clientY;\n *   var x1 = pair[1].clientX;\n *   var y1 = pair[1].clientY;\n *   return Math.sqrt(Math.pow(x0 - x1, 2) + Math.pow(y0 - y1, 2));\n * });\n * distance.subscribe(x => console.log(x));\n *\n * @see {@link buffer}\n * @see {@link bufferCount}\n *\n * @return {Observable<Array<T>>} An Observable of pairs (as arrays) of\n * consecutive values from the source Observable.\n * @method pairwise\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar PairwiseSubscriber = /** @class */ (function (_super) {\n    __extends$67(PairwiseSubscriber, _super);\n    function PairwiseSubscriber(destination) {\n        var _this = _super.call(this, destination) || this;\n        _this.hasPrev = false;\n        return _this;\n    }\n    PairwiseSubscriber.prototype._next = function (value) {\n        if (this.hasPrev) {\n            this.destination.next([this.prev, value]);\n        }\n        else {\n            this.hasPrev = true;\n        }\n        this.prev = value;\n    };\n    return PairwiseSubscriber;\n}(Subscriber));\n\n/**\n * Splits the source Observable into two, one with values that satisfy a\n * predicate, and another with values that don't satisfy the predicate.\n *\n * <span class=\"informal\">It's like {@link filter}, but returns two Observables:\n * one like the output of {@link filter}, and the other with values that did not\n * pass the condition.</span>\n *\n * <img src=\"./img/partition.png\" width=\"100%\">\n *\n * `partition` outputs an array with two Observables that partition the values\n * from the source Observable through the given `predicate` function. The first\n * Observable in that array emits source values for which the predicate argument\n * returns true. The second Observable emits source values for which the\n * predicate returns false. The first behaves like {@link filter} and the second\n * behaves like {@link filter} with the predicate negated.\n *\n * @example <caption>Partition click events into those on DIV elements and those elsewhere</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var parts = clicks.partition(ev => ev.target.tagName === 'DIV');\n * var clicksOnDivs = parts[0];\n * var clicksElsewhere = parts[1];\n * clicksOnDivs.subscribe(x => console.log('DIV clicked: ', x));\n * clicksElsewhere.subscribe(x => console.log('Other clicked: ', x));\n *\n * @see {@link filter}\n *\n * @param {function(value: T, index: number): boolean} predicate A function that\n * evaluates each value emitted by the source Observable. If it returns `true`,\n * the value is emitted on the first Observable in the returned array, if\n * `false` the value is emitted on the second Observable in the array. The\n * `index` parameter is the number `i` for the i-th source emission that has\n * happened since the subscription, starting from the number `0`.\n * @param {any} [thisArg] An optional argument to determine the value of `this`\n * in the `predicate` function.\n * @return {[Observable<T>, Observable<T>]} An array with two Observables: one\n * with values that passed the predicate, and another with values that did not\n * pass the predicate.\n * @method partition\n * @owner Observable\n */\n\n/**\n * Maps each source value (an object) to its specified nested property.\n *\n * <span class=\"informal\">Like {@link map}, but meant only for picking one of\n * the nested properties of every emitted object.</span>\n *\n * <img src=\"./img/pluck.png\" width=\"100%\">\n *\n * Given a list of strings describing a path to an object property, retrieves\n * the value of a specified nested property from all values in the source\n * Observable. If a property can't be resolved, it will return `undefined` for\n * that value.\n *\n * @example <caption>Map every click to the tagName of the clicked target element</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var tagNames = clicks.pluck('target', 'tagName');\n * tagNames.subscribe(x => console.log(x));\n *\n * @see {@link map}\n *\n * @param {...string} properties The nested properties to pluck from each source\n * value (an object).\n * @return {Observable} A new Observable of property values from the source values.\n * @method pluck\n * @owner Observable\n */\n\n/* tslint:enable:max-line-length */\n/**\n * Returns a ConnectableObservable, which is a variety of Observable that waits until its connect method is called\n * before it begins emitting items to those Observers that have subscribed to it.\n *\n * <img src=\"./img/publish.png\" width=\"100%\">\n *\n * @param {Function} [selector] - Optional selector function which can use the multicasted source sequence as many times\n * as needed, without causing multiple subscriptions to the source sequence.\n * Subscribers to the given source will receive all notifications of the source from the time of the subscription on.\n * @return A ConnectableObservable that upon connection causes the source Observable to emit items to its Observers.\n * @method publish\n * @owner Observable\n */\n\n/**\n * @param value\n * @return {ConnectableObservable<T>}\n * @method publishBehavior\n * @owner Observable\n */\n\n/* tslint:enable:max-line-length */\n\nvar __read$11 = (undefined && undefined.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spread$11 = (undefined && undefined.__spread) || function () {\n    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read$11(arguments[i]));\n    return ar;\n};\n/* tslint:enable:max-line-length */\n/**\n * Returns an Observable that mirrors the first source Observable to emit an item\n * from the combination of this Observable and supplied Observables.\n * @param {...Observables} ...observables Sources used to race for which Observable emits first.\n * @return {Observable} An Observable that mirrors the output of the first Observable to emit an item.\n * @method race\n * @owner Observable\n */\n\nvar __extends$68 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Returns an Observable that repeats the stream of items emitted by the source Observable at most count times.\n *\n * <img src=\"./img/repeat.png\" width=\"100%\">\n *\n * @param {number} [count] The number of times the source Observable items are repeated, a count of 0 will yield\n * an empty Observable.\n * @return {Observable} An Observable that repeats the stream of items emitted by the source Observable at most\n * count times.\n * @method repeat\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar RepeatSubscriber = /** @class */ (function (_super) {\n    __extends$68(RepeatSubscriber, _super);\n    function RepeatSubscriber(destination, count, source) {\n        var _this = _super.call(this, destination) || this;\n        _this.count = count;\n        _this.source = source;\n        return _this;\n    }\n    RepeatSubscriber.prototype.complete = function () {\n        if (!this.isStopped) {\n            var _a = this, source = _a.source, count = _a.count;\n            if (count === 0) {\n                return _super.prototype.complete.call(this);\n            }\n            else if (count > -1) {\n                this.count = count - 1;\n            }\n            source.subscribe(this._unsubscribeAndRecycle());\n        }\n    };\n    return RepeatSubscriber;\n}(Subscriber));\n\nvar __extends$69 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Returns an Observable that mirrors the source Observable with the exception of a `complete`. If the source\n * Observable calls `complete`, this method will emit to the Observable returned from `notifier`. If that Observable\n * calls `complete` or `error`, then this method will call `complete` or `error` on the child subscription. Otherwise\n * this method will resubscribe to the source Observable.\n *\n * <img src=\"./img/repeatWhen.png\" width=\"100%\">\n *\n * @param {function(notifications: Observable): Observable} notifier - Receives an Observable of notifications with\n * which a user can `complete` or `error`, aborting the repetition.\n * @return {Observable} The source Observable modified with repeat logic.\n * @method repeatWhen\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar RepeatWhenSubscriber = /** @class */ (function (_super) {\n    __extends$69(RepeatWhenSubscriber, _super);\n    function RepeatWhenSubscriber(destination, notifier, source) {\n        var _this = _super.call(this, destination) || this;\n        _this.notifier = notifier;\n        _this.source = source;\n        _this.sourceIsBeingSubscribedTo = true;\n        return _this;\n    }\n    RepeatWhenSubscriber.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n        this.sourceIsBeingSubscribedTo = true;\n        this.source.subscribe(this);\n    };\n    RepeatWhenSubscriber.prototype.notifyComplete = function (innerSub) {\n        if (this.sourceIsBeingSubscribedTo === false) {\n            return _super.prototype.complete.call(this);\n        }\n    };\n    RepeatWhenSubscriber.prototype.complete = function () {\n        this.sourceIsBeingSubscribedTo = false;\n        if (!this.isStopped) {\n            if (!this.retries) {\n                this.subscribeToRetries();\n            }\n            if (!this.retriesSubscription || this.retriesSubscription.closed) {\n                return _super.prototype.complete.call(this);\n            }\n            this._unsubscribeAndRecycle();\n            this.notifications.next();\n        }\n    };\n    /** @deprecated This is an internal implementation detail, do not use. */\n    RepeatWhenSubscriber.prototype._unsubscribe = function () {\n        var _a = this, notifications = _a.notifications, retriesSubscription = _a.retriesSubscription;\n        if (notifications) {\n            notifications.unsubscribe();\n            this.notifications = null;\n        }\n        if (retriesSubscription) {\n            retriesSubscription.unsubscribe();\n            this.retriesSubscription = null;\n        }\n        this.retries = null;\n    };\n    /** @deprecated This is an internal implementation detail, do not use. */\n    RepeatWhenSubscriber.prototype._unsubscribeAndRecycle = function () {\n        var _unsubscribe = this._unsubscribe;\n        this._unsubscribe = null;\n        _super.prototype._unsubscribeAndRecycle.call(this);\n        this._unsubscribe = _unsubscribe;\n        return this;\n    };\n    RepeatWhenSubscriber.prototype.subscribeToRetries = function () {\n        this.notifications = new Subject();\n        var retries = tryCatch(this.notifier)(this.notifications);\n        if (retries === errorObject) {\n            return _super.prototype.complete.call(this);\n        }\n        this.retries = retries;\n        this.retriesSubscription = subscribeToResult(this, retries);\n    };\n    return RepeatWhenSubscriber;\n}(OuterSubscriber));\n\nvar __extends$70 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Returns an Observable that mirrors the source Observable with the exception of an `error`. If the source Observable\n * calls `error`, this method will resubscribe to the source Observable for a maximum of `count` resubscriptions (given\n * as a number parameter) rather than propagating the `error` call.\n *\n * <img src=\"./img/retry.png\" width=\"100%\">\n *\n * Any and all items emitted by the source Observable will be emitted by the resulting Observable, even those emitted\n * during failed subscriptions. For example, if an Observable fails at first but emits [1, 2] then succeeds the second\n * time and emits: [1, 2, 3, 4, 5] then the complete stream of emissions and notifications\n * would be: [1, 2, 1, 2, 3, 4, 5, `complete`].\n * @param {number} count - Number of retry attempts before failing.\n * @return {Observable} The source Observable modified with the retry logic.\n * @method retry\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar RetrySubscriber = /** @class */ (function (_super) {\n    __extends$70(RetrySubscriber, _super);\n    function RetrySubscriber(destination, count, source) {\n        var _this = _super.call(this, destination) || this;\n        _this.count = count;\n        _this.source = source;\n        return _this;\n    }\n    RetrySubscriber.prototype.error = function (err) {\n        if (!this.isStopped) {\n            var _a = this, source = _a.source, count = _a.count;\n            if (count === 0) {\n                return _super.prototype.error.call(this, err);\n            }\n            else if (count > -1) {\n                this.count = count - 1;\n            }\n            source.subscribe(this._unsubscribeAndRecycle());\n        }\n    };\n    return RetrySubscriber;\n}(Subscriber));\n\nvar __extends$71 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Returns an Observable that mirrors the source Observable with the exception of an `error`. If the source Observable\n * calls `error`, this method will emit the Throwable that caused the error to the Observable returned from `notifier`.\n * If that Observable calls `complete` or `error` then this method will call `complete` or `error` on the child\n * subscription. Otherwise this method will resubscribe to the source Observable.\n *\n * <img src=\"./img/retryWhen.png\" width=\"100%\">\n *\n * @param {function(errors: Observable): Observable} notifier - Receives an Observable of notifications with which a\n * user can `complete` or `error`, aborting the retry.\n * @return {Observable} The source Observable modified with retry logic.\n * @method retryWhen\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar RetryWhenSubscriber = /** @class */ (function (_super) {\n    __extends$71(RetryWhenSubscriber, _super);\n    function RetryWhenSubscriber(destination, notifier, source) {\n        var _this = _super.call(this, destination) || this;\n        _this.notifier = notifier;\n        _this.source = source;\n        return _this;\n    }\n    RetryWhenSubscriber.prototype.error = function (err) {\n        if (!this.isStopped) {\n            var errors = this.errors;\n            var retries = this.retries;\n            var retriesSubscription = this.retriesSubscription;\n            if (!retries) {\n                errors = new Subject();\n                retries = tryCatch(this.notifier)(errors);\n                if (retries === errorObject) {\n                    return _super.prototype.error.call(this, errorObject.e);\n                }\n                retriesSubscription = subscribeToResult(this, retries);\n            }\n            else {\n                this.errors = null;\n                this.retriesSubscription = null;\n            }\n            this._unsubscribeAndRecycle();\n            this.errors = errors;\n            this.retries = retries;\n            this.retriesSubscription = retriesSubscription;\n            errors.next(err);\n        }\n    };\n    /** @deprecated This is an internal implementation detail, do not use. */\n    RetryWhenSubscriber.prototype._unsubscribe = function () {\n        var _a = this, errors = _a.errors, retriesSubscription = _a.retriesSubscription;\n        if (errors) {\n            errors.unsubscribe();\n            this.errors = null;\n        }\n        if (retriesSubscription) {\n            retriesSubscription.unsubscribe();\n            this.retriesSubscription = null;\n        }\n        this.retries = null;\n    };\n    RetryWhenSubscriber.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n        var _unsubscribe = this._unsubscribe;\n        this._unsubscribe = null;\n        this._unsubscribeAndRecycle();\n        this._unsubscribe = _unsubscribe;\n        this.source.subscribe(this);\n    };\n    return RetryWhenSubscriber;\n}(OuterSubscriber));\n\nvar __extends$72 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Emits the most recently emitted value from the source Observable whenever\n * another Observable, the `notifier`, emits.\n *\n * <span class=\"informal\">It's like {@link sampleTime}, but samples whenever\n * the `notifier` Observable emits something.</span>\n *\n * <img src=\"./img/sample.png\" width=\"100%\">\n *\n * Whenever the `notifier` Observable emits a value or completes, `sample`\n * looks at the source Observable and emits whichever value it has most recently\n * emitted since the previous sampling, unless the source has not emitted\n * anything since the previous sampling. The `notifier` is subscribed to as soon\n * as the output Observable is subscribed.\n *\n * @example <caption>On every click, sample the most recent \"seconds\" timer</caption>\n * var seconds = Rx.Observable.interval(1000);\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var result = seconds.sample(clicks);\n * result.subscribe(x => console.log(x));\n *\n * @see {@link audit}\n * @see {@link debounce}\n * @see {@link sampleTime}\n * @see {@link throttle}\n *\n * @param {Observable<any>} notifier The Observable to use for sampling the\n * source Observable.\n * @return {Observable<T>} An Observable that emits the results of sampling the\n * values emitted by the source Observable whenever the notifier Observable\n * emits value or completes.\n * @method sample\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar SampleSubscriber = /** @class */ (function (_super) {\n    __extends$72(SampleSubscriber, _super);\n    function SampleSubscriber() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.hasValue = false;\n        return _this;\n    }\n    SampleSubscriber.prototype._next = function (value) {\n        this.value = value;\n        this.hasValue = true;\n    };\n    SampleSubscriber.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n        this.emitValue();\n    };\n    SampleSubscriber.prototype.notifyComplete = function () {\n        this.emitValue();\n    };\n    SampleSubscriber.prototype.emitValue = function () {\n        if (this.hasValue) {\n            this.hasValue = false;\n            this.destination.next(this.value);\n        }\n    };\n    return SampleSubscriber;\n}(OuterSubscriber));\n\nvar __extends$73 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Emits the most recently emitted value from the source Observable within\n * periodic time intervals.\n *\n * <span class=\"informal\">Samples the source Observable at periodic time\n * intervals, emitting what it samples.</span>\n *\n * <img src=\"./img/sampleTime.png\" width=\"100%\">\n *\n * `sampleTime` periodically looks at the source Observable and emits whichever\n * value it has most recently emitted since the previous sampling, unless the\n * source has not emitted anything since the previous sampling. The sampling\n * happens periodically in time every `period` milliseconds (or the time unit\n * defined by the optional `scheduler` argument). The sampling starts as soon as\n * the output Observable is subscribed.\n *\n * @example <caption>Every second, emit the most recent click at most once</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var result = clicks.sampleTime(1000);\n * result.subscribe(x => console.log(x));\n *\n * @see {@link auditTime}\n * @see {@link debounceTime}\n * @see {@link delay}\n * @see {@link sample}\n * @see {@link throttleTime}\n *\n * @param {number} period The sampling period expressed in milliseconds or the\n * time unit determined internally by the optional `scheduler`.\n * @param {Scheduler} [scheduler=async] The {@link IScheduler} to use for\n * managing the timers that handle the sampling.\n * @return {Observable<T>} An Observable that emits the results of sampling the\n * values emitted by the source Observable at the specified time interval.\n * @method sampleTime\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar SampleTimeSubscriber = /** @class */ (function (_super) {\n    __extends$73(SampleTimeSubscriber, _super);\n    function SampleTimeSubscriber(destination, period, scheduler) {\n        var _this = _super.call(this, destination) || this;\n        _this.period = period;\n        _this.scheduler = scheduler;\n        _this.hasValue = false;\n        _this.add(scheduler.schedule(dispatchNotification, period, { subscriber: _this, period: period }));\n        return _this;\n    }\n    SampleTimeSubscriber.prototype._next = function (value) {\n        this.lastValue = value;\n        this.hasValue = true;\n    };\n    SampleTimeSubscriber.prototype.notifyNext = function () {\n        if (this.hasValue) {\n            this.hasValue = false;\n            this.destination.next(this.lastValue);\n        }\n    };\n    return SampleTimeSubscriber;\n}(Subscriber));\nfunction dispatchNotification(state) {\n    var subscriber = state.subscriber, period = state.period;\n    subscriber.notifyNext();\n    this.schedule(state, period);\n}\n\nvar __extends$74 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Compares all values of two observables in sequence using an optional comparor function\n * and returns an observable of a single boolean value representing whether or not the two sequences\n * are equal.\n *\n * <span class=\"informal\">Checks to see of all values emitted by both observables are equal, in order.</span>\n *\n * <img src=\"./img/sequenceEqual.png\" width=\"100%\">\n *\n * `sequenceEqual` subscribes to two observables and buffers incoming values from each observable. Whenever either\n * observable emits a value, the value is buffered and the buffers are shifted and compared from the bottom\n * up; If any value pair doesn't match, the returned observable will emit `false` and complete. If one of the\n * observables completes, the operator will wait for the other observable to complete; If the other\n * observable emits before completing, the returned observable will emit `false` and complete. If one observable never\n * completes or emits after the other complets, the returned observable will never complete.\n *\n * @example <caption>figure out if the Konami code matches</caption>\n * var code = Rx.Observable.from([\n *  \"ArrowUp\",\n *  \"ArrowUp\",\n *  \"ArrowDown\",\n *  \"ArrowDown\",\n *  \"ArrowLeft\",\n *  \"ArrowRight\",\n *  \"ArrowLeft\",\n *  \"ArrowRight\",\n *  \"KeyB\",\n *  \"KeyA\",\n *  \"Enter\" // no start key, clearly.\n * ]);\n *\n * var keys = Rx.Observable.fromEvent(document, 'keyup')\n *  .map(e => e.code);\n * var matches = keys.bufferCount(11, 1)\n *  .mergeMap(\n *    last11 =>\n *      Rx.Observable.from(last11)\n *        .sequenceEqual(code)\n *   );\n * matches.subscribe(matched => console.log('Successful cheat at Contra? ', matched));\n *\n * @see {@link combineLatest}\n * @see {@link zip}\n * @see {@link withLatestFrom}\n *\n * @param {Observable} compareTo The observable sequence to compare the source sequence to.\n * @param {function} [comparor] An optional function to compare each value pair\n * @return {Observable} An Observable of a single boolean value representing whether or not\n * the values emitted by both observables were equal in sequence.\n * @method sequenceEqual\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar SequenceEqualSubscriber = /** @class */ (function (_super) {\n    __extends$74(SequenceEqualSubscriber, _super);\n    function SequenceEqualSubscriber(destination, compareTo, comparor) {\n        var _this = _super.call(this, destination) || this;\n        _this.compareTo = compareTo;\n        _this.comparor = comparor;\n        _this._a = [];\n        _this._b = [];\n        _this._oneComplete = false;\n        _this.add(compareTo.subscribe(new SequenceEqualCompareToSubscriber(destination, _this)));\n        return _this;\n    }\n    SequenceEqualSubscriber.prototype._next = function (value) {\n        if (this._oneComplete && this._b.length === 0) {\n            this.emit(false);\n        }\n        else {\n            this._a.push(value);\n            this.checkValues();\n        }\n    };\n    SequenceEqualSubscriber.prototype._complete = function () {\n        if (this._oneComplete) {\n            this.emit(this._a.length === 0 && this._b.length === 0);\n        }\n        else {\n            this._oneComplete = true;\n        }\n    };\n    SequenceEqualSubscriber.prototype.checkValues = function () {\n        var _c = this, _a = _c._a, _b = _c._b, comparor = _c.comparor;\n        while (_a.length > 0 && _b.length > 0) {\n            var a = _a.shift();\n            var b = _b.shift();\n            var areEqual = false;\n            if (comparor) {\n                areEqual = tryCatch(comparor)(a, b);\n                if (areEqual === errorObject) {\n                    this.destination.error(errorObject.e);\n                }\n            }\n            else {\n                areEqual = a === b;\n            }\n            if (!areEqual) {\n                this.emit(false);\n            }\n        }\n    };\n    SequenceEqualSubscriber.prototype.emit = function (value) {\n        var destination = this.destination;\n        destination.next(value);\n        destination.complete();\n    };\n    SequenceEqualSubscriber.prototype.nextB = function (value) {\n        if (this._oneComplete && this._a.length === 0) {\n            this.emit(false);\n        }\n        else {\n            this._b.push(value);\n            this.checkValues();\n        }\n    };\n    return SequenceEqualSubscriber;\n}(Subscriber));\nvar SequenceEqualCompareToSubscriber = /** @class */ (function (_super) {\n    __extends$74(SequenceEqualCompareToSubscriber, _super);\n    function SequenceEqualCompareToSubscriber(destination, parent) {\n        var _this = _super.call(this, destination) || this;\n        _this.parent = parent;\n        return _this;\n    }\n    SequenceEqualCompareToSubscriber.prototype._next = function (value) {\n        this.parent.nextB(value);\n    };\n    SequenceEqualCompareToSubscriber.prototype._error = function (err) {\n        this.parent.error(err);\n    };\n    SequenceEqualCompareToSubscriber.prototype._complete = function () {\n        this.parent._complete();\n    };\n    return SequenceEqualCompareToSubscriber;\n}(Subscriber));\n\nfunction shareSubjectFactory() {\n    return new Subject();\n}\n/**\n * Returns a new Observable that multicasts (shares) the original Observable. As long as there is at least one\n * Subscriber this Observable will be subscribed and emitting data. When all subscribers have unsubscribed it will\n * unsubscribe from the source Observable. Because the Observable is multicasting it makes the stream `hot`.\n * This is an alias for .multicast(() => new Subject()).refCount().\n *\n * <img src=\"./img/share.png\" width=\"100%\">\n *\n * @return {Observable<T>} An Observable that upon connection causes the source Observable to emit items to its Observers.\n * @method share\n * @owner Observable\n */\nfunction share() {\n    return function (source) { return refCount()(multicast(shareSubjectFactory)(source)); };\n}\n\n/**\n * @method shareReplay\n * @owner Observable\n */\n\nvar __extends$75 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Returns an Observable that emits the single item emitted by the source Observable that matches a specified\n * predicate, if that Observable emits one such item. If the source Observable emits more than one such item or no\n * items, notify of an IllegalArgumentException or NoSuchElementException respectively. If the source Observable\n * emits items but none match the specified predicate then `undefined` is emiited.\n *\n * <img src=\"./img/single.png\" width=\"100%\">\n *\n * @throws {EmptyError} Delivers an EmptyError to the Observer's `error`\n * callback if the Observable completes before any `next` notification was sent.\n * @param {Function} predicate - A predicate function to evaluate items emitted by the source Observable.\n * @return {Observable<T>} An Observable that emits the single item emitted by the source Observable that matches\n * the predicate or `undefined` when no items match.\n *\n * @method single\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar SingleSubscriber = /** @class */ (function (_super) {\n    __extends$75(SingleSubscriber, _super);\n    function SingleSubscriber(destination, predicate, source) {\n        var _this = _super.call(this, destination) || this;\n        _this.predicate = predicate;\n        _this.source = source;\n        _this.seenValue = false;\n        _this.index = 0;\n        return _this;\n    }\n    SingleSubscriber.prototype.applySingleValue = function (value) {\n        if (this.seenValue) {\n            this.destination.error('Sequence contains more than one element');\n        }\n        else {\n            this.seenValue = true;\n            this.singleValue = value;\n        }\n    };\n    SingleSubscriber.prototype._next = function (value) {\n        var index = this.index++;\n        if (this.predicate) {\n            this.tryNext(value, index);\n        }\n        else {\n            this.applySingleValue(value);\n        }\n    };\n    SingleSubscriber.prototype.tryNext = function (value, index) {\n        try {\n            if (this.predicate(value, index, this.source)) {\n                this.applySingleValue(value);\n            }\n        }\n        catch (err) {\n            this.destination.error(err);\n        }\n    };\n    SingleSubscriber.prototype._complete = function () {\n        var destination = this.destination;\n        if (this.index > 0) {\n            destination.next(this.seenValue ? this.singleValue : undefined);\n            destination.complete();\n        }\n        else {\n            destination.error(new EmptyError);\n        }\n    };\n    return SingleSubscriber;\n}(Subscriber));\n\nvar __extends$76 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Returns an Observable that skips the first `count` items emitted by the source Observable.\n *\n * <img src=\"./img/skip.png\" width=\"100%\">\n *\n * @param {Number} count - The number of times, items emitted by source Observable should be skipped.\n * @return {Observable} An Observable that skips values emitted by the source Observable.\n *\n * @method skip\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar SkipSubscriber = /** @class */ (function (_super) {\n    __extends$76(SkipSubscriber, _super);\n    function SkipSubscriber(destination, total) {\n        var _this = _super.call(this, destination) || this;\n        _this.total = total;\n        _this.count = 0;\n        return _this;\n    }\n    SkipSubscriber.prototype._next = function (x) {\n        if (++this.count > this.total) {\n            this.destination.next(x);\n        }\n    };\n    return SkipSubscriber;\n}(Subscriber));\n\nvar __extends$77 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Skip the last `count` values emitted by the source Observable.\n *\n * <img src=\"./img/skipLast.png\" width=\"100%\">\n *\n * `skipLast` returns an Observable that accumulates a queue with a length\n * enough to store the first `count` values. As more values are received,\n * values are taken from the front of the queue and produced on the result\n * sequence. This causes values to be delayed.\n *\n * @example <caption>Skip the last 2 values of an Observable with many values</caption>\n * var many = Rx.Observable.range(1, 5);\n * var skipLastTwo = many.skipLast(2);\n * skipLastTwo.subscribe(x => console.log(x));\n *\n * // Results in:\n * // 1 2 3\n *\n * @see {@link skip}\n * @see {@link skipUntil}\n * @see {@link skipWhile}\n * @see {@link take}\n *\n * @throws {ArgumentOutOfRangeError} When using `skipLast(i)`, it throws\n * ArgumentOutOrRangeError if `i < 0`.\n *\n * @param {number} count Number of elements to skip from the end of the source Observable.\n * @returns {Observable<T>} An Observable that skips the last count values\n * emitted by the source Observable.\n * @method skipLast\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar SkipLastSubscriber = /** @class */ (function (_super) {\n    __extends$77(SkipLastSubscriber, _super);\n    function SkipLastSubscriber(destination, _skipCount) {\n        var _this = _super.call(this, destination) || this;\n        _this._skipCount = _skipCount;\n        _this._count = 0;\n        _this._ring = new Array(_skipCount);\n        return _this;\n    }\n    SkipLastSubscriber.prototype._next = function (value) {\n        var skipCount = this._skipCount;\n        var count = this._count++;\n        if (count < skipCount) {\n            this._ring[count] = value;\n        }\n        else {\n            var currentIndex = count % skipCount;\n            var ring = this._ring;\n            var oldValue = ring[currentIndex];\n            ring[currentIndex] = value;\n            this.destination.next(oldValue);\n        }\n    };\n    return SkipLastSubscriber;\n}(Subscriber));\n\nvar __extends$78 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Returns an Observable that skips items emitted by the source Observable until a second Observable emits an item.\n *\n * <img src=\"./img/skipUntil.png\" width=\"100%\">\n *\n * @param {Observable} notifier - The second Observable that has to emit an item before the source Observable's elements begin to\n * be mirrored by the resulting Observable.\n * @return {Observable<T>} An Observable that skips items from the source Observable until the second Observable emits\n * an item, then emits the remaining items.\n * @method skipUntil\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar SkipUntilSubscriber = /** @class */ (function (_super) {\n    __extends$78(SkipUntilSubscriber, _super);\n    function SkipUntilSubscriber(destination, notifier) {\n        var _this = _super.call(this, destination) || this;\n        _this.hasValue = false;\n        _this.add(_this.innerSubscription = subscribeToResult(_this, notifier));\n        return _this;\n    }\n    SkipUntilSubscriber.prototype._next = function (value) {\n        if (this.hasValue) {\n            _super.prototype._next.call(this, value);\n        }\n    };\n    SkipUntilSubscriber.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n        this.hasValue = true;\n        this.innerSubscription.unsubscribe();\n    };\n    SkipUntilSubscriber.prototype.notifyComplete = function () {\n        /* do nothing */\n    };\n    return SkipUntilSubscriber;\n}(OuterSubscriber));\n\nvar __extends$79 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Returns an Observable that skips all items emitted by the source Observable as long as a specified condition holds\n * true, but emits all further source items as soon as the condition becomes false.\n *\n * <img src=\"./img/skipWhile.png\" width=\"100%\">\n *\n * @param {Function} predicate - A function to test each item emitted from the source Observable.\n * @return {Observable<T>} An Observable that begins emitting items emitted by the source Observable when the\n * specified predicate becomes false.\n * @method skipWhile\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar SkipWhileSubscriber = /** @class */ (function (_super) {\n    __extends$79(SkipWhileSubscriber, _super);\n    function SkipWhileSubscriber(destination, predicate) {\n        var _this = _super.call(this, destination) || this;\n        _this.predicate = predicate;\n        _this.skipping = true;\n        _this.index = 0;\n        return _this;\n    }\n    SkipWhileSubscriber.prototype._next = function (value) {\n        var destination = this.destination;\n        if (this.skipping) {\n            this.tryCallPredicate(value);\n        }\n        if (!this.skipping) {\n            destination.next(value);\n        }\n    };\n    SkipWhileSubscriber.prototype.tryCallPredicate = function (value) {\n        try {\n            var result = this.predicate(value, this.index++);\n            this.skipping = Boolean(result);\n        }\n        catch (err) {\n            this.destination.error(err);\n        }\n    };\n    return SkipWhileSubscriber;\n}(Subscriber));\n\n/* tslint:enable:max-line-length */\n/**\n * Returns an Observable that emits the items you specify as arguments before it begins to emit\n * items emitted by the source Observable.\n *\n * <img src=\"./img/startWith.png\" width=\"100%\">\n *\n * @param {...T} values - Items you want the modified Observable to emit first.\n * @param {Scheduler} [scheduler] - A {@link IScheduler} to use for scheduling\n * the emissions of the `next` notifications.\n * @return {Observable} An Observable that emits the items in the specified Iterable and then emits the items\n * emitted by the source Observable.\n * @method startWith\n * @owner Observable\n */\n\nvar __extends$80 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @extends {Ignored}\n * @hide true\n */\nvar SubscribeOnObservable = /** @class */ (function (_super) {\n    __extends$80(SubscribeOnObservable, _super);\n    function SubscribeOnObservable(source, delayTime, scheduler) {\n        if (delayTime === void 0) { delayTime = 0; }\n        if (scheduler === void 0) { scheduler = asap; }\n        var _this = _super.call(this) || this;\n        _this.source = source;\n        _this.delayTime = delayTime;\n        _this.scheduler = scheduler;\n        if (!isNumeric(delayTime) || delayTime < 0) {\n            _this.delayTime = 0;\n        }\n        if (!scheduler || typeof scheduler.schedule !== 'function') {\n            _this.scheduler = asap;\n        }\n        return _this;\n    }\n    /** @nocollapse */\n    SubscribeOnObservable.create = function (source, delay, scheduler) {\n        if (delay === void 0) { delay = 0; }\n        if (scheduler === void 0) { scheduler = asap; }\n        return new SubscribeOnObservable(source, delay, scheduler);\n    };\n    /** @nocollapse */\n    SubscribeOnObservable.dispatch = function (arg) {\n        var source = arg.source, subscriber = arg.subscriber;\n        return this.add(source.subscribe(subscriber));\n    };\n    /** @deprecated This is an internal implementation detail, do not use. */\n    SubscribeOnObservable.prototype._subscribe = function (subscriber) {\n        var delay = this.delayTime;\n        var source = this.source;\n        var scheduler = this.scheduler;\n        return scheduler.schedule(SubscribeOnObservable.dispatch, delay, {\n            source: source, subscriber: subscriber\n        });\n    };\n    return SubscribeOnObservable;\n}(Observable));\n\n/**\n * Asynchronously subscribes Observers to this Observable on the specified IScheduler.\n *\n * <img src=\"./img/subscribeOn.png\" width=\"100%\">\n *\n * @param {Scheduler} scheduler - The IScheduler to perform subscription actions on.\n * @return {Observable<T>} The source Observable modified so that its subscriptions happen on the specified IScheduler.\n .\n * @method subscribeOn\n * @owner Observable\n */\n\nvar __extends$81 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/* tslint:enable:max-line-length */\n/**\n * Projects each source value to an Observable which is merged in the output\n * Observable, emitting values only from the most recently projected Observable.\n *\n * <span class=\"informal\">Maps each value to an Observable, then flattens all of\n * these inner Observables using {@link switch}.</span>\n *\n * <img src=\"./img/switchMap.png\" width=\"100%\">\n *\n * Returns an Observable that emits items based on applying a function that you\n * supply to each item emitted by the source Observable, where that function\n * returns an (so-called \"inner\") Observable. Each time it observes one of these\n * inner Observables, the output Observable begins emitting the items emitted by\n * that inner Observable. When a new inner Observable is emitted, `switchMap`\n * stops emitting items from the earlier-emitted inner Observable and begins\n * emitting items from the new one. It continues to behave like this for\n * subsequent inner Observables.\n *\n * @example <caption>Rerun an interval Observable on every click event</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var result = clicks.switchMap((ev) => Rx.Observable.interval(1000));\n * result.subscribe(x => console.log(x));\n *\n * @see {@link concatMap}\n * @see {@link exhaustMap}\n * @see {@link mergeMap}\n * @see {@link switch}\n * @see {@link switchMapTo}\n *\n * @param {function(value: T, ?index: number): ObservableInput} project A function\n * that, when applied to an item emitted by the source Observable, returns an\n * Observable.\n * @return {Observable} An Observable that emits the result of applying the\n * projection function (and the optional `resultSelector`) to each item emitted\n * by the source Observable and taking only the values from the most recently\n * projected inner Observable.\n * @method switchMap\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar SwitchMapSubscriber = /** @class */ (function (_super) {\n    __extends$81(SwitchMapSubscriber, _super);\n    function SwitchMapSubscriber(destination, project) {\n        var _this = _super.call(this, destination) || this;\n        _this.project = project;\n        _this.index = 0;\n        return _this;\n    }\n    SwitchMapSubscriber.prototype._next = function (value) {\n        var result;\n        var index = this.index++;\n        try {\n            result = this.project(value, index);\n        }\n        catch (error) {\n            this.destination.error(error);\n            return;\n        }\n        this._innerSub(result, value, index);\n    };\n    SwitchMapSubscriber.prototype._innerSub = function (result, value, index) {\n        var innerSubscription = this.innerSubscription;\n        if (innerSubscription) {\n            innerSubscription.unsubscribe();\n        }\n        this.add(this.innerSubscription = subscribeToResult(this, result, value, index));\n    };\n    SwitchMapSubscriber.prototype._complete = function () {\n        var innerSubscription = this.innerSubscription;\n        if (!innerSubscription || innerSubscription.closed) {\n            _super.prototype._complete.call(this);\n        }\n    };\n    SwitchMapSubscriber.prototype._unsubscribe = function () {\n        this.innerSubscription = null;\n    };\n    SwitchMapSubscriber.prototype.notifyComplete = function (innerSub) {\n        this.remove(innerSub);\n        this.innerSubscription = null;\n        if (this.isStopped) {\n            _super.prototype._complete.call(this);\n        }\n    };\n    SwitchMapSubscriber.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n        this.destination.next(innerValue);\n    };\n    return SwitchMapSubscriber;\n}(OuterSubscriber));\n\n/* tslint:enable:max-line-length */\n/**\n * Projects each source value to the same Observable which is flattened multiple\n * times with {@link switch} in the output Observable.\n *\n * <span class=\"informal\">It's like {@link switchMap}, but maps each value\n * always to the same inner Observable.</span>\n *\n * <img src=\"./img/switchMapTo.png\" width=\"100%\">\n *\n * Maps each source value to the given Observable `innerObservable` regardless\n * of the source value, and then flattens those resulting Observables into one\n * single Observable, which is the output Observable. The output Observables\n * emits values only from the most recently emitted instance of\n * `innerObservable`.\n *\n * @example <caption>Rerun an interval Observable on every click event</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var result = clicks.switchMapTo(Rx.Observable.interval(1000));\n * result.subscribe(x => console.log(x));\n *\n * @see {@link concatMapTo}\n * @see {@link switch}\n * @see {@link switchMap}\n * @see {@link mergeMapTo}\n *\n * @param {ObservableInput} innerObservable An Observable to replace each value from\n * the source Observable.\n * @return {Observable} An Observable that emits items from the given\n * `innerObservable` (and optionally transformed through `resultSelector`) every\n * time a value is emitted on the source Observable, and taking only the values\n * from the most recently projected inner Observable.\n * @method switchMapTo\n * @owner Observable\n */\n\nvar __extends$82 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Emits the values emitted by the source Observable until a `notifier`\n * Observable emits a value.\n *\n * <span class=\"informal\">Lets values pass until a second Observable,\n * `notifier`, emits a value. Then, it completes.</span>\n *\n * <img src=\"./img/takeUntil.png\" width=\"100%\">\n *\n * `takeUntil` subscribes and begins mirroring the source Observable. It also\n * monitors a second Observable, `notifier` that you provide. If the `notifier`\n * emits a value, the output Observable stops mirroring the source Observable\n * and completes. If the `notifier` doesn't emit any value and completes\n * then `takeUntil` will pass all values.\n *\n * @example <caption>Tick every second until the first click happens</caption>\n * var interval = Rx.Observable.interval(1000);\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var result = interval.takeUntil(clicks);\n * result.subscribe(x => console.log(x));\n *\n * @see {@link take}\n * @see {@link takeLast}\n * @see {@link takeWhile}\n * @see {@link skip}\n *\n * @param {Observable} notifier The Observable whose first emitted value will\n * cause the output Observable of `takeUntil` to stop emitting values from the\n * source Observable.\n * @return {Observable<T>} An Observable that emits the values from the source\n * Observable until such time as `notifier` emits its first value.\n * @method takeUntil\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar TakeUntilSubscriber = /** @class */ (function (_super) {\n    __extends$82(TakeUntilSubscriber, _super);\n    function TakeUntilSubscriber(destination) {\n        return _super.call(this, destination) || this;\n    }\n    TakeUntilSubscriber.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n        this.complete();\n    };\n    TakeUntilSubscriber.prototype.notifyComplete = function () {\n        // noop\n    };\n    return TakeUntilSubscriber;\n}(OuterSubscriber));\n\nvar __extends$83 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Emits values emitted by the source Observable so long as each value satisfies\n * the given `predicate`, and then completes as soon as this `predicate` is not\n * satisfied.\n *\n * <span class=\"informal\">Takes values from the source only while they pass the\n * condition given. When the first value does not satisfy, it completes.</span>\n *\n * <img src=\"./img/takeWhile.png\" width=\"100%\">\n *\n * `takeWhile` subscribes and begins mirroring the source Observable. Each value\n * emitted on the source is given to the `predicate` function which returns a\n * boolean, representing a condition to be satisfied by the source values. The\n * output Observable emits the source values until such time as the `predicate`\n * returns false, at which point `takeWhile` stops mirroring the source\n * Observable and completes the output Observable.\n *\n * @example <caption>Emit click events only while the clientX property is greater than 200</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var result = clicks.takeWhile(ev => ev.clientX > 200);\n * result.subscribe(x => console.log(x));\n *\n * @see {@link take}\n * @see {@link takeLast}\n * @see {@link takeUntil}\n * @see {@link skip}\n *\n * @param {function(value: T, index: number): boolean} predicate A function that\n * evaluates a value emitted by the source Observable and returns a boolean.\n * Also takes the (zero-based) index as the second argument.\n * @return {Observable<T>} An Observable that emits the values from the source\n * Observable so long as each value satisfies the condition defined by the\n * `predicate`, then completes.\n * @method takeWhile\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar TakeWhileSubscriber = /** @class */ (function (_super) {\n    __extends$83(TakeWhileSubscriber, _super);\n    function TakeWhileSubscriber(destination, predicate) {\n        var _this = _super.call(this, destination) || this;\n        _this.predicate = predicate;\n        _this.index = 0;\n        return _this;\n    }\n    TakeWhileSubscriber.prototype._next = function (value) {\n        var destination = this.destination;\n        var result;\n        try {\n            result = this.predicate(value, this.index++);\n        }\n        catch (err) {\n            destination.error(err);\n            return;\n        }\n        this.nextOrComplete(value, result);\n    };\n    TakeWhileSubscriber.prototype.nextOrComplete = function (value, predicateResult) {\n        var destination = this.destination;\n        if (Boolean(predicateResult)) {\n            destination.next(value);\n        }\n        else {\n            destination.complete();\n        }\n    };\n    return TakeWhileSubscriber;\n}(Subscriber));\n\nvar __extends$84 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n/**\n * Emits a value from the source Observable, then ignores subsequent source\n * values for a duration determined by another Observable, then repeats this\n * process.\n *\n * <span class=\"informal\">It's like {@link throttleTime}, but the silencing\n * duration is determined by a second Observable.</span>\n *\n * <img src=\"./img/throttle.png\" width=\"100%\">\n *\n * `throttle` emits the source Observable values on the output Observable\n * when its internal timer is disabled, and ignores source values when the timer\n * is enabled. Initially, the timer is disabled. As soon as the first source\n * value arrives, it is forwarded to the output Observable, and then the timer\n * is enabled by calling the `durationSelector` function with the source value,\n * which returns the \"duration\" Observable. When the duration Observable emits a\n * value or completes, the timer is disabled, and this process repeats for the\n * next source value.\n *\n * @example <caption>Emit clicks at a rate of at most one click per second</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var result = clicks.throttle(ev => Rx.Observable.interval(1000));\n * result.subscribe(x => console.log(x));\n *\n * @see {@link audit}\n * @see {@link debounce}\n * @see {@link delayWhen}\n * @see {@link sample}\n * @see {@link throttleTime}\n *\n * @param {function(value: T): SubscribableOrPromise} durationSelector A function\n * that receives a value from the source Observable, for computing the silencing\n * duration for each source value, returned as an Observable or a Promise.\n * @param {Object} config a configuration object to define `leading` and `trailing` behavior. Defaults\n * to `{ leading: true, trailing: false }`.\n * @return {Observable<T>} An Observable that performs the throttle operation to\n * limit the rate of emissions from the source.\n * @method throttle\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc\n * @ignore\n * @extends {Ignored}\n */\nvar ThrottleSubscriber = /** @class */ (function (_super) {\n    __extends$84(ThrottleSubscriber, _super);\n    function ThrottleSubscriber(destination, durationSelector, _leading, _trailing) {\n        var _this = _super.call(this, destination) || this;\n        _this.destination = destination;\n        _this.durationSelector = durationSelector;\n        _this._leading = _leading;\n        _this._trailing = _trailing;\n        _this._hasValue = false;\n        return _this;\n    }\n    ThrottleSubscriber.prototype._next = function (value) {\n        this._hasValue = true;\n        this._sendValue = value;\n        if (!this._throttled) {\n            if (this._leading) {\n                this.send();\n            }\n            else {\n                this.throttle(value);\n            }\n        }\n    };\n    ThrottleSubscriber.prototype.send = function () {\n        var _a = this, _hasValue = _a._hasValue, _sendValue = _a._sendValue;\n        if (_hasValue) {\n            this.destination.next(_sendValue);\n            this.throttle(_sendValue);\n        }\n        this._hasValue = false;\n        this._sendValue = null;\n    };\n    ThrottleSubscriber.prototype.throttle = function (value) {\n        var duration = this.tryDurationSelector(value);\n        if (duration) {\n            this.add(this._throttled = subscribeToResult(this, duration));\n        }\n    };\n    ThrottleSubscriber.prototype.tryDurationSelector = function (value) {\n        try {\n            return this.durationSelector(value);\n        }\n        catch (err) {\n            this.destination.error(err);\n            return null;\n        }\n    };\n    ThrottleSubscriber.prototype.throttlingDone = function () {\n        var _a = this, _throttled = _a._throttled, _trailing = _a._trailing;\n        if (_throttled) {\n            _throttled.unsubscribe();\n        }\n        this._throttled = null;\n        if (_trailing) {\n            this.send();\n        }\n    };\n    ThrottleSubscriber.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n        this.throttlingDone();\n    };\n    ThrottleSubscriber.prototype.notifyComplete = function () {\n        this.throttlingDone();\n    };\n    return ThrottleSubscriber;\n}(OuterSubscriber));\n\nvar __extends$85 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Emits a value from the source Observable, then ignores subsequent source\n * values for `duration` milliseconds, then repeats this process.\n *\n * <span class=\"informal\">Lets a value pass, then ignores source values for the\n * next `duration` milliseconds.</span>\n *\n * <img src=\"./img/throttleTime.png\" width=\"100%\">\n *\n * `throttleTime` emits the source Observable values on the output Observable\n * when its internal timer is disabled, and ignores source values when the timer\n * is enabled. Initially, the timer is disabled. As soon as the first source\n * value arrives, it is forwarded to the output Observable, and then the timer\n * is enabled. After `duration` milliseconds (or the time unit determined\n * internally by the optional `scheduler`) has passed, the timer is disabled,\n * and this process repeats for the next source value. Optionally takes a\n * {@link IScheduler} for managing timers.\n *\n * @example <caption>Emit clicks at a rate of at most one click per second</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var result = clicks.throttleTime(1000);\n * result.subscribe(x => console.log(x));\n *\n * @see {@link auditTime}\n * @see {@link debounceTime}\n * @see {@link delay}\n * @see {@link sampleTime}\n * @see {@link throttle}\n *\n * @param {number} duration Time to wait before emitting another value after\n * emitting the last value, measured in milliseconds or the time unit determined\n * internally by the optional `scheduler`.\n * @param {Scheduler} [scheduler=async] The {@link IScheduler} to use for\n * managing the timers that handle the throttling.\n * @return {Observable<T>} An Observable that performs the throttle operation to\n * limit the rate of emissions from the source.\n * @method throttleTime\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar ThrottleTimeSubscriber = /** @class */ (function (_super) {\n    __extends$85(ThrottleTimeSubscriber, _super);\n    function ThrottleTimeSubscriber(destination, duration, scheduler, leading, trailing) {\n        var _this = _super.call(this, destination) || this;\n        _this.duration = duration;\n        _this.scheduler = scheduler;\n        _this.leading = leading;\n        _this.trailing = trailing;\n        _this._hasTrailingValue = false;\n        _this._trailingValue = null;\n        return _this;\n    }\n    ThrottleTimeSubscriber.prototype._next = function (value) {\n        if (this.throttled) {\n            if (this.trailing) {\n                this._trailingValue = value;\n                this._hasTrailingValue = true;\n            }\n        }\n        else {\n            this.add(this.throttled = this.scheduler.schedule(dispatchNext$3, this.duration, { subscriber: this }));\n            if (this.leading) {\n                this.destination.next(value);\n            }\n        }\n    };\n    ThrottleTimeSubscriber.prototype.clearThrottle = function () {\n        var throttled = this.throttled;\n        if (throttled) {\n            if (this.trailing && this._hasTrailingValue) {\n                this.destination.next(this._trailingValue);\n                this._trailingValue = null;\n                this._hasTrailingValue = false;\n            }\n            throttled.unsubscribe();\n            this.remove(throttled);\n            this.throttled = null;\n        }\n    };\n    return ThrottleTimeSubscriber;\n}(Subscriber));\nfunction dispatchNext$3(arg) {\n    var subscriber = arg.subscriber;\n    subscriber.clearThrottle();\n}\n\nvar __extends$86 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/* tslint:enable:max-line-length */\n/**\n *\n * Errors if Observable does not emit a value in given time span, in case of which\n * subscribes to the second Observable.\n *\n * <span class=\"informal\">It's a version of `timeout` operator that let's you specify fallback Observable.</span>\n *\n * <img src=\"./img/timeoutWith.png\" width=\"100%\">\n *\n * `timeoutWith` is a variation of `timeout` operator. It behaves exactly the same,\n * still accepting as a first argument either a number or a Date, which control - respectively -\n * when values of source Observable should be emitted or when it should complete.\n *\n * The only difference is that it accepts a second, required parameter. This parameter\n * should be an Observable which will be subscribed when source Observable fails any timeout check.\n * So whenever regular `timeout` would emit an error, `timeoutWith` will instead start re-emitting\n * values from second Observable. Note that this fallback Observable is not checked for timeouts\n * itself, so it can emit values and complete at arbitrary points in time. From the moment of a second\n * subscription, Observable returned from `timeoutWith` simply mirrors fallback stream. When that\n * stream completes, it completes as well.\n *\n * Scheduler, which in case of `timeout` is provided as as second argument, can be still provided\n * here - as a third, optional parameter. It still is used to schedule timeout checks and -\n * as a consequence - when second Observable will be subscribed, since subscription happens\n * immediately after failing check.\n *\n * @example <caption>Add fallback observable</caption>\n * const seconds = Rx.Observable.interval(1000);\n * const minutes = Rx.Observable.interval(60 * 1000);\n *\n * seconds.timeoutWith(900, minutes)\n *     .subscribe(\n *         value => console.log(value), // After 900ms, will start emitting `minutes`,\n *                                      // since first value of `seconds` will not arrive fast enough.\n *         err => console.log(err) // Would be called after 900ms in case of `timeout`,\n *                                 // but here will never be called.\n *     );\n *\n * @param {number|Date} due Number specifying period within which Observable must emit values\n *                          or Date specifying before when Observable should complete\n * @param {Observable<T>} withObservable Observable which will be subscribed if source fails timeout check.\n * @param {Scheduler} [scheduler] Scheduler controlling when timeout checks occur.\n * @return {Observable<T>} Observable that mirrors behaviour of source or, when timeout check fails, of an Observable\n *                          passed as a second parameter.\n * @method timeoutWith\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar TimeoutWithSubscriber = /** @class */ (function (_super) {\n    __extends$86(TimeoutWithSubscriber, _super);\n    function TimeoutWithSubscriber(destination, absoluteTimeout, waitFor, withObservable, scheduler) {\n        var _this = _super.call(this, destination) || this;\n        _this.absoluteTimeout = absoluteTimeout;\n        _this.waitFor = waitFor;\n        _this.withObservable = withObservable;\n        _this.scheduler = scheduler;\n        _this.action = null;\n        _this.scheduleTimeout();\n        return _this;\n    }\n    TimeoutWithSubscriber.dispatchTimeout = function (subscriber) {\n        var withObservable = subscriber.withObservable;\n        subscriber._unsubscribeAndRecycle();\n        subscriber.add(subscribeToResult(subscriber, withObservable));\n    };\n    TimeoutWithSubscriber.prototype.scheduleTimeout = function () {\n        var action = this.action;\n        if (action) {\n            // Recycle the action if we've already scheduled one. All the production\n            // Scheduler Actions mutate their state/delay time and return themeselves.\n            // VirtualActions are immutable, so they create and return a clone. In this\n            // case, we need to set the action reference to the most recent VirtualAction,\n            // to ensure that's the one we clone from next time.\n            this.action = action.schedule(this, this.waitFor);\n        }\n        else {\n            this.add(this.action = this.scheduler.schedule(TimeoutWithSubscriber.dispatchTimeout, this.waitFor, this));\n        }\n    };\n    TimeoutWithSubscriber.prototype._next = function (value) {\n        if (!this.absoluteTimeout) {\n            this.scheduleTimeout();\n        }\n        _super.prototype._next.call(this, value);\n    };\n    /** @deprecated This is an internal implementation detail, do not use. */\n    TimeoutWithSubscriber.prototype._unsubscribe = function () {\n        this.action = null;\n        this.scheduler = null;\n        this.withObservable = null;\n    };\n    return TimeoutWithSubscriber;\n}(OuterSubscriber));\n\n/**\n *\n * Errors if Observable does not emit a value in given time span.\n *\n * <span class=\"informal\">Timeouts on Observable that doesn't emit values fast enough.</span>\n *\n * <img src=\"./img/timeout.png\" width=\"100%\">\n *\n * `timeout` operator accepts as an argument either a number or a Date.\n *\n * If number was provided, it returns an Observable that behaves like a source\n * Observable, unless there is a period of time where there is no value emitted.\n * So if you provide `100` as argument and first value comes after 50ms from\n * the moment of subscription, this value will be simply re-emitted by the resulting\n * Observable. If however after that 100ms passes without a second value being emitted,\n * stream will end with an error and source Observable will be unsubscribed.\n * These checks are performed throughout whole lifecycle of Observable - from the moment\n * it was subscribed to, until it completes or errors itself. Thus every value must be\n * emitted within specified period since previous value.\n *\n * If provided argument was Date, returned Observable behaves differently. It throws\n * if Observable did not complete before provided Date. This means that periods between\n * emission of particular values do not matter in this case. If Observable did not complete\n * before provided Date, source Observable will be unsubscribed. Other than that, resulting\n * stream behaves just as source Observable.\n *\n * `timeout` accepts also a Scheduler as a second parameter. It is used to schedule moment (or moments)\n * when returned Observable will check if source stream emitted value or completed.\n *\n * @example <caption>Check if ticks are emitted within certain timespan</caption>\n * const seconds = Rx.Observable.interval(1000);\n *\n * seconds.timeout(1100) // Let's use bigger timespan to be safe,\n *                       // since `interval` might fire a bit later then scheduled.\n * .subscribe(\n *     value => console.log(value), // Will emit numbers just as regular `interval` would.\n *     err => console.log(err) // Will never be called.\n * );\n *\n * seconds.timeout(900).subscribe(\n *     value => console.log(value), // Will never be called.\n *     err => console.log(err) // Will emit error before even first value is emitted,\n *                             // since it did not arrive within 900ms period.\n * );\n *\n * @example <caption>Use Date to check if Observable completed</caption>\n * const seconds = Rx.Observable.interval(1000);\n *\n * seconds.timeout(new Date(\"December 17, 2020 03:24:00\"))\n * .subscribe(\n *     value => console.log(value), // Will emit values as regular `interval` would\n *                                  // until December 17, 2020 at 03:24:00.\n *     err => console.log(err) // On December 17, 2020 at 03:24:00 it will emit an error,\n *                             // since Observable did not complete by then.\n * );\n *\n * @see {@link timeoutWith}\n *\n * @param {number|Date} due Number specifying period within which Observable must emit values\n *                          or Date specifying before when Observable should complete\n * @param {Scheduler} [scheduler] Scheduler controlling when timeout checks occur.\n * @return {Observable<T>} Observable that mirrors behaviour of source, unless timeout checks fail.\n * @method timeout\n * @owner Observable\n */\n\n/**\n * @param scheduler\n * @return {Observable<Timestamp<any>>|WebSocketSubject<T>|Observable<T>}\n * @method timestamp\n * @owner Observable\n */\n\nvar __extends$87 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Branch out the source Observable values as a nested Observable whenever\n * `windowBoundaries` emits.\n *\n * <span class=\"informal\">It's like {@link buffer}, but emits a nested Observable\n * instead of an array.</span>\n *\n * <img src=\"./img/window.png\" width=\"100%\">\n *\n * Returns an Observable that emits windows of items it collects from the source\n * Observable. The output Observable emits connected, non-overlapping\n * windows. It emits the current window and opens a new one whenever the\n * Observable `windowBoundaries` emits an item. Because each window is an\n * Observable, the output is a higher-order Observable.\n *\n * @example <caption>In every window of 1 second each, emit at most 2 click events</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var interval = Rx.Observable.interval(1000);\n * var result = clicks.window(interval)\n *   .map(win => win.take(2)) // each window has at most 2 emissions\n *   .mergeAll(); // flatten the Observable-of-Observables\n * result.subscribe(x => console.log(x));\n *\n * @see {@link windowCount}\n * @see {@link windowTime}\n * @see {@link windowToggle}\n * @see {@link windowWhen}\n * @see {@link buffer}\n *\n * @param {Observable<any>} windowBoundaries An Observable that completes the\n * previous window and starts a new window.\n * @return {Observable<Observable<T>>} An Observable of windows, which are\n * Observables emitting values of the source Observable.\n * @method window\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar WindowSubscriber = /** @class */ (function (_super) {\n    __extends$87(WindowSubscriber, _super);\n    function WindowSubscriber(destination) {\n        var _this = _super.call(this, destination) || this;\n        _this.window = new Subject();\n        destination.next(_this.window);\n        return _this;\n    }\n    WindowSubscriber.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n        this.openWindow();\n    };\n    WindowSubscriber.prototype.notifyError = function (error, innerSub) {\n        this._error(error);\n    };\n    WindowSubscriber.prototype.notifyComplete = function (innerSub) {\n        this._complete();\n    };\n    WindowSubscriber.prototype._next = function (value) {\n        this.window.next(value);\n    };\n    WindowSubscriber.prototype._error = function (err) {\n        this.window.error(err);\n        this.destination.error(err);\n    };\n    WindowSubscriber.prototype._complete = function () {\n        this.window.complete();\n        this.destination.complete();\n    };\n    /** @deprecated This is an internal implementation detail, do not use. */\n    WindowSubscriber.prototype._unsubscribe = function () {\n        this.window = null;\n    };\n    WindowSubscriber.prototype.openWindow = function () {\n        var prevWindow = this.window;\n        if (prevWindow) {\n            prevWindow.complete();\n        }\n        var destination = this.destination;\n        var newWindow = this.window = new Subject();\n        destination.next(newWindow);\n    };\n    return WindowSubscriber;\n}(OuterSubscriber));\n\nvar __extends$88 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Branch out the source Observable values as a nested Observable with each\n * nested Observable emitting at most `windowSize` values.\n *\n * <span class=\"informal\">It's like {@link bufferCount}, but emits a nested\n * Observable instead of an array.</span>\n *\n * <img src=\"./img/windowCount.png\" width=\"100%\">\n *\n * Returns an Observable that emits windows of items it collects from the source\n * Observable. The output Observable emits windows every `startWindowEvery`\n * items, each containing no more than `windowSize` items. When the source\n * Observable completes or encounters an error, the output Observable emits\n * the current window and propagates the notification from the source\n * Observable. If `startWindowEvery` is not provided, then new windows are\n * started immediately at the start of the source and when each window completes\n * with size `windowSize`.\n *\n * @example <caption>Ignore every 3rd click event, starting from the first one</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var result = clicks.windowCount(3)\n *   .map(win => win.skip(1)) // skip first of every 3 clicks\n *   .mergeAll(); // flatten the Observable-of-Observables\n * result.subscribe(x => console.log(x));\n *\n * @example <caption>Ignore every 3rd click event, starting from the third one</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var result = clicks.windowCount(2, 3)\n *   .mergeAll(); // flatten the Observable-of-Observables\n * result.subscribe(x => console.log(x));\n *\n * @see {@link window}\n * @see {@link windowTime}\n * @see {@link windowToggle}\n * @see {@link windowWhen}\n * @see {@link bufferCount}\n *\n * @param {number} windowSize The maximum number of values emitted by each\n * window.\n * @param {number} [startWindowEvery] Interval at which to start a new window.\n * For example if `startWindowEvery` is `2`, then a new window will be started\n * on every other value from the source. A new window is started at the\n * beginning of the source by default.\n * @return {Observable<Observable<T>>} An Observable of windows, which in turn\n * are Observable of values.\n * @method windowCount\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar WindowCountSubscriber = /** @class */ (function (_super) {\n    __extends$88(WindowCountSubscriber, _super);\n    function WindowCountSubscriber(destination, windowSize, startWindowEvery) {\n        var _this = _super.call(this, destination) || this;\n        _this.destination = destination;\n        _this.windowSize = windowSize;\n        _this.startWindowEvery = startWindowEvery;\n        _this.windows = [new Subject()];\n        _this.count = 0;\n        destination.next(_this.windows[0]);\n        return _this;\n    }\n    WindowCountSubscriber.prototype._next = function (value) {\n        var startWindowEvery = (this.startWindowEvery > 0) ? this.startWindowEvery : this.windowSize;\n        var destination = this.destination;\n        var windowSize = this.windowSize;\n        var windows = this.windows;\n        var len = windows.length;\n        for (var i = 0; i < len && !this.closed; i++) {\n            windows[i].next(value);\n        }\n        var c = this.count - windowSize + 1;\n        if (c >= 0 && c % startWindowEvery === 0 && !this.closed) {\n            windows.shift().complete();\n        }\n        if (++this.count % startWindowEvery === 0 && !this.closed) {\n            var window_1 = new Subject();\n            windows.push(window_1);\n            destination.next(window_1);\n        }\n    };\n    WindowCountSubscriber.prototype._error = function (err) {\n        var windows = this.windows;\n        if (windows) {\n            while (windows.length > 0 && !this.closed) {\n                windows.shift().error(err);\n            }\n        }\n        this.destination.error(err);\n    };\n    WindowCountSubscriber.prototype._complete = function () {\n        var windows = this.windows;\n        if (windows) {\n            while (windows.length > 0 && !this.closed) {\n                windows.shift().complete();\n            }\n        }\n        this.destination.complete();\n    };\n    WindowCountSubscriber.prototype._unsubscribe = function () {\n        this.count = 0;\n        this.windows = null;\n    };\n    return WindowCountSubscriber;\n}(Subscriber));\n\nvar __extends$89 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\nvar CountedSubject = /** @class */ (function (_super) {\n    __extends$89(CountedSubject, _super);\n    function CountedSubject() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this._numberOfNextedValues = 0;\n        return _this;\n    }\n    CountedSubject.prototype.next = function (value) {\n        this._numberOfNextedValues++;\n        _super.prototype.next.call(this, value);\n    };\n    Object.defineProperty(CountedSubject.prototype, \"numberOfNextedValues\", {\n        get: function () {\n            return this._numberOfNextedValues;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return CountedSubject;\n}(Subject));\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar WindowTimeSubscriber = /** @class */ (function (_super) {\n    __extends$89(WindowTimeSubscriber, _super);\n    function WindowTimeSubscriber(destination, windowTimeSpan, windowCreationInterval, maxWindowSize, scheduler) {\n        var _this = _super.call(this, destination) || this;\n        _this.destination = destination;\n        _this.windowTimeSpan = windowTimeSpan;\n        _this.windowCreationInterval = windowCreationInterval;\n        _this.maxWindowSize = maxWindowSize;\n        _this.scheduler = scheduler;\n        _this.windows = [];\n        var window = _this.openWindow();\n        if (windowCreationInterval !== null && windowCreationInterval >= 0) {\n            var closeState = { subscriber: _this, window: window, context: null };\n            var creationState = { windowTimeSpan: windowTimeSpan, windowCreationInterval: windowCreationInterval, subscriber: _this, scheduler: scheduler };\n            _this.add(scheduler.schedule(dispatchWindowClose, windowTimeSpan, closeState));\n            _this.add(scheduler.schedule(dispatchWindowCreation, windowCreationInterval, creationState));\n        }\n        else {\n            var timeSpanOnlyState = { subscriber: _this, window: window, windowTimeSpan: windowTimeSpan };\n            _this.add(scheduler.schedule(dispatchWindowTimeSpanOnly, windowTimeSpan, timeSpanOnlyState));\n        }\n        return _this;\n    }\n    WindowTimeSubscriber.prototype._next = function (value) {\n        var windows = this.windows;\n        var len = windows.length;\n        for (var i = 0; i < len; i++) {\n            var window_1 = windows[i];\n            if (!window_1.closed) {\n                window_1.next(value);\n                if (window_1.numberOfNextedValues >= this.maxWindowSize) {\n                    this.closeWindow(window_1);\n                }\n            }\n        }\n    };\n    WindowTimeSubscriber.prototype._error = function (err) {\n        var windows = this.windows;\n        while (windows.length > 0) {\n            windows.shift().error(err);\n        }\n        this.destination.error(err);\n    };\n    WindowTimeSubscriber.prototype._complete = function () {\n        var windows = this.windows;\n        while (windows.length > 0) {\n            var window_2 = windows.shift();\n            if (!window_2.closed) {\n                window_2.complete();\n            }\n        }\n        this.destination.complete();\n    };\n    WindowTimeSubscriber.prototype.openWindow = function () {\n        var window = new CountedSubject();\n        this.windows.push(window);\n        var destination = this.destination;\n        destination.next(window);\n        return window;\n    };\n    WindowTimeSubscriber.prototype.closeWindow = function (window) {\n        window.complete();\n        var windows = this.windows;\n        windows.splice(windows.indexOf(window), 1);\n    };\n    return WindowTimeSubscriber;\n}(Subscriber));\nfunction dispatchWindowTimeSpanOnly(state) {\n    var subscriber = state.subscriber, windowTimeSpan = state.windowTimeSpan, window = state.window;\n    if (window) {\n        subscriber.closeWindow(window);\n    }\n    state.window = subscriber.openWindow();\n    this.schedule(state, windowTimeSpan);\n}\nfunction dispatchWindowCreation(state) {\n    var windowTimeSpan = state.windowTimeSpan, subscriber = state.subscriber, scheduler = state.scheduler, windowCreationInterval = state.windowCreationInterval;\n    var window = subscriber.openWindow();\n    var action = this;\n    var context = { action: action, subscription: null };\n    var timeSpanState = { subscriber: subscriber, window: window, context: context };\n    context.subscription = scheduler.schedule(dispatchWindowClose, windowTimeSpan, timeSpanState);\n    action.add(context.subscription);\n    action.schedule(state, windowCreationInterval);\n}\nfunction dispatchWindowClose(state) {\n    var subscriber = state.subscriber, window = state.window, context = state.context;\n    if (context && context.action && context.subscription) {\n        context.action.remove(context.subscription);\n    }\n    subscriber.closeWindow(window);\n}\n\nvar __extends$90 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Branch out the source Observable values as a nested Observable starting from\n * an emission from `openings` and ending when the output of `closingSelector`\n * emits.\n *\n * <span class=\"informal\">It's like {@link bufferToggle}, but emits a nested\n * Observable instead of an array.</span>\n *\n * <img src=\"./img/windowToggle.png\" width=\"100%\">\n *\n * Returns an Observable that emits windows of items it collects from the source\n * Observable. The output Observable emits windows that contain those items\n * emitted by the source Observable between the time when the `openings`\n * Observable emits an item and when the Observable returned by\n * `closingSelector` emits an item.\n *\n * @example <caption>Every other second, emit the click events from the next 500ms</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var openings = Rx.Observable.interval(1000);\n * var result = clicks.windowToggle(openings, i =>\n *   i % 2 ? Rx.Observable.interval(500) : Rx.Observable.empty()\n * ).mergeAll();\n * result.subscribe(x => console.log(x));\n *\n * @see {@link window}\n * @see {@link windowCount}\n * @see {@link windowTime}\n * @see {@link windowWhen}\n * @see {@link bufferToggle}\n *\n * @param {Observable<O>} openings An observable of notifications to start new\n * windows.\n * @param {function(value: O): Observable} closingSelector A function that takes\n * the value emitted by the `openings` observable and returns an Observable,\n * which, when it emits (either `next` or `complete`), signals that the\n * associated window should complete.\n * @return {Observable<Observable<T>>} An observable of windows, which in turn\n * are Observables.\n * @method windowToggle\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar WindowToggleSubscriber = /** @class */ (function (_super) {\n    __extends$90(WindowToggleSubscriber, _super);\n    function WindowToggleSubscriber(destination, openings, closingSelector) {\n        var _this = _super.call(this, destination) || this;\n        _this.openings = openings;\n        _this.closingSelector = closingSelector;\n        _this.contexts = [];\n        _this.add(_this.openSubscription = subscribeToResult(_this, openings, openings));\n        return _this;\n    }\n    WindowToggleSubscriber.prototype._next = function (value) {\n        var contexts = this.contexts;\n        if (contexts) {\n            var len = contexts.length;\n            for (var i = 0; i < len; i++) {\n                contexts[i].window.next(value);\n            }\n        }\n    };\n    WindowToggleSubscriber.prototype._error = function (err) {\n        var contexts = this.contexts;\n        this.contexts = null;\n        if (contexts) {\n            var len = contexts.length;\n            var index = -1;\n            while (++index < len) {\n                var context = contexts[index];\n                context.window.error(err);\n                context.subscription.unsubscribe();\n            }\n        }\n        _super.prototype._error.call(this, err);\n    };\n    WindowToggleSubscriber.prototype._complete = function () {\n        var contexts = this.contexts;\n        this.contexts = null;\n        if (contexts) {\n            var len = contexts.length;\n            var index = -1;\n            while (++index < len) {\n                var context = contexts[index];\n                context.window.complete();\n                context.subscription.unsubscribe();\n            }\n        }\n        _super.prototype._complete.call(this);\n    };\n    /** @deprecated This is an internal implementation detail, do not use. */\n    WindowToggleSubscriber.prototype._unsubscribe = function () {\n        var contexts = this.contexts;\n        this.contexts = null;\n        if (contexts) {\n            var len = contexts.length;\n            var index = -1;\n            while (++index < len) {\n                var context = contexts[index];\n                context.window.unsubscribe();\n                context.subscription.unsubscribe();\n            }\n        }\n    };\n    WindowToggleSubscriber.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n        if (outerValue === this.openings) {\n            var closingSelector = this.closingSelector;\n            var closingNotifier = tryCatch(closingSelector)(innerValue);\n            if (closingNotifier === errorObject) {\n                return this.error(errorObject.e);\n            }\n            else {\n                var window_1 = new Subject();\n                var subscription = new Subscription();\n                var context = { window: window_1, subscription: subscription };\n                this.contexts.push(context);\n                var innerSubscription = subscribeToResult(this, closingNotifier, context);\n                if (innerSubscription.closed) {\n                    this.closeWindow(this.contexts.length - 1);\n                }\n                else {\n                    innerSubscription.context = context;\n                    subscription.add(innerSubscription);\n                }\n                this.destination.next(window_1);\n            }\n        }\n        else {\n            this.closeWindow(this.contexts.indexOf(outerValue));\n        }\n    };\n    WindowToggleSubscriber.prototype.notifyError = function (err) {\n        this.error(err);\n    };\n    WindowToggleSubscriber.prototype.notifyComplete = function (inner) {\n        if (inner !== this.openSubscription) {\n            this.closeWindow(this.contexts.indexOf(inner.context));\n        }\n    };\n    WindowToggleSubscriber.prototype.closeWindow = function (index) {\n        if (index === -1) {\n            return;\n        }\n        var contexts = this.contexts;\n        var context = contexts[index];\n        var window = context.window, subscription = context.subscription;\n        contexts.splice(index, 1);\n        window.complete();\n        subscription.unsubscribe();\n    };\n    return WindowToggleSubscriber;\n}(OuterSubscriber));\n\nvar __extends$91 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Branch out the source Observable values as a nested Observable using a\n * factory function of closing Observables to determine when to start a new\n * window.\n *\n * <span class=\"informal\">It's like {@link bufferWhen}, but emits a nested\n * Observable instead of an array.</span>\n *\n * <img src=\"./img/windowWhen.png\" width=\"100%\">\n *\n * Returns an Observable that emits windows of items it collects from the source\n * Observable. The output Observable emits connected, non-overlapping windows.\n * It emits the current window and opens a new one whenever the Observable\n * produced by the specified `closingSelector` function emits an item. The first\n * window is opened immediately when subscribing to the output Observable.\n *\n * @example <caption>Emit only the first two clicks events in every window of [1-5] random seconds</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var result = clicks\n *   .windowWhen(() => Rx.Observable.interval(1000 + Math.random() * 4000))\n *   .map(win => win.take(2)) // each window has at most 2 emissions\n *   .mergeAll(); // flatten the Observable-of-Observables\n * result.subscribe(x => console.log(x));\n *\n * @see {@link window}\n * @see {@link windowCount}\n * @see {@link windowTime}\n * @see {@link windowToggle}\n * @see {@link bufferWhen}\n *\n * @param {function(): Observable} closingSelector A function that takes no\n * arguments and returns an Observable that signals (on either `next` or\n * `complete`) when to close the previous window and start a new one.\n * @return {Observable<Observable<T>>} An observable of windows, which in turn\n * are Observables.\n * @method windowWhen\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar WindowSubscriber$1 = /** @class */ (function (_super) {\n    __extends$91(WindowSubscriber, _super);\n    function WindowSubscriber(destination, closingSelector) {\n        var _this = _super.call(this, destination) || this;\n        _this.destination = destination;\n        _this.closingSelector = closingSelector;\n        _this.openWindow();\n        return _this;\n    }\n    WindowSubscriber.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n        this.openWindow(innerSub);\n    };\n    WindowSubscriber.prototype.notifyError = function (error, innerSub) {\n        this._error(error);\n    };\n    WindowSubscriber.prototype.notifyComplete = function (innerSub) {\n        this.openWindow(innerSub);\n    };\n    WindowSubscriber.prototype._next = function (value) {\n        this.window.next(value);\n    };\n    WindowSubscriber.prototype._error = function (err) {\n        this.window.error(err);\n        this.destination.error(err);\n        this.unsubscribeClosingNotification();\n    };\n    WindowSubscriber.prototype._complete = function () {\n        this.window.complete();\n        this.destination.complete();\n        this.unsubscribeClosingNotification();\n    };\n    WindowSubscriber.prototype.unsubscribeClosingNotification = function () {\n        if (this.closingNotification) {\n            this.closingNotification.unsubscribe();\n        }\n    };\n    WindowSubscriber.prototype.openWindow = function (innerSub) {\n        if (innerSub === void 0) { innerSub = null; }\n        if (innerSub) {\n            this.remove(innerSub);\n            innerSub.unsubscribe();\n        }\n        var prevWindow = this.window;\n        if (prevWindow) {\n            prevWindow.complete();\n        }\n        var window = this.window = new Subject();\n        this.destination.next(window);\n        var closingNotifier = tryCatch(this.closingSelector)();\n        if (closingNotifier === errorObject) {\n            var err = errorObject.e;\n            this.destination.error(err);\n            this.window.error(err);\n        }\n        else {\n            this.add(this.closingNotification = subscribeToResult(this, closingNotifier));\n        }\n    };\n    return WindowSubscriber;\n}(OuterSubscriber));\n\nvar __extends$92 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __read$12 = (undefined && undefined.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spread$12 = (undefined && undefined.__spread) || function () {\n    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read$12(arguments[i]));\n    return ar;\n};\n/* tslint:enable:max-line-length */\n/**\n * Combines the source Observable with other Observables to create an Observable\n * whose values are calculated from the latest values of each, only when the\n * source emits.\n *\n * <span class=\"informal\">Whenever the source Observable emits a value, it\n * computes a formula using that value plus the latest values from other input\n * Observables, then emits the output of that formula.</span>\n *\n * <img src=\"./img/withLatestFrom.png\" width=\"100%\">\n *\n * `withLatestFrom` combines each value from the source Observable (the\n * instance) with the latest values from the other input Observables only when\n * the source emits a value, optionally using a `project` function to determine\n * the value to be emitted on the output Observable. All input Observables must\n * emit at least one value before the output Observable will emit a value.\n *\n * @example <caption>On every click event, emit an array with the latest timer event plus the click event</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var timer = Rx.Observable.interval(1000);\n * var result = clicks.withLatestFrom(timer);\n * result.subscribe(x => console.log(x));\n *\n * @see {@link combineLatest}\n *\n * @param {ObservableInput} other An input Observable to combine with the source\n * Observable. More than one input Observables may be given as argument.\n * @param {Function} [project] Projection function for combining values\n * together. Receives all values in order of the Observables passed, where the\n * first parameter is a value from the source Observable. (e.g.\n * `a.withLatestFrom(b, c, (a1, b1, c1) => a1 + b1 + c1)`). If this is not\n * passed, arrays will be emitted on the output Observable.\n * @return {Observable} An Observable of projected values from the most recent\n * values from each input Observable, or an array of the most recent values from\n * each input Observable.\n * @method withLatestFrom\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar WithLatestFromSubscriber = /** @class */ (function (_super) {\n    __extends$92(WithLatestFromSubscriber, _super);\n    function WithLatestFromSubscriber(destination, observables, project) {\n        var _this = _super.call(this, destination) || this;\n        _this.observables = observables;\n        _this.project = project;\n        _this.toRespond = [];\n        var len = observables.length;\n        _this.values = new Array(len);\n        for (var i = 0; i < len; i++) {\n            _this.toRespond.push(i);\n        }\n        for (var i = 0; i < len; i++) {\n            var observable = observables[i];\n            _this.add(subscribeToResult(_this, observable, observable, i));\n        }\n        return _this;\n    }\n    WithLatestFromSubscriber.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n        this.values[outerIndex] = innerValue;\n        var toRespond = this.toRespond;\n        if (toRespond.length > 0) {\n            var found = toRespond.indexOf(outerIndex);\n            if (found !== -1) {\n                toRespond.splice(found, 1);\n            }\n        }\n    };\n    WithLatestFromSubscriber.prototype.notifyComplete = function () {\n        // noop\n    };\n    WithLatestFromSubscriber.prototype._next = function (value) {\n        if (this.toRespond.length === 0) {\n            var args = __spread$12([value], this.values);\n            if (this.project) {\n                this._tryProject(args);\n            }\n            else {\n                this.destination.next(args);\n            }\n        }\n    };\n    WithLatestFromSubscriber.prototype._tryProject = function (args) {\n        var result;\n        try {\n            result = this.project.apply(this, args);\n        }\n        catch (err) {\n            this.destination.error(err);\n            return;\n        }\n        this.destination.next(result);\n    };\n    return WithLatestFromSubscriber;\n}(OuterSubscriber));\n\nvar __read$13 = (undefined && undefined.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spread$13 = (undefined && undefined.__spread) || function () {\n    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read$13(arguments[i]));\n    return ar;\n};\n/* tslint:enable:max-line-length */\n/**\n * @deprecated Deprecated in favor of static zip.\n */\n\n/* Operator exports */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Determine if the argument is shaped like a Promise\n */\nfunction isPromise$2(obj) {\n    // allow any Promise/A+ compliant thenable.\n    // It's up to the caller to ensure that obj.then conforms to the spec\n    return !!obj && typeof obj.then === 'function';\n}\n/**\n * Determine if the argument is an Observable\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * A function that will be executed when an application is initialized.\n * @experimental\n */\nvar APP_INITIALIZER = new InjectionToken('Application Initializer');\n/**\n * A class that reflects the state of running {@link APP_INITIALIZER}s.\n *\n * @experimental\n */\nvar ApplicationInitStatus = /** @class */ (function () {\n    function ApplicationInitStatus(appInits) {\n        var _this = this;\n        this.appInits = appInits;\n        this.initialized = false;\n        this.done = false;\n        this.donePromise = new Promise(function (res, rej) {\n            _this.resolve = res;\n            _this.reject = rej;\n        });\n    }\n    /** @internal */\n    /** @internal */\n    ApplicationInitStatus.prototype.runInitializers = /** @internal */\n    function () {\n        var _this = this;\n        if (this.initialized) {\n            return;\n        }\n        var asyncInitPromises = [];\n        var complete = function () {\n            _this.done = true;\n            _this.resolve();\n        };\n        if (this.appInits) {\n            for (var i = 0; i < this.appInits.length; i++) {\n                var initResult = this.appInits[i]();\n                if (isPromise$2(initResult)) {\n                    asyncInitPromises.push(initResult);\n                }\n            }\n        }\n        Promise.all(asyncInitPromises).then(function () { complete(); }).catch(function (e) { _this.reject(e); });\n        if (asyncInitPromises.length === 0) {\n            complete();\n        }\n        this.initialized = true;\n    };\n    ApplicationInitStatus.decorators = [\n        { type: Injectable }\n    ];\n    /** @nocollapse */\n    ApplicationInitStatus.ctorParameters = function () { return [\n        { type: Array, decorators: [{ type: Inject, args: [APP_INITIALIZER,] }, { type: Optional },] },\n    ]; };\n    return ApplicationInitStatus;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * A DI Token representing a unique string id assigned to the application by Angular and used\n * primarily for prefixing application attributes and CSS styles when\n * {@link ViewEncapsulation#Emulated ViewEncapsulation.Emulated} is being used.\n *\n * If you need to avoid randomly generated value to be used as an application id, you can provide\n * a custom value via a DI provider <!-- TODO: provider --> configuring the root {@link Injector}\n * using this token.\n * @experimental\n */\nvar APP_ID = new InjectionToken('AppId');\nfunction _appIdRandomProviderFactory() {\n    return \"\" + _randomChar() + _randomChar() + _randomChar();\n}\n/**\n * Providers that will generate a random APP_ID_TOKEN.\n * @experimental\n */\nvar APP_ID_RANDOM_PROVIDER = {\n    provide: APP_ID,\n    useFactory: _appIdRandomProviderFactory,\n    deps: [],\n};\nfunction _randomChar() {\n    return String.fromCharCode(97 + Math.floor(Math.random() * 25));\n}\n/**\n * A function that will be executed when a platform is initialized.\n * @experimental\n */\nvar PLATFORM_INITIALIZER = new InjectionToken('Platform Initializer');\n/**\n * A token that indicates an opaque platform id.\n * @experimental\n */\nvar PLATFORM_ID = new InjectionToken('Platform ID');\n/**\n * All callbacks provided via this token will be called for every component that is bootstrapped.\n * Signature of the callback:\n *\n * `(componentRef: ComponentRef) => void`.\n *\n * @experimental\n */\nvar APP_BOOTSTRAP_LISTENER = new InjectionToken('appBootstrapListener');\n/**\n * A token which indicates the root directory of the application\n * @experimental\n */\nvar PACKAGE_ROOT_URL = new InjectionToken('Application Packages Root URL');\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar Console = /** @class */ (function () {\n    function Console() {\n    }\n    Console.prototype.log = function (message) {\n        // tslint:disable-next-line:no-console\n        console.log(message);\n    };\n    // Note: for reporting errors use `DOM.logError()` as it is platform specific\n    // Note: for reporting errors use `DOM.logError()` as it is platform specific\n    Console.prototype.warn = \n    // Note: for reporting errors use `DOM.logError()` as it is platform specific\n    function (message) {\n        // tslint:disable-next-line:no-console\n        console.warn(message);\n    };\n    Console.decorators = [\n        { type: Injectable }\n    ];\n    /** @nocollapse */\n    Console.ctorParameters = function () { return []; };\n    return Console;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nfunction _throwError() {\n    throw new Error(\"Runtime compiler is not loaded\");\n}\n/**\n * Low-level service for running the angular compiler during runtime\n * to create {@link ComponentFactory}s, which\n * can later be used to create and render a Component instance.\n *\n * Each `@NgModule` provides an own `Compiler` to its injector,\n * that will use the directives/pipes of the ng module for compilation\n * of components.\n *\n */\nvar Compiler = /** @class */ (function () {\n    function Compiler() {\n    }\n    /**\n     * Compiles the given NgModule and all of its components. All templates of the components listed\n     * in `entryComponents` have to be inlined.\n     */\n    /**\n       * Compiles the given NgModule and all of its components. All templates of the components listed\n       * in `entryComponents` have to be inlined.\n       */\n    Compiler.prototype.compileModuleSync = /**\n       * Compiles the given NgModule and all of its components. All templates of the components listed\n       * in `entryComponents` have to be inlined.\n       */\n    function (moduleType) { throw _throwError(); };\n    /**\n     * Compiles the given NgModule and all of its components\n     */\n    /**\n       * Compiles the given NgModule and all of its components\n       */\n    Compiler.prototype.compileModuleAsync = /**\n       * Compiles the given NgModule and all of its components\n       */\n    function (moduleType) { throw _throwError(); };\n    /**\n     * Same as {@link #compileModuleSync} but also creates ComponentFactories for all components.\n     */\n    /**\n       * Same as {@link #compileModuleSync} but also creates ComponentFactories for all components.\n       */\n    Compiler.prototype.compileModuleAndAllComponentsSync = /**\n       * Same as {@link #compileModuleSync} but also creates ComponentFactories for all components.\n       */\n    function (moduleType) {\n        throw _throwError();\n    };\n    /**\n     * Same as {@link #compileModuleAsync} but also creates ComponentFactories for all components.\n     */\n    /**\n       * Same as {@link #compileModuleAsync} but also creates ComponentFactories for all components.\n       */\n    Compiler.prototype.compileModuleAndAllComponentsAsync = /**\n       * Same as {@link #compileModuleAsync} but also creates ComponentFactories for all components.\n       */\n    function (moduleType) {\n        throw _throwError();\n    };\n    /**\n     * Clears all caches.\n     */\n    /**\n       * Clears all caches.\n       */\n    Compiler.prototype.clearCache = /**\n       * Clears all caches.\n       */\n    function () { };\n    /**\n     * Clears the cache for the given component/ngModule.\n     */\n    /**\n       * Clears the cache for the given component/ngModule.\n       */\n    Compiler.prototype.clearCacheFor = /**\n       * Clears the cache for the given component/ngModule.\n       */\n    function (type) { };\n    Compiler.decorators = [\n        { type: Injectable }\n    ];\n    /** @nocollapse */\n    Compiler.ctorParameters = function () { return []; };\n    return Compiler;\n}());\n/**\n * Token to provide CompilerOptions in the platform injector.\n *\n * @experimental\n */\nvar COMPILER_OPTIONS = new InjectionToken('compilerOptions');\n/**\n * A factory for creating a Compiler\n *\n * @experimental\n */\nvar CompilerFactory = /** @class */ (function () {\n    function CompilerFactory() {\n    }\n    return CompilerFactory;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Represents an instance of a Component created via a {@link ComponentFactory}.\n *\n * `ComponentRef` provides access to the Component Instance as well other objects related to this\n * Component Instance and allows you to destroy the Component Instance via the {@link #destroy}\n * method.\n *\n */\nvar ComponentRef = /** @class */ (function () {\n    function ComponentRef() {\n    }\n    return ComponentRef;\n}());\n/**\n *\n */\nvar ComponentFactory = /** @class */ (function () {\n    function ComponentFactory() {\n    }\n    return ComponentFactory;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nfunction noComponentFactoryError(component) {\n    var error = Error(\"No component factory found for \" + stringify$1(component) + \". Did you add it to @NgModule.entryComponents?\");\n    error[ERROR_COMPONENT] = component;\n    return error;\n}\nvar ERROR_COMPONENT = 'ngComponent';\n\nvar _NullComponentFactoryResolver = /** @class */ (function () {\n    function _NullComponentFactoryResolver() {\n    }\n    _NullComponentFactoryResolver.prototype.resolveComponentFactory = function (component) {\n        throw noComponentFactoryError(component);\n    };\n    return _NullComponentFactoryResolver;\n}());\n/**\n *\n */\nvar ComponentFactoryResolver = /** @class */ (function () {\n    function ComponentFactoryResolver() {\n    }\n    ComponentFactoryResolver.NULL = new _NullComponentFactoryResolver();\n    return ComponentFactoryResolver;\n}());\nvar ComponentFactoryBoundToModule = /** @class */ (function (_super) {\n    __extends(ComponentFactoryBoundToModule, _super);\n    function ComponentFactoryBoundToModule(factory, ngModule) {\n        var _this = _super.call(this) || this;\n        _this.factory = factory;\n        _this.ngModule = ngModule;\n        _this.selector = factory.selector;\n        _this.componentType = factory.componentType;\n        _this.ngContentSelectors = factory.ngContentSelectors;\n        _this.inputs = factory.inputs;\n        _this.outputs = factory.outputs;\n        return _this;\n    }\n    ComponentFactoryBoundToModule.prototype.create = function (injector, projectableNodes, rootSelectorOrNode, ngModule) {\n        return this.factory.create(injector, projectableNodes, rootSelectorOrNode, ngModule || this.ngModule);\n    };\n    return ComponentFactoryBoundToModule;\n}(ComponentFactory));\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Represents an instance of an NgModule created via a {@link NgModuleFactory}.\n *\n * `NgModuleRef` provides access to the NgModule Instance as well other objects related to this\n * NgModule Instance.\n *\n *\n */\nvar NgModuleRef = /** @class */ (function () {\n    function NgModuleRef() {\n    }\n    return NgModuleRef;\n}());\n/**\n * @experimental\n */\nvar NgModuleFactory = /** @class */ (function () {\n    function NgModuleFactory() {\n    }\n    return NgModuleFactory;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar trace;\nvar events;\nfunction detectWTF() {\n    var wtf = _global /** TODO #9100 */['wtf'];\n    if (wtf) {\n        trace = wtf['trace'];\n        if (trace) {\n            events = trace['events'];\n            return true;\n        }\n    }\n    return false;\n}\nfunction createScope(signature, flags) {\n    if (flags === void 0) { flags = null; }\n    return events.createScope(signature, flags);\n}\nfunction leave(scope, returnValue) {\n    trace.leaveScope(scope, returnValue);\n    return returnValue;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * True if WTF is enabled.\n */\nvar wtfEnabled = detectWTF();\nfunction noopScope(arg0, arg1) {\n    return null;\n}\n/**\n * Create trace scope.\n *\n * Scopes must be strictly nested and are analogous to stack frames, but\n * do not have to follow the stack frames. Instead it is recommended that they follow logical\n * nesting. You may want to use\n * [Event\n * Signatures](http://google.github.io/tracing-framework/instrumenting-code.html#custom-events)\n * as they are defined in WTF.\n *\n * Used to mark scope entry. The return value is used to leave the scope.\n *\n *     var myScope = wtfCreateScope('MyClass#myMethod(ascii someVal)');\n *\n *     someMethod() {\n *        var s = myScope('Foo'); // 'Foo' gets stored in tracing UI\n *        // DO SOME WORK HERE\n *        return wtfLeave(s, 123); // Return value 123\n *     }\n *\n * Note, adding try-finally block around the work to ensure that `wtfLeave` gets called can\n * negatively impact the performance of your application. For this reason we recommend that\n * you don't add them to ensure that `wtfLeave` gets called. In production `wtfLeave` is a noop and\n * so try-finally block has no value. When debugging perf issues, skipping `wtfLeave`, do to\n * exception, will produce incorrect trace, but presence of exception signifies logic error which\n * needs to be fixed before the app should be profiled. Add try-finally only when you expect that\n * an exception is expected during normal execution while profiling.\n *\n * @experimental\n */\nvar wtfCreateScope = wtfEnabled ? createScope : function (signature, flags) { return noopScope; };\n/**\n * Used to mark end of Scope.\n *\n * - `scope` to end.\n * - `returnValue` (optional) to be passed to the WTF.\n *\n * Returns the `returnValue for easy chaining.\n * @experimental\n */\nvar wtfLeave = wtfEnabled ? leave : function (s, r) { return r; };\n/**\n * Used to mark Async start. Async are similar to scope but they don't have to be strictly nested.\n * The return value is used in the call to [endAsync]. Async ranges only work if WTF has been\n * enabled.\n *\n *     someMethod() {\n *        var s = wtfStartTimeRange('HTTP:GET', 'some.url');\n *        var future = new Future.delay(5).then((_) {\n *          wtfEndTimeRange(s);\n *        });\n *     }\n * @experimental\n */\n\n/**\n * Ends a async time range operation.\n * [range] is the return value from [wtfStartTimeRange] Async ranges only work if WTF has been\n * enabled.\n * @experimental\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Use by directives and components to emit custom Events.\n *\n * ### Examples\n *\n * In the following example, `Zippy` alternatively emits `open` and `close` events when its\n * title gets clicked:\n *\n * ```\n * @Component({\n *   selector: 'zippy',\n *   template: `\n *   <div class=\"zippy\">\n *     <div (click)=\"toggle()\">Toggle</div>\n *     <div [hidden]=\"!visible\">\n *       <ng-content></ng-content>\n *     </div>\n *  </div>`})\n * export class Zippy {\n *   visible: boolean = true;\n *   @Output() open: EventEmitter<any> = new EventEmitter();\n *   @Output() close: EventEmitter<any> = new EventEmitter();\n *\n *   toggle() {\n *     this.visible = !this.visible;\n *     if (this.visible) {\n *       this.open.emit(null);\n *     } else {\n *       this.close.emit(null);\n *     }\n *   }\n * }\n * ```\n *\n * The events payload can be accessed by the parameter `$event` on the components output event\n * handler:\n *\n * ```\n * <zippy (open)=\"onOpen($event)\" (close)=\"onClose($event)\"></zippy>\n * ```\n *\n * Uses Rx.Observable but provides an adapter to make it work as specified here:\n * https://github.com/jhusain/observable-spec\n *\n * Once a reference implementation of the spec is available, switch to it.\n *\n */\nvar EventEmitter = /** @class */ (function (_super) {\n    __extends(EventEmitter, _super);\n    /**\n     * Creates an instance of {@link EventEmitter}, which depending on `isAsync`,\n     * delivers events synchronously or asynchronously.\n     *\n     * @param isAsync By default, events are delivered synchronously (default value: `false`).\n     * Set to `true` for asynchronous event delivery.\n     */\n    function EventEmitter(isAsync) {\n        if (isAsync === void 0) { isAsync = false; }\n        var _this = _super.call(this) || this;\n        _this.__isAsync = isAsync;\n        return _this;\n    }\n    EventEmitter.prototype.emit = function (value) { _super.prototype.next.call(this, value); };\n    EventEmitter.prototype.subscribe = function (generatorOrNext, error, complete) {\n        var schedulerFn;\n        var errorFn = function (err) { return null; };\n        var completeFn = function () { return null; };\n        if (generatorOrNext && typeof generatorOrNext === 'object') {\n            schedulerFn = this.__isAsync ? function (value) {\n                setTimeout(function () { return generatorOrNext.next(value); });\n            } : function (value) { generatorOrNext.next(value); };\n            if (generatorOrNext.error) {\n                errorFn = this.__isAsync ? function (err) { setTimeout(function () { return generatorOrNext.error(err); }); } :\n                    function (err) { generatorOrNext.error(err); };\n            }\n            if (generatorOrNext.complete) {\n                completeFn = this.__isAsync ? function () { setTimeout(function () { return generatorOrNext.complete(); }); } :\n                    function () { generatorOrNext.complete(); };\n            }\n        }\n        else {\n            schedulerFn = this.__isAsync ? function (value) { setTimeout(function () { return generatorOrNext(value); }); } :\n                function (value) { generatorOrNext(value); };\n            if (error) {\n                errorFn =\n                    this.__isAsync ? function (err) { setTimeout(function () { return error(err); }); } : function (err) { error(err); };\n            }\n            if (complete) {\n                completeFn =\n                    this.__isAsync ? function () { setTimeout(function () { return complete(); }); } : function () { complete(); };\n            }\n        }\n        var sink = _super.prototype.subscribe.call(this, schedulerFn, errorFn, completeFn);\n        if (generatorOrNext instanceof Subscription) {\n            generatorOrNext.add(sink);\n        }\n        return sink;\n    };\n    return EventEmitter;\n}(Subject));\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * An injectable service for executing work inside or outside of the Angular zone.\n *\n * The most common use of this service is to optimize performance when starting a work consisting of\n * one or more asynchronous tasks that don't require UI updates or error handling to be handled by\n * Angular. Such tasks can be kicked off via {@link #runOutsideAngular} and if needed, these tasks\n * can reenter the Angular zone via {@link #run}.\n *\n * <!-- TODO: add/fix links to:\n *   - docs explaining zones and the use of zones in Angular and change-detection\n *   - link to runOutsideAngular/run (throughout this file!)\n *   -->\n *\n * ### Example\n *\n * ```\n * import {Component, NgZone} from '@angular/core';\n * import {NgIf} from '@angular/common';\n *\n * @Component({\n *   selector: 'ng-zone-demo',\n *   template: `\n *     <h2>Demo: NgZone</h2>\n *\n *     <p>Progress: {{progress}}%</p>\n *     <p *ngIf=\"progress >= 100\">Done processing {{label}} of Angular zone!</p>\n *\n *     <button (click)=\"processWithinAngularZone()\">Process within Angular zone</button>\n *     <button (click)=\"processOutsideOfAngularZone()\">Process outside of Angular zone</button>\n *   `,\n * })\n * export class NgZoneDemo {\n *   progress: number = 0;\n *   label: string;\n *\n *   constructor(private _ngZone: NgZone) {}\n *\n *   // Loop inside the Angular zone\n *   // so the UI DOES refresh after each setTimeout cycle\n *   processWithinAngularZone() {\n *     this.label = 'inside';\n *     this.progress = 0;\n *     this._increaseProgress(() => console.log('Inside Done!'));\n *   }\n *\n *   // Loop outside of the Angular zone\n *   // so the UI DOES NOT refresh after each setTimeout cycle\n *   processOutsideOfAngularZone() {\n *     this.label = 'outside';\n *     this.progress = 0;\n *     this._ngZone.runOutsideAngular(() => {\n *       this._increaseProgress(() => {\n *         // reenter the Angular zone and display done\n *         this._ngZone.run(() => { console.log('Outside Done!'); });\n *       });\n *     });\n *   }\n *\n *   _increaseProgress(doneCallback: () => void) {\n *     this.progress += 1;\n *     console.log(`Current progress: ${this.progress}%`);\n *\n *     if (this.progress < 100) {\n *       window.setTimeout(() => this._increaseProgress(doneCallback), 10);\n *     } else {\n *       doneCallback();\n *     }\n *   }\n * }\n * ```\n *\n * @experimental\n */\nvar NgZone = /** @class */ (function () {\n    function NgZone(_a) {\n        var _b = _a.enableLongStackTrace, enableLongStackTrace = _b === void 0 ? false : _b;\n        this.hasPendingMicrotasks = false;\n        this.hasPendingMacrotasks = false;\n        /**\n           * Whether there are no outstanding microtasks or macrotasks.\n           */\n        this.isStable = true;\n        /**\n           * Notifies when code enters Angular Zone. This gets fired first on VM Turn.\n           */\n        this.onUnstable = new EventEmitter(false);\n        /**\n           * Notifies when there is no more microtasks enqueued in the current VM Turn.\n           * This is a hint for Angular to do change detection, which may enqueue more microtasks.\n           * For this reason this event can fire multiple times per VM Turn.\n           */\n        this.onMicrotaskEmpty = new EventEmitter(false);\n        /**\n           * Notifies when the last `onMicrotaskEmpty` has run and there are no more microtasks, which\n           * implies we are about to relinquish VM turn.\n           * This event gets called just once.\n           */\n        this.onStable = new EventEmitter(false);\n        /**\n           * Notifies that an error has been delivered.\n           */\n        this.onError = new EventEmitter(false);\n        if (typeof Zone == 'undefined') {\n            throw new Error(\"In this configuration Angular requires Zone.js\");\n        }\n        Zone.assertZonePatched();\n        var self = this;\n        self._nesting = 0;\n        self._outer = self._inner = Zone.current;\n        if (Zone['wtfZoneSpec']) {\n            self._inner = self._inner.fork(Zone['wtfZoneSpec']);\n        }\n        if (Zone['TaskTrackingZoneSpec']) {\n            self._inner = self._inner.fork(new Zone['TaskTrackingZoneSpec']);\n        }\n        if (enableLongStackTrace && Zone['longStackTraceZoneSpec']) {\n            self._inner = self._inner.fork(Zone['longStackTraceZoneSpec']);\n        }\n        forkInnerZoneWithAngularBehavior(self);\n    }\n    NgZone.isInAngularZone = function () { return Zone.current.get('isAngularZone') === true; };\n    NgZone.assertInAngularZone = function () {\n        if (!NgZone.isInAngularZone()) {\n            throw new Error('Expected to be in Angular Zone, but it is not!');\n        }\n    };\n    NgZone.assertNotInAngularZone = function () {\n        if (NgZone.isInAngularZone()) {\n            throw new Error('Expected to not be in Angular Zone, but it is!');\n        }\n    };\n    /**\n     * Executes the `fn` function synchronously within the Angular zone and returns value returned by\n     * the function.\n     *\n     * Running functions via `run` allows you to reenter Angular zone from a task that was executed\n     * outside of the Angular zone (typically started via {@link #runOutsideAngular}).\n     *\n     * Any future tasks or microtasks scheduled from within this function will continue executing from\n     * within the Angular zone.\n     *\n     * If a synchronous error happens it will be rethrown and not reported via `onError`.\n     */\n    /**\n       * Executes the `fn` function synchronously within the Angular zone and returns value returned by\n       * the function.\n       *\n       * Running functions via `run` allows you to reenter Angular zone from a task that was executed\n       * outside of the Angular zone (typically started via {@link #runOutsideAngular}).\n       *\n       * Any future tasks or microtasks scheduled from within this function will continue executing from\n       * within the Angular zone.\n       *\n       * If a synchronous error happens it will be rethrown and not reported via `onError`.\n       */\n    NgZone.prototype.run = /**\n       * Executes the `fn` function synchronously within the Angular zone and returns value returned by\n       * the function.\n       *\n       * Running functions via `run` allows you to reenter Angular zone from a task that was executed\n       * outside of the Angular zone (typically started via {@link #runOutsideAngular}).\n       *\n       * Any future tasks or microtasks scheduled from within this function will continue executing from\n       * within the Angular zone.\n       *\n       * If a synchronous error happens it will be rethrown and not reported via `onError`.\n       */\n    function (fn, applyThis, applyArgs) {\n        return this._inner.run(fn, applyThis, applyArgs);\n    };\n    /**\n     * Executes the `fn` function synchronously within the Angular zone as a task and returns value\n     * returned by the function.\n     *\n     * Running functions via `run` allows you to reenter Angular zone from a task that was executed\n     * outside of the Angular zone (typically started via {@link #runOutsideAngular}).\n     *\n     * Any future tasks or microtasks scheduled from within this function will continue executing from\n     * within the Angular zone.\n     *\n     * If a synchronous error happens it will be rethrown and not reported via `onError`.\n     */\n    /**\n       * Executes the `fn` function synchronously within the Angular zone as a task and returns value\n       * returned by the function.\n       *\n       * Running functions via `run` allows you to reenter Angular zone from a task that was executed\n       * outside of the Angular zone (typically started via {@link #runOutsideAngular}).\n       *\n       * Any future tasks or microtasks scheduled from within this function will continue executing from\n       * within the Angular zone.\n       *\n       * If a synchronous error happens it will be rethrown and not reported via `onError`.\n       */\n    NgZone.prototype.runTask = /**\n       * Executes the `fn` function synchronously within the Angular zone as a task and returns value\n       * returned by the function.\n       *\n       * Running functions via `run` allows you to reenter Angular zone from a task that was executed\n       * outside of the Angular zone (typically started via {@link #runOutsideAngular}).\n       *\n       * Any future tasks or microtasks scheduled from within this function will continue executing from\n       * within the Angular zone.\n       *\n       * If a synchronous error happens it will be rethrown and not reported via `onError`.\n       */\n    function (fn, applyThis, applyArgs, name) {\n        var zone = this._inner;\n        var task = zone.scheduleEventTask('NgZoneEvent: ' + name, fn, EMPTY_PAYLOAD, noop$2, noop$2);\n        try {\n            return zone.runTask(task, applyThis, applyArgs);\n        }\n        finally {\n            zone.cancelTask(task);\n        }\n    };\n    /**\n     * Same as `run`, except that synchronous errors are caught and forwarded via `onError` and not\n     * rethrown.\n     */\n    /**\n       * Same as `run`, except that synchronous errors are caught and forwarded via `onError` and not\n       * rethrown.\n       */\n    NgZone.prototype.runGuarded = /**\n       * Same as `run`, except that synchronous errors are caught and forwarded via `onError` and not\n       * rethrown.\n       */\n    function (fn, applyThis, applyArgs) {\n        return this._inner.runGuarded(fn, applyThis, applyArgs);\n    };\n    /**\n     * Executes the `fn` function synchronously in Angular's parent zone and returns value returned by\n     * the function.\n     *\n     * Running functions via {@link #runOutsideAngular} allows you to escape Angular's zone and do\n     * work that\n     * doesn't trigger Angular change-detection or is subject to Angular's error handling.\n     *\n     * Any future tasks or microtasks scheduled from within this function will continue executing from\n     * outside of the Angular zone.\n     *\n     * Use {@link #run} to reenter the Angular zone and do work that updates the application model.\n     */\n    /**\n       * Executes the `fn` function synchronously in Angular's parent zone and returns value returned by\n       * the function.\n       *\n       * Running functions via {@link #runOutsideAngular} allows you to escape Angular's zone and do\n       * work that\n       * doesn't trigger Angular change-detection or is subject to Angular's error handling.\n       *\n       * Any future tasks or microtasks scheduled from within this function will continue executing from\n       * outside of the Angular zone.\n       *\n       * Use {@link #run} to reenter the Angular zone and do work that updates the application model.\n       */\n    NgZone.prototype.runOutsideAngular = /**\n       * Executes the `fn` function synchronously in Angular's parent zone and returns value returned by\n       * the function.\n       *\n       * Running functions via {@link #runOutsideAngular} allows you to escape Angular's zone and do\n       * work that\n       * doesn't trigger Angular change-detection or is subject to Angular's error handling.\n       *\n       * Any future tasks or microtasks scheduled from within this function will continue executing from\n       * outside of the Angular zone.\n       *\n       * Use {@link #run} to reenter the Angular zone and do work that updates the application model.\n       */\n    function (fn) {\n        return this._outer.run(fn);\n    };\n    return NgZone;\n}());\nfunction noop$2() { }\nvar EMPTY_PAYLOAD = {};\nfunction checkStable(zone) {\n    if (zone._nesting == 0 && !zone.hasPendingMicrotasks && !zone.isStable) {\n        try {\n            zone._nesting++;\n            zone.onMicrotaskEmpty.emit(null);\n        }\n        finally {\n            zone._nesting--;\n            if (!zone.hasPendingMicrotasks) {\n                try {\n                    zone.runOutsideAngular(function () { return zone.onStable.emit(null); });\n                }\n                finally {\n                    zone.isStable = true;\n                }\n            }\n        }\n    }\n}\nfunction forkInnerZoneWithAngularBehavior(zone) {\n    zone._inner = zone._inner.fork({\n        name: 'angular',\n        properties: { 'isAngularZone': true },\n        onInvokeTask: function (delegate, current, target, task, applyThis, applyArgs) {\n            try {\n                onEnter(zone);\n                return delegate.invokeTask(target, task, applyThis, applyArgs);\n            }\n            finally {\n                onLeave(zone);\n            }\n        },\n        onInvoke: function (delegate, current, target, callback, applyThis, applyArgs, source) {\n            try {\n                onEnter(zone);\n                return delegate.invoke(target, callback, applyThis, applyArgs, source);\n            }\n            finally {\n                onLeave(zone);\n            }\n        },\n        onHasTask: function (delegate, current, target, hasTaskState) {\n            delegate.hasTask(target, hasTaskState);\n            if (current === target) {\n                // We are only interested in hasTask events which originate from our zone\n                // (A child hasTask event is not interesting to us)\n                if (hasTaskState.change == 'microTask') {\n                    zone.hasPendingMicrotasks = hasTaskState.microTask;\n                    checkStable(zone);\n                }\n                else if (hasTaskState.change == 'macroTask') {\n                    zone.hasPendingMacrotasks = hasTaskState.macroTask;\n                }\n            }\n        },\n        onHandleError: function (delegate, current, target, error) {\n            delegate.handleError(target, error);\n            zone.runOutsideAngular(function () { return zone.onError.emit(error); });\n            return false;\n        }\n    });\n}\nfunction onEnter(zone) {\n    zone._nesting++;\n    if (zone.isStable) {\n        zone.isStable = false;\n        zone.onUnstable.emit(null);\n    }\n}\nfunction onLeave(zone) {\n    zone._nesting--;\n    checkStable(zone);\n}\n/**\n * Provides a noop implementation of `NgZone` which does nothing. This zone requires explicit calls\n * to framework to perform rendering.\n */\nvar NoopNgZone = /** @class */ (function () {\n    function NoopNgZone() {\n        this.hasPendingMicrotasks = false;\n        this.hasPendingMacrotasks = false;\n        this.isStable = true;\n        this.onUnstable = new EventEmitter();\n        this.onMicrotaskEmpty = new EventEmitter();\n        this.onStable = new EventEmitter();\n        this.onError = new EventEmitter();\n    }\n    NoopNgZone.prototype.run = function (fn) { return fn(); };\n    NoopNgZone.prototype.runGuarded = function (fn) { return fn(); };\n    NoopNgZone.prototype.runOutsideAngular = function (fn) { return fn(); };\n    NoopNgZone.prototype.runTask = function (fn) { return fn(); };\n    return NoopNgZone;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * The Testability service provides testing hooks that can be accessed from\n * the browser and by services such as Protractor. Each bootstrapped Angular\n * application on the page will have an instance of Testability.\n * @experimental\n */\nvar Testability = /** @class */ (function () {\n    function Testability(_ngZone) {\n        var _this = this;\n        this._ngZone = _ngZone;\n        this._pendingCount = 0;\n        this._isZoneStable = true;\n        /**\n           * Whether any work was done since the last 'whenStable' callback. This is\n           * useful to detect if this could have potentially destabilized another\n           * component while it is stabilizing.\n           * @internal\n           */\n        this._didWork = false;\n        this._callbacks = [];\n        this._watchAngularEvents();\n        _ngZone.run(function () { _this.taskTrackingZone = Zone.current.get('TaskTrackingZone'); });\n    }\n    Testability.prototype._watchAngularEvents = function () {\n        var _this = this;\n        this._ngZone.onUnstable.subscribe({\n            next: function () {\n                _this._didWork = true;\n                _this._isZoneStable = false;\n            }\n        });\n        this._ngZone.runOutsideAngular(function () {\n            _this._ngZone.onStable.subscribe({\n                next: function () {\n                    NgZone.assertNotInAngularZone();\n                    scheduleMicroTask(function () {\n                        _this._isZoneStable = true;\n                        _this._runCallbacksIfReady();\n                    });\n                }\n            });\n        });\n    };\n    /**\n     * Increases the number of pending request\n     * @deprecated pending requests are now tracked with zones.\n     */\n    /**\n       * Increases the number of pending request\n       * @deprecated pending requests are now tracked with zones.\n       */\n    Testability.prototype.increasePendingRequestCount = /**\n       * Increases the number of pending request\n       * @deprecated pending requests are now tracked with zones.\n       */\n    function () {\n        this._pendingCount += 1;\n        this._didWork = true;\n        return this._pendingCount;\n    };\n    /**\n     * Decreases the number of pending request\n     * @deprecated pending requests are now tracked with zones\n     */\n    /**\n       * Decreases the number of pending request\n       * @deprecated pending requests are now tracked with zones\n       */\n    Testability.prototype.decreasePendingRequestCount = /**\n       * Decreases the number of pending request\n       * @deprecated pending requests are now tracked with zones\n       */\n    function () {\n        this._pendingCount -= 1;\n        if (this._pendingCount < 0) {\n            throw new Error('pending async requests below zero');\n        }\n        this._runCallbacksIfReady();\n        return this._pendingCount;\n    };\n    /**\n     * Whether an associated application is stable\n     */\n    /**\n       * Whether an associated application is stable\n       */\n    Testability.prototype.isStable = /**\n       * Whether an associated application is stable\n       */\n    function () {\n        return this._isZoneStable && this._pendingCount === 0 && !this._ngZone.hasPendingMacrotasks;\n    };\n    Testability.prototype._runCallbacksIfReady = function () {\n        var _this = this;\n        if (this.isStable()) {\n            // Schedules the call backs in a new frame so that it is always async.\n            scheduleMicroTask(function () {\n                while (_this._callbacks.length !== 0) {\n                    var cb = (_this._callbacks.pop());\n                    clearTimeout(cb.timeoutId);\n                    cb.doneCb(_this._didWork);\n                }\n                _this._didWork = false;\n            });\n        }\n        else {\n            // Still not stable, send updates.\n            var pending_1 = this.getPendingTasks();\n            this._callbacks = this._callbacks.filter(function (cb) {\n                if (cb.updateCb && cb.updateCb(pending_1)) {\n                    clearTimeout(cb.timeoutId);\n                    return false;\n                }\n                return true;\n            });\n            this._didWork = true;\n        }\n    };\n    Testability.prototype.getPendingTasks = function () {\n        if (!this.taskTrackingZone) {\n            return [];\n        }\n        return this.taskTrackingZone.macroTasks.map(function (t) {\n            return {\n                source: t.source,\n                isPeriodic: t.data.isPeriodic,\n                delay: t.data.delay,\n                // From TaskTrackingZone:\n                // https://github.com/angular/zone.js/blob/master/lib/zone-spec/task-tracking.ts#L40\n                creationLocation: t.creationLocation,\n                // Added by Zones for XHRs\n                // https://github.com/angular/zone.js/blob/master/lib/browser/browser.ts#L133\n                xhr: t.data.target\n            };\n        });\n    };\n    Testability.prototype.addCallback = function (cb, timeout, updateCb) {\n        var _this = this;\n        var timeoutId = -1;\n        if (timeout && timeout > 0) {\n            timeoutId = setTimeout(function () {\n                _this._callbacks = _this._callbacks.filter(function (cb) { return cb.timeoutId !== timeoutId; });\n                cb(_this._didWork, _this.getPendingTasks());\n            }, timeout);\n        }\n        this._callbacks.push({ doneCb: cb, timeoutId: timeoutId, updateCb: updateCb });\n    };\n    /**\n     * Wait for the application to be stable with a timeout. If the timeout is reached before that\n     * happens, the callback receives a list of the macro tasks that were pending, otherwise null.\n     *\n     * @param doneCb The callback to invoke when Angular is stable or the timeout expires\n     *    whichever comes first.\n     * @param timeout Optional. The maximum time to wait for Angular to become stable. If not\n     *    specified, whenStable() will wait forever.\n     * @param updateCb Optional. If specified, this callback will be invoked whenever the set of\n     *    pending macrotasks changes. If this callback returns true doneCb will not be invoked\n     *    and no further updates will be issued.\n     */\n    /**\n       * Wait for the application to be stable with a timeout. If the timeout is reached before that\n       * happens, the callback receives a list of the macro tasks that were pending, otherwise null.\n       *\n       * @param doneCb The callback to invoke when Angular is stable or the timeout expires\n       *    whichever comes first.\n       * @param timeout Optional. The maximum time to wait for Angular to become stable. If not\n       *    specified, whenStable() will wait forever.\n       * @param updateCb Optional. If specified, this callback will be invoked whenever the set of\n       *    pending macrotasks changes. If this callback returns true doneCb will not be invoked\n       *    and no further updates will be issued.\n       */\n    Testability.prototype.whenStable = /**\n       * Wait for the application to be stable with a timeout. If the timeout is reached before that\n       * happens, the callback receives a list of the macro tasks that were pending, otherwise null.\n       *\n       * @param doneCb The callback to invoke when Angular is stable or the timeout expires\n       *    whichever comes first.\n       * @param timeout Optional. The maximum time to wait for Angular to become stable. If not\n       *    specified, whenStable() will wait forever.\n       * @param updateCb Optional. If specified, this callback will be invoked whenever the set of\n       *    pending macrotasks changes. If this callback returns true doneCb will not be invoked\n       *    and no further updates will be issued.\n       */\n    function (doneCb, timeout, updateCb) {\n        if (updateCb && !this.taskTrackingZone) {\n            throw new Error('Task tracking zone is required when passing an update callback to ' +\n                'whenStable(). Is \"zone.js/dist/task-tracking.js\" loaded?');\n        }\n        // These arguments are 'Function' above to keep the public API simple.\n        this.addCallback(doneCb, timeout, updateCb);\n        this._runCallbacksIfReady();\n    };\n    /**\n     * Get the number of pending requests\n     * @deprecated pending requests are now tracked with zones\n     */\n    /**\n       * Get the number of pending requests\n       * @deprecated pending requests are now tracked with zones\n       */\n    Testability.prototype.getPendingRequestCount = /**\n       * Get the number of pending requests\n       * @deprecated pending requests are now tracked with zones\n       */\n    function () { return this._pendingCount; };\n    /**\n     * Find providers by name\n     * @param using The root element to search from\n     * @param provider The name of binding variable\n     * @param exactMatch Whether using exactMatch\n     */\n    /**\n       * Find providers by name\n       * @param using The root element to search from\n       * @param provider The name of binding variable\n       * @param exactMatch Whether using exactMatch\n       */\n    Testability.prototype.findProviders = /**\n       * Find providers by name\n       * @param using The root element to search from\n       * @param provider The name of binding variable\n       * @param exactMatch Whether using exactMatch\n       */\n    function (using, provider, exactMatch) {\n        // TODO(juliemr): implement.\n        return [];\n    };\n    Testability.decorators = [\n        { type: Injectable }\n    ];\n    /** @nocollapse */\n    Testability.ctorParameters = function () { return [\n        { type: NgZone, },\n    ]; };\n    return Testability;\n}());\n/**\n * A global registry of {@link Testability} instances for specific elements.\n * @experimental\n */\nvar TestabilityRegistry = /** @class */ (function () {\n    function TestabilityRegistry() {\n        /** @internal */\n        this._applications = new Map();\n        _testabilityGetter.addToWindow(this);\n    }\n    /**\n     * Registers an application with a testability hook so that it can be tracked\n     * @param token token of application, root element\n     * @param testability Testability hook\n     */\n    /**\n       * Registers an application with a testability hook so that it can be tracked\n       * @param token token of application, root element\n       * @param testability Testability hook\n       */\n    TestabilityRegistry.prototype.registerApplication = /**\n       * Registers an application with a testability hook so that it can be tracked\n       * @param token token of application, root element\n       * @param testability Testability hook\n       */\n    function (token, testability) {\n        this._applications.set(token, testability);\n    };\n    /**\n     * Unregisters an application.\n     * @param token token of application, root element\n     */\n    /**\n       * Unregisters an application.\n       * @param token token of application, root element\n       */\n    TestabilityRegistry.prototype.unregisterApplication = /**\n       * Unregisters an application.\n       * @param token token of application, root element\n       */\n    function (token) { this._applications.delete(token); };\n    /**\n     * Unregisters all applications\n     */\n    /**\n       * Unregisters all applications\n       */\n    TestabilityRegistry.prototype.unregisterAllApplications = /**\n       * Unregisters all applications\n       */\n    function () { this._applications.clear(); };\n    /**\n     * Get a testability hook associated with the application\n     * @param elem root element\n     */\n    /**\n       * Get a testability hook associated with the application\n       * @param elem root element\n       */\n    TestabilityRegistry.prototype.getTestability = /**\n       * Get a testability hook associated with the application\n       * @param elem root element\n       */\n    function (elem) { return this._applications.get(elem) || null; };\n    /**\n     * Get all registered testabilities\n     */\n    /**\n       * Get all registered testabilities\n       */\n    TestabilityRegistry.prototype.getAllTestabilities = /**\n       * Get all registered testabilities\n       */\n    function () { return Array.from(this._applications.values()); };\n    /**\n     * Get all registered applications(root elements)\n     */\n    /**\n       * Get all registered applications(root elements)\n       */\n    TestabilityRegistry.prototype.getAllRootElements = /**\n       * Get all registered applications(root elements)\n       */\n    function () { return Array.from(this._applications.keys()); };\n    /**\n     * Find testability of a node in the Tree\n     * @param elem node\n     * @param findInAncestors whether finding testability in ancestors if testability was not found in\n     * current node\n     */\n    /**\n       * Find testability of a node in the Tree\n       * @param elem node\n       * @param findInAncestors whether finding testability in ancestors if testability was not found in\n       * current node\n       */\n    TestabilityRegistry.prototype.findTestabilityInTree = /**\n       * Find testability of a node in the Tree\n       * @param elem node\n       * @param findInAncestors whether finding testability in ancestors if testability was not found in\n       * current node\n       */\n    function (elem, findInAncestors) {\n        if (findInAncestors === void 0) { findInAncestors = true; }\n        return _testabilityGetter.findTestabilityInTree(this, elem, findInAncestors);\n    };\n    TestabilityRegistry.decorators = [\n        { type: Injectable }\n    ];\n    /** @nocollapse */\n    TestabilityRegistry.ctorParameters = function () { return []; };\n    return TestabilityRegistry;\n}());\nvar _NoopGetTestability = /** @class */ (function () {\n    function _NoopGetTestability() {\n    }\n    _NoopGetTestability.prototype.addToWindow = function (registry) { };\n    _NoopGetTestability.prototype.findTestabilityInTree = function (registry, elem, findInAncestors) {\n        return null;\n    };\n    return _NoopGetTestability;\n}());\n/**\n * Set the {@link GetTestability} implementation used by the Angular testing framework.\n * @experimental\n */\n\nvar _testabilityGetter = new _NoopGetTestability();\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar _devMode = true;\nvar _platform;\nvar ALLOW_MULTIPLE_PLATFORMS = new InjectionToken('AllowMultipleToken');\n/**\n * Disable Angular's development mode, which turns off assertions and other\n * checks within the framework.\n *\n * One important assertion this disables verifies that a change detection pass\n * does not result in additional changes to any bindings (also known as\n * unidirectional data flow).\n *\n *\n */\n\n/**\n * Returns whether Angular is in development mode. After called once,\n * the value is locked and won't change any more.\n *\n * By default, this is true, unless a user calls `enableProdMode` before calling this.\n *\n * @experimental APIs related to application bootstrap are currently under review.\n */\nfunction isDevMode() {\n    return _devMode;\n}\n/**\n * Creates a platform.\n * Platforms have to be eagerly created via this function.\n *\n * @experimental APIs related to application bootstrap are currently under review.\n */\nfunction createPlatform(injector) {\n    if (_platform && !_platform.destroyed &&\n        !_platform.injector.get(ALLOW_MULTIPLE_PLATFORMS, false)) {\n        throw new Error('There can be only one platform. Destroy the previous one to create a new one.');\n    }\n    _platform = injector.get(PlatformRef);\n    var inits = injector.get(PLATFORM_INITIALIZER, null);\n    if (inits)\n        inits.forEach(function (init) { return init(); });\n    return _platform;\n}\n/**\n * Creates a factory for a platform\n *\n * @experimental APIs related to application bootstrap are currently under review.\n */\nfunction createPlatformFactory(parentPlatformFactory, name, providers) {\n    if (providers === void 0) { providers = []; }\n    var desc = \"Platform: \" + name;\n    var marker = new InjectionToken(desc);\n    return function (extraProviders) {\n        if (extraProviders === void 0) { extraProviders = []; }\n        var platform = getPlatform();\n        if (!platform || platform.injector.get(ALLOW_MULTIPLE_PLATFORMS, false)) {\n            if (parentPlatformFactory) {\n                parentPlatformFactory(providers.concat(extraProviders).concat({ provide: marker, useValue: true }));\n            }\n            else {\n                var injectedProviders = providers.concat(extraProviders).concat({ provide: marker, useValue: true });\n                createPlatform(Injector.create({ providers: injectedProviders, name: desc }));\n            }\n        }\n        return assertPlatform(marker);\n    };\n}\n/**\n * Checks that there currently is a platform which contains the given token as a provider.\n *\n * @experimental APIs related to application bootstrap are currently under review.\n */\nfunction assertPlatform(requiredToken) {\n    var platform = getPlatform();\n    if (!platform) {\n        throw new Error('No platform exists!');\n    }\n    if (!platform.injector.get(requiredToken, null)) {\n        throw new Error('A platform with a different configuration has been created. Please destroy it first.');\n    }\n    return platform;\n}\n/**\n * Destroy the existing platform.\n *\n * @experimental APIs related to application bootstrap are currently under review.\n */\n\n/**\n * Returns the current platform.\n *\n * @experimental APIs related to application bootstrap are currently under review.\n */\nfunction getPlatform() {\n    return _platform && !_platform.destroyed ? _platform : null;\n}\n/**\n * The Angular platform is the entry point for Angular on a web page. Each page\n * has exactly one platform, and services (such as reflection) which are common\n * to every Angular application running on the page are bound in its scope.\n *\n * A page's platform is initialized implicitly when a platform is created via a platform factory\n * (e.g. {@link platformBrowser}), or explicitly by calling the {@link createPlatform} function.\n *\n *\n */\nvar PlatformRef = /** @class */ (function () {\n    /** @internal */\n    function PlatformRef(_injector) {\n        this._injector = _injector;\n        this._modules = [];\n        this._destroyListeners = [];\n        this._destroyed = false;\n    }\n    /**\n     * Creates an instance of an `@NgModule` for the given platform\n     * for offline compilation.\n     *\n     * ## Simple Example\n     *\n     * ```typescript\n     * my_module.ts:\n     *\n     * @NgModule({\n     *   imports: [BrowserModule]\n     * })\n     * class MyModule {}\n     *\n     * main.ts:\n     * import {MyModuleNgFactory} from './my_module.ngfactory';\n     * import {platformBrowser} from '@angular/platform-browser';\n     *\n     * let moduleRef = platformBrowser().bootstrapModuleFactory(MyModuleNgFactory);\n     * ```\n     *\n     * @experimental APIs related to application bootstrap are currently under review.\n     */\n    /**\n       * Creates an instance of an `@NgModule` for the given platform\n       * for offline compilation.\n       *\n       * ## Simple Example\n       *\n       * ```typescript\n       * my_module.ts:\n       *\n       * @NgModule({\n       *   imports: [BrowserModule]\n       * })\n       * class MyModule {}\n       *\n       * main.ts:\n       * import {MyModuleNgFactory} from './my_module.ngfactory';\n       * import {platformBrowser} from '@angular/platform-browser';\n       *\n       * let moduleRef = platformBrowser().bootstrapModuleFactory(MyModuleNgFactory);\n       * ```\n       *\n       * @experimental APIs related to application bootstrap are currently under review.\n       */\n    PlatformRef.prototype.bootstrapModuleFactory = /**\n       * Creates an instance of an `@NgModule` for the given platform\n       * for offline compilation.\n       *\n       * ## Simple Example\n       *\n       * ```typescript\n       * my_module.ts:\n       *\n       * @NgModule({\n       *   imports: [BrowserModule]\n       * })\n       * class MyModule {}\n       *\n       * main.ts:\n       * import {MyModuleNgFactory} from './my_module.ngfactory';\n       * import {platformBrowser} from '@angular/platform-browser';\n       *\n       * let moduleRef = platformBrowser().bootstrapModuleFactory(MyModuleNgFactory);\n       * ```\n       *\n       * @experimental APIs related to application bootstrap are currently under review.\n       */\n    function (moduleFactory, options) {\n        var _this = this;\n        // Note: We need to create the NgZone _before_ we instantiate the module,\n        // as instantiating the module creates some providers eagerly.\n        // So we create a mini parent injector that just contains the new NgZone and\n        // pass that as parent to the NgModuleFactory.\n        var ngZoneOption = options ? options.ngZone : undefined;\n        var ngZone = getNgZone(ngZoneOption);\n        var providers = [{ provide: NgZone, useValue: ngZone }];\n        // Attention: Don't use ApplicationRef.run here,\n        // as we want to be sure that all possible constructor calls are inside `ngZone.run`!\n        return ngZone.run(function () {\n            var ngZoneInjector = Injector.create({ providers: providers, parent: _this.injector, name: moduleFactory.moduleType.name });\n            var moduleRef = moduleFactory.create(ngZoneInjector);\n            var exceptionHandler = moduleRef.injector.get(ErrorHandler, null);\n            if (!exceptionHandler) {\n                throw new Error('No ErrorHandler. Is platform module (BrowserModule) included?');\n            }\n            moduleRef.onDestroy(function () { return remove(_this._modules, moduleRef); });\n            ngZone.runOutsideAngular(function () {\n                return ngZone.onError.subscribe({ next: function (error) { exceptionHandler.handleError(error); } });\n            });\n            return _callAndReportToErrorHandler(exceptionHandler, (ngZone), function () {\n                var initStatus = moduleRef.injector.get(ApplicationInitStatus);\n                initStatus.runInitializers();\n                return initStatus.donePromise.then(function () {\n                    _this._moduleDoBootstrap(moduleRef);\n                    return moduleRef;\n                });\n            });\n        });\n    };\n    /**\n     * Creates an instance of an `@NgModule` for a given platform using the given runtime compiler.\n     *\n     * ## Simple Example\n     *\n     * ```typescript\n     * @NgModule({\n     *   imports: [BrowserModule]\n     * })\n     * class MyModule {}\n     *\n     * let moduleRef = platformBrowser().bootstrapModule(MyModule);\n     * ```\n     *\n     */\n    /**\n       * Creates an instance of an `@NgModule` for a given platform using the given runtime compiler.\n       *\n       * ## Simple Example\n       *\n       * ```typescript\n       * @NgModule({\n       *   imports: [BrowserModule]\n       * })\n       * class MyModule {}\n       *\n       * let moduleRef = platformBrowser().bootstrapModule(MyModule);\n       * ```\n       *\n       */\n    PlatformRef.prototype.bootstrapModule = /**\n       * Creates an instance of an `@NgModule` for a given platform using the given runtime compiler.\n       *\n       * ## Simple Example\n       *\n       * ```typescript\n       * @NgModule({\n       *   imports: [BrowserModule]\n       * })\n       * class MyModule {}\n       *\n       * let moduleRef = platformBrowser().bootstrapModule(MyModule);\n       * ```\n       *\n       */\n    function (moduleType, compilerOptions) {\n        var _this = this;\n        if (compilerOptions === void 0) { compilerOptions = []; }\n        var compilerFactory = this.injector.get(CompilerFactory);\n        var options = optionsReducer({}, compilerOptions);\n        var compiler = compilerFactory.createCompiler([options]);\n        return compiler.compileModuleAsync(moduleType)\n            .then(function (moduleFactory) { return _this.bootstrapModuleFactory(moduleFactory, options); });\n    };\n    PlatformRef.prototype._moduleDoBootstrap = function (moduleRef) {\n        var appRef = moduleRef.injector.get(ApplicationRef);\n        if (moduleRef._bootstrapComponents.length > 0) {\n            moduleRef._bootstrapComponents.forEach(function (f) { return appRef.bootstrap(f); });\n        }\n        else if (moduleRef.instance.ngDoBootstrap) {\n            moduleRef.instance.ngDoBootstrap(appRef);\n        }\n        else {\n            throw new Error(\"The module \" + stringify$1(moduleRef.instance.constructor) + \" was bootstrapped, but it does not declare \\\"@NgModule.bootstrap\\\" components nor a \\\"ngDoBootstrap\\\" method. \" +\n                \"Please define one of these.\");\n        }\n        this._modules.push(moduleRef);\n    };\n    /**\n     * Register a listener to be called when the platform is disposed.\n     */\n    /**\n       * Register a listener to be called when the platform is disposed.\n       */\n    PlatformRef.prototype.onDestroy = /**\n       * Register a listener to be called when the platform is disposed.\n       */\n    function (callback) { this._destroyListeners.push(callback); };\n    Object.defineProperty(PlatformRef.prototype, \"injector\", {\n        /**\n         * Retrieve the platform {@link Injector}, which is the parent injector for\n         * every Angular application on the page and provides singleton providers.\n         */\n        get: /**\n           * Retrieve the platform {@link Injector}, which is the parent injector for\n           * every Angular application on the page and provides singleton providers.\n           */\n        function () { return this._injector; },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * Destroy the Angular platform and all Angular applications on the page.\n     */\n    /**\n       * Destroy the Angular platform and all Angular applications on the page.\n       */\n    PlatformRef.prototype.destroy = /**\n       * Destroy the Angular platform and all Angular applications on the page.\n       */\n    function () {\n        if (this._destroyed) {\n            throw new Error('The platform has already been destroyed!');\n        }\n        this._modules.slice().forEach(function (module) { return module.destroy(); });\n        this._destroyListeners.forEach(function (listener) { return listener(); });\n        this._destroyed = true;\n    };\n    Object.defineProperty(PlatformRef.prototype, \"destroyed\", {\n        get: function () { return this._destroyed; },\n        enumerable: true,\n        configurable: true\n    });\n    PlatformRef.decorators = [\n        { type: Injectable }\n    ];\n    /** @nocollapse */\n    PlatformRef.ctorParameters = function () { return [\n        { type: Injector, },\n    ]; };\n    return PlatformRef;\n}());\nfunction getNgZone(ngZoneOption) {\n    var ngZone;\n    if (ngZoneOption === 'noop') {\n        ngZone = new NoopNgZone();\n    }\n    else {\n        ngZone = (ngZoneOption === 'zone.js' ? undefined : ngZoneOption) ||\n            new NgZone({ enableLongStackTrace: isDevMode() });\n    }\n    return ngZone;\n}\nfunction _callAndReportToErrorHandler(errorHandler, ngZone, callback) {\n    try {\n        var result = callback();\n        if (isPromise$2(result)) {\n            return result.catch(function (e) {\n                ngZone.runOutsideAngular(function () { return errorHandler.handleError(e); });\n                // rethrow as the exception handler might not do it\n                throw e;\n            });\n        }\n        return result;\n    }\n    catch (e) {\n        ngZone.runOutsideAngular(function () { return errorHandler.handleError(e); });\n        // rethrow as the exception handler might not do it\n        throw e;\n    }\n}\nfunction optionsReducer(dst, objs) {\n    if (Array.isArray(objs)) {\n        dst = objs.reduce(optionsReducer, dst);\n    }\n    else {\n        dst = __assign({}, dst, objs);\n    }\n    return dst;\n}\n/**\n * A reference to an Angular application running on a page.\n *\n *\n */\nvar ApplicationRef = /** @class */ (function () {\n    /** @internal */\n    function ApplicationRef(_zone, _console, _injector, _exceptionHandler, _componentFactoryResolver, _initStatus) {\n        var _this = this;\n        this._zone = _zone;\n        this._console = _console;\n        this._injector = _injector;\n        this._exceptionHandler = _exceptionHandler;\n        this._componentFactoryResolver = _componentFactoryResolver;\n        this._initStatus = _initStatus;\n        this._bootstrapListeners = [];\n        this._views = [];\n        this._runningTick = false;\n        this._enforceNoNewChanges = false;\n        this._stable = true;\n        /**\n           * Get a list of component types registered to this application.\n           * This list is populated even before the component is created.\n           */\n        this.componentTypes = [];\n        /**\n           * Get a list of components registered to this application.\n           */\n        this.components = [];\n        this._enforceNoNewChanges = isDevMode();\n        this._zone.onMicrotaskEmpty.subscribe({ next: function () { _this._zone.run(function () { _this.tick(); }); } });\n        var isCurrentlyStable = new Observable(function (observer) {\n            _this._stable = _this._zone.isStable && !_this._zone.hasPendingMacrotasks &&\n                !_this._zone.hasPendingMicrotasks;\n            _this._zone.runOutsideAngular(function () {\n                observer.next(_this._stable);\n                observer.complete();\n            });\n        });\n        var isStable = new Observable(function (observer) {\n            // Create the subscription to onStable outside the Angular Zone so that\n            // the callback is run outside the Angular Zone.\n            var stableSub;\n            _this._zone.runOutsideAngular(function () {\n                stableSub = _this._zone.onStable.subscribe(function () {\n                    NgZone.assertNotInAngularZone();\n                    // Check whether there are no pending macro/micro tasks in the next tick\n                    // to allow for NgZone to update the state.\n                    scheduleMicroTask(function () {\n                        if (!_this._stable && !_this._zone.hasPendingMacrotasks &&\n                            !_this._zone.hasPendingMicrotasks) {\n                            _this._stable = true;\n                            observer.next(true);\n                        }\n                    });\n                });\n            });\n            var unstableSub = _this._zone.onUnstable.subscribe(function () {\n                NgZone.assertInAngularZone();\n                if (_this._stable) {\n                    _this._stable = false;\n                    _this._zone.runOutsideAngular(function () { observer.next(false); });\n                }\n            });\n            return function () {\n                stableSub.unsubscribe();\n                unstableSub.unsubscribe();\n            };\n        });\n        this.isStable =\n            merge(isCurrentlyStable, isStable.pipe(share()));\n    }\n    /**\n     * Bootstrap a new component at the root level of the application.\n     *\n     * ### Bootstrap process\n     *\n     * When bootstrapping a new root component into an application, Angular mounts the\n     * specified application component onto DOM elements identified by the [componentType]'s\n     * selector and kicks off automatic change detection to finish initializing the component.\n     *\n     * Optionally, a component can be mounted onto a DOM element that does not match the\n     * [componentType]'s selector.\n     *\n     * ### Example\n     * {@example core/ts/platform/platform.ts region='longform'}\n     */\n    /**\n       * Bootstrap a new component at the root level of the application.\n       *\n       * ### Bootstrap process\n       *\n       * When bootstrapping a new root component into an application, Angular mounts the\n       * specified application component onto DOM elements identified by the [componentType]'s\n       * selector and kicks off automatic change detection to finish initializing the component.\n       *\n       * Optionally, a component can be mounted onto a DOM element that does not match the\n       * [componentType]'s selector.\n       *\n       * ### Example\n       * {@example core/ts/platform/platform.ts region='longform'}\n       */\n    ApplicationRef.prototype.bootstrap = /**\n       * Bootstrap a new component at the root level of the application.\n       *\n       * ### Bootstrap process\n       *\n       * When bootstrapping a new root component into an application, Angular mounts the\n       * specified application component onto DOM elements identified by the [componentType]'s\n       * selector and kicks off automatic change detection to finish initializing the component.\n       *\n       * Optionally, a component can be mounted onto a DOM element that does not match the\n       * [componentType]'s selector.\n       *\n       * ### Example\n       * {@example core/ts/platform/platform.ts region='longform'}\n       */\n    function (componentOrFactory, rootSelectorOrNode) {\n        var _this = this;\n        if (!this._initStatus.done) {\n            throw new Error('Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.');\n        }\n        var componentFactory;\n        if (componentOrFactory instanceof ComponentFactory) {\n            componentFactory = componentOrFactory;\n        }\n        else {\n            componentFactory =\n                (this._componentFactoryResolver.resolveComponentFactory(componentOrFactory));\n        }\n        this.componentTypes.push(componentFactory.componentType);\n        // Create a factory associated with the current module if it's not bound to some other\n        var ngModule = componentFactory instanceof ComponentFactoryBoundToModule ?\n            null :\n            this._injector.get(NgModuleRef);\n        var selectorOrNode = rootSelectorOrNode || componentFactory.selector;\n        var compRef = componentFactory.create(Injector.NULL, [], selectorOrNode, ngModule);\n        compRef.onDestroy(function () { _this._unloadComponent(compRef); });\n        var testability = compRef.injector.get(Testability, null);\n        if (testability) {\n            compRef.injector.get(TestabilityRegistry)\n                .registerApplication(compRef.location.nativeElement, testability);\n        }\n        this._loadComponent(compRef);\n        if (isDevMode()) {\n            this._console.log(\"Angular is running in the development mode. Call enableProdMode() to enable the production mode.\");\n        }\n        return compRef;\n    };\n    /**\n     * Invoke this method to explicitly process change detection and its side-effects.\n     *\n     * In development mode, `tick()` also performs a second change detection cycle to ensure that no\n     * further changes are detected. If additional changes are picked up during this second cycle,\n     * bindings in the app have side-effects that cannot be resolved in a single change detection\n     * pass.\n     * In this case, Angular throws an error, since an Angular application can only have one change\n     * detection pass during which all change detection must complete.\n     */\n    /**\n       * Invoke this method to explicitly process change detection and its side-effects.\n       *\n       * In development mode, `tick()` also performs a second change detection cycle to ensure that no\n       * further changes are detected. If additional changes are picked up during this second cycle,\n       * bindings in the app have side-effects that cannot be resolved in a single change detection\n       * pass.\n       * In this case, Angular throws an error, since an Angular application can only have one change\n       * detection pass during which all change detection must complete.\n       */\n    ApplicationRef.prototype.tick = /**\n       * Invoke this method to explicitly process change detection and its side-effects.\n       *\n       * In development mode, `tick()` also performs a second change detection cycle to ensure that no\n       * further changes are detected. If additional changes are picked up during this second cycle,\n       * bindings in the app have side-effects that cannot be resolved in a single change detection\n       * pass.\n       * In this case, Angular throws an error, since an Angular application can only have one change\n       * detection pass during which all change detection must complete.\n       */\n    function () {\n        var _this = this;\n        if (this._runningTick) {\n            throw new Error('ApplicationRef.tick is called recursively');\n        }\n        var scope = ApplicationRef._tickScope();\n        try {\n            this._runningTick = true;\n            this._views.forEach(function (view) { return view.detectChanges(); });\n            if (this._enforceNoNewChanges) {\n                this._views.forEach(function (view) { return view.checkNoChanges(); });\n            }\n        }\n        catch (e) {\n            // Attention: Don't rethrow as it could cancel subscriptions to Observables!\n            this._zone.runOutsideAngular(function () { return _this._exceptionHandler.handleError(e); });\n        }\n        finally {\n            this._runningTick = false;\n            wtfLeave(scope);\n        }\n    };\n    /**\n     * Attaches a view so that it will be dirty checked.\n     * The view will be automatically detached when it is destroyed.\n     * This will throw if the view is already attached to a ViewContainer.\n     */\n    /**\n       * Attaches a view so that it will be dirty checked.\n       * The view will be automatically detached when it is destroyed.\n       * This will throw if the view is already attached to a ViewContainer.\n       */\n    ApplicationRef.prototype.attachView = /**\n       * Attaches a view so that it will be dirty checked.\n       * The view will be automatically detached when it is destroyed.\n       * This will throw if the view is already attached to a ViewContainer.\n       */\n    function (viewRef) {\n        var view = viewRef;\n        this._views.push(view);\n        view.attachToAppRef(this);\n    };\n    /**\n     * Detaches a view from dirty checking again.\n     */\n    /**\n       * Detaches a view from dirty checking again.\n       */\n    ApplicationRef.prototype.detachView = /**\n       * Detaches a view from dirty checking again.\n       */\n    function (viewRef) {\n        var view = viewRef;\n        remove(this._views, view);\n        view.detachFromAppRef();\n    };\n    ApplicationRef.prototype._loadComponent = function (componentRef) {\n        this.attachView(componentRef.hostView);\n        this.tick();\n        this.components.push(componentRef);\n        // Get the listeners lazily to prevent DI cycles.\n        var listeners = this._injector.get(APP_BOOTSTRAP_LISTENER, []).concat(this._bootstrapListeners);\n        listeners.forEach(function (listener) { return listener(componentRef); });\n    };\n    ApplicationRef.prototype._unloadComponent = function (componentRef) {\n        this.detachView(componentRef.hostView);\n        remove(this.components, componentRef);\n    };\n    /** @internal */\n    /** @internal */\n    ApplicationRef.prototype.ngOnDestroy = /** @internal */\n    function () {\n        // TODO(alxhub): Dispose of the NgZone.\n        this._views.slice().forEach(function (view) { return view.destroy(); });\n    };\n    Object.defineProperty(ApplicationRef.prototype, \"viewCount\", {\n        /**\n         * Returns the number of attached views.\n         */\n        get: /**\n           * Returns the number of attached views.\n           */\n        function () { return this._views.length; },\n        enumerable: true,\n        configurable: true\n    });\n    /** @internal */\n    ApplicationRef._tickScope = wtfCreateScope('ApplicationRef#tick()');\n    ApplicationRef.decorators = [\n        { type: Injectable }\n    ];\n    /** @nocollapse */\n    ApplicationRef.ctorParameters = function () { return [\n        { type: NgZone, },\n        { type: Console, },\n        { type: Injector, },\n        { type: ErrorHandler, },\n        { type: ComponentFactoryResolver, },\n        { type: ApplicationInitStatus, },\n    ]; };\n    return ApplicationRef;\n}());\nfunction remove(list, el) {\n    var index = list.indexOf(el);\n    if (index > -1) {\n        list.splice(index, 1);\n    }\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * @deprecated Use the `Renderer2` instead.\n */\nvar Renderer = /** @class */ (function () {\n    function Renderer() {\n    }\n    return Renderer;\n}());\nvar Renderer2Interceptor = new InjectionToken('Renderer2Interceptor');\n/**\n * @experimental\n */\nvar RendererFactory2 = /** @class */ (function () {\n    function RendererFactory2() {\n    }\n    return RendererFactory2;\n}());\n/**\n * @experimental\n */\n/**\n * @experimental\n */\nvar RendererStyleFlags2;\n/**\n * @experimental\n */\n(function (RendererStyleFlags2) {\n    RendererStyleFlags2[RendererStyleFlags2[\"Important\"] = 1] = \"Important\";\n    RendererStyleFlags2[RendererStyleFlags2[\"DashCase\"] = 2] = \"DashCase\";\n})(RendererStyleFlags2 || (RendererStyleFlags2 = {}));\n/**\n * @experimental\n */\nvar Renderer2 = /** @class */ (function () {\n    function Renderer2() {\n    }\n    return Renderer2;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * A wrapper around a native element inside of a View.\n *\n * An `ElementRef` is backed by a render-specific element. In the browser, this is usually a DOM\n * element.\n *\n * @security Permitting direct access to the DOM can make your application more vulnerable to\n * XSS attacks. Carefully review any use of `ElementRef` in your code. For more detail, see the\n * [Security Guide](http://g.co/ng/security).\n *\n *\n */\n// Note: We don't expose things like `Injector`, `ViewContainer`, ... here,\n// i.e. users have to ask for what they need. With that, we can build better analysis tools\n// and could do better codegen in the future.\nvar ElementRef = /** @class */ (function () {\n    function ElementRef(nativeElement) {\n        this.nativeElement = nativeElement;\n    }\n    return ElementRef;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Used to load ng module factories.\n *\n */\n/**\n * Registers a loaded module. Should only be called from generated NgModuleFactory code.\n * @experimental\n */\n\n\n/**\n * Returns the NgModuleFactory with the given id, if it exists and has been loaded.\n * Factories for modules that do not specify an `id` cannot be retrieved. Throws if the module\n * cannot be found.\n * @experimental\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * An unmodifiable list of items that Angular keeps up to date when the state\n * of the application changes.\n *\n * The type of object that {@link ViewChildren}, {@link ContentChildren}, and {@link QueryList}\n * provide.\n *\n * Implements an iterable interface, therefore it can be used in both ES6\n * javascript `for (var i of items)` loops as well as in Angular templates with\n * `*ngFor=\"let i of myList\"`.\n *\n * Changes can be observed by subscribing to the changes `Observable`.\n *\n * NOTE: In the future this class will implement an `Observable` interface.\n *\n * ### Example ([live demo](http://plnkr.co/edit/RX8sJnQYl9FWuSCWme5z?p=preview))\n * ```typescript\n * @Component({...})\n * class Container {\n *   @ViewChildren(Item) items:QueryList<Item>;\n * }\n * ```\n *\n */\nvar QueryList = /** @class */ (function () {\n    function QueryList() {\n        this.dirty = true;\n        this._results = [];\n        this.changes = new EventEmitter();\n        this.length = 0;\n    }\n    /**\n     * See\n     * [Array.map](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map)\n     */\n    /**\n       * See\n       * [Array.map](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map)\n       */\n    QueryList.prototype.map = /**\n       * See\n       * [Array.map](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map)\n       */\n    function (fn) { return this._results.map(fn); };\n    /**\n     * See\n     * [Array.filter](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/filter)\n     */\n    /**\n       * See\n       * [Array.filter](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/filter)\n       */\n    QueryList.prototype.filter = /**\n       * See\n       * [Array.filter](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/filter)\n       */\n    function (fn) {\n        return this._results.filter(fn);\n    };\n    /**\n     * See\n     * [Array.find](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/find)\n     */\n    /**\n       * See\n       * [Array.find](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/find)\n       */\n    QueryList.prototype.find = /**\n       * See\n       * [Array.find](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/find)\n       */\n    function (fn) {\n        return this._results.find(fn);\n    };\n    /**\n     * See\n     * [Array.reduce](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/reduce)\n     */\n    /**\n       * See\n       * [Array.reduce](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/reduce)\n       */\n    QueryList.prototype.reduce = /**\n       * See\n       * [Array.reduce](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/reduce)\n       */\n    function (fn, init) {\n        return this._results.reduce(fn, init);\n    };\n    /**\n     * See\n     * [Array.forEach](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/forEach)\n     */\n    /**\n       * See\n       * [Array.forEach](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/forEach)\n       */\n    QueryList.prototype.forEach = /**\n       * See\n       * [Array.forEach](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/forEach)\n       */\n    function (fn) { this._results.forEach(fn); };\n    /**\n     * See\n     * [Array.some](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/some)\n     */\n    /**\n       * See\n       * [Array.some](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/some)\n       */\n    QueryList.prototype.some = /**\n       * See\n       * [Array.some](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/some)\n       */\n    function (fn) {\n        return this._results.some(fn);\n    };\n    QueryList.prototype.toArray = function () { return this._results.slice(); };\n    QueryList.prototype[getSymbolIterator()] = function () { return this._results[getSymbolIterator()](); };\n    QueryList.prototype.toString = function () { return this._results.toString(); };\n    QueryList.prototype.reset = function (res) {\n        this._results = flatten$2(res);\n        this.dirty = false;\n        this.length = this._results.length;\n        this.last = this._results[this.length - 1];\n        this.first = this._results[0];\n    };\n    QueryList.prototype.notifyOnChanges = function () { this.changes.emit(this); };\n    /** internal */\n    /** internal */\n    QueryList.prototype.setDirty = /** internal */\n    function () { this.dirty = true; };\n    /** internal */\n    /** internal */\n    QueryList.prototype.destroy = /** internal */\n    function () {\n        this.changes.complete();\n        this.changes.unsubscribe();\n    };\n    return QueryList;\n}());\nfunction flatten$2(list) {\n    return list.reduce(function (flat, item) {\n        var flatItem = Array.isArray(item) ? flatten$2(item) : item;\n        return flat.concat(flatItem);\n    }, []);\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Represents an Embedded Template that can be used to instantiate Embedded Views.\n *\n * You can access a `TemplateRef`, in two ways. Via a directive placed on a `<ng-template>` element\n * (or directive prefixed with `*`) and have the `TemplateRef` for this Embedded View injected into\n * the constructor of the directive using the `TemplateRef` Token. Alternatively you can query for\n * the `TemplateRef` from a Component or a Directive via {@link Query}.\n *\n * To instantiate Embedded Views based on a Template, use {@link ViewContainerRef#\n * createEmbeddedView}, which will create the View and attach it to the View Container.\n *\n */\nvar TemplateRef = /** @class */ (function () {\n    function TemplateRef() {\n    }\n    return TemplateRef;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Represents a container where one or more Views can be attached.\n *\n * The container can contain two kinds of Views. Host Views, created by instantiating a\n * {@link Component} via {@link #createComponent}, and Embedded Views, created by instantiating an\n * {@link TemplateRef Embedded Template} via {@link #createEmbeddedView}.\n *\n * The location of the View Container within the containing View is specified by the Anchor\n * `element`. Each View Container can have only one Anchor Element and each Anchor Element can only\n * have a single View Container.\n *\n * Root elements of Views attached to this container become siblings of the Anchor Element in\n * the Rendered View.\n *\n * To access a `ViewContainerRef` of an Element, you can either place a {@link Directive} injected\n * with `ViewContainerRef` on the Element, or you obtain it via a {@link ViewChild} query.\n *\n */\nvar ViewContainerRef = /** @class */ (function () {\n    function ViewContainerRef() {\n    }\n    return ViewContainerRef;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n *\n */\nvar ChangeDetectorRef = /** @class */ (function () {\n    function ChangeDetectorRef() {\n    }\n    return ChangeDetectorRef;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n *\n */\nvar ViewRef = /** @class */ (function (_super) {\n    __extends(ViewRef, _super);\n    function ViewRef() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    return ViewRef;\n}(ChangeDetectorRef));\n/**\n * Represents an Angular View.\n *\n * <!-- TODO: move the next two paragraphs to the dev guide -->\n * A View is a fundamental building block of the application UI. It is the smallest grouping of\n * Elements which are created and destroyed together.\n *\n * Properties of elements in a View can change, but the structure (number and order) of elements in\n * a View cannot. Changing the structure of Elements can only be done by inserting, moving or\n * removing nested Views via a {@link ViewContainerRef}. Each View can contain many View Containers.\n * <!-- /TODO -->\n *\n * ### Example\n *\n * Given this template...\n *\n * ```\n * Count: {{items.length}}\n * <ul>\n *   <li *ngFor=\"let  item of items\">{{item}}</li>\n * </ul>\n * ```\n *\n * We have two {@link TemplateRef}s:\n *\n * Outer {@link TemplateRef}:\n * ```\n * Count: {{items.length}}\n * <ul>\n *   <ng-template ngFor let-item [ngForOf]=\"items\"></ng-template>\n * </ul>\n * ```\n *\n * Inner {@link TemplateRef}:\n * ```\n *   <li>{{item}}</li>\n * ```\n *\n * Notice that the original template is broken down into two separate {@link TemplateRef}s.\n *\n * The outer/inner {@link TemplateRef}s are then assembled into views like so:\n *\n * ```\n * <!-- ViewRef: outer-0 -->\n * Count: 2\n * <ul>\n *   <ng-template view-container-ref></ng-template>\n *   <!-- ViewRef: inner-1 --><li>first</li><!-- /ViewRef: inner-1 -->\n *   <!-- ViewRef: inner-2 --><li>second</li><!-- /ViewRef: inner-2 -->\n * </ul>\n * <!-- /ViewRef: outer-0 -->\n * ```\n * @experimental\n */\nvar EmbeddedViewRef = /** @class */ (function (_super) {\n    __extends(EmbeddedViewRef, _super);\n    function EmbeddedViewRef() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    return EmbeddedViewRef;\n}(ViewRef));\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar EventListener = /** @class */ (function () {\n    function EventListener(name, callback) {\n        this.name = name;\n        this.callback = callback;\n    }\n    return EventListener;\n}());\n/**\n * @experimental All debugging apis are currently experimental.\n */\nvar DebugNode = /** @class */ (function () {\n    function DebugNode(nativeNode, parent, _debugContext) {\n        this._debugContext = _debugContext;\n        this.nativeNode = nativeNode;\n        if (parent && parent instanceof DebugElement) {\n            parent.addChild(this);\n        }\n        else {\n            this.parent = null;\n        }\n        this.listeners = [];\n    }\n    Object.defineProperty(DebugNode.prototype, \"injector\", {\n        get: function () { return this._debugContext.injector; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(DebugNode.prototype, \"componentInstance\", {\n        get: function () { return this._debugContext.component; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(DebugNode.prototype, \"context\", {\n        get: function () { return this._debugContext.context; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(DebugNode.prototype, \"references\", {\n        get: function () { return this._debugContext.references; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(DebugNode.prototype, \"providerTokens\", {\n        get: function () { return this._debugContext.providerTokens; },\n        enumerable: true,\n        configurable: true\n    });\n    return DebugNode;\n}());\n/**\n * @experimental All debugging apis are currently experimental.\n */\nvar DebugElement = /** @class */ (function (_super) {\n    __extends(DebugElement, _super);\n    function DebugElement(nativeNode, parent, _debugContext) {\n        var _this = _super.call(this, nativeNode, parent, _debugContext) || this;\n        _this.properties = {};\n        _this.attributes = {};\n        _this.classes = {};\n        _this.styles = {};\n        _this.childNodes = [];\n        _this.nativeElement = nativeNode;\n        return _this;\n    }\n    DebugElement.prototype.addChild = function (child) {\n        if (child) {\n            this.childNodes.push(child);\n            child.parent = this;\n        }\n    };\n    DebugElement.prototype.removeChild = function (child) {\n        var childIndex = this.childNodes.indexOf(child);\n        if (childIndex !== -1) {\n            child.parent = null;\n            this.childNodes.splice(childIndex, 1);\n        }\n    };\n    DebugElement.prototype.insertChildrenAfter = function (child, newChildren) {\n        var _this = this;\n        var siblingIndex = this.childNodes.indexOf(child);\n        if (siblingIndex !== -1) {\n            (_a = this.childNodes).splice.apply(_a, __spread([siblingIndex + 1, 0], newChildren));\n            newChildren.forEach(function (c) {\n                if (c.parent) {\n                    c.parent.removeChild(c);\n                }\n                c.parent = _this;\n            });\n        }\n        var _a;\n    };\n    DebugElement.prototype.insertBefore = function (refChild, newChild) {\n        var refIndex = this.childNodes.indexOf(refChild);\n        if (refIndex === -1) {\n            this.addChild(newChild);\n        }\n        else {\n            if (newChild.parent) {\n                newChild.parent.removeChild(newChild);\n            }\n            newChild.parent = this;\n            this.childNodes.splice(refIndex, 0, newChild);\n        }\n    };\n    DebugElement.prototype.query = function (predicate) {\n        var results = this.queryAll(predicate);\n        return results[0] || null;\n    };\n    DebugElement.prototype.queryAll = function (predicate) {\n        var matches = [];\n        _queryElementChildren(this, predicate, matches);\n        return matches;\n    };\n    DebugElement.prototype.queryAllNodes = function (predicate) {\n        var matches = [];\n        _queryNodeChildren(this, predicate, matches);\n        return matches;\n    };\n    Object.defineProperty(DebugElement.prototype, \"children\", {\n        get: function () {\n            return this.childNodes.filter(function (node) { return node instanceof DebugElement; });\n        },\n        enumerable: true,\n        configurable: true\n    });\n    DebugElement.prototype.triggerEventHandler = function (eventName, eventObj) {\n        this.listeners.forEach(function (listener) {\n            if (listener.name == eventName) {\n                listener.callback(eventObj);\n            }\n        });\n    };\n    return DebugElement;\n}(DebugNode));\n/**\n * @experimental\n */\n\nfunction _queryElementChildren(element, predicate, matches) {\n    element.childNodes.forEach(function (node) {\n        if (node instanceof DebugElement) {\n            if (predicate(node)) {\n                matches.push(node);\n            }\n            _queryElementChildren(node, predicate, matches);\n        }\n    });\n}\nfunction _queryNodeChildren(parentNode, predicate, matches) {\n    if (parentNode instanceof DebugElement) {\n        parentNode.childNodes.forEach(function (node) {\n            if (predicate(node)) {\n                matches.push(node);\n            }\n            if (node instanceof DebugElement) {\n                _queryNodeChildren(node, predicate, matches);\n            }\n        });\n    }\n}\n// Need to keep the nodes in a global Map so that multiple angular apps are supported.\nvar _nativeNodeToDebugNode = new Map();\n/**\n * @experimental\n */\nfunction getDebugNode(nativeNode) {\n    return _nativeNodeToDebugNode.get(nativeNode) || null;\n}\n\nfunction indexDebugNode(node) {\n    _nativeNodeToDebugNode.set(node.nativeNode, node);\n}\nfunction removeDebugNodeFromIndex(node) {\n    _nativeNodeToDebugNode.delete(node.nativeNode);\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nfunction devModeEqual(a, b) {\n    var isListLikeIterableA = isListLikeIterable(a);\n    var isListLikeIterableB = isListLikeIterable(b);\n    if (isListLikeIterableA && isListLikeIterableB) {\n        return areIterablesEqual(a, b, devModeEqual);\n    }\n    else {\n        var isAObject = a && (typeof a === 'object' || typeof a === 'function');\n        var isBObject = b && (typeof b === 'object' || typeof b === 'function');\n        if (!isListLikeIterableA && isAObject && !isListLikeIterableB && isBObject) {\n            return true;\n        }\n        else {\n            return looseIdentical(a, b);\n        }\n    }\n}\n/**\n * Indicates that the result of a {@link Pipe} transformation has changed even though the\n * reference has not changed.\n *\n * Wrapped values are unwrapped automatically during the change detection, and the unwrapped value\n * is stored.\n *\n * Example:\n *\n * ```\n * if (this._latestValue === this._latestReturnedValue) {\n *    return this._latestReturnedValue;\n *  } else {\n *    this._latestReturnedValue = this._latestValue;\n *    return WrappedValue.wrap(this._latestValue); // this will force update\n *  }\n * ```\n *\n */\nvar WrappedValue = /** @class */ (function () {\n    function WrappedValue(value) {\n        this.wrapped = value;\n    }\n    /** Creates a wrapped value. */\n    /** Creates a wrapped value. */\n    WrappedValue.wrap = /** Creates a wrapped value. */\n    function (value) { return new WrappedValue(value); };\n    /**\n     * Returns the underlying value of a wrapped value.\n     * Returns the given `value` when it is not wrapped.\n     **/\n    /**\n       * Returns the underlying value of a wrapped value.\n       * Returns the given `value` when it is not wrapped.\n       **/\n    WrappedValue.unwrap = /**\n       * Returns the underlying value of a wrapped value.\n       * Returns the given `value` when it is not wrapped.\n       **/\n    function (value) { return WrappedValue.isWrapped(value) ? value.wrapped : value; };\n    /** Returns true if `value` is a wrapped value. */\n    /** Returns true if `value` is a wrapped value. */\n    WrappedValue.isWrapped = /** Returns true if `value` is a wrapped value. */\n    function (value) { return value instanceof WrappedValue; };\n    return WrappedValue;\n}());\n/**\n * Represents a basic change from a previous to a new value.\n *\n */\nvar SimpleChange = /** @class */ (function () {\n    function SimpleChange(previousValue, currentValue, firstChange) {\n        this.previousValue = previousValue;\n        this.currentValue = currentValue;\n        this.firstChange = firstChange;\n    }\n    /**\n     * Check whether the new value is the first value assigned.\n     */\n    /**\n       * Check whether the new value is the first value assigned.\n       */\n    SimpleChange.prototype.isFirstChange = /**\n       * Check whether the new value is the first value assigned.\n       */\n    function () { return this.firstChange; };\n    return SimpleChange;\n}());\nfunction isListLikeIterable(obj) {\n    if (!isJsObject(obj))\n        return false;\n    return Array.isArray(obj) ||\n        (!(obj instanceof Map) && // JS Map are iterables but return entries as [k, v]\n            // JS Map are iterables but return entries as [k, v]\n            getSymbolIterator() in obj); // JS Iterable have a Symbol.iterator prop\n}\nfunction areIterablesEqual(a, b, comparator) {\n    var iterator1 = a[getSymbolIterator()]();\n    var iterator2 = b[getSymbolIterator()]();\n    while (true) {\n        var item1 = iterator1.next();\n        var item2 = iterator2.next();\n        if (item1.done && item2.done)\n            return true;\n        if (item1.done || item2.done)\n            return false;\n        if (!comparator(item1.value, item2.value))\n            return false;\n    }\n}\nfunction iterateListLike(obj, fn) {\n    if (Array.isArray(obj)) {\n        for (var i = 0; i < obj.length; i++) {\n            fn(obj[i]);\n        }\n    }\n    else {\n        var iterator = obj[getSymbolIterator()]();\n        var item = void 0;\n        while (!((item = iterator.next()).done)) {\n            fn(item.value);\n        }\n    }\n}\nfunction isJsObject(o) {\n    return o !== null && (typeof o === 'function' || typeof o === 'object');\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar DefaultIterableDifferFactory = /** @class */ (function () {\n    function DefaultIterableDifferFactory() {\n    }\n    DefaultIterableDifferFactory.prototype.supports = function (obj) { return isListLikeIterable(obj); };\n    DefaultIterableDifferFactory.prototype.create = function (trackByFn) {\n        return new DefaultIterableDiffer(trackByFn);\n    };\n    return DefaultIterableDifferFactory;\n}());\nvar trackByIdentity = function (index, item) { return item; };\n/**\n * @deprecated v4.0.0 - Should not be part of public API.\n */\nvar DefaultIterableDiffer = /** @class */ (function () {\n    function DefaultIterableDiffer(trackByFn) {\n        this.length = 0;\n        // Keeps track of the used records at any point in time (during & across `_check()` calls)\n        this._linkedRecords = null;\n        // Keeps track of the removed records at any point in time during `_check()` calls.\n        this._unlinkedRecords = null;\n        this._previousItHead = null;\n        this._itHead = null;\n        this._itTail = null;\n        this._additionsHead = null;\n        this._additionsTail = null;\n        this._movesHead = null;\n        this._movesTail = null;\n        this._removalsHead = null;\n        this._removalsTail = null;\n        // Keeps track of records where custom track by is the same, but item identity has changed\n        this._identityChangesHead = null;\n        this._identityChangesTail = null;\n        this._trackByFn = trackByFn || trackByIdentity;\n    }\n    DefaultIterableDiffer.prototype.forEachItem = function (fn) {\n        var record;\n        for (record = this._itHead; record !== null; record = record._next) {\n            fn(record);\n        }\n    };\n    DefaultIterableDiffer.prototype.forEachOperation = function (fn) {\n        var nextIt = this._itHead;\n        var nextRemove = this._removalsHead;\n        var addRemoveOffset = 0;\n        var moveOffsets = null;\n        while (nextIt || nextRemove) {\n            // Figure out which is the next record to process\n            // Order: remove, add, move\n            var record = !nextRemove ||\n                nextIt &&\n                    (nextIt.currentIndex) <\n                        getPreviousIndex(nextRemove, addRemoveOffset, moveOffsets) ?\n                nextIt :\n                nextRemove;\n            var adjPreviousIndex = getPreviousIndex(record, addRemoveOffset, moveOffsets);\n            var currentIndex = record.currentIndex;\n            // consume the item, and adjust the addRemoveOffset and update moveDistance if necessary\n            if (record === nextRemove) {\n                addRemoveOffset--;\n                nextRemove = nextRemove._nextRemoved;\n            }\n            else {\n                nextIt = nextIt._next;\n                if (record.previousIndex == null) {\n                    addRemoveOffset++;\n                }\n                else {\n                    // INVARIANT:  currentIndex < previousIndex\n                    if (!moveOffsets)\n                        moveOffsets = [];\n                    var localMovePreviousIndex = adjPreviousIndex - addRemoveOffset;\n                    var localCurrentIndex = (currentIndex) - addRemoveOffset;\n                    if (localMovePreviousIndex != localCurrentIndex) {\n                        for (var i = 0; i < localMovePreviousIndex; i++) {\n                            var offset = i < moveOffsets.length ? moveOffsets[i] : (moveOffsets[i] = 0);\n                            var index = offset + i;\n                            if (localCurrentIndex <= index && index < localMovePreviousIndex) {\n                                moveOffsets[i] = offset + 1;\n                            }\n                        }\n                        var previousIndex = record.previousIndex;\n                        moveOffsets[previousIndex] = localCurrentIndex - localMovePreviousIndex;\n                    }\n                }\n            }\n            if (adjPreviousIndex !== currentIndex) {\n                fn(record, adjPreviousIndex, currentIndex);\n            }\n        }\n    };\n    DefaultIterableDiffer.prototype.forEachPreviousItem = function (fn) {\n        var record;\n        for (record = this._previousItHead; record !== null; record = record._nextPrevious) {\n            fn(record);\n        }\n    };\n    DefaultIterableDiffer.prototype.forEachAddedItem = function (fn) {\n        var record;\n        for (record = this._additionsHead; record !== null; record = record._nextAdded) {\n            fn(record);\n        }\n    };\n    DefaultIterableDiffer.prototype.forEachMovedItem = function (fn) {\n        var record;\n        for (record = this._movesHead; record !== null; record = record._nextMoved) {\n            fn(record);\n        }\n    };\n    DefaultIterableDiffer.prototype.forEachRemovedItem = function (fn) {\n        var record;\n        for (record = this._removalsHead; record !== null; record = record._nextRemoved) {\n            fn(record);\n        }\n    };\n    DefaultIterableDiffer.prototype.forEachIdentityChange = function (fn) {\n        var record;\n        for (record = this._identityChangesHead; record !== null; record = record._nextIdentityChange) {\n            fn(record);\n        }\n    };\n    DefaultIterableDiffer.prototype.diff = function (collection) {\n        if (collection == null)\n            collection = [];\n        if (!isListLikeIterable(collection)) {\n            throw new Error(\"Error trying to diff '\" + stringify$1(collection) + \"'. Only arrays and iterables are allowed\");\n        }\n        if (this.check(collection)) {\n            return this;\n        }\n        else {\n            return null;\n        }\n    };\n    DefaultIterableDiffer.prototype.onDestroy = function () { };\n    DefaultIterableDiffer.prototype.check = function (collection) {\n        var _this = this;\n        this._reset();\n        var record = this._itHead;\n        var mayBeDirty = false;\n        var index;\n        var item;\n        var itemTrackBy;\n        if (Array.isArray(collection)) {\n            this.length = collection.length;\n            for (var index_1 = 0; index_1 < this.length; index_1++) {\n                item = collection[index_1];\n                itemTrackBy = this._trackByFn(index_1, item);\n                if (record === null || !looseIdentical(record.trackById, itemTrackBy)) {\n                    record = this._mismatch(record, item, itemTrackBy, index_1);\n                    mayBeDirty = true;\n                }\n                else {\n                    if (mayBeDirty) {\n                        // TODO(misko): can we limit this to duplicates only?\n                        record = this._verifyReinsertion(record, item, itemTrackBy, index_1);\n                    }\n                    if (!looseIdentical(record.item, item))\n                        this._addIdentityChange(record, item);\n                }\n                record = record._next;\n            }\n        }\n        else {\n            index = 0;\n            iterateListLike(collection, function (item) {\n                itemTrackBy = _this._trackByFn(index, item);\n                if (record === null || !looseIdentical(record.trackById, itemTrackBy)) {\n                    record = _this._mismatch(record, item, itemTrackBy, index);\n                    mayBeDirty = true;\n                }\n                else {\n                    if (mayBeDirty) {\n                        // TODO(misko): can we limit this to duplicates only?\n                        record = _this._verifyReinsertion(record, item, itemTrackBy, index);\n                    }\n                    if (!looseIdentical(record.item, item))\n                        _this._addIdentityChange(record, item);\n                }\n                record = record._next;\n                index++;\n            });\n            this.length = index;\n        }\n        this._truncate(record);\n        this.collection = collection;\n        return this.isDirty;\n    };\n    Object.defineProperty(DefaultIterableDiffer.prototype, \"isDirty\", {\n        /* CollectionChanges is considered dirty if it has any additions, moves, removals, or identity\n         * changes.\n         */\n        get: /* CollectionChanges is considered dirty if it has any additions, moves, removals, or identity\n           * changes.\n           */\n        function () {\n            return this._additionsHead !== null || this._movesHead !== null ||\n                this._removalsHead !== null || this._identityChangesHead !== null;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * Reset the state of the change objects to show no changes. This means set previousKey to\n     * currentKey, and clear all of the queues (additions, moves, removals).\n     * Set the previousIndexes of moved and added items to their currentIndexes\n     * Reset the list of additions, moves and removals\n     *\n     * @internal\n     */\n    /**\n       * Reset the state of the change objects to show no changes. This means set previousKey to\n       * currentKey, and clear all of the queues (additions, moves, removals).\n       * Set the previousIndexes of moved and added items to their currentIndexes\n       * Reset the list of additions, moves and removals\n       *\n       * @internal\n       */\n    DefaultIterableDiffer.prototype._reset = /**\n       * Reset the state of the change objects to show no changes. This means set previousKey to\n       * currentKey, and clear all of the queues (additions, moves, removals).\n       * Set the previousIndexes of moved and added items to their currentIndexes\n       * Reset the list of additions, moves and removals\n       *\n       * @internal\n       */\n    function () {\n        if (this.isDirty) {\n            var record = void 0;\n            var nextRecord = void 0;\n            for (record = this._previousItHead = this._itHead; record !== null; record = record._next) {\n                record._nextPrevious = record._next;\n            }\n            for (record = this._additionsHead; record !== null; record = record._nextAdded) {\n                record.previousIndex = record.currentIndex;\n            }\n            this._additionsHead = this._additionsTail = null;\n            for (record = this._movesHead; record !== null; record = nextRecord) {\n                record.previousIndex = record.currentIndex;\n                nextRecord = record._nextMoved;\n            }\n            this._movesHead = this._movesTail = null;\n            this._removalsHead = this._removalsTail = null;\n            this._identityChangesHead = this._identityChangesTail = null;\n            // todo(vicb) when assert gets supported\n            // assert(!this.isDirty);\n        }\n    };\n    /**\n     * This is the core function which handles differences between collections.\n     *\n     * - `record` is the record which we saw at this position last time. If null then it is a new\n     *   item.\n     * - `item` is the current item in the collection\n     * - `index` is the position of the item in the collection\n     *\n     * @internal\n     */\n    /**\n       * This is the core function which handles differences between collections.\n       *\n       * - `record` is the record which we saw at this position last time. If null then it is a new\n       *   item.\n       * - `item` is the current item in the collection\n       * - `index` is the position of the item in the collection\n       *\n       * @internal\n       */\n    DefaultIterableDiffer.prototype._mismatch = /**\n       * This is the core function which handles differences between collections.\n       *\n       * - `record` is the record which we saw at this position last time. If null then it is a new\n       *   item.\n       * - `item` is the current item in the collection\n       * - `index` is the position of the item in the collection\n       *\n       * @internal\n       */\n    function (record, item, itemTrackBy, index) {\n        // The previous record after which we will append the current one.\n        var previousRecord;\n        if (record === null) {\n            previousRecord = this._itTail;\n        }\n        else {\n            previousRecord = record._prev;\n            // Remove the record from the collection since we know it does not match the item.\n            this._remove(record);\n        }\n        // Attempt to see if we have seen the item before.\n        record = this._linkedRecords === null ? null : this._linkedRecords.get(itemTrackBy, index);\n        if (record !== null) {\n            // We have seen this before, we need to move it forward in the collection.\n            // But first we need to check if identity changed, so we can update in view if necessary\n            if (!looseIdentical(record.item, item))\n                this._addIdentityChange(record, item);\n            this._moveAfter(record, previousRecord, index);\n        }\n        else {\n            // Never seen it, check evicted list.\n            record = this._unlinkedRecords === null ? null : this._unlinkedRecords.get(itemTrackBy, null);\n            if (record !== null) {\n                // It is an item which we have evicted earlier: reinsert it back into the list.\n                // But first we need to check if identity changed, so we can update in view if necessary\n                if (!looseIdentical(record.item, item))\n                    this._addIdentityChange(record, item);\n                this._reinsertAfter(record, previousRecord, index);\n            }\n            else {\n                // It is a new item: add it.\n                record =\n                    this._addAfter(new IterableChangeRecord_(item, itemTrackBy), previousRecord, index);\n            }\n        }\n        return record;\n    };\n    /**\n     * This check is only needed if an array contains duplicates. (Short circuit of nothing dirty)\n     *\n     * Use case: `[a, a]` => `[b, a, a]`\n     *\n     * If we did not have this check then the insertion of `b` would:\n     *   1) evict first `a`\n     *   2) insert `b` at `0` index.\n     *   3) leave `a` at index `1` as is. <-- this is wrong!\n     *   3) reinsert `a` at index 2. <-- this is wrong!\n     *\n     * The correct behavior is:\n     *   1) evict first `a`\n     *   2) insert `b` at `0` index.\n     *   3) reinsert `a` at index 1.\n     *   3) move `a` at from `1` to `2`.\n     *\n     *\n     * Double check that we have not evicted a duplicate item. We need to check if the item type may\n     * have already been removed:\n     * The insertion of b will evict the first 'a'. If we don't reinsert it now it will be reinserted\n     * at the end. Which will show up as the two 'a's switching position. This is incorrect, since a\n     * better way to think of it is as insert of 'b' rather then switch 'a' with 'b' and then add 'a'\n     * at the end.\n     *\n     * @internal\n     */\n    /**\n       * This check is only needed if an array contains duplicates. (Short circuit of nothing dirty)\n       *\n       * Use case: `[a, a]` => `[b, a, a]`\n       *\n       * If we did not have this check then the insertion of `b` would:\n       *   1) evict first `a`\n       *   2) insert `b` at `0` index.\n       *   3) leave `a` at index `1` as is. <-- this is wrong!\n       *   3) reinsert `a` at index 2. <-- this is wrong!\n       *\n       * The correct behavior is:\n       *   1) evict first `a`\n       *   2) insert `b` at `0` index.\n       *   3) reinsert `a` at index 1.\n       *   3) move `a` at from `1` to `2`.\n       *\n       *\n       * Double check that we have not evicted a duplicate item. We need to check if the item type may\n       * have already been removed:\n       * The insertion of b will evict the first 'a'. If we don't reinsert it now it will be reinserted\n       * at the end. Which will show up as the two 'a's switching position. This is incorrect, since a\n       * better way to think of it is as insert of 'b' rather then switch 'a' with 'b' and then add 'a'\n       * at the end.\n       *\n       * @internal\n       */\n    DefaultIterableDiffer.prototype._verifyReinsertion = /**\n       * This check is only needed if an array contains duplicates. (Short circuit of nothing dirty)\n       *\n       * Use case: `[a, a]` => `[b, a, a]`\n       *\n       * If we did not have this check then the insertion of `b` would:\n       *   1) evict first `a`\n       *   2) insert `b` at `0` index.\n       *   3) leave `a` at index `1` as is. <-- this is wrong!\n       *   3) reinsert `a` at index 2. <-- this is wrong!\n       *\n       * The correct behavior is:\n       *   1) evict first `a`\n       *   2) insert `b` at `0` index.\n       *   3) reinsert `a` at index 1.\n       *   3) move `a` at from `1` to `2`.\n       *\n       *\n       * Double check that we have not evicted a duplicate item. We need to check if the item type may\n       * have already been removed:\n       * The insertion of b will evict the first 'a'. If we don't reinsert it now it will be reinserted\n       * at the end. Which will show up as the two 'a's switching position. This is incorrect, since a\n       * better way to think of it is as insert of 'b' rather then switch 'a' with 'b' and then add 'a'\n       * at the end.\n       *\n       * @internal\n       */\n    function (record, item, itemTrackBy, index) {\n        var reinsertRecord = this._unlinkedRecords === null ? null : this._unlinkedRecords.get(itemTrackBy, null);\n        if (reinsertRecord !== null) {\n            record = this._reinsertAfter(reinsertRecord, (record._prev), index);\n        }\n        else if (record.currentIndex != index) {\n            record.currentIndex = index;\n            this._addToMoves(record, index);\n        }\n        return record;\n    };\n    /**\n     * Get rid of any excess {@link IterableChangeRecord_}s from the previous collection\n     *\n     * - `record` The first excess {@link IterableChangeRecord_}.\n     *\n     * @internal\n     */\n    /**\n       * Get rid of any excess {@link IterableChangeRecord_}s from the previous collection\n       *\n       * - `record` The first excess {@link IterableChangeRecord_}.\n       *\n       * @internal\n       */\n    DefaultIterableDiffer.prototype._truncate = /**\n       * Get rid of any excess {@link IterableChangeRecord_}s from the previous collection\n       *\n       * - `record` The first excess {@link IterableChangeRecord_}.\n       *\n       * @internal\n       */\n    function (record) {\n        // Anything after that needs to be removed;\n        while (record !== null) {\n            var nextRecord = record._next;\n            this._addToRemovals(this._unlink(record));\n            record = nextRecord;\n        }\n        if (this._unlinkedRecords !== null) {\n            this._unlinkedRecords.clear();\n        }\n        if (this._additionsTail !== null) {\n            this._additionsTail._nextAdded = null;\n        }\n        if (this._movesTail !== null) {\n            this._movesTail._nextMoved = null;\n        }\n        if (this._itTail !== null) {\n            this._itTail._next = null;\n        }\n        if (this._removalsTail !== null) {\n            this._removalsTail._nextRemoved = null;\n        }\n        if (this._identityChangesTail !== null) {\n            this._identityChangesTail._nextIdentityChange = null;\n        }\n    };\n    /** @internal */\n    /** @internal */\n    DefaultIterableDiffer.prototype._reinsertAfter = /** @internal */\n    function (record, prevRecord, index) {\n        if (this._unlinkedRecords !== null) {\n            this._unlinkedRecords.remove(record);\n        }\n        var prev = record._prevRemoved;\n        var next = record._nextRemoved;\n        if (prev === null) {\n            this._removalsHead = next;\n        }\n        else {\n            prev._nextRemoved = next;\n        }\n        if (next === null) {\n            this._removalsTail = prev;\n        }\n        else {\n            next._prevRemoved = prev;\n        }\n        this._insertAfter(record, prevRecord, index);\n        this._addToMoves(record, index);\n        return record;\n    };\n    /** @internal */\n    /** @internal */\n    DefaultIterableDiffer.prototype._moveAfter = /** @internal */\n    function (record, prevRecord, index) {\n        this._unlink(record);\n        this._insertAfter(record, prevRecord, index);\n        this._addToMoves(record, index);\n        return record;\n    };\n    /** @internal */\n    /** @internal */\n    DefaultIterableDiffer.prototype._addAfter = /** @internal */\n    function (record, prevRecord, index) {\n        this._insertAfter(record, prevRecord, index);\n        if (this._additionsTail === null) {\n            // todo(vicb)\n            // assert(this._additionsHead === null);\n            this._additionsTail = this._additionsHead = record;\n        }\n        else {\n            // todo(vicb)\n            // assert(_additionsTail._nextAdded === null);\n            // assert(record._nextAdded === null);\n            this._additionsTail = this._additionsTail._nextAdded = record;\n        }\n        return record;\n    };\n    /** @internal */\n    /** @internal */\n    DefaultIterableDiffer.prototype._insertAfter = /** @internal */\n    function (record, prevRecord, index) {\n        // todo(vicb)\n        // assert(record != prevRecord);\n        // assert(record._next === null);\n        // assert(record._prev === null);\n        var next = prevRecord === null ? this._itHead : prevRecord._next;\n        // todo(vicb)\n        // assert(next != record);\n        // assert(prevRecord != record);\n        record._next = next;\n        record._prev = prevRecord;\n        if (next === null) {\n            this._itTail = record;\n        }\n        else {\n            next._prev = record;\n        }\n        if (prevRecord === null) {\n            this._itHead = record;\n        }\n        else {\n            prevRecord._next = record;\n        }\n        if (this._linkedRecords === null) {\n            this._linkedRecords = new _DuplicateMap();\n        }\n        this._linkedRecords.put(record);\n        record.currentIndex = index;\n        return record;\n    };\n    /** @internal */\n    /** @internal */\n    DefaultIterableDiffer.prototype._remove = /** @internal */\n    function (record) {\n        return this._addToRemovals(this._unlink(record));\n    };\n    /** @internal */\n    /** @internal */\n    DefaultIterableDiffer.prototype._unlink = /** @internal */\n    function (record) {\n        if (this._linkedRecords !== null) {\n            this._linkedRecords.remove(record);\n        }\n        var prev = record._prev;\n        var next = record._next;\n        // todo(vicb)\n        // assert((record._prev = null) === null);\n        // assert((record._next = null) === null);\n        if (prev === null) {\n            this._itHead = next;\n        }\n        else {\n            prev._next = next;\n        }\n        if (next === null) {\n            this._itTail = prev;\n        }\n        else {\n            next._prev = prev;\n        }\n        return record;\n    };\n    /** @internal */\n    /** @internal */\n    DefaultIterableDiffer.prototype._addToMoves = /** @internal */\n    function (record, toIndex) {\n        // todo(vicb)\n        // assert(record._nextMoved === null);\n        if (record.previousIndex === toIndex) {\n            return record;\n        }\n        if (this._movesTail === null) {\n            // todo(vicb)\n            // assert(_movesHead === null);\n            this._movesTail = this._movesHead = record;\n        }\n        else {\n            // todo(vicb)\n            // assert(_movesTail._nextMoved === null);\n            this._movesTail = this._movesTail._nextMoved = record;\n        }\n        return record;\n    };\n    DefaultIterableDiffer.prototype._addToRemovals = function (record) {\n        if (this._unlinkedRecords === null) {\n            this._unlinkedRecords = new _DuplicateMap();\n        }\n        this._unlinkedRecords.put(record);\n        record.currentIndex = null;\n        record._nextRemoved = null;\n        if (this._removalsTail === null) {\n            // todo(vicb)\n            // assert(_removalsHead === null);\n            this._removalsTail = this._removalsHead = record;\n            record._prevRemoved = null;\n        }\n        else {\n            // todo(vicb)\n            // assert(_removalsTail._nextRemoved === null);\n            // assert(record._nextRemoved === null);\n            record._prevRemoved = this._removalsTail;\n            this._removalsTail = this._removalsTail._nextRemoved = record;\n        }\n        return record;\n    };\n    /** @internal */\n    /** @internal */\n    DefaultIterableDiffer.prototype._addIdentityChange = /** @internal */\n    function (record, item) {\n        record.item = item;\n        if (this._identityChangesTail === null) {\n            this._identityChangesTail = this._identityChangesHead = record;\n        }\n        else {\n            this._identityChangesTail = this._identityChangesTail._nextIdentityChange = record;\n        }\n        return record;\n    };\n    return DefaultIterableDiffer;\n}());\n/**\n *\n */\nvar IterableChangeRecord_ = /** @class */ (function () {\n    function IterableChangeRecord_(item, trackById) {\n        this.item = item;\n        this.trackById = trackById;\n        this.currentIndex = null;\n        this.previousIndex = null;\n        /** @internal */\n        this._nextPrevious = null;\n        /** @internal */\n        this._prev = null;\n        /** @internal */\n        this._next = null;\n        /** @internal */\n        this._prevDup = null;\n        /** @internal */\n        this._nextDup = null;\n        /** @internal */\n        this._prevRemoved = null;\n        /** @internal */\n        this._nextRemoved = null;\n        /** @internal */\n        this._nextAdded = null;\n        /** @internal */\n        this._nextMoved = null;\n        /** @internal */\n        this._nextIdentityChange = null;\n    }\n    return IterableChangeRecord_;\n}());\n// A linked list of CollectionChangeRecords with the same IterableChangeRecord_.item\nvar _DuplicateItemRecordList = /** @class */ (function () {\n    function _DuplicateItemRecordList() {\n        /** @internal */\n        this._head = null;\n        /** @internal */\n        this._tail = null;\n    }\n    /**\n     * Append the record to the list of duplicates.\n     *\n     * Note: by design all records in the list of duplicates hold the same value in record.item.\n     */\n    /**\n       * Append the record to the list of duplicates.\n       *\n       * Note: by design all records in the list of duplicates hold the same value in record.item.\n       */\n    _DuplicateItemRecordList.prototype.add = /**\n       * Append the record to the list of duplicates.\n       *\n       * Note: by design all records in the list of duplicates hold the same value in record.item.\n       */\n    function (record) {\n        if (this._head === null) {\n            this._head = this._tail = record;\n            record._nextDup = null;\n            record._prevDup = null;\n        }\n        else {\n            // todo(vicb)\n            // assert(record.item ==  _head.item ||\n            //       record.item is num && record.item.isNaN && _head.item is num && _head.item.isNaN);\n            // todo(vicb)\n            // assert(record.item ==  _head.item ||\n            //       record.item is num && record.item.isNaN && _head.item is num && _head.item.isNaN);\n            this._tail._nextDup = record;\n            record._prevDup = this._tail;\n            record._nextDup = null;\n            this._tail = record;\n        }\n    };\n    // Returns a IterableChangeRecord_ having IterableChangeRecord_.trackById == trackById and\n    // IterableChangeRecord_.currentIndex >= atOrAfterIndex\n    // Returns a IterableChangeRecord_ having IterableChangeRecord_.trackById == trackById and\n    // IterableChangeRecord_.currentIndex >= atOrAfterIndex\n    _DuplicateItemRecordList.prototype.get = \n    // Returns a IterableChangeRecord_ having IterableChangeRecord_.trackById == trackById and\n    // IterableChangeRecord_.currentIndex >= atOrAfterIndex\n    function (trackById, atOrAfterIndex) {\n        var record;\n        for (record = this._head; record !== null; record = record._nextDup) {\n            if ((atOrAfterIndex === null || atOrAfterIndex <= (record.currentIndex)) &&\n                looseIdentical(record.trackById, trackById)) {\n                return record;\n            }\n        }\n        return null;\n    };\n    /**\n     * Remove one {@link IterableChangeRecord_} from the list of duplicates.\n     *\n     * Returns whether the list of duplicates is empty.\n     */\n    /**\n       * Remove one {@link IterableChangeRecord_} from the list of duplicates.\n       *\n       * Returns whether the list of duplicates is empty.\n       */\n    _DuplicateItemRecordList.prototype.remove = /**\n       * Remove one {@link IterableChangeRecord_} from the list of duplicates.\n       *\n       * Returns whether the list of duplicates is empty.\n       */\n    function (record) {\n        // todo(vicb)\n        // assert(() {\n        //  // verify that the record being removed is in the list.\n        //  for (IterableChangeRecord_ cursor = _head; cursor != null; cursor = cursor._nextDup) {\n        //    if (identical(cursor, record)) return true;\n        //  }\n        //  return false;\n        //});\n        var prev = record._prevDup;\n        var next = record._nextDup;\n        if (prev === null) {\n            this._head = next;\n        }\n        else {\n            prev._nextDup = next;\n        }\n        if (next === null) {\n            this._tail = prev;\n        }\n        else {\n            next._prevDup = prev;\n        }\n        return this._head === null;\n    };\n    return _DuplicateItemRecordList;\n}());\nvar _DuplicateMap = /** @class */ (function () {\n    function _DuplicateMap() {\n        this.map = new Map();\n    }\n    _DuplicateMap.prototype.put = function (record) {\n        var key = record.trackById;\n        var duplicates = this.map.get(key);\n        if (!duplicates) {\n            duplicates = new _DuplicateItemRecordList();\n            this.map.set(key, duplicates);\n        }\n        duplicates.add(record);\n    };\n    /**\n     * Retrieve the `value` using key. Because the IterableChangeRecord_ value may be one which we\n     * have already iterated over, we use the `atOrAfterIndex` to pretend it is not there.\n     *\n     * Use case: `[a, b, c, a, a]` if we are at index `3` which is the second `a` then asking if we\n     * have any more `a`s needs to return the second `a`.\n     */\n    /**\n       * Retrieve the `value` using key. Because the IterableChangeRecord_ value may be one which we\n       * have already iterated over, we use the `atOrAfterIndex` to pretend it is not there.\n       *\n       * Use case: `[a, b, c, a, a]` if we are at index `3` which is the second `a` then asking if we\n       * have any more `a`s needs to return the second `a`.\n       */\n    _DuplicateMap.prototype.get = /**\n       * Retrieve the `value` using key. Because the IterableChangeRecord_ value may be one which we\n       * have already iterated over, we use the `atOrAfterIndex` to pretend it is not there.\n       *\n       * Use case: `[a, b, c, a, a]` if we are at index `3` which is the second `a` then asking if we\n       * have any more `a`s needs to return the second `a`.\n       */\n    function (trackById, atOrAfterIndex) {\n        var key = trackById;\n        var recordList = this.map.get(key);\n        return recordList ? recordList.get(trackById, atOrAfterIndex) : null;\n    };\n    /**\n     * Removes a {@link IterableChangeRecord_} from the list of duplicates.\n     *\n     * The list of duplicates also is removed from the map if it gets empty.\n     */\n    /**\n       * Removes a {@link IterableChangeRecord_} from the list of duplicates.\n       *\n       * The list of duplicates also is removed from the map if it gets empty.\n       */\n    _DuplicateMap.prototype.remove = /**\n       * Removes a {@link IterableChangeRecord_} from the list of duplicates.\n       *\n       * The list of duplicates also is removed from the map if it gets empty.\n       */\n    function (record) {\n        var key = record.trackById;\n        var recordList = (this.map.get(key));\n        // Remove the list of duplicates when it gets empty\n        if (recordList.remove(record)) {\n            this.map.delete(key);\n        }\n        return record;\n    };\n    Object.defineProperty(_DuplicateMap.prototype, \"isEmpty\", {\n        get: function () { return this.map.size === 0; },\n        enumerable: true,\n        configurable: true\n    });\n    _DuplicateMap.prototype.clear = function () { this.map.clear(); };\n    return _DuplicateMap;\n}());\nfunction getPreviousIndex(item, addRemoveOffset, moveOffsets) {\n    var previousIndex = item.previousIndex;\n    if (previousIndex === null)\n        return previousIndex;\n    var moveOffset = 0;\n    if (moveOffsets && previousIndex < moveOffsets.length) {\n        moveOffset = moveOffsets[previousIndex];\n    }\n    return previousIndex + addRemoveOffset + moveOffset;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar DefaultKeyValueDifferFactory = /** @class */ (function () {\n    function DefaultKeyValueDifferFactory() {\n    }\n    DefaultKeyValueDifferFactory.prototype.supports = function (obj) { return obj instanceof Map || isJsObject(obj); };\n    DefaultKeyValueDifferFactory.prototype.create = function () { return new DefaultKeyValueDiffer(); };\n    return DefaultKeyValueDifferFactory;\n}());\nvar DefaultKeyValueDiffer = /** @class */ (function () {\n    function DefaultKeyValueDiffer() {\n        this._records = new Map();\n        this._mapHead = null;\n        // _appendAfter is used in the check loop\n        this._appendAfter = null;\n        this._previousMapHead = null;\n        this._changesHead = null;\n        this._changesTail = null;\n        this._additionsHead = null;\n        this._additionsTail = null;\n        this._removalsHead = null;\n        this._removalsTail = null;\n    }\n    Object.defineProperty(DefaultKeyValueDiffer.prototype, \"isDirty\", {\n        get: function () {\n            return this._additionsHead !== null || this._changesHead !== null ||\n                this._removalsHead !== null;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    DefaultKeyValueDiffer.prototype.forEachItem = function (fn) {\n        var record;\n        for (record = this._mapHead; record !== null; record = record._next) {\n            fn(record);\n        }\n    };\n    DefaultKeyValueDiffer.prototype.forEachPreviousItem = function (fn) {\n        var record;\n        for (record = this._previousMapHead; record !== null; record = record._nextPrevious) {\n            fn(record);\n        }\n    };\n    DefaultKeyValueDiffer.prototype.forEachChangedItem = function (fn) {\n        var record;\n        for (record = this._changesHead; record !== null; record = record._nextChanged) {\n            fn(record);\n        }\n    };\n    DefaultKeyValueDiffer.prototype.forEachAddedItem = function (fn) {\n        var record;\n        for (record = this._additionsHead; record !== null; record = record._nextAdded) {\n            fn(record);\n        }\n    };\n    DefaultKeyValueDiffer.prototype.forEachRemovedItem = function (fn) {\n        var record;\n        for (record = this._removalsHead; record !== null; record = record._nextRemoved) {\n            fn(record);\n        }\n    };\n    DefaultKeyValueDiffer.prototype.diff = function (map) {\n        if (!map) {\n            map = new Map();\n        }\n        else if (!(map instanceof Map || isJsObject(map))) {\n            throw new Error(\"Error trying to diff '\" + stringify$1(map) + \"'. Only maps and objects are allowed\");\n        }\n        return this.check(map) ? this : null;\n    };\n    DefaultKeyValueDiffer.prototype.onDestroy = function () { };\n    /**\n     * Check the current state of the map vs the previous.\n     * The algorithm is optimised for when the keys do no change.\n     */\n    /**\n       * Check the current state of the map vs the previous.\n       * The algorithm is optimised for when the keys do no change.\n       */\n    DefaultKeyValueDiffer.prototype.check = /**\n       * Check the current state of the map vs the previous.\n       * The algorithm is optimised for when the keys do no change.\n       */\n    function (map) {\n        var _this = this;\n        this._reset();\n        var insertBefore = this._mapHead;\n        this._appendAfter = null;\n        this._forEach(map, function (value, key) {\n            if (insertBefore && insertBefore.key === key) {\n                _this._maybeAddToChanges(insertBefore, value);\n                _this._appendAfter = insertBefore;\n                insertBefore = insertBefore._next;\n            }\n            else {\n                var record = _this._getOrCreateRecordForKey(key, value);\n                insertBefore = _this._insertBeforeOrAppend(insertBefore, record);\n            }\n        });\n        // Items remaining at the end of the list have been deleted\n        if (insertBefore) {\n            if (insertBefore._prev) {\n                insertBefore._prev._next = null;\n            }\n            this._removalsHead = insertBefore;\n            for (var record = insertBefore; record !== null; record = record._nextRemoved) {\n                if (record === this._mapHead) {\n                    this._mapHead = null;\n                }\n                this._records.delete(record.key);\n                record._nextRemoved = record._next;\n                record.previousValue = record.currentValue;\n                record.currentValue = null;\n                record._prev = null;\n                record._next = null;\n            }\n        }\n        // Make sure tails have no next records from previous runs\n        if (this._changesTail)\n            this._changesTail._nextChanged = null;\n        if (this._additionsTail)\n            this._additionsTail._nextAdded = null;\n        return this.isDirty;\n    };\n    /**\n     * Inserts a record before `before` or append at the end of the list when `before` is null.\n     *\n     * Notes:\n     * - This method appends at `this._appendAfter`,\n     * - This method updates `this._appendAfter`,\n     * - The return value is the new value for the insertion pointer.\n     */\n    /**\n       * Inserts a record before `before` or append at the end of the list when `before` is null.\n       *\n       * Notes:\n       * - This method appends at `this._appendAfter`,\n       * - This method updates `this._appendAfter`,\n       * - The return value is the new value for the insertion pointer.\n       */\n    DefaultKeyValueDiffer.prototype._insertBeforeOrAppend = /**\n       * Inserts a record before `before` or append at the end of the list when `before` is null.\n       *\n       * Notes:\n       * - This method appends at `this._appendAfter`,\n       * - This method updates `this._appendAfter`,\n       * - The return value is the new value for the insertion pointer.\n       */\n    function (before, record) {\n        if (before) {\n            var prev = before._prev;\n            record._next = before;\n            record._prev = prev;\n            before._prev = record;\n            if (prev) {\n                prev._next = record;\n            }\n            if (before === this._mapHead) {\n                this._mapHead = record;\n            }\n            this._appendAfter = before;\n            return before;\n        }\n        if (this._appendAfter) {\n            this._appendAfter._next = record;\n            record._prev = this._appendAfter;\n        }\n        else {\n            this._mapHead = record;\n        }\n        this._appendAfter = record;\n        return null;\n    };\n    DefaultKeyValueDiffer.prototype._getOrCreateRecordForKey = function (key, value) {\n        if (this._records.has(key)) {\n            var record_1 = (this._records.get(key));\n            this._maybeAddToChanges(record_1, value);\n            var prev = record_1._prev;\n            var next = record_1._next;\n            if (prev) {\n                prev._next = next;\n            }\n            if (next) {\n                next._prev = prev;\n            }\n            record_1._next = null;\n            record_1._prev = null;\n            return record_1;\n        }\n        var record = new KeyValueChangeRecord_(key);\n        this._records.set(key, record);\n        record.currentValue = value;\n        this._addToAdditions(record);\n        return record;\n    };\n    /** @internal */\n    /** @internal */\n    DefaultKeyValueDiffer.prototype._reset = /** @internal */\n    function () {\n        if (this.isDirty) {\n            var record = void 0;\n            // let `_previousMapHead` contain the state of the map before the changes\n            this._previousMapHead = this._mapHead;\n            for (record = this._previousMapHead; record !== null; record = record._next) {\n                record._nextPrevious = record._next;\n            }\n            // Update `record.previousValue` with the value of the item before the changes\n            // We need to update all changed items (that's those which have been added and changed)\n            for (record = this._changesHead; record !== null; record = record._nextChanged) {\n                record.previousValue = record.currentValue;\n            }\n            for (record = this._additionsHead; record != null; record = record._nextAdded) {\n                record.previousValue = record.currentValue;\n            }\n            this._changesHead = this._changesTail = null;\n            this._additionsHead = this._additionsTail = null;\n            this._removalsHead = null;\n        }\n    };\n    // Add the record or a given key to the list of changes only when the value has actually changed\n    // Add the record or a given key to the list of changes only when the value has actually changed\n    DefaultKeyValueDiffer.prototype._maybeAddToChanges = \n    // Add the record or a given key to the list of changes only when the value has actually changed\n    function (record, newValue) {\n        if (!looseIdentical(newValue, record.currentValue)) {\n            record.previousValue = record.currentValue;\n            record.currentValue = newValue;\n            this._addToChanges(record);\n        }\n    };\n    DefaultKeyValueDiffer.prototype._addToAdditions = function (record) {\n        if (this._additionsHead === null) {\n            this._additionsHead = this._additionsTail = record;\n        }\n        else {\n            this._additionsTail._nextAdded = record;\n            this._additionsTail = record;\n        }\n    };\n    DefaultKeyValueDiffer.prototype._addToChanges = function (record) {\n        if (this._changesHead === null) {\n            this._changesHead = this._changesTail = record;\n        }\n        else {\n            this._changesTail._nextChanged = record;\n            this._changesTail = record;\n        }\n    };\n    /** @internal */\n    /** @internal */\n    DefaultKeyValueDiffer.prototype._forEach = /** @internal */\n    function (obj, fn) {\n        if (obj instanceof Map) {\n            obj.forEach(fn);\n        }\n        else {\n            Object.keys(obj).forEach(function (k) { return fn(obj[k], k); });\n        }\n    };\n    return DefaultKeyValueDiffer;\n}());\n/**\n *\n */\nvar KeyValueChangeRecord_ = /** @class */ (function () {\n    function KeyValueChangeRecord_(key) {\n        this.key = key;\n        this.previousValue = null;\n        this.currentValue = null;\n        /** @internal */\n        this._nextPrevious = null;\n        /** @internal */\n        this._next = null;\n        /** @internal */\n        this._prev = null;\n        /** @internal */\n        this._nextAdded = null;\n        /** @internal */\n        this._nextRemoved = null;\n        /** @internal */\n        this._nextChanged = null;\n    }\n    return KeyValueChangeRecord_;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * A repository of different iterable diffing strategies used by NgFor, NgClass, and others.\n *\n */\nvar IterableDiffers = /** @class */ (function () {\n    function IterableDiffers(factories) {\n        this.factories = factories;\n    }\n    IterableDiffers.create = function (factories, parent) {\n        if (parent != null) {\n            var copied = parent.factories.slice();\n            factories = factories.concat(copied);\n        }\n        return new IterableDiffers(factories);\n    };\n    /**\n     * Takes an array of {@link IterableDifferFactory} and returns a provider used to extend the\n     * inherited {@link IterableDiffers} instance with the provided factories and return a new\n     * {@link IterableDiffers} instance.\n     *\n     * The following example shows how to extend an existing list of factories,\n     * which will only be applied to the injector for this component and its children.\n     * This step is all that's required to make a new {@link IterableDiffer} available.\n     *\n     * ### Example\n     *\n     * ```\n     * @Component({\n     *   viewProviders: [\n     *     IterableDiffers.extend([new ImmutableListDiffer()])\n     *   ]\n     * })\n     * ```\n     */\n    /**\n       * Takes an array of {@link IterableDifferFactory} and returns a provider used to extend the\n       * inherited {@link IterableDiffers} instance with the provided factories and return a new\n       * {@link IterableDiffers} instance.\n       *\n       * The following example shows how to extend an existing list of factories,\n       * which will only be applied to the injector for this component and its children.\n       * This step is all that's required to make a new {@link IterableDiffer} available.\n       *\n       * ### Example\n       *\n       * ```\n       * @Component({\n       *   viewProviders: [\n       *     IterableDiffers.extend([new ImmutableListDiffer()])\n       *   ]\n       * })\n       * ```\n       */\n    IterableDiffers.extend = /**\n       * Takes an array of {@link IterableDifferFactory} and returns a provider used to extend the\n       * inherited {@link IterableDiffers} instance with the provided factories and return a new\n       * {@link IterableDiffers} instance.\n       *\n       * The following example shows how to extend an existing list of factories,\n       * which will only be applied to the injector for this component and its children.\n       * This step is all that's required to make a new {@link IterableDiffer} available.\n       *\n       * ### Example\n       *\n       * ```\n       * @Component({\n       *   viewProviders: [\n       *     IterableDiffers.extend([new ImmutableListDiffer()])\n       *   ]\n       * })\n       * ```\n       */\n    function (factories) {\n        return {\n            provide: IterableDiffers,\n            useFactory: function (parent) {\n                if (!parent) {\n                    // Typically would occur when calling IterableDiffers.extend inside of dependencies passed\n                    // to\n                    // bootstrap(), which would override default pipes instead of extending them.\n                    throw new Error('Cannot extend IterableDiffers without a parent injector');\n                }\n                return IterableDiffers.create(factories, parent);\n            },\n            // Dependency technically isn't optional, but we can provide a better error message this way.\n            deps: [[IterableDiffers, new SkipSelf(), new Optional()]]\n        };\n    };\n    IterableDiffers.prototype.find = function (iterable) {\n        var factory = this.factories.find(function (f) { return f.supports(iterable); });\n        if (factory != null) {\n            return factory;\n        }\n        else {\n            throw new Error(\"Cannot find a differ supporting object '\" + iterable + \"' of type '\" + getTypeNameForDebugging(iterable) + \"'\");\n        }\n    };\n    return IterableDiffers;\n}());\nfunction getTypeNameForDebugging(type) {\n    return type['name'] || typeof type;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * A repository of different Map diffing strategies used by NgClass, NgStyle, and others.\n *\n */\nvar KeyValueDiffers = /** @class */ (function () {\n    function KeyValueDiffers(factories) {\n        this.factories = factories;\n    }\n    KeyValueDiffers.create = function (factories, parent) {\n        if (parent) {\n            var copied = parent.factories.slice();\n            factories = factories.concat(copied);\n        }\n        return new KeyValueDiffers(factories);\n    };\n    /**\n     * Takes an array of {@link KeyValueDifferFactory} and returns a provider used to extend the\n     * inherited {@link KeyValueDiffers} instance with the provided factories and return a new\n     * {@link KeyValueDiffers} instance.\n     *\n     * The following example shows how to extend an existing list of factories,\n     * which will only be applied to the injector for this component and its children.\n     * This step is all that's required to make a new {@link KeyValueDiffer} available.\n     *\n     * ### Example\n     *\n     * ```\n     * @Component({\n     *   viewProviders: [\n     *     KeyValueDiffers.extend([new ImmutableMapDiffer()])\n     *   ]\n     * })\n     * ```\n     */\n    /**\n       * Takes an array of {@link KeyValueDifferFactory} and returns a provider used to extend the\n       * inherited {@link KeyValueDiffers} instance with the provided factories and return a new\n       * {@link KeyValueDiffers} instance.\n       *\n       * The following example shows how to extend an existing list of factories,\n       * which will only be applied to the injector for this component and its children.\n       * This step is all that's required to make a new {@link KeyValueDiffer} available.\n       *\n       * ### Example\n       *\n       * ```\n       * @Component({\n       *   viewProviders: [\n       *     KeyValueDiffers.extend([new ImmutableMapDiffer()])\n       *   ]\n       * })\n       * ```\n       */\n    KeyValueDiffers.extend = /**\n       * Takes an array of {@link KeyValueDifferFactory} and returns a provider used to extend the\n       * inherited {@link KeyValueDiffers} instance with the provided factories and return a new\n       * {@link KeyValueDiffers} instance.\n       *\n       * The following example shows how to extend an existing list of factories,\n       * which will only be applied to the injector for this component and its children.\n       * This step is all that's required to make a new {@link KeyValueDiffer} available.\n       *\n       * ### Example\n       *\n       * ```\n       * @Component({\n       *   viewProviders: [\n       *     KeyValueDiffers.extend([new ImmutableMapDiffer()])\n       *   ]\n       * })\n       * ```\n       */\n    function (factories) {\n        return {\n            provide: KeyValueDiffers,\n            useFactory: function (parent) {\n                if (!parent) {\n                    // Typically would occur when calling KeyValueDiffers.extend inside of dependencies passed\n                    // to bootstrap(), which would override default pipes instead of extending them.\n                    throw new Error('Cannot extend KeyValueDiffers without a parent injector');\n                }\n                return KeyValueDiffers.create(factories, parent);\n            },\n            // Dependency technically isn't optional, but we can provide a better error message this way.\n            deps: [[KeyValueDiffers, new SkipSelf(), new Optional()]]\n        };\n    };\n    KeyValueDiffers.prototype.find = function (kv) {\n        var factory = this.factories.find(function (f) { return f.supports(kv); });\n        if (factory) {\n            return factory;\n        }\n        throw new Error(\"Cannot find a differ supporting object '\" + kv + \"'\");\n    };\n    return KeyValueDiffers;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Structural diffing for `Object`s and `Map`s.\n */\nvar keyValDiff = [new DefaultKeyValueDifferFactory()];\n/**\n * Structural diffing for `Iterable` types such as `Array`s.\n */\nvar iterableDiff = [new DefaultIterableDifferFactory()];\nvar defaultIterableDiffers = new IterableDiffers(iterableDiff);\nvar defaultKeyValueDiffers = new KeyValueDiffers(keyValDiff);\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar _CORE_PLATFORM_PROVIDERS = [\n    // Set a default platform name for platforms that don't set it explicitly.\n    { provide: PLATFORM_ID, useValue: 'unknown' },\n    { provide: PlatformRef, deps: [Injector] },\n    { provide: TestabilityRegistry, deps: [] },\n    { provide: Console, deps: [] },\n];\n/**\n * This platform has to be included in any other platform\n *\n * @experimental\n */\nvar platformCore = createPlatformFactory(null, 'core', _CORE_PLATFORM_PROVIDERS);\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Provide this token to set the locale of your application.\n * It is used for i18n extraction, by i18n pipes (DatePipe, I18nPluralPipe, CurrencyPipe,\n * DecimalPipe and PercentPipe) and by ICU expressions.\n *\n * See the {@linkDocs guide/i18n#setting-up-locale i18n guide} for more information.\n *\n * ### Example\n *\n * ```typescript\n * import { LOCALE_ID } from '@angular/core';\n * import { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n * import { AppModule } from './app/app.module';\n *\n * platformBrowserDynamic().bootstrapModule(AppModule, {\n *   providers: [{provide: LOCALE_ID, useValue: 'en-US' }]\n * });\n * ```\n *\n * @experimental i18n support is experimental.\n */\nvar LOCALE_ID = new InjectionToken('LocaleId');\n/**\n * Use this token at bootstrap to provide the content of your translation file (`xtb`,\n * `xlf` or `xlf2`) when you want to translate your application in another language.\n *\n * See the {@linkDocs guide/i18n#merge i18n guide} for more information.\n *\n * ### Example\n *\n * ```typescript\n * import { TRANSLATIONS } from '@angular/core';\n * import { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n * import { AppModule } from './app/app.module';\n *\n * // content of your translation file\n * const translations = '....';\n *\n * platformBrowserDynamic().bootstrapModule(AppModule, {\n *   providers: [{provide: TRANSLATIONS, useValue: translations }]\n * });\n * ```\n *\n * @experimental i18n support is experimental.\n */\nvar TRANSLATIONS = new InjectionToken('Translations');\n/**\n * Provide this token at bootstrap to set the format of your {@link TRANSLATIONS}: `xtb`,\n * `xlf` or `xlf2`.\n *\n * See the {@linkDocs guide/i18n#merge i18n guide} for more information.\n *\n * ### Example\n *\n * ```typescript\n * import { TRANSLATIONS_FORMAT } from '@angular/core';\n * import { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n * import { AppModule } from './app/app.module';\n *\n * platformBrowserDynamic().bootstrapModule(AppModule, {\n *   providers: [{provide: TRANSLATIONS_FORMAT, useValue: 'xlf' }]\n * });\n * ```\n *\n * @experimental i18n support is experimental.\n */\nvar TRANSLATIONS_FORMAT = new InjectionToken('TranslationsFormat');\n/**\n * Use this enum at bootstrap as an option of `bootstrapModule` to define the strategy\n * that the compiler should use in case of missing translations:\n * - Error: throw if you have missing translations.\n * - Warning (default): show a warning in the console and/or shell.\n * - Ignore: do nothing.\n *\n * See the {@linkDocs guide/i18n#missing-translation i18n guide} for more information.\n *\n * ### Example\n * ```typescript\n * import { MissingTranslationStrategy } from '@angular/core';\n * import { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n * import { AppModule } from './app/app.module';\n *\n * platformBrowserDynamic().bootstrapModule(AppModule, {\n *   missingTranslation: MissingTranslationStrategy.Error\n * });\n * ```\n *\n * @experimental i18n support is experimental.\n */\n/**\n * Use this enum at bootstrap as an option of `bootstrapModule` to define the strategy\n * that the compiler should use in case of missing translations:\n * - Error: throw if you have missing translations.\n * - Warning (default): show a warning in the console and/or shell.\n * - Ignore: do nothing.\n *\n * See the {@linkDocs guide/i18n#missing-translation i18n guide} for more information.\n *\n * ### Example\n * ```typescript\n * import { MissingTranslationStrategy } from '@angular/core';\n * import { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n * import { AppModule } from './app/app.module';\n *\n * platformBrowserDynamic().bootstrapModule(AppModule, {\n *   missingTranslation: MissingTranslationStrategy.Error\n * });\n * ```\n *\n * @experimental i18n support is experimental.\n */\nvar MissingTranslationStrategy$1;\n/**\n * Use this enum at bootstrap as an option of `bootstrapModule` to define the strategy\n * that the compiler should use in case of missing translations:\n * - Error: throw if you have missing translations.\n * - Warning (default): show a warning in the console and/or shell.\n * - Ignore: do nothing.\n *\n * See the {@linkDocs guide/i18n#missing-translation i18n guide} for more information.\n *\n * ### Example\n * ```typescript\n * import { MissingTranslationStrategy } from '@angular/core';\n * import { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n * import { AppModule } from './app/app.module';\n *\n * platformBrowserDynamic().bootstrapModule(AppModule, {\n *   missingTranslation: MissingTranslationStrategy.Error\n * });\n * ```\n *\n * @experimental i18n support is experimental.\n */\n(function (MissingTranslationStrategy) {\n    MissingTranslationStrategy[MissingTranslationStrategy[\"Error\"] = 0] = \"Error\";\n    MissingTranslationStrategy[MissingTranslationStrategy[\"Warning\"] = 1] = \"Warning\";\n    MissingTranslationStrategy[MissingTranslationStrategy[\"Ignore\"] = 2] = \"Ignore\";\n})(MissingTranslationStrategy$1 || (MissingTranslationStrategy$1 = {}));\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nfunction _iterableDiffersFactory() {\n    return defaultIterableDiffers;\n}\nfunction _keyValueDiffersFactory() {\n    return defaultKeyValueDiffers;\n}\nfunction _localeFactory(locale) {\n    return locale || 'en-US';\n}\n/**\n * This module includes the providers of @angular/core that are needed\n * to bootstrap components via `ApplicationRef`.\n *\n * @experimental\n */\nvar ApplicationModule = /** @class */ (function () {\n    // Inject ApplicationRef to make it eager...\n    function ApplicationModule(appRef) {\n    }\n    ApplicationModule.decorators = [\n        { type: NgModule, args: [{\n                    providers: [\n                        ApplicationRef,\n                        ApplicationInitStatus,\n                        Compiler,\n                        APP_ID_RANDOM_PROVIDER,\n                        { provide: IterableDiffers, useFactory: _iterableDiffersFactory },\n                        { provide: KeyValueDiffers, useFactory: _keyValueDiffersFactory },\n                        {\n                            provide: LOCALE_ID,\n                            useFactory: _localeFactory,\n                            deps: [[new Inject(LOCALE_ID), new Optional(), new SkipSelf()]]\n                        },\n                    ]\n                },] }\n    ];\n    /** @nocollapse */\n    ApplicationModule.ctorParameters = function () { return [\n        { type: ApplicationRef, },\n    ]; };\n    return ApplicationModule;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * This helper class is used to get hold of an inert tree of DOM elements containing dirty HTML\n * that needs sanitizing.\n * Depending upon browser support we must use one of three strategies for doing this.\n * Support: Safari 10.x -> XHR strategy\n * Support: Firefox -> DomParser strategy\n * Default: InertDocument strategy\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nfunction tagSet(tags) {\n    var res = {};\n    try {\n        for (var _a = __values(tags.split(',')), _b = _a.next(); !_b.done; _b = _a.next()) {\n            var t = _b.value;\n            res[t] = true;\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (_b && !_b.done && (_c = _a.return)) _c.call(_a);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n    return res;\n    var e_1, _c;\n}\nfunction merge$2() {\n    var sets = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        sets[_i] = arguments[_i];\n    }\n    var res = {};\n    try {\n        for (var sets_1 = __values(sets), sets_1_1 = sets_1.next(); !sets_1_1.done; sets_1_1 = sets_1.next()) {\n            var s = sets_1_1.value;\n            for (var v in s) {\n                if (s.hasOwnProperty(v))\n                    res[v] = true;\n            }\n        }\n    }\n    catch (e_2_1) { e_2 = { error: e_2_1 }; }\n    finally {\n        try {\n            if (sets_1_1 && !sets_1_1.done && (_a = sets_1.return)) _a.call(sets_1);\n        }\n        finally { if (e_2) throw e_2.error; }\n    }\n    return res;\n    var e_2, _a;\n}\n// Good source of info about elements and attributes\n// http://dev.w3.org/html5/spec/Overview.html#semantics\n// http://simon.html5.org/html-elements\n// Safe Void Elements - HTML5\n// http://dev.w3.org/html5/spec/Overview.html#void-elements\nvar VOID_ELEMENTS = tagSet('area,br,col,hr,img,wbr');\n// Elements that you can, intentionally, leave open (and which close themselves)\n// http://dev.w3.org/html5/spec/Overview.html#optional-tags\nvar OPTIONAL_END_TAG_BLOCK_ELEMENTS = tagSet('colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr');\nvar OPTIONAL_END_TAG_INLINE_ELEMENTS = tagSet('rp,rt');\nvar OPTIONAL_END_TAG_ELEMENTS = merge$2(OPTIONAL_END_TAG_INLINE_ELEMENTS, OPTIONAL_END_TAG_BLOCK_ELEMENTS);\n// Safe Block Elements - HTML5\nvar BLOCK_ELEMENTS = merge$2(OPTIONAL_END_TAG_BLOCK_ELEMENTS, tagSet('address,article,' +\n    'aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,' +\n    'h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul'));\n// Inline Elements - HTML5\nvar INLINE_ELEMENTS = merge$2(OPTIONAL_END_TAG_INLINE_ELEMENTS, tagSet('a,abbr,acronym,audio,b,' +\n    'bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,' +\n    'samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video'));\nvar VALID_ELEMENTS = merge$2(VOID_ELEMENTS, BLOCK_ELEMENTS, INLINE_ELEMENTS, OPTIONAL_END_TAG_ELEMENTS);\n// Attributes that have href and hence need to be sanitized\nvar URI_ATTRS = tagSet('background,cite,href,itemtype,longdesc,poster,src,xlink:href');\n// Attributes that have special href set hence need to be sanitized\nvar SRCSET_ATTRS = tagSet('srcset');\nvar HTML_ATTRS = tagSet('abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,' +\n    'compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,' +\n    'ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,' +\n    'scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,' +\n    'valign,value,vspace,width');\n// NB: This currently consciously doesn't support SVG. SVG sanitization has had several security\n// issues in the past, so it seems safer to leave it out if possible. If support for binding SVG via\n// innerHTML is required, SVG attributes should be added here.\n// NB: Sanitization does not allow <form> elements or other active elements (<button> etc). Those\n// can be sanitized, but they increase security surface area without a legitimate use case, so they\n// are left out here.\nvar VALID_ATTRS = merge$2(URI_ATTRS, SRCSET_ATTRS, HTML_ATTRS);\n/**\n * Sanitizes the given unsafe, untrusted HTML fragment, and returns HTML text that is safe to add to\n * the DOM in a browser environment.\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Sanitizes the given untrusted CSS style property value (i.e. not an entire object, just a single\n * value) and returns a value that is safe to use in a browser environment.\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * A SecurityContext marks a location that has dangerous security implications, e.g. a DOM property\n * like `innerHTML` that could cause Cross Site Scripting (XSS) security bugs when improperly\n * handled.\n *\n * See DomSanitizer for more details on security in Angular applications.\n *\n *\n */\n/**\n * A SecurityContext marks a location that has dangerous security implications, e.g. a DOM property\n * like `innerHTML` that could cause Cross Site Scripting (XSS) security bugs when improperly\n * handled.\n *\n * See DomSanitizer for more details on security in Angular applications.\n *\n *\n */\nvar SecurityContext$1;\n/**\n * A SecurityContext marks a location that has dangerous security implications, e.g. a DOM property\n * like `innerHTML` that could cause Cross Site Scripting (XSS) security bugs when improperly\n * handled.\n *\n * See DomSanitizer for more details on security in Angular applications.\n *\n *\n */\n(function (SecurityContext) {\n    SecurityContext[SecurityContext[\"NONE\"] = 0] = \"NONE\";\n    SecurityContext[SecurityContext[\"HTML\"] = 1] = \"HTML\";\n    SecurityContext[SecurityContext[\"STYLE\"] = 2] = \"STYLE\";\n    SecurityContext[SecurityContext[\"SCRIPT\"] = 3] = \"SCRIPT\";\n    SecurityContext[SecurityContext[\"URL\"] = 4] = \"URL\";\n    SecurityContext[SecurityContext[\"RESOURCE_URL\"] = 5] = \"RESOURCE_URL\";\n})(SecurityContext$1 || (SecurityContext$1 = {}));\n/**\n * Sanitizer is used by the views to sanitize potentially dangerous values.\n *\n *\n */\nvar Sanitizer = /** @class */ (function () {\n    function Sanitizer() {\n    }\n    return Sanitizer;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n// Called before each cycle of a view's check to detect whether this is in the\n// initState for which we need to call ngOnInit, ngAfterContentInit or ngAfterViewInit\n// lifecycle methods. Returns true if this check cycle should call lifecycle\n// methods.\nfunction shiftInitState(view, priorInitState, newInitState) {\n    // Only update the InitState if we are currently in the prior state.\n    // For example, only move into CallingInit if we are in BeforeInit. Only\n    // move into CallingContentInit if we are in CallingInit. Normally this will\n    // always be true because of how checkCycle is called in checkAndUpdateView.\n    // However, if checkAndUpdateView is called recursively or if an exception is\n    // thrown while checkAndUpdateView is running, checkAndUpdateView starts over\n    // from the beginning. This ensures the state is monotonically increasing,\n    // terminating in the AfterInit state, which ensures the Init methods are called\n    // at least once and only once.\n    var state = view.state;\n    var initState = state & 1792;\n    if (initState === priorInitState) {\n        view.state = (state & ~1792 /* InitState_Mask */) | newInitState;\n        view.initIndex = -1;\n        return true;\n    }\n    return initState === newInitState;\n}\n// Returns true if the lifecycle init method should be called for the node with\n// the given init index.\nfunction shouldCallLifecycleInitHook(view, initState, index) {\n    if ((view.state & 1792 /* InitState_Mask */) === initState && view.initIndex <= index) {\n        view.initIndex = index + 1;\n        return true;\n    }\n    return false;\n}\n/**\n * Accessor for view.nodes, enforcing that every usage site stays monomorphic.\n */\nfunction asTextData(view, index) {\n    return view.nodes[index];\n}\n/**\n * Accessor for view.nodes, enforcing that every usage site stays monomorphic.\n */\nfunction asElementData(view, index) {\n    return view.nodes[index];\n}\n/**\n * Accessor for view.nodes, enforcing that every usage site stays monomorphic.\n */\nfunction asProviderData(view, index) {\n    return view.nodes[index];\n}\n/**\n * Accessor for view.nodes, enforcing that every usage site stays monomorphic.\n */\nfunction asPureExpressionData(view, index) {\n    return view.nodes[index];\n}\n/**\n * Accessor for view.nodes, enforcing that every usage site stays monomorphic.\n */\nfunction asQueryList(view, index) {\n    return view.nodes[index];\n}\n/**\n * This object is used to prevent cycles in the source files and to have a place where\n * debug mode can hook it. It is lazily filled when `isDevMode` is known.\n */\nvar Services = {\n    setCurrentNode: (undefined),\n    createRootView: (undefined),\n    createEmbeddedView: (undefined),\n    createComponentView: (undefined),\n    createNgModuleRef: (undefined),\n    overrideProvider: (undefined),\n    overrideComponentView: (undefined),\n    clearOverrides: (undefined),\n    checkAndUpdateView: (undefined),\n    checkNoChangesView: (undefined),\n    destroyView: (undefined),\n    resolveDep: (undefined),\n    createDebugContext: (undefined),\n    handleEvent: (undefined),\n    updateDirectives: (undefined),\n    updateRenderer: (undefined),\n    dirtyParentQueries: (undefined),\n};\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nfunction expressionChangedAfterItHasBeenCheckedError(context, oldValue, currValue, isFirstCheck) {\n    var msg = \"ExpressionChangedAfterItHasBeenCheckedError: Expression has changed after it was checked. Previous value: '\" + oldValue + \"'. Current value: '\" + currValue + \"'.\";\n    if (isFirstCheck) {\n        msg +=\n            \" It seems like the view has been created after its parent and its children have been dirty checked.\" +\n                \" Has it been created in a change detection hook ?\";\n    }\n    return viewDebugError(msg, context);\n}\nfunction viewWrappedDebugError(err, context) {\n    if (!(err instanceof Error)) {\n        // errors that are not Error instances don't have a stack,\n        // so it is ok to wrap them into a new Error object...\n        err = new Error(err.toString());\n    }\n    _addDebugContext(err, context);\n    return err;\n}\nfunction viewDebugError(msg, context) {\n    var err = new Error(msg);\n    _addDebugContext(err, context);\n    return err;\n}\nfunction _addDebugContext(err, context) {\n    err[ERROR_DEBUG_CONTEXT] = context;\n    err[ERROR_LOGGER] = context.logError.bind(context);\n}\nfunction isViewDebugError(err) {\n    return !!getDebugContext(err);\n}\nfunction viewDestroyedError(action) {\n    return new Error(\"ViewDestroyedError: Attempt to use a destroyed view: \" + action);\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar NOOP = function () { };\nvar _tokenKeyCache = new Map();\nfunction tokenKey(token) {\n    var key = _tokenKeyCache.get(token);\n    if (!key) {\n        key = stringify$1(token) + '_' + _tokenKeyCache.size;\n        _tokenKeyCache.set(token, key);\n    }\n    return key;\n}\n\n// Attention: this function is called as top level function.\n// Putting any logic in here will destroy closure tree shaking!\n\n\nfunction checkBinding(view, def, bindingIdx, value) {\n    var oldValues = view.oldValues;\n    if ((view.state & 2 /* FirstCheck */) ||\n        !looseIdentical(oldValues[def.bindingIndex + bindingIdx], value)) {\n        return true;\n    }\n    return false;\n}\nfunction checkAndUpdateBinding(view, def, bindingIdx, value) {\n    if (checkBinding(view, def, bindingIdx, value)) {\n        view.oldValues[def.bindingIndex + bindingIdx] = value;\n        return true;\n    }\n    return false;\n}\nfunction checkBindingNoChanges(view, def, bindingIdx, value) {\n    var oldValue = view.oldValues[def.bindingIndex + bindingIdx];\n    if ((view.state & 1 /* BeforeFirstCheck */) || !devModeEqual(oldValue, value)) {\n        var bindingName = def.bindings[bindingIdx].name;\n        throw expressionChangedAfterItHasBeenCheckedError(Services.createDebugContext(view, def.nodeIndex), bindingName + \": \" + oldValue, bindingName + \": \" + value, (view.state & 1 /* BeforeFirstCheck */) !== 0);\n    }\n}\nfunction markParentViewsForCheck(view) {\n    var currView = view;\n    while (currView) {\n        if (currView.def.flags & 2 /* OnPush */) {\n            currView.state |= 8 /* ChecksEnabled */;\n        }\n        currView = currView.viewContainerParent || currView.parent;\n    }\n}\nfunction markParentViewsForCheckProjectedViews(view, endView) {\n    var currView = view;\n    while (currView && currView !== endView) {\n        currView.state |= 64 /* CheckProjectedViews */;\n        currView = currView.viewContainerParent || currView.parent;\n    }\n}\nfunction dispatchEvent(view, nodeIndex, eventName, event) {\n    try {\n        var nodeDef = view.def.nodes[nodeIndex];\n        var startView = nodeDef.flags & 33554432 /* ComponentView */ ?\n            asElementData(view, nodeIndex).componentView :\n            view;\n        markParentViewsForCheck(startView);\n        return Services.handleEvent(view, nodeIndex, eventName, event);\n    }\n    catch (e) {\n        // Attention: Don't rethrow, as it would cancel Observable subscriptions!\n        view.root.errorHandler.handleError(e);\n    }\n}\nfunction declaredViewContainer(view) {\n    if (view.parent) {\n        var parentView = view.parent;\n        return asElementData(parentView, view.parentNodeDef.nodeIndex);\n    }\n    return null;\n}\n/**\n * for component views, this is the host element.\n * for embedded views, this is the index of the parent node\n * that contains the view container.\n */\nfunction viewParentEl(view) {\n    var parentView = view.parent;\n    if (parentView) {\n        return view.parentNodeDef.parent;\n    }\n    else {\n        return null;\n    }\n}\nfunction renderNode(view, def) {\n    switch (def.flags & 201347067 /* Types */) {\n        case 1 /* TypeElement */:\n            return asElementData(view, def.nodeIndex).renderElement;\n        case 2 /* TypeText */:\n            return asTextData(view, def.nodeIndex).renderText;\n    }\n}\nfunction elementEventFullName$1(target, name) {\n    return target ? target + \":\" + name : name;\n}\nfunction isComponentView(view) {\n    return !!view.parent && !!(view.parentNodeDef.flags & 32768 /* Component */);\n}\nfunction isEmbeddedView(view) {\n    return !!view.parent && !(view.parentNodeDef.flags & 32768 /* Component */);\n}\n\n\nfunction splitDepsDsl(deps, sourceName) {\n    return deps.map(function (value) {\n        var token;\n        var flags;\n        if (Array.isArray(value)) {\n            _a = __read(value, 2), flags = _a[0], token = _a[1];\n        }\n        else {\n            flags = 0 /* None */;\n            token = value;\n        }\n        if (token && (typeof token === 'function' || typeof token === 'object') && sourceName) {\n            Object.defineProperty(token, SOURCE$1, { value: sourceName, configurable: true });\n        }\n        return { flags: flags, token: token, tokenKey: tokenKey(token) };\n        var _a;\n    });\n}\nfunction getParentRenderElement(view, renderHost, def) {\n    var renderParent = def.renderParent;\n    if (renderParent) {\n        if ((renderParent.flags & 1 /* TypeElement */) === 0 ||\n            (renderParent.flags & 33554432 /* ComponentView */) === 0 ||\n            (renderParent.element.componentRendererType &&\n                renderParent.element.componentRendererType.encapsulation ===\n                    ViewEncapsulation$1.Native)) {\n            // only children of non components, or children of components with native encapsulation should\n            // be attached.\n            return asElementData(view, def.renderParent.nodeIndex).renderElement;\n        }\n    }\n    else {\n        return renderHost;\n    }\n}\nvar DEFINITION_CACHE = new WeakMap();\nfunction resolveDefinition(factory) {\n    var value = DEFINITION_CACHE.get(factory);\n    if (!value) {\n        value = factory(function () { return NOOP; });\n        value.factory = factory;\n        DEFINITION_CACHE.set(factory, value);\n    }\n    return value;\n}\nfunction rootRenderNodes(view) {\n    var renderNodes = [];\n    visitRootRenderNodes(view, 0 /* Collect */, undefined, undefined, renderNodes);\n    return renderNodes;\n}\nfunction visitRootRenderNodes(view, action, parentNode, nextSibling, target) {\n    // We need to re-compute the parent node in case the nodes have been moved around manually\n    if (action === 3 /* RemoveChild */) {\n        parentNode = view.renderer.parentNode(renderNode(view, (view.def.lastRenderRootNode)));\n    }\n    visitSiblingRenderNodes(view, action, 0, view.def.nodes.length - 1, parentNode, nextSibling, target);\n}\nfunction visitSiblingRenderNodes(view, action, startIndex, endIndex, parentNode, nextSibling, target) {\n    for (var i = startIndex; i <= endIndex; i++) {\n        var nodeDef = view.def.nodes[i];\n        if (nodeDef.flags & (1 /* TypeElement */ | 2 /* TypeText */ | 8 /* TypeNgContent */)) {\n            visitRenderNode(view, nodeDef, action, parentNode, nextSibling, target);\n        }\n        // jump to next sibling\n        i += nodeDef.childCount;\n    }\n}\nfunction visitProjectedRenderNodes(view, ngContentIndex, action, parentNode, nextSibling, target) {\n    var compView = view;\n    while (compView && !isComponentView(compView)) {\n        compView = compView.parent;\n    }\n    var hostView = compView.parent;\n    var hostElDef = viewParentEl((compView));\n    var startIndex = hostElDef.nodeIndex + 1;\n    var endIndex = hostElDef.nodeIndex + hostElDef.childCount;\n    for (var i = startIndex; i <= endIndex; i++) {\n        var nodeDef = hostView.def.nodes[i];\n        if (nodeDef.ngContentIndex === ngContentIndex) {\n            visitRenderNode((hostView), nodeDef, action, parentNode, nextSibling, target);\n        }\n        // jump to next sibling\n        i += nodeDef.childCount;\n    }\n    if (!hostView.parent) {\n        // a root view\n        var projectedNodes = view.root.projectableNodes[ngContentIndex];\n        if (projectedNodes) {\n            for (var i = 0; i < projectedNodes.length; i++) {\n                execRenderNodeAction(view, projectedNodes[i], action, parentNode, nextSibling, target);\n            }\n        }\n    }\n}\nfunction visitRenderNode(view, nodeDef, action, parentNode, nextSibling, target) {\n    if (nodeDef.flags & 8 /* TypeNgContent */) {\n        visitProjectedRenderNodes(view, nodeDef.ngContent.index, action, parentNode, nextSibling, target);\n    }\n    else {\n        var rn = renderNode(view, nodeDef);\n        if (action === 3 /* RemoveChild */ && (nodeDef.flags & 33554432 /* ComponentView */) &&\n            (nodeDef.bindingFlags & 48 /* CatSyntheticProperty */)) {\n            // Note: we might need to do both actions.\n            if (nodeDef.bindingFlags & (16 /* SyntheticProperty */)) {\n                execRenderNodeAction(view, rn, action, parentNode, nextSibling, target);\n            }\n            if (nodeDef.bindingFlags & (32 /* SyntheticHostProperty */)) {\n                var compView = asElementData(view, nodeDef.nodeIndex).componentView;\n                execRenderNodeAction(compView, rn, action, parentNode, nextSibling, target);\n            }\n        }\n        else {\n            execRenderNodeAction(view, rn, action, parentNode, nextSibling, target);\n        }\n        if (nodeDef.flags & 16777216 /* EmbeddedViews */) {\n            var embeddedViews = asElementData(view, nodeDef.nodeIndex).viewContainer._embeddedViews;\n            for (var k = 0; k < embeddedViews.length; k++) {\n                visitRootRenderNodes(embeddedViews[k], action, parentNode, nextSibling, target);\n            }\n        }\n        if (nodeDef.flags & 1 /* TypeElement */ && !nodeDef.element.name) {\n            visitSiblingRenderNodes(view, action, nodeDef.nodeIndex + 1, nodeDef.nodeIndex + nodeDef.childCount, parentNode, nextSibling, target);\n        }\n    }\n}\nfunction execRenderNodeAction(view, renderNode, action, parentNode, nextSibling, target) {\n    var renderer = view.renderer;\n    switch (action) {\n        case 1 /* AppendChild */:\n            renderer.appendChild(parentNode, renderNode);\n            break;\n        case 2 /* InsertBefore */:\n            renderer.insertBefore(parentNode, renderNode, nextSibling);\n            break;\n        case 3 /* RemoveChild */:\n            renderer.removeChild(parentNode, renderNode);\n            break;\n        case 0 /* Collect */:\n            target.push(renderNode);\n            break;\n    }\n}\nvar NS_PREFIX_RE = /^:([^:]+):(.+)$/;\nfunction splitNamespace(name) {\n    if (name[0] === ':') {\n        var match = (name.match(NS_PREFIX_RE));\n        return [match[1], match[2]];\n    }\n    return ['', name];\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n\nfunction createElement(view, renderHost, def) {\n    var elDef = (def.element);\n    var rootSelectorOrNode = view.root.selectorOrNode;\n    var renderer = view.renderer;\n    var el;\n    if (view.parent || !rootSelectorOrNode) {\n        if (elDef.name) {\n            el = renderer.createElement(elDef.name, elDef.ns);\n        }\n        else {\n            el = renderer.createComment('');\n        }\n        var parentEl = getParentRenderElement(view, renderHost, def);\n        if (parentEl) {\n            renderer.appendChild(parentEl, el);\n        }\n    }\n    else {\n        el = renderer.selectRootElement(rootSelectorOrNode);\n    }\n    if (elDef.attrs) {\n        for (var i = 0; i < elDef.attrs.length; i++) {\n            var _a = __read(elDef.attrs[i], 3), ns = _a[0], name_2 = _a[1], value = _a[2];\n            renderer.setAttribute(el, name_2, value, ns);\n        }\n    }\n    return el;\n}\nfunction listenToElementOutputs(view, compView, def, el) {\n    for (var i = 0; i < def.outputs.length; i++) {\n        var output = def.outputs[i];\n        var handleEventClosure = renderEventHandlerClosure(view, def.nodeIndex, elementEventFullName$1(output.target, output.eventName));\n        var listenTarget = output.target;\n        var listenerView = view;\n        if (output.target === 'component') {\n            listenTarget = null;\n            listenerView = compView;\n        }\n        var disposable = listenerView.renderer.listen(listenTarget || el, output.eventName, handleEventClosure);\n        view.disposables[def.outputIndex + i] = disposable;\n    }\n}\nfunction renderEventHandlerClosure(view, index, eventName) {\n    return function (event) { return dispatchEvent(view, index, eventName, event); };\n}\nfunction checkAndUpdateElementInline(view, def, v0, v1, v2, v3, v4, v5, v6, v7, v8, v9) {\n    var bindLen = def.bindings.length;\n    var changed = false;\n    if (bindLen > 0 && checkAndUpdateElementValue(view, def, 0, v0))\n        changed = true;\n    if (bindLen > 1 && checkAndUpdateElementValue(view, def, 1, v1))\n        changed = true;\n    if (bindLen > 2 && checkAndUpdateElementValue(view, def, 2, v2))\n        changed = true;\n    if (bindLen > 3 && checkAndUpdateElementValue(view, def, 3, v3))\n        changed = true;\n    if (bindLen > 4 && checkAndUpdateElementValue(view, def, 4, v4))\n        changed = true;\n    if (bindLen > 5 && checkAndUpdateElementValue(view, def, 5, v5))\n        changed = true;\n    if (bindLen > 6 && checkAndUpdateElementValue(view, def, 6, v6))\n        changed = true;\n    if (bindLen > 7 && checkAndUpdateElementValue(view, def, 7, v7))\n        changed = true;\n    if (bindLen > 8 && checkAndUpdateElementValue(view, def, 8, v8))\n        changed = true;\n    if (bindLen > 9 && checkAndUpdateElementValue(view, def, 9, v9))\n        changed = true;\n    return changed;\n}\nfunction checkAndUpdateElementDynamic(view, def, values) {\n    var changed = false;\n    for (var i = 0; i < values.length; i++) {\n        if (checkAndUpdateElementValue(view, def, i, values[i]))\n            changed = true;\n    }\n    return changed;\n}\nfunction checkAndUpdateElementValue(view, def, bindingIdx, value) {\n    if (!checkAndUpdateBinding(view, def, bindingIdx, value)) {\n        return false;\n    }\n    var binding = def.bindings[bindingIdx];\n    var elData = asElementData(view, def.nodeIndex);\n    var renderNode$$1 = elData.renderElement;\n    var name = (binding.name);\n    switch (binding.flags & 15 /* Types */) {\n        case 1 /* TypeElementAttribute */:\n            setElementAttribute(view, binding, renderNode$$1, binding.ns, name, value);\n            break;\n        case 2 /* TypeElementClass */:\n            setElementClass(view, renderNode$$1, name, value);\n            break;\n        case 4 /* TypeElementStyle */:\n            setElementStyle(view, binding, renderNode$$1, name, value);\n            break;\n        case 8 /* TypeProperty */:\n            var bindView = (def.flags & 33554432 /* ComponentView */ &&\n                binding.flags & 32 /* SyntheticHostProperty */) ?\n                elData.componentView :\n                view;\n            setElementProperty(bindView, binding, renderNode$$1, name, value);\n            break;\n    }\n    return true;\n}\nfunction setElementAttribute(view, binding, renderNode$$1, ns, name, value) {\n    var securityContext = binding.securityContext;\n    var renderValue = securityContext ? view.root.sanitizer.sanitize(securityContext, value) : value;\n    renderValue = renderValue != null ? renderValue.toString() : null;\n    var renderer = view.renderer;\n    if (value != null) {\n        renderer.setAttribute(renderNode$$1, name, renderValue, ns);\n    }\n    else {\n        renderer.removeAttribute(renderNode$$1, name, ns);\n    }\n}\nfunction setElementClass(view, renderNode$$1, name, value) {\n    var renderer = view.renderer;\n    if (value) {\n        renderer.addClass(renderNode$$1, name);\n    }\n    else {\n        renderer.removeClass(renderNode$$1, name);\n    }\n}\nfunction setElementStyle(view, binding, renderNode$$1, name, value) {\n    var renderValue = view.root.sanitizer.sanitize(SecurityContext$1.STYLE, value);\n    if (renderValue != null) {\n        renderValue = renderValue.toString();\n        var unit = binding.suffix;\n        if (unit != null) {\n            renderValue = renderValue + unit;\n        }\n    }\n    else {\n        renderValue = null;\n    }\n    var renderer = view.renderer;\n    if (renderValue != null) {\n        renderer.setStyle(renderNode$$1, name, renderValue);\n    }\n    else {\n        renderer.removeStyle(renderNode$$1, name);\n    }\n}\nfunction setElementProperty(view, binding, renderNode$$1, name, value) {\n    var securityContext = binding.securityContext;\n    var renderValue = securityContext ? view.root.sanitizer.sanitize(securityContext, value) : value;\n    view.renderer.setProperty(renderNode$$1, name, renderValue);\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar UNDEFINED_VALUE = new Object();\nvar InjectorRefTokenKey$1 = tokenKey(Injector);\nvar INJECTORRefTokenKey$1 = tokenKey(INJECTOR);\nvar NgModuleRefTokenKey = tokenKey(NgModuleRef);\n\n\nfunction initNgModule(data) {\n    var def = data._def;\n    var providers = data._providers = new Array(def.providers.length);\n    for (var i = 0; i < def.providers.length; i++) {\n        var provDef = def.providers[i];\n        if (!(provDef.flags & 4096 /* LazyProvider */)) {\n            providers[i] = _createProviderInstance$1(data, provDef);\n        }\n    }\n}\nfunction resolveNgModuleDep(data, depDef, notFoundValue) {\n    if (notFoundValue === void 0) { notFoundValue = Injector.THROW_IF_NOT_FOUND; }\n    var former = setCurrentInjector(data);\n    try {\n        if (depDef.flags & 8 /* Value */) {\n            return depDef.token;\n        }\n        if (depDef.flags & 2 /* Optional */) {\n            notFoundValue = null;\n        }\n        if (depDef.flags & 1 /* SkipSelf */) {\n            return data._parent.get(depDef.token, notFoundValue);\n        }\n        var tokenKey_1 = depDef.tokenKey;\n        switch (tokenKey_1) {\n            case InjectorRefTokenKey$1:\n            case INJECTORRefTokenKey$1:\n            case NgModuleRefTokenKey:\n                return data;\n        }\n        var providerDef = data._def.providersByKey[tokenKey_1];\n        if (providerDef) {\n            var providerInstance = data._providers[providerDef.index];\n            if (providerInstance === undefined) {\n                providerInstance = data._providers[providerDef.index] =\n                    _createProviderInstance$1(data, providerDef);\n            }\n            return providerInstance === UNDEFINED_VALUE ? undefined : providerInstance;\n        }\n        else if (depDef.token.ngInjectableDef && targetsModule(data, depDef.token.ngInjectableDef)) {\n            var injectableDef = depDef.token.ngInjectableDef;\n            var index = data._providers.length;\n            data._def.providersByKey[depDef.tokenKey] = {\n                flags: 1024 /* TypeFactoryProvider */ | 4096 /* LazyProvider */,\n                value: injectableDef.factory,\n                deps: [], index: index,\n                token: depDef.token,\n            };\n            data._providers[index] = UNDEFINED_VALUE;\n            return (data._providers[index] =\n                _createProviderInstance$1(data, data._def.providersByKey[depDef.tokenKey]));\n        }\n        return data._parent.get(depDef.token, notFoundValue);\n    }\n    finally {\n        setCurrentInjector(former);\n    }\n}\nfunction moduleTransitivelyPresent(ngModule, scope) {\n    return ngModule._def.modules.indexOf(scope) > -1;\n}\nfunction targetsModule(ngModule, def) {\n    return def.providedIn != null && (moduleTransitivelyPresent(ngModule, def.providedIn) ||\n        def.providedIn === 'root' && ngModule._def.isRoot);\n}\nfunction _createProviderInstance$1(ngModule, providerDef) {\n    var injectable;\n    switch (providerDef.flags & 201347067 /* Types */) {\n        case 512 /* TypeClassProvider */:\n            injectable = _createClass(ngModule, providerDef.value, providerDef.deps);\n            break;\n        case 1024 /* TypeFactoryProvider */:\n            injectable = _callFactory(ngModule, providerDef.value, providerDef.deps);\n            break;\n        case 2048 /* TypeUseExistingProvider */:\n            injectable = resolveNgModuleDep(ngModule, providerDef.deps[0]);\n            break;\n        case 256 /* TypeValueProvider */:\n            injectable = providerDef.value;\n            break;\n    }\n    return injectable === undefined ? UNDEFINED_VALUE : injectable;\n}\nfunction _createClass(ngModule, ctor, deps) {\n    var len = deps.length;\n    switch (len) {\n        case 0:\n            return new ctor();\n        case 1:\n            return new ctor(resolveNgModuleDep(ngModule, deps[0]));\n        case 2:\n            return new ctor(resolveNgModuleDep(ngModule, deps[0]), resolveNgModuleDep(ngModule, deps[1]));\n        case 3:\n            return new ctor(resolveNgModuleDep(ngModule, deps[0]), resolveNgModuleDep(ngModule, deps[1]), resolveNgModuleDep(ngModule, deps[2]));\n        default:\n            var depValues = new Array(len);\n            for (var i = 0; i < len; i++) {\n                depValues[i] = resolveNgModuleDep(ngModule, deps[i]);\n            }\n            return new (ctor.bind.apply(ctor, __spread([void 0], depValues)))();\n    }\n}\nfunction _callFactory(ngModule, factory, deps) {\n    var len = deps.length;\n    switch (len) {\n        case 0:\n            return factory();\n        case 1:\n            return factory(resolveNgModuleDep(ngModule, deps[0]));\n        case 2:\n            return factory(resolveNgModuleDep(ngModule, deps[0]), resolveNgModuleDep(ngModule, deps[1]));\n        case 3:\n            return factory(resolveNgModuleDep(ngModule, deps[0]), resolveNgModuleDep(ngModule, deps[1]), resolveNgModuleDep(ngModule, deps[2]));\n        default:\n            var depValues = Array(len);\n            for (var i = 0; i < len; i++) {\n                depValues[i] = resolveNgModuleDep(ngModule, deps[i]);\n            }\n            return factory.apply(void 0, __spread(depValues));\n    }\n}\nfunction callNgModuleLifecycle(ngModule, lifecycles) {\n    var def = ngModule._def;\n    for (var i = 0; i < def.providers.length; i++) {\n        var provDef = def.providers[i];\n        if (provDef.flags & 131072 /* OnDestroy */) {\n            var instance = ngModule._providers[i];\n            if (instance && instance !== UNDEFINED_VALUE) {\n                instance.ngOnDestroy();\n            }\n        }\n    }\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nfunction attachEmbeddedView(parentView, elementData, viewIndex, view) {\n    var embeddedViews = elementData.viewContainer._embeddedViews;\n    if (viewIndex === null || viewIndex === undefined) {\n        viewIndex = embeddedViews.length;\n    }\n    view.viewContainerParent = parentView;\n    addToArray(embeddedViews, (viewIndex), view);\n    attachProjectedView(elementData, view);\n    Services.dirtyParentQueries(view);\n    var prevView = (viewIndex) > 0 ? embeddedViews[(viewIndex) - 1] : null;\n    renderAttachEmbeddedView(elementData, prevView, view);\n}\nfunction attachProjectedView(vcElementData, view) {\n    var dvcElementData = declaredViewContainer(view);\n    if (!dvcElementData || dvcElementData === vcElementData ||\n        view.state & 16 /* IsProjectedView */) {\n        return;\n    }\n    // Note: For performance reasons, we\n    // - add a view to template._projectedViews only 1x throughout its lifetime,\n    //   and remove it not until the view is destroyed.\n    //   (hard, as when a parent view is attached/detached we would need to attach/detach all\n    //    nested projected views as well, even across component boundaries).\n    // - don't track the insertion order of views in the projected views array\n    //   (hard, as when the views of the same template are inserted different view containers)\n    view.state |= 16 /* IsProjectedView */;\n    var projectedViews = dvcElementData.template._projectedViews;\n    if (!projectedViews) {\n        projectedViews = dvcElementData.template._projectedViews = [];\n    }\n    projectedViews.push(view);\n    // Note: we are changing the NodeDef here as we cannot calculate\n    // the fact whether a template is used for projection during compilation.\n    markNodeAsProjectedTemplate(view.parent.def, (view.parentNodeDef));\n}\nfunction markNodeAsProjectedTemplate(viewDef, nodeDef) {\n    if (nodeDef.flags & 4 /* ProjectedTemplate */) {\n        return;\n    }\n    viewDef.nodeFlags |= 4 /* ProjectedTemplate */;\n    nodeDef.flags |= 4 /* ProjectedTemplate */;\n    var parentNodeDef = nodeDef.parent;\n    while (parentNodeDef) {\n        parentNodeDef.childFlags |= 4 /* ProjectedTemplate */;\n        parentNodeDef = parentNodeDef.parent;\n    }\n}\nfunction detachEmbeddedView(elementData, viewIndex) {\n    var embeddedViews = elementData.viewContainer._embeddedViews;\n    if (viewIndex == null || viewIndex >= embeddedViews.length) {\n        viewIndex = embeddedViews.length - 1;\n    }\n    if (viewIndex < 0) {\n        return null;\n    }\n    var view = embeddedViews[viewIndex];\n    view.viewContainerParent = null;\n    removeFromArray(embeddedViews, viewIndex);\n    // See attachProjectedView for why we don't update projectedViews here.\n    Services.dirtyParentQueries(view);\n    renderDetachView(view);\n    return view;\n}\nfunction detachProjectedView(view) {\n    if (!(view.state & 16 /* IsProjectedView */)) {\n        return;\n    }\n    var dvcElementData = declaredViewContainer(view);\n    if (dvcElementData) {\n        var projectedViews = dvcElementData.template._projectedViews;\n        if (projectedViews) {\n            removeFromArray(projectedViews, projectedViews.indexOf(view));\n            Services.dirtyParentQueries(view);\n        }\n    }\n}\nfunction moveEmbeddedView(elementData, oldViewIndex, newViewIndex) {\n    var embeddedViews = elementData.viewContainer._embeddedViews;\n    var view = embeddedViews[oldViewIndex];\n    removeFromArray(embeddedViews, oldViewIndex);\n    if (newViewIndex == null) {\n        newViewIndex = embeddedViews.length;\n    }\n    addToArray(embeddedViews, newViewIndex, view);\n    // Note: Don't need to change projectedViews as the order in there\n    // as always invalid...\n    Services.dirtyParentQueries(view);\n    renderDetachView(view);\n    var prevView = newViewIndex > 0 ? embeddedViews[newViewIndex - 1] : null;\n    renderAttachEmbeddedView(elementData, prevView, view);\n    return view;\n}\nfunction renderAttachEmbeddedView(elementData, prevView, view) {\n    var prevRenderNode = prevView ? renderNode(prevView, (prevView.def.lastRenderRootNode)) :\n        elementData.renderElement;\n    var parentNode = view.renderer.parentNode(prevRenderNode);\n    var nextSibling = view.renderer.nextSibling(prevRenderNode);\n    // Note: We can't check if `nextSibling` is present, as on WebWorkers it will always be!\n    // However, browsers automatically do `appendChild` when there is no `nextSibling`.\n    visitRootRenderNodes(view, 2 /* InsertBefore */, parentNode, nextSibling, undefined);\n}\nfunction renderDetachView(view) {\n    visitRootRenderNodes(view, 3 /* RemoveChild */, null, null, undefined);\n}\nfunction addToArray(arr, index, value) {\n    // perf: array.push is faster than array.splice!\n    if (index >= arr.length) {\n        arr.push(value);\n    }\n    else {\n        arr.splice(index, 0, value);\n    }\n}\nfunction removeFromArray(arr, index) {\n    // perf: array.pop is faster than array.splice!\n    if (index >= arr.length - 1) {\n        arr.pop();\n    }\n    else {\n        arr.splice(index, 1);\n    }\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar EMPTY_CONTEXT = new Object();\n// Attention: this function is called as top level function.\n// Putting any logic in here will destroy closure tree shaking!\n\nfunction getComponentViewDefinitionFactory(componentFactory) {\n    return componentFactory.viewDefFactory;\n}\nvar ComponentFactory_ = /** @class */ (function (_super) {\n    __extends(ComponentFactory_, _super);\n    function ComponentFactory_(selector, componentType, viewDefFactory, _inputs, _outputs, ngContentSelectors) {\n        var _this = \n        // Attention: this ctor is called as top level function.\n        // Putting any logic in here will destroy closure tree shaking!\n        _super.call(this) || this;\n        _this.selector = selector;\n        _this.componentType = componentType;\n        _this._inputs = _inputs;\n        _this._outputs = _outputs;\n        _this.ngContentSelectors = ngContentSelectors;\n        _this.viewDefFactory = viewDefFactory;\n        return _this;\n    }\n    Object.defineProperty(ComponentFactory_.prototype, \"inputs\", {\n        get: function () {\n            var inputsArr = [];\n            var inputs = (this._inputs);\n            for (var propName in inputs) {\n                var templateName = inputs[propName];\n                inputsArr.push({ propName: propName, templateName: templateName });\n            }\n            return inputsArr;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ComponentFactory_.prototype, \"outputs\", {\n        get: function () {\n            var outputsArr = [];\n            for (var propName in this._outputs) {\n                var templateName = this._outputs[propName];\n                outputsArr.push({ propName: propName, templateName: templateName });\n            }\n            return outputsArr;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * Creates a new component.\n     */\n    /**\n       * Creates a new component.\n       */\n    ComponentFactory_.prototype.create = /**\n       * Creates a new component.\n       */\n    function (injector, projectableNodes, rootSelectorOrNode, ngModule) {\n        if (!ngModule) {\n            throw new Error('ngModule should be provided');\n        }\n        var viewDef = resolveDefinition(this.viewDefFactory);\n        var componentNodeIndex = viewDef.nodes[0].element.componentProvider.nodeIndex;\n        var view = Services.createRootView(injector, projectableNodes || [], rootSelectorOrNode, viewDef, ngModule, EMPTY_CONTEXT);\n        var component = asProviderData(view, componentNodeIndex).instance;\n        if (rootSelectorOrNode) {\n            view.renderer.setAttribute(asElementData(view, 0).renderElement, 'ng-version', VERSION$2.full);\n        }\n        return new ComponentRef_(view, new ViewRef_(view), component);\n    };\n    return ComponentFactory_;\n}(ComponentFactory));\nvar ComponentRef_ = /** @class */ (function (_super) {\n    __extends(ComponentRef_, _super);\n    function ComponentRef_(_view, _viewRef, _component) {\n        var _this = _super.call(this) || this;\n        _this._view = _view;\n        _this._viewRef = _viewRef;\n        _this._component = _component;\n        _this._elDef = _this._view.def.nodes[0];\n        _this.hostView = _viewRef;\n        _this.changeDetectorRef = _viewRef;\n        _this.instance = _component;\n        return _this;\n    }\n    Object.defineProperty(ComponentRef_.prototype, \"location\", {\n        get: function () {\n            return new ElementRef(asElementData(this._view, this._elDef.nodeIndex).renderElement);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ComponentRef_.prototype, \"injector\", {\n        get: function () { return new Injector_(this._view, this._elDef); },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ComponentRef_.prototype, \"componentType\", {\n        get: function () { return this._component.constructor; },\n        enumerable: true,\n        configurable: true\n    });\n    ComponentRef_.prototype.destroy = function () { this._viewRef.destroy(); };\n    ComponentRef_.prototype.onDestroy = function (callback) { this._viewRef.onDestroy(callback); };\n    return ComponentRef_;\n}(ComponentRef));\nfunction createViewContainerData(view, elDef, elData) {\n    return new ViewContainerRef_(view, elDef, elData);\n}\nvar ViewContainerRef_ = /** @class */ (function () {\n    function ViewContainerRef_(_view, _elDef, _data) {\n        this._view = _view;\n        this._elDef = _elDef;\n        this._data = _data;\n        /**\n           * @internal\n           */\n        this._embeddedViews = [];\n    }\n    Object.defineProperty(ViewContainerRef_.prototype, \"element\", {\n        get: function () { return new ElementRef(this._data.renderElement); },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ViewContainerRef_.prototype, \"injector\", {\n        get: function () { return new Injector_(this._view, this._elDef); },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ViewContainerRef_.prototype, \"parentInjector\", {\n        get: function () {\n            var view = this._view;\n            var elDef = this._elDef.parent;\n            while (!elDef && view) {\n                elDef = viewParentEl(view);\n                view = (view.parent);\n            }\n            return view ? new Injector_(view, elDef) : new Injector_(this._view, null);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    ViewContainerRef_.prototype.clear = function () {\n        var len = this._embeddedViews.length;\n        for (var i = len - 1; i >= 0; i--) {\n            var view = (detachEmbeddedView(this._data, i));\n            Services.destroyView(view);\n        }\n    };\n    ViewContainerRef_.prototype.get = function (index) {\n        var view = this._embeddedViews[index];\n        if (view) {\n            var ref = new ViewRef_(view);\n            ref.attachToViewContainerRef(this);\n            return ref;\n        }\n        return null;\n    };\n    Object.defineProperty(ViewContainerRef_.prototype, \"length\", {\n        get: function () { return this._embeddedViews.length; },\n        enumerable: true,\n        configurable: true\n    });\n    ViewContainerRef_.prototype.createEmbeddedView = function (templateRef, context, index) {\n        var viewRef = templateRef.createEmbeddedView(context || {});\n        this.insert(viewRef, index);\n        return viewRef;\n    };\n    ViewContainerRef_.prototype.createComponent = function (componentFactory, index, injector, projectableNodes, ngModuleRef) {\n        var contextInjector = injector || this.parentInjector;\n        if (!ngModuleRef && !(componentFactory instanceof ComponentFactoryBoundToModule)) {\n            ngModuleRef = contextInjector.get(NgModuleRef);\n        }\n        var componentRef = componentFactory.create(contextInjector, projectableNodes, undefined, ngModuleRef);\n        this.insert(componentRef.hostView, index);\n        return componentRef;\n    };\n    ViewContainerRef_.prototype.insert = function (viewRef, index) {\n        if (viewRef.destroyed) {\n            throw new Error('Cannot insert a destroyed View in a ViewContainer!');\n        }\n        var viewRef_ = viewRef;\n        var viewData = viewRef_._view;\n        attachEmbeddedView(this._view, this._data, index, viewData);\n        viewRef_.attachToViewContainerRef(this);\n        return viewRef;\n    };\n    ViewContainerRef_.prototype.move = function (viewRef, currentIndex) {\n        if (viewRef.destroyed) {\n            throw new Error('Cannot move a destroyed View in a ViewContainer!');\n        }\n        var previousIndex = this._embeddedViews.indexOf(viewRef._view);\n        moveEmbeddedView(this._data, previousIndex, currentIndex);\n        return viewRef;\n    };\n    ViewContainerRef_.prototype.indexOf = function (viewRef) {\n        return this._embeddedViews.indexOf(viewRef._view);\n    };\n    ViewContainerRef_.prototype.remove = function (index) {\n        var viewData = detachEmbeddedView(this._data, index);\n        if (viewData) {\n            Services.destroyView(viewData);\n        }\n    };\n    ViewContainerRef_.prototype.detach = function (index) {\n        var view = detachEmbeddedView(this._data, index);\n        return view ? new ViewRef_(view) : null;\n    };\n    return ViewContainerRef_;\n}());\nfunction createChangeDetectorRef(view) {\n    return new ViewRef_(view);\n}\nvar ViewRef_ = /** @class */ (function () {\n    function ViewRef_(_view) {\n        this._view = _view;\n        this._viewContainerRef = null;\n        this._appRef = null;\n    }\n    Object.defineProperty(ViewRef_.prototype, \"rootNodes\", {\n        get: function () { return rootRenderNodes(this._view); },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ViewRef_.prototype, \"context\", {\n        get: function () { return this._view.context; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ViewRef_.prototype, \"destroyed\", {\n        get: function () { return (this._view.state & 128 /* Destroyed */) !== 0; },\n        enumerable: true,\n        configurable: true\n    });\n    ViewRef_.prototype.markForCheck = function () { markParentViewsForCheck(this._view); };\n    ViewRef_.prototype.detach = function () { this._view.state &= ~4 /* Attached */; };\n    ViewRef_.prototype.detectChanges = function () {\n        var fs$$1 = this._view.root.rendererFactory;\n        if (fs$$1.begin) {\n            fs$$1.begin();\n        }\n        try {\n            Services.checkAndUpdateView(this._view);\n        }\n        finally {\n            if (fs$$1.end) {\n                fs$$1.end();\n            }\n        }\n    };\n    ViewRef_.prototype.checkNoChanges = function () { Services.checkNoChangesView(this._view); };\n    ViewRef_.prototype.reattach = function () { this._view.state |= 4 /* Attached */; };\n    ViewRef_.prototype.onDestroy = function (callback) {\n        if (!this._view.disposables) {\n            this._view.disposables = [];\n        }\n        this._view.disposables.push(callback);\n    };\n    ViewRef_.prototype.destroy = function () {\n        if (this._appRef) {\n            this._appRef.detachView(this);\n        }\n        else if (this._viewContainerRef) {\n            this._viewContainerRef.detach(this._viewContainerRef.indexOf(this));\n        }\n        Services.destroyView(this._view);\n    };\n    ViewRef_.prototype.detachFromAppRef = function () {\n        this._appRef = null;\n        renderDetachView(this._view);\n        Services.dirtyParentQueries(this._view);\n    };\n    ViewRef_.prototype.attachToAppRef = function (appRef) {\n        if (this._viewContainerRef) {\n            throw new Error('This view is already attached to a ViewContainer!');\n        }\n        this._appRef = appRef;\n    };\n    ViewRef_.prototype.attachToViewContainerRef = function (vcRef) {\n        if (this._appRef) {\n            throw new Error('This view is already attached directly to the ApplicationRef!');\n        }\n        this._viewContainerRef = vcRef;\n    };\n    return ViewRef_;\n}());\nfunction createTemplateData(view, def) {\n    return new TemplateRef_(view, def);\n}\nvar TemplateRef_ = /** @class */ (function (_super) {\n    __extends(TemplateRef_, _super);\n    function TemplateRef_(_parentView, _def) {\n        var _this = _super.call(this) || this;\n        _this._parentView = _parentView;\n        _this._def = _def;\n        return _this;\n    }\n    TemplateRef_.prototype.createEmbeddedView = function (context) {\n        return new ViewRef_(Services.createEmbeddedView(this._parentView, this._def, (this._def.element.template), context));\n    };\n    Object.defineProperty(TemplateRef_.prototype, \"elementRef\", {\n        get: function () {\n            return new ElementRef(asElementData(this._parentView, this._def.nodeIndex).renderElement);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return TemplateRef_;\n}(TemplateRef));\nfunction createInjector$1(view, elDef) {\n    return new Injector_(view, elDef);\n}\nvar Injector_ = /** @class */ (function () {\n    function Injector_(view, elDef) {\n        this.view = view;\n        this.elDef = elDef;\n    }\n    Injector_.prototype.get = function (token, notFoundValue) {\n        if (notFoundValue === void 0) { notFoundValue = Injector.THROW_IF_NOT_FOUND; }\n        var allowPrivateServices = this.elDef ? (this.elDef.flags & 33554432 /* ComponentView */) !== 0 : false;\n        return Services.resolveDep(this.view, this.elDef, allowPrivateServices, { flags: 0 /* None */, token: token, tokenKey: tokenKey(token) }, notFoundValue);\n    };\n    return Injector_;\n}());\n\nfunction createRendererV1(view) {\n    return new RendererAdapter(view.renderer);\n}\nvar RendererAdapter = /** @class */ (function () {\n    function RendererAdapter(delegate) {\n        this.delegate = delegate;\n    }\n    RendererAdapter.prototype.selectRootElement = function (selectorOrNode) {\n        return this.delegate.selectRootElement(selectorOrNode);\n    };\n    RendererAdapter.prototype.createElement = function (parent, namespaceAndName) {\n        var _a = __read(splitNamespace(namespaceAndName), 2), ns = _a[0], name = _a[1];\n        var el = this.delegate.createElement(name, ns);\n        if (parent) {\n            this.delegate.appendChild(parent, el);\n        }\n        return el;\n    };\n    RendererAdapter.prototype.createViewRoot = function (hostElement) { return hostElement; };\n    RendererAdapter.prototype.createTemplateAnchor = function (parentElement) {\n        var comment = this.delegate.createComment('');\n        if (parentElement) {\n            this.delegate.appendChild(parentElement, comment);\n        }\n        return comment;\n    };\n    RendererAdapter.prototype.createText = function (parentElement, value) {\n        var node = this.delegate.createText(value);\n        if (parentElement) {\n            this.delegate.appendChild(parentElement, node);\n        }\n        return node;\n    };\n    RendererAdapter.prototype.projectNodes = function (parentElement, nodes) {\n        for (var i = 0; i < nodes.length; i++) {\n            this.delegate.appendChild(parentElement, nodes[i]);\n        }\n    };\n    RendererAdapter.prototype.attachViewAfter = function (node, viewRootNodes) {\n        var parentElement = this.delegate.parentNode(node);\n        var nextSibling = this.delegate.nextSibling(node);\n        for (var i = 0; i < viewRootNodes.length; i++) {\n            this.delegate.insertBefore(parentElement, viewRootNodes[i], nextSibling);\n        }\n    };\n    RendererAdapter.prototype.detachView = function (viewRootNodes) {\n        for (var i = 0; i < viewRootNodes.length; i++) {\n            var node = viewRootNodes[i];\n            var parentElement = this.delegate.parentNode(node);\n            this.delegate.removeChild(parentElement, node);\n        }\n    };\n    RendererAdapter.prototype.destroyView = function (hostElement, viewAllNodes) {\n        for (var i = 0; i < viewAllNodes.length; i++) {\n            this.delegate.destroyNode(viewAllNodes[i]);\n        }\n    };\n    RendererAdapter.prototype.listen = function (renderElement, name, callback) {\n        return this.delegate.listen(renderElement, name, callback);\n    };\n    RendererAdapter.prototype.listenGlobal = function (target, name, callback) {\n        return this.delegate.listen(target, name, callback);\n    };\n    RendererAdapter.prototype.setElementProperty = function (renderElement, propertyName, propertyValue) {\n        this.delegate.setProperty(renderElement, propertyName, propertyValue);\n    };\n    RendererAdapter.prototype.setElementAttribute = function (renderElement, namespaceAndName, attributeValue) {\n        var _a = __read(splitNamespace(namespaceAndName), 2), ns = _a[0], name = _a[1];\n        if (attributeValue != null) {\n            this.delegate.setAttribute(renderElement, name, attributeValue, ns);\n        }\n        else {\n            this.delegate.removeAttribute(renderElement, name, ns);\n        }\n    };\n    RendererAdapter.prototype.setBindingDebugInfo = function (renderElement, propertyName, propertyValue) { };\n    RendererAdapter.prototype.setElementClass = function (renderElement, className, isAdd) {\n        if (isAdd) {\n            this.delegate.addClass(renderElement, className);\n        }\n        else {\n            this.delegate.removeClass(renderElement, className);\n        }\n    };\n    RendererAdapter.prototype.setElementStyle = function (renderElement, styleName, styleValue) {\n        if (styleValue != null) {\n            this.delegate.setStyle(renderElement, styleName, styleValue);\n        }\n        else {\n            this.delegate.removeStyle(renderElement, styleName);\n        }\n    };\n    RendererAdapter.prototype.invokeElementMethod = function (renderElement, methodName, args) {\n        renderElement[methodName].apply(renderElement, args);\n    };\n    RendererAdapter.prototype.setText = function (renderNode$$1, text) { this.delegate.setValue(renderNode$$1, text); };\n    RendererAdapter.prototype.animate = function () { throw new Error('Renderer.animate is no longer supported!'); };\n    return RendererAdapter;\n}());\nfunction createNgModuleRef(moduleType, parent, bootstrapComponents, def) {\n    return new NgModuleRef_(moduleType, parent, bootstrapComponents, def);\n}\nvar NgModuleRef_ = /** @class */ (function () {\n    function NgModuleRef_(_moduleType, _parent, _bootstrapComponents, _def) {\n        this._moduleType = _moduleType;\n        this._parent = _parent;\n        this._bootstrapComponents = _bootstrapComponents;\n        this._def = _def;\n        this._destroyListeners = [];\n        this._destroyed = false;\n        this.injector = this;\n        initNgModule(this);\n    }\n    NgModuleRef_.prototype.get = function (token, notFoundValue, injectFlags) {\n        if (notFoundValue === void 0) { notFoundValue = Injector.THROW_IF_NOT_FOUND; }\n        if (injectFlags === void 0) { injectFlags = 0 /* Default */; }\n        var flags = 0;\n        if (injectFlags & 1 /* SkipSelf */) {\n            flags |= 1 /* SkipSelf */;\n        }\n        else if (injectFlags & 2 /* Self */) {\n            flags |= 4 /* Self */;\n        }\n        return resolveNgModuleDep(this, { token: token, tokenKey: tokenKey(token), flags: flags }, notFoundValue);\n    };\n    Object.defineProperty(NgModuleRef_.prototype, \"instance\", {\n        get: function () { return this.get(this._moduleType); },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(NgModuleRef_.prototype, \"componentFactoryResolver\", {\n        get: function () { return this.get(ComponentFactoryResolver); },\n        enumerable: true,\n        configurable: true\n    });\n    NgModuleRef_.prototype.destroy = function () {\n        if (this._destroyed) {\n            throw new Error(\"The ng module \" + stringify$1(this.instance.constructor) + \" has already been destroyed.\");\n        }\n        this._destroyed = true;\n        callNgModuleLifecycle(this, 131072 /* OnDestroy */);\n        this._destroyListeners.forEach(function (listener) { return listener(); });\n    };\n    NgModuleRef_.prototype.onDestroy = function (callback) { this._destroyListeners.push(callback); };\n    return NgModuleRef_;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar RendererV1TokenKey = tokenKey(Renderer);\nvar Renderer2TokenKey = tokenKey(Renderer2);\nvar ElementRefTokenKey = tokenKey(ElementRef);\nvar ViewContainerRefTokenKey = tokenKey(ViewContainerRef);\nvar TemplateRefTokenKey = tokenKey(TemplateRef);\nvar ChangeDetectorRefTokenKey = tokenKey(ChangeDetectorRef);\nvar InjectorRefTokenKey = tokenKey(Injector);\nvar INJECTORRefTokenKey = tokenKey(INJECTOR);\n\n\n\n\nfunction createProviderInstance(view, def) {\n    return _createProviderInstance(view, def);\n}\nfunction createPipeInstance(view, def) {\n    // deps are looked up from component.\n    var compView = view;\n    while (compView.parent && !isComponentView(compView)) {\n        compView = compView.parent;\n    }\n    // pipes can see the private services of the component\n    var allowPrivateServices = true;\n    // pipes are always eager and classes!\n    return createClass((compView.parent), (viewParentEl(compView)), allowPrivateServices, def.provider.value, def.provider.deps);\n}\nfunction createDirectiveInstance(view, def) {\n    // components can see other private services, other directives can't.\n    var allowPrivateServices = (def.flags & 32768 /* Component */) > 0;\n    // directives are always eager and classes!\n    var instance = createClass(view, (def.parent), allowPrivateServices, def.provider.value, def.provider.deps);\n    if (def.outputs.length) {\n        for (var i = 0; i < def.outputs.length; i++) {\n            var output = def.outputs[i];\n            var subscription = instance[output.propName].subscribe(eventHandlerClosure(view, def.parent.nodeIndex, output.eventName));\n            view.disposables[def.outputIndex + i] = subscription.unsubscribe.bind(subscription);\n        }\n    }\n    return instance;\n}\nfunction eventHandlerClosure(view, index, eventName) {\n    return function (event) { return dispatchEvent(view, index, eventName, event); };\n}\nfunction checkAndUpdateDirectiveInline(view, def, v0, v1, v2, v3, v4, v5, v6, v7, v8, v9) {\n    var providerData = asProviderData(view, def.nodeIndex);\n    var directive = providerData.instance;\n    var changed = false;\n    var changes = (undefined);\n    var bindLen = def.bindings.length;\n    if (bindLen > 0 && checkBinding(view, def, 0, v0)) {\n        changed = true;\n        changes = updateProp(view, providerData, def, 0, v0, changes);\n    }\n    if (bindLen > 1 && checkBinding(view, def, 1, v1)) {\n        changed = true;\n        changes = updateProp(view, providerData, def, 1, v1, changes);\n    }\n    if (bindLen > 2 && checkBinding(view, def, 2, v2)) {\n        changed = true;\n        changes = updateProp(view, providerData, def, 2, v2, changes);\n    }\n    if (bindLen > 3 && checkBinding(view, def, 3, v3)) {\n        changed = true;\n        changes = updateProp(view, providerData, def, 3, v3, changes);\n    }\n    if (bindLen > 4 && checkBinding(view, def, 4, v4)) {\n        changed = true;\n        changes = updateProp(view, providerData, def, 4, v4, changes);\n    }\n    if (bindLen > 5 && checkBinding(view, def, 5, v5)) {\n        changed = true;\n        changes = updateProp(view, providerData, def, 5, v5, changes);\n    }\n    if (bindLen > 6 && checkBinding(view, def, 6, v6)) {\n        changed = true;\n        changes = updateProp(view, providerData, def, 6, v6, changes);\n    }\n    if (bindLen > 7 && checkBinding(view, def, 7, v7)) {\n        changed = true;\n        changes = updateProp(view, providerData, def, 7, v7, changes);\n    }\n    if (bindLen > 8 && checkBinding(view, def, 8, v8)) {\n        changed = true;\n        changes = updateProp(view, providerData, def, 8, v8, changes);\n    }\n    if (bindLen > 9 && checkBinding(view, def, 9, v9)) {\n        changed = true;\n        changes = updateProp(view, providerData, def, 9, v9, changes);\n    }\n    if (changes) {\n        directive.ngOnChanges(changes);\n    }\n    if ((def.flags & 65536 /* OnInit */) &&\n        shouldCallLifecycleInitHook(view, 256 /* InitState_CallingOnInit */, def.nodeIndex)) {\n        directive.ngOnInit();\n    }\n    if (def.flags & 262144 /* DoCheck */) {\n        directive.ngDoCheck();\n    }\n    return changed;\n}\nfunction checkAndUpdateDirectiveDynamic(view, def, values) {\n    var providerData = asProviderData(view, def.nodeIndex);\n    var directive = providerData.instance;\n    var changed = false;\n    var changes = (undefined);\n    for (var i = 0; i < values.length; i++) {\n        if (checkBinding(view, def, i, values[i])) {\n            changed = true;\n            changes = updateProp(view, providerData, def, i, values[i], changes);\n        }\n    }\n    if (changes) {\n        directive.ngOnChanges(changes);\n    }\n    if ((def.flags & 65536 /* OnInit */) &&\n        shouldCallLifecycleInitHook(view, 256 /* InitState_CallingOnInit */, def.nodeIndex)) {\n        directive.ngOnInit();\n    }\n    if (def.flags & 262144 /* DoCheck */) {\n        directive.ngDoCheck();\n    }\n    return changed;\n}\nfunction _createProviderInstance(view, def) {\n    // private services can see other private services\n    var allowPrivateServices = (def.flags & 8192 /* PrivateProvider */) > 0;\n    var providerDef = def.provider;\n    switch (def.flags & 201347067 /* Types */) {\n        case 512 /* TypeClassProvider */:\n            return createClass(view, (def.parent), allowPrivateServices, providerDef.value, providerDef.deps);\n        case 1024 /* TypeFactoryProvider */:\n            return callFactory(view, (def.parent), allowPrivateServices, providerDef.value, providerDef.deps);\n        case 2048 /* TypeUseExistingProvider */:\n            return resolveDep(view, (def.parent), allowPrivateServices, providerDef.deps[0]);\n        case 256 /* TypeValueProvider */:\n            return providerDef.value;\n    }\n}\nfunction createClass(view, elDef, allowPrivateServices, ctor, deps) {\n    var len = deps.length;\n    switch (len) {\n        case 0:\n            return new ctor();\n        case 1:\n            return new ctor(resolveDep(view, elDef, allowPrivateServices, deps[0]));\n        case 2:\n            return new ctor(resolveDep(view, elDef, allowPrivateServices, deps[0]), resolveDep(view, elDef, allowPrivateServices, deps[1]));\n        case 3:\n            return new ctor(resolveDep(view, elDef, allowPrivateServices, deps[0]), resolveDep(view, elDef, allowPrivateServices, deps[1]), resolveDep(view, elDef, allowPrivateServices, deps[2]));\n        default:\n            var depValues = new Array(len);\n            for (var i = 0; i < len; i++) {\n                depValues[i] = resolveDep(view, elDef, allowPrivateServices, deps[i]);\n            }\n            return new (ctor.bind.apply(ctor, __spread([void 0], depValues)))();\n    }\n}\nfunction callFactory(view, elDef, allowPrivateServices, factory, deps) {\n    var len = deps.length;\n    switch (len) {\n        case 0:\n            return factory();\n        case 1:\n            return factory(resolveDep(view, elDef, allowPrivateServices, deps[0]));\n        case 2:\n            return factory(resolveDep(view, elDef, allowPrivateServices, deps[0]), resolveDep(view, elDef, allowPrivateServices, deps[1]));\n        case 3:\n            return factory(resolveDep(view, elDef, allowPrivateServices, deps[0]), resolveDep(view, elDef, allowPrivateServices, deps[1]), resolveDep(view, elDef, allowPrivateServices, deps[2]));\n        default:\n            var depValues = Array(len);\n            for (var i = 0; i < len; i++) {\n                depValues[i] = resolveDep(view, elDef, allowPrivateServices, deps[i]);\n            }\n            return factory.apply(void 0, __spread(depValues));\n    }\n}\n// This default value is when checking the hierarchy for a token.\n//\n// It means both:\n// - the token is not provided by the current injector,\n// - only the element injectors should be checked (ie do not check module injectors\n//\n//          mod1\n//         /\n//       el1   mod2\n//         \\  /\n//         el2\n//\n// When requesting el2.injector.get(token), we should check in the following order and return the\n// first found value:\n// - el2.injector.get(token, default)\n// - el1.injector.get(token, NOT_FOUND_CHECK_ONLY_ELEMENT_INJECTOR) -> do not check the module\n// - mod2.injector.get(token, default)\nvar NOT_FOUND_CHECK_ONLY_ELEMENT_INJECTOR = {};\nfunction resolveDep(view, elDef, allowPrivateServices, depDef, notFoundValue) {\n    if (notFoundValue === void 0) { notFoundValue = Injector.THROW_IF_NOT_FOUND; }\n    if (depDef.flags & 8 /* Value */) {\n        return depDef.token;\n    }\n    var startView = view;\n    if (depDef.flags & 2 /* Optional */) {\n        notFoundValue = null;\n    }\n    var tokenKey$$1 = depDef.tokenKey;\n    if (tokenKey$$1 === ChangeDetectorRefTokenKey) {\n        // directives on the same element as a component should be able to control the change detector\n        // of that component as well.\n        allowPrivateServices = !!(elDef && elDef.element.componentView);\n    }\n    if (elDef && (depDef.flags & 1 /* SkipSelf */)) {\n        allowPrivateServices = false;\n        elDef = (elDef.parent);\n    }\n    var searchView = view;\n    while (searchView) {\n        if (elDef) {\n            switch (tokenKey$$1) {\n                case RendererV1TokenKey: {\n                    var compView = findCompView(searchView, elDef, allowPrivateServices);\n                    return createRendererV1(compView);\n                }\n                case Renderer2TokenKey: {\n                    var compView = findCompView(searchView, elDef, allowPrivateServices);\n                    return compView.renderer;\n                }\n                case ElementRefTokenKey:\n                    return new ElementRef(asElementData(searchView, elDef.nodeIndex).renderElement);\n                case ViewContainerRefTokenKey:\n                    return asElementData(searchView, elDef.nodeIndex).viewContainer;\n                case TemplateRefTokenKey: {\n                    if (elDef.element.template) {\n                        return asElementData(searchView, elDef.nodeIndex).template;\n                    }\n                    break;\n                }\n                case ChangeDetectorRefTokenKey: {\n                    var cdView = findCompView(searchView, elDef, allowPrivateServices);\n                    return createChangeDetectorRef(cdView);\n                }\n                case InjectorRefTokenKey:\n                case INJECTORRefTokenKey:\n                    return createInjector$1(searchView, elDef);\n                default:\n                    var providerDef_1 = (allowPrivateServices ? elDef.element.allProviders :\n                        elDef.element.publicProviders)[tokenKey$$1];\n                    if (providerDef_1) {\n                        var providerData = asProviderData(searchView, providerDef_1.nodeIndex);\n                        if (!providerData) {\n                            providerData = { instance: _createProviderInstance(searchView, providerDef_1) };\n                            searchView.nodes[providerDef_1.nodeIndex] = providerData;\n                        }\n                        return providerData.instance;\n                    }\n            }\n        }\n        allowPrivateServices = isComponentView(searchView);\n        elDef = (viewParentEl(searchView));\n        searchView = (searchView.parent);\n        if (depDef.flags & 4 /* Self */) {\n            searchView = null;\n        }\n    }\n    var value = startView.root.injector.get(depDef.token, NOT_FOUND_CHECK_ONLY_ELEMENT_INJECTOR);\n    if (value !== NOT_FOUND_CHECK_ONLY_ELEMENT_INJECTOR ||\n        notFoundValue === NOT_FOUND_CHECK_ONLY_ELEMENT_INJECTOR) {\n        // Return the value from the root element injector when\n        // - it provides it\n        //   (value !== NOT_FOUND_CHECK_ONLY_ELEMENT_INJECTOR)\n        // - the module injector should not be checked\n        //   (notFoundValue === NOT_FOUND_CHECK_ONLY_ELEMENT_INJECTOR)\n        return value;\n    }\n    return startView.root.ngModule.injector.get(depDef.token, notFoundValue);\n}\nfunction findCompView(view, elDef, allowPrivateServices) {\n    var compView;\n    if (allowPrivateServices) {\n        compView = asElementData(view, elDef.nodeIndex).componentView;\n    }\n    else {\n        compView = view;\n        while (compView.parent && !isComponentView(compView)) {\n            compView = compView.parent;\n        }\n    }\n    return compView;\n}\nfunction updateProp(view, providerData, def, bindingIdx, value, changes) {\n    if (def.flags & 32768 /* Component */) {\n        var compView = asElementData(view, def.parent.nodeIndex).componentView;\n        if (compView.def.flags & 2 /* OnPush */) {\n            compView.state |= 8 /* ChecksEnabled */;\n        }\n    }\n    var binding = def.bindings[bindingIdx];\n    var propName = (binding.name);\n    // Note: This is still safe with Closure Compiler as\n    // the user passed in the property name as an object has to `providerDef`,\n    // so Closure Compiler will have renamed the property correctly already.\n    providerData.instance[propName] = value;\n    if (def.flags & 524288 /* OnChanges */) {\n        changes = changes || {};\n        var oldValue = WrappedValue.unwrap(view.oldValues[def.bindingIndex + bindingIdx]);\n        var binding_1 = def.bindings[bindingIdx];\n        changes[binding_1.nonMinifiedName] =\n            new SimpleChange(oldValue, value, (view.state & 2 /* FirstCheck */) !== 0);\n    }\n    view.oldValues[def.bindingIndex + bindingIdx] = value;\n    return changes;\n}\n// This function calls the ngAfterContentCheck, ngAfterContentInit,\n// ngAfterViewCheck, and ngAfterViewInit lifecycle hooks (depending on the node\n// flags in lifecycle). Unlike ngDoCheck, ngOnChanges and ngOnInit, which are\n// called during a pre-order traversal of the view tree (that is calling the\n// parent hooks before the child hooks) these events are sent in using a\n// post-order traversal of the tree (children before parents). This changes the\n// meaning of initIndex in the view state. For ngOnInit, initIndex tracks the\n// expected nodeIndex which a ngOnInit should be called. When sending\n// ngAfterContentInit and ngAfterViewInit it is the expected count of\n// ngAfterContentInit or ngAfterViewInit methods that have been called. This\n// ensure that despite being called recursively or after picking up after an\n// exception, the ngAfterContentInit or ngAfterViewInit will be called on the\n// correct nodes. Consider for example, the following (where E is an element\n// and D is a directive)\n//  Tree:       pre-order index  post-order index\n//    E1        0                6\n//      E2      1                1\n//       D3     2                0\n//      E4      3                5\n//       E5     4                4\n//        E6    5                2\n//        E7    6                3\n// As can be seen, the post-order index has an unclear relationship to the\n// pre-order index (postOrderIndex === preOrderIndex - parentCount +\n// childCount). Since number of calls to ngAfterContentInit and ngAfterViewInit\n// are stable (will be the same for the same view regardless of exceptions or\n// recursion) we just need to count them which will roughly correspond to the\n// post-order index (it skips elements and directives that do not have\n// lifecycle hooks).\n//\n// For example, if an exception is raised in the E6.onAfterViewInit() the\n// initIndex is left at 3 (by shouldCallLifecycleInitHook() which set it to\n// initIndex + 1). When checkAndUpdateView() is called again D3, E2 and E6 will\n// not have their ngAfterViewInit() called but, starting with E7, the rest of\n// the view will begin getting ngAfterViewInit() called until a check and\n// pass is complete.\n//\n// This algorthim also handles recursion. Consider if E4's ngAfterViewInit()\n// indirectly calls E1's ChangeDetectorRef.detectChanges(). The expected\n// initIndex is set to 6, the recusive checkAndUpdateView() starts walk again.\n// D3, E2, E6, E7, E5 and E4 are skipped, ngAfterViewInit() is called on E1.\n// When the recursion returns the initIndex will be 7 so E1 is skipped as it\n// has already been called in the recursively called checkAnUpdateView().\nfunction callLifecycleHooksChildrenFirst(view, lifecycles) {\n    if (!(view.def.nodeFlags & lifecycles)) {\n        return;\n    }\n    var nodes = view.def.nodes;\n    var initIndex = 0;\n    for (var i = 0; i < nodes.length; i++) {\n        var nodeDef = nodes[i];\n        var parent_1 = nodeDef.parent;\n        if (!parent_1 && nodeDef.flags & lifecycles) {\n            // matching root node (e.g. a pipe)\n            callProviderLifecycles(view, i, nodeDef.flags & lifecycles, initIndex++);\n        }\n        if ((nodeDef.childFlags & lifecycles) === 0) {\n            // no child matches one of the lifecycles\n            i += nodeDef.childCount;\n        }\n        while (parent_1 && (parent_1.flags & 1 /* TypeElement */) &&\n            i === parent_1.nodeIndex + parent_1.childCount) {\n            // last child of an element\n            if (parent_1.directChildFlags & lifecycles) {\n                initIndex = callElementProvidersLifecycles(view, parent_1, lifecycles, initIndex);\n            }\n            parent_1 = parent_1.parent;\n        }\n    }\n}\nfunction callElementProvidersLifecycles(view, elDef, lifecycles, initIndex) {\n    for (var i = elDef.nodeIndex + 1; i <= elDef.nodeIndex + elDef.childCount; i++) {\n        var nodeDef = view.def.nodes[i];\n        if (nodeDef.flags & lifecycles) {\n            callProviderLifecycles(view, i, nodeDef.flags & lifecycles, initIndex++);\n        }\n        // only visit direct children\n        i += nodeDef.childCount;\n    }\n    return initIndex;\n}\nfunction callProviderLifecycles(view, index, lifecycles, initIndex) {\n    var providerData = asProviderData(view, index);\n    if (!providerData) {\n        return;\n    }\n    var provider = providerData.instance;\n    if (!provider) {\n        return;\n    }\n    Services.setCurrentNode(view, index);\n    if (lifecycles & 1048576 /* AfterContentInit */ &&\n        shouldCallLifecycleInitHook(view, 512 /* InitState_CallingAfterContentInit */, initIndex)) {\n        provider.ngAfterContentInit();\n    }\n    if (lifecycles & 2097152 /* AfterContentChecked */) {\n        provider.ngAfterContentChecked();\n    }\n    if (lifecycles & 4194304 /* AfterViewInit */ &&\n        shouldCallLifecycleInitHook(view, 768 /* InitState_CallingAfterViewInit */, initIndex)) {\n        provider.ngAfterViewInit();\n    }\n    if (lifecycles & 8388608 /* AfterViewChecked */) {\n        provider.ngAfterViewChecked();\n    }\n    if (lifecycles & 131072 /* OnDestroy */) {\n        provider.ngOnDestroy();\n    }\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nfunction createQuery() {\n    return new QueryList();\n}\nfunction dirtyParentQueries(view) {\n    var queryIds = view.def.nodeMatchedQueries;\n    while (view.parent && isEmbeddedView(view)) {\n        var tplDef = (view.parentNodeDef);\n        view = view.parent;\n        // content queries\n        var end = tplDef.nodeIndex + tplDef.childCount;\n        for (var i = 0; i <= end; i++) {\n            var nodeDef = view.def.nodes[i];\n            if ((nodeDef.flags & 67108864 /* TypeContentQuery */) &&\n                (nodeDef.flags & 536870912 /* DynamicQuery */) &&\n                (nodeDef.query.filterId & queryIds) === nodeDef.query.filterId) {\n                asQueryList(view, i).setDirty();\n            }\n            if ((nodeDef.flags & 1 /* TypeElement */ && i + nodeDef.childCount < tplDef.nodeIndex) ||\n                !(nodeDef.childFlags & 67108864 /* TypeContentQuery */) ||\n                !(nodeDef.childFlags & 536870912 /* DynamicQuery */)) {\n                // skip elements that don't contain the template element or no query.\n                i += nodeDef.childCount;\n            }\n        }\n    }\n    // view queries\n    if (view.def.nodeFlags & 134217728 /* TypeViewQuery */) {\n        for (var i = 0; i < view.def.nodes.length; i++) {\n            var nodeDef = view.def.nodes[i];\n            if ((nodeDef.flags & 134217728 /* TypeViewQuery */) && (nodeDef.flags & 536870912 /* DynamicQuery */)) {\n                asQueryList(view, i).setDirty();\n            }\n            // only visit the root nodes\n            i += nodeDef.childCount;\n        }\n    }\n}\nfunction checkAndUpdateQuery(view, nodeDef) {\n    var queryList = asQueryList(view, nodeDef.nodeIndex);\n    if (!queryList.dirty) {\n        return;\n    }\n    var directiveInstance;\n    var newValues = (undefined);\n    if (nodeDef.flags & 67108864 /* TypeContentQuery */) {\n        var elementDef = (nodeDef.parent.parent);\n        newValues = calcQueryValues(view, elementDef.nodeIndex, elementDef.nodeIndex + elementDef.childCount, (nodeDef.query), []);\n        directiveInstance = asProviderData(view, nodeDef.parent.nodeIndex).instance;\n    }\n    else if (nodeDef.flags & 134217728 /* TypeViewQuery */) {\n        newValues = calcQueryValues(view, 0, view.def.nodes.length - 1, (nodeDef.query), []);\n        directiveInstance = view.component;\n    }\n    queryList.reset(newValues);\n    var bindings = nodeDef.query.bindings;\n    var notify = false;\n    for (var i = 0; i < bindings.length; i++) {\n        var binding = bindings[i];\n        var boundValue = void 0;\n        switch (binding.bindingType) {\n            case 0 /* First */:\n                boundValue = queryList.first;\n                break;\n            case 1 /* All */:\n                boundValue = queryList;\n                notify = true;\n                break;\n        }\n        directiveInstance[binding.propName] = boundValue;\n    }\n    if (notify) {\n        queryList.notifyOnChanges();\n    }\n}\nfunction calcQueryValues(view, startIndex, endIndex, queryDef, values) {\n    for (var i = startIndex; i <= endIndex; i++) {\n        var nodeDef = view.def.nodes[i];\n        var valueType = nodeDef.matchedQueries[queryDef.id];\n        if (valueType != null) {\n            values.push(getQueryValue(view, nodeDef, valueType));\n        }\n        if (nodeDef.flags & 1 /* TypeElement */ && nodeDef.element.template &&\n            (nodeDef.element.template.nodeMatchedQueries & queryDef.filterId) ===\n                queryDef.filterId) {\n            var elementData = asElementData(view, i);\n            // check embedded views that were attached at the place of their template,\n            // but process child nodes first if some match the query (see issue #16568)\n            if ((nodeDef.childMatchedQueries & queryDef.filterId) === queryDef.filterId) {\n                calcQueryValues(view, i + 1, i + nodeDef.childCount, queryDef, values);\n                i += nodeDef.childCount;\n            }\n            if (nodeDef.flags & 16777216 /* EmbeddedViews */) {\n                var embeddedViews = elementData.viewContainer._embeddedViews;\n                for (var k = 0; k < embeddedViews.length; k++) {\n                    var embeddedView = embeddedViews[k];\n                    var dvc = declaredViewContainer(embeddedView);\n                    if (dvc && dvc === elementData) {\n                        calcQueryValues(embeddedView, 0, embeddedView.def.nodes.length - 1, queryDef, values);\n                    }\n                }\n            }\n            var projectedViews = elementData.template._projectedViews;\n            if (projectedViews) {\n                for (var k = 0; k < projectedViews.length; k++) {\n                    var projectedView = projectedViews[k];\n                    calcQueryValues(projectedView, 0, projectedView.def.nodes.length - 1, queryDef, values);\n                }\n            }\n        }\n        if ((nodeDef.childMatchedQueries & queryDef.filterId) !== queryDef.filterId) {\n            // if no child matches the query, skip the children.\n            i += nodeDef.childCount;\n        }\n    }\n    return values;\n}\nfunction getQueryValue(view, nodeDef, queryValueType) {\n    if (queryValueType != null) {\n        // a match\n        switch (queryValueType) {\n            case 1 /* RenderElement */:\n                return asElementData(view, nodeDef.nodeIndex).renderElement;\n            case 0 /* ElementRef */:\n                return new ElementRef(asElementData(view, nodeDef.nodeIndex).renderElement);\n            case 2 /* TemplateRef */:\n                return asElementData(view, nodeDef.nodeIndex).template;\n            case 3 /* ViewContainerRef */:\n                return asElementData(view, nodeDef.nodeIndex).viewContainer;\n            case 4 /* Provider */:\n                return asProviderData(view, nodeDef.nodeIndex).instance;\n        }\n    }\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nfunction appendNgContent(view, renderHost, def) {\n    var parentEl = getParentRenderElement(view, renderHost, def);\n    if (!parentEl) {\n        // Nothing to do if there is no parent element.\n        return;\n    }\n    var ngContentIndex = def.ngContent.index;\n    visitProjectedRenderNodes(view, ngContentIndex, 1 /* AppendChild */, parentEl, null, undefined);\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n\n\nfunction createPureExpression(view, def) {\n    return { value: undefined };\n}\nfunction checkAndUpdatePureExpressionInline(view, def, v0, v1, v2, v3, v4, v5, v6, v7, v8, v9) {\n    var bindings = def.bindings;\n    var changed = false;\n    var bindLen = bindings.length;\n    if (bindLen > 0 && checkAndUpdateBinding(view, def, 0, v0))\n        changed = true;\n    if (bindLen > 1 && checkAndUpdateBinding(view, def, 1, v1))\n        changed = true;\n    if (bindLen > 2 && checkAndUpdateBinding(view, def, 2, v2))\n        changed = true;\n    if (bindLen > 3 && checkAndUpdateBinding(view, def, 3, v3))\n        changed = true;\n    if (bindLen > 4 && checkAndUpdateBinding(view, def, 4, v4))\n        changed = true;\n    if (bindLen > 5 && checkAndUpdateBinding(view, def, 5, v5))\n        changed = true;\n    if (bindLen > 6 && checkAndUpdateBinding(view, def, 6, v6))\n        changed = true;\n    if (bindLen > 7 && checkAndUpdateBinding(view, def, 7, v7))\n        changed = true;\n    if (bindLen > 8 && checkAndUpdateBinding(view, def, 8, v8))\n        changed = true;\n    if (bindLen > 9 && checkAndUpdateBinding(view, def, 9, v9))\n        changed = true;\n    if (changed) {\n        var data = asPureExpressionData(view, def.nodeIndex);\n        var value = void 0;\n        switch (def.flags & 201347067 /* Types */) {\n            case 32 /* TypePureArray */:\n                value = new Array(bindings.length);\n                if (bindLen > 0)\n                    value[0] = v0;\n                if (bindLen > 1)\n                    value[1] = v1;\n                if (bindLen > 2)\n                    value[2] = v2;\n                if (bindLen > 3)\n                    value[3] = v3;\n                if (bindLen > 4)\n                    value[4] = v4;\n                if (bindLen > 5)\n                    value[5] = v5;\n                if (bindLen > 6)\n                    value[6] = v6;\n                if (bindLen > 7)\n                    value[7] = v7;\n                if (bindLen > 8)\n                    value[8] = v8;\n                if (bindLen > 9)\n                    value[9] = v9;\n                break;\n            case 64 /* TypePureObject */:\n                value = {};\n                if (bindLen > 0)\n                    value[bindings[0].name] = v0;\n                if (bindLen > 1)\n                    value[bindings[1].name] = v1;\n                if (bindLen > 2)\n                    value[bindings[2].name] = v2;\n                if (bindLen > 3)\n                    value[bindings[3].name] = v3;\n                if (bindLen > 4)\n                    value[bindings[4].name] = v4;\n                if (bindLen > 5)\n                    value[bindings[5].name] = v5;\n                if (bindLen > 6)\n                    value[bindings[6].name] = v6;\n                if (bindLen > 7)\n                    value[bindings[7].name] = v7;\n                if (bindLen > 8)\n                    value[bindings[8].name] = v8;\n                if (bindLen > 9)\n                    value[bindings[9].name] = v9;\n                break;\n            case 128 /* TypePurePipe */:\n                var pipe = v0;\n                switch (bindLen) {\n                    case 1:\n                        value = pipe.transform(v0);\n                        break;\n                    case 2:\n                        value = pipe.transform(v1);\n                        break;\n                    case 3:\n                        value = pipe.transform(v1, v2);\n                        break;\n                    case 4:\n                        value = pipe.transform(v1, v2, v3);\n                        break;\n                    case 5:\n                        value = pipe.transform(v1, v2, v3, v4);\n                        break;\n                    case 6:\n                        value = pipe.transform(v1, v2, v3, v4, v5);\n                        break;\n                    case 7:\n                        value = pipe.transform(v1, v2, v3, v4, v5, v6);\n                        break;\n                    case 8:\n                        value = pipe.transform(v1, v2, v3, v4, v5, v6, v7);\n                        break;\n                    case 9:\n                        value = pipe.transform(v1, v2, v3, v4, v5, v6, v7, v8);\n                        break;\n                    case 10:\n                        value = pipe.transform(v1, v2, v3, v4, v5, v6, v7, v8, v9);\n                        break;\n                }\n                break;\n        }\n        data.value = value;\n    }\n    return changed;\n}\nfunction checkAndUpdatePureExpressionDynamic(view, def, values) {\n    var bindings = def.bindings;\n    var changed = false;\n    for (var i = 0; i < values.length; i++) {\n        // Note: We need to loop over all values, so that\n        // the old values are updates as well!\n        if (checkAndUpdateBinding(view, def, i, values[i])) {\n            changed = true;\n        }\n    }\n    if (changed) {\n        var data = asPureExpressionData(view, def.nodeIndex);\n        var value = void 0;\n        switch (def.flags & 201347067 /* Types */) {\n            case 32 /* TypePureArray */:\n                value = values;\n                break;\n            case 64 /* TypePureObject */:\n                value = {};\n                for (var i = 0; i < values.length; i++) {\n                    value[bindings[i].name] = values[i];\n                }\n                break;\n            case 128 /* TypePurePipe */:\n                var pipe = values[0];\n                var params = values.slice(1);\n                value = pipe.transform.apply(pipe, __spread(params));\n                break;\n        }\n        data.value = value;\n    }\n    return changed;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nfunction createText(view, renderHost, def) {\n    var renderNode$$1;\n    var renderer = view.renderer;\n    renderNode$$1 = renderer.createText(def.text.prefix);\n    var parentEl = getParentRenderElement(view, renderHost, def);\n    if (parentEl) {\n        renderer.appendChild(parentEl, renderNode$$1);\n    }\n    return { renderText: renderNode$$1 };\n}\nfunction checkAndUpdateTextInline(view, def, v0, v1, v2, v3, v4, v5, v6, v7, v8, v9) {\n    var changed = false;\n    var bindings = def.bindings;\n    var bindLen = bindings.length;\n    if (bindLen > 0 && checkAndUpdateBinding(view, def, 0, v0))\n        changed = true;\n    if (bindLen > 1 && checkAndUpdateBinding(view, def, 1, v1))\n        changed = true;\n    if (bindLen > 2 && checkAndUpdateBinding(view, def, 2, v2))\n        changed = true;\n    if (bindLen > 3 && checkAndUpdateBinding(view, def, 3, v3))\n        changed = true;\n    if (bindLen > 4 && checkAndUpdateBinding(view, def, 4, v4))\n        changed = true;\n    if (bindLen > 5 && checkAndUpdateBinding(view, def, 5, v5))\n        changed = true;\n    if (bindLen > 6 && checkAndUpdateBinding(view, def, 6, v6))\n        changed = true;\n    if (bindLen > 7 && checkAndUpdateBinding(view, def, 7, v7))\n        changed = true;\n    if (bindLen > 8 && checkAndUpdateBinding(view, def, 8, v8))\n        changed = true;\n    if (bindLen > 9 && checkAndUpdateBinding(view, def, 9, v9))\n        changed = true;\n    if (changed) {\n        var value = def.text.prefix;\n        if (bindLen > 0)\n            value += _addInterpolationPart(v0, bindings[0]);\n        if (bindLen > 1)\n            value += _addInterpolationPart(v1, bindings[1]);\n        if (bindLen > 2)\n            value += _addInterpolationPart(v2, bindings[2]);\n        if (bindLen > 3)\n            value += _addInterpolationPart(v3, bindings[3]);\n        if (bindLen > 4)\n            value += _addInterpolationPart(v4, bindings[4]);\n        if (bindLen > 5)\n            value += _addInterpolationPart(v5, bindings[5]);\n        if (bindLen > 6)\n            value += _addInterpolationPart(v6, bindings[6]);\n        if (bindLen > 7)\n            value += _addInterpolationPart(v7, bindings[7]);\n        if (bindLen > 8)\n            value += _addInterpolationPart(v8, bindings[8]);\n        if (bindLen > 9)\n            value += _addInterpolationPart(v9, bindings[9]);\n        var renderNode$$1 = asTextData(view, def.nodeIndex).renderText;\n        view.renderer.setValue(renderNode$$1, value);\n    }\n    return changed;\n}\nfunction checkAndUpdateTextDynamic(view, def, values) {\n    var bindings = def.bindings;\n    var changed = false;\n    for (var i = 0; i < values.length; i++) {\n        // Note: We need to loop over all values, so that\n        // the old values are updates as well!\n        if (checkAndUpdateBinding(view, def, i, values[i])) {\n            changed = true;\n        }\n    }\n    if (changed) {\n        var value = '';\n        for (var i = 0; i < values.length; i++) {\n            value = value + _addInterpolationPart(values[i], bindings[i]);\n        }\n        value = def.text.prefix + value;\n        var renderNode$$1 = asTextData(view, def.nodeIndex).renderText;\n        view.renderer.setValue(renderNode$$1, value);\n    }\n    return changed;\n}\nfunction _addInterpolationPart(value, binding) {\n    var valueStr = value != null ? value.toString() : '';\n    return valueStr + binding.suffix;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nfunction createEmbeddedView(parent, anchorDef$$1, viewDef, context) {\n    // embedded views are seen as siblings to the anchor, so we need\n    // to get the parent of the anchor and use it as parentIndex.\n    var view = createView(parent.root, parent.renderer, parent, anchorDef$$1, viewDef);\n    initView(view, parent.component, context);\n    createViewNodes(view);\n    return view;\n}\nfunction createRootView(root, def, context) {\n    var view = createView(root, root.renderer, null, null, def);\n    initView(view, context, context);\n    createViewNodes(view);\n    return view;\n}\nfunction createComponentView(parentView, nodeDef, viewDef, hostElement) {\n    var rendererType = nodeDef.element.componentRendererType;\n    var compRenderer;\n    if (!rendererType) {\n        compRenderer = parentView.root.renderer;\n    }\n    else {\n        compRenderer = parentView.root.rendererFactory.createRenderer(hostElement, rendererType);\n    }\n    return createView(parentView.root, compRenderer, parentView, nodeDef.element.componentProvider, viewDef);\n}\nfunction createView(root, renderer, parent, parentNodeDef, def) {\n    var nodes = new Array(def.nodes.length);\n    var disposables = def.outputCount ? new Array(def.outputCount) : null;\n    var view = {\n        def: def,\n        parent: parent,\n        viewContainerParent: null, parentNodeDef: parentNodeDef,\n        context: null,\n        component: null, nodes: nodes,\n        state: 13 /* CatInit */, root: root, renderer: renderer,\n        oldValues: new Array(def.bindingCount), disposables: disposables,\n        initIndex: -1\n    };\n    return view;\n}\nfunction initView(view, component, context) {\n    view.component = component;\n    view.context = context;\n}\nfunction createViewNodes(view) {\n    var renderHost;\n    if (isComponentView(view)) {\n        var hostDef = view.parentNodeDef;\n        renderHost = asElementData((view.parent), hostDef.parent.nodeIndex).renderElement;\n    }\n    var def = view.def;\n    var nodes = view.nodes;\n    for (var i = 0; i < def.nodes.length; i++) {\n        var nodeDef = def.nodes[i];\n        Services.setCurrentNode(view, i);\n        var nodeData = void 0;\n        switch (nodeDef.flags & 201347067 /* Types */) {\n            case 1 /* TypeElement */:\n                var el = createElement(view, renderHost, nodeDef);\n                var componentView = (undefined);\n                if (nodeDef.flags & 33554432 /* ComponentView */) {\n                    var compViewDef = resolveDefinition((nodeDef.element.componentView));\n                    componentView = Services.createComponentView(view, nodeDef, compViewDef, el);\n                }\n                listenToElementOutputs(view, componentView, nodeDef, el);\n                nodeData = {\n                    renderElement: el,\n                    componentView: componentView,\n                    viewContainer: null,\n                    template: nodeDef.element.template ? createTemplateData(view, nodeDef) : undefined\n                };\n                if (nodeDef.flags & 16777216 /* EmbeddedViews */) {\n                    nodeData.viewContainer = createViewContainerData(view, nodeDef, nodeData);\n                }\n                break;\n            case 2 /* TypeText */:\n                nodeData = createText(view, renderHost, nodeDef);\n                break;\n            case 512 /* TypeClassProvider */:\n            case 1024 /* TypeFactoryProvider */:\n            case 2048 /* TypeUseExistingProvider */:\n            case 256 /* TypeValueProvider */: {\n                nodeData = nodes[i];\n                if (!nodeData && !(nodeDef.flags & 4096 /* LazyProvider */)) {\n                    var instance = createProviderInstance(view, nodeDef);\n                    nodeData = { instance: instance };\n                }\n                break;\n            }\n            case 16 /* TypePipe */: {\n                var instance = createPipeInstance(view, nodeDef);\n                nodeData = { instance: instance };\n                break;\n            }\n            case 16384 /* TypeDirective */: {\n                nodeData = nodes[i];\n                if (!nodeData) {\n                    var instance = createDirectiveInstance(view, nodeDef);\n                    nodeData = { instance: instance };\n                }\n                if (nodeDef.flags & 32768 /* Component */) {\n                    var compView = asElementData(view, nodeDef.parent.nodeIndex).componentView;\n                    initView(compView, nodeData.instance, nodeData.instance);\n                }\n                break;\n            }\n            case 32 /* TypePureArray */:\n            case 64 /* TypePureObject */:\n            case 128 /* TypePurePipe */:\n                nodeData = createPureExpression(view, nodeDef);\n                break;\n            case 67108864 /* TypeContentQuery */:\n            case 134217728 /* TypeViewQuery */:\n                nodeData = createQuery();\n                break;\n            case 8 /* TypeNgContent */:\n                appendNgContent(view, renderHost, nodeDef);\n                // no runtime data needed for NgContent...\n                nodeData = undefined;\n                break;\n        }\n        nodes[i] = nodeData;\n    }\n    // Create the ViewData.nodes of component views after we created everything else,\n    // so that e.g. ng-content works\n    execComponentViewsAction(view, ViewAction.CreateViewNodes);\n    // fill static content and view queries\n    execQueriesAction(view, 67108864 /* TypeContentQuery */ | 134217728 /* TypeViewQuery */, 268435456 /* StaticQuery */, 0 /* CheckAndUpdate */);\n}\nfunction checkNoChangesView(view) {\n    markProjectedViewsForCheck(view);\n    Services.updateDirectives(view, 1 /* CheckNoChanges */);\n    execEmbeddedViewsAction(view, ViewAction.CheckNoChanges);\n    Services.updateRenderer(view, 1 /* CheckNoChanges */);\n    execComponentViewsAction(view, ViewAction.CheckNoChanges);\n    // Note: We don't check queries for changes as we didn't do this in v2.x.\n    // TODO(tbosch): investigate if we can enable the check again in v5.x with a nicer error message.\n    view.state &= ~(64 /* CheckProjectedViews */ | 32 /* CheckProjectedView */);\n}\nfunction checkAndUpdateView(view) {\n    if (view.state & 1 /* BeforeFirstCheck */) {\n        view.state &= ~1 /* BeforeFirstCheck */;\n        view.state |= 2 /* FirstCheck */;\n    }\n    else {\n        view.state &= ~2 /* FirstCheck */;\n    }\n    shiftInitState(view, 0 /* InitState_BeforeInit */, 256 /* InitState_CallingOnInit */);\n    markProjectedViewsForCheck(view);\n    Services.updateDirectives(view, 0 /* CheckAndUpdate */);\n    execEmbeddedViewsAction(view, ViewAction.CheckAndUpdate);\n    execQueriesAction(view, 67108864 /* TypeContentQuery */, 536870912 /* DynamicQuery */, 0 /* CheckAndUpdate */);\n    var callInit = shiftInitState(view, 256 /* InitState_CallingOnInit */, 512 /* InitState_CallingAfterContentInit */);\n    callLifecycleHooksChildrenFirst(view, 2097152 /* AfterContentChecked */ | (callInit ? 1048576 /* AfterContentInit */ : 0));\n    Services.updateRenderer(view, 0 /* CheckAndUpdate */);\n    execComponentViewsAction(view, ViewAction.CheckAndUpdate);\n    execQueriesAction(view, 134217728 /* TypeViewQuery */, 536870912 /* DynamicQuery */, 0 /* CheckAndUpdate */);\n    callInit = shiftInitState(view, 512 /* InitState_CallingAfterContentInit */, 768 /* InitState_CallingAfterViewInit */);\n    callLifecycleHooksChildrenFirst(view, 8388608 /* AfterViewChecked */ | (callInit ? 4194304 /* AfterViewInit */ : 0));\n    if (view.def.flags & 2 /* OnPush */) {\n        view.state &= ~8 /* ChecksEnabled */;\n    }\n    view.state &= ~(64 /* CheckProjectedViews */ | 32 /* CheckProjectedView */);\n    shiftInitState(view, 768 /* InitState_CallingAfterViewInit */, 1024 /* InitState_AfterInit */);\n}\nfunction checkAndUpdateNode(view, nodeDef, argStyle, v0, v1, v2, v3, v4, v5, v6, v7, v8, v9) {\n    if (argStyle === 0 /* Inline */) {\n        return checkAndUpdateNodeInline(view, nodeDef, v0, v1, v2, v3, v4, v5, v6, v7, v8, v9);\n    }\n    else {\n        return checkAndUpdateNodeDynamic(view, nodeDef, v0);\n    }\n}\nfunction markProjectedViewsForCheck(view) {\n    var def = view.def;\n    if (!(def.nodeFlags & 4 /* ProjectedTemplate */)) {\n        return;\n    }\n    for (var i = 0; i < def.nodes.length; i++) {\n        var nodeDef = def.nodes[i];\n        if (nodeDef.flags & 4 /* ProjectedTemplate */) {\n            var projectedViews = asElementData(view, i).template._projectedViews;\n            if (projectedViews) {\n                for (var i_1 = 0; i_1 < projectedViews.length; i_1++) {\n                    var projectedView = projectedViews[i_1];\n                    projectedView.state |= 32 /* CheckProjectedView */;\n                    markParentViewsForCheckProjectedViews(projectedView, view);\n                }\n            }\n        }\n        else if ((nodeDef.childFlags & 4 /* ProjectedTemplate */) === 0) {\n            // a parent with leafs\n            // no child is a component,\n            // then skip the children\n            i += nodeDef.childCount;\n        }\n    }\n}\nfunction checkAndUpdateNodeInline(view, nodeDef, v0, v1, v2, v3, v4, v5, v6, v7, v8, v9) {\n    switch (nodeDef.flags & 201347067 /* Types */) {\n        case 1 /* TypeElement */:\n            return checkAndUpdateElementInline(view, nodeDef, v0, v1, v2, v3, v4, v5, v6, v7, v8, v9);\n        case 2 /* TypeText */:\n            return checkAndUpdateTextInline(view, nodeDef, v0, v1, v2, v3, v4, v5, v6, v7, v8, v9);\n        case 16384 /* TypeDirective */:\n            return checkAndUpdateDirectiveInline(view, nodeDef, v0, v1, v2, v3, v4, v5, v6, v7, v8, v9);\n        case 32 /* TypePureArray */:\n        case 64 /* TypePureObject */:\n        case 128 /* TypePurePipe */:\n            return checkAndUpdatePureExpressionInline(view, nodeDef, v0, v1, v2, v3, v4, v5, v6, v7, v8, v9);\n        default:\n            throw 'unreachable';\n    }\n}\nfunction checkAndUpdateNodeDynamic(view, nodeDef, values) {\n    switch (nodeDef.flags & 201347067 /* Types */) {\n        case 1 /* TypeElement */:\n            return checkAndUpdateElementDynamic(view, nodeDef, values);\n        case 2 /* TypeText */:\n            return checkAndUpdateTextDynamic(view, nodeDef, values);\n        case 16384 /* TypeDirective */:\n            return checkAndUpdateDirectiveDynamic(view, nodeDef, values);\n        case 32 /* TypePureArray */:\n        case 64 /* TypePureObject */:\n        case 128 /* TypePurePipe */:\n            return checkAndUpdatePureExpressionDynamic(view, nodeDef, values);\n        default:\n            throw 'unreachable';\n    }\n}\nfunction checkNoChangesNode(view, nodeDef, argStyle, v0, v1, v2, v3, v4, v5, v6, v7, v8, v9) {\n    if (argStyle === 0 /* Inline */) {\n        checkNoChangesNodeInline(view, nodeDef, v0, v1, v2, v3, v4, v5, v6, v7, v8, v9);\n    }\n    else {\n        checkNoChangesNodeDynamic(view, nodeDef, v0);\n    }\n    // Returning false is ok here as we would have thrown in case of a change.\n    return false;\n}\nfunction checkNoChangesNodeInline(view, nodeDef, v0, v1, v2, v3, v4, v5, v6, v7, v8, v9) {\n    var bindLen = nodeDef.bindings.length;\n    if (bindLen > 0)\n        checkBindingNoChanges(view, nodeDef, 0, v0);\n    if (bindLen > 1)\n        checkBindingNoChanges(view, nodeDef, 1, v1);\n    if (bindLen > 2)\n        checkBindingNoChanges(view, nodeDef, 2, v2);\n    if (bindLen > 3)\n        checkBindingNoChanges(view, nodeDef, 3, v3);\n    if (bindLen > 4)\n        checkBindingNoChanges(view, nodeDef, 4, v4);\n    if (bindLen > 5)\n        checkBindingNoChanges(view, nodeDef, 5, v5);\n    if (bindLen > 6)\n        checkBindingNoChanges(view, nodeDef, 6, v6);\n    if (bindLen > 7)\n        checkBindingNoChanges(view, nodeDef, 7, v7);\n    if (bindLen > 8)\n        checkBindingNoChanges(view, nodeDef, 8, v8);\n    if (bindLen > 9)\n        checkBindingNoChanges(view, nodeDef, 9, v9);\n}\nfunction checkNoChangesNodeDynamic(view, nodeDef, values) {\n    for (var i = 0; i < values.length; i++) {\n        checkBindingNoChanges(view, nodeDef, i, values[i]);\n    }\n}\n/**\n * Workaround https://github.com/angular/tsickle/issues/497\n * @suppress {misplacedTypeAnnotation}\n */\nfunction checkNoChangesQuery(view, nodeDef) {\n    var queryList = asQueryList(view, nodeDef.nodeIndex);\n    if (queryList.dirty) {\n        throw expressionChangedAfterItHasBeenCheckedError(Services.createDebugContext(view, nodeDef.nodeIndex), \"Query \" + nodeDef.query.id + \" not dirty\", \"Query \" + nodeDef.query.id + \" dirty\", (view.state & 1 /* BeforeFirstCheck */) !== 0);\n    }\n}\nfunction destroyView(view) {\n    if (view.state & 128 /* Destroyed */) {\n        return;\n    }\n    execEmbeddedViewsAction(view, ViewAction.Destroy);\n    execComponentViewsAction(view, ViewAction.Destroy);\n    callLifecycleHooksChildrenFirst(view, 131072 /* OnDestroy */);\n    if (view.disposables) {\n        for (var i = 0; i < view.disposables.length; i++) {\n            view.disposables[i]();\n        }\n    }\n    detachProjectedView(view);\n    if (view.renderer.destroyNode) {\n        destroyViewNodes(view);\n    }\n    if (isComponentView(view)) {\n        view.renderer.destroy();\n    }\n    view.state |= 128 /* Destroyed */;\n}\nfunction destroyViewNodes(view) {\n    var len = view.def.nodes.length;\n    for (var i = 0; i < len; i++) {\n        var def = view.def.nodes[i];\n        if (def.flags & 1 /* TypeElement */) {\n            view.renderer.destroyNode(asElementData(view, i).renderElement);\n        }\n        else if (def.flags & 2 /* TypeText */) {\n            view.renderer.destroyNode(asTextData(view, i).renderText);\n        }\n        else if (def.flags & 67108864 /* TypeContentQuery */ || def.flags & 134217728 /* TypeViewQuery */) {\n            asQueryList(view, i).destroy();\n        }\n    }\n}\nvar ViewAction;\n(function (ViewAction) {\n    ViewAction[ViewAction[\"CreateViewNodes\"] = 0] = \"CreateViewNodes\";\n    ViewAction[ViewAction[\"CheckNoChanges\"] = 1] = \"CheckNoChanges\";\n    ViewAction[ViewAction[\"CheckNoChangesProjectedViews\"] = 2] = \"CheckNoChangesProjectedViews\";\n    ViewAction[ViewAction[\"CheckAndUpdate\"] = 3] = \"CheckAndUpdate\";\n    ViewAction[ViewAction[\"CheckAndUpdateProjectedViews\"] = 4] = \"CheckAndUpdateProjectedViews\";\n    ViewAction[ViewAction[\"Destroy\"] = 5] = \"Destroy\";\n})(ViewAction || (ViewAction = {}));\nfunction execComponentViewsAction(view, action) {\n    var def = view.def;\n    if (!(def.nodeFlags & 33554432 /* ComponentView */)) {\n        return;\n    }\n    for (var i = 0; i < def.nodes.length; i++) {\n        var nodeDef = def.nodes[i];\n        if (nodeDef.flags & 33554432 /* ComponentView */) {\n            // a leaf\n            callViewAction(asElementData(view, i).componentView, action);\n        }\n        else if ((nodeDef.childFlags & 33554432 /* ComponentView */) === 0) {\n            // a parent with leafs\n            // no child is a component,\n            // then skip the children\n            i += nodeDef.childCount;\n        }\n    }\n}\nfunction execEmbeddedViewsAction(view, action) {\n    var def = view.def;\n    if (!(def.nodeFlags & 16777216 /* EmbeddedViews */)) {\n        return;\n    }\n    for (var i = 0; i < def.nodes.length; i++) {\n        var nodeDef = def.nodes[i];\n        if (nodeDef.flags & 16777216 /* EmbeddedViews */) {\n            // a leaf\n            var embeddedViews = asElementData(view, i).viewContainer._embeddedViews;\n            for (var k = 0; k < embeddedViews.length; k++) {\n                callViewAction(embeddedViews[k], action);\n            }\n        }\n        else if ((nodeDef.childFlags & 16777216 /* EmbeddedViews */) === 0) {\n            // a parent with leafs\n            // no child is a component,\n            // then skip the children\n            i += nodeDef.childCount;\n        }\n    }\n}\nfunction callViewAction(view, action) {\n    var viewState = view.state;\n    switch (action) {\n        case ViewAction.CheckNoChanges:\n            if ((viewState & 128 /* Destroyed */) === 0) {\n                if ((viewState & 12 /* CatDetectChanges */) === 12 /* CatDetectChanges */) {\n                    checkNoChangesView(view);\n                }\n                else if (viewState & 64 /* CheckProjectedViews */) {\n                    execProjectedViewsAction(view, ViewAction.CheckNoChangesProjectedViews);\n                }\n            }\n            break;\n        case ViewAction.CheckNoChangesProjectedViews:\n            if ((viewState & 128 /* Destroyed */) === 0) {\n                if (viewState & 32 /* CheckProjectedView */) {\n                    checkNoChangesView(view);\n                }\n                else if (viewState & 64 /* CheckProjectedViews */) {\n                    execProjectedViewsAction(view, action);\n                }\n            }\n            break;\n        case ViewAction.CheckAndUpdate:\n            if ((viewState & 128 /* Destroyed */) === 0) {\n                if ((viewState & 12 /* CatDetectChanges */) === 12 /* CatDetectChanges */) {\n                    checkAndUpdateView(view);\n                }\n                else if (viewState & 64 /* CheckProjectedViews */) {\n                    execProjectedViewsAction(view, ViewAction.CheckAndUpdateProjectedViews);\n                }\n            }\n            break;\n        case ViewAction.CheckAndUpdateProjectedViews:\n            if ((viewState & 128 /* Destroyed */) === 0) {\n                if (viewState & 32 /* CheckProjectedView */) {\n                    checkAndUpdateView(view);\n                }\n                else if (viewState & 64 /* CheckProjectedViews */) {\n                    execProjectedViewsAction(view, action);\n                }\n            }\n            break;\n        case ViewAction.Destroy:\n            // Note: destroyView recurses over all views,\n            // so we don't need to special case projected views here.\n            destroyView(view);\n            break;\n        case ViewAction.CreateViewNodes:\n            createViewNodes(view);\n            break;\n    }\n}\nfunction execProjectedViewsAction(view, action) {\n    execEmbeddedViewsAction(view, action);\n    execComponentViewsAction(view, action);\n}\nfunction execQueriesAction(view, queryFlags, staticDynamicQueryFlag, checkType) {\n    if (!(view.def.nodeFlags & queryFlags) || !(view.def.nodeFlags & staticDynamicQueryFlag)) {\n        return;\n    }\n    var nodeCount = view.def.nodes.length;\n    for (var i = 0; i < nodeCount; i++) {\n        var nodeDef = view.def.nodes[i];\n        if ((nodeDef.flags & queryFlags) && (nodeDef.flags & staticDynamicQueryFlag)) {\n            Services.setCurrentNode(view, nodeDef.nodeIndex);\n            switch (checkType) {\n                case 0 /* CheckAndUpdate */:\n                    checkAndUpdateQuery(view, nodeDef);\n                    break;\n                case 1 /* CheckNoChanges */:\n                    checkNoChangesQuery(view, nodeDef);\n                    break;\n            }\n        }\n        if (!(nodeDef.childFlags & queryFlags) || !(nodeDef.childFlags & staticDynamicQueryFlag)) {\n            // no child has a matching query\n            // then skip the children\n            i += nodeDef.childCount;\n        }\n    }\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar initialized = false;\nfunction initServicesIfNeeded() {\n    if (initialized) {\n        return;\n    }\n    initialized = true;\n    var services = isDevMode() ? createDebugServices() : createProdServices();\n    Services.setCurrentNode = services.setCurrentNode;\n    Services.createRootView = services.createRootView;\n    Services.createEmbeddedView = services.createEmbeddedView;\n    Services.createComponentView = services.createComponentView;\n    Services.createNgModuleRef = services.createNgModuleRef;\n    Services.overrideProvider = services.overrideProvider;\n    Services.overrideComponentView = services.overrideComponentView;\n    Services.clearOverrides = services.clearOverrides;\n    Services.checkAndUpdateView = services.checkAndUpdateView;\n    Services.checkNoChangesView = services.checkNoChangesView;\n    Services.destroyView = services.destroyView;\n    Services.resolveDep = resolveDep;\n    Services.createDebugContext = services.createDebugContext;\n    Services.handleEvent = services.handleEvent;\n    Services.updateDirectives = services.updateDirectives;\n    Services.updateRenderer = services.updateRenderer;\n    Services.dirtyParentQueries = dirtyParentQueries;\n}\nfunction createProdServices() {\n    return {\n        setCurrentNode: function () { },\n        createRootView: createProdRootView,\n        createEmbeddedView: createEmbeddedView,\n        createComponentView: createComponentView,\n        createNgModuleRef: createNgModuleRef,\n        overrideProvider: NOOP,\n        overrideComponentView: NOOP,\n        clearOverrides: NOOP,\n        checkAndUpdateView: checkAndUpdateView,\n        checkNoChangesView: checkNoChangesView,\n        destroyView: destroyView,\n        createDebugContext: function (view, nodeIndex) { return new DebugContext_(view, nodeIndex); },\n        handleEvent: function (view, nodeIndex, eventName, event) {\n            return view.def.handleEvent(view, nodeIndex, eventName, event);\n        },\n        updateDirectives: function (view, checkType) {\n            return view.def.updateDirectives(checkType === 0 /* CheckAndUpdate */ ? prodCheckAndUpdateNode :\n                prodCheckNoChangesNode, view);\n        },\n        updateRenderer: function (view, checkType) {\n            return view.def.updateRenderer(checkType === 0 /* CheckAndUpdate */ ? prodCheckAndUpdateNode :\n                prodCheckNoChangesNode, view);\n        },\n    };\n}\nfunction createDebugServices() {\n    return {\n        setCurrentNode: debugSetCurrentNode,\n        createRootView: debugCreateRootView,\n        createEmbeddedView: debugCreateEmbeddedView,\n        createComponentView: debugCreateComponentView,\n        createNgModuleRef: debugCreateNgModuleRef,\n        overrideProvider: debugOverrideProvider,\n        overrideComponentView: debugOverrideComponentView,\n        clearOverrides: debugClearOverrides,\n        checkAndUpdateView: debugCheckAndUpdateView,\n        checkNoChangesView: debugCheckNoChangesView,\n        destroyView: debugDestroyView,\n        createDebugContext: function (view, nodeIndex) { return new DebugContext_(view, nodeIndex); },\n        handleEvent: debugHandleEvent,\n        updateDirectives: debugUpdateDirectives,\n        updateRenderer: debugUpdateRenderer,\n    };\n}\nfunction createProdRootView(elInjector, projectableNodes, rootSelectorOrNode, def, ngModule, context) {\n    var rendererFactory = ngModule.injector.get(RendererFactory2);\n    return createRootView(createRootData(elInjector, ngModule, rendererFactory, projectableNodes, rootSelectorOrNode), def, context);\n}\nfunction debugCreateRootView(elInjector, projectableNodes, rootSelectorOrNode, def, ngModule, context) {\n    var rendererFactory = ngModule.injector.get(RendererFactory2);\n    var root = createRootData(elInjector, ngModule, new DebugRendererFactory2(rendererFactory), projectableNodes, rootSelectorOrNode);\n    var defWithOverride = applyProviderOverridesToView(def);\n    return callWithDebugContext(DebugAction.create, createRootView, null, [root, defWithOverride, context]);\n}\nfunction createRootData(elInjector, ngModule, rendererFactory, projectableNodes, rootSelectorOrNode) {\n    var sanitizer = ngModule.injector.get(Sanitizer);\n    var errorHandler = ngModule.injector.get(ErrorHandler);\n    var renderer = rendererFactory.createRenderer(null, null);\n    return {\n        ngModule: ngModule,\n        injector: elInjector, projectableNodes: projectableNodes,\n        selectorOrNode: rootSelectorOrNode, sanitizer: sanitizer, rendererFactory: rendererFactory, renderer: renderer, errorHandler: errorHandler\n    };\n}\nfunction debugCreateEmbeddedView(parentView, anchorDef, viewDef$$1, context) {\n    var defWithOverride = applyProviderOverridesToView(viewDef$$1);\n    return callWithDebugContext(DebugAction.create, createEmbeddedView, null, [parentView, anchorDef, defWithOverride, context]);\n}\nfunction debugCreateComponentView(parentView, nodeDef, viewDef$$1, hostElement) {\n    var overrideComponentView = viewDefOverrides.get(nodeDef.element.componentProvider.provider.token);\n    if (overrideComponentView) {\n        viewDef$$1 = overrideComponentView;\n    }\n    else {\n        viewDef$$1 = applyProviderOverridesToView(viewDef$$1);\n    }\n    return callWithDebugContext(DebugAction.create, createComponentView, null, [parentView, nodeDef, viewDef$$1, hostElement]);\n}\nfunction debugCreateNgModuleRef(moduleType, parentInjector, bootstrapComponents, def) {\n    var defWithOverride = applyProviderOverridesToNgModule(def);\n    return createNgModuleRef(moduleType, parentInjector, bootstrapComponents, defWithOverride);\n}\nvar providerOverrides = new Map();\nvar providerOverridesWithScope = new Map();\nvar viewDefOverrides = new Map();\nfunction debugOverrideProvider(override) {\n    providerOverrides.set(override.token, override);\n    if (typeof override.token === 'function' && override.token.ngInjectableDef &&\n        typeof override.token.ngInjectableDef.providedIn === 'function') {\n        providerOverridesWithScope.set(override.token, override);\n    }\n}\nfunction debugOverrideComponentView(comp, compFactory) {\n    var hostViewDef = resolveDefinition(getComponentViewDefinitionFactory(compFactory));\n    var compViewDef = resolveDefinition((hostViewDef.nodes[0].element.componentView));\n    viewDefOverrides.set(comp, compViewDef);\n}\nfunction debugClearOverrides() {\n    providerOverrides.clear();\n    providerOverridesWithScope.clear();\n    viewDefOverrides.clear();\n}\n// Notes about the algorithm:\n// 1) Locate the providers of an element and check if one of them was overwritten\n// 2) Change the providers of that element\n//\n// We only create new datastructures if we need to, to keep perf impact\n// reasonable.\nfunction applyProviderOverridesToView(def) {\n    if (providerOverrides.size === 0) {\n        return def;\n    }\n    var elementIndicesWithOverwrittenProviders = findElementIndicesWithOverwrittenProviders(def);\n    if (elementIndicesWithOverwrittenProviders.length === 0) {\n        return def;\n    }\n    // clone the whole view definition,\n    // as it maintains references between the nodes that are hard to update.\n    def = def.factory(function () { return NOOP; });\n    for (var i = 0; i < elementIndicesWithOverwrittenProviders.length; i++) {\n        applyProviderOverridesToElement(def, elementIndicesWithOverwrittenProviders[i]);\n    }\n    return def;\n    function findElementIndicesWithOverwrittenProviders(def) {\n        var elIndicesWithOverwrittenProviders = [];\n        var lastElementDef = null;\n        for (var i = 0; i < def.nodes.length; i++) {\n            var nodeDef = def.nodes[i];\n            if (nodeDef.flags & 1 /* TypeElement */) {\n                lastElementDef = nodeDef;\n            }\n            if (lastElementDef && nodeDef.flags & 3840 /* CatProviderNoDirective */ &&\n                providerOverrides.has(nodeDef.provider.token)) {\n                elIndicesWithOverwrittenProviders.push(lastElementDef.nodeIndex);\n                lastElementDef = null;\n            }\n        }\n        return elIndicesWithOverwrittenProviders;\n    }\n    function applyProviderOverridesToElement(viewDef$$1, elIndex) {\n        for (var i = elIndex + 1; i < viewDef$$1.nodes.length; i++) {\n            var nodeDef = viewDef$$1.nodes[i];\n            if (nodeDef.flags & 1 /* TypeElement */) {\n                // stop at the next element\n                return;\n            }\n            if (nodeDef.flags & 3840 /* CatProviderNoDirective */) {\n                var provider = (nodeDef.provider);\n                var override = providerOverrides.get(provider.token);\n                if (override) {\n                    nodeDef.flags = (nodeDef.flags & ~3840 /* CatProviderNoDirective */) | override.flags;\n                    provider.deps = splitDepsDsl(override.deps);\n                    provider.value = override.value;\n                }\n            }\n        }\n    }\n}\n// Notes about the algorithm:\n// We only create new datastructures if we need to, to keep perf impact\n// reasonable.\nfunction applyProviderOverridesToNgModule(def) {\n    var _a = calcHasOverrides(def), hasOverrides = _a.hasOverrides, hasDeprecatedOverrides = _a.hasDeprecatedOverrides;\n    if (!hasOverrides) {\n        return def;\n    }\n    // clone the whole view definition,\n    // as it maintains references between the nodes that are hard to update.\n    def = def.factory(function () { return NOOP; });\n    applyProviderOverrides(def);\n    return def;\n    function calcHasOverrides(def) {\n        var hasOverrides = false;\n        var hasDeprecatedOverrides = false;\n        if (providerOverrides.size === 0) {\n            return { hasOverrides: hasOverrides, hasDeprecatedOverrides: hasDeprecatedOverrides };\n        }\n        def.providers.forEach(function (node) {\n            var override = providerOverrides.get(node.token);\n            if ((node.flags & 3840 /* CatProviderNoDirective */) && override) {\n                hasOverrides = true;\n                hasDeprecatedOverrides = hasDeprecatedOverrides || override.deprecatedBehavior;\n            }\n        });\n        def.modules.forEach(function (module) {\n            providerOverridesWithScope.forEach(function (override, token) {\n                if (token.ngInjectableDef.providedIn === module) {\n                    hasOverrides = true;\n                    hasDeprecatedOverrides = hasDeprecatedOverrides || override.deprecatedBehavior;\n                }\n            });\n        });\n        return { hasOverrides: hasOverrides, hasDeprecatedOverrides: hasDeprecatedOverrides };\n    }\n    function applyProviderOverrides(def) {\n        for (var i = 0; i < def.providers.length; i++) {\n            var provider = def.providers[i];\n            if (hasDeprecatedOverrides) {\n                // We had a bug where me made\n                // all providers lazy. Keep this logic behind a flag\n                // for migrating existing users.\n                provider.flags |= 4096 /* LazyProvider */;\n            }\n            var override = providerOverrides.get(provider.token);\n            if (override) {\n                provider.flags = (provider.flags & ~3840 /* CatProviderNoDirective */) | override.flags;\n                provider.deps = splitDepsDsl(override.deps);\n                provider.value = override.value;\n            }\n        }\n        if (providerOverridesWithScope.size > 0) {\n            var moduleSet_1 = new Set(def.modules);\n            providerOverridesWithScope.forEach(function (override, token) {\n                if (moduleSet_1.has(token.ngInjectableDef.providedIn)) {\n                    var provider = {\n                        token: token,\n                        flags: override.flags | (hasDeprecatedOverrides ? 4096 /* LazyProvider */ : 0 /* None */),\n                        deps: splitDepsDsl(override.deps),\n                        value: override.value,\n                        index: def.providers.length,\n                    };\n                    def.providers.push(provider);\n                    def.providersByKey[tokenKey(token)] = provider;\n                }\n            });\n        }\n    }\n}\nfunction prodCheckAndUpdateNode(view, checkIndex, argStyle, v0, v1, v2, v3, v4, v5, v6, v7, v8, v9) {\n    var nodeDef = view.def.nodes[checkIndex];\n    checkAndUpdateNode(view, nodeDef, argStyle, v0, v1, v2, v3, v4, v5, v6, v7, v8, v9);\n    return (nodeDef.flags & 224 /* CatPureExpression */) ?\n        asPureExpressionData(view, checkIndex).value :\n        undefined;\n}\nfunction prodCheckNoChangesNode(view, checkIndex, argStyle, v0, v1, v2, v3, v4, v5, v6, v7, v8, v9) {\n    var nodeDef = view.def.nodes[checkIndex];\n    checkNoChangesNode(view, nodeDef, argStyle, v0, v1, v2, v3, v4, v5, v6, v7, v8, v9);\n    return (nodeDef.flags & 224 /* CatPureExpression */) ?\n        asPureExpressionData(view, checkIndex).value :\n        undefined;\n}\nfunction debugCheckAndUpdateView(view) {\n    return callWithDebugContext(DebugAction.detectChanges, checkAndUpdateView, null, [view]);\n}\nfunction debugCheckNoChangesView(view) {\n    return callWithDebugContext(DebugAction.checkNoChanges, checkNoChangesView, null, [view]);\n}\nfunction debugDestroyView(view) {\n    return callWithDebugContext(DebugAction.destroy, destroyView, null, [view]);\n}\nvar DebugAction;\n(function (DebugAction) {\n    DebugAction[DebugAction[\"create\"] = 0] = \"create\";\n    DebugAction[DebugAction[\"detectChanges\"] = 1] = \"detectChanges\";\n    DebugAction[DebugAction[\"checkNoChanges\"] = 2] = \"checkNoChanges\";\n    DebugAction[DebugAction[\"destroy\"] = 3] = \"destroy\";\n    DebugAction[DebugAction[\"handleEvent\"] = 4] = \"handleEvent\";\n})(DebugAction || (DebugAction = {}));\nvar _currentAction;\nvar _currentView;\nvar _currentNodeIndex;\nfunction debugSetCurrentNode(view, nodeIndex) {\n    _currentView = view;\n    _currentNodeIndex = nodeIndex;\n}\nfunction debugHandleEvent(view, nodeIndex, eventName, event) {\n    debugSetCurrentNode(view, nodeIndex);\n    return callWithDebugContext(DebugAction.handleEvent, view.def.handleEvent, null, [view, nodeIndex, eventName, event]);\n}\nfunction debugUpdateDirectives(view, checkType) {\n    if (view.state & 128 /* Destroyed */) {\n        throw viewDestroyedError(DebugAction[_currentAction]);\n    }\n    debugSetCurrentNode(view, nextDirectiveWithBinding(view, 0));\n    return view.def.updateDirectives(debugCheckDirectivesFn, view);\n    function debugCheckDirectivesFn(view, nodeIndex, argStyle) {\n        var values = [];\n        for (var _i = 3; _i < arguments.length; _i++) {\n            values[_i - 3] = arguments[_i];\n        }\n        var nodeDef = view.def.nodes[nodeIndex];\n        if (checkType === 0 /* CheckAndUpdate */) {\n            debugCheckAndUpdateNode(view, nodeDef, argStyle, values);\n        }\n        else {\n            debugCheckNoChangesNode(view, nodeDef, argStyle, values);\n        }\n        if (nodeDef.flags & 16384 /* TypeDirective */) {\n            debugSetCurrentNode(view, nextDirectiveWithBinding(view, nodeIndex));\n        }\n        return (nodeDef.flags & 224 /* CatPureExpression */) ?\n            asPureExpressionData(view, nodeDef.nodeIndex).value :\n            undefined;\n    }\n}\nfunction debugUpdateRenderer(view, checkType) {\n    if (view.state & 128 /* Destroyed */) {\n        throw viewDestroyedError(DebugAction[_currentAction]);\n    }\n    debugSetCurrentNode(view, nextRenderNodeWithBinding(view, 0));\n    return view.def.updateRenderer(debugCheckRenderNodeFn, view);\n    function debugCheckRenderNodeFn(view, nodeIndex, argStyle) {\n        var values = [];\n        for (var _i = 3; _i < arguments.length; _i++) {\n            values[_i - 3] = arguments[_i];\n        }\n        var nodeDef = view.def.nodes[nodeIndex];\n        if (checkType === 0 /* CheckAndUpdate */) {\n            debugCheckAndUpdateNode(view, nodeDef, argStyle, values);\n        }\n        else {\n            debugCheckNoChangesNode(view, nodeDef, argStyle, values);\n        }\n        if (nodeDef.flags & 3 /* CatRenderNode */) {\n            debugSetCurrentNode(view, nextRenderNodeWithBinding(view, nodeIndex));\n        }\n        return (nodeDef.flags & 224 /* CatPureExpression */) ?\n            asPureExpressionData(view, nodeDef.nodeIndex).value :\n            undefined;\n    }\n}\nfunction debugCheckAndUpdateNode(view, nodeDef, argStyle, givenValues) {\n    var changed = checkAndUpdateNode.apply(void 0, __spread([view, nodeDef, argStyle], givenValues));\n    if (changed) {\n        var values = argStyle === 1 /* Dynamic */ ? givenValues[0] : givenValues;\n        if (nodeDef.flags & 16384 /* TypeDirective */) {\n            var bindingValues = {};\n            for (var i = 0; i < nodeDef.bindings.length; i++) {\n                var binding = nodeDef.bindings[i];\n                var value = values[i];\n                if (binding.flags & 8 /* TypeProperty */) {\n                    bindingValues[normalizeDebugBindingName((binding.nonMinifiedName))] =\n                        normalizeDebugBindingValue(value);\n                }\n            }\n            var elDef = (nodeDef.parent);\n            var el = asElementData(view, elDef.nodeIndex).renderElement;\n            if (!elDef.element.name) {\n                // a comment.\n                view.renderer.setValue(el, \"bindings=\" + JSON.stringify(bindingValues, null, 2));\n            }\n            else {\n                // a regular element.\n                for (var attr in bindingValues) {\n                    var value = bindingValues[attr];\n                    if (value != null) {\n                        view.renderer.setAttribute(el, attr, value);\n                    }\n                    else {\n                        view.renderer.removeAttribute(el, attr);\n                    }\n                }\n            }\n        }\n    }\n}\nfunction debugCheckNoChangesNode(view, nodeDef, argStyle, values) {\n    checkNoChangesNode.apply(void 0, __spread([view, nodeDef, argStyle], values));\n}\nfunction normalizeDebugBindingName(name) {\n    // Attribute names with `$` (eg `x-y$`) are valid per spec, but unsupported by some browsers\n    name = camelCaseToDashCase(name.replace(/[$@]/g, '_'));\n    return \"ng-reflect-\" + name;\n}\nvar CAMEL_CASE_REGEXP = /([A-Z])/g;\nfunction camelCaseToDashCase(input) {\n    return input.replace(CAMEL_CASE_REGEXP, function () {\n        var m = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            m[_i] = arguments[_i];\n        }\n        return '-' + m[1].toLowerCase();\n    });\n}\nfunction normalizeDebugBindingValue(value) {\n    try {\n        // Limit the size of the value as otherwise the DOM just gets polluted.\n        return value != null ? value.toString().slice(0, 30) : value;\n    }\n    catch (e) {\n        return '[ERROR] Exception while trying to serialize the value';\n    }\n}\nfunction nextDirectiveWithBinding(view, nodeIndex) {\n    for (var i = nodeIndex; i < view.def.nodes.length; i++) {\n        var nodeDef = view.def.nodes[i];\n        if (nodeDef.flags & 16384 /* TypeDirective */ && nodeDef.bindings && nodeDef.bindings.length) {\n            return i;\n        }\n    }\n    return null;\n}\nfunction nextRenderNodeWithBinding(view, nodeIndex) {\n    for (var i = nodeIndex; i < view.def.nodes.length; i++) {\n        var nodeDef = view.def.nodes[i];\n        if ((nodeDef.flags & 3 /* CatRenderNode */) && nodeDef.bindings && nodeDef.bindings.length) {\n            return i;\n        }\n    }\n    return null;\n}\nvar DebugContext_ = /** @class */ (function () {\n    function DebugContext_(view, nodeIndex) {\n        this.view = view;\n        this.nodeIndex = nodeIndex;\n        if (nodeIndex == null) {\n            this.nodeIndex = nodeIndex = 0;\n        }\n        this.nodeDef = view.def.nodes[nodeIndex];\n        var elDef = this.nodeDef;\n        var elView = view;\n        while (elDef && (elDef.flags & 1 /* TypeElement */) === 0) {\n            elDef = (elDef.parent);\n        }\n        if (!elDef) {\n            while (!elDef && elView) {\n                elDef = (viewParentEl(elView));\n                elView = (elView.parent);\n            }\n        }\n        this.elDef = elDef;\n        this.elView = elView;\n    }\n    Object.defineProperty(DebugContext_.prototype, \"elOrCompView\", {\n        get: function () {\n            // Has to be done lazily as we use the DebugContext also during creation of elements...\n            return asElementData(this.elView, this.elDef.nodeIndex).componentView || this.view;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(DebugContext_.prototype, \"injector\", {\n        get: function () { return createInjector$1(this.elView, this.elDef); },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(DebugContext_.prototype, \"component\", {\n        get: function () { return this.elOrCompView.component; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(DebugContext_.prototype, \"context\", {\n        get: function () { return this.elOrCompView.context; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(DebugContext_.prototype, \"providerTokens\", {\n        get: function () {\n            var tokens = [];\n            if (this.elDef) {\n                for (var i = this.elDef.nodeIndex + 1; i <= this.elDef.nodeIndex + this.elDef.childCount; i++) {\n                    var childDef = this.elView.def.nodes[i];\n                    if (childDef.flags & 20224 /* CatProvider */) {\n                        tokens.push(childDef.provider.token);\n                    }\n                    i += childDef.childCount;\n                }\n            }\n            return tokens;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(DebugContext_.prototype, \"references\", {\n        get: function () {\n            var references = {};\n            if (this.elDef) {\n                collectReferences(this.elView, this.elDef, references);\n                for (var i = this.elDef.nodeIndex + 1; i <= this.elDef.nodeIndex + this.elDef.childCount; i++) {\n                    var childDef = this.elView.def.nodes[i];\n                    if (childDef.flags & 20224 /* CatProvider */) {\n                        collectReferences(this.elView, childDef, references);\n                    }\n                    i += childDef.childCount;\n                }\n            }\n            return references;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(DebugContext_.prototype, \"componentRenderElement\", {\n        get: function () {\n            var elData = findHostElement(this.elOrCompView);\n            return elData ? elData.renderElement : undefined;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(DebugContext_.prototype, \"renderNode\", {\n        get: function () {\n            return this.nodeDef.flags & 2 /* TypeText */ ? renderNode(this.view, this.nodeDef) :\n                renderNode(this.elView, this.elDef);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    DebugContext_.prototype.logError = function (console) {\n        var values = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            values[_i - 1] = arguments[_i];\n        }\n        var logViewDef;\n        var logNodeIndex;\n        if (this.nodeDef.flags & 2 /* TypeText */) {\n            logViewDef = this.view.def;\n            logNodeIndex = this.nodeDef.nodeIndex;\n        }\n        else {\n            logViewDef = this.elView.def;\n            logNodeIndex = this.elDef.nodeIndex;\n        }\n        // Note: we only generate a log function for text and element nodes\n        // to make the generated code as small as possible.\n        var renderNodeIndex = getRenderNodeIndex(logViewDef, logNodeIndex);\n        var currRenderNodeIndex = -1;\n        var nodeLogger = function () {\n            currRenderNodeIndex++;\n            if (currRenderNodeIndex === renderNodeIndex) {\n                return (_a = console.error).bind.apply(_a, __spread([console], values));\n            }\n            else {\n                return NOOP;\n            }\n            var _a;\n        };\n        logViewDef.factory(nodeLogger);\n        if (currRenderNodeIndex < renderNodeIndex) {\n            console.error('Illegal state: the ViewDefinitionFactory did not call the logger!');\n            console.error.apply(console, __spread(values));\n        }\n    };\n    return DebugContext_;\n}());\nfunction getRenderNodeIndex(viewDef$$1, nodeIndex) {\n    var renderNodeIndex = -1;\n    for (var i = 0; i <= nodeIndex; i++) {\n        var nodeDef = viewDef$$1.nodes[i];\n        if (nodeDef.flags & 3 /* CatRenderNode */) {\n            renderNodeIndex++;\n        }\n    }\n    return renderNodeIndex;\n}\nfunction findHostElement(view) {\n    while (view && !isComponentView(view)) {\n        view = (view.parent);\n    }\n    if (view.parent) {\n        return asElementData(view.parent, viewParentEl(view).nodeIndex);\n    }\n    return null;\n}\nfunction collectReferences(view, nodeDef, references) {\n    for (var refName in nodeDef.references) {\n        references[refName] = getQueryValue(view, nodeDef, nodeDef.references[refName]);\n    }\n}\nfunction callWithDebugContext(action, fn, self, args) {\n    var oldAction = _currentAction;\n    var oldView = _currentView;\n    var oldNodeIndex = _currentNodeIndex;\n    try {\n        _currentAction = action;\n        var result = fn.apply(self, args);\n        _currentView = oldView;\n        _currentNodeIndex = oldNodeIndex;\n        _currentAction = oldAction;\n        return result;\n    }\n    catch (e) {\n        if (isViewDebugError(e) || !_currentView) {\n            throw e;\n        }\n        throw viewWrappedDebugError(e, (getCurrentDebugContext()));\n    }\n}\nfunction getCurrentDebugContext() {\n    return _currentView ? new DebugContext_(_currentView, _currentNodeIndex) : null;\n}\nvar DebugRendererFactory2 = /** @class */ (function () {\n    function DebugRendererFactory2(delegate) {\n        this.delegate = delegate;\n    }\n    DebugRendererFactory2.prototype.createRenderer = function (element, renderData) {\n        return new DebugRenderer2(this.delegate.createRenderer(element, renderData));\n    };\n    DebugRendererFactory2.prototype.begin = function () {\n        if (this.delegate.begin) {\n            this.delegate.begin();\n        }\n    };\n    DebugRendererFactory2.prototype.end = function () {\n        if (this.delegate.end) {\n            this.delegate.end();\n        }\n    };\n    DebugRendererFactory2.prototype.whenRenderingDone = function () {\n        if (this.delegate.whenRenderingDone) {\n            return this.delegate.whenRenderingDone();\n        }\n        return Promise.resolve(null);\n    };\n    return DebugRendererFactory2;\n}());\nvar DebugRenderer2 = /** @class */ (function () {\n    function DebugRenderer2(delegate) {\n        this.delegate = delegate;\n        this.data = this.delegate.data;\n    }\n    DebugRenderer2.prototype.destroyNode = function (node) {\n        removeDebugNodeFromIndex((getDebugNode(node)));\n        if (this.delegate.destroyNode) {\n            this.delegate.destroyNode(node);\n        }\n    };\n    DebugRenderer2.prototype.destroy = function () { this.delegate.destroy(); };\n    DebugRenderer2.prototype.createElement = function (name, namespace) {\n        var el = this.delegate.createElement(name, namespace);\n        var debugCtx = getCurrentDebugContext();\n        if (debugCtx) {\n            var debugEl = new DebugElement(el, null, debugCtx);\n            debugEl.name = name;\n            indexDebugNode(debugEl);\n        }\n        return el;\n    };\n    DebugRenderer2.prototype.createComment = function (value) {\n        var comment = this.delegate.createComment(value);\n        var debugCtx = getCurrentDebugContext();\n        if (debugCtx) {\n            indexDebugNode(new DebugNode(comment, null, debugCtx));\n        }\n        return comment;\n    };\n    DebugRenderer2.prototype.createText = function (value) {\n        var text = this.delegate.createText(value);\n        var debugCtx = getCurrentDebugContext();\n        if (debugCtx) {\n            indexDebugNode(new DebugNode(text, null, debugCtx));\n        }\n        return text;\n    };\n    DebugRenderer2.prototype.appendChild = function (parent, newChild) {\n        var debugEl = getDebugNode(parent);\n        var debugChildEl = getDebugNode(newChild);\n        if (debugEl && debugChildEl && debugEl instanceof DebugElement) {\n            debugEl.addChild(debugChildEl);\n        }\n        this.delegate.appendChild(parent, newChild);\n    };\n    DebugRenderer2.prototype.insertBefore = function (parent, newChild, refChild) {\n        var debugEl = getDebugNode(parent);\n        var debugChildEl = getDebugNode(newChild);\n        var debugRefEl = (getDebugNode(refChild));\n        if (debugEl && debugChildEl && debugEl instanceof DebugElement) {\n            debugEl.insertBefore(debugRefEl, debugChildEl);\n        }\n        this.delegate.insertBefore(parent, newChild, refChild);\n    };\n    DebugRenderer2.prototype.removeChild = function (parent, oldChild) {\n        var debugEl = getDebugNode(parent);\n        var debugChildEl = getDebugNode(oldChild);\n        if (debugEl && debugChildEl && debugEl instanceof DebugElement) {\n            debugEl.removeChild(debugChildEl);\n        }\n        this.delegate.removeChild(parent, oldChild);\n    };\n    DebugRenderer2.prototype.selectRootElement = function (selectorOrNode) {\n        var el = this.delegate.selectRootElement(selectorOrNode);\n        var debugCtx = getCurrentDebugContext();\n        if (debugCtx) {\n            indexDebugNode(new DebugElement(el, null, debugCtx));\n        }\n        return el;\n    };\n    DebugRenderer2.prototype.setAttribute = function (el, name, value, namespace) {\n        var debugEl = getDebugNode(el);\n        if (debugEl && debugEl instanceof DebugElement) {\n            var fullName = namespace ? namespace + ':' + name : name;\n            debugEl.attributes[fullName] = value;\n        }\n        this.delegate.setAttribute(el, name, value, namespace);\n    };\n    DebugRenderer2.prototype.removeAttribute = function (el, name, namespace) {\n        var debugEl = getDebugNode(el);\n        if (debugEl && debugEl instanceof DebugElement) {\n            var fullName = namespace ? namespace + ':' + name : name;\n            debugEl.attributes[fullName] = null;\n        }\n        this.delegate.removeAttribute(el, name, namespace);\n    };\n    DebugRenderer2.prototype.addClass = function (el, name) {\n        var debugEl = getDebugNode(el);\n        if (debugEl && debugEl instanceof DebugElement) {\n            debugEl.classes[name] = true;\n        }\n        this.delegate.addClass(el, name);\n    };\n    DebugRenderer2.prototype.removeClass = function (el, name) {\n        var debugEl = getDebugNode(el);\n        if (debugEl && debugEl instanceof DebugElement) {\n            debugEl.classes[name] = false;\n        }\n        this.delegate.removeClass(el, name);\n    };\n    DebugRenderer2.prototype.setStyle = function (el, style, value, flags) {\n        var debugEl = getDebugNode(el);\n        if (debugEl && debugEl instanceof DebugElement) {\n            debugEl.styles[style] = value;\n        }\n        this.delegate.setStyle(el, style, value, flags);\n    };\n    DebugRenderer2.prototype.removeStyle = function (el, style, flags) {\n        var debugEl = getDebugNode(el);\n        if (debugEl && debugEl instanceof DebugElement) {\n            debugEl.styles[style] = null;\n        }\n        this.delegate.removeStyle(el, style, flags);\n    };\n    DebugRenderer2.prototype.setProperty = function (el, name, value) {\n        var debugEl = getDebugNode(el);\n        if (debugEl && debugEl instanceof DebugElement) {\n            debugEl.properties[name] = value;\n        }\n        this.delegate.setProperty(el, name, value);\n    };\n    DebugRenderer2.prototype.listen = function (target, eventName, callback) {\n        if (typeof target !== 'string') {\n            var debugEl = getDebugNode(target);\n            if (debugEl) {\n                debugEl.listeners.push(new EventListener(eventName, callback));\n            }\n        }\n        return this.delegate.listen(target, eventName, callback);\n    };\n    DebugRenderer2.prototype.parentNode = function (node) { return this.delegate.parentNode(node); };\n    DebugRenderer2.prototype.nextSibling = function (node) { return this.delegate.nextSibling(node); };\n    DebugRenderer2.prototype.setValue = function (node, value) { return this.delegate.setValue(node, value); };\n    return DebugRenderer2;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n\n\n// Attention: this function is called as top level function.\n// Putting any logic in here will destroy closure tree shaking!\n\nvar NgModuleFactory_ = /** @class */ (function (_super) {\n    __extends(NgModuleFactory_, _super);\n    function NgModuleFactory_(moduleType, _bootstrapComponents, _ngModuleDefFactory) {\n        var _this = \n        // Attention: this ctor is called as top level function.\n        // Putting any logic in here will destroy closure tree shaking!\n        _super.call(this) || this;\n        _this.moduleType = moduleType;\n        _this._bootstrapComponents = _bootstrapComponents;\n        _this._ngModuleDefFactory = _ngModuleDefFactory;\n        return _this;\n    }\n    NgModuleFactory_.prototype.create = function (parentInjector) {\n        initServicesIfNeeded();\n        var def = resolveDefinition(this._ngModuleDefFactory);\n        return Services.createNgModuleRef(this.moduleType, parentInjector || Injector.NULL, this._bootstrapComponents, def);\n    };\n    return NgModuleFactory_;\n}(NgModuleFactory));\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n// The functions in this file verify that the assumptions we are making\n// about state in an instruction are correct before implementing any logic.\n// They are meant only to be called in dev mode as sanity checks.\n\nfunction assertEqual(actual, expected, msg) {\n    if (actual != expected) {\n        throwError$1(msg);\n    }\n}\n\n\nfunction assertLessThan(actual, expected, msg) {\n    if (actual >= expected) {\n        throwError$1(msg);\n    }\n}\nfunction assertGreaterThan(actual, expected, msg) {\n    if (actual <= expected) {\n        throwError$1(msg);\n    }\n}\nfunction assertNull(actual, msg) {\n    if (actual != null) {\n        throwError$1(msg);\n    }\n}\nfunction assertNotNull$1(actual, msg) {\n    if (actual == null) {\n        throwError$1(msg);\n    }\n}\n\nfunction throwError$1(msg) {\n    debugger; // Left intentionally for better debugger experience.\n    throw new Error(\"ASSERTION ERROR: \" + msg);\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * If this is the first template pass, any ngOnInit or ngDoCheck hooks will be queued into\n * TView.initHooks during directiveCreate.\n *\n * The directive index and hook type are encoded into one number (1st bit: type, remaining bits:\n * directive index), then saved in the even indices of the initHooks array. The odd indices\n * hold the hook functions themselves.\n *\n * @param index The index of the directive in LView.data\n * @param hooks The static hooks map on the directive def\n * @param tView The current TView\n */\n\n/**\n * Loops through the directives on a node and queues all their hooks except ngOnInit\n * and ngDoCheck, which are queued separately in directiveCreate.\n */\n\n/**\n * Calls onInit and doCheck calls if they haven't already been called.\n *\n * @param currentView The current view\n */\nfunction executeInitHooks(currentView, tView, creationMode) {\n    if (currentView.lifecycleStage === 1 /* INIT */) {\n        executeHooks((currentView.directives), tView.initHooks, tView.checkHooks, creationMode);\n        currentView.lifecycleStage = 2 /* AFTER_INIT */;\n    }\n}\n/**\n * Iterates over afterViewInit and afterViewChecked functions and calls them.\n *\n * @param currentView The current view\n */\nfunction executeHooks(data, allHooks, checkHooks, creationMode) {\n    var hooksToCall = creationMode ? allHooks : checkHooks;\n    if (hooksToCall) {\n        callHooks(data, hooksToCall);\n    }\n}\n/**\n * Calls lifecycle hooks with their contexts, skipping init hooks if it's not\n * creation mode.\n *\n * @param currentView The current view\n * @param arr The array in which the hooks are found\n */\nfunction callHooks(data, arr) {\n    for (var i = 0; i < arr.length; i += 2) {\n        arr[i + 1].call(data[arr[i]]);\n    }\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nif (typeof ngDevMode == 'undefined') {\n    if (typeof window != 'undefined')\n        window.ngDevMode = true;\n    if (typeof self != 'undefined')\n        self.ngDevMode = true;\n    if (typeof global != 'undefined')\n        global.ngDevMode = true;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n// Note: This hack is necessary so we don't erroneously get a circular dependency\n// failure based on types.\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nfunction assertNodeType(node, type) {\n    assertNotNull$1(node, 'should be called with a node');\n    assertEqual(node.type, type, \"should be a \" + typeName(type));\n}\nfunction assertNodeOfPossibleTypes(node) {\n    var types = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        types[_i - 1] = arguments[_i];\n    }\n    assertNotNull$1(node, 'should be called with a node');\n    var found = types.some(function (type) { return node.type === type; });\n    assertEqual(found, true, \"Should be one of \" + types.map(typeName).join(', '));\n}\nfunction typeName(type) {\n    if (type == 1 /* Projection */)\n        return 'Projection';\n    if (type == 0 /* Container */)\n        return 'Container';\n    if (type == 2 /* View */)\n        return 'View';\n    if (type == 3 /* Element */)\n        return 'Element';\n    return '<unknown>';\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n// Note: This hack is necessary so we don't erroneously get a circular dependency\n// failure based on types.\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n// Note: This hack is necessary so we don't erroneously get a circular dependency\n// failure based on types.\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n// TODO: cleanup once the code is merged in angular/angular\n// TODO: cleanup once the code is merged in angular/angular\nvar RendererStyleFlags3;\n// TODO: cleanup once the code is merged in angular/angular\n(function (RendererStyleFlags3) {\n    RendererStyleFlags3[RendererStyleFlags3[\"Important\"] = 1] = \"Important\";\n    RendererStyleFlags3[RendererStyleFlags3[\"DashCase\"] = 2] = \"DashCase\";\n})(RendererStyleFlags3 || (RendererStyleFlags3 = {}));\n/** Returns whether the `renderer` is a `ProceduralRenderer3` */\nfunction isProceduralRenderer(renderer) {\n    return !!(renderer.listen);\n}\n\n// Note: This hack is necessary so we don't erroneously get a circular dependency\n// failure based on types.\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n// Note: This hack is necessary so we don't erroneously get a circular dependency\n// failure based on types.\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n* Must use this method for CD (instead of === ) since NaN !== NaN\n*/\n\nfunction stringify$2(value) {\n    if (typeof value == 'function')\n        return value.name || value;\n    if (typeof value == 'string')\n        return value;\n    if (value == null)\n        return '';\n    return '' + value;\n}\n/**\n *  Function that throws a \"not implemented\" error so it's clear certain\n *  behaviors/methods aren't yet ready.\n *\n * @returns Not implemented error\n */\nfunction notImplemented() {\n    return new Error('NotImplemented');\n}\n/**\n * Flattens an array in non-recursive way. Input arrays are not modified.\n */\nfunction flatten$3(list) {\n    var result = [];\n    var i = 0;\n    while (i < list.length) {\n        var item = list[i];\n        if (Array.isArray(item)) {\n            if (item.length > 0) {\n                list = item.concat(list.slice(i + 1));\n                i = 0;\n            }\n            else {\n                i++;\n            }\n        }\n        else {\n            result.push(item);\n            i++;\n        }\n    }\n    return result;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Returns the first RNode following the given LNode in the same parent DOM element.\n *\n * This is needed in order to insert the given node with insertBefore.\n *\n * @param node The node whose following DOM node must be found.\n * @param stopNode A parent node at which the lookup in the tree should be stopped, or null if the\n * lookup should not be stopped until the result is found.\n * @returns RNode before which the provided node should be inserted or null if the lookup was\n * stopped\n * or if there is no native node after the given logical node in the same native parent.\n */\nfunction findNextRNodeSibling(node, stopNode) {\n    var currentNode = node;\n    while (currentNode && currentNode !== stopNode) {\n        var pNextOrParent = currentNode.pNextOrParent;\n        if (pNextOrParent) {\n            while (pNextOrParent.type !== 1 /* Projection */) {\n                var nativeNode = findFirstRNode(pNextOrParent);\n                if (nativeNode) {\n                    return nativeNode;\n                }\n                pNextOrParent = (pNextOrParent.pNextOrParent);\n            }\n            currentNode = pNextOrParent;\n        }\n        else {\n            var currentSibling = currentNode.next;\n            while (currentSibling) {\n                var nativeNode = findFirstRNode(currentSibling);\n                if (nativeNode) {\n                    return nativeNode;\n                }\n                currentSibling = currentSibling.next;\n            }\n            var parentNode = currentNode.parent;\n            currentNode = null;\n            if (parentNode) {\n                var parentType = parentNode.type;\n                if (parentType === 0 /* Container */ || parentType === 2 /* View */) {\n                    currentNode = parentNode;\n                }\n            }\n        }\n    }\n    return null;\n}\n/**\n * Get the next node in the LNode tree, taking into account the place where a node is\n * projected (in the shadow DOM) rather than where it comes from (in the light DOM).\n *\n * @param node The node whose next node in the LNode tree must be found.\n * @return LNode|null The next sibling in the LNode tree.\n */\nfunction getNextLNodeWithProjection(node) {\n    var pNextOrParent = node.pNextOrParent;\n    if (pNextOrParent) {\n        // The node is projected\n        var isLastProjectedNode = pNextOrParent.type === 1;\n        // returns pNextOrParent if we are not at the end of the list, null otherwise\n        return isLastProjectedNode ? null : pNextOrParent;\n    }\n    // returns node.next because the the node is not projected\n    return node.next;\n}\n/**\n * Find the next node in the LNode tree, taking into account the place where a node is\n * projected (in the shadow DOM) rather than where it comes from (in the light DOM).\n *\n * If there is no sibling node, this function goes to the next sibling of the parent node...\n * until it reaches rootNode (at which point null is returned).\n *\n * @param initialNode The node whose following node in the LNode tree must be found.\n * @param rootNode The root node at which the lookup should stop.\n * @return LNode|null The following node in the LNode tree.\n */\nfunction getNextOrParentSiblingNode(initialNode, rootNode) {\n    var node = initialNode;\n    var nextNode = getNextLNodeWithProjection(node);\n    while (node && !nextNode) {\n        // if node.pNextOrParent is not null here, it is not the next node\n        // (because, at this point, nextNode is null, so it is the parent)\n        node = node.pNextOrParent || node.parent;\n        if (node === rootNode) {\n            return null;\n        }\n        nextNode = node && getNextLNodeWithProjection(node);\n    }\n    return nextNode;\n}\n/**\n * Returns the first RNode inside the given LNode.\n *\n * @param node The node whose first DOM node must be found\n * @returns RNode The first RNode of the given LNode or null if there is none.\n */\nfunction findFirstRNode(rootNode) {\n    var node = rootNode;\n    while (node) {\n        var nextNode = null;\n        if (node.type === 3 /* Element */) {\n            // A LElementNode has a matching RNode in LElementNode.native\n            return node.native;\n        }\n        else if (node.type === 0 /* Container */) {\n            var lContainerNode = node;\n            var childContainerData = lContainerNode.dynamicLContainerNode ?\n                lContainerNode.dynamicLContainerNode.data :\n                lContainerNode.data;\n            nextNode = childContainerData.views.length ? childContainerData.views[0].child : null;\n        }\n        else if (node.type === 1 /* Projection */) {\n            // For Projection look at the first projected node\n            nextNode = node.data.head;\n        }\n        else {\n            // Otherwise look at the first child\n            nextNode = node.child;\n        }\n        node = nextNode === null ? getNextOrParentSiblingNode(node, rootNode) : nextNode;\n    }\n    return null;\n}\nfunction createTextNode(value, renderer) {\n    return isProceduralRenderer(renderer) ? renderer.createText(stringify$2(value)) :\n        renderer.createTextNode(stringify$2(value));\n}\nfunction addRemoveViewFromContainer(container, rootNode, insertMode, beforeNode) {\n    ngDevMode && assertNodeType(container, 0 /* Container */);\n    ngDevMode && assertNodeType(rootNode, 2 /* View */);\n    var parentNode = container.data.renderParent;\n    var parent = parentNode ? parentNode.native : null;\n    var node = rootNode.child;\n    if (parent) {\n        while (node) {\n            var nextNode = null;\n            var renderer = container.view.renderer;\n            if (node.type === 3 /* Element */) {\n                if (insertMode) {\n                    if (!node.native) {\n                        // If the native element doesn't exist, this is a bound text node that hasn't yet been\n                        // created because update mode has not run (occurs when a bound text node is a root\n                        // node of a dynamically created view). See textBinding() in instructions for ctx.\n                        // If the native element doesn't exist, this is a bound text node that hasn't yet been\n                        // created because update mode has not run (occurs when a bound text node is a root\n                        // node of a dynamically created view). See textBinding() in instructions for ctx.\n                        node.native = createTextNode('', renderer);\n                    }\n                    isProceduralRenderer(renderer) ?\n                        renderer.insertBefore(parent, (node.native), beforeNode) :\n                        parent.insertBefore((node.native), beforeNode, true);\n                }\n                else {\n                    isProceduralRenderer(renderer) ? renderer.removeChild(parent, (node.native)) :\n                        parent.removeChild((node.native));\n                }\n                nextNode = node.next;\n            }\n            else if (node.type === 0 /* Container */) {\n                // if we get to a container, it must be a root node of a view because we are only\n                // propagating down into child views / containers and not child elements\n                var childContainerData = node.data;\n                childContainerData.renderParent = parentNode;\n                nextNode = childContainerData.views.length ? childContainerData.views[0].child : null;\n            }\n            else if (node.type === 1 /* Projection */) {\n                nextNode = node.data.head;\n            }\n            else {\n                nextNode = node.child;\n            }\n            if (nextNode === null) {\n                node = getNextOrParentSiblingNode(node, rootNode);\n            }\n            else {\n                node = nextNode;\n            }\n        }\n    }\n}\n/**\n * Traverses the tree of component views and containers to remove listeners and\n * call onDestroy callbacks.\n *\n * Notes:\n *  - Because it's used for onDestroy calls, it needs to be bottom-up.\n *  - Must process containers instead of their views to avoid splicing\n *  when views are destroyed and re-added.\n *  - Using a while loop because it's faster than recursion\n *  - Destroy only called on movement to sibling or movement to parent (laterally or up)\n *\n *  @param rootView The view to destroy\n */\nfunction destroyViewTree(rootView) {\n    var viewOrContainer = rootView;\n    while (viewOrContainer) {\n        var next = null;\n        if (viewOrContainer.views && viewOrContainer.views.length) {\n            next = viewOrContainer.views[0].data;\n        }\n        else if (viewOrContainer.child) {\n            next = viewOrContainer.child;\n        }\n        else if (viewOrContainer.next) {\n            cleanUpView(viewOrContainer);\n            next = viewOrContainer.next;\n        }\n        if (next == null) {\n            // If the viewOrContainer is the rootView, then the cleanup is done twice.\n            // Without this check, ngOnDestroy would be called twice for a directive on an element.\n            while (viewOrContainer && !viewOrContainer.next && viewOrContainer !== rootView) {\n                cleanUpView(viewOrContainer);\n                viewOrContainer = getParentState(viewOrContainer, rootView);\n            }\n            cleanUpView(viewOrContainer || rootView);\n            next = viewOrContainer && viewOrContainer.next;\n        }\n        viewOrContainer = next;\n    }\n}\n/**\n * Inserts a view into a container.\n *\n * This adds the view to the container's array of active views in the correct\n * position. It also adds the view's elements to the DOM if the container isn't a\n * root node of another view (in that case, the view's elements will be added when\n * the container's parent view is added later).\n *\n * @param container The container into which the view should be inserted\n * @param newView The view to insert\n * @param index The index at which to insert the view\n * @returns The inserted view\n */\nfunction insertView(container, newView, index) {\n    var state = container.data;\n    var views = state.views;\n    if (index > 0) {\n        // This is a new view, we need to add it to the children.\n        setViewNext(views[index - 1], newView);\n    }\n    if (index < views.length) {\n        setViewNext(newView, views[index]);\n        views.splice(index, 0, newView);\n    }\n    else {\n        views.push(newView);\n    }\n    // If the container's renderParent is null, we know that it is a root node of its own parent view\n    // and we should wait until that parent processes its nodes (otherwise, we will insert this view's\n    // nodes twice - once now and once when its parent inserts its views).\n    if (container.data.renderParent !== null) {\n        var beforeNode = findNextRNodeSibling(newView, container);\n        if (!beforeNode) {\n            var containerNextNativeNode = container.native;\n            if (containerNextNativeNode === undefined) {\n                containerNextNativeNode = container.native = findNextRNodeSibling(container, null);\n            }\n            beforeNode = containerNextNativeNode;\n        }\n        addRemoveViewFromContainer(container, newView, true, beforeNode);\n    }\n    return newView;\n}\n/**\n * Removes a view from a container.\n *\n * This method splices the view from the container's array of active views. It also\n * removes the view's elements from the DOM and conducts cleanup (e.g. removing\n * listeners, calling onDestroys).\n *\n * @param container The container from which to remove a view\n * @param removeIndex The index of the view to remove\n * @returns The removed view\n */\nfunction removeView(container, removeIndex) {\n    var views = container.data.views;\n    var viewNode = views[removeIndex];\n    if (removeIndex > 0) {\n        setViewNext(views[removeIndex - 1], viewNode.next);\n    }\n    views.splice(removeIndex, 1);\n    viewNode.next = null;\n    destroyViewTree(viewNode.data);\n    addRemoveViewFromContainer(container, viewNode, false);\n    // Notify query that view has been removed\n    container.data.queries && container.data.queries.removeView(removeIndex);\n    return viewNode;\n}\n/**\n * Sets a next on the view node, so views in for loops can easily jump from\n * one view to the next to add/remove elements. Also adds the LView (view.data)\n * to the view tree for easy traversal when cleaning up the view.\n *\n * @param view The view to set up\n * @param next The view's new next\n */\nfunction setViewNext(view, next) {\n    view.next = next;\n    view.data.next = next ? next.data : null;\n}\n/**\n * Determines which LViewOrLContainer to jump to when traversing back up the\n * tree in destroyViewTree.\n *\n * Normally, the view's parent LView should be checked, but in the case of\n * embedded views, the container (which is the view node's parent, but not the\n * LView's parent) needs to be checked for a possible next property.\n *\n * @param state The LViewOrLContainer for which we need a parent state\n * @param rootView The rootView, so we don't propagate too far up the view tree\n * @returns The correct parent LViewOrLContainer\n */\nfunction getParentState(state, rootView) {\n    var node;\n    if ((node = state.node) && node.type === 2 /* View */) {\n        // if it's an embedded view, the state needs to go up to the container, in case the\n        // container has a next\n        return node.parent.data;\n    }\n    else {\n        // otherwise, use parent view for containers or component views\n        return state.parent === rootView ? null : state.parent;\n    }\n}\n/**\n * Removes all listeners and call all onDestroys in a given view.\n *\n * @param view The LView to clean up\n */\nfunction cleanUpView(view) {\n    removeListeners(view);\n    executeOnDestroys(view);\n    executePipeOnDestroys(view);\n}\n/** Removes listeners and unsubscribes from output subscriptions */\nfunction removeListeners(view) {\n    var cleanup = (view.cleanup);\n    if (cleanup != null) {\n        for (var i = 0; i < cleanup.length - 1; i += 2) {\n            if (typeof cleanup[i] === 'string') {\n                cleanup[i + 1].removeEventListener(cleanup[i], cleanup[i + 2], cleanup[i + 3]);\n                i += 2;\n            }\n            else {\n                cleanup[i].call(cleanup[i + 1]);\n            }\n        }\n        view.cleanup = null;\n    }\n}\n/** Calls onDestroy hooks for this view */\nfunction executeOnDestroys(view) {\n    var tView = view.tView;\n    var destroyHooks;\n    if (tView != null && (destroyHooks = tView.destroyHooks) != null) {\n        callHooks((view.directives), destroyHooks);\n    }\n}\n/** Calls pipe destroy hooks for this view */\nfunction executePipeOnDestroys(view) {\n    var pipeDestroyHooks = view.tView && view.tView.pipeDestroyHooks;\n    if (pipeDestroyHooks) {\n        callHooks((view.data), pipeDestroyHooks);\n    }\n}\n/**\n * Returns whether a native element should be inserted in the given parent.\n *\n * The native node can be inserted when its parent is:\n * - A regular element => Yes\n * - A component host element =>\n *    - if the `currentView` === the parent `view`: The element is in the content (vs the\n *      template)\n *      => don't add as the parent component will project if needed.\n *    - `currentView` !== the parent `view` => The element is in the template (vs the content),\n *      add it\n * - View element => delay insertion, will be done on `viewEnd()`\n *\n * @param parent The parent in which to insert the child\n * @param currentView The LView being processed\n * @return boolean Whether the child element should be inserted.\n */\n\n/**\n * Appends the `child` element to the `parent`.\n *\n * The element insertion might be delayed {@link canInsertNativeNode}\n *\n * @param parent The parent to which to append the child\n * @param child The child that should be appended\n * @param currentView The current LView\n * @returns Whether or not the child was appended\n */\n\n/**\n * Inserts the provided node before the correct element in the DOM.\n *\n * The element insertion might be delayed {@link canInsertNativeNode}\n *\n * @param node Node to insert\n * @param currentView Current LView\n */\n\n/**\n * Appends a projected node to the DOM, or in the case of a projected container,\n * appends the nodes from all of the container's active views to the DOM.\n *\n * @param node The node to process\n * @param currentParent The last parent element to be processed\n * @param currentView Current LView\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * A utility function to match an Ivy node static data against a simple CSS selector\n *\n * @param node static data to match\n * @param selector\n * @returns true if node matches the selector.\n */\n\n\n\n/**\n * Checks a given node against matching selectors and returns\n * selector index (or 0 if none matched).\n *\n * This function takes into account the ngProjectAs attribute: if present its value will be compared\n * to the raw (un-parsed) CSS selector instead of using standard selector matching logic.\n */\n\n/** Called when directives inject each other (creating a circular dependency) */\n\n/** Called when there are multiple component selectors that match a given node */\n\n/** Throws an ExpressionChangedAfterChecked error if checkNoChanges mode is on. */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Directive (D) sets a property on all component instances using this constant as a key and the\n * component's host node (LElement) as the value. This is used in methods like detectChanges to\n * facilitate jumping from an instance to the host node.\n */\nvar NG_HOST_SYMBOL = '__ngHostLNode__';\n/**\n * A permanent marker promise which signifies that the current CD tree is\n * clean.\n */\nvar _CLEAN_PROMISE = Promise.resolve(null);\n/**\n * Directive and element indices for top-level directive.\n *\n * Saved here to avoid re-instantiating an array on every change detection run.\n */\nvar _ROOT_DIRECTIVE_INDICES = [0, 0];\n/**\n * Token set in currentMatches while dependencies are being resolved.\n *\n * If we visit a directive that has a value set to CIRCULAR, we know we've\n * already seen it, and thus have a circular dependency.\n */\n\n/**\n * This property gets set before entering a template.\n *\n * This renderer can be one of two varieties of Renderer3:\n *\n * - ObjectedOrientedRenderer3\n *\n * This is the native browser API style, e.g. operations are methods on individual objects\n * like HTMLElement. With this style, no additional code is needed as a facade (reducing payload\n * size).\n *\n * - ProceduralRenderer3\n *\n * In non-native browser environments (e.g. platforms such as web-workers), this is the facade\n * that enables element manipulation. This also facilitates backwards compatibility with\n * Renderer2.\n */\nvar renderer;\nvar rendererFactory;\n\n/** Used to set the parent property when nodes are created. */\nvar previousOrParentNode;\n\n/**\n * If `isParent` is:\n *  - `true`: then `previousOrParentNode` points to a parent node.\n *  - `false`: then `previousOrParentNode` points to previous node (sibling).\n */\nvar isParent;\n/**\n * Static data that corresponds to the instance-specific data array on an LView.\n *\n * Each node's static data is stored in tData at the same index that it's stored\n * in the data array. Any nodes that do not have static data store a null value in\n * tData to avoid a sparse array.\n */\nvar tData;\n/**\n * State of the current view being processed.\n *\n * NOTE: we cheat here and initialize it to `null` even thought the type does not\n * contain `null`. This is because we expect this value to be not `null` as soon\n * as we enter the view. Declaring the type as `null` would require us to place `!`\n * in most instructions since they all assume that `currentView` is defined.\n */\nvar currentView = (null);\nvar currentQueries;\n\n/**\n * This property gets set before entering a template.\n */\nvar creationMode;\n\n/**\n * An array of nodes (text, element, container, etc), pipes, their bindings, and\n * any local variables that need to be stored between invocations.\n */\nvar data;\n/**\n * An array of directive instances in the current view.\n *\n * These must be stored separately from LNodes because their presence is\n * unknown at compile-time and thus space cannot be reserved in data[].\n */\nvar directives;\n/**\n * When a view is destroyed, listeners need to be released and outputs need to be\n * unsubscribed. This cleanup array stores both listener data (in chunks of 4)\n * and output data (in chunks of 2) for a particular view. Combining the arrays\n * saves on memory (70 bytes per array) and on a few bytes of code size (for two\n * separate for loops).\n *\n * If it's a listener being stored:\n * 1st index is: event name to remove\n * 2nd index is: native element\n * 3rd index is: listener function\n * 4th index is: useCapture boolean\n *\n * If it's an output subscription:\n * 1st index is: unsubscribe function\n * 2nd index is: context for function\n */\nvar cleanup;\n/**\n * In this mode, any changes in bindings will throw an ExpressionChangedAfterChecked error.\n *\n * Necessary to support ChangeDetectorRef.checkNoChanges().\n */\nvar checkNoChangesMode = false;\n/** Whether or not this is the first time the current view has been processed. */\nvar firstTemplatePass = true;\n/**\n * Swap the current state with a new state.\n *\n * For performance reasons we store the state in the top level of the module.\n * This way we minimize the number of properties to read. Whenever a new view\n * is entered we have to store the state for later, and when the view is\n * exited the state has to be restored\n *\n * @param newView New state to become active\n * @param host Element to which the View is a child of\n * @returns the previous state;\n */\nfunction enterView(newView, host) {\n    var oldView = currentView;\n    data = newView && newView.data;\n    directives = newView && newView.directives;\n    tData = newView && newView.tView.data;\n    creationMode = newView && (newView.flags & 1 /* CreationMode */) === 1 /* CreationMode */;\n    firstTemplatePass = newView && newView.tView.firstTemplatePass;\n    cleanup = newView && newView.cleanup;\n    renderer = newView && newView.renderer;\n    if (newView && newView.bindingIndex < 0) {\n        newView.bindingIndex = newView.bindingStartIndex;\n    }\n    if (host != null) {\n        previousOrParentNode = host;\n        isParent = true;\n    }\n    currentView = newView;\n    currentQueries = newView && newView.queries;\n    return oldView;\n}\n/**\n * Used in lieu of enterView to make it clear when we are exiting a child view. This makes\n * the direction of traversal (up or down the view tree) a bit clearer.\n */\nfunction leaveView(newView) {\n    if (!checkNoChangesMode) {\n        executeHooks((directives), currentView.tView.viewHooks, currentView.tView.viewCheckHooks, creationMode);\n    }\n    // Views should be clean and in update mode after being checked, so these bits are cleared\n    currentView.flags &= ~(1 /* CreationMode */ | 4 /* Dirty */);\n    currentView.lifecycleStage = 1 /* INIT */;\n    currentView.bindingIndex = -1;\n    enterView(newView, null);\n}\n/**  Refreshes directives in this view and triggers any init/content hooks.  */\nfunction refreshDirectives() {\n    executeInitAndContentHooks();\n    var tView = currentView.tView;\n    // This needs to be set before children are processed to support recursive components\n    tView.firstTemplatePass = firstTemplatePass = false;\n    setHostBindings(tView.hostBindings);\n    refreshChildComponents(tView.components);\n}\n/** Sets the host bindings for the current view. */\nfunction setHostBindings(bindings) {\n    if (bindings != null) {\n        var defs = (currentView.tView.directives);\n        for (var i = 0; i < bindings.length; i += 2) {\n            var dirIndex = bindings[i];\n            var def = defs[dirIndex];\n            def.hostBindings && def.hostBindings(dirIndex, bindings[i + 1]);\n        }\n    }\n}\n/** Refreshes child components in the current view. */\nfunction refreshChildComponents(components) {\n    if (components != null) {\n        for (var i = 0; i < components.length; i += 2) {\n            componentRefresh(components[i], components[i + 1]);\n        }\n    }\n}\nfunction executeInitAndContentHooks() {\n    if (!checkNoChangesMode) {\n        var tView = currentView.tView;\n        executeInitHooks(currentView, tView, creationMode);\n        executeHooks((directives), tView.contentHooks, tView.contentCheckHooks, creationMode);\n    }\n}\nfunction createLView(viewId, renderer, tView, template, context, flags) {\n    var newView = {\n        parent: currentView,\n        id: viewId,\n        // -1 for component views\n        flags: flags | 1 /* CreationMode */ | 8 /* Attached */,\n        node: (null),\n        // until we initialize it in createNode.\n        data: [],\n        directives: null,\n        tView: tView,\n        cleanup: null,\n        renderer: renderer,\n        child: null,\n        tail: null,\n        next: null,\n        bindingStartIndex: -1,\n        bindingIndex: -1,\n        template: template,\n        context: context,\n        dynamicViewCount: 0,\n        lifecycleStage: 1 /* INIT */,\n        queries: null,\n    };\n    return newView;\n}\n/**\n * Creation of LNode object is extracted to a separate function so we always create LNode object\n * with the same shape\n * (same properties assigned in the same order).\n */\nfunction createLNodeObject(type, currentView, parent, native, state, queries) {\n    return {\n        type: type,\n        native: native,\n        view: currentView,\n        parent: parent,\n        child: null,\n        next: null,\n        nodeInjector: parent ? parent.nodeInjector : null,\n        data: state,\n        queries: queries,\n        tNode: null,\n        pNextOrParent: null,\n        dynamicLContainerNode: null\n    };\n}\nfunction createLNode(index, type, native, state) {\n    var parent = isParent ? previousOrParentNode :\n        previousOrParentNode && previousOrParentNode.parent;\n    var queries = (isParent ? currentQueries : previousOrParentNode && previousOrParentNode.queries) ||\n        parent && parent.queries && parent.queries.child();\n    var isState = state != null;\n    var node = createLNodeObject(type, currentView, parent, native, isState ? state : null, queries);\n    if ((type & 2 /* ViewOrElement */) === 2 /* ViewOrElement */ && isState) {\n        // Bit of a hack to bust through the readonly because there is a circular dep between\n        // LView and LNode.\n        ngDevMode && assertNull(state.node, 'LView.node should not have been initialized');\n        state.node = node;\n    }\n    if (index != null) {\n        // We are Element or Container\n        ngDevMode && assertDataNext(index);\n        data[index] = node;\n        // Every node adds a value to the static data array to avoid a sparse array\n        if (index >= tData.length) {\n            tData[index] = null;\n        }\n        else {\n            node.tNode = tData[index];\n        }\n        // Now link ourselves into the tree.\n        if (isParent) {\n            currentQueries = null;\n            if (previousOrParentNode.view === currentView ||\n                previousOrParentNode.type === 2 /* View */) {\n                // We are in the same view, which means we are adding content node to the parent View.\n                ngDevMode && assertNull(previousOrParentNode.child, \"previousOrParentNode's child should not have been set.\");\n                previousOrParentNode.child = node;\n            }\n            else {\n                // We are adding component view, so we don't link parent node child to this node.\n            }\n        }\n        else if (previousOrParentNode) {\n            ngDevMode && assertNull(previousOrParentNode.next, \"previousOrParentNode's next property should not have been set \" + index + \".\");\n            previousOrParentNode.next = node;\n            if (previousOrParentNode.dynamicLContainerNode) {\n                previousOrParentNode.dynamicLContainerNode.next = node;\n            }\n        }\n    }\n    previousOrParentNode = node;\n    isParent = true;\n    return node;\n}\n/**\n *\n * @param hostNode Existing node to render into.\n * @param template Template function with the instructions.\n * @param context to pass into the template.\n * @param providedRendererFactory renderer factory to use\n * @param host The host element node to use\n * @param directives Directive defs that should be used for matching\n * @param pipes Pipe defs that should be used for matching\n */\n\nfunction renderEmbeddedTemplate(viewNode, template, context, renderer) {\n    var _isParent = isParent;\n    var _previousOrParentNode = previousOrParentNode;\n    var oldView;\n    try {\n        isParent = true;\n        previousOrParentNode = (null);\n        var rf = 2;\n        if (viewNode == null) {\n            // TODO: revisit setting currentView when re-writing view containers\n            var directives_1 = currentView && currentView.tView.directiveRegistry;\n            var pipes = currentView && currentView.tView.pipeRegistry;\n            var tView = getOrCreateTView(template, directives_1, pipes);\n            var lView = createLView(-1, renderer, tView, template, context, 2 /* CheckAlways */);\n            viewNode = createLNode(null, 2 /* View */, null, lView);\n            rf = 1 /* Create */;\n        }\n        oldView = enterView(viewNode.data, viewNode);\n        template(rf, context);\n        refreshDirectives();\n        refreshDynamicChildren();\n    }\n    finally {\n        leaveView((oldView));\n        isParent = _isParent;\n        previousOrParentNode = _previousOrParentNode;\n    }\n    return viewNode;\n}\nfunction renderComponentOrTemplate(node, hostView, componentOrContext, template) {\n    var oldView = enterView(hostView, node);\n    try {\n        if (rendererFactory.begin) {\n            rendererFactory.begin();\n        }\n        if (template) {\n            template(getRenderFlags(hostView), (componentOrContext));\n            refreshDynamicChildren();\n            refreshDirectives();\n        }\n        else {\n            executeInitAndContentHooks();\n            // Element was stored at 0 in data and directive was stored at 0 in directives\n            // in renderComponent()\n            setHostBindings(_ROOT_DIRECTIVE_INDICES);\n            componentRefresh(0, 0);\n        }\n    }\n    finally {\n        if (rendererFactory.end) {\n            rendererFactory.end();\n        }\n        leaveView(oldView);\n    }\n}\n/**\n * This function returns the default configuration of rendering flags depending on when the\n * template is in creation mode or update mode. By default, the update block is run with the\n * creation block when the view is in creation mode. Otherwise, the update block is run\n * alone.\n *\n * Dynamically created views do NOT use this configuration (update block and create block are\n * always run separately).\n */\nfunction getRenderFlags(view) {\n    return view.flags & 1 /* CreationMode */ ? 1 /* Create */ | 2 /* Update */ :\n        2 /* Update */;\n}\n/**\n * Create DOM element. The instruction must later be followed by `elementEnd()` call.\n *\n * @param index Index of the element in the data array\n * @param name Name of the DOM Node\n * @param attrs Statically bound set of attributes to be written into the DOM element on creation.\n * @param localRefs A set of local reference bindings on the element.\n *\n * Attributes and localRefs are passed as an array of strings where elements with an even index\n * hold an attribute name and elements with an odd index hold an attribute value, ex.:\n * ['id', 'warning5', 'class', 'alert']\n */\n\n\n/** Sets the context for a ChangeDetectorRef to the given instance. */\n\n\n/**\n * Gets TView from a template function or creates a new TView\n * if it doesn't already exist.\n *\n * @param template The template from which to get static data\n * @param directives Directive defs that should be saved on TView\n * @param pipes Pipe defs that should be saved on TView\n * @returns TView\n */\nfunction getOrCreateTView(template, directives, pipes) {\n    return template.ngPrivateData ||\n        (template.ngPrivateData = createTView(directives, pipes));\n}\n/** Creates a TView instance */\nfunction createTView(defs, pipes) {\n    return {\n        data: [],\n        directives: null,\n        firstTemplatePass: true,\n        initHooks: null,\n        checkHooks: null,\n        contentHooks: null,\n        contentCheckHooks: null,\n        viewHooks: null,\n        viewCheckHooks: null,\n        destroyHooks: null,\n        pipeDestroyHooks: null,\n        hostBindings: null,\n        components: null,\n        directiveRegistry: typeof defs === 'function' ? defs() : defs,\n        pipeRegistry: typeof pipes === 'function' ? pipes() : pipes,\n        currentMatches: null\n    };\n}\n\n/**\n * Locates the host native element, used for bootstrapping existing nodes into rendering pipeline.\n *\n * @param elementOrSelector Render element or CSS selector to locate the element.\n */\n\n/**\n * Creates the host LNode.\n *\n * @param rNode Render host element.\n * @param def ComponentDef\n *\n * @returns LElementNode created\n */\n\n/**\n * Adds an event listener to the current node.\n *\n * If an output exists on one of the node's directives, it also subscribes to the output\n * and saves the subscription for later cleanup.\n *\n * @param eventName Name of the event\n * @param listenerFn The function to be called when event emits\n * @param useCapture Whether or not to use capture in event listener.\n */\n\n/** Mark the end of the element. */\n\n/**\n * Updates the value of removes an attribute on an Element.\n *\n * @param number index The index of the element in the data array\n * @param name name The name of the attribute.\n * @param value value The attribute is removed when value is `null` or `undefined`.\n *                  Otherwise the attribute value is set to the stringified value.\n * @param sanitizer An optional function used to sanitize the value.\n */\n\n/**\n * Update a property on an Element.\n *\n * If the property name also exists as an input property on one of the element's directives,\n * the component property will be set instead of the element property. This check must\n * be conducted at runtime so child components that add new @Inputs don't have to be re-compiled.\n *\n * @param index The index of the element to update in the data array\n * @param propName Name of property. Because it is going to DOM, this is not subject to\n *        renaming as part of minification.\n * @param value New value to write.\n * @param sanitizer An optional function used to sanitize the value.\n */\n\n/**\n * Add or remove a class in a `classList` on a DOM element.\n *\n * This instruction is meant to handle the [class.foo]=\"exp\" case\n *\n * @param index The index of the element to update in the data array\n * @param className Name of class to toggle. Because it is going to DOM, this is not subject to\n *        renaming as part of minification.\n * @param value A value indicating if a given class should be added or removed.\n */\n\n/**\n * Set the `className` property on a DOM element.\n *\n * This instruction is meant to handle the `[class]=\"exp\"` usage.\n *\n * `elementClass` instruction writes the value to the \"element's\" `className` property.\n *\n * @param index The index of the element to update in the data array\n * @param value A value indicating a set of classes which should be applied. The method overrides\n *   any existing classes. The value is stringified (`toString`) before it is applied to the\n *   element.\n */\n\n\n/**\n * Set the `style` property on a DOM element.\n *\n * This instruction is meant to handle the `[style]=\"exp\"` usage.\n *\n *\n * @param index The index of the element to update in the data array\n * @param value A value indicating if a given style should be added or removed.\n *   The expected shape of `value` is an object where keys are style names and the values\n *   are their corresponding values to set. If value is falsy than the style is remove. An absence\n *   of style does not cause that style to be removed. `NO_CHANGE` implies that no update should be\n *   performed.\n */\n\n/**\n * Create static text node\n *\n * @param index Index of the node in the data array.\n * @param value Value to write. This value will be stringified.\n *   If value is not provided than the actual creation of the text node is delayed.\n */\n\n/**\n * Create text node with binding\n * Bindings should be handled externally with the proper bind(1-8) method\n *\n * @param index Index of the node in the data array.\n * @param value Stringified value to write.\n */\n\n/**\n * Create a directive.\n *\n * NOTE: directives can be created in order other than the index order. They can also\n *       be retrieved before they are created in which case the value will be null.\n *\n * @param directive The directive instance.\n * @param directiveDef DirectiveDef object which contains information about the template.\n */\n\n/**\n * A lighter version of directiveCreate() that is used for the root component\n *\n * This version does not contain features that we don't already support at root in\n * current Angular. Example: local refs and inputs on root component.\n */\n\n\n/**\n * Creates an LContainerNode.\n *\n * Only `LViewNodes` can go into `LContainerNodes`.\n *\n * @param index The index of the container in the data array\n * @param template Optional inline template\n * @param tagName The name of the container element, if applicable\n * @param attrs The attrs attached to the container, if applicable\n * @param localRefs A set of local reference bindings on the element.\n */\n\n/**\n * Sets a container up to receive views.\n *\n * @param index The index of the container in the data array\n */\n\n/**\n * Marks the end of the LContainerNode.\n *\n * Marking the end of LContainerNode is the time when to child Views get inserted or removed.\n */\n\nfunction refreshDynamicChildren() {\n    for (var current = currentView.child; current !== null; current = current.next) {\n        if (current.dynamicViewCount !== 0 && current.views) {\n            var container_1 = current;\n            for (var i = 0; i < container_1.views.length; i++) {\n                var view = container_1.views[i];\n                renderEmbeddedTemplate(view, (view.data.template), (view.data.context), renderer);\n            }\n        }\n    }\n}\n/**\n * Marks the start of an embedded view.\n *\n * @param viewBlockId The ID of this view\n * @return boolean Whether or not this view is in creation mode\n */\n\n/** Marks the end of an embedded view. */\n\n/**\n * Refreshes components by entering the component view and processing its bindings, queries, etc.\n *\n * @param directiveIndex\n * @param elementIndex\n */\nfunction componentRefresh(directiveIndex, elementIndex) {\n    ngDevMode && assertDataInRange(elementIndex);\n    var element = data[elementIndex];\n    ngDevMode && assertNodeType(element, 3 /* Element */);\n    ngDevMode && assertNotNull$1(element.data, \"Component's host node should have an LView attached.\");\n    var hostView = (element.data);\n    // Only attached CheckAlways components or attached, dirty OnPush components should be checked\n    if (viewAttached(hostView) && hostView.flags & (2 /* CheckAlways */ | 4 /* Dirty */)) {\n        ngDevMode && assertDataInRange(directiveIndex, (directives));\n        var def = currentView.tView.directives[directiveIndex];\n        detectChangesInternal(hostView, element, def, getDirectiveInstance(directives[directiveIndex]));\n    }\n}\n/** Returns a boolean for whether the view is attached */\nfunction viewAttached(view) {\n    return (view.flags & 8 /* Attached */) === 8 /* Attached */;\n}\n/**\n * Instruction to distribute projectable nodes among <ng-content> occurrences in a given template.\n * It takes all the selectors from the entire component's template and decides where\n * each projected node belongs (it re-distributes nodes among \"buckets\" where each \"bucket\" is\n * backed by a selector).\n *\n * This function requires CSS selectors to be provided in 2 forms: parsed (by a compiler) and text,\n * un-parsed form.\n *\n * The parsed form is needed for efficient matching of a node against a given CSS selector.\n * The un-parsed, textual form is needed for support of the ngProjectAs attribute.\n *\n * Having a CSS selector in 2 different formats is not ideal, but alternatives have even more\n * drawbacks:\n * - having only a textual form would require runtime parsing of CSS selectors;\n * - we can't have only a parsed as we can't re-construct textual form from it (as entered by a\n * template author).\n *\n * @param selectors A collection of parsed CSS selectors\n * @param rawSelectors A collection of CSS selectors in the raw, un-parsed form\n */\n\n/**\n * Inserts previously re-distributed projected nodes. This instruction must be preceded by a call\n * to the projectionDef instruction.\n *\n * @param nodeIndex\n * @param localIndex - index under which distribution of projected nodes was memorized\n * @param selectorIndex - 0 means <ng-content> without any selector\n * @param attrs - attributes attached to the ng-content node, if present\n */\n\n/**\n * Adds a LView or a LContainer to the end of the current view tree.\n *\n * This structure will be used to traverse through nested views to remove listeners\n * and call onDestroy callbacks.\n *\n * @param currentView The view where LView or LContainer should be added\n * @param state The LView or LContainer to add to the view tree\n * @returns The state passed in\n */\n\n/** If node is an OnPush component, marks its LView dirty. */\n\n/**\n * Wraps an event listener so its host view and its ancestor views will be marked dirty\n * whenever the event fires. Necessary to support OnPush components.\n */\n\n/**\n * Wraps an event listener so its host view and its ancestor views will be marked dirty\n * whenever the event fires. Also wraps with preventDefault behavior.\n */\n\n/** Marks current view and all ancestors dirty */\nfunction markViewDirty(view) {\n    var currentView = view;\n    while (currentView.parent != null) {\n        currentView.flags |= 4 /* Dirty */;\n        currentView = currentView.parent;\n    }\n    currentView.flags |= 4 /* Dirty */;\n    ngDevMode && assertNotNull$1(currentView.context, 'rootContext');\n    scheduleTick(currentView.context);\n}\n/**\n * Used to schedule change detection on the whole application.\n *\n * Unlike `tick`, `scheduleTick` coalesces multiple calls into one change detection run.\n * It is usually called indirectly by calling `markDirty` when the view needs to be\n * re-rendered.\n *\n * Typically `scheduleTick` uses `requestAnimationFrame` to coalesce multiple\n * `scheduleTick` requests. The scheduling function can be overridden in\n * `renderComponent`'s `scheduler` option.\n */\nfunction scheduleTick(rootContext) {\n    if (rootContext.clean == _CLEAN_PROMISE) {\n        var res_1;\n        rootContext.clean = new Promise(function (r) { return res_1 = r; });\n        rootContext.scheduler(function () {\n            tick(rootContext.component);\n            res_1(null);\n            rootContext.clean = _CLEAN_PROMISE;\n        });\n    }\n}\n/**\n * Used to perform change detection on the whole application.\n *\n * This is equivalent to `detectChanges`, but invoked on root component. Additionally, `tick`\n * executes lifecycle hooks and conditionally checks components based on their\n * `ChangeDetectionStrategy` and dirtiness.\n *\n * The preferred way to trigger change detection is to call `markDirty`. `markDirty` internally\n * schedules `tick` using a scheduler in order to coalesce multiple `markDirty` calls into a\n * single change detection run. By default, the scheduler is `requestAnimationFrame`, but can\n * be changed when calling `renderComponent` and providing the `scheduler` option.\n */\nfunction tick(component) {\n    var rootView = getRootView(component);\n    var rootComponent = rootView.context.component;\n    var hostNode = _getComponentHostLElementNode(rootComponent);\n    ngDevMode && assertNotNull$1(hostNode.data, 'Component host node should be attached to an LView');\n    renderComponentOrTemplate(hostNode, rootView, rootComponent);\n}\n/**\n * Retrieve the root view from any component by walking the parent `LView` until\n * reaching the root `LView`.\n *\n * @param component any component\n */\nfunction getRootView(component) {\n    ngDevMode && assertNotNull$1(component, 'component');\n    var lElementNode = _getComponentHostLElementNode(component);\n    var lView = lElementNode.view;\n    while (lView.parent) {\n        lView = lView.parent;\n    }\n    return lView;\n}\n/**\n * Synchronously perform change detection on a component (and possibly its sub-components).\n *\n * This function triggers change detection in a synchronous way on a component. There should\n * be very little reason to call this function directly since a preferred way to do change\n * detection is to {@link markDirty} the component and wait for the scheduler to call this method\n * at some future point in time. This is because a single user action often results in many\n * components being invalidated and calling change detection on each component synchronously\n * would be inefficient. It is better to wait until all components are marked as dirty and\n * then perform single change detection across all of the components\n *\n * @param component The component which the change detection should be performed on.\n */\nfunction detectChanges(component) {\n    var hostNode = _getComponentHostLElementNode(component);\n    ngDevMode && assertNotNull$1(hostNode.data, 'Component host node should be attached to an LView');\n    var componentIndex = hostNode.tNode.flags >> 13;\n    var def = hostNode.view.tView.directives[componentIndex];\n    detectChangesInternal(hostNode.data, hostNode, def, component);\n}\n/**\n * Checks the change detector and its children, and throws if any changes are detected.\n *\n * This is used in development mode to verify that running change detection doesn't\n * introduce other changes.\n */\nfunction checkNoChanges(component) {\n    checkNoChangesMode = true;\n    try {\n        detectChanges(component);\n    }\n    finally {\n        checkNoChangesMode = false;\n    }\n}\n/** Checks the view of the component provided. Does not gate on dirty checks or execute doCheck. */\nfunction detectChangesInternal(hostView, hostNode, def, component) {\n    var oldView = enterView(hostView, hostNode);\n    var template = def.template;\n    try {\n        template(getRenderFlags(hostView), component);\n        refreshDirectives();\n        refreshDynamicChildren();\n    }\n    finally {\n        leaveView(oldView);\n    }\n}\n/**\n * Mark the component as dirty (needing change detection).\n *\n * Marking a component dirty will schedule a change detection on this\n * component at some point in the future. Marking an already dirty\n * component as dirty is a noop. Only one outstanding change detection\n * can be scheduled per component tree. (Two components bootstrapped with\n * separate `renderComponent` will have separate schedulers)\n *\n * When the root component is bootstrapped with `renderComponent`, a scheduler\n * can be provided.\n *\n * @param component Component to mark as dirty.\n */\n\n/** A special value which designates that a value has not changed. */\n\n/**\n * Creates a single value binding.\n *\n * @param value Value to diff\n */\n\n/**\n * Create interpolation bindings with a variable number of expressions.\n *\n * If there are 1 to 8 expressions `interpolation1()` to `interpolation8()` should be used instead.\n * Those are faster because there is no need to create an array of expressions and iterate over it.\n *\n * `values`:\n * - has static text at even indexes,\n * - has evaluated expressions at odd indexes.\n *\n * Returns the concatenated string when any of the arguments changes, `NO_CHANGE` otherwise.\n */\n\n/**\n * Creates an interpolation binding with 1 expression.\n *\n * @param prefix static value used for concatenation only.\n * @param v0 value checked for change.\n * @param suffix static value used for concatenation only.\n */\n\n/** Creates an interpolation binding with 2 expressions. */\n\n/** Creates an interpolation bindings with 3 expressions. */\n\n/** Create an interpolation binding with 4 expressions. */\n\n/** Creates an interpolation binding with 5 expressions. */\n\n/** Creates an interpolation binding with 6 expressions. */\n\n/** Creates an interpolation binding with 7 expressions. */\n\n/** Creates an interpolation binding with 8 expressions. */\n\n/** Store a value in the `data` at a given `index`. */\n\n/** Retrieves a value from the `data`. */\n\n/** Retrieves a value from the `directives` array. */\n\n/** Gets the current binding value and increments the binding index. */\n\n/** Updates binding if changed, then returns whether it was updated. */\n\n/** Updates binding if changed, then returns the latest value. */\n\n/** Updates 2 bindings if changed, then returns whether either was updated. */\n\n/** Updates 4 bindings if changed, then returns whether any was updated. */\n\n\nfunction getDirectiveInstance(instanceOrArray) {\n    // Directives with content queries store an array in directives[directiveIndex]\n    // with the instance as the first index\n    return Array.isArray(instanceOrArray) ? instanceOrArray[0] : instanceOrArray;\n}\n\nfunction assertDataInRange(index, arr) {\n    if (arr == null)\n        arr = data;\n    assertLessThan(index, arr ? arr.length : 0, 'index expected to be a valid data index');\n}\nfunction assertDataNext(index, arr) {\n    if (arr == null)\n        arr = data;\n    assertEqual(arr.length, index, \"index \" + index + \" expected to be at the end of arr (length \" + arr.length + \")\");\n}\nfunction _getComponentHostLElementNode(component) {\n    ngDevMode && assertNotNull$1(component, 'expecting component got null');\n    var lElementNode = component[NG_HOST_SYMBOL];\n    ngDevMode && assertNotNull$1(component, 'object is not a component');\n    return lElementNode;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar ViewRef$1 = /** @class */ (function () {\n    function ViewRef(_view, context) {\n        this._view = _view;\n        this.context = (context);\n    }\n    /** @internal */\n    /** @internal */\n    ViewRef.prototype._setComponentContext = /** @internal */\n    function (view, context) {\n        this._view = view;\n        this.context = context;\n    };\n    ViewRef.prototype.destroy = function () {  };\n    ViewRef.prototype.onDestroy = function (callback) {  };\n    /**\n     * Marks a view and all of its ancestors dirty.\n     *\n     * It also triggers change detection by calling `scheduleTick` internally, which coalesces\n     * multiple `markForCheck` calls to into one change detection run.\n     *\n     * This can be used to ensure an {@link ChangeDetectionStrategy#OnPush OnPush} component is\n     * checked when it needs to be re-rendered but the two normal triggers haven't marked it\n     * dirty (i.e. inputs haven't changed and events haven't fired in the view).\n     *\n     * <!-- TODO: Add a link to a chapter on OnPush components -->\n     *\n     * ### Example ([live demo](https://stackblitz.com/edit/angular-kx7rrw))\n     *\n     * ```typescript\n     * @Component({\n     *   selector: 'my-app',\n     *   template: `Number of ticks: {{numberOfTicks}}`\n     *   changeDetection: ChangeDetectionStrategy.OnPush,\n     * })\n     * class AppComponent {\n     *   numberOfTicks = 0;\n     *\n     *   constructor(private ref: ChangeDetectorRef) {\n     *     setInterval(() => {\n     *       this.numberOfTicks++;\n     *       // the following is required, otherwise the view will not be updated\n     *       this.ref.markForCheck();\n     *     }, 1000);\n     *   }\n     * }\n     * ```\n     */\n    /**\n       * Marks a view and all of its ancestors dirty.\n       *\n       * It also triggers change detection by calling `scheduleTick` internally, which coalesces\n       * multiple `markForCheck` calls to into one change detection run.\n       *\n       * This can be used to ensure an {@link ChangeDetectionStrategy#OnPush OnPush} component is\n       * checked when it needs to be re-rendered but the two normal triggers haven't marked it\n       * dirty (i.e. inputs haven't changed and events haven't fired in the view).\n       *\n       * <!-- TODO: Add a link to a chapter on OnPush components -->\n       *\n       * ### Example ([live demo](https://stackblitz.com/edit/angular-kx7rrw))\n       *\n       * ```typescript\n       * @Component({\n       *   selector: 'my-app',\n       *   template: `Number of ticks: {{numberOfTicks}}`\n       *   changeDetection: ChangeDetectionStrategy.OnPush,\n       * })\n       * class AppComponent {\n       *   numberOfTicks = 0;\n       *\n       *   constructor(private ref: ChangeDetectorRef) {\n       *     setInterval(() => {\n       *       this.numberOfTicks++;\n       *       // the following is required, otherwise the view will not be updated\n       *       this.ref.markForCheck();\n       *     }, 1000);\n       *   }\n       * }\n       * ```\n       */\n    ViewRef.prototype.markForCheck = /**\n       * Marks a view and all of its ancestors dirty.\n       *\n       * It also triggers change detection by calling `scheduleTick` internally, which coalesces\n       * multiple `markForCheck` calls to into one change detection run.\n       *\n       * This can be used to ensure an {@link ChangeDetectionStrategy#OnPush OnPush} component is\n       * checked when it needs to be re-rendered but the two normal triggers haven't marked it\n       * dirty (i.e. inputs haven't changed and events haven't fired in the view).\n       *\n       * <!-- TODO: Add a link to a chapter on OnPush components -->\n       *\n       * ### Example ([live demo](https://stackblitz.com/edit/angular-kx7rrw))\n       *\n       * ```typescript\n       * @Component({\n       *   selector: 'my-app',\n       *   template: `Number of ticks: {{numberOfTicks}}`\n       *   changeDetection: ChangeDetectionStrategy.OnPush,\n       * })\n       * class AppComponent {\n       *   numberOfTicks = 0;\n       *\n       *   constructor(private ref: ChangeDetectorRef) {\n       *     setInterval(() => {\n       *       this.numberOfTicks++;\n       *       // the following is required, otherwise the view will not be updated\n       *       this.ref.markForCheck();\n       *     }, 1000);\n       *   }\n       * }\n       * ```\n       */\n    function () { markViewDirty(this._view); };\n    /**\n     * Detaches the view from the change detection tree.\n     *\n     * Detached views will not be checked during change detection runs until they are\n     * re-attached, even if they are dirty. `detach` can be used in combination with\n     * {@link ChangeDetectorRef#detectChanges detectChanges} to implement local change\n     * detection checks.\n     *\n     * <!-- TODO: Add a link to a chapter on detach/reattach/local digest -->\n     * <!-- TODO: Add a live demo once ref.detectChanges is merged into master -->\n     *\n     * ### Example\n     *\n     * The following example defines a component with a large list of readonly data.\n     * Imagine the data changes constantly, many times per second. For performance reasons,\n     * we want to check and update the list every five seconds. We can do that by detaching\n     * the component's change detector and doing a local check every five seconds.\n     *\n     * ```typescript\n     * class DataProvider {\n     *   // in a real application the returned data will be different every time\n     *   get data() {\n     *     return [1,2,3,4,5];\n     *   }\n     * }\n     *\n     * @Component({\n     *   selector: 'giant-list',\n     *   template: `\n     *     <li *ngFor=\"let d of dataProvider.data\">Data {{d}}</li>\n     *   `,\n     * })\n     * class GiantList {\n     *   constructor(private ref: ChangeDetectorRef, private dataProvider: DataProvider) {\n     *     ref.detach();\n     *     setInterval(() => {\n     *       this.ref.detectChanges();\n     *     }, 5000);\n     *   }\n     * }\n     *\n     * @Component({\n     *   selector: 'app',\n     *   providers: [DataProvider],\n     *   template: `\n     *     <giant-list><giant-list>\n     *   `,\n     * })\n     * class App {\n     * }\n     * ```\n     */\n    /**\n       * Detaches the view from the change detection tree.\n       *\n       * Detached views will not be checked during change detection runs until they are\n       * re-attached, even if they are dirty. `detach` can be used in combination with\n       * {@link ChangeDetectorRef#detectChanges detectChanges} to implement local change\n       * detection checks.\n       *\n       * <!-- TODO: Add a link to a chapter on detach/reattach/local digest -->\n       * <!-- TODO: Add a live demo once ref.detectChanges is merged into master -->\n       *\n       * ### Example\n       *\n       * The following example defines a component with a large list of readonly data.\n       * Imagine the data changes constantly, many times per second. For performance reasons,\n       * we want to check and update the list every five seconds. We can do that by detaching\n       * the component's change detector and doing a local check every five seconds.\n       *\n       * ```typescript\n       * class DataProvider {\n       *   // in a real application the returned data will be different every time\n       *   get data() {\n       *     return [1,2,3,4,5];\n       *   }\n       * }\n       *\n       * @Component({\n       *   selector: 'giant-list',\n       *   template: `\n       *     <li *ngFor=\"let d of dataProvider.data\">Data {{d}}</li>\n       *   `,\n       * })\n       * class GiantList {\n       *   constructor(private ref: ChangeDetectorRef, private dataProvider: DataProvider) {\n       *     ref.detach();\n       *     setInterval(() => {\n       *       this.ref.detectChanges();\n       *     }, 5000);\n       *   }\n       * }\n       *\n       * @Component({\n       *   selector: 'app',\n       *   providers: [DataProvider],\n       *   template: `\n       *     <giant-list><giant-list>\n       *   `,\n       * })\n       * class App {\n       * }\n       * ```\n       */\n    ViewRef.prototype.detach = /**\n       * Detaches the view from the change detection tree.\n       *\n       * Detached views will not be checked during change detection runs until they are\n       * re-attached, even if they are dirty. `detach` can be used in combination with\n       * {@link ChangeDetectorRef#detectChanges detectChanges} to implement local change\n       * detection checks.\n       *\n       * <!-- TODO: Add a link to a chapter on detach/reattach/local digest -->\n       * <!-- TODO: Add a live demo once ref.detectChanges is merged into master -->\n       *\n       * ### Example\n       *\n       * The following example defines a component with a large list of readonly data.\n       * Imagine the data changes constantly, many times per second. For performance reasons,\n       * we want to check and update the list every five seconds. We can do that by detaching\n       * the component's change detector and doing a local check every five seconds.\n       *\n       * ```typescript\n       * class DataProvider {\n       *   // in a real application the returned data will be different every time\n       *   get data() {\n       *     return [1,2,3,4,5];\n       *   }\n       * }\n       *\n       * @Component({\n       *   selector: 'giant-list',\n       *   template: `\n       *     <li *ngFor=\"let d of dataProvider.data\">Data {{d}}</li>\n       *   `,\n       * })\n       * class GiantList {\n       *   constructor(private ref: ChangeDetectorRef, private dataProvider: DataProvider) {\n       *     ref.detach();\n       *     setInterval(() => {\n       *       this.ref.detectChanges();\n       *     }, 5000);\n       *   }\n       * }\n       *\n       * @Component({\n       *   selector: 'app',\n       *   providers: [DataProvider],\n       *   template: `\n       *     <giant-list><giant-list>\n       *   `,\n       * })\n       * class App {\n       * }\n       * ```\n       */\n    function () { this._view.flags &= ~8 /* Attached */; };\n    /**\n     * Re-attaches a view to the change detection tree.\n     *\n     * This can be used to re-attach views that were previously detached from the tree\n     * using {@link ChangeDetectorRef#detach detach}. Views are attached to the tree by default.\n     *\n     * <!-- TODO: Add a link to a chapter on detach/reattach/local digest -->\n     *\n     * ### Example ([live demo](https://stackblitz.com/edit/angular-ymgsxw))\n     *\n     * The following example creates a component displaying `live` data. The component will detach\n     * its change detector from the main change detector tree when the component's live property\n     * is set to false.\n     *\n     * ```typescript\n     * class DataProvider {\n     *   data = 1;\n     *\n     *   constructor() {\n     *     setInterval(() => {\n     *       this.data = this.data * 2;\n     *     }, 500);\n     *   }\n     * }\n     *\n     * @Component({\n     *   selector: 'live-data',\n     *   inputs: ['live'],\n     *   template: 'Data: {{dataProvider.data}}'\n     * })\n     * class LiveData {\n     *   constructor(private ref: ChangeDetectorRef, private dataProvider: DataProvider) {}\n     *\n     *   set live(value) {\n     *     if (value) {\n     *       this.ref.reattach();\n     *     } else {\n     *       this.ref.detach();\n     *     }\n     *   }\n     * }\n     *\n     * @Component({\n     *   selector: 'my-app',\n     *   providers: [DataProvider],\n     *   template: `\n     *     Live Update: <input type=\"checkbox\" [(ngModel)]=\"live\">\n     *     <live-data [live]=\"live\"><live-data>\n     *   `,\n     * })\n     * class AppComponent {\n     *   live = true;\n     * }\n     * ```\n     */\n    /**\n       * Re-attaches a view to the change detection tree.\n       *\n       * This can be used to re-attach views that were previously detached from the tree\n       * using {@link ChangeDetectorRef#detach detach}. Views are attached to the tree by default.\n       *\n       * <!-- TODO: Add a link to a chapter on detach/reattach/local digest -->\n       *\n       * ### Example ([live demo](https://stackblitz.com/edit/angular-ymgsxw))\n       *\n       * The following example creates a component displaying `live` data. The component will detach\n       * its change detector from the main change detector tree when the component's live property\n       * is set to false.\n       *\n       * ```typescript\n       * class DataProvider {\n       *   data = 1;\n       *\n       *   constructor() {\n       *     setInterval(() => {\n       *       this.data = this.data * 2;\n       *     }, 500);\n       *   }\n       * }\n       *\n       * @Component({\n       *   selector: 'live-data',\n       *   inputs: ['live'],\n       *   template: 'Data: {{dataProvider.data}}'\n       * })\n       * class LiveData {\n       *   constructor(private ref: ChangeDetectorRef, private dataProvider: DataProvider) {}\n       *\n       *   set live(value) {\n       *     if (value) {\n       *       this.ref.reattach();\n       *     } else {\n       *       this.ref.detach();\n       *     }\n       *   }\n       * }\n       *\n       * @Component({\n       *   selector: 'my-app',\n       *   providers: [DataProvider],\n       *   template: `\n       *     Live Update: <input type=\"checkbox\" [(ngModel)]=\"live\">\n       *     <live-data [live]=\"live\"><live-data>\n       *   `,\n       * })\n       * class AppComponent {\n       *   live = true;\n       * }\n       * ```\n       */\n    ViewRef.prototype.reattach = /**\n       * Re-attaches a view to the change detection tree.\n       *\n       * This can be used to re-attach views that were previously detached from the tree\n       * using {@link ChangeDetectorRef#detach detach}. Views are attached to the tree by default.\n       *\n       * <!-- TODO: Add a link to a chapter on detach/reattach/local digest -->\n       *\n       * ### Example ([live demo](https://stackblitz.com/edit/angular-ymgsxw))\n       *\n       * The following example creates a component displaying `live` data. The component will detach\n       * its change detector from the main change detector tree when the component's live property\n       * is set to false.\n       *\n       * ```typescript\n       * class DataProvider {\n       *   data = 1;\n       *\n       *   constructor() {\n       *     setInterval(() => {\n       *       this.data = this.data * 2;\n       *     }, 500);\n       *   }\n       * }\n       *\n       * @Component({\n       *   selector: 'live-data',\n       *   inputs: ['live'],\n       *   template: 'Data: {{dataProvider.data}}'\n       * })\n       * class LiveData {\n       *   constructor(private ref: ChangeDetectorRef, private dataProvider: DataProvider) {}\n       *\n       *   set live(value) {\n       *     if (value) {\n       *       this.ref.reattach();\n       *     } else {\n       *       this.ref.detach();\n       *     }\n       *   }\n       * }\n       *\n       * @Component({\n       *   selector: 'my-app',\n       *   providers: [DataProvider],\n       *   template: `\n       *     Live Update: <input type=\"checkbox\" [(ngModel)]=\"live\">\n       *     <live-data [live]=\"live\"><live-data>\n       *   `,\n       * })\n       * class AppComponent {\n       *   live = true;\n       * }\n       * ```\n       */\n    function () { this._view.flags |= 8 /* Attached */; };\n    /**\n     * Checks the view and its children.\n     *\n     * This can also be used in combination with {@link ChangeDetectorRef#detach detach} to implement\n     * local change detection checks.\n     *\n     * <!-- TODO: Add a link to a chapter on detach/reattach/local digest -->\n     * <!-- TODO: Add a live demo once ref.detectChanges is merged into master -->\n     *\n     * ### Example\n     *\n     * The following example defines a component with a large list of readonly data.\n     * Imagine, the data changes constantly, many times per second. For performance reasons,\n     * we want to check and update the list every five seconds.\n     *\n     * We can do that by detaching the component's change detector and doing a local change detection\n     * check every five seconds.\n     *\n     * See {@link ChangeDetectorRef#detach detach} for more information.\n     */\n    /**\n       * Checks the view and its children.\n       *\n       * This can also be used in combination with {@link ChangeDetectorRef#detach detach} to implement\n       * local change detection checks.\n       *\n       * <!-- TODO: Add a link to a chapter on detach/reattach/local digest -->\n       * <!-- TODO: Add a live demo once ref.detectChanges is merged into master -->\n       *\n       * ### Example\n       *\n       * The following example defines a component with a large list of readonly data.\n       * Imagine, the data changes constantly, many times per second. For performance reasons,\n       * we want to check and update the list every five seconds.\n       *\n       * We can do that by detaching the component's change detector and doing a local change detection\n       * check every five seconds.\n       *\n       * See {@link ChangeDetectorRef#detach detach} for more information.\n       */\n    ViewRef.prototype.detectChanges = /**\n       * Checks the view and its children.\n       *\n       * This can also be used in combination with {@link ChangeDetectorRef#detach detach} to implement\n       * local change detection checks.\n       *\n       * <!-- TODO: Add a link to a chapter on detach/reattach/local digest -->\n       * <!-- TODO: Add a live demo once ref.detectChanges is merged into master -->\n       *\n       * ### Example\n       *\n       * The following example defines a component with a large list of readonly data.\n       * Imagine, the data changes constantly, many times per second. For performance reasons,\n       * we want to check and update the list every five seconds.\n       *\n       * We can do that by detaching the component's change detector and doing a local change detection\n       * check every five seconds.\n       *\n       * See {@link ChangeDetectorRef#detach detach} for more information.\n       */\n    function () { detectChanges(this.context); };\n    /**\n     * Checks the change detector and its children, and throws if any changes are detected.\n     *\n     * This is used in development mode to verify that running change detection doesn't\n     * introduce other changes.\n     */\n    /**\n       * Checks the change detector and its children, and throws if any changes are detected.\n       *\n       * This is used in development mode to verify that running change detection doesn't\n       * introduce other changes.\n       */\n    ViewRef.prototype.checkNoChanges = /**\n       * Checks the change detector and its children, and throws if any changes are detected.\n       *\n       * This is used in development mode to verify that running change detection doesn't\n       * introduce other changes.\n       */\n    function () { checkNoChanges(this.context); };\n    return ViewRef;\n}());\nvar EmbeddedViewRef$1 = /** @class */ (function (_super) {\n    __extends(EmbeddedViewRef, _super);\n    function EmbeddedViewRef(viewNode, template, context) {\n        var _this = _super.call(this, viewNode.data, context) || this;\n        _this._lViewNode = viewNode;\n        return _this;\n    }\n    return EmbeddedViewRef;\n}(ViewRef$1));\n/**\n * Creates a ViewRef bundled with destroy functionality.\n *\n * @param context The context for this view\n * @returns The ViewRef\n */\n\n/**\n * Decorates an object with destroy logic (implementing the DestroyRef interface)\n * and returns the enhanced object.\n *\n * @param obj The object to decorate\n * @returns The object with destroy logic\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Bootstraps a component, then creates and returns a `ComponentRef` for that component.\n *\n * @param componentType Component to bootstrap\n * @param options Optional parameters which control bootstrapping\n */\n\n// TODO: A hack to not pull in the NullInjector from @angular/core.\n\n/**\n * Bootstraps a Component into an existing host element and returns an instance\n * of the component.\n *\n * Use this function to bootstrap a component into the DOM tree. Each invocation\n * of this function will create a separate tree of components, injectors and\n * change detection cycles and lifetimes. To dynamically insert a new component\n * into an existing tree such that it shares the same injection, change detection\n * and object lifetime, use {@link ViewContainer#createComponent}.\n *\n * @param componentType Component to bootstrap\n * @param options Optional parameters which control bootstrapping\n */\n\n/**\n * Used to enable lifecycle hooks on the root component.\n *\n * Include this feature when calling `renderComponent` if the root component\n * you are rendering has lifecycle hooks defined. Otherwise, the hooks won't\n * be called properly.\n *\n * Example:\n *\n * ```\n * renderComponent(AppComponent, {features: [RootLifecycleHooks]});\n * ```\n */\n\n/**\n * Retrieve the host element of the component.\n *\n * Use this function to retrieve the host element of the component. The host\n * element is the element which the component is associated with.\n *\n * @param component Component for which the host element should be retrieved.\n */\n\n/**\n * Retrieves the rendered text for a given component.\n *\n * This function retrieves the host element of a component and\n * and then returns the `textContent` for that element. This implies\n * that the text returned will include re-projected content of\n * the component as well.\n *\n * @param component The component to return the content text for.\n */\n\n/**\n * Wait on component until it is rendered.\n *\n * This function returns a `Promise` which is resolved when the component's\n * change detection is executed. This is determined by finding the scheduler\n * associated with the `component`'s render tree and waiting until the scheduler\n * flushes. If nothing is scheduled, the function returns a resolved promise.\n *\n * Example:\n * ```\n * await whenRendered(myComponent);\n * ```\n *\n * @param component Component to wait upon\n * @returns Promise which resolves when the component is rendered.\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Registers this directive as present in its node's injector by flipping the directive's\n * corresponding bit in the injector's bloom filter.\n *\n * @param injector The node injector in which the directive should be registered\n * @param type The directive to register\n */\n\n\n/**\n * Creates (or gets an existing) injector for a given element or container.\n *\n * @param node for which an injector should be retrieved / created.\n * @returns Node injector\n */\n\n/**\n * Makes a directive public to the DI system by adding it to an injector's bloom filter.\n *\n * @param di The node injector in which a directive will be added\n * @param def The definition of the directive to be made public\n */\n\n/**\n * Makes a directive public to the DI system by adding it to an injector's bloom filter.\n *\n * @param def The definition of the directive to be made public\n */\n\n/**\n * Searches for an instance of the given type up the injector tree and returns\n * that instance if found.\n *\n * If not found, it will propagate up to the next parent injector until the token\n * is found or the top is reached.\n *\n * Usage example (in factory function):\n *\n * class SomeDirective {\n *   constructor(directive: DirectiveA) {}\n *\n *   static ngDirectiveDef = defineDirective({\n *     type: SomeDirective,\n *     factory: () => new SomeDirective(directiveInject(DirectiveA))\n *   });\n * }\n *\n * NOTE: use `directiveInject` with `@Directive`, `@Component`, and `@Pipe`. For\n * all other injection use `inject` which does not walk the DOM render tree.\n *\n * @param token The directive type to search for\n * @param flags Injection flags (e.g. CheckParent)\n * @returns The instance found\n */\n\n/**\n * Creates an ElementRef and stores it on the injector.\n * Or, if the ElementRef already exists, retrieves the existing ElementRef.\n *\n * @returns The ElementRef instance to use\n */\n\n/**\n * Creates a TemplateRef and stores it on the injector. Or, if the TemplateRef already\n * exists, retrieves the existing TemplateRef.\n *\n * @returns The TemplateRef instance to use\n */\n\n/**\n * Creates a ViewContainerRef and stores it on the injector. Or, if the ViewContainerRef\n * already exists, retrieves the existing ViewContainerRef.\n *\n * @returns The ViewContainerRef instance to use\n */\n\n/** Returns a ChangeDetectorRef (a.k.a. a ViewRef) */\n\n/**\n * Inject static attribute value into directive constructor.\n *\n * This method is used with `factory` functions which are generated as part of\n * `defineDirective` or `defineComponent`. The method retrieves the static value\n * of an attribute. (Dynamic attributes are not supported since they are not resolved\n *  at the time of injection and can change over time.)\n *\n * # Example\n * Given:\n * ```\n * @Component(...)\n * class MyComponent {\n *   constructor(@Attribute('title') title: string) { ... }\n * }\n * ```\n * When instantiated with\n * ```\n * <my-component title=\"Hello\"></my-component>\n * ```\n *\n * Then factory method generated is:\n * ```\n * MyComponent.ngComponentDef = defineComponent({\n *   factory: () => new MyComponent(injectAttribute('title'))\n *   ...\n * })\n * ```\n *\n * @experimental\n */\n\n/**\n * Creates a ViewRef and stores it on the injector as ChangeDetectorRef (public alias).\n * Or, if it already exists, retrieves the existing instance.\n *\n * @returns The ChangeDetectorRef to use\n */\n\n/**\n * Searches for an instance of the given directive type up the injector tree and returns\n * that instance if found.\n *\n * Specifically, it gets the bloom filter bit associated with the directive (see bloomHashBit),\n * checks that bit against the bloom filter structure to identify an injector that might have\n * the directive (see bloomFindPossibleInjector), then searches the directives on that injector\n * for a match.\n *\n * If not found, it will propagate up to the next parent injector until the token\n * is found or the top is reached.\n *\n * @param di Node injector where the search should start\n * @param token The directive type to search for\n * @param flags Injection flags (e.g. CheckParent)\n * @returns The instance found\n */\n\n/**\n * Finds the closest injector that might have a certain directive.\n *\n * Each directive corresponds to a bit in an injector's bloom filter. Given the bloom bit to\n * check and a starting injector, this function traverses up injectors until it finds an\n * injector that contains a 1 for that bit in its bloom filter. A 1 indicates that the\n * injector may have that directive. It only *may* have the directive because directives begin\n * to share bloom filter bits after the BLOOM_SIZE is reached, and it could correspond to a\n * different directive sharing the bit.\n *\n * Note: We can skip checking further injectors up the tree if an injector's cbf structure\n * has a 0 for that bloom bit. Since cbf contains the merged value of all the parent\n * injectors, a 0 in the bloom bit indicates that the parents definitely do not contain\n * the directive and do not need to be checked.\n *\n * @param injector The starting node injector to check\n * @param  bloomBit The bit to check in each injector's bloom filter\n * @returns An injector that might have the directive\n */\n\n/**\n * Creates an ElementRef for a given node injector and stores it on the injector.\n * Or, if the ElementRef already exists, retrieves the existing ElementRef.\n *\n * @param di The node injector where we should store a created ElementRef\n * @returns The ElementRef instance to use\n */\n\n\n\n\n\n/**\n * Creates a ViewContainerRef and stores it on the injector. Or, if the ViewContainerRef\n * already exists, retrieves the existing ViewContainerRef.\n *\n * @returns The ViewContainerRef instance to use\n */\n\n/**\n * A ref to a container that enables adding and removing views from that container\n * imperatively.\n */\nvar ViewContainerRef$1 = /** @class */ (function () {\n    function ViewContainerRef(_lContainerNode) {\n        this._lContainerNode = _lContainerNode;\n        this._viewRefs = [];\n    }\n    ViewContainerRef.prototype.clear = function () {\n        var lContainer = this._lContainerNode.data;\n        while (lContainer.views.length) {\n            this.remove(0);\n        }\n    };\n    ViewContainerRef.prototype.get = function (index) { return this._viewRefs[index] || null; };\n    Object.defineProperty(ViewContainerRef.prototype, \"length\", {\n        get: function () {\n            var lContainer = this._lContainerNode.data;\n            return lContainer.views.length;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    ViewContainerRef.prototype.createEmbeddedView = function (templateRef, context, index) {\n        var viewRef = templateRef.createEmbeddedView(context || {});\n        this.insert(viewRef, index);\n        return viewRef;\n    };\n    ViewContainerRef.prototype.createComponent = function (componentFactory, index, injector, projectableNodes, ngModule) {\n        throw notImplemented();\n    };\n    ViewContainerRef.prototype.insert = function (viewRef, index) {\n        var lViewNode = viewRef._lViewNode;\n        var adjustedIdx = this._adjustIndex(index);\n        insertView(this._lContainerNode, lViewNode, adjustedIdx);\n        // invalidate cache of next sibling RNode (we do similar operation in the containerRefreshEnd\n        // instruction)\n        this._lContainerNode.native = undefined;\n        this._viewRefs.splice(adjustedIdx, 0, viewRef);\n        lViewNode.parent = this._lContainerNode;\n        // If the view is dynamic (has a template), it needs to be counted both at the container\n        // level and at the node above the container.\n        if (lViewNode.data.template !== null) {\n            // Increment the container view count.\n            this._lContainerNode.data.dynamicViewCount++;\n            // Look for the parent node and increment its dynamic view count.\n            if (this._lContainerNode.parent !== null && this._lContainerNode.parent.data !== null) {\n                ngDevMode && assertNodeOfPossibleTypes(this._lContainerNode.parent, 2 /* View */, 3 /* Element */);\n                this._lContainerNode.parent.data.dynamicViewCount++;\n            }\n        }\n        return viewRef;\n    };\n    ViewContainerRef.prototype.move = function (viewRef, newIndex) {\n        var index = this.indexOf(viewRef);\n        this.detach(index);\n        this.insert(viewRef, this._adjustIndex(newIndex));\n        return viewRef;\n    };\n    ViewContainerRef.prototype.indexOf = function (viewRef) { return this._viewRefs.indexOf(viewRef); };\n    ViewContainerRef.prototype.remove = function (index) {\n        this.detach(index);\n        // TODO(ml): proper destroy of the ViewRef, i.e. recursively destroy the LviewNode and its\n        // children, delete DOM nodes and QueryList, trigger hooks (onDestroy), destroy the renderer,\n        // detach projected nodes\n    };\n    ViewContainerRef.prototype.detach = function (index) {\n        var adjustedIdx = this._adjustIndex(index, -1);\n        removeView(this._lContainerNode, adjustedIdx);\n        return this._viewRefs.splice(adjustedIdx, 1)[0] || null;\n    };\n    ViewContainerRef.prototype._adjustIndex = function (index, shift) {\n        if (shift === void 0) { shift = 0; }\n        if (index == null) {\n            return this._lContainerNode.data.views.length + shift;\n        }\n        if (ngDevMode) {\n            assertGreaterThan(index, -1, 'index must be positive');\n            // +1 because it's legal to insert at the end.\n            assertLessThan(index, this._lContainerNode.data.views.length + 1 + shift, 'index');\n        }\n        return index;\n    };\n    return ViewContainerRef;\n}());\n/**\n * Creates a TemplateRef and stores it on the injector. Or, if the TemplateRef already\n * exists, retrieves the existing TemplateRef.\n *\n * @param di The node injector where we should store a created TemplateRef\n * @returns The TemplateRef instance to use\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Create a component definition object.\n *\n *\n * # Example\n * ```\n * class MyDirective {\n *   // Generated by Angular Template Compiler\n *   // [Symbol] syntax will not be supported by TypeScript until v2.7\n *   static ngComponentDef = defineComponent({\n *     ...\n *   });\n * }\n * ```\n */\n\n\n\n/**\n * Creates an NgOnChangesFeature function for a component's features list.\n *\n * It accepts an optional map of minified input property names to original property names,\n * if any input properties have a public alias.\n *\n * The NgOnChangesFeature function that is returned decorates a component with support for\n * the ngOnChanges lifecycle hook, so it should be included in any component that implements\n * that hook.\n *\n * Example usage:\n *\n * ```\n * static ngComponentDef = defineComponent({\n *   ...\n *   inputs: {name: 'publicName'},\n *   features: [NgOnChangesFeature({name: 'name'})]\n * });\n * ```\n *\n * @param inputPropertyNames Map of input property names, if they are aliased\n * @returns DirectiveDefFeature\n */\n\n\n/**\n * Create a directive definition object.\n *\n * # Example\n * ```\n * class MyDirective {\n *   // Generated by Angular Template Compiler\n *   // [Symbol] syntax will not be supported by TypeScript until v2.7\n *   static ngDirectiveDef = defineDirective({\n *     ...\n *   });\n * }\n * ```\n */\n\n/**\n * Create a pipe definition object.\n *\n * # Example\n * ```\n * class MyPipe implements PipeTransform {\n *   // Generated by Angular Template Compiler\n *   static ngPipeDef = definePipe({\n *     ...\n *   });\n * }\n * ```\n * @param pipeDef Pipe definition generated by the compiler\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * If the value hasn't been saved, calls the pure function to store and return the\n * value. If it has been saved, returns the saved value.\n *\n * @param pureFn Function that returns a value\n * @returns value\n */\n\n/**\n * If the value of the provided exp has changed, calls the pure function to return\n * an updated value. Or if the value has not changed, returns cached value.\n *\n * @param pureFn Function that returns an updated value\n * @param exp Updated expression value\n * @returns Updated value\n */\n\n/**\n * If the value of any provided exp has changed, calls the pure function to return\n * an updated value. Or if no values have changed, returns cached value.\n *\n * @param pureFn\n * @param exp1\n * @param exp2\n * @returns Updated value\n */\n\n/**\n * If the value of any provided exp has changed, calls the pure function to return\n * an updated value. Or if no values have changed, returns cached value.\n *\n * @param pureFn\n * @param exp1\n * @param exp2\n * @param exp3\n * @returns Updated value\n */\n\n/**\n * If the value of any provided exp has changed, calls the pure function to return\n * an updated value. Or if no values have changed, returns cached value.\n *\n * @param pureFn\n * @param exp1\n * @param exp2\n * @param exp3\n * @param exp4\n * @returns Updated value\n */\n\n/**\n * If the value of any provided exp has changed, calls the pure function to return\n * an updated value. Or if no values have changed, returns cached value.\n *\n * @param pureFn\n * @param exp1\n * @param exp2\n * @param exp3\n * @param exp4\n * @param exp5\n * @returns Updated value\n */\n\n/**\n * If the value of any provided exp has changed, calls the pure function to return\n * an updated value. Or if no values have changed, returns cached value.\n *\n * @param pureFn\n * @param exp1\n * @param exp2\n * @param exp3\n * @param exp4\n * @param exp5\n * @param exp6\n * @returns Updated value\n */\n\n/**\n * If the value of any provided exp has changed, calls the pure function to return\n * an updated value. Or if no values have changed, returns cached value.\n *\n * @param pureFn\n * @param exp1\n * @param exp2\n * @param exp3\n * @param exp4\n * @param exp5\n * @param exp6\n * @param exp7\n * @returns Updated value\n */\n\n/**\n * If the value of any provided exp has changed, calls the pure function to return\n * an updated value. Or if no values have changed, returns cached value.\n *\n * @param pureFn\n * @param exp1\n * @param exp2\n * @param exp3\n * @param exp4\n * @param exp5\n * @param exp6\n * @param exp7\n * @param exp8\n * @returns Updated value\n */\n\n/**\n * pureFunction instruction that can support any number of bindings.\n *\n * If the value of any provided exp has changed, calls the pure function to return\n * an updated value. Or if no values have changed, returns cached value.\n *\n * @param pureFn A pure function that takes binding values and builds an object or array\n * containing those values.\n * @param exp An array of binding values\n * @returns Updated value\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Create a pipe.\n *\n * @param index Pipe index where the pipe will be stored.\n * @param pipeName The name of the pipe\n * @returns T the instance of the pipe.\n */\n\n/**\n * Invokes a pipe with 1 arguments.\n *\n * This instruction acts as a guard to {@link PipeTransform#transform} invoking\n * the pipe only when an input to the pipe changes.\n *\n * @param index Pipe index where the pipe was stored on creation.\n * @param v1 1st argument to {@link PipeTransform#transform}.\n */\n\n/**\n * Invokes a pipe with 2 arguments.\n *\n * This instruction acts as a guard to {@link PipeTransform#transform} invoking\n * the pipe only when an input to the pipe changes.\n *\n * @param index Pipe index where the pipe was stored on creation.\n * @param v1 1st argument to {@link PipeTransform#transform}.\n * @param v2 2nd argument to {@link PipeTransform#transform}.\n */\n\n/**\n * Invokes a pipe with 3 arguments.\n *\n * This instruction acts as a guard to {@link PipeTransform#transform} invoking\n * the pipe only when an input to the pipe changes.\n *\n * @param index Pipe index where the pipe was stored on creation.\n * @param v1 1st argument to {@link PipeTransform#transform}.\n * @param v2 2nd argument to {@link PipeTransform#transform}.\n * @param v3 4rd argument to {@link PipeTransform#transform}.\n */\n\n/**\n * Invokes a pipe with 4 arguments.\n *\n * This instruction acts as a guard to {@link PipeTransform#transform} invoking\n * the pipe only when an input to the pipe changes.\n *\n * @param index Pipe index where the pipe was stored on creation.\n * @param v1 1st argument to {@link PipeTransform#transform}.\n * @param v2 2nd argument to {@link PipeTransform#transform}.\n * @param v3 3rd argument to {@link PipeTransform#transform}.\n * @param v4 4th argument to {@link PipeTransform#transform}.\n */\n\n/**\n * Invokes a pipe with variable number of arguments.\n *\n * This instruction acts as a guard to {@link PipeTransform#transform} invoking\n * the pipe only when an input to the pipe changes.\n *\n * @param index Pipe index where the pipe was stored on creation.\n * @param values Array of arguments to pass to {@link PipeTransform#transform} method.\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n// Note: This hack is necessary so we don't erroneously get a circular dependency\n// failure based on types.\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n// Note: This hack is necessary so we don't erroneously get a circular dependency\n// failure based on types.\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n// Note: This hack is necessary so we don't erroneously get a circular dependency\n// failure based on types.\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar QueryList_ = /** @class */ (function () {\n    function QueryList_() {\n        this.dirty = true;\n        this.changes = new EventEmitter();\n        this._values = [];\n        /** @internal */\n        this._valuesTree = [];\n    }\n    Object.defineProperty(QueryList_.prototype, \"length\", {\n        get: function () { return this._values.length; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(QueryList_.prototype, \"first\", {\n        get: function () {\n            var values = this._values;\n            return values.length ? values[0] : null;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(QueryList_.prototype, \"last\", {\n        get: function () {\n            var values = this._values;\n            return values.length ? values[values.length - 1] : null;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * See\n     * [Array.map](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map)\n     */\n    /**\n       * See\n       * [Array.map](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map)\n       */\n    QueryList_.prototype.map = /**\n       * See\n       * [Array.map](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map)\n       */\n    function (fn) { return this._values.map(fn); };\n    /**\n     * See\n     * [Array.filter](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/filter)\n     */\n    /**\n       * See\n       * [Array.filter](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/filter)\n       */\n    QueryList_.prototype.filter = /**\n       * See\n       * [Array.filter](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/filter)\n       */\n    function (fn) {\n        return this._values.filter(fn);\n    };\n    /**\n     * See\n     * [Array.find](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/find)\n     */\n    /**\n       * See\n       * [Array.find](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/find)\n       */\n    QueryList_.prototype.find = /**\n       * See\n       * [Array.find](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/find)\n       */\n    function (fn) {\n        return this._values.find(fn);\n    };\n    /**\n     * See\n     * [Array.reduce](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/reduce)\n     */\n    /**\n       * See\n       * [Array.reduce](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/reduce)\n       */\n    QueryList_.prototype.reduce = /**\n       * See\n       * [Array.reduce](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/reduce)\n       */\n    function (fn, init) {\n        return this._values.reduce(fn, init);\n    };\n    /**\n     * See\n     * [Array.forEach](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/forEach)\n     */\n    /**\n       * See\n       * [Array.forEach](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/forEach)\n       */\n    QueryList_.prototype.forEach = /**\n       * See\n       * [Array.forEach](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/forEach)\n       */\n    function (fn) { this._values.forEach(fn); };\n    /**\n     * See\n     * [Array.some](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/some)\n     */\n    /**\n       * See\n       * [Array.some](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/some)\n       */\n    QueryList_.prototype.some = /**\n       * See\n       * [Array.some](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/some)\n       */\n    function (fn) {\n        return this._values.some(fn);\n    };\n    QueryList_.prototype.toArray = function () { return this._values.slice(0); };\n    QueryList_.prototype[getSymbolIterator()] = function () { return this._values[getSymbolIterator()](); };\n    QueryList_.prototype.toString = function () { return this._values.toString(); };\n    QueryList_.prototype.reset = function (res) {\n        this._values = flatten$3(res);\n        this.dirty = false;\n    };\n    QueryList_.prototype.notifyOnChanges = function () { this.changes.emit(this); };\n    QueryList_.prototype.setDirty = function () { this.dirty = true; };\n    QueryList_.prototype.destroy = function () {\n        this.changes.complete();\n        this.changes.unsubscribe();\n    };\n    return QueryList_;\n}());\n\n/**\n * Creates and returns a QueryList.\n *\n * @param memoryIndex The index in memory where the QueryList should be saved. If null,\n * this is is a content query and the QueryList will be saved later through directiveCreate.\n * @param predicate The type for which the query will search\n * @param descend Whether or not to descend into children\n * @param read What to save in the query\n * @returns QueryList<T>\n */\n\n/**\n * Refreshes a query by combining matches from all active views and removing matches from deleted\n * views.\n * Returns true if a query got dirty during change detection, false otherwise.\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * An `html` sanitizer which converts untrusted `html` **string** into trusted string by removing\n * dangerous content.\n *\n * This method parses the `html` and locates potentially dangerous content (such as urls and\n * javascript) and removes it.\n *\n * It is possible to mark a string as trusted by calling {@link bypassSanitizationTrustHtml}.\n *\n * @param unsafeHtml untrusted `html`, typically from the user.\n * @returns `html` string which is safe to display to user, because all of the dangerous javascript\n * and urls have been removed.\n */\n\n/**\n * A `style` sanitizer which converts untrusted `style` **string** into trusted string by removing\n * dangerous content.\n *\n * This method parses the `style` and locates potentially dangerous content (such as urls and\n * javascript) and removes it.\n *\n * It is possible to mark a string as trusted by calling {@link bypassSanitizationTrustStyle}.\n *\n * @param unsafeStyle untrusted `style`, typically from the user.\n * @returns `style` string which is safe to bind to the `style` properties, because all of the\n * dangerous javascript and urls have been removed.\n */\n\n/**\n * A `url` sanitizer which converts untrusted `url` **string** into trusted string by removing\n * dangerous\n * content.\n *\n * This method parses the `url` and locates potentially dangerous content (such as javascript) and\n * removes it.\n *\n * It is possible to mark a string as trusted by calling {@link bypassSanitizationTrustUrl}.\n *\n * @param unsafeUrl untrusted `url`, typically from the user.\n * @returns `url` string which is safe to bind to the `src` properties such as `<img src>`, because\n * all of the dangerous javascript has been removed.\n */\n\n/**\n * A `url` sanitizer which only lets trusted `url`s through.\n *\n * This passes only `url`s marked trusted by calling {@link bypassSanitizationTrustResourceUrl}.\n *\n * @param unsafeResourceUrl untrusted `url`, typically from the user.\n * @returns `url` string which is safe to bind to the `src` properties such as `<img src>`, because\n * only trusted `url`s have been allowed to pass.\n */\n\n/**\n * A `script` sanitizer which only lets trusted javascript through.\n *\n * This passes only `script`s marked trusted by calling {@link bypassSanitizationTrustScript}.\n *\n * @param unsafeScript untrusted `script`, typically from the user.\n * @returns `url` string which is safe to bind to the `<script>` element such as `<img src>`,\n * because only trusted `scripts`s have been allowed to pass.\n */\n\n/**\n * Mark `html` string as trusted.\n *\n * This function wraps the trusted string in `String` and brands it in a way which makes it\n * recognizable to {@link htmlSanitizer} to be trusted implicitly.\n *\n * @param trustedHtml `html` string which needs to be implicitly trusted.\n * @returns a `html` `String` which has been branded to be implicitly trusted.\n */\n\n/**\n * Mark `style` string as trusted.\n *\n * This function wraps the trusted string in `String` and brands it in a way which makes it\n * recognizable to {@link styleSanitizer} to be trusted implicitly.\n *\n * @param trustedStyle `style` string which needs to be implicitly trusted.\n * @returns a `style` `String` which has been branded to be implicitly trusted.\n */\n\n/**\n * Mark `script` string as trusted.\n *\n * This function wraps the trusted string in `String` and brands it in a way which makes it\n * recognizable to {@link scriptSanitizer} to be trusted implicitly.\n *\n * @param trustedScript `script` string which needs to be implicitly trusted.\n * @returns a `script` `String` which has been branded to be implicitly trusted.\n */\n\n/**\n * Mark `url` string as trusted.\n *\n * This function wraps the trusted string in `String` and brands it in a way which makes it\n * recognizable to {@link urlSanitizer} to be trusted implicitly.\n *\n * @param trustedUrl `url` string which needs to be implicitly trusted.\n * @returns a `url` `String` which has been branded to be implicitly trusted.\n */\n\n/**\n * Mark `url` string as trusted.\n *\n * This function wraps the trusted string in `String` and brands it in a way which makes it\n * recognizable to {@link resourceUrlSanitizer} to be trusted implicitly.\n *\n * @param trustedResourceUrl `url` string which needs to be implicitly trusted.\n * @returns a `url` `String` which has been branded to be implicitly trusted.\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n// clang-format on\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n// This file only reexports content of the `src` folder. Keep it that way.\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar ReflectorModuleModuleResolutionHost = /** @class */ (function () {\n    function ReflectorModuleModuleResolutionHost(host, getProgram) {\n        var _this = this;\n        this.host = host;\n        this.getProgram = getProgram;\n        // Note: verboseInvalidExpressions is important so that\n        // the collector will collect errors instead of throwing\n        this.metadataCollector = new MetadataCollector({ verboseInvalidExpression: true });\n        if (host.directoryExists)\n            this.directoryExists = function (directoryName) { return _this.host.directoryExists(directoryName); };\n    }\n    ReflectorModuleModuleResolutionHost.prototype.fileExists = function (fileName) { return !!this.host.getScriptSnapshot(fileName); };\n    ReflectorModuleModuleResolutionHost.prototype.readFile = function (fileName) {\n        var snapshot = this.host.getScriptSnapshot(fileName);\n        if (snapshot) {\n            return snapshot.getText(0, snapshot.getLength());\n        }\n        // Typescript readFile() declaration should be `readFile(fileName: string): string | undefined\n        return undefined;\n    };\n    ReflectorModuleModuleResolutionHost.prototype.getSourceFileMetadata = function (fileName) {\n        var sf = this.getProgram().getSourceFile(fileName);\n        return sf ? this.metadataCollector.getMetadata(sf) : undefined;\n    };\n    ReflectorModuleModuleResolutionHost.prototype.cacheMetadata = function (fileName) {\n        // Don't cache the metadata for .ts files as they might change in the editor!\n        return fileName.endsWith('.d.ts');\n    };\n    return ReflectorModuleModuleResolutionHost;\n}());\nvar ReflectorHost = /** @class */ (function () {\n    function ReflectorHost(getProgram, serviceHost, options) {\n        this.options = options;\n        this.metadataReaderCache = createMetadataReaderCache();\n        this.hostAdapter = new ReflectorModuleModuleResolutionHost(serviceHost, getProgram);\n        this.moduleResolutionCache =\n            ts.createModuleResolutionCache(serviceHost.getCurrentDirectory(), function (s) { return s; });\n    }\n    ReflectorHost.prototype.getMetadataFor = function (modulePath) {\n        return readMetadata(modulePath, this.hostAdapter, this.metadataReaderCache);\n    };\n    ReflectorHost.prototype.moduleNameToFileName = function (moduleName, containingFile) {\n        if (!containingFile) {\n            if (moduleName.indexOf('.') === 0) {\n                throw new Error('Resolution of relative paths requires a containing file.');\n            }\n            // Any containing file gives the same result for absolute imports\n            containingFile = path.join(this.options.basePath, 'index.ts').replace(/\\\\/g, '/');\n        }\n        var resolved = ts.resolveModuleName(moduleName, containingFile, this.options, this.hostAdapter)\n            .resolvedModule;\n        return resolved ? resolved.resolvedFileName : null;\n    };\n    ReflectorHost.prototype.getOutputName = function (filePath) { return filePath; };\n    return ReflectorHost;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Create a `LanguageServiceHost`\n */\nfunction createLanguageServiceFromTypescript(host, service) {\n    var ngHost = new TypeScriptServiceHost(host, service);\n    var ngServer = createLanguageService(ngHost);\n    ngHost.setSite(ngServer);\n    return ngServer;\n}\n/**\n * The language service never needs the normalized versions of the metadata. To avoid parsing\n * the content and resolving references, return an empty file. This also allows normalizing\n * template that are syntatically incorrect which is required to provide completions in\n * syntactically incorrect templates.\n */\nvar DummyHtmlParser = /** @class */ (function (_super) {\n    __extends(DummyHtmlParser, _super);\n    function DummyHtmlParser() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    DummyHtmlParser.prototype.parse = function (source, url, parseExpansionForms, interpolationConfig) {\n        if (parseExpansionForms === void 0) { parseExpansionForms = false; }\n        if (interpolationConfig === void 0) { interpolationConfig = DEFAULT_INTERPOLATION_CONFIG; }\n        return new ParseTreeResult([], []);\n    };\n    return DummyHtmlParser;\n}(HtmlParser));\n/**\n * Avoid loading resources in the language servcie by using a dummy loader.\n */\nvar DummyResourceLoader = /** @class */ (function (_super) {\n    __extends(DummyResourceLoader, _super);\n    function DummyResourceLoader() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    DummyResourceLoader.prototype.get = function (url) { return Promise.resolve(''); };\n    return DummyResourceLoader;\n}(ResourceLoader));\n/**\n * An implementation of a `LanguageServiceHost` for a TypeScript project.\n *\n * The `TypeScriptServiceHost` implements the Angular `LanguageServiceHost` using\n * the TypeScript language services.\n *\n * @experimental\n */\nvar TypeScriptServiceHost = /** @class */ (function () {\n    function TypeScriptServiceHost(host, tsService) {\n        this.host = host;\n        this.tsService = tsService;\n        this._staticSymbolCache = new StaticSymbolCache();\n        this._typeCache = [];\n        this.modulesOutOfDate = true;\n        this.fileVersions = new Map();\n    }\n    TypeScriptServiceHost.prototype.setSite = function (service) { this.service = service; };\n    Object.defineProperty(TypeScriptServiceHost.prototype, \"resolver\", {\n        /**\n         * Angular LanguageServiceHost implementation\n         */\n        get: function () {\n            var _this = this;\n            this.validate();\n            var result = this._resolver;\n            if (!result) {\n                var moduleResolver = new NgModuleResolver(this.reflector);\n                var directiveResolver = new DirectiveResolver(this.reflector);\n                var pipeResolver = new PipeResolver(this.reflector);\n                var elementSchemaRegistry = new DomElementSchemaRegistry();\n                var resourceLoader = new DummyResourceLoader();\n                var urlResolver = createOfflineCompileUrlResolver();\n                var htmlParser = new DummyHtmlParser();\n                // This tracks the CompileConfig in codegen.ts. Currently these options\n                // are hard-coded.\n                var config = new CompilerConfig({ defaultEncapsulation: ViewEncapsulation$1.Emulated, useJit: false });\n                var directiveNormalizer = new DirectiveNormalizer(resourceLoader, urlResolver, htmlParser, config);\n                result = this._resolver = new CompileMetadataResolver(config, htmlParser, moduleResolver, directiveResolver, pipeResolver, new JitSummaryResolver(), elementSchemaRegistry, directiveNormalizer, new Console(), this._staticSymbolCache, this.reflector, function (error, type) { return _this.collectError(error, type && type.filePath); });\n            }\n            return result;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    TypeScriptServiceHost.prototype.getTemplateReferences = function () {\n        this.ensureTemplateMap();\n        return this.templateReferences || [];\n    };\n    TypeScriptServiceHost.prototype.getTemplateAt = function (fileName, position) {\n        var sourceFile = this.getSourceFile(fileName);\n        if (sourceFile) {\n            this.context = sourceFile.fileName;\n            var node = this.findNode(sourceFile, position);\n            if (node) {\n                return this.getSourceFromNode(fileName, this.host.getScriptVersion(sourceFile.fileName), node);\n            }\n        }\n        else {\n            this.ensureTemplateMap();\n            // TODO: Cannocalize the file?\n            var componentType = this.fileToComponent.get(fileName);\n            if (componentType) {\n                return this.getSourceFromType(fileName, this.host.getScriptVersion(fileName), componentType);\n            }\n        }\n        return undefined;\n    };\n    TypeScriptServiceHost.prototype.getAnalyzedModules = function () {\n        this.updateAnalyzedModules();\n        return this.ensureAnalyzedModules();\n    };\n    TypeScriptServiceHost.prototype.ensureAnalyzedModules = function () {\n        var analyzedModules = this.analyzedModules;\n        if (!analyzedModules) {\n            if (this.host.getScriptFileNames().length === 0) {\n                analyzedModules = {\n                    files: [],\n                    ngModuleByPipeOrDirective: new Map(),\n                    ngModules: [],\n                };\n            }\n            else {\n                var analyzeHost = { isSourceFile: function (filePath) { return true; } };\n                var programFiles = this.program.getSourceFiles().map(function (sf) { return sf.fileName; });\n                analyzedModules =\n                    analyzeNgModules(programFiles, analyzeHost, this.staticSymbolResolver, this.resolver);\n            }\n            this.analyzedModules = analyzedModules;\n        }\n        return analyzedModules;\n    };\n    TypeScriptServiceHost.prototype.getTemplates = function (fileName) {\n        var _this = this;\n        this.ensureTemplateMap();\n        var componentType = this.fileToComponent.get(fileName);\n        if (componentType) {\n            var templateSource = this.getTemplateAt(fileName, 0);\n            if (templateSource) {\n                return [templateSource];\n            }\n        }\n        else {\n            var version_1 = this.host.getScriptVersion(fileName);\n            var result_1 = [];\n            // Find each template string in the file\n            var visit_1 = function (child) {\n                var templateSource = _this.getSourceFromNode(fileName, version_1, child);\n                if (templateSource) {\n                    result_1.push(templateSource);\n                }\n                else {\n                    ts.forEachChild(child, visit_1);\n                }\n            };\n            var sourceFile = this.getSourceFile(fileName);\n            if (sourceFile) {\n                this.context = sourceFile.path || sourceFile.fileName;\n                ts.forEachChild(sourceFile, visit_1);\n            }\n            return result_1.length ? result_1 : undefined;\n        }\n    };\n    TypeScriptServiceHost.prototype.getDeclarations = function (fileName) {\n        var _this = this;\n        var result = [];\n        var sourceFile = this.getSourceFile(fileName);\n        if (sourceFile) {\n            var visit_2 = function (child) {\n                var declaration = _this.getDeclarationFromNode(sourceFile, child);\n                if (declaration) {\n                    result.push(declaration);\n                }\n                else {\n                    ts.forEachChild(child, visit_2);\n                }\n            };\n            ts.forEachChild(sourceFile, visit_2);\n        }\n        return result;\n    };\n    TypeScriptServiceHost.prototype.getSourceFile = function (fileName) {\n        return this.tsService.getProgram().getSourceFile(fileName);\n    };\n    TypeScriptServiceHost.prototype.updateAnalyzedModules = function () {\n        this.validate();\n        if (this.modulesOutOfDate) {\n            this.analyzedModules = null;\n            this._reflector = null;\n            this.templateReferences = null;\n            this.fileToComponent = null;\n            this.ensureAnalyzedModules();\n            this.modulesOutOfDate = false;\n        }\n    };\n    Object.defineProperty(TypeScriptServiceHost.prototype, \"program\", {\n        get: function () { return this.tsService.getProgram(); },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(TypeScriptServiceHost.prototype, \"checker\", {\n        get: function () {\n            var checker = this._checker;\n            if (!checker) {\n                checker = this._checker = this.program.getTypeChecker();\n            }\n            return checker;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    TypeScriptServiceHost.prototype.validate = function () {\n        var _this = this;\n        var program = this.program;\n        if (this.lastProgram !== program) {\n            // Invalidate file that have changed in the static symbol resolver\n            var invalidateFile = function (fileName) {\n                return _this._staticSymbolResolver.invalidateFile(fileName);\n            };\n            this.clearCaches();\n            var seen_1 = new Set();\n            try {\n                for (var _a = __values(this.program.getSourceFiles()), _b = _a.next(); !_b.done; _b = _a.next()) {\n                    var sourceFile = _b.value;\n                    var fileName = sourceFile.fileName;\n                    seen_1.add(fileName);\n                    var version$$1 = this.host.getScriptVersion(fileName);\n                    var lastVersion = this.fileVersions.get(fileName);\n                    if (version$$1 != lastVersion) {\n                        this.fileVersions.set(fileName, version$$1);\n                        if (this._staticSymbolResolver) {\n                            invalidateFile(fileName);\n                        }\n                    }\n                }\n            }\n            catch (e_1_1) { e_1 = { error: e_1_1 }; }\n            finally {\n                try {\n                    if (_b && !_b.done && (_c = _a.return)) _c.call(_a);\n                }\n                finally { if (e_1) throw e_1.error; }\n            }\n            // Remove file versions that are no longer in the file and invalidate them.\n            var missing = Array.from(this.fileVersions.keys()).filter(function (f) { return !seen_1.has(f); });\n            missing.forEach(function (f) { return _this.fileVersions.delete(f); });\n            if (this._staticSymbolResolver) {\n                missing.forEach(invalidateFile);\n            }\n            this.lastProgram = program;\n        }\n        var e_1, _c;\n    };\n    TypeScriptServiceHost.prototype.clearCaches = function () {\n        this._checker = null;\n        this._typeCache = [];\n        this._resolver = null;\n        this.collectedErrors = null;\n        this.modulesOutOfDate = true;\n    };\n    TypeScriptServiceHost.prototype.ensureTemplateMap = function () {\n        if (!this.fileToComponent || !this.templateReferences) {\n            var fileToComponent = new Map();\n            var templateReference = [];\n            var ngModuleSummary = this.getAnalyzedModules();\n            var urlResolver = createOfflineCompileUrlResolver();\n            try {\n                for (var _a = __values(ngModuleSummary.ngModules), _b = _a.next(); !_b.done; _b = _a.next()) {\n                    var module_1 = _b.value;\n                    try {\n                        for (var _c = __values(module_1.declaredDirectives), _d = _c.next(); !_d.done; _d = _c.next()) {\n                            var directive = _d.value;\n                            var metadata = this.resolver.getNonNormalizedDirectiveMetadata(directive.reference).metadata;\n                            if (metadata.isComponent && metadata.template && metadata.template.templateUrl) {\n                                var templateName = urlResolver.resolve(this.reflector.componentModuleUrl(directive.reference), metadata.template.templateUrl);\n                                fileToComponent.set(templateName, directive.reference);\n                                templateReference.push(templateName);\n                            }\n                        }\n                    }\n                    catch (e_2_1) { e_2 = { error: e_2_1 }; }\n                    finally {\n                        try {\n                            if (_d && !_d.done && (_e = _c.return)) _e.call(_c);\n                        }\n                        finally { if (e_2) throw e_2.error; }\n                    }\n                }\n            }\n            catch (e_3_1) { e_3 = { error: e_3_1 }; }\n            finally {\n                try {\n                    if (_b && !_b.done && (_f = _a.return)) _f.call(_a);\n                }\n                finally { if (e_3) throw e_3.error; }\n            }\n            this.fileToComponent = fileToComponent;\n            this.templateReferences = templateReference;\n        }\n        var e_3, _f, e_2, _e;\n    };\n    TypeScriptServiceHost.prototype.getSourceFromDeclaration = function (fileName, version$$1, source, span, type, declaration, node, sourceFile) {\n        var queryCache = undefined;\n        var t = this;\n        if (declaration) {\n            return {\n                version: version$$1,\n                source: source,\n                span: span,\n                type: type,\n                get members() {\n                    return getClassMembersFromDeclaration(t.program, t.checker, sourceFile, declaration);\n                },\n                get query() {\n                    if (!queryCache) {\n                        var pipes_1 = t.service.getPipesAt(fileName, node.getStart());\n                        queryCache = getSymbolQuery(t.program, t.checker, sourceFile, function () { return getPipesTable(sourceFile, t.program, t.checker, pipes_1); });\n                    }\n                    return queryCache;\n                }\n            };\n        }\n    };\n    TypeScriptServiceHost.prototype.getSourceFromNode = function (fileName, version$$1, node) {\n        var result = undefined;\n        switch (node.kind) {\n            case ts.SyntaxKind.NoSubstitutionTemplateLiteral:\n            case ts.SyntaxKind.StringLiteral:\n                var _a = __read(this.getTemplateClassDeclFromNode(node), 2), declaration = _a[0], decorator = _a[1];\n                if (declaration && declaration.name) {\n                    var sourceFile = this.getSourceFile(fileName);\n                    if (sourceFile) {\n                        return this.getSourceFromDeclaration(fileName, version$$1, this.stringOf(node) || '', shrink$1(spanOf$4(node)), this.reflector.getStaticSymbol(sourceFile.fileName, declaration.name.text), declaration, node, sourceFile);\n                    }\n                }\n                break;\n        }\n        return result;\n    };\n    TypeScriptServiceHost.prototype.getSourceFromType = function (fileName, version$$1, type) {\n        var result = undefined;\n        var declaration = this.getTemplateClassFromStaticSymbol(type);\n        if (declaration) {\n            var snapshot = this.host.getScriptSnapshot(fileName);\n            if (snapshot) {\n                var source = snapshot.getText(0, snapshot.getLength());\n                result = this.getSourceFromDeclaration(fileName, version$$1, source, { start: 0, end: source.length }, type, declaration, declaration, declaration.getSourceFile());\n            }\n        }\n        return result;\n    };\n    Object.defineProperty(TypeScriptServiceHost.prototype, \"reflectorHost\", {\n        get: function () {\n            var _this = this;\n            var result = this._reflectorHost;\n            if (!result) {\n                if (!this.context) {\n                    // Make up a context by finding the first script and using that as the base dir.\n                    var scriptFileNames = this.host.getScriptFileNames();\n                    if (0 === scriptFileNames.length) {\n                        throw new Error('Internal error: no script file names found');\n                    }\n                    this.context = scriptFileNames[0];\n                }\n                // Use the file context's directory as the base directory.\n                // The host's getCurrentDirectory() is not reliable as it is always \"\" in\n                // tsserver. We don't need the exact base directory, just one that contains\n                // a source file.\n                var source = this.tsService.getProgram().getSourceFile(this.context);\n                if (!source) {\n                    throw new Error('Internal error: no context could be determined');\n                }\n                var tsConfigPath = findTsConfig$1(source.fileName);\n                var basePath = path.dirname(tsConfigPath || this.context);\n                var options = { basePath: basePath, genDir: basePath };\n                var compilerOptions = this.host.getCompilationSettings();\n                if (compilerOptions && compilerOptions.baseUrl) {\n                    options.baseUrl = compilerOptions.baseUrl;\n                }\n                if (compilerOptions && compilerOptions.paths) {\n                    options.paths = compilerOptions.paths;\n                }\n                result = this._reflectorHost =\n                    new ReflectorHost(function () { return _this.tsService.getProgram(); }, this.host, options);\n            }\n            return result;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    TypeScriptServiceHost.prototype.collectError = function (error, filePath) {\n        if (filePath) {\n            var errorMap = this.collectedErrors;\n            if (!errorMap || !this.collectedErrors) {\n                errorMap = this.collectedErrors = new Map();\n            }\n            var errors = errorMap.get(filePath);\n            if (!errors) {\n                errors = [];\n                this.collectedErrors.set(filePath, errors);\n            }\n            errors.push(error);\n        }\n    };\n    Object.defineProperty(TypeScriptServiceHost.prototype, \"staticSymbolResolver\", {\n        get: function () {\n            var _this = this;\n            var result = this._staticSymbolResolver;\n            if (!result) {\n                this._summaryResolver = new AotSummaryResolver({\n                    loadSummary: function (filePath) { return null; },\n                    isSourceFile: function (sourceFilePath) { return true; },\n                    toSummaryFileName: function (sourceFilePath) { return sourceFilePath; },\n                    fromSummaryFileName: function (filePath) { return filePath; },\n                }, this._staticSymbolCache);\n                result = this._staticSymbolResolver = new StaticSymbolResolver(this.reflectorHost, this._staticSymbolCache, this._summaryResolver, function (e, filePath) { return _this.collectError(e, filePath); });\n            }\n            return result;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(TypeScriptServiceHost.prototype, \"reflector\", {\n        get: function () {\n            var _this = this;\n            var result = this._reflector;\n            if (!result) {\n                var ssr = this.staticSymbolResolver;\n                result = this._reflector = new StaticReflector(this._summaryResolver, ssr, [], [], function (e, filePath) { return _this.collectError(e, filePath); });\n            }\n            return result;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    TypeScriptServiceHost.prototype.getTemplateClassFromStaticSymbol = function (type) {\n        var source = this.getSourceFile(type.filePath);\n        if (source) {\n            var declarationNode = ts.forEachChild(source, function (child) {\n                if (child.kind === ts.SyntaxKind.ClassDeclaration) {\n                    var classDeclaration = child;\n                    if (classDeclaration.name != null && classDeclaration.name.text === type.name) {\n                        return classDeclaration;\n                    }\n                }\n            });\n            return declarationNode;\n        }\n        return undefined;\n    };\n    /**\n     * Given a template string node, see if it is an Angular template string, and if so return the\n     * containing class.\n     */\n    TypeScriptServiceHost.prototype.getTemplateClassDeclFromNode = function (currentToken) {\n        // Verify we are in a 'template' property assignment, in an object literal, which is an call\n        // arg, in a decorator\n        var parentNode = currentToken.parent; // PropertyAssignment\n        if (!parentNode) {\n            return TypeScriptServiceHost.missingTemplate;\n        }\n        if (parentNode.kind !== ts.SyntaxKind.PropertyAssignment) {\n            return TypeScriptServiceHost.missingTemplate;\n        }\n        else {\n            // TODO: Is this different for a literal, i.e. a quoted property name like \"template\"?\n            if (parentNode.name.text !== 'template') {\n                return TypeScriptServiceHost.missingTemplate;\n            }\n        }\n        parentNode = parentNode.parent; // ObjectLiteralExpression\n        if (!parentNode || parentNode.kind !== ts.SyntaxKind.ObjectLiteralExpression) {\n            return TypeScriptServiceHost.missingTemplate;\n        }\n        parentNode = parentNode.parent; // CallExpression\n        if (!parentNode || parentNode.kind !== ts.SyntaxKind.CallExpression) {\n            return TypeScriptServiceHost.missingTemplate;\n        }\n        var callTarget = parentNode.expression;\n        var decorator = parentNode.parent; // Decorator\n        if (!decorator || decorator.kind !== ts.SyntaxKind.Decorator) {\n            return TypeScriptServiceHost.missingTemplate;\n        }\n        var declaration = decorator.parent; // ClassDeclaration\n        if (!declaration || declaration.kind !== ts.SyntaxKind.ClassDeclaration) {\n            return TypeScriptServiceHost.missingTemplate;\n        }\n        return [declaration, callTarget];\n    };\n    TypeScriptServiceHost.prototype.getCollectedErrors = function (defaultSpan, sourceFile) {\n        var errors = (this.collectedErrors && this.collectedErrors.get(sourceFile.fileName));\n        return (errors && errors.map(function (e) {\n            var line = e.line || (e.position && e.position.line);\n            var column = e.column || (e.position && e.position.column);\n            var span = spanAt$1(sourceFile, line, column) || defaultSpan;\n            if (isFormattedError(e)) {\n                return errorToDiagnosticWithChain(e, span);\n            }\n            return { message: e.message, span: span };\n        })) ||\n            [];\n    };\n    TypeScriptServiceHost.prototype.getDeclarationFromNode = function (sourceFile, node) {\n        if (node.kind == ts.SyntaxKind.ClassDeclaration && node.decorators &&\n            node.name) {\n            try {\n                for (var _a = __values(node.decorators), _b = _a.next(); !_b.done; _b = _a.next()) {\n                    var decorator = _b.value;\n                    if (decorator.expression && decorator.expression.kind == ts.SyntaxKind.CallExpression) {\n                        var classDeclaration = node;\n                        if (classDeclaration.name) {\n                            var call = decorator.expression;\n                            var target = call.expression;\n                            var type = this.checker.getTypeAtLocation(target);\n                            if (type) {\n                                var staticSymbol = this.reflector.getStaticSymbol(sourceFile.fileName, classDeclaration.name.text);\n                                try {\n                                    if (this.resolver.isDirective(staticSymbol)) {\n                                        var metadata = this.resolver.getNonNormalizedDirectiveMetadata(staticSymbol).metadata;\n                                        var declarationSpan = spanOf$4(target);\n                                        return {\n                                            type: staticSymbol,\n                                            declarationSpan: declarationSpan,\n                                            metadata: metadata,\n                                            errors: this.getCollectedErrors(declarationSpan, sourceFile)\n                                        };\n                                    }\n                                }\n                                catch (e) {\n                                    if (e.message) {\n                                        this.collectError(e, sourceFile.fileName);\n                                        var declarationSpan = spanOf$4(target);\n                                        return {\n                                            type: staticSymbol,\n                                            declarationSpan: declarationSpan,\n                                            errors: this.getCollectedErrors(declarationSpan, sourceFile)\n                                        };\n                                    }\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n            catch (e_4_1) { e_4 = { error: e_4_1 }; }\n            finally {\n                try {\n                    if (_b && !_b.done && (_c = _a.return)) _c.call(_a);\n                }\n                finally { if (e_4) throw e_4.error; }\n            }\n        }\n        var e_4, _c;\n    };\n    TypeScriptServiceHost.prototype.stringOf = function (node) {\n        switch (node.kind) {\n            case ts.SyntaxKind.NoSubstitutionTemplateLiteral:\n                return node.text;\n            case ts.SyntaxKind.StringLiteral:\n                return node.text;\n        }\n    };\n    TypeScriptServiceHost.prototype.findNode = function (sourceFile, position) {\n        function find(node) {\n            if (position >= node.getStart() && position < node.getEnd()) {\n                return ts.forEachChild(node, find) || node;\n            }\n        }\n        return find(sourceFile);\n    };\n    TypeScriptServiceHost.missingTemplate = [undefined, undefined];\n    return TypeScriptServiceHost;\n}());\nfunction findTsConfig$1(fileName) {\n    var dir = path.dirname(fileName);\n    while (fs.existsSync(dir)) {\n        var candidate = path.join(dir, 'tsconfig.json');\n        if (fs.existsSync(candidate))\n            return candidate;\n        var parentDir = path.dirname(dir);\n        if (parentDir === dir)\n            break;\n        dir = parentDir;\n    }\n}\nfunction spanOf$4(node) {\n    return { start: node.getStart(), end: node.getEnd() };\n}\nfunction shrink$1(span, offset) {\n    if (offset == null)\n        offset = 1;\n    return { start: span.start + offset, end: span.end - offset };\n}\nfunction spanAt$1(sourceFile, line, column) {\n    if (line != null && column != null) {\n        var position_1 = ts.getPositionOfLineAndCharacter(sourceFile, line, column);\n        var findChild = function findChild(node) {\n            if (node.kind > ts.SyntaxKind.LastToken && node.pos <= position_1 && node.end > position_1) {\n                var betterNode = ts.forEachChild(node, findChild);\n                return betterNode || node;\n            }\n        };\n        var node = ts.forEachChild(sourceFile, findChild);\n        if (node) {\n            return { start: node.getStart(), end: node.getEnd() };\n        }\n    }\n}\nfunction convertChain(chain) {\n    return { message: chain.message, next: chain.next ? convertChain(chain.next) : undefined };\n}\nfunction errorToDiagnosticWithChain(error, span) {\n    return { message: error.chain ? convertChain(error.chain) : error.message, span: span };\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar projectHostMap = new WeakMap();\nfunction getExternalFiles(project) {\n    var host = projectHostMap.get(project);\n    if (host) {\n        return host.getTemplateReferences();\n    }\n}\nfunction create(info /* ts.server.PluginCreateInfo */) {\n    // Create the proxy\n    var proxy = Object.create(null);\n    var oldLS = info.languageService;\n    function tryCall(fileName, callback) {\n        if (fileName && !oldLS.getProgram().getSourceFile(fileName)) {\n            return undefined;\n        }\n        try {\n            return callback();\n        }\n        catch (e) {\n            return undefined;\n        }\n    }\n    function tryFilenameCall(m) {\n        return function (fileName) { return tryCall(fileName, function () { return (m.call(ls, fileName)); }); };\n    }\n    function tryFilenameOneCall(m) {\n        return function (fileName, p) { return tryCall(fileName, function () { return (m.call(ls, fileName, p)); }); };\n    }\n    function tryFilenameTwoCall(m) {\n        return function (fileName, p1, p2) { return tryCall(fileName, function () { return (m.call(ls, fileName, p1, p2)); }); };\n    }\n    function tryFilenameThreeCall(m) {\n        return function (fileName, p1, p2, p3) { return tryCall(fileName, function () { return (m.call(ls, fileName, p1, p2, p3)); }); };\n    }\n    function tryFilenameFourCall(m) {\n        return function (fileName, p1, p2, p3, p4) {\n            return tryCall(fileName, function () { return (m.call(ls, fileName, p1, p2, p3, p4)); });\n        };\n    }\n    function typescriptOnly(ls) {\n        return {\n            cleanupSemanticCache: function () { return ls.cleanupSemanticCache(); },\n            getSyntacticDiagnostics: tryFilenameCall(ls.getSyntacticDiagnostics),\n            getSemanticDiagnostics: tryFilenameCall(ls.getSemanticDiagnostics),\n            getCompilerOptionsDiagnostics: function () { return ls.getCompilerOptionsDiagnostics(); },\n            getSyntacticClassifications: tryFilenameOneCall(ls.getSemanticClassifications),\n            getSemanticClassifications: tryFilenameOneCall(ls.getSemanticClassifications),\n            getEncodedSyntacticClassifications: tryFilenameOneCall(ls.getEncodedSyntacticClassifications),\n            getEncodedSemanticClassifications: tryFilenameOneCall(ls.getEncodedSemanticClassifications),\n            getCompletionsAtPosition: tryFilenameTwoCall(ls.getCompletionsAtPosition),\n            getCompletionEntryDetails: tryFilenameFourCall(ls.getCompletionEntryDetails),\n            getCompletionEntrySymbol: tryFilenameThreeCall(ls.getCompletionEntrySymbol),\n            getQuickInfoAtPosition: tryFilenameOneCall(ls.getQuickInfoAtPosition),\n            getNameOrDottedNameSpan: tryFilenameTwoCall(ls.getNameOrDottedNameSpan),\n            getBreakpointStatementAtPosition: tryFilenameOneCall(ls.getBreakpointStatementAtPosition),\n            getSignatureHelpItems: tryFilenameOneCall(ls.getSignatureHelpItems),\n            getRenameInfo: tryFilenameOneCall(ls.getRenameInfo),\n            findRenameLocations: tryFilenameThreeCall(ls.findRenameLocations),\n            getDefinitionAtPosition: tryFilenameOneCall(ls.getDefinitionAtPosition),\n            getTypeDefinitionAtPosition: tryFilenameOneCall(ls.getTypeDefinitionAtPosition),\n            getImplementationAtPosition: tryFilenameOneCall(ls.getImplementationAtPosition),\n            getReferencesAtPosition: tryFilenameOneCall(ls.getReferencesAtPosition),\n            findReferences: tryFilenameOneCall(ls.findReferences),\n            getDocumentHighlights: tryFilenameTwoCall(ls.getDocumentHighlights),\n            /** @deprecated */\n            getOccurrencesAtPosition: tryFilenameOneCall(ls.getOccurrencesAtPosition),\n            getNavigateToItems: function (searchValue, maxResultCount, fileName, excludeDtsFiles) { return tryCall(fileName, function () { return ls.getNavigateToItems(searchValue, maxResultCount, fileName, excludeDtsFiles); }); },\n            getNavigationBarItems: tryFilenameCall(ls.getNavigationBarItems),\n            getNavigationTree: tryFilenameCall(ls.getNavigationTree),\n            getOutliningSpans: tryFilenameCall(ls.getOutliningSpans),\n            getTodoComments: tryFilenameOneCall(ls.getTodoComments),\n            getBraceMatchingAtPosition: tryFilenameOneCall(ls.getBraceMatchingAtPosition),\n            getIndentationAtPosition: tryFilenameTwoCall(ls.getIndentationAtPosition),\n            getFormattingEditsForRange: tryFilenameThreeCall(ls.getFormattingEditsForRange),\n            getFormattingEditsForDocument: tryFilenameOneCall(ls.getFormattingEditsForDocument),\n            getFormattingEditsAfterKeystroke: tryFilenameThreeCall(ls.getFormattingEditsAfterKeystroke),\n            getDocCommentTemplateAtPosition: tryFilenameOneCall(ls.getDocCommentTemplateAtPosition),\n            isValidBraceCompletionAtPosition: tryFilenameTwoCall(ls.isValidBraceCompletionAtPosition),\n            getSpanOfEnclosingComment: tryFilenameTwoCall(ls.getSpanOfEnclosingComment),\n            getCodeFixesAtPosition: tryFilenameFourCall(ls.getCodeFixesAtPosition),\n            applyCodeActionCommand: (function (action) { return tryCall(undefined, function () { return ls.applyCodeActionCommand(action); }); }),\n            getEmitOutput: tryFilenameCall(ls.getEmitOutput),\n            getProgram: function () { return ls.getProgram(); },\n            dispose: function () { return ls.dispose(); },\n            getApplicableRefactors: tryFilenameOneCall(ls.getApplicableRefactors),\n            getEditsForRefactor: tryFilenameFourCall(ls.getEditsForRefactor),\n            getDefinitionAndBoundSpan: tryFilenameOneCall(ls.getDefinitionAndBoundSpan),\n            getCombinedCodeFix: function (scope, fixId, formatOptions) {\n                return tryCall(undefined, function () { return ls.getCombinedCodeFix(scope, fixId, formatOptions); });\n            }\n        };\n    }\n    oldLS = typescriptOnly(oldLS);\n    var _loop_1 = function (k) {\n        proxy[k] = function () { return oldLS[k].apply(oldLS, arguments); };\n    };\n    for (var k in oldLS) {\n        _loop_1(k);\n    }\n    function completionToEntry(c) {\n        return {\n            // TODO: remove any and fix type error.\n            kind: c.kind,\n            name: c.name,\n            sortText: c.sort,\n            kindModifiers: ''\n        };\n    }\n    function diagnosticChainToDiagnosticChain(chain) {\n        return {\n            messageText: chain.message,\n            category: ts.DiagnosticCategory.Error,\n            code: 0,\n            next: chain.next ? diagnosticChainToDiagnosticChain(chain.next) : undefined\n        };\n    }\n    function diagnosticMessageToDiagnosticMessageText(message) {\n        if (typeof message === 'string') {\n            return message;\n        }\n        return diagnosticChainToDiagnosticChain(message);\n    }\n    function diagnosticToDiagnostic(d, file) {\n        var result = {\n            file: file,\n            start: d.span.start,\n            length: d.span.end - d.span.start,\n            messageText: diagnosticMessageToDiagnosticMessageText(d.message),\n            category: ts.DiagnosticCategory.Error,\n            code: 0,\n            source: 'ng'\n        };\n        return result;\n    }\n    function tryOperation(attempting, callback) {\n        try {\n            return callback();\n        }\n        catch (e) {\n            info.project.projectService.logger.info(\"Failed to \" + attempting + \": \" + e.toString());\n            info.project.projectService.logger.info(\"Stack trace: \" + e.stack);\n            return null;\n        }\n    }\n    var serviceHost = new TypeScriptServiceHost(info.languageServiceHost, info.languageService);\n    var ls = createLanguageService(serviceHost);\n    serviceHost.setSite(ls);\n    projectHostMap.set(info.project, serviceHost);\n    proxy.getCompletionsAtPosition = function (fileName, position, options) {\n        var base = oldLS.getCompletionsAtPosition(fileName, position, options) || {\n            isGlobalCompletion: false,\n            isMemberCompletion: false,\n            isNewIdentifierLocation: false,\n            entries: []\n        };\n        tryOperation('get completions', function () {\n            var results = ls.getCompletionsAt(fileName, position);\n            if (results && results.length) {\n                if (base === undefined) {\n                    base = {\n                        isGlobalCompletion: false,\n                        isMemberCompletion: false,\n                        isNewIdentifierLocation: false,\n                        entries: []\n                    };\n                }\n                try {\n                    for (var results_1 = __values(results), results_1_1 = results_1.next(); !results_1_1.done; results_1_1 = results_1.next()) {\n                        var entry = results_1_1.value;\n                        base.entries.push(completionToEntry(entry));\n                    }\n                }\n                catch (e_1_1) { e_1 = { error: e_1_1 }; }\n                finally {\n                    try {\n                        if (results_1_1 && !results_1_1.done && (_a = results_1.return)) _a.call(results_1);\n                    }\n                    finally { if (e_1) throw e_1.error; }\n                }\n            }\n            var e_1, _a;\n        });\n        return base;\n    };\n    proxy.getQuickInfoAtPosition = function (fileName, position) {\n        var base = oldLS.getQuickInfoAtPosition(fileName, position);\n        // TODO(vicb): the tags property has been removed in TS 2.2\n        tryOperation('get quick info', function () {\n            var ours = ls.getHoverAt(fileName, position);\n            if (ours) {\n                var displayParts = [];\n                try {\n                    for (var _a = __values(ours.text), _b = _a.next(); !_b.done; _b = _a.next()) {\n                        var part = _b.value;\n                        displayParts.push({ kind: part.language || 'angular', text: part.text });\n                    }\n                }\n                catch (e_2_1) { e_2 = { error: e_2_1 }; }\n                finally {\n                    try {\n                        if (_b && !_b.done && (_c = _a.return)) _c.call(_a);\n                    }\n                    finally { if (e_2) throw e_2.error; }\n                }\n                var tags = base && base.tags;\n                base = {\n                    displayParts: displayParts,\n                    documentation: [],\n                    kind: 'angular',\n                    kindModifiers: 'what does this do?',\n                    textSpan: { start: ours.span.start, length: ours.span.end - ours.span.start },\n                };\n                if (tags) {\n                    base.tags = tags;\n                }\n            }\n            var e_2, _c;\n        });\n        return base;\n    };\n    proxy.getSemanticDiagnostics = function (fileName) {\n        var result = oldLS.getSemanticDiagnostics(fileName);\n        var base = result || [];\n        tryOperation('get diagnostics', function () {\n            info.project.projectService.logger.info(\"Computing Angular semantic diagnostics...\");\n            var ours = ls.getDiagnostics(fileName);\n            if (ours && ours.length) {\n                var file_1 = oldLS.getProgram().getSourceFile(fileName);\n                if (file_1) {\n                    base.push.apply(base, ours.map(function (d) { return diagnosticToDiagnostic(d, file_1); }));\n                }\n            }\n        });\n        return base;\n    };\n    proxy.getDefinitionAtPosition = function (fileName, position) {\n        var base = oldLS.getDefinitionAtPosition(fileName, position);\n        if (base && base.length) {\n            return base;\n        }\n        return tryOperation('get definition', function () {\n            var ours = ls.getDefinitionAt(fileName, position);\n            if (ours && ours.length) {\n                base = base || [];\n                try {\n                    for (var ours_1 = __values(ours), ours_1_1 = ours_1.next(); !ours_1_1.done; ours_1_1 = ours_1.next()) {\n                        var loc = ours_1_1.value;\n                        base.push({\n                            fileName: loc.fileName,\n                            textSpan: { start: loc.span.start, length: loc.span.end - loc.span.start },\n                            name: '',\n                            // TODO: remove any and fix type error.\n                            kind: 'definition',\n                            containerName: loc.fileName,\n                            containerKind: 'file',\n                        });\n                    }\n                }\n                catch (e_3_1) { e_3 = { error: e_3_1 }; }\n                finally {\n                    try {\n                        if (ours_1_1 && !ours_1_1.done && (_a = ours_1.return)) _a.call(ours_1);\n                    }\n                    finally { if (e_3) throw e_3.error; }\n                }\n            }\n            return base;\n            var e_3, _a;\n        }) || [];\n    };\n    return proxy;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * @module\n * @description\n * Entry point for all public APIs of the common package.\n */\n/**\n *\n */\nvar VERSION$3 = new Version$1('6.0.0-rc.4');\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * @module\n * @description\n * Entry point for all public APIs of the language service package.\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nexports.createLanguageService = createLanguageService;\nexports.TypeScriptServiceHost = TypeScriptServiceHost;\nexports.createLanguageServiceFromTypescript = createLanguageServiceFromTypescript;\nexports.VERSION = VERSION$3;\nexports.getExternalFiles = getExternalFiles;\nexports.create = create;\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\n});\n//# sourceMappingURL=language-service.umd.js.map\n"]}